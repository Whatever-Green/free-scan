/*
 MIT License - http://www.opensource.org/licenses/mit-license.php

 For usage and examples, visit:
 http://timeago.yarp.com/

 Copyright (c) 2008-2011, Ryan McGeary (ryanonjavascript -[at]- mcgeary [*dot*] org)
 Bruno Morency
 @license MOZILLA PUBLIC LICENSE Version 1.1 - http://www.mozilla.org/MPL/MPL-1.1.txt 
 jQuery v3.7.0 | (c) OpenJS Foundation and other contributors | jquery.org/license  jQuery UI - v1.12.1 - 2017-06-01
 http://jqueryui.com
 Includes: widget.js, data.js, scroll-parent.js, widgets/draggable.js, widgets/sortable.js, widgets/mouse.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery Cookie Plugin v1.4.1
 https://github.com/carhartl/jquery-cookie

 Copyright 2013 Klaus Hartl
 Released under the MIT license
 jQuery imagesLoaded plugin v2.1.0
 http://github.com/desandro/imagesloaded

 MIT License. by Paul Irish et al.
 backbone.paginator - v0.8.1 - 7/3/2013
 http://github.com/addyosmani/backbone.paginator
 Copyright (c) 2013 Addy Osmani; Licensed MIT  Litepicker v1.5.7 (https://github.com/wakirin/Litepicker)
     Package: litepicker (https://www.npmjs.com/package/litepicker)
     License: MIT (https://github.com/wakirin/Litepicker/blob/master/LICENCE.md)
     Copyright 2019-2020 Rinat G.

     Hash: 85b7ce11883a11b98abb
     Generated on: 1592979305748

 Extracted from jQuery.browser method (removed from jQuery since 1.9)
 --- TODO: use feature detection to avoid the use of this lib (Modernizr)
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,f){a!=Array.prototype&&a!=Object.prototype&&(a[c]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,c,f,e){if(c){f=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in f||(f[d]={});f=f[d]}a=a[a.length-1];e=f[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:c})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function c(){this.batch_=null}function f(a){return a instanceof d?a:new d(function(c,d){c(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};c.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(a){e(a,
0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var d=a[c];a[c]=null;try{d()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(m){c.reject(m)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(h){d||(d=!0,a.call(c,h))}}var c=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(m){this.reject_(m);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)h.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var h=new c;d.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};d.prototype.settleSameAsThenable_=function(a,c){var d=this.createResolveAndReject_();try{a.call(c,d.resolve,d.reject)}catch(n){d.reject(n)}};d.prototype.then=function(a,c){function h(a,c){return"function"==typeof a?function(c){try{e(a(c))}catch(w){f(w)}}:
c}var e,f,k=new d(function(a,c){e=a;f=c});this.callWhenSettled_(h(a,e),h(c,f));return k};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,c){function d(){switch(e.state_){case 1:a(e.result_);break;case 2:c(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?h.asyncExecute(d):this.onSettledCallbacks_.push(d)};d.resolve=f;d.reject=function(a){return new d(function(c,d){d(a)})};d.race=function(a){return new d(function(c,
d){for(var h=$jscomp.makeIterator(a),e=h.next();!e.done;e=h.next())f(e.value).callWhenSettled_(c,d)})};d.all=function(a){var c=$jscomp.makeIterator(a),h=c.next();return h.done?f([]):new d(function(a,d){function e(c){return function(d){k[c]=d;m--;0==m&&a(k)}}var k=[],m=0;do k.push(void 0),m++,f(h.value).callWhenSettled_(e(k.length-1),d),h=c.next();while(!h.done)})};return d},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},c={};try{return c.__proto__=a,c.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,c){this.nextAddress=c;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,c){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=c;else return this.yieldAllIterator_=a,this.yield(f.value,c)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,c){this.catchAddress_=a;void 0!=c&&(this.finallyAddress_=c)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,c){this.nextAddress=a;this.catchAddress_=c||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,c,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=c||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,c){c=this.finallyContexts_.splice(c||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var c in a)this.properties_.push(c);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var c=this.context_.yieldAllIterator_;if(c)return this.yieldAllStep_("return"in c?c["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,c,f){try{var e=a.call(this.context_.yieldAllIterator_,c);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var d=e.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,d);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(c){this.context_.yieldResult=void 0,this.context_.throw_(c)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(c){return a.next_(c)};this.throw=function(c){return a.throw_(c)};this.return=function(c){return a.return_(c)};$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,c){c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(a){function c(c){return a.next(c)}function f(c){return a.throw(c)}return new Promise(function(e,d){function h(a){a.done?e(a.value):Promise.resolve(a.value).then(c,f).then(h,d)}h(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var c=function(){};c.prototype=a;return new c};$jscomp.inherits=function(a,c){a.prototype=$jscomp.objectCreate(c.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var f=$jscomp.setPrototypeOf;f(a,c)}else for(f in c)if("prototype"!=f)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,f);e&&Object.defineProperty(a,f,e)}else a[f]=c[f];a.superClass_=c.prototype};
$jscomp.arrayFromIterator=function(a){for(var c,f=[];!(c=a.next()).done;)f.push(c.value);return f};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.findInternal=function(a,c,f){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var h=a[d];if(c.call(f,h,d,a))return{i:d,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6","es3");$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,e={next:function(){if(f<a.length){var d=f++;return{value:c(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).i}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,f){return f})}},"es8","es3");
$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};$jscomp.polyfill("Object.entries",function(a){return a?a:function(a){var c=[],e;for(e in a)$jscomp.owns(a,e)&&c.push([e,a[e]]);return c}},"es8","es3");$jscomp.polyfill("Object.setPrototypeOf",function(a){return a||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,c){for(var f=1;f<arguments.length;f++){var e=arguments[f];if(e)for(var d in e)$jscomp.owns(e,d)&&(a[d]=e[d])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");
$jscomp.checkStringArgs=function(a,c,f){if(null==a)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,f){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var d=c.length,h=a.length;f=Math.max(0,Math.min(f|0,c.length));for(var k=0;k<h&&f<d;)if(c[f++]!=a[k++])return!1;return k>=h}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,f,e){var c=this.length||0;0>f&&(f=Math.max(0,c+f));if(null==e||e>c)e=c;e=Number(e);0>e&&(e=Math.max(0,c+e));for(f=Number(f||0);f<e;f++)this[f]=a;return this}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,f,e){$jscomp.initSymbolIterator();f=null!=f?f:function(a){return a};var c=[],h=a[Symbol.iterator];if("function"==typeof h)for(a=h.call(a);!(h=a.next()).done;)c.push(f.call(e,h.value));else{h=a.length;for(var k=0;k<h;k++)c.push(f.call(e,a[k]))}return c}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,f){return[a,f]})}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var c=this;c instanceof String&&(c=String(c));var d=c.length;f=f||0;for(0>f&&(f=Math.max(f+d,0));f<d;f++){var h=c[f];if(h===a||Object.is(h,a))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,f){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,f||0)}},"es6","es3");var JSON;JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var c=l[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a,d){var e=h,l=d[a];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof m&&(l=m.call(d,a,l));switch(typeof l){case "string":return c(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";h+=k;var n=[];if("[object Array]"===Object.prototype.toString.apply(l)){var q=l.length;for(a=0;a<q;a+=1)n[a]=f(a,l)||"null";d=0===n.length?"[]":h?"[\n"+h+n.join(",\n"+h)+"\n"+e+"]":"["+n.join(",")+"]";h=e;return d}if(m&&"object"===typeof m)for(q=m.length,a=0;a<q;a+=1){if("string"===typeof m[a]){var w=m[a];(d=f(w,l))&&n.push(c(w)+(h?": ":":")+d)}}else for(w in l)Object.prototype.hasOwnProperty.call(l,w)&&(d=f(w,l))&&n.push(c(w)+(h?": ":":")+d);d=0===n.length?"{}":h?
"{\n"+h+n.join(",\n"+h)+"\n"+e+"}":"{"+n.join(",")+"}";h=e;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,k,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var e;k=h="";if("number"===typeof d)for(e=0;e<d;e+=1)k+=" ";else"string"===typeof d&&(k=d);if((m=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return f("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function d(a,h){var e,f=a[h];if(f&&"object"===typeof f)for(e in f)if(Object.prototype.hasOwnProperty.call(f,e)){var k=d(f,e);void 0!==k?f[e]=k:delete f[e]}return c.call(a,h,f)}a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a=eval("("+a+")"),"function"===typeof c?d({"":a},""):a;throw new SyntaxError("JSON.parse");})})();
(function(){var a={},c=this,f=c.async;"undefined"!==typeof module&&module.exports?module.exports=a:c.async=a;a.noConflict=function(){c.async=f;return a};var e=function(a,c){if(a.forEach)return a.forEach(c);for(var d=0;d<a.length;d+=1)c(a[d],d,a)},d=function(a,c){if(a.map)return a.map(c);var d=[];e(a,function(a,h,e){d.push(c(a,h,e))});return d},h=function(a,c,d){if(a.reduce)return a.reduce(c,d);e(a,function(a,h,e){d=c(d,a,h,e)});return d},k=function(a){if(Object.keys)return Object.keys(a);var c=[],
d;for(d in a)a.hasOwnProperty(d)&&c.push(d);return c};a.nextTick="undefined"!==typeof process&&process.nextTick?process.nextTick:function(a){setTimeout(a,0)};a.forEach=function(a,c,d){d=d||function(){};if(!a.length)return d();var h=0;e(a,function(e){c(e,function(c){c?(d(c),d=function(){}):(h+=1,h===a.length&&d())})})};a.forEachSeries=function(a,c,d){d=d||function(){};if(!a.length)return d();var h=0,e=function(){c(a[h],function(c){c?(d(c),d=function(){}):(h+=1,h===a.length?d():e())})};e()};a.forEachLimit=
function(a,c,d,h){h=h||function(){};if(!a.length||0>=c)return h();var e=0,f=0,k=0;(function A(){if(e===a.length)return h();for(;k<c&&f<a.length;)d(a[f],function(c){c?(h(c),h=function(){}):(e+=1,--k,e===a.length?h():A())}),f+=1,k+=1})()};var l=function(c){return function(){var d=Array.prototype.slice.call(arguments);return c.apply(null,[a.forEach].concat(d))}},m=function(c){return function(){var d=Array.prototype.slice.call(arguments);return c.apply(null,[a.forEachSeries].concat(d))}},n=function(a,
c,h,e){var f=[];c=d(c,function(a,c){return{index:c,value:a}});a(c,function(a,c){h(a.value,function(d,h){f[a.index]=h;c(d)})},function(a){e(a,f)})};a.map=l(n);a.mapSeries=m(n);a.reduce=function(c,d,h,e){a.forEachSeries(c,function(a,c){h(d,a,function(a,h){d=h;c(a)})},function(a){e(a,d)})};a.inject=a.reduce;a.foldl=a.reduce;a.reduceRight=function(c,h,e,f){c=d(c,function(a){return a}).reverse();a.reduce(c,h,e,f)};a.foldr=a.reduceRight;n=function(a,c,h,e){var f=[];c=d(c,function(a,c){return{index:c,value:a}});
a(c,function(a,c){h(a.value,function(d){d&&f.push(a);c()})},function(a){e(d(f.sort(function(a,c){return a.index-c.index}),function(a){return a.value}))})};a.filter=l(n);a.filterSeries=m(n);a.select=a.filter;a.selectSeries=a.filterSeries;n=function(a,c,h,e){var f=[];c=d(c,function(a,c){return{index:c,value:a}});a(c,function(a,c){h(a.value,function(d){d||f.push(a);c()})},function(a){e(d(f.sort(function(a,c){return a.index-c.index}),function(a){return a.value}))})};a.reject=l(n);a.rejectSeries=m(n);
n=function(a,c,d,h){a(c,function(a,c){d(a,function(d){d?(h(a),h=function(){}):c()})},function(a){h()})};a.detect=l(n);a.detectSeries=m(n);a.some=function(c,d,h){a.forEach(c,function(a,c){d(a,function(a){a&&(h(!0),h=function(){});c()})},function(a){h(!1)})};a.any=a.some;a.every=function(c,d,h){a.forEach(c,function(a,c){d(a,function(a){a||(h(!1),h=function(){});c()})},function(a){h(!0)})};a.all=a.every;a.sortBy=function(c,h,e){a.map(c,function(a,c){h(a,function(d,h){d?c(d):c(null,{value:a,criteria:h})})},
function(a,c){if(a)return e(a);e(null,d(c.sort(function(a,c){a=a.criteria;c=c.criteria;return a<c?-1:a>c?1:0}),function(a){return a.value}))})};a.auto=function(a,c){c=c||function(){};var d=k(a);if(!d.length)return c(null);var f={},m=[],l=function(){e(m.slice(0),function(a){a()})};m.unshift(function(){k(f).length===d.length&&(c(null,f),c=function(){})});e(d,function(d){var e=a[d]instanceof Function?[a[d]]:a[d],k=function(a){if(a)c(a),c=function(){};else{var h=Array.prototype.slice.call(arguments,1);
1>=h.length&&(h=h[0]);f[d]=h;l()}},n=e.slice(0,Math.abs(e.length-1))||[],q=function(){return h(n,function(a,c){return a&&f.hasOwnProperty(c)},!0)};if(q())e[e.length-1](k,f);else{var t=function(){if(q()){a:for(var a=t,c=0;c<m.length;c+=1)if(m[c]===a){m.splice(c,1);break a}e[e.length-1](k,f)}};m.unshift(t)}})};a.waterfall=function(c,d){d=d||function(){};if(!c.length)return d();var h=function(c){return function(e){if(e)d(e),d=function(){};else{var f=Array.prototype.slice.call(arguments,1),k=c.next();
k?f.push(h(k)):f.push(d);a.nextTick(function(){c.apply(null,f)})}}};h(a.iterator(c))()};a.parallel=function(c,d){d=d||function(){};if(c.constructor===Array)a.map(c,function(a,c){a&&a(function(a){var d=Array.prototype.slice.call(arguments,1);1>=d.length&&(d=d[0]);c.call(null,a,d)})},d);else{var h={};a.forEach(k(c),function(a,d){c[a](function(c){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);h[a]=e;d(c)})},function(a){d(a,h)})}};a.series=function(c,d){d=d||function(){};if(c.constructor===
Array)a.mapSeries(c,function(a,c){a&&a(function(a){var d=Array.prototype.slice.call(arguments,1);1>=d.length&&(d=d[0]);c.call(null,a,d)})},d);else{var h={};a.forEachSeries(k(c),function(a,d){c[a](function(c){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);h[a]=e;d(c)})},function(a){d(a,h)})}};a.iterator=function(a){var c=function(d){var h=function(){a.length&&a[d].apply(null,arguments);return h.next()};h.next=function(){return d<a.length-1?c(d+1):null};return h};return c(0)};a.apply=
function(a){var c=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,c.concat(Array.prototype.slice.call(arguments)))}};n=function(a,c,d,h){var e=[];a(c,function(a,c){d(a,function(a,d){e=e.concat(d||[]);c(a)})},function(a){h(a,e)})};a.concat=l(n);a.concatSeries=m(n);a.whilst=function(c,d,h){c()?d(function(e){if(e)return h(e);a.whilst(c,d,h)}):h()};a.until=function(c,d,h){c()?h():d(function(e){if(e)return h(e);a.until(c,d,h)})};a.queue=function(c,d){var h=0,f={tasks:[],concurrency:d,
saturated:null,empty:null,drain:null,push:function(c,h){c.constructor!==Array&&(c=[c]);e(c,function(c){f.tasks.push({data:c,callback:"function"===typeof h?h:null});f.saturated&&f.tasks.length==d&&f.saturated();a.nextTick(f.process)})},process:function(){if(h<f.concurrency&&f.tasks.length){var a=f.tasks.shift();f.empty&&0==f.tasks.length&&f.empty();h+=1;c(a.data,function(){--h;a.callback&&a.callback.apply(a,arguments);f.drain&&0==f.tasks.length+h&&f.drain();f.process()})}},length:function(){return f.tasks.length},
running:function(){return h}};return f};l=function(a){return function(c){var d=Array.prototype.slice.call(arguments,1);c.apply(null,d.concat([function(c){var d=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(c?console.error&&console.error(c):console[a]&&e(d,function(c){console[a](c)}))}]))}};a.log=l("log");a.dir=l("dir");a.memoize=function(a,c){var d={},h={};c=c||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),k=c.apply(null,e);k in
d?f.apply(null,d[k]):k in h?h[k].push(f):(h[k]=[f],a.apply(null,e.concat([function(){d[k]=arguments;var a=h[k];delete h[k];for(var c=0,e=a.length;c<e;c++)a[c].apply(null,arguments)}])))};e.unmemoized=a;return e};a.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}}})();window&&!window.InflectionJS&&(window.InflectionJS=null);
InflectionJS={uncountable_words:"equipment information rice money species series fish sheep moose deer news".split(" "),plural_rules:[[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,
"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(quiz)$/gi,"$1zes"],[/s$/gi,"s"],[/$/gi,"s"]],singular_rules:[[/(m)en$/gi,"$1an"],[/(pe)ople$/gi,"$1rson"],[/(child)ren$/gi,"$1"],[/([ti])a$/gi,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis"],[/(hive)s$/gi,"$1"],[/(tive)s$/gi,"$1"],[/(curve)s$/gi,"$1"],[/([lr])ves$/gi,"$1f"],[/([^fo])ves$/gi,"$1fe"],[/([^aeiouy]|qu)ies$/gi,"$1y"],[/(s)eries$/gi,"$1eries"],[/(m)ovies$/gi,"$1ovie"],[/(x|ch|ss|sh)es$/gi,
"$1"],[/([m|l])ice$/gi,"$1ouse"],[/(bus)es$/gi,"$1"],[/(o)es$/gi,"$1"],[/(shoe)s$/gi,"$1"],[/(cris|ax|test)es$/gi,"$1is"],[/(octop|vir)i$/gi,"$1us"],[/(alias|status)es$/gi,"$1"],[/^(ox)en/gi,"$1"],[/(vert|ind)ices$/gi,"$1ex"],[/(matr)ices$/gi,"$1ix"],[/(quiz)zes$/gi,"$1"],[/s$/gi,""]],non_titlecased_words:"and or nor a an the so but to of at by from into on onto off out in over with for".split(" "),id_suffix:/(_ids|_id)$/g,underbar:/_/g,space_or_underbar:/[ _]/g,uppercase:/([A-Z])/g,underbar_prefix:/^_/,
apply_rules:function(a,c,f,e){if(e)a=e;else if(!(-1<f.indexOf(a.toLowerCase())))for(f=0;f<c.length;f++)if(a.match(c[f][0])){a=a.replace(c[f][0],c[f][1]);break}return a}};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c,f){c||(c=-1);for(var e=-1;c<this.length;c++)if(this[c]===a||f&&f(this[c],a)){e=c;break}return e});String.prototype._uncountable_words||(String.prototype._uncountable_words=InflectionJS.uncountable_words);
String.prototype._plural_rules||(String.prototype._plural_rules=InflectionJS.plural_rules);String.prototype._singular_rules||(String.prototype._singular_rules=InflectionJS.singular_rules);String.prototype._non_titlecased_words||(String.prototype._non_titlecased_words=InflectionJS.non_titlecased_words);String.prototype.pluralize||(String.prototype.pluralize=function(a){return InflectionJS.apply_rules(this,this._plural_rules,this._uncountable_words,a)});
String.prototype.singularize||(String.prototype.singularize=function(a){return InflectionJS.apply_rules(this,this._singular_rules,this._uncountable_words,a)});String.prototype.camelize||(String.prototype.camelize=function(a){var c=this.toLowerCase();c=c.split("/");for(var f=0;f<c.length;f++){for(var e=c[f].split("_"),d=a&&f+1===c.length?1:0;d<e.length;d++)e[d]=e[d].charAt(0).toUpperCase()+e[d].substring(1);c[f]=e.join("")}return c=c.join("::")});
String.prototype.underscore||(String.prototype.underscore=function(){for(var a=this.split("::"),c=0;c<a.length;c++)a[c]=a[c].replace(InflectionJS.uppercase,"_$1"),a[c]=a[c].replace(InflectionJS.underbar_prefix,"");return a.join("/").toLowerCase()});
String.prototype.humanize||(String.prototype.humanize=function(a,c){var f=this.toLowerCase();c&&"["!==I18n.t("activerecord.attributes."+c+"."+this).charAt(0)&&(f=I18n.t("activerecord.attributes."+c+"."+this));f=f.replace(InflectionJS.id_suffix,"");f=f.replace(InflectionJS.underbar," ");a||(f=f.capitalize(!1));return f});String.prototype.capitalize||(String.prototype.capitalize=function(a){void 0===a&&(a=!0);a=a?this.toLowerCase():this;return a=a.substring(0,1).toUpperCase()+a.substring(1)});
String.prototype.dasherize||(String.prototype.dasherize=function(){return this.replace(InflectionJS.space_or_underbar,"-")});String.prototype.titleize||(String.prototype.titleize=function(){var a=this.toLowerCase();a=a.replace(InflectionJS.underbar," ");a=a.split(" ");for(var c=0;c<a.length;c++){for(var f=a[c].split("-"),e=0;e<f.length;e++)0>this._non_titlecased_words.indexOf(f[e].toLowerCase())&&(f[e]=f[e].capitalize());a[c]=f.join("-")}a=a.join(" ");return a=a.substring(0,1).toUpperCase()+a.substring(1)});
String.prototype.demodulize||(String.prototype.demodulize=function(){var a=this.split("::");return a[a.length-1]});String.prototype.tableize||(String.prototype.tableize=function(){return this.underscore().pluralize()});String.prototype.classify||(String.prototype.classify=function(){return this.camelize().singularize()});String.prototype.foreign_key||(String.prototype.foreign_key=function(a){return this.demodulize().underscore()+(a?"":"_")+"id"});
String.prototype.ordinalize||(String.prototype.ordinalize=function(){for(var a=this.split(" "),c=0;c<a.length;c++)if(NaN===parseInt(a[c])){var f=a[c].substring(a[c].length-2),e=a[c].substring(a[c].length-1),d="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===e?d="st":"2"===e?d="nd":"3"===e&&(d="rd"));a[c]+=d}return a.join(" ")});
(function(a){function c(a,c,d,h){var e=d.lang();return e[a].call?e[a](d,h):e[a][c]}function f(a,c){return function(d){return l(a.call(this,d),c)}}function e(a){return function(c){c=a.call(this,c);return c+this.lang().ordinal(c)}}function d(a,c,d){this._d=a;this._isUTC=!!c;this._a=a._a||null;this._lang=d||!1}function h(a){var c=this._data={},d=a.years||a.y||0,h=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,m=a.hours||a.h||0,l=a.minutes||a.m||0,n=a.seconds||a.s||0;a=a.milliseconds||a.ms||0;this._milliseconds=
a+1E3*n+6E4*l+36E5*m;this._days=f+7*e;this._months=h+12*d;c.milliseconds=a%1E3;n+=k(a/1E3);c.seconds=n%60;l+=k(n/60);c.minutes=l%60;m+=k(l/60);c.hours=m%24;f+=k(m/24);f+=7*e;c.days=f%30;h+=k(f/30);c.months=h%12;d+=k(h/12);c.years=d;this._lang=!1}function k(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,c){for(a+="";a.length<c;)a="0"+a;return a}function m(a,c,d){var h=c._milliseconds,e=c._days;c=c._months;h&&a._d.setTime(+a+h*d);e&&a.date(a.date()+e*d);c&&(h=a.date(),a.date(1).month(a.month()+
c*d).date(Math.min(h,a.daysInMonth())))}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function q(a,c){var d=Math.min(a.length,c.length),h=Math.abs(a.length-c.length),e=0,f;for(f=0;f<d;f++)~~a[f]!==~~c[f]&&e++;return e+h}function t(a,c,d,h){var e,f=[];for(e=0;7>e;e++)f[e]=a[e]=null==a[e]?2===e?1:0:a[e];a[7]=f[7]=c;null!=a[8]&&(f[8]=a[8]);a[3]+=d||0;a[4]+=h||0;d=new Date(0);c?(d.setUTCFullYear(a[0],a[1],a[2]),d.setUTCHours(a[3],a[4],a[5],a[6])):(d.setFullYear(a[0],a[1],a[2]),
d.setHours(a[3],a[4],a[5],a[6]));d._a=f;return d}function y(a,c){var d,h=[];!c&&oa&&(c=require("./lang/"+a));for(d=0;d<ea.length;d++)c[ea[d]]=c[ea[d]]||Z.en[ea[d]];for(d=0;12>d;d++){var e=B([2E3,d]);h[d]=new RegExp("^"+(c.months[d]||c.months(e,""))+"|^"+(c.monthsShort[d]||c.monthsShort(e,"")).replace(".",""),"i")}c.monthsParse=c.monthsParse||h;return Z[a]=c}function v(a){return(a="string"===typeof a&&a||a&&a._lang||null)?Z[a]||y(a):B}function x(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):
a.replace(/\\/g,"")}function w(a){var c=a.match(S),d;var h=0;for(d=c.length;h<d;h++)c[h]=ja[c[h]]?ja[c[h]]:x(c[h]);return function(e){var f="";for(h=0;h<d;h++)f+="function"===typeof c[h].call?c[h].call(e,a):c[h];return f}}function z(a,c){function d(c){return a.lang().longDateFormat[c]||c}for(var h=5;h--&&W.test(c);)c=c.replace(W,d);wa[c]||(wa[c]=w(c));return wa[c](a)}function u(a){switch(a){case "DDDD":return ka;case "YYYY":return T;case "S":case "SS":case "SSS":case "DDD":return aa;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return P;
case "Z":case "ZZ":return K;case "T":return I;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return ra;default:return new RegExp(a.replace("\\",""))}}function A(a,c){var d=[0,0,1,0,0,0,0],h={tzh:0,tzm:0};c=c.match(S);var e,f;for(e=0;e<c.length;e++)if((f=(u(c[e]).exec(a)||[])[0])&&(a=a.slice(a.indexOf(f)+f.length)),ja[c[e]]){var k=void 0,m=f,l=d,n=h;switch(c[e]){case "M":case "MM":l[1]=null==m?0:~~m-1;break;case "MMM":case "MMMM":for(f=
0;12>f;f++)if(v().monthsParse[f].test(m)){l[1]=f;k=!0;break}k||(l[8]=!1);break;case "D":case "DD":case "DDD":case "DDDD":null!=m&&(l[2]=~~m);break;case "YY":l[0]=~~m+(70<~~m?1900:2E3);break;case "YYYY":l[0]=~~Math.abs(m);break;case "a":case "A":n.isPm="pm"===(m+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":l[3]=~~m;break;case "m":case "mm":l[4]=~~m;break;case "s":case "ss":l[5]=~~m;break;case "S":case "SS":case "SSS":l[6]=~~(1E3*("0."+m));break;case "Z":case "ZZ":n.isUTC=!0,(f=(m+
"").match(J))&&f[1]&&(n.tzh=~~f[1]),f&&f[2]&&(n.tzm=~~f[2]),f&&"+"===f[0]&&(n.tzh=-n.tzh,n.tzm=-n.tzm)}null==m&&(l[8]=!1)}h.isPm&&12>d[3]&&(d[3]+=12);!1===h.isPm&&12===d[3]&&(d[3]=0);return t(d,h.isUTC,h.tzh,h.tzm)}function C(a,c,d,h,e){e=e.relativeTime[a];return"function"===typeof e?e(c||1,!!d,a,h):e.replace(/%d/i,c||1)}function D(a,c){B.fn[a]=function(a){var d=this._isUTC?"UTC":"";return null!=a?(this._d["set"+d+c](a),this):this._d["get"+d+c]()}}function O(a){B.duration.fn[a]=function(){return this._data[a]}}
function G(a,c){B.duration.fn["as"+a]=function(){return+this/c}}for(var B,U=Math.round,M,Z={},fa="en",oa="undefined"!==typeof module&&module.exports,ea="months monthsShort weekdays weekdaysShort weekdaysMin longDateFormat calendar relativeTime ordinal meridiem".split(" "),X=/^\/?Date\((\-?\d+)/i,S=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,W=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,ba=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,
ra=/\d\d?/,aa=/\d{1,3}/,ka=/\d{3}/,T=/\d{1,4}/,P=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,K=/Z|[\+\-]\d\d:?\d\d/i,I=/T/i,Q=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ma=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],J=/([\+\-]|\d\d)/gi,ca="Month Date Hours Minutes Seconds Milliseconds".split(" "),da={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},
wa={},ha=["DDD","w","M","D","d"],ia="MDHhmsw".split(""),ja={M:function(){return this.month()+1},MMM:function(a){return c("monthsShort",this.month(),this,a)},MMMM:function(a){return c("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),c=new Date(this.year(),0,1);return~~((a-c)/864E5+1.5)},d:function(){return this.day()},dd:function(a){return c("weekdaysMin",this.day(),this,a)},ddd:function(a){return c("weekdaysShort",
this.day(),this,a)},dddd:function(a){return c("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),c=new Date(a.getFullYear(),0,4);return~~((a-c)/864E5/7+1.5)},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%
12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone(),c="+";0>a&&(a=-a,c="-");return c+l(~~(a/60),2)+":"+l(~~a%60,2)},ZZ:function(){var a=-this.zone(),c="+";0>a&&(a=-a,c="-");return c+l(~~(10*a/6),4)}};ha.length;)M=ha.pop(),ja[M+"o"]=e(ja[M]);for(;ia.length;)M=ia.pop(),ja[M+M]=f(ja[M],2);ja.DDDD=
f(ja.DDD,3);B=function(c,h){if(null===c||""===c)return null;if(B.isMoment(c))return new d(new Date(+c._d),c._isUTC,c._lang);if(h)if(n(h)){var e=c.match(ba)||[],f=99,k;for(k=0;k<h.length;k++){var m=A(c,h[k]);var l=z(new d(m),h[k]).match(ba)||[];l=q(e,l);if(l<f){f=l;var v=m}}c=v}else c=A(c,h);else if(h=X.exec(c),c===a)c=new Date;else if(h)c=new Date(+h[1]);else if(!(c instanceof Date))if(n(c))c=t(c);else if("string"===typeof c)if(h="YYYY-MM-DDT",Q.exec(c)){for(v=0;4>v;v++)if(ma[v][1].exec(c)){h+=ma[v][0];
break}c=K.exec(c)?A(c,h+" Z"):A(c,h)}else c=new Date(c);else c=new Date(c);return new d(c)};B.utc=function(a,c){if(n(a))return new d(t(a,!0),!0);"string"!==typeof a||K.exec(a)||(a+=" +0000",c&&(c+=" Z"));return B(a,c).utc()};B.unix=function(a){return B(1E3*a)};B.duration=function(a,c){var d=B.isDuration(a),e="number"===typeof a,f=d?a._data:e?{}:a;e&&(c?f[c]=a:f.milliseconds=a);c=new h(f);d&&(c._lang=a._lang);return c};B.humanizeDuration=function(a,c,d){return B.duration(a,!0===c?null:c).humanize(!0===
c?!0:d)};B.version="1.7.2";B.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";B.lang=function(a,c){if(!a)return fa;!c&&Z[a]||y(a,c);if(Z[a]){for(c=0;c<ea.length;c++)B[ea[c]]=Z[a][ea[c]];B.monthsParse=Z[a].monthsParse;fa=a}};B.langData=v;B.isMoment=function(a){return a instanceof d};B.isDuration=function(a){return a instanceof h};B.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,c,d){return 11<a?d?"pm":"PM":d?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var c=a%10;return 1===~~(a%100/10)?"th":1===c?"st":2===c?"nd":3===c?"rd":"th"}});B.fn=d.prototype={clone:function(){return B(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!q(this._a,(this._a[7]?B.utc(this._a):B(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return z(this,a?a:B.defaultFormat)},add:function(a,c){a=c?B.duration(+c,a):B.duration(a);m(this,a,1);
return this},subtract:function(a,c){a=c?B.duration(+c,a):B.duration(a);m(this,a,-1);return this},diff:function(a,c,d){a=this._isUTC?B(a).utc():B(a).local();var h=6E4*(this.zone()-a.zone());h=this._d-a._d-h;var e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();c="months"===c?12*e+f+a/30:"years"===c?e+(f+a/30)/12:"seconds"===c?h/1E3:"minutes"===c?h/6E4:"hours"===c?h/36E5:"days"===c?h/864E5:"weeks"===c?h/6048E5:h;return d?c:U(c)},from:function(a,c){return B.duration(this.diff(a)).lang(this._lang).humanize(!c)},
fromNow:function(a){return this.from(B(),a)},calendar:function(){var a=this.diff(B().sod(),"days",!0),c=this.lang().calendar,d=c.sameElse;a=-6>a?d:-1>a?c.lastWeek:0>a?c.lastDay:1>a?c.sameDay:2>a?c.nextDay:7>a?c.nextWeek:d;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<B([this.year()]).zone()||this.zone()<B([this.year(),5]).zone()},day:function(a){var c=this._isUTC?this._d.getUTCDay():
this._d.getDay();return null==a?c:this.add({d:a-c})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?
0:this._d.getTimezoneOffset()},daysInMonth:function(){return B.utc([this.year(),this.month()+1,0]).date()},lang:function(c){if(c===a)return v(this);this._lang=c;return this}};for(M=0;M<ca.length;M++)D(ca[M].toLowerCase(),ca[M]);D("year","FullYear");B.duration.fn=h.prototype={weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var c=+this,d=this.lang().relativeTime;var h=!a;var e=this.lang(),f=U(Math.abs(c)/
1E3),k=U(f/60),m=U(k/60),l=U(m/24),n=U(l/365);f=45>f&&["s",f]||1===k&&["m"]||45>k&&["mm",k]||1===m&&["h"]||22>m&&["hh",m]||1===l&&["d"]||25>=l&&["dd",l]||45>=l&&["M"]||345>l&&["MM",U(l/30)]||1===n&&["y"]||["yy",n];f[2]=h;f[3]=0<c;f[4]=e;h=C.apply({},f);c=0>=c?d.past:d.future;a&&(h="function"===typeof c?c(h):c.replace(/%s/i,h));return h},lang:B.fn.lang};for(M in da)da.hasOwnProperty(M)&&(G(M,da[M]),O(M.toLowerCase()));G("Weeks",6048E5);oa&&(module.exports=B);"undefined"===typeof ender&&(this.moment=
B);"function"===typeof define&&define.amd&&define("moment",[],function(){return B})}).call(this);
!function(a,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?c(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,c){function f(a,c,d){var h,e,f=(d=d||F).createElement("script");if(f.text=a,c)for(h in kb)(e=c[h]||c.getAttribute&&c.getAttribute(h))&&f.setAttribute(h,e);d.head.appendChild(f).parentNode.removeChild(f)}function e(a){return null==a?a+"":"object"==
typeof a||"function"==typeof a?Ka[Qa.call(a)]||"object":typeof a}function d(a){var c=!!a&&"length"in a&&a.length,d=e(a);return!L(a)&&!Da(a)&&("array"===d||0===c||"number"==typeof c&&0<c&&c-1 in a)}function h(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}function k(a,c){return c?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}function l(a,c,d){return L(c)?p.grep(a,function(a,h){return!!c.call(a,h,a)!==d}):c.nodeType?p.grep(a,function(a){return a===
c!==d}):"string"!=typeof c?p.grep(a,function(a){return-1<qa.call(c,a)!==d}):p.filter(c,a,d)}function m(a,c){for(;(a=a[c])&&1!==a.nodeType;);return a}function n(a){return a}function q(a){throw a;}function t(a,c,d,h){var e;try{a&&L(e=a.promise)?e.call(a).done(c).fail(d):a&&L(e=a.then)?e.call(a,c,d):c.apply(void 0,[a].slice(h))}catch(jb){d.apply(void 0,[jb])}}function y(){F.removeEventListener("DOMContentLoaded",y);a.removeEventListener("load",y);p.ready()}function v(a,c){return c.toUpperCase()}function x(a){return a.replace(Ob,
"ms-").replace(Pb,v)}function w(){this.expando=p.expando+w.uid++}function z(a,c,d){var h,e;if(void 0===d&&1===a.nodeType)if(h="data-"+c.replace(Qb,"-$&").toLowerCase(),"string"==typeof(d=a.getAttribute(h))){try{d="true"===(e=d)||"false"!==e&&("null"===e?null:e===+e+""?+e:Rb.test(e)?JSON.parse(e):e)}catch(jb){}sa.set(a,c,d)}else d=void 0;return d}function u(a,c,d,h){var e,f,k=20,m=h?function(){return h.cur()}:function(){return p.css(a,c,"")},l=m(),n=d&&d[3]||(p.cssNumber[c]?"":"px"),q=a.nodeType&&
(p.cssNumber[c]||"px"!==n&&+l)&&Ra.exec(p.css(a,c));if(q&&q[3]!==n){l/=2;n=n||q[3];for(q=+l||1;k--;)p.style(a,c,q+n),0>=(1-f)*(1-(f=m()/l||.5))&&(k=0),q/=f;q*=2;p.style(a,c,q+n);d=d||[]}return d&&(q=+q||+l||0,e=d[1]?q+(d[1]+1)*d[2]:+d[2],h&&(h.unit=n,h.start=q,h.end=e)),e}function A(a,c){for(var d,h,e,f,k,m,l,n=[],q=0,t=a.length;q<t;q++)(h=a[q]).style&&(d=h.style.display,c?("none"===d&&(n[q]=E.get(h,"display")||null,n[q]||(h.style.display="")),""===h.style.display&&bb(h)&&(n[q]=(l=k=f=void 0,k=(e=
h).ownerDocument,m=e.nodeName,(l=tb[m])||(f=k.body.appendChild(k.createElement(m)),l=p.css(f,"display"),f.parentNode.removeChild(f),"none"===l&&(l="block"),tb[m]=l)))):"none"!==d&&(n[q]="none",E.set(h,"display",d)));for(q=0;q<t;q++)null!=n[q]&&(a[q].style.display=n[q]);return a}function C(a,c){var d;return d="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(c||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(c||"*"):[],void 0===c||c&&h(a,c)?p.merge([a],d):d}function D(a,
c){for(var d=0,h=a.length;d<h;d++)E.set(a[d],"globalEval",!c||E.get(c[d],"globalEval"))}function O(a,c,d,h,f){for(var k,m,l,n,q=c.createDocumentFragment(),t=[],R=0,v=a.length;R<v;R++)if((k=a[R])||0===k)if("object"===e(k))p.merge(t,k.nodeType?[k]:k);else if(Tb.test(k)){m=m||q.appendChild(c.createElement("div"));l=(ub.exec(k)||["",""])[1].toLowerCase();l=va[l]||va._default;m.innerHTML=l[1]+p.htmlPrefilter(k)+l[2];for(l=l[0];l--;)m=m.lastChild;p.merge(t,m.childNodes);(m=q.firstChild).textContent=""}else t.push(c.createTextNode(k));
q.textContent="";for(R=0;k=t[R++];)if(h&&-1<p.inArray(k,h))f&&f.push(k);else if(n=La(k),m=C(q.appendChild(k),"script"),n&&D(m),d)for(l=0;k=m[l++];)vb.test(k.type||"")&&d.push(k);return q}function G(){return!0}function B(){return!1}function U(a,c,d,h,e,f){var k,m;if("object"==typeof c){for(m in"string"!=typeof d&&(h=h||d,d=void 0),c)U(a,m,d,h,c[m],f);return a}if(null==h&&null==e?(e=d,h=d=void 0):null==e&&("string"==typeof d?(e=h,h=void 0):(e=h,h=d,d=void 0)),!1===e)e=B;else if(!e)return a;return 1===
f&&(k=e,(e=function(a){return p().off(a),k.apply(this,arguments)}).guid=k.guid||(k.guid=p.guid++)),a.each(function(){p.event.add(this,c,e,h,d)})}function M(a,c,d){d?(E.set(a,c,!1),p.event.add(a,c,{namespace:!1,handler:function(a){var d,h=E.get(this,c);if(1&a.isTrigger&&this[c])if(h)(p.event.special[c]||{}).delegateType&&a.stopPropagation();else{if(h=la.call(arguments),E.set(this,c,h),this[c](),d=E.get(this,c),E.set(this,c,!1),h!==d)return a.stopImmediatePropagation(),a.preventDefault(),d}else h&&
(E.set(this,c,p.event.trigger(h[0],h.slice(1),this)),a.stopPropagation(),a.isImmediatePropagationStopped=G)}})):void 0===E.get(a,c)&&p.event.add(a,c,G)}function Z(a,c){return h(a,"table")&&h(11!==c.nodeType?c:c.firstChild,"tr")&&p(a).children("tbody")[0]||a}function fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function oa(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type"),a}function ea(a,c){var d,h,e,f,k;if(1===c.nodeType){if(E.hasData(a)&&
(k=E.get(a).events))for(h in E.remove(c,"handle events"),k){var m=0;for(d=k[h].length;m<d;m++)p.event.add(c,h,k[h][m])}sa.hasData(a)&&(e=sa.access(a),f=p.extend({},e),sa.set(c,f))}}function X(a,c,d,h){c=Ba(c);var e,k,m,l=0,n=a.length,q=n-1,t=c[0],R=L(t);if(R||1<n&&"string"==typeof t&&!N.checkClone&&Ub.test(t))return a.each(function(e){var f=a.eq(e);R&&(c[0]=t.call(this,e,f.html()));X(f,c,d,h)});if(n&&(k=(e=O(c,a[0].ownerDocument,!1,a,h)).firstChild,1===e.childNodes.length&&(e=k),k||h)){for(m=(k=p.map(C(e,
"script"),fa)).length;l<n;l++){var v=e;l!==q&&(v=p.clone(v,!0,!0),m&&p.merge(k,C(v,"script")));d.call(a[l],v,l)}if(m)for(e=k[k.length-1].ownerDocument,p.map(k,oa),l=0;l<m;l++)v=k[l],vb.test(v.type||"")&&!E.access(v,"globalEval")&&p.contains(e,v)&&(v.src&&"module"!==(v.type||"").toLowerCase()?p._evalUrl&&!v.noModule&&p._evalUrl(v.src,{nonce:v.nonce||v.getAttribute("nonce")},e):f(v.textContent.replace(Wb,""),v,e))}return a}function S(a,c,d){for(var h=c?p.filter(c,a):a,e=0;null!=(c=h[e]);e++)d||1!==
c.nodeType||p.cleanData(C(c)),c.parentNode&&(d&&La(c)&&D(C(c,"script")),c.parentNode.removeChild(c));return a}function W(a,c,d){var h,e,f,k,m=lb.test(c),l=a.style;return(d=d||cb(a))&&(k=d.getPropertyValue(c)||d[c],m&&k&&(k=k.replace(Ha,"$1")||void 0),""!==k||La(a)||(k=p.style(a,c)),!N.pixelBoxStyles()&&mb.test(k)&&Xb.test(c)&&(h=l.width,e=l.minWidth,f=l.maxWidth,l.minWidth=l.maxWidth=l.width=k,k=d.width,l.width=h,l.minWidth=e,l.maxWidth=f)),void 0!==k?k+"":k}function ba(a,c){return{get:function(){if(!a())return(this.get=
c).apply(this,arguments);delete this.get}}}function ra(a){var c;if(!(c=p.cssProps[a]||wb[a])){if(!(a in xb)){a:{c=a;for(var d=c[0].toUpperCase()+c.slice(1),h=yb.length;h--;)if((c=yb[h]+d)in xb)break a;c=void 0}a=wb[a]=c||a}c=a}return c}function aa(a,c,d){return(a=Ra.exec(c))?Math.max(0,a[2]-(d||0))+(a[3]||"px"):c}function ka(a,c,d,h,e,f){var k="width"===c?1:0,m=0,l=0,n=0;if(d===(h?"border":"content"))return 0;for(;4>k;k+=2)"margin"===d&&(n+=p.css(a,d+za[k],!0,e)),h?("content"===d&&(l-=p.css(a,"padding"+
za[k],!0,e)),"margin"!==d&&(l-=p.css(a,"border"+za[k]+"Width",!0,e))):(l+=p.css(a,"padding"+za[k],!0,e),"padding"!==d?l+=p.css(a,"border"+za[k]+"Width",!0,e):m+=p.css(a,"border"+za[k]+"Width",!0,e));return!h&&0<=f&&(l+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-f-l-m-.5))||0),l+n}function T(a,c,d){var e=cb(a),f=(!N.boxSizingReliable()||d)&&"border-box"===p.css(a,"boxSizing",!1,e),k=f,m=W(a,c,e),l="offset"+c[0].toUpperCase()+c.slice(1);if(mb.test(m)){if(!d)return m;m="auto"}return(!N.boxSizingReliable()&&
f||!N.reliableTrDimensions()&&h(a,"tr")||"auto"===m||!parseFloat(m)&&"inline"===p.css(a,"display",!1,e))&&a.getClientRects().length&&(f="border-box"===p.css(a,"boxSizing",!1,e),(k=l in a)&&(m=a[l])),(m=parseFloat(m)||0)+ka(a,c,d||(f?"border":"content"),k,e,m)+"px"}function P(a,c,d,h,e){return new P.prototype.init(a,c,d,h,e)}function K(){db&&(!1===F.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(K):a.setTimeout(K,p.fx.interval),p.fx.tick())}function I(){return a.setTimeout(function(){Ma=void 0}),
Ma=Date.now()}function Q(a,c){var d,h=0,e={height:a};for(c=c?1:0;4>h;h+=2-c)e["margin"+(d=za[h])]=e["padding"+d]=a;return c&&(e.opacity=e.width=a),e}function ma(a,c,d){for(var h,e=(J.tweeners[c]||[]).concat(J.tweeners["*"]),f=0,k=e.length;f<k;f++)if(h=e[f].call(d,c,a))return h}function J(a,c,d){var h,e=0,f=J.prefilters.length,k=p.Deferred().always(function(){delete m.elem}),m=function(){if(h)return!1;var c=Ma||I();c=Math.max(0,l.startTime+l.duration-c);for(var d=1-(c/l.duration||0),e=0,f=l.tweens.length;e<
f;e++)l.tweens[e].run(d);return k.notifyWith(a,[l,d,c]),1>d&&f?c:(f||k.notifyWith(a,[l,1,0]),k.resolveWith(a,[l]),!1)},l=k.promise({elem:a,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},d),originalProperties:c,originalOptions:d,startTime:Ma||I(),duration:d.duration,tweens:[],createTween:function(c,d){c=p.Tween(a,l.opts,c,d,l.opts.specialEasing[c]||l.opts.easing);return l.tweens.push(c),c},stop:function(c){var d=0,e=c?l.tweens.length:0;if(h)return this;for(h=!0;d<
e;d++)l.tweens[d].run(1);return c?(k.notifyWith(a,[l,1,0]),k.resolveWith(a,[l,c])):k.rejectWith(a,[l,c]),this}});d=l.props;!function(a,c){var d,h,e,f,k;for(d in a)if(e=c[h=x(d)],f=a[d],Array.isArray(f)&&(e=f[1],f=a[d]=f[0]),d!==h&&(a[h]=f,delete a[d]),(k=p.cssHooks[h])&&"expand"in k)for(d in f=k.expand(f),delete a[h],f)d in a||(a[d]=f[d],c[d]=e);else c[h]=e}(d,l.opts.specialEasing);for(;e<f;e++)if(c=J.prefilters[e].call(l,a,d,l.opts))return L(c.stop)&&(p._queueHooks(l.elem,l.opts.queue).stop=c.stop.bind(c)),
c;return p.map(d,ma,l),L(l.opts.start)&&l.opts.start.call(a,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),p.fx.timer(p.extend(m,{elem:a,anim:l,queue:l.opts.queue})),l}function ca(a){return(a.match(ta)||[]).join(" ")}function da(a){return a.getAttribute&&a.getAttribute("class")||""}function wa(a){return Array.isArray(a)?a:"string"==typeof a&&a.match(ta)||[]}function ha(a,c,d,h){var f;if(Array.isArray(c))p.each(c,function(c,e){d||Yb.test(a)?
h(a,e):ha(a+"["+("object"==typeof e&&null!=e?c:"")+"]",e,d,h)});else if(d||"object"!==e(c))h(a,c);else for(f in c)ha(a+"["+f+"]",c[f],d,h)}function ia(a){return function(c,d){"string"!=typeof c&&(d=c,c="*");var h=0,e=c.toLowerCase().match(ta)||[];if(L(d))for(;c=e[h++];)"+"===c[0]?(c=c.slice(1)||"*",(a[c]=a[c]||[]).unshift(d)):(a[c]=a[c]||[]).push(d)}}function ja(a,c,d,h){function e(m){var l;return f[m]=!0,p.each(a[m]||[],function(a,m){a=m(c,d,h);return"string"!=typeof a||k||f[a]?k?!(l=a):void 0:(c.dataTypes.unshift(a),
e(a),!1)}),l}var f={},k=a===nb;return e(c.dataTypes[0])||!f["*"]&&e("*")}function pa(a,c){var d,h,e=p.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((e[d]?a:h||(h={}))[d]=c[d]);return h&&p.extend(!0,a,h),a}var na=[],Pa=Object.getPrototypeOf,la=na.slice,Ba=na.flat?function(a){return na.flat.call(a)}:function(a){return na.concat.apply([],a)},Ca=na.push,qa=na.indexOf,Ka={},Qa=Ka.toString,ua=Ka.hasOwnProperty,eb=ua.toString,Ea=eb.call(Object),N={},L=function(a){return"function"==typeof a&&"number"!=
typeof a.nodeType&&"function"!=typeof a.item},Da=function(a){return null!=a&&a===a.window},F=a.document,kb={type:!0,src:!0,nonce:!0,noModule:!0},Sa=/HTML$/i,p=function(a,c){return new p.fn.init(a,c)};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();p.fn=p.prototype={jquery:"3.7.0",constructor:p,length:0,toArray:function(){return la.call(this)},get:function(a){return null==a?la.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){a=
p.merge(this.constructor(),a);return a.prevObject=this,a},each:function(a){return p.each(this,a)},map:function(a){return this.pushStack(p.map(this,function(c,d){return a.call(c,d,c)}))},slice:function(){return this.pushStack(la.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(a,c){return(c+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(a,c){return c%2}))},eq:function(a){var c=
this.length;a=+a+(0>a?c:0);return this.pushStack(0<=a&&a<c?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ca,sort:na.sort,splice:na.splice};p.extend=p.fn.extend=function(){var a,c,d,h,e,f=arguments[0]||{},k=1,m=arguments.length,l=!1;"boolean"==typeof f&&(l=f,f=arguments[k]||{},k++);"object"==typeof f||L(f)||(f={});for(k===m&&(f=this,k--);k<m;k++)if(null!=(a=arguments[k]))for(c in a){var n=a[c];"__proto__"!==c&&f!==n&&(l&&n&&(p.isPlainObject(n)||(h=Array.isArray(n)))?
(d=f[c],e=h&&!Array.isArray(d)?[]:h||p.isPlainObject(d)?d:{},h=!1,f[c]=p.extend(l,e,n)):void 0!==n&&(f[c]=n))}return f};p.extend({expando:"jQuery"+("3.7.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){var c,d;return!(!a||"[object Object]"!==Qa.call(a))&&(!(c=Pa(a))||"function"==typeof(d=ua.call(c,"constructor")&&c.constructor)&&eb.call(d)===Ea)},isEmptyObject:function(a){for(var c in a)return!1;return!0},globalEval:function(a,
c,d){f(a,{nonce:c&&c.nonce},d)},each:function(a,c){var h,e=0;if(d(a))for(h=a.length;e<h&&!1!==c.call(a[e],e,a[e]);e++);else for(e in a)if(!1===c.call(a[e],e,a[e]))break;return a},text:function(a){var c,d="",h=0;if(c=a.nodeType){if(1===c||9===c||11===c)return a.textContent;if(3===c||4===c)return a.nodeValue}else for(;c=a[h++];)d+=p.text(c);return d},makeArray:function(a,c){c=c||[];return null!=a&&(d(Object(a))?p.merge(c,"string"==typeof a?[a]:a):Ca.call(c,a)),c},inArray:function(a,c,d){return null==
c?-1:qa.call(c,a,d)},isXMLDoc:function(a){var c=a&&(a.ownerDocument||a).documentElement;return!Sa.test(a&&a.namespaceURI||c&&c.nodeName||"HTML")},merge:function(a,c){for(var d=+c.length,h=0,e=a.length;h<d;h++)a[e++]=c[h];return a.length=e,a},grep:function(a,c,d){var h=[],e=0,f=a.length;for(d=!d;e<f;e++)!c(a[e],e)!==d&&h.push(a[e]);return h},map:function(a,c,h){var e,f,k=0,m=[];if(d(a))for(e=a.length;k<e;k++)null!=(f=c(a[k],k,h))&&m.push(f);else for(k in a)null!=(f=c(a[k],k,h))&&m.push(f);return Ba(m)},
guid:1,support:N});"function"==typeof Symbol&&(p.fn[Symbol.iterator]=na[Symbol.iterator]);p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){Ka["[object "+c+"]"]=c.toLowerCase()});var Ia=na.pop,Ta=na.sort,ob=na.splice,Ha=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g;p.contains=function(a,c){c=c&&c.parentNode;return a===c||!(!c||1!==c.nodeType||!(a.contains?a.contains(c):a.compareDocumentPosition&&16&a.compareDocumentPosition(c)))};var Na=
/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;p.escapeSelector=function(a){return(a+"").replace(Na,k)};var xa=F;!function(){function c(a,d,h,e){var f,k,m,l,n=d&&d.ownerDocument;var v=d?d.nodeType:9;if(h=h||[],"string"!=typeof a||!a||1!==v&&9!==v&&11!==v)return h;if(!e&&(t(d),d=d||Q,J)){if(11!==v&&(l=oa.exec(a)))if(f=l[1])if(9===v){if(!(k=d.getElementById(f)))return h;if(k.id===f)return O.call(h,k),h}else{if(n&&(k=n.getElementById(f))&&c.contains(d,k)&&k.id===f)return O.call(h,k),h}else{if(l[2])return O.apply(h,
d.getElementsByTagName(a)),h;if((f=l[3])&&d.getElementsByClassName)return O.apply(h,d.getElementsByClassName(f)),h}if(!(Ga[a+" "]||G&&G.test(a))){if(f=a,n=d,1===v&&(E.test(a)||S.test(a))){(n=fa.test(a)&&q(d.parentNode)||d)==d&&N.scope||((m=d.getAttribute("id"))?m=p.escapeSelector(m):d.setAttribute("id",m=Y));for(v=(f=x(a)).length;v--;)f[v]=(m?"#"+m:":scope")+" "+u(f[v]);f=f.join(",")}try{return O.apply(h,n.querySelectorAll(f)),h}catch(zc){Ga(a,!0)}finally{m===Y&&d.removeAttribute("id")}}}return K(a.replace(Ha,
"$1"),d,h,e)}function d(){var a=[];return function Ab(c,d){return a.push(c+" ")>I.cacheLength&&delete Ab[a.shift()],Ab[c+" "]=d}}function e(a){return a[Y]=!0,a}function f(a){var c=Q.createElement("fieldset");try{return!!a(c)}catch(zb){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function k(a){return function(c){return h(c,"input")&&c.type===a}}function m(a){return function(c){return(h(c,"input")||h(c,"button"))&&c.type===a}}function l(a){return function(c){return"form"in c?c.parentNode&&
!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===a:c.disabled===a:c.isDisabled===a||c.isDisabled!==!a&&ia(c)===a:c.disabled===a:"label"in c&&c.disabled===a}}function n(a){return e(function(c){return c=+c,e(function(d,h){for(var e,f=a([],d.length,c),k=f.length;k--;)d[e=f[k]]&&(d[e]=!(h[e]=d[e]))})})}function q(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function t(a){var d;a=a?a.ownerDocument||a:xa;return a!=Q&&9===a.nodeType&&a.documentElement&&(ma=(Q=a).documentElement,
J=!p.isXMLDoc(Q),ta=ma.matches||ma.webkitMatchesSelector||ma.msMatchesSelector,xa!=Q&&(d=Q.defaultView)&&d.top!==d&&d.addEventListener("unload",ba),N.getById=f(function(a){return ma.appendChild(a).id=p.expando,!Q.getElementsByName||!Q.getElementsByName(p.expando).length}),N.disconnectedMatch=f(function(a){return ta.call(a,"*")}),N.scope=f(function(){return Q.querySelectorAll(":scope")}),N.cssHas=f(function(){try{return Q.querySelector(":has(*,:jqfake)"),!1}catch(zb){return!0}}),N.getById?(I.filter.ID=
function(a){var c=a.replace(H,W);return function(a){return a.getAttribute("id")===c}},I.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&J)return(a=c.getElementById(a))?[a]:[]}):(I.filter.ID=function(a){var c=a.replace(H,W);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===c}},I.find.ID=function(a,c){if("undefined"!=typeof c.getElementById&&J){var d,h=c.getElementById(a);if(h){if((d=h.getAttributeNode("id"))&&d.value===a)return[h];
var e=c.getElementsByName(a);for(c=0;h=e[c++];)if((d=h.getAttributeNode("id"))&&d.value===a)return[h]}return[]}}),I.find.TAG=function(a,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(a):c.querySelectorAll(a)},I.find.CLASS=function(a,c){if("undefined"!=typeof c.getElementsByClassName&&J)return c.getElementsByClassName(a)},G=[],f(function(a){var c;ma.appendChild(a).innerHTML="<a id='"+Y+"' href='' disabled='disabled'></a><select id='"+Y+"-\r\\' disabled='disabled'><option selected=''></option></select>";
a.querySelectorAll("[selected]").length||G.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll("[id~="+Y+"-]").length||G.push("~=");a.querySelectorAll("a#"+Y+"+*").length||G.push(".#.+[+~]");a.querySelectorAll(":checked").length||G.push(":checked");(c=Q.createElement("input")).setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");ma.appendChild(a).disabled=
!0;2!==a.querySelectorAll(":disabled").length&&G.push(":enabled",":disabled");(c=Q.createElement("input")).setAttribute("name","");a.appendChild(c);a.querySelectorAll("[name='']").length||G.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")}),N.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),Ua=function(a,d){if(a===d)return D=!0,0;var h=!a.compareDocumentPosition-!d.compareDocumentPosition;return h||(1&(h=(a.ownerDocument||a)==(d.ownerDocument||d)?a.compareDocumentPosition(d):
1)||!N.sortDetached&&d.compareDocumentPosition(a)===h?a===Q||a.ownerDocument==xa&&c.contains(xa,a)?-1:d===Q||d.ownerDocument==xa&&c.contains(xa,d)?1:C?qa.call(C,a)-qa.call(C,d):0:4&h?-1:1)}),Q}function v(){}function x(a,d){var h,e,f,k,m,l;if(m=da[a+" "])return d?0:m.slice(0);m=a;var n=[];for(l=I.preFilter;m;){for(k in h&&!(e=Z.exec(m))||(e&&(m=m.slice(e[0].length)||m),n.push(f=[])),h=!1,(e=S.exec(m))&&(h=e.shift(),f.push({value:h,type:e[0].replace(Ha," ")}),m=m.slice(h.length)),I.filter)!(e=F[k].exec(m))||
l[k]&&!(e=l[k](e))||(h=e.shift(),f.push({value:h,type:k,matches:e}),m=m.slice(h.length));if(!h)break}return d?m.length:m?c.error(a):da(a,n).slice(0)}function u(a){for(var c=0,d=a.length,h="";c<d;c++)h+=a[c].value;return h}function w(a,c,d){var e=c.dir,f=c.next,k=f||e,m=d&&"parentNode"===k,l=M++;return c.first?function(c,d,h){for(;c=c[e];)if(1===c.nodeType||m)return a(c,d,h);return!1}:function(c,d,n){var q,t,v=[B,l];if(n)for(;c=c[e];){if((1===c.nodeType||m)&&a(c,d,n))return!0}else for(;c=c[e];)if(1===
c.nodeType||m)if(t=c[Y]||(c[Y]={}),f&&h(c,f))c=c[e]||c;else{if((q=t[k])&&q[0]===B&&q[1]===l)return v[2]=q[2];if((t[k]=v)[2]=a(c,d,n))return!0}return!1}}function V(a){return 1<a.length?function(c,d,h){for(var e=a.length;e--;)if(!a[e](c,d,h))return!1;return!0}:a[0]}function y(a,c,d,h,e){for(var f,k=[],m=0,l=a.length,n=null!=c;m<l;m++)(f=a[m])&&(d&&!d(f,h,e)||(k.push(f),n&&c.push(m)));return k}function P(a,d,h,f,k,m){return f&&!f[Y]&&(f=P(f)),k&&!k[Y]&&(k=P(k,m)),e(function(e,m,l,n){var q,t,v=[],x=[],
u=m.length,R;if(!(R=e)){R=d||"*";for(var w=l.nodeType?[l]:l,V=[],P=0,ib=w.length;P<ib;P++)c(R,w[P],V);R=V}R=!a||!e&&d?R:y(R,v,a,l,n);if(h?h(R,t=k||(e?a:u||f)?[]:m,l,n):t=R,f){var A=y(t,x);f(A,[],l,n);for(l=A.length;l--;)(q=A[l])&&(t[x[l]]=!(R[x[l]]=q))}if(e){if(k||a){if(k){A=[];for(l=t.length;l--;)(q=t[l])&&A.push(R[l]=q);k(null,t=[],A,n)}for(l=t.length;l--;)(q=t[l])&&-1<(A=k?qa.call(e,q):v[l])&&(e[A]=!(m[A]=q))}}else t=y(t===m?t.splice(u,t.length):t),k?k(null,m,t,n):O.apply(m,t)})}function A(a){var c,
d,h=a.length,e=I.relative[a[0].type];var f=e||I.relative[" "];for(var k=e?1:0,m=w(function(a){return a===c},f,!0),l=w(function(a){return-1<qa.call(c,a)},f,!0),n=[function(a,d,h){a=!e&&(h||d!=ya)||((c=d).nodeType?m(a,d,h):l(a,d,h));return c=null,a}];k<h;k++)if(f=I.relative[a[k].type])n=[w(V(n),f)];else{if((f=I.filter[a[k].type].apply(null,a[k].matches))[Y]){for(d=++k;d<h&&!I.relative[a[d].type];d++);return P(1<k&&V(n),1<k&&u(a.slice(0,k-1).concat({value:" "===a[k-2].type?"*":""})).replace(Ha,"$1"),
f,k<d&&A(a.slice(k,d)),d<h&&A(a=a.slice(d)),d<h&&u(a))}n.push(f)}return V(n)}function z(a,c){var d,h,f,k,m=[],l=[],n=U[a+" "];if(!n){c||(c=x(a));for(d=c.length;d--;)(n=A(c[d]))[Y]?m.push(n):l.push(n);(n=U(a,(h=0<m.length,f=0<l.length,k=function(a,c,d,e,k){var n,q,v=0,x="0",u=a&&[],R=[],w=ya,V=a||f&&I.find.TAG("*",k),P=B+=null==w?1:Math.random()||.1,ib=V.length;for(k&&(ya=c==Q||c||k);x!==ib&&null!=(n=V[x]);x++){if(f&&n){var A=0;for(c||n.ownerDocument==Q||(t(n),d=!J);q=l[A++];)if(q(n,c||Q,d)){O.call(e,
n);break}k&&(B=P)}h&&((n=!q&&n)&&v--,a&&u.push(n))}if(v+=x,h&&x!==v){for(A=0;q=m[A++];)q(u,R,c,d);if(a){if(0<v)for(;x--;)u[x]||R[x]||(R[x]=Ia.call(e));R=y(R)}O.apply(e,R);k&&!a&&0<R.length&&1<v+m.length&&p.uniqueSort(e)}return k&&(B=P,ya=w),u},h?e(k):k))).selector=a}return n}function K(a,c,d,h){var e,f,k,m,l,n="function"==typeof a&&a,t=!h&&x(a=n.selector||a);if(d=d||[],1===t.length){if(2<(f=t[0]=t[0].slice(0)).length&&"ID"===(k=f[0]).type&&9===c.nodeType&&J&&I.relative[f[1].type]){if(!(c=(I.find.ID(k.matches[0].replace(H,
W),c)||[])[0]))return d;n&&(c=c.parentNode);a=a.slice(f.shift().value.length)}for(e=F.needsContext.test(a)?0:f.length;e--&&(k=f[e],!I.relative[m=k.type]);)if((l=I.find[m])&&(h=l(k.matches[0].replace(H,W),fa.test(f[0].type)&&q(c.parentNode)||c))){if(f.splice(e,1),!(a=h.length&&u(f)))return O.apply(d,h),d;break}}return(n||z(a,t))(h,c,!J,d,!c||fa.test(a)&&q(c.parentNode)||c),d}var T,I,ya,C,D,Q,ma,J,G,ta,O=Ca,Y=p.expando,B=0,M=0,ca=d(),da=d(),U=d(),Ga=d(),Ua=function(a,c){return a===c&&(D=!0),0},ha=/[\x20\t\r\n\f]+/g,
Z=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,S=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,E=/[\x20\t\r\n\f]|>/,wa=/:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
Va=/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+$/,F={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\]/,
PSEUDO:/^:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},X=/^(?:input|select|textarea|button)$/i,L=/^h\d$/i,oa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fa=/[+~]/,H=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,W=function(a,c){a="0x"+a.slice(1)-65536;return c||(0>a?String.fromCharCode(a+
65536):String.fromCharCode(a>>10|55296,1023&a|56320))},ba=function(){t()},ia=w(function(a){return!0===a.disabled&&h(a,"fieldset")},{dir:"parentNode",next:"legend"});try{O.apply(na=la.call(xa.childNodes),xa.childNodes),na[xa.childNodes.length].nodeType}catch(xc){O={apply:function(a,c){Ca.apply(a,la.call(c))},call:function(a){Ca.apply(a,la.call(arguments,1))}}}for(T in c.matches=function(a,d){return c(a,null,null,d)},c.matchesSelector=function(a,d){if(t(a),!(!J||Ga[d+" "]||G&&G.test(d)))try{var h=ta.call(a,
d);if(h||N.disconnectedMatch||a.document&&11!==a.document.nodeType)return h}catch(yc){Ga(d,!0)}return 0<c(d,Q,null,[a]).length},c.contains=function(a,c){return(a.ownerDocument||a)!=Q&&t(a),p.contains(a,c)},c.attr=function(a,c){(a.ownerDocument||a)!=Q&&t(a);var d=I.attrHandle[c.toLowerCase()];d=d&&ua.call(I.attrHandle,c.toLowerCase())?d(a,c,!J):void 0;return void 0!==d?d:a.getAttribute(c)},c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);},p.uniqueSort=function(a){var c,
d=[],h=0,e=0;if(D=!N.sortStable,C=!N.sortStable&&la.call(a,0),Ta.call(a,Ua),D){for(;c=a[e++];)c===a[e]&&(h=d.push(e));for(;h--;)ob.call(a,d[h],1)}return C=null,a},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(la.apply(this)))},(I=p.expr={cacheLength:50,createPseudo:e,match:F,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(H,W),
a[3]=(a[3]||a[4]||a[5]||"").replace(H,W),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[6]&&a[2];return F.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":d&&wa.test(d)&&(c=x(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),
a.slice(0,3))}},filter:{TAG:function(a){var c=a.replace(H,W).toLowerCase();return"*"===a?function(){return!0}:function(a){return h(a,c)}},CLASS:function(a){var c=ca[a+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ca(a,function(a){return c.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,d,h){return function(e){e=c.attr(e,a);return null==e?"!="===d:!d||(e+="","="===d?e===h:"!="===
d?e!==h:"^="===d?h&&0===e.indexOf(h):"*="===d?h&&-1<e.indexOf(h):"$="===d?h&&e.slice(-h.length)===h:"~="===d?-1<(" "+e.replace(ha," ")+" ").indexOf(h):"|="===d&&(e===h||e.slice(0,h.length+1)===h+"-"))}},CHILD:function(a,c,d,e,f){var k="nth"!==a.slice(0,3),m="last"!==a.slice(-4),l="of-type"===c;return 1===e&&0===f?function(a){return!!a.parentNode}:function(c,d,n){var q,t,v;d=k!==m?"nextSibling":"previousSibling";var x=c.parentNode,u=l&&c.nodeName.toLowerCase(),R=!n&&!l,w=!1;if(x){if(k){for(;d;){for(t=
c;t=t[d];)if(l?h(t,u):1===t.nodeType)return!1;var V=d="only"===a&&!V&&"nextSibling"}return!0}if(V=[m?x.firstChild:x.lastChild],m&&R)for(w=(v=(q=(n=x[Y]||(x[Y]={}))[a]||[])[0]===B&&q[1])&&q[2],t=v&&x.childNodes[v];t=++v&&t&&t[d]||(w=v=0)||V.pop();){if(1===t.nodeType&&++w&&t===c){n[a]=[B,v,w];break}}else if(R&&(w=v=(q=(c[Y]||(c[Y]={}))[a]||[])[0]===B&&q[1]),!1===w)for(;(t=++v&&t&&t[d]||(w=v=0)||V.pop())&&((l?!h(t,u):1!==t.nodeType)||!++w||(R&&((n=t[Y]||(t[Y]={}))[a]=[B,w]),t!==c)););return(w-=f)===
e||0==w%e&&0<=w/e}}},PSEUDO:function(a,d){var h,f=I.pseudos[a]||I.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[Y]?f(d):1<f.length?(h=[a,a,"",d],I.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var h,e=f(a,d),k=e.length;k--;)a[h=qa.call(a,e[k])]=!(c[h]=e[k])}):function(a){return f(a,0,h)}):f}},pseudos:{not:e(function(a){var c=[],d=[],h=z(a.replace(Ha,"$1"));return h[Y]?e(function(a,c,d,e){var f;d=h(a,null,e,[]);for(e=a.length;e--;)(f=d[e])&&(a[e]=!(c[e]=f))}):
function(a,e,f){return c[0]=a,h(c,null,f,d),c[0]=null,!d.pop()}}),has:e(function(a){return function(d){return 0<c(a,d).length}}),contains:e(function(a){return a=a.replace(H,W),function(c){return-1<(c.textContent||p.text(c)).indexOf(a)}}),lang:e(function(a){return Va.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(H,W).toLowerCase(),function(c){var d;do if(d=J?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return(d=d.toLowerCase())===a||0===d.indexOf(a+"-");while((c=c.parentNode)&&
1===c.nodeType);return!1}}),target:function(c){var d=a.location&&a.location.hash;return d&&d.slice(1)===c.id},root:function(a){return a===ma},focus:function(a){a:{try{var c=Q.activeElement;break a}catch(zb){}c=void 0}return a===c&&Q.hasFocus()&&!!(a.type||a.href||~a.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(a){return h(a,"input")&&!!a.checked||h(a,"option")&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=
a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!I.pseudos.empty(a)},header:function(a){return L.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){return h(a,"input")&&"button"===a.type||h(a,"button")},text:function(a){var c;return h(a,"input")&&"text"===a.type&&(null==(c=a.getAttribute("type"))||"text"===c.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,c){return[c-1]}),eq:n(function(a,c,d){return[0>d?d+c:d]}),even:n(function(a,
c){for(var d=0;d<c;d+=2)a.push(d);return a}),odd:n(function(a,c){for(var d=1;d<c;d+=2)a.push(d);return a}),lt:n(function(a,c,d){for(c=0>d?d+c:c<d?c:d;0<=--c;)a.push(c);return a}),gt:n(function(a,c,d){for(d=0>d?d+c:d;++d<c;)a.push(d);return a})}}).pseudos.nth=I.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[T]=k(T);for(T in{submit:!0,reset:!0})I.pseudos[T]=m(T);v.prototype=I.filters=I.pseudos;I.setFilters=new v;N.sortStable=Y.split("").sort(Ua).join("")===Y;t();N.sortDetached=
f(function(a){return 1&a.compareDocumentPosition(Q.createElement("fieldset"))});p.find=c;p.expr[":"]=p.expr.pseudos;p.unique=p.uniqueSort;c.compile=z;c.select=K;c.setDocument=t;c.escape=p.escapeSelector;c.getText=p.text;c.isXML=p.isXMLDoc;c.selectors=p.expr;c.support=p.support;c.uniqueSort=p.uniqueSort}();var Fa=function(a,c,d){for(var h=[],e=void 0!==d;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&p(a).is(d))break;h.push(a)}return h},fb=function(a,c){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&
a!==c&&d.push(a);return d},gb=p.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;p.filter=function(a,c,d){var h=c[0];return d&&(a=":not("+a+")"),1===c.length&&1===h.nodeType?p.find.matchesSelector(h,a)?[h]:[]:p.find.matches(a,p.grep(c,function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var c,d=this.length,h=this;if("string"!=typeof a)return this.pushStack(p(a).filter(function(){for(c=0;c<d;c++)if(p.contains(h[c],this))return!0}));var e=this.pushStack([]);
for(c=0;c<d;c++)p.find(a,h[c],e);return 1<d?p.uniqueSort(e):e},filter:function(a){return this.pushStack(l(this,a||[],!1))},not:function(a){return this.pushStack(l(this,a||[],!0))},is:function(a){return!!l(this,"string"==typeof a&&gb.test(a)?p(a):a||[],!1).length}});var Ua=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(a,c,d){var h,e;if(!a)return this;if(d=d||Y,"string"==typeof a){if(!(h="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Ua.exec(a))||!h[1]&&c)return!c||c.jquery?
(c||d).find(a):this.constructor(c).find(a);if(h[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(h[1],c&&c.nodeType?c.ownerDocument||c:F,!0)),H.test(h[1])&&p.isPlainObject(c))for(h in c)L(this[h])?this[h](c[h]):this.attr(h,c[h]);return this}return(e=F.getElementById(h[2]))&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):L(a)?void 0!==d.ready?d.ready(a):a(p):p.makeArray(a,this)}).prototype=p.fn;var Y=p(F);var V=/^(?:parents|prev(?:Until|All))/,ya={children:!0,
contents:!0,next:!0,prev:!0};p.fn.extend({has:function(a){var c=p(a,this),d=c.length;return this.filter(function(){for(var a=0;a<d;a++)if(p.contains(this,c[a]))return!0})},closest:function(a,c){var d,h=0,e=this.length,f=[],k="string"!=typeof a&&p(a);if(!gb.test(a))for(;h<e;h++)for(d=this[h];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(k?-1<k.index(d):1===d.nodeType&&p.find.matchesSelector(d,a))){f.push(d);break}return this.pushStack(1<f.length?p.uniqueSort(f):f)},index:function(a){return a?"string"==
typeof a?qa.call(p(a),this[0]):qa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(a,c))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return Fa(a,"parentNode")},parentsUntil:function(a,c,d){return Fa(a,"parentNode",d)},next:function(a){return m(a,
"nextSibling")},prev:function(a){return m(a,"previousSibling")},nextAll:function(a){return Fa(a,"nextSibling")},prevAll:function(a){return Fa(a,"previousSibling")},nextUntil:function(a,c,d){return Fa(a,"nextSibling",d)},prevUntil:function(a,c,d){return Fa(a,"previousSibling",d)},siblings:function(a){return fb((a.parentNode||{}).firstChild,a)},children:function(a){return fb(a.firstChild)},contents:function(a){return null!=a.contentDocument&&Pa(a.contentDocument)?a.contentDocument:(h(a,"template")&&
(a=a.content||a),p.merge([],a.childNodes))}},function(a,c){p.fn[a]=function(d,h){var e=p.map(this,c,d);return"Until"!==a.slice(-5)&&(h=d),h&&"string"==typeof h&&(e=p.filter(h,e)),1<this.length&&(ya[a]||p.uniqueSort(e),V.test(a)&&e.reverse()),this.pushStack(e)}});var ta=/[^\x20\t\r\n\f]+/g;p.Callbacks=function(a){var c,d;a="string"==typeof a?(c=a,d={},p.each(c.match(ta)||[],function(a,c){d[c]=!0}),d):p.extend({},a);var h,f,k,m,l=[],n=[],q=-1,t=function(){m=m||a.once;for(k=h=!0;n.length;q=-1)for(f=
n.shift();++q<l.length;)!1===l[q].apply(f[0],f[1])&&a.stopOnFalse&&(q=l.length,f=!1);a.memory||(f=!1);h=!1;m&&(l=f?[]:"")},v={add:function(){return l&&(f&&!h&&(q=l.length-1,n.push(f)),function Vb(c){p.each(c,function(c,d){L(d)?a.unique&&v.has(d)||l.push(d):d&&d.length&&"string"!==e(d)&&Vb(d)})}(arguments),f&&!h&&t()),this},remove:function(){return p.each(arguments,function(a,c){for(var d;-1<(d=p.inArray(c,l,d));)l.splice(d,1),d<=q&&q--}),this},has:function(a){return a?-1<p.inArray(a,l):0<l.length},
empty:function(){return l&&(l=[]),this},disable:function(){return m=n=[],l=f="",this},disabled:function(){return!l},lock:function(){return m=n=[],f||h||(l=f=""),this},locked:function(){return!!m},fireWith:function(a,c){return m||(c=[a,(c=c||[]).slice?c.slice():c],n.push(c),h||t()),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!k}};return v};p.extend({Deferred:function(c){var d=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",
p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],h="pending",e={state:function(){return h},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return p.Deferred(function(c){p.each(d,function(d,h){var e=L(a[h[4]])&&a[h[4]];f[h[1]](function(){var a=e&&e.apply(this,arguments);a&&L(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):
c[h[0]+"With"](this,e?[a]:arguments)})});a=null}).promise()},then:function(c,h,e){function f(c,d,h,e){return function(){var m=this,l=arguments,t=function(){var a;if(!(c<k)){if((a=h.apply(m,l))===d.promise())throw new TypeError("Thenable self-resolution");var t=a&&("object"==typeof a||"function"==typeof a)&&a.then;L(t)?e?t.call(a,f(k,d,n,e),f(k,d,q,e)):(k++,t.call(a,f(k,d,n,e),f(k,d,q,e),f(k,d,n,d.notifyWith))):(h!==n&&(m=void 0,l=[a]),(e||d.resolveWith)(m,l))}},v=e?t:function(){try{t()}catch(Bb){p.Deferred.exceptionHook&&
p.Deferred.exceptionHook(Bb,v.error),k<=c+1&&(h!==q&&(m=void 0,l=[Bb]),d.rejectWith(m,l))}};c?v():(p.Deferred.getErrorHook?v.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(v.error=p.Deferred.getStackHook()),a.setTimeout(v))}}var k=0;return p.Deferred(function(a){d[0][3].add(f(0,a,L(e)?e:n,a.notifyWith));d[1][3].add(f(0,a,L(c)?c:n));d[2][3].add(f(0,a,L(h)?h:q))}).promise()},promise:function(a){return null!=a?p.extend(a,e):e}},f={};return p.each(d,function(a,c){var k=c[2],m=c[5];e[c[1]]=
k.add;m&&k.add(function(){h=m},d[3-a][2].disable,d[3-a][3].disable,d[0][2].lock,d[0][3].lock);k.add(c[3].fire);f[c[0]]=function(){return f[c[0]+"With"](this===f?void 0:this,arguments),this};f[c[0]+"With"]=k.fireWith}),e.promise(f),c&&c.call(f,f),f},when:function(a){var c=arguments.length,d=c,h=Array(d),e=la.call(arguments),f=p.Deferred(),k=function(a){return function(d){h[a]=this;e[a]=1<arguments.length?la.call(arguments):d;--c||f.resolveWith(h,e)}};if(1>=c&&(t(a,f.done(k(d)).resolve,f.reject,!c),
"pending"===f.state()||L(e[d]&&e[d].then)))return f.then();for(;d--;)t(e[d],k(d),f.reject);return f.promise()}});var Ga=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(c,d){a.console&&a.console.warn&&c&&Ga.test(c.name)&&a.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)};p.readyException=function(c){a.setTimeout(function(){throw c;})};var Va=p.Deferred();p.fn.ready=function(a){return Va.then(a)["catch"](function(a){p.readyException(a)}),this};
p.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--p.readyWait:p.isReady)||(p.isReady=!0)!==a&&0<--p.readyWait||Va.resolveWith(F,[p])}});p.ready.then=Va.then;"complete"===F.readyState||"loading"!==F.readyState&&!F.documentElement.doScroll?a.setTimeout(p.ready):(F.addEventListener("DOMContentLoaded",y),a.addEventListener("load",y));var Aa=function(a,c,d,h,f,k,m){var l=0,n=a.length,q=null==d;if("object"===e(d))for(l in f=!0,d)Aa(a,c,l,d[l],!0,k,m);else if(void 0!==h&&(f=!0,L(h)||(m=!0),q&&
(m?(c.call(a,h),c=null):(q=c,c=function(a,c,d){return q.call(p(a),d)})),c))for(;l<n;l++)c(a[l],d,m?h:h.call(a[l],l,c(a[l],d)));return f?a:q?c.call(a):n?c(a[0],d):k},Ob=/^-ms-/,Pb=/-([a-z])/g,Wa=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};w.uid=1;w.prototype={cache:function(a){var c=a[this.expando];return c||(c={},Wa(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,configurable:!0}))),c},set:function(a,c,d){var h;a=this.cache(a);if("string"==typeof c)a[x(c)]=
d;else for(h in c)a[x(h)]=c[h];return a},get:function(a,c){return void 0===c?this.cache(a):a[this.expando]&&a[this.expando][x(c)]},access:function(a,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(a,c):(this.set(a,c,d),void 0!==d?d:c)},remove:function(a,c){var d=a[this.expando];if(void 0!==d){if(void 0!==c){var h=(c=Array.isArray(c)?c.map(x):(c=x(c))in d?[c]:c.match(ta)||[]).length;for(;h--;)delete d[c[h]]}(void 0===c||p.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},
hasData:function(a){a=a[this.expando];return void 0!==a&&!p.isEmptyObject(a)}};var E=new w,sa=new w,Rb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qb=/[A-Z]/g;p.extend({hasData:function(a){return sa.hasData(a)||E.hasData(a)},data:function(a,c,d){return sa.access(a,c,d)},removeData:function(a,c){sa.remove(a,c)},_data:function(a,c,d){return E.access(a,c,d)},_removeData:function(a,c){E.remove(a,c)}});p.fn.extend({data:function(a,c){var d,h,e,f=this[0],k=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),
1===f.nodeType&&!E.get(f,"hasDataAttrs"))){for(d=k.length;d--;)k[d]&&0===(h=k[d].name).indexOf("data-")&&(h=x(h.slice(5)),z(f,h,e[h]));E.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):Aa(this,function(c){var d;if(f&&void 0===c)return void 0!==(d=sa.get(f,a))?d:void 0!==(d=z(f,a))?d:void 0;this.each(function(){sa.set(this,a,c)})},null,c,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}});p.extend({queue:function(a,
c,d){var h;if(a)return c=(c||"fx")+"queue",h=E.get(a,c),d&&(!h||Array.isArray(d)?h=E.access(a,c,p.makeArray(d)):h.push(d)),h||[]},dequeue:function(a,c){c=c||"fx";var d=p.queue(a,c),h=d.length,e=d.shift(),f=p._queueHooks(a,c);"inprogress"===e&&(e=d.shift(),h--);e&&("fx"===c&&d.unshift("inprogress"),delete f.stop,e.call(a,function(){p.dequeue(a,c)},f));!h&&f&&f.empty.fire()},_queueHooks:function(a,c){var d=c+"queueHooks";return E.get(a,d)||E.access(a,d,{empty:p.Callbacks("once memory").add(function(){E.remove(a,
[c+"queue",d])})})}});p.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):void 0===c?this:this.each(function(){var d=p.queue(this,a,c);p._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,h=1,e=p.Deferred(),f=this,k=this.length,m=function(){--h||e.resolveWith(f,
[f])};"string"!=typeof a&&(c=a,a=void 0);for(a=a||"fx";k--;)(d=E.get(f[k],a+"queueHooks"))&&d.empty&&(h++,d.empty.add(m));return m(),e.promise(c)}});var Cb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ra=new RegExp("^(?:([+-])=|)("+Cb+")([a-z%]*)$","i"),za=["Top","Right","Bottom","Left"],Ja=F.documentElement,La=function(a){return p.contains(a.ownerDocument,a)},$b={composed:!0};Ja.getRootNode&&(La=function(a){return p.contains(a.ownerDocument,a)||a.getRootNode($b)===a.ownerDocument});var bb=function(a,
c){return"none"===(a=c||a).style.display||""===a.style.display&&La(a)&&"none"===p.css(a,"display")},tb={};p.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){bb(this)?p(this).show():p(this).hide()})}});var hb,Xa=/^(?:checkbox|radio)$/i,ub=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vb=/^$|^module$|\/(?:java|ecma)script/i;var Oa=F.createDocumentFragment().appendChild(F.createElement("div"));
(hb=F.createElement("input")).setAttribute("type","radio");hb.setAttribute("checked","checked");hb.setAttribute("name","t");Oa.appendChild(hb);N.checkClone=Oa.cloneNode(!0).cloneNode(!0).lastChild.checked;Oa.innerHTML="<textarea>x</textarea>";N.noCloneChecked=!!Oa.cloneNode(!0).lastChild.defaultValue;Oa.innerHTML="<option></option>";N.option=!!Oa.lastChild;var va={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],_default:[0,"",""]};va.tbody=va.tfoot=va.colgroup=va.caption=va.thead;va.th=va.td;N.option||(va.optgroup=va.option=[1,"<select multiple='multiple'>","</select>"]);var Tb=/<|&#?\w+;/,Db=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(a,c,d,h,e){var f,k,m,l,n,q,t,v;var x=E.get(a);if(Wa(a))for(d.handler&&(d=(f=d).handler,e=f.selector),e&&p.find.matchesSelector(Ja,e),d.guid||(d.guid=p.guid++),(l=x.events)||(l=x.events=Object.create(null)),(k=x.handle)||(k=x.handle=function(c){return"undefined"!=
typeof p&&p.event.triggered!==c.type?p.event.dispatch.apply(a,arguments):void 0}),x=(c=(c||"").match(ta)||[""]).length;x--;){var u=v=(m=Db.exec(c[x])||[])[1];m=(m[2]||"").split(".").sort();u&&(q=p.event.special[u]||{},u=(e?q.delegateType:q.bindType)||u,q=p.event.special[u]||{},n=p.extend({type:u,origType:v,data:h,handler:d,guid:d.guid,selector:e,needsContext:e&&p.expr.match.needsContext.test(e),namespace:m.join(".")},f),(t=l[u])||((t=l[u]=[]).delegateCount=0,q.setup&&!1!==q.setup.call(a,h,m,k)||a.addEventListener&&
a.addEventListener(u,k)),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),e?t.splice(t.delegateCount++,0,n):t.push(n),p.event.global[u]=!0)}},remove:function(a,c,d,h,e){var f,k,m,l,n,q,t,v,x=E.hasData(a)&&E.get(a);if(x&&(l=x.events)){for(n=(c=(c||"").match(ta)||[""]).length;n--;)if(q=v=(m=Db.exec(c[n])||[])[1],t=(m[2]||"").split(".").sort(),q){var u=p.event.special[q]||{};var w=l[q=(h?u.delegateType:u.bindType)||q]||[];m=m[2]&&new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)");
for(k=f=w.length;f--;){var V=w[f];!e&&v!==V.origType||d&&d.guid!==V.guid||m&&!m.test(V.namespace)||h&&h!==V.selector&&("**"!==h||!V.selector)||(w.splice(f,1),V.selector&&w.delegateCount--,u.remove&&u.remove.call(a,V))}k&&!w.length&&(u.teardown&&!1!==u.teardown.call(a,t,x.handle)||p.removeEvent(a,q,x.handle),delete l[q])}else for(q in l)p.event.remove(a,q+c[n],d,h,!0);p.isEmptyObject(l)&&E.remove(a,"handle events")}},dispatch:function(a){var c,d,h,e,f=Array(arguments.length),k=p.event.fix(a);var m=
(E.get(this,"events")||Object.create(null))[k.type]||[];var l=p.event.special[k.type]||{};f[0]=k;for(c=1;c<arguments.length;c++)f[c]=arguments[c];if(k.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,k)){var n=p.event.handlers.call(this,k,m);for(c=0;(h=n[c++])&&!k.isPropagationStopped();)for(k.currentTarget=h.elem,m=0;(e=h.handlers[m++])&&!k.isImmediatePropagationStopped();)k.rnamespace&&!1!==e.namespace&&!k.rnamespace.test(e.namespace)||(k.handleObj=e,k.data=e.data,void 0!==(d=((p.event.special[e.origType]||
{}).handle||e.handler).apply(h.elem,f))&&!1===(k.result=d)&&(k.preventDefault(),k.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,k),k.result}},handlers:function(a,c){var d,h,e,f=[],k=c.delegateCount,m=a.target;if(k&&m.nodeType&&!("click"===a.type&&1<=a.button))for(;m!==this;m=m.parentNode||this)if(1===m.nodeType&&("click"!==a.type||!0!==m.disabled)){var l=[];var n={};for(d=0;d<k;d++)void 0===n[e=(h=c[d]).selector+" "]&&(n[e]=h.needsContext?-1<p(e,this).index(m):p.find(e,this,
null,[m]).length),n[e]&&l.push(h);l.length&&f.push({elem:m,handlers:l})}return m=this,k<c.length&&f.push({elem:m,handlers:c.slice(k)}),f},addProp:function(a,c){Object.defineProperty(p.Event.prototype,a,{enumerable:!0,configurable:!0,get:L(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(c){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(a){return a[p.expando]?
a:new p.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){a=this||a;return Xa.test(a.type)&&a.click&&h(a,"input")&&M(a,"click",!0),!1},trigger:function(a){a=this||a;return Xa.test(a.type)&&a.click&&h(a,"input")&&M(a,"click"),!0},_default:function(a){a=a.target;return Xa.test(a.type)&&a.click&&h(a,"input")&&E.get(a,"click")||h(a,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};p.removeEvent=function(a,c,d){a.removeEventListener&&
a.removeEventListener(c,d)};p.Event=function(a,c){if(!(this instanceof p.Event))return new p.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?G:B,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a;c&&p.extend(this,c);this.timeStamp=a&&a.timeStamp||Date.now();this[p.expando]=!0};p.Event.prototype=
{constructor:p.Event,isDefaultPrevented:B,isPropagationStopped:B,isImmediatePropagationStopped:B,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=G;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=G;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=G;a&&!this.isSimulated&&a.stopImmediatePropagation();
this.stopPropagation()}};p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp);p.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){if(F.documentMode){var d=E.get(this,
"handle"),h=p.event.fix(a);h.type="focusin"===a.type?"focus":"blur";h.isSimulated=!0;d(a);h.target===h.currentTarget&&d(h)}else p.event.simulate(c,a.target,p.event.fix(a))}p.event.special[a]={setup:function(){var h;if(M(this,a,!0),!F.documentMode)return!1;(h=E.get(this,c))||this.addEventListener(c,d);E.set(this,c,(h||0)+1)},trigger:function(){return M(this,a),!0},teardown:function(){var a;if(!F.documentMode)return!1;(a=E.get(this,c)-1)?E.set(this,c,a):(this.removeEventListener(c,d),E.remove(this,
c))},_default:function(c){return E.get(c.target,a)},delegateType:c};p.event.special[c]={setup:function(){var h=this.ownerDocument||this.document||this,e=F.documentMode?this:h,f=E.get(e,c);f||(F.documentMode?this.addEventListener(c,d):h.addEventListener(a,d,!0));E.set(e,c,(f||0)+1)},teardown:function(){var h=this.ownerDocument||this.document||this,e=F.documentMode?this:h,f=E.get(e,c)-1;f?E.set(e,c,f):(F.documentMode?this.removeEventListener(c,d):h.removeEventListener(a,d,!0),E.remove(e,c))}}});p.each({mouseenter:"mouseover",
mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){p.event.special[a]={delegateType:c,bindType:c,handle:function(a){var d,h=a.relatedTarget,e=a.handleObj;return h&&(h===this||p.contains(this,h))||(a.type=e.origType,d=e.handler.apply(this,arguments),a.type=c),d}}});p.fn.extend({on:function(a,c,d,h){return U(this,a,c,d,h)},one:function(a,c,d,h){return U(this,a,c,d,h,1)},off:function(a,c,d){var h,e;if(a&&a.preventDefault&&a.handleObj)return h=a.handleObj,p(a.delegateTarget).off(h.namespace?
h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if("object"==typeof a){for(e in a)this.off(e,c,a[e]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=B),this.each(function(){p.event.remove(this,a,d,c)})}});var ac=/<script|<style|<link/i,Ub=/checked\s*(?:[^=]|=\s*.checked.)/i,Wb=/^\s*<!\[CDATA\[|\]\]>\s*$/g;p.extend({htmlPrefilter:function(a){return a},clone:function(a,c,d){var h,e,f,k=a.cloneNode(!0),m=La(a);if(!(N.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||
p.isXMLDoc(a))){var l=C(k);var n=0;for(h=(e=C(a)).length;n<h;n++){var q=e[n];var t=l[n];void 0;"input"===(f=t.nodeName.toLowerCase())&&Xa.test(q.type)?t.checked=q.checked:"input"!==f&&"textarea"!==f||(t.defaultValue=q.defaultValue)}}if(c)if(d)for(e=e||C(a),l=l||C(k),n=0,h=e.length;n<h;n++)ea(e[n],l[n]);else ea(a,k);return 0<(l=C(k,"script")).length&&D(l,!m&&C(a,"script")),k},cleanData:function(a){for(var c,d,h,e=p.event.special,f=0;void 0!==(d=a[f]);f++)if(Wa(d)){if(c=d[E.expando]){if(c.events)for(h in c.events)e[h]?
p.event.remove(d,h):p.removeEvent(d,h,c.handle);d[E.expando]=void 0}d[sa.expando]&&(d[sa.expando]=void 0)}}});p.fn.extend({detach:function(a){return S(this,a,!0)},remove:function(a){return S(this,a)},text:function(a){return Aa(this,function(a){return void 0===a?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return X(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||Z(this,a).appendChild(a)})},prepend:function(){return X(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=Z(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return X(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return X(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)1===
a.nodeType&&(p.cleanData(C(a,!1)),a.textContent="");return this},clone:function(a,c){return a=null!=a&&a,c=null==c?a:c,this.map(function(){return p.clone(this,a,c)})},html:function(a){return Aa(this,function(a){var c=this[0]||{},d=0,h=this.length;if(void 0===a&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&!ac.test(a)&&!va[(ub.exec(a)||["",""])[1].toLowerCase()]){a=p.htmlPrefilter(a);try{for(;d<h;d++)1===(c=this[d]||{}).nodeType&&(p.cleanData(C(c,!1)),c.innerHTML=a);c=0}catch(jb){}}c&&
this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return X(this,arguments,function(c){var d=this.parentNode;0>p.inArray(this,a)&&(p.cleanData(C(this)),d&&d.replaceChild(c,this))},a)}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){p.fn[a]=function(a){for(var d=[],h=p(a),e=h.length-1,f=0;f<=e;f++)a=f===e?this:this.clone(!0),p(h[f])[c](a),Ca.apply(d,a.get());return this.pushStack(d)}});
var mb=new RegExp("^("+Cb+")(?!px)[a-z%]+$","i"),lb=/^--/,cb=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=a),d.getComputedStyle(c)},Eb=function(a,c,d){var h,e={};for(h in c)e[h]=a.style[h],a.style[h]=c[h];for(h in d=d.call(a),c)a.style[h]=e[h];return d},Xb=new RegExp(za.join("|"),"i");!function(){function c(){if(n){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";n.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
Ja.appendChild(l).appendChild(n);var c=a.getComputedStyle(n);d="1%"!==c.top;m=12===Math.round(parseFloat(c.marginLeft));n.style.right="60%";f=36===Math.round(parseFloat(c.right));h=36===Math.round(parseFloat(c.width));n.style.position="absolute";e=12===Math.round(parseFloat(n.offsetWidth/3));Ja.removeChild(l);n=null}}var d,h,e,f,k,m,l=F.createElement("div"),n=F.createElement("div");n.style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle="content-box"===
n.style.backgroundClip,p.extend(N,{boxSizingReliable:function(){return c(),h},pixelBoxStyles:function(){return c(),f},pixelPosition:function(){return c(),d},reliableMarginLeft:function(){return c(),m},scrollboxSize:function(){return c(),e},reliableTrDimensions:function(){var c,d,h,e;return null==k&&(c=F.createElement("table"),d=F.createElement("tr"),h=F.createElement("div"),c.style.cssText="position:absolute;left:-11111px;border-collapse:separate",d.style.cssText="border:1px solid",d.style.height=
"1px",h.style.height="9px",h.style.display="block",Ja.appendChild(c).appendChild(d).appendChild(h),e=a.getComputedStyle(d),k=parseInt(e.height,10)+parseInt(e.borderTopWidth,10)+parseInt(e.borderBottomWidth,10)===d.offsetHeight,Ja.removeChild(c)),k}}))}();var yb=["Webkit","Moz","ms"],xb=F.createElement("div").style,wb={},bc=/^(none|table(?!-c[ea]).+)/,cc={position:"absolute",visibility:"hidden",display:"block"},Fb={letterSpacing:"0",fontWeight:"400"};p.extend({cssHooks:{opacity:{get:function(a,c){if(c)return a=
W(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,c,d,h){if(a&&3!==a.nodeType&&8!==a.nodeType&&
a.style){var e,f,k,m=x(c),l=lb.test(c),n=a.style;if(l||(c=ra(m)),k=p.cssHooks[c]||p.cssHooks[m],void 0===d)return k&&"get"in k&&void 0!==(e=k.get(a,!1,h))?e:n[c];"string"===(f=typeof d)&&(e=Ra.exec(d))&&e[1]&&(d=u(a,c,e),f="number");null!=d&&d==d&&("number"!==f||l||(d+=e&&e[3]||(p.cssNumber[m]?"":"px")),N.clearCloneStyle||""!==d||0!==c.indexOf("background")||(n[c]="inherit"),k&&"set"in k&&void 0===(d=k.set(a,d,h))||(l?n.setProperty(c,d):n[c]=d))}},css:function(a,c,d,h){var e,f,k,m=x(c);return lb.test(c)||
(c=ra(m)),(k=p.cssHooks[c]||p.cssHooks[m])&&"get"in k&&(e=k.get(a,!0,d)),void 0===e&&(e=W(a,c,h)),"normal"===e&&c in Fb&&(e=Fb[c]),""===d||d?(f=parseFloat(e),!0===d||isFinite(f)?f||0:e):e}});p.each(["height","width"],function(a,c){p.cssHooks[c]={get:function(a,d,h){if(d)return!bc.test(p.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?T(a,c,h):Eb(a,cc,function(){return T(a,c,h)})},set:function(a,d,h){var e,f=cb(a),k=!N.scrollboxSize()&&"absolute"===f.position,m=(k||h)&&
"border-box"===p.css(a,"boxSizing",!1,f);h=h?ka(a,c,h,m,f):0;return m&&k&&(h-=Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(f[c])-ka(a,c,"border",!1,f)-.5)),h&&(e=Ra.exec(d))&&"px"!==(e[3]||"px")&&(a.style[c]=d,d=p.css(a,c)),aa(0,d,h)}}});p.cssHooks.marginLeft=ba(N.reliableMarginLeft,function(a,c){if(c)return(parseFloat(W(a,"marginLeft"))||a.getBoundingClientRect().left-Eb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"});p.each({margin:"",padding:"",border:"Width"},
function(a,c){p.cssHooks[a+c]={expand:function(d){var h=0,e={};for(d="string"==typeof d?d.split(" "):[d];4>h;h++)e[a+za[h]+c]=d[h]||d[h-2]||d[0];return e}};"margin"!==a&&(p.cssHooks[a+c].set=aa)});p.fn.extend({css:function(a,c){return Aa(this,function(a,c,d){var h,e={},f=0;if(Array.isArray(c)){d=cb(a);for(h=c.length;f<h;f++)e[c[f]]=p.css(a,c[f],!1,d);return e}return void 0!==d?p.style(a,c,d):p.css(a,c)},a,c,1<arguments.length)}});((p.Tween=P).prototype={constructor:P,init:function(a,c,d,h,e,f){this.elem=
a;this.prop=d;this.easing=e||p.easing._default;this.options=c;this.start=this.now=this.cur();this.end=h;this.unit=f||(p.cssNumber[d]?"":"px")},cur:function(){var a=P.propHooks[this.prop];return a&&a.get?a.get(this):P.propHooks._default.get(this)},run:function(a){var c,d=P.propHooks[this.prop];return this.options.duration?this.pos=c=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,
this.now,this),d&&d.set?d.set(this):P.propHooks._default.set(this),this}}).init.prototype=P.prototype;(P.propHooks={_default:{get:function(a){var c;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(c=p.css(a.elem,a.prop,""))&&"auto"!==c?c:0},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):1!==a.elem.nodeType||!p.cssHooks[a.prop]&&null==a.elem.style[ra(a.prop)]?a.elem[a.prop]=a.now:p.style(a.elem,a.prop,a.now+a.unit)}}}).scrollTop=P.propHooks.scrollLeft=
{set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};p.fx=P.prototype.init;p.fx.step={};var Ma,db,dc=/^(?:toggle|show|hide)$/,ec=/queueHooks$/;p.Animation=p.extend(J,{tweeners:{"*":[function(a,c){var d=this.createTween(a,c);return u(d.elem,a,Ra.exec(c),d),d}]},tweener:function(a,c){L(a)?(c=a,a=["*"]):a=a.match(ta);for(var d,h=0,e=a.length;h<e;h++)d=a[h],J.tweeners[d]=
J.tweeners[d]||[],J.tweeners[d].unshift(c)},prefilters:[function(a,c,d){var h,e,f,k,m,l,n,q="width"in c||"height"in c,t=this,v={},x=a.style,u=a.nodeType&&bb(a),w=E.get(a,"fxshow");for(h in d.queue||(null==(k=p._queueHooks(a,"fx")).unqueued&&(k.unqueued=0,m=k.empty.fire,k.empty.fire=function(){k.unqueued||m()}),k.unqueued++,t.always(function(){t.always(function(){k.unqueued--;p.queue(a,"fx").length||k.empty.fire()})})),c)if(e=c[h],dc.test(e)){if(delete c[h],f=f||"toggle"===e,e===(u?"hide":"show")){if("show"!==
e||!w||void 0===w[h])continue;u=!0}v[h]=w&&w[h]||p.style(a,h)}if((c=!p.isEmptyObject(c))||!p.isEmptyObject(v))for(h in q&&1===a.nodeType&&(d.overflow=[x.overflow,x.overflowX,x.overflowY],null==(l=w&&w.display)&&(l=E.get(a,"display")),"none"===(n=p.css(a,"display"))&&(l?n=l:(A([a],!0),l=a.style.display||l,n=p.css(a,"display"),A([a]))),("inline"===n||"inline-block"===n&&null!=l)&&"none"===p.css(a,"float")&&(c||(t.done(function(){x.display=l}),null==l&&(n=x.display,l="none"===n?"":n)),x.display="inline-block")),
d.overflow&&(x.overflow="hidden",t.always(function(){x.overflow=d.overflow[0];x.overflowX=d.overflow[1];x.overflowY=d.overflow[2]})),c=!1,v)c||(w?"hidden"in w&&(u=w.hidden):w=E.access(a,"fxshow",{display:l}),f&&(w.hidden=!u),u&&A([a],!0),t.done(function(){for(h in u||A([a]),E.remove(a,"fxshow"),v)p.style(a,h,v[h])})),c=ma(u?w[h]:0,h,t),h in w||(w[h]=c.start,u&&(c.end=c.start,c.start=0))}],prefilter:function(a,c){c?J.prefilters.unshift(a):J.prefilters.push(a)}});p.speed=function(a,c,d){var h=a&&"object"==
typeof a?p.extend({},a):{complete:d||!d&&c||L(a)&&a,duration:a,easing:d&&c||c&&!L(c)&&c};return p.fx.off?h.duration=0:"number"!=typeof h.duration&&(h.duration in p.fx.speeds?h.duration=p.fx.speeds[h.duration]:h.duration=p.fx.speeds._default),null!=h.queue&&!0!==h.queue||(h.queue="fx"),h.old=h.complete,h.complete=function(){L(h.old)&&h.old.call(this);h.queue&&p.dequeue(this,h.queue)},h};p.fn.extend({fadeTo:function(a,c,d,h){return this.filter(bb).css("opacity",0).show().end().animate({opacity:c},a,
d,h)},animate:function(a,c,d,h){var e=p.isEmptyObject(a),f=p.speed(c,d,h);c=function(){var c=J(this,p.extend({},a),f);(e||E.get(this,"finish"))&&c.stop(!0)};return c.finish=c,e||!1===f.queue?this.each(c):this.queue(f.queue,c)},stop:function(a,c,d){var h=function(a){var c=a.stop;delete a.stop;c(d)};return"string"!=typeof a&&(d=c,c=a,a=void 0),c&&this.queue(a||"fx",[]),this.each(function(){var c=!0,e=null!=a&&a+"queueHooks",f=p.timers,k=E.get(this);if(e)k[e]&&k[e].stop&&h(k[e]);else for(e in k)k[e]&&
k[e].stop&&ec.test(e)&&h(k[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(d),c=!1,f.splice(e,1));!c&&d||p.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var c=E.get(this),d=c[a+"queue"];var h=c[a+"queueHooks"];var e=p.timers,f=d?d.length:0;c.finish=!0;p.queue(this,a,[]);h&&h.stop&&h.stop.call(this,!0);for(h=e.length;h--;)e[h].elem===this&&e[h].queue===a&&(e[h].anim.stop(!0),e.splice(h,1));for(h=0;h<f;h++)d[h]&&d[h].finish&&
d[h].finish.call(this);delete c.finish})}});p.each(["toggle","show","hide"],function(a,c){var d=p.fn[c];p.fn[c]=function(a,h,e){return null==a||"boolean"==typeof a?d.apply(this,arguments):this.animate(Q(c,!0),a,h,e)}});p.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){p.fn[a]=function(a,d,h){return this.animate(c,a,d,h)}});p.timers=[];p.fx.tick=function(){var a,c=0,d=p.timers;for(Ma=Date.now();c<
d.length;c++)(a=d[c])()||d[c]!==a||d.splice(c--,1);d.length||p.fx.stop();Ma=void 0};p.fx.timer=function(a){p.timers.push(a);p.fx.start()};p.fx.interval=13;p.fx.start=function(){db||(db=!0,K())};p.fx.stop=function(){db=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(c,d){return c=p.fx&&p.fx.speeds[c]||c,d=d||"fx",this.queue(d,function(d,h){var e=a.setTimeout(d,c);h.stop=function(){a.clearTimeout(e)}})};var Ya=F.createElement("input");var fc=F.createElement("select").appendChild(F.createElement("option"));
Ya.type="checkbox";N.checkOn=""!==Ya.value;N.optSelected=fc.selected;(Ya=F.createElement("input")).value="t";Ya.type="radio";N.radioValue="t"===Ya.value;var Za=p.expr.attrHandle;p.fn.extend({attr:function(a,c){return Aa(this,p.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}});p.extend({attr:function(a,c,d){var h,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?p.prop(a,c,d):(1===f&&p.isXMLDoc(a)||(e=p.attrHooks[c.toLowerCase()]||
(p.expr.match.bool.test(c)?gc:void 0)),void 0!==d?null===d?void p.removeAttr(a,c):e&&"set"in e&&void 0!==(h=e.set(a,d,c))?h:(a.setAttribute(c,d+""),d):e&&"get"in e&&null!==(h=e.get(a,c))?h:null==(h=p.find.attr(a,c))?void 0:h)},attrHooks:{type:{set:function(a,c){if(!N.radioValue&&"radio"===c&&h(a,"input")){var d=a.value;return a.setAttribute("type",c),d&&(a.value=d),c}}}},removeAttr:function(a,c){var d=0,h=c&&c.match(ta);if(h&&1===a.nodeType)for(;c=h[d++];)a.removeAttribute(c)}});var gc={set:function(a,
c,d){return!1===c?p.removeAttr(a,d):a.setAttribute(d,d),d}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,c){var d=Za[c]||p.find.attr;Za[c]=function(a,c,h){var e,f,k=c.toLowerCase();return h||(f=Za[k],Za[k]=e,e=null!=d(a,c,h)?k:null,Za[k]=f),e}});var hc=/^(?:input|select|textarea|button)$/i,ic=/^(?:a|area)$/i;p.fn.extend({prop:function(a,c){return Aa(this,p.prop,a,c,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[p.propFix[a]||a]})}});p.extend({prop:function(a,
c,d){var h,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&p.isXMLDoc(a)||(c=p.propFix[c]||c,e=p.propHooks[c]),void 0!==d?e&&"set"in e&&void 0!==(h=e.set(a,d,c))?h:a[c]=d:e&&"get"in e&&null!==(h=e.get(a,c))?h:a[c]},propHooks:{tabIndex:{get:function(a){var c=p.find.attr(a,"tabindex");return c?parseInt(c,10):hc.test(a.nodeName)||ic.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});N.optSelected||(p.propHooks.selected={get:function(a){a=a.parentNode;return a&&a.parentNode&&
a.parentNode.selectedIndex,null},set:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){p.propFix[this.toLowerCase()]=this});p.fn.extend({addClass:function(a){var c,d,h,e,f,k;return L(a)?this.each(function(c){p(this).addClass(a.call(this,c,da(this)))}):(c=wa(a)).length?this.each(function(){if(h=da(this),d=1===this.nodeType&&
" "+ca(h)+" "){for(f=0;f<c.length;f++)e=c[f],0>d.indexOf(" "+e+" ")&&(d+=e+" ");k=ca(d);h!==k&&this.setAttribute("class",k)}}):this},removeClass:function(a){var c,d,h,e,f,k;return L(a)?this.each(function(c){p(this).removeClass(a.call(this,c,da(this)))}):arguments.length?(c=wa(a)).length?this.each(function(){if(h=da(this),d=1===this.nodeType&&" "+ca(h)+" "){for(f=0;f<c.length;f++)for(e=c[f];-1<d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");k=ca(d);h!==k&&this.setAttribute("class",k)}}):this:this.attr("class",
"")},toggleClass:function(a,c){var d,h,e,f,k=typeof a,m="string"===k||Array.isArray(a);return L(a)?this.each(function(d){p(this).toggleClass(a.call(this,d,da(this),c),c)}):"boolean"==typeof c&&m?c?this.addClass(a):this.removeClass(a):(d=wa(a),this.each(function(){if(m)for(f=p(this),e=0;e<d.length;e++)h=d[e],f.hasClass(h)?f.removeClass(h):f.addClass(h);else void 0!==a&&"boolean"!==k||((h=da(this))&&E.set(this,"__className__",h),this.setAttribute&&this.setAttribute("class",h||!1===a?"":E.get(this,"__className__")||
""))}))},hasClass:function(a){var c,d=0;for(a=" "+a+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+ca(da(c))+" ").indexOf(a))return!0;return!1}});var jc=/\r/g;p.fn.extend({val:function(a){var c,d,h,e=this[0];return arguments.length?(h=L(a),this.each(function(d){var e;1===this.nodeType&&(null==(e=h?a.call(this,d,p(this).val()):a)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=p.map(e,function(a){return null==a?"":a+""})),(c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&
void 0!==c.set(this,e,"value")||(this.value=e))})):e?(c=p.valHooks[e.type]||p.valHooks[e.nodeName.toLowerCase()])&&"get"in c&&void 0!==(d=c.get(e,"value"))?d:"string"==typeof(d=e.value)?d.replace(jc,""):null==d?"":d:void 0}});p.extend({valHooks:{option:{get:function(a){var c=p.find.attr(a,"value");return null!=c?c:ca(p.text(a))}},select:{get:function(a){var c,d,e=a.options,f=a.selectedIndex,k="select-one"===a.type,m=k?null:[],l=k?f+1:e.length;for(d=0>f?l:k?f:0;d<l;d++)if(!(!(c=e[d]).selected&&d!==
f||c.disabled||c.parentNode.disabled&&h(c.parentNode,"optgroup"))){if(a=p(c).val(),k)return a;m.push(a)}return m},set:function(a,c){var d,h,e=a.options;c=p.makeArray(c);for(var f=e.length;f--;)((h=e[f]).selected=-1<p.inArray(p.valHooks.option.get(h),c))&&(d=!0);return d||(a.selectedIndex=-1),c}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=-1<p.inArray(p(a).val(),c)}};N.checkOn||(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?
"on":a.value})});var $a=a.location,Gb=Date.now(),qb=/\?/;p.parseXML=function(c){var d;if(!c||"string"!=typeof c)return null;try{var h=(new a.DOMParser).parseFromString(c,"text/xml")}catch(wc){}return d=h&&h.getElementsByTagName("parsererror")[0],h&&!d||p.error("Invalid XML: "+(d?p.map(d.childNodes,function(a){return a.textContent}).join("\n"):c)),h};var Hb=/^(?:focusinfocus|focusoutblur)$/,Ib=function(a){a.stopPropagation()};p.extend(p.event,{trigger:function(c,d,h,e){var f,k,m,l,n,q,t=[h||F],v=ua.call(c,
"type")?c.type:c;var x=ua.call(c,"namespace")?c.namespace.split("."):[];if(f=q=k=h=h||F,3!==h.nodeType&&8!==h.nodeType&&!Hb.test(v+p.event.triggered)&&(-1<v.indexOf(".")&&(v=(x=v.split(".")).shift(),x.sort()),m=0>v.indexOf(":")&&"on"+v,(c=c[p.expando]?c:new p.Event(v,"object"==typeof c&&c)).isTrigger=e?2:3,c.namespace=x.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=h),d=null==d?[c]:p.makeArray(d,[c]),n=p.event.special[v]||
{},e||!n.trigger||!1!==n.trigger.apply(h,d))){if(!e&&!n.noBubble&&!Da(h)){var u=n.delegateType||v;for(Hb.test(u+v)||(f=f.parentNode);f;f=f.parentNode)t.push(f),k=f;k===(h.ownerDocument||F)&&t.push(k.defaultView||k.parentWindow||a)}for(x=0;(f=t[x++])&&!c.isPropagationStopped();)q=f,c.type=1<x?u:n.bindType||v,(l=(E.get(f,"events")||Object.create(null))[c.type]&&E.get(f,"handle"))&&l.apply(f,d),(l=m&&f[m])&&l.apply&&Wa(f)&&(c.result=l.apply(f,d),!1===c.result&&c.preventDefault());return c.type=v,e||
c.isDefaultPrevented()||n._default&&!1!==n._default.apply(t.pop(),d)||!Wa(h)||m&&L(h[v])&&!Da(h)&&((k=h[m])&&(h[m]=null),p.event.triggered=v,c.isPropagationStopped()&&q.addEventListener(v,Ib),h[v](),c.isPropagationStopped()&&q.removeEventListener(v,Ib),p.event.triggered=void 0,k&&(h[m]=k)),c.result}},simulate:function(a,c,d){a=p.extend(new p.Event,d,{type:a,isSimulated:!0});p.event.trigger(a,null,c)}});p.fn.extend({trigger:function(a,c){return this.each(function(){p.event.trigger(a,c,this)})},triggerHandler:function(a,
c){var d=this[0];if(d)return p.event.trigger(a,c,d,!0)}});var Yb=/\[\]$/,Jb=/\r?\n/g,kc=/^(?:submit|button|image|reset|file)$/i,lc=/^(?:input|select|textarea|keygen)/i;p.param=function(a,c){var d,h=[],e=function(a,c){c=L(c)?c():c;h[h.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){e(this.name,this.value)});else for(d in a)ha(d,a[d],c,e);return h.join("&")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&lc.test(this.nodeName)&&!kc.test(a)&&(this.checked||!Xa.test(a))}).map(function(a,c){a=p(this).val();return null==a?null:Array.isArray(a)?p.map(a,function(a){return{name:c.name,value:a.replace(Jb,"\r\n")}}):{name:c.name,value:a.replace(Jb,"\r\n")}}).get()}});var mc=/%20/g,nc=/#.*$/,oc=/([?&])_=[^&]*/,pc=/^(.*?):[ \t]*([^\r\n]*)$/gm,
qc=/^(?:GET|HEAD)$/,rc=/^\/\//,Kb={},nb={},Lb="*/".concat("*"),rb=F.createElement("a");rb.href=$a.href;p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$a.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,
html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?pa(pa(a,p.ajaxSettings),c):pa(p.ajaxSettings,a)},ajaxPrefilter:ia(Kb),ajaxTransport:ia(nb),ajax:function(c,d){function h(c,d,h,m){var q,t,P,A,z,I=d;T||(T=!0,l&&a.clearTimeout(l),e=void 0,k=m||"",K.readyState=0<c?4:0,q=200<=c&&300>c||304===c,
h&&(A=function(a,c,d){for(var h,e,f,k,m=a.contents,l=a.dataTypes;"*"===l[0];)l.shift(),void 0===h&&(h=a.mimeType||c.getResponseHeader("Content-Type"));if(h)for(e in m)if(m[e]&&m[e].test(h)){l.unshift(e);break}if(l[0]in d)f=l[0];else{for(e in d){if(!l[0]||a.converters[e+" "+l[0]]){f=e;break}k||(k=e)}f=f||k}if(f)return f!==l[0]&&l.unshift(f),d[f]}(v,K,h)),!q&&-1<p.inArray("script",v.dataTypes)&&0>p.inArray("json",v.dataTypes)&&(v.converters["text script"]=function(){}),A=function(a,c,d,h){var e,f,k,
m,l,n={},q=a.dataTypes.slice();if(q[1])for(k in a.converters)n[k.toLowerCase()]=a.converters[k];for(f=q.shift();f;)if(a.responseFields[f]&&(d[a.responseFields[f]]=c),!l&&h&&a.dataFilter&&(c=a.dataFilter(c,a.dataType)),l=f,f=q.shift())if("*"===f)f=l;else if("*"!==l&&l!==f){if(!(k=n[l+" "+f]||n["* "+f]))for(e in n)if((m=e.split(" "))[1]===f&&(k=n[l+" "+m[0]]||n["* "+m[0]])){!0===k?k=n[e]:!0!==n[e]&&(f=m[0],q.unshift(m[1]));break}if(!0!==k)if(k&&a["throws"])c=k(c);else try{c=k(c)}catch(Zb){return{state:"parsererror",
error:k?Zb:"No conversion from "+l+" to "+f}}}return{state:"success",data:c}}(v,A,K,q),q?(v.ifModified&&((z=K.getResponseHeader("Last-Modified"))&&(p.lastModified[f]=z),(z=K.getResponseHeader("etag"))&&(p.etag[f]=z)),204===c||"HEAD"===v.type?I="nocontent":304===c?I="notmodified":(I=A.state,t=A.data,q=!(P=A.error))):(P=I,!c&&I||(I="error",0>c&&(c=0))),K.status=c,K.statusText=(d||I)+"",q?w.resolveWith(x,[t,I,K]):w.rejectWith(x,[K,I,P]),K.statusCode(y),y=void 0,n&&u.trigger(q?"ajaxSuccess":"ajaxError",
[K,v,q?t:P]),V.fireWith(x,[K,I]),n&&(u.trigger("ajaxComplete",[K,v]),--p.active||p.event.trigger("ajaxStop")))}"object"==typeof c&&(d=c,c=void 0);d=d||{};var e,f,k,m,l,n,q,t,v=p.ajaxSetup({},d),x=v.context||v,u=v.context&&(x.nodeType||x.jquery)?p(x):p.event,w=p.Deferred(),V=p.Callbacks("once memory"),y=v.statusCode||{},P={},A={},z="canceled",K={readyState:0,getResponseHeader:function(a){var c;if(T){if(!m)for(m={};c=pc.exec(k);)m[c[1].toLowerCase()+" "]=(m[c[1].toLowerCase()+" "]||[]).concat(c[2]);
c=m[a.toLowerCase()+" "]}return null==c?null:c.join(", ")},getAllResponseHeaders:function(){return T?k:null},setRequestHeader:function(a,c){return null==T&&(a=A[a.toLowerCase()]=A[a.toLowerCase()]||a,P[a]=c),this},overrideMimeType:function(a){return null==T&&(v.mimeType=a),this},statusCode:function(a){var c;if(a)if(T)K.always(a[K.status]);else for(c in a)y[c]=[y[c],a[c]];return this},abort:function(a){a=a||z;return e&&e.abort(a),h(0,a),this}};if(w.promise(K),v.url=((c||v.url||$a.href)+"").replace(rc,
$a.protocol+"//"),v.type=d.method||d.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(ta)||[""],null==v.crossDomain){c=F.createElement("a");try{c.href=v.url,c.href=c.href,v.crossDomain=rb.protocol+"//"+rb.host!=c.protocol+"//"+c.host}catch(pb){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=p.param(v.data,v.traditional)),ja(Kb,v,d,K),T)return K;for(q in(n=p.event&&v.global)&&0==p.active++&&p.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),
v.hasContent=!qc.test(v.type),f=v.url.replace(nc,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(mc,"+")):(t=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(qb.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(oc,"$1"),t=(qb.test(f)?"&":"?")+"_="+Gb++ +t),v.url=f+t),v.ifModified&&(p.lastModified[f]&&K.setRequestHeader("If-Modified-Since",p.lastModified[f]),p.etag[f]&&K.setRequestHeader("If-None-Match",
p.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||d.contentType)&&K.setRequestHeader("Content-Type",v.contentType),K.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Lb+"; q=0.01":""):v.accepts["*"]),v.headers)K.setRequestHeader(q,v.headers[q]);if(v.beforeSend&&(!1===v.beforeSend.call(x,K,v)||T))return K.abort();if(z="abort",V.add(v.complete),K.done(v.success),K.fail(v.error),e=ja(nb,v,d,K)){if(K.readyState=1,n&&u.trigger("ajaxSend",
[K,v]),T)return K;v.async&&0<v.timeout&&(l=a.setTimeout(function(){K.abort("timeout")},v.timeout));try{var T=!1;e.send(P,h)}catch(pb){if(T)throw pb;h(-1,pb)}}else h(-1,"No Transport");return K},getJSON:function(a,c,d){return p.get(a,c,d,"json")},getScript:function(a,c){return p.get(a,void 0,c,"script")}});p.each(["get","post"],function(a,c){p[c]=function(a,d,h,e){return L(d)&&(e=e||h,h=d,d=void 0),p.ajax(p.extend({url:a,type:c,dataType:e,data:d,success:h},p.isPlainObject(a)&&a))}});p.ajaxPrefilter(function(a){for(var c in a.headers)"content-type"===
c.toLowerCase()&&(a.contentType=a.headers[c]||"")});p._evalUrl=function(a,c,d){return p.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){p.globalEval(a,c,d)}})};p.fn.extend({wrapAll:function(a){var c;return this[0]&&(L(a)&&(a=a.call(this[0])),c=p(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),
this},wrapInner:function(a){return L(a)?this.each(function(c){p(this).wrapInner(a.call(this,c))}):this.each(function(){var c=p(this),d=c.contents();d.length?d.wrapAll(a):c.append(a)})},wrap:function(a){var c=L(a);return this.each(function(d){p(this).wrapAll(c?a.call(this,d):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}});p.expr.pseudos.hidden=function(a){return!p.expr.pseudos.visible(a)};p.expr.pseudos.visible=function(a){return!!(a.offsetWidth||
a.offsetHeight||a.getClientRects().length)};p.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(R){}};var sc={0:200,1223:204},ab=p.ajaxSettings.xhr();N.cors=!!ab&&"withCredentials"in ab;N.ajax=ab=!!ab;p.ajaxTransport(function(c){var d,h;if(N.cors||ab&&!c.crossDomain)return{send:function(e,f){var k,m=c.xhr();if(m.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(k in c.xhrFields)m[k]=c.xhrFields[k];for(k in c.mimeType&&m.overrideMimeType&&m.overrideMimeType(c.mimeType),
c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)m.setRequestHeader(k,e[k]);d=function(a){return function(){d&&(d=h=m.onload=m.onerror=m.onabort=m.ontimeout=m.onreadystatechange=null,"abort"===a?m.abort():"error"===a?"number"!=typeof m.status?f(0,"error"):f(m.status,m.statusText):f(sc[m.status]||m.status,m.statusText,"text"!==(m.responseType||"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};m.onload=d();
h=m.onerror=m.ontimeout=d("error");void 0!==m.onabort?m.onabort=h:m.onreadystatechange=function(){4===m.readyState&&a.setTimeout(function(){d&&h()})};d=d("abort");try{m.send(c.hasContent&&c.data||null)}catch(Sb){if(d)throw Sb;}},abort:function(){d&&d()}}});p.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return p.globalEval(a),
a}}});p.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});p.ajaxTransport("script",function(a){var c,d;if(a.crossDomain||a.scriptAttrs)return{send:function(h,e){c=p("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",d=function(a){c.remove();d=null;a&&e("error"===a.type?404:200,a.type)});F.head.appendChild(c[0])},abort:function(){d&&d()}}});var Mb,Nb=[],sb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=
Nb.pop()||p.expando+"_"+Gb++;return this[a]=!0,a}});p.ajaxPrefilter("json jsonp",function(c,d,h){var e,f,k,m=!1!==c.jsonp&&(sb.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&sb.test(c.data)&&"data");if(m||"jsonp"===c.dataTypes[0])return e=c.jsonpCallback=L(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,m?c[m]=c[m].replace(sb,"$1"+e):!1!==c.jsonp&&(c.url+=(qb.test(c.url)?"&":"?")+c.jsonp+"="+e),c.converters["script json"]=function(){return k||
p.error(e+" was not called"),k[0]},c.dataTypes[0]="json",f=a[e],a[e]=function(){k=arguments},h.always(function(){void 0===f?p(a).removeProp(e):a[e]=f;c[e]&&(c.jsonpCallback=d.jsonpCallback,Nb.push(e));k&&L(f)&&f(k[0]);k=f=void 0}),"script"});N.createHTMLDocument=((Mb=F.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Mb.childNodes.length);p.parseHTML=function(a,c,d){return"string"!=typeof a?[]:("boolean"==typeof c&&(d=c,c=!1),c||(N.createHTMLDocument?((h=(c=F.implementation.createHTMLDocument("")).createElement("base")).href=
F.location.href,c.head.appendChild(h)):c=F),f=!d&&[],(e=H.exec(a))?[c.createElement(e[1])]:(e=O([a],c,f),f&&f.length&&p(f).remove(),p.merge([],e.childNodes)));var h,e,f};p.fn.load=function(a,c,d){var h,e,f,k=this,m=a.indexOf(" ");return-1<m&&(h=ca(a.slice(m)),a=a.slice(0,m)),L(c)?(d=c,c=void 0):c&&"object"==typeof c&&(e="POST"),0<k.length&&p.ajax({url:a,type:e||"GET",dataType:"html",data:c}).done(function(a){f=arguments;k.html(h?p("<div>").append(p.parseHTML(a)).find(h):a)}).always(d&&function(a,
c){k.each(function(){d.apply(this,f||[a.responseText,c,a])})}),this};p.expr.pseudos.animated=function(a){return p.grep(p.timers,function(c){return a===c.elem}).length};p.offset={setOffset:function(a,c,d){var h,e,f,k=p.css(a,"position"),m=p(a),l={};"static"===k&&(a.style.position="relative");var n=m.offset();var q=p.css(a,"top");var t=p.css(a,"left");("absolute"===k||"fixed"===k)&&-1<(q+t).indexOf("auto")?(f=(h=m.position()).top,e=h.left):(f=parseFloat(q)||0,e=parseFloat(t)||0);L(c)&&(c=c.call(a,d,
p.extend({},n)));null!=c.top&&(l.top=c.top-n.top+f);null!=c.left&&(l.left=c.left-n.left+e);"using"in c?c.using.call(a,l):m.css(l)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(c){p.offset.setOffset(this,a,c)});var c,d,h=this[0];return h?h.getClientRects().length?(c=h.getBoundingClientRect(),d=h.ownerDocument.defaultView,{top:c.top+d.pageYOffset,left:c.left+d.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var a,c=this[0],d={top:0,
left:0};if("fixed"===p.css(c,"position"))var h=c.getBoundingClientRect();else{h=this.offset();var e=c.ownerDocument;for(a=c.offsetParent||e.documentElement;a&&(a===e.body||a===e.documentElement)&&"static"===p.css(a,"position");)a=a.parentNode;a&&a!==c&&1===a.nodeType&&((d=p(a).offset()).top+=p.css(a,"borderTopWidth",!0),d.left+=p.css(a,"borderLeftWidth",!0))}return{top:h.top-d.top-p.css(c,"marginTop",!0),left:h.left-d.left-p.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent;a&&"static"===p.css(a,"position");)a=a.offsetParent;return a||Ja})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d="pageYOffset"===c;p.fn[a]=function(h){return Aa(this,function(a,h,e){var f;if(Da(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e)return f?f[c]:a[h];f?f.scrollTo(d?f.pageXOffset:e,d?e:f.pageYOffset):a[h]=e},a,h,arguments.length)}});p.each(["top","left"],function(a,c){p.cssHooks[c]=ba(N.pixelPosition,function(a,d){if(d)return d=W(a,
c),mb.test(d)?p(a).position()[c]+"px":d})});p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,h){p.fn[h]=function(e,f){var k=arguments.length&&(d||"boolean"!=typeof e),m=d||(!0===e||!0===f?"margin":"border");return Aa(this,function(c,d,e){var f;return Da(c)?0===h.indexOf("outer")?c["inner"+a]:c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+
a],f["client"+a])):void 0===e?p.css(c,d,m):p.style(c,d,e,m)},c,k?e:void 0,k)}})});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){p.fn[c]=function(a){return this.on(c,a)}});p.fn.extend({bind:function(a,c,d){return this.on(a,null,c,d)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,d,h){return this.on(c,a,d,h)},undelegate:function(a,c,d){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",d)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||
a)}});p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,c){p.fn[c]=function(a,d){return 0<arguments.length?this.on(c,null,a,d):this.trigger(c)}});var tc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(a,c){var d,h,e;if("string"==typeof c&&(d=a[c],c=a,a=d),L(a))return h=la.call(arguments,2),(e=function(){return a.apply(c||
this,h.concat(la.call(arguments)))}).guid=a.guid=a.guid||p.guid++,e};p.holdReady=function(a){a?p.readyWait++:p.ready(!0)};p.isArray=Array.isArray;p.parseJSON=JSON.parse;p.nodeName=h;p.isFunction=L;p.isWindow=Da;p.camelCase=x;p.type=e;p.now=Date.now;p.isNumeric=function(a){var c=p.type(a);return("number"===c||"string"===c)&&!isNaN(a-parseFloat(a))};p.trim=function(a){return null==a?"":(a+"").replace(tc,"$1")};"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var uc=a.jQuery,
vc=a.$;return p.noConflict=function(c){return a.$===p&&(a.$=vc),c&&a.jQuery===p&&(a.jQuery=uc),p},"undefined"==typeof c&&(a.jQuery=a.$=p),p});
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){a.ui=a.ui||{};a.ui.version="1.12.1";var c=0,f=Array.prototype.slice;a.cleanData=function(c){return function(d){var h,e,f;for(f=0;null!=(e=d[f]);f++)try{(h=a._data(e,"events"))&&h.remove&&a(e).triggerHandler("remove")}catch(n){}c(d)}}(a.cleanData);a.widget=function(c,h,e){var d,f,k,q={},t=c.split(".")[0];c=c.split(".")[1];var y=t+"-"+c;return e||(e=h,h=a.Widget),a.isArray(e)&&(e=a.extend.apply(null,[{}].concat(e))),
a.expr[":"][y.toLowerCase()]=function(c){return!!a.data(c,y)},a[t]=a[t]||{},d=a[t][c],f=a[t][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),void 0):new f(a,c)},a.extend(f,d,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),k=new h,k.options=a.widget.extend({},k.options),a.each(e,function(c,d){return a.isFunction(d)?(q[c]=function(){function a(){return h.prototype[c].apply(this,arguments)}function e(a){return h.prototype[c].apply(this,a)}return function(){var c,
h=this._super,f=this._superApply;return this._super=a,this._superApply=e,c=d.apply(this,arguments),this._super=h,this._superApply=f,c}}(),void 0):(q[c]=d,void 0)}),f.prototype=a.widget.extend(k,{widgetEventPrefix:d?k.widgetEventPrefix||c:c},q,{constructor:f,namespace:t,widgetName:c,widgetFullName:y}),d?(a.each(d._childConstructors,function(c,d){c=d.prototype;a.widget(c.namespace+"."+c.widgetName,f,d._proto)}),delete d._childConstructors):h._childConstructors.push(f),a.widget.bridge(c,f),f};a.widget.extend=
function(c){for(var d,e,l=f.call(arguments,1),m=0,n=l.length;n>m;m++)for(d in l[m])e=l[m][d],l[m].hasOwnProperty(d)&&void 0!==e&&(c[d]=a.isPlainObject(e)?a.isPlainObject(c[d])?a.widget.extend({},c[d],e):a.widget.extend({},e):e);return c};a.widget.bridge=function(c,h){var d=h.prototype.widgetFullName||c;a.fn[c]=function(e){var k="string"==typeof e,l=f.call(arguments,1),q=this;return k?this.length||"instance"!==e?this.each(function(){var h,f=a.data(this,d);return"instance"===e?(q=f,!1):f?a.isFunction(f[e])&&
"_"!==e.charAt(0)?(h=f[e].apply(f,l),h!==f&&void 0!==h?(q=h&&h.jquery?q.pushStack(h.get()):h,!1):void 0):a.error("no such method '"+e+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+e+"'")}):q=void 0:(l.length&&(e=a.widget.extend.apply(null,[e].concat(l))),this.each(function(){var c=a.data(this,d);c?(c.option(e||{}),c._init&&c._init()):a.data(this,d,new h(e,this))})),q}};a.Widget=function(){};a.Widget._childConstructors=[];
a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,h){h=a(h||this.defaultElement||this)[0];this.element=a(h);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();this.classesElementLookup={};h!==this&&(a.data(h,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===h&&this.destroy()}}),this.document=a(h.style?
h.ownerDocument:h.document||h),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,this._getCreateOptions(),d);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var c=this;this._destroy();a.each(this.classesElementLookup,
function(a,d){c._removeClass(d,a)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(c,h){var d,e,f=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(f={},d=c.split("."),c=d.shift(),d.length){var n=f[c]=a.widget.extend({},this.options[c]);for(e=0;d.length-1>e;e++)n[d[e]]=
n[d[e]]||{},n=n[d[e]];if(c=d.pop(),1===arguments.length)return void 0===n[c]?null:n[c];n[c]=h}else{if(1===arguments.length)return void 0===this.options[c]?null:this.options[c];f[c]=h}return this._setOptions(f),this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){return"classes"===a&&this._setOptionClasses(c),this.options[a]=c,"disabled"===a&&this._setOptionDisabled(c),this},_setOptionClasses:function(c){var d,e;for(d in c){var f=this.classesElementLookup[d];
c[d]!==this.options.classes[d]&&f&&f.length&&(e=a(f.get()),this._removeClass(f,d),e.addClass(this._classes({element:e,keys:d,classes:c,add:!0})))}},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(c){function d(d,
h){var k;for(k=0;d.length>k;k++){var m=f.classesElementLookup[d[k]]||a();m=c.add?a(a.unique(m.get().concat(c.element.get()))):a(m.not(c.element).get());f.classesElementLookup[d[k]]=m;e.push(d[k]);h&&c.classes[d[k]]&&e.push(c.classes[d[k]])}}var e=[],f=this;return c=a.extend({element:this.element,classes:this.options.classes||{}},c),this._on(c.element,{remove:"_untrackClassesElement"}),c.keys&&d(c.keys.match(/\S+/g)||[],!0),c.extra&&d(c.extra.match(/\S+/g)||[]),e.join(" ")},_untrackClassesElement:function(c){var d=
this;a.each(d.classesElementLookup,function(h,e){-1!==a.inArray(c.target,e)&&(d.classesElementLookup[h]=a(e.not(c.target).get()))})},_removeClass:function(a,c,e){return this._toggleClass(a,c,e,!1)},_addClass:function(a,c,e){return this._toggleClass(a,c,e,!0)},_toggleClass:function(a,c,e,f){f="boolean"==typeof f?f:e;var d="string"==typeof a||null===a;a={extra:d?c:e,keys:d?a:c,element:d?this.element:a,add:f};return a.element.toggleClass(this._classes(a),f),this},_on:function(c,h,e){var d,f=this;"boolean"!=
typeof c&&(e=h,h=c,c=!1);e?(h=d=a(h),this.bindings=this.bindings.add(h)):(e=h,h=this.element,d=this.widget());a.each(e,function(e,k){function m(){return c||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof k?f[k]:k).apply(f,arguments):void 0}"string"!=typeof k&&(m.guid=k.guid=k.guid||m.guid||a.guid++);var l=e.match(/^([\w:-]*)\s*(.*)$/);e=l[1]+f.eventNamespace;(l=l[2])?d.on(e,l,m):h.on(e,m)})},_off:function(c,h){h=(h||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
c.off(h).off(h);this.bindings=a(this.bindings.not(c).get());this.focusable=a(this.focusable.not(c).get());this.hoverable=a(this.hoverable.not(c).get())},_delay:function(a,c){var d=this;return setTimeout(function(){return("string"==typeof a?d[a]:a).apply(d,arguments)},c||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){this._addClass(a(c.currentTarget),null,"ui-state-hover")},mouseleave:function(c){this._removeClass(a(c.currentTarget),null,"ui-state-hover")}})},
_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){this._addClass(a(c.currentTarget),null,"ui-state-focus")},focusout:function(c){this._removeClass(a(c.currentTarget),null,"ui-state-focus")}})},_trigger:function(c,h,e){var d,f=this.options[c];if(e=e||{},h=a.Event(h),h.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase(),h.target=this.element[0],c=h.originalEvent)for(d in c)d in h||(h[d]=c[d]);return this.element.trigger(h,e),!(a.isFunction(f)&&
!1===f.apply(this.element[0],[h].concat(e))||h.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(c,h){a.Widget.prototype["_"+c]=function(d,e,f){"string"==typeof e&&(e={effect:e});var k=e?!0===e||"number"==typeof e?h:e.effect||h:c;e=e||{};"number"==typeof e&&(e={duration:e});var m=!a.isEmptyObject(e);e.complete=f;e.delay&&d.delay(e.delay);m&&a.effects&&a.effects.effect[k]?d[c](e):k!==c&&d[k]?d[k](e.duration,e.easing,f):d.queue(function(h){a(this)[c]();f&&f.call(d[0]);h()})}});
a.widget;a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(c){return function(d){return!!a.data(d,c)}}):function(c,h,e){return!!a.data(c,e[3])}});a.fn.scrollParent=function(c){var d=this.css("position"),e="absolute"===d,f=c?/(auto|scroll|hidden)/:/(auto|scroll)/;c=this.parents().filter(function(){var c=a(this);return e&&"static"===c.css("position")?!1:f.test(c.css("overflow")+c.css("overflow-y")+c.css("overflow-x"))}).eq(0);return"fixed"!==d&&c.length?c:a(this[0].ownerDocument||
document)};a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var e=!1;a(document).on("mouseup",function(){e=!1});a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.on("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).on("click."+this.widgetName,function(d){return!0===a.data(d.target,c.widgetName+".preventClickEvent")?(a.removeData(d.target,c.widgetName+".preventClickEvent"),
d.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!e){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,f=1===c.which,l="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:
!1;return f&&!l&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},
this._mouseUpDelegate=function(a){return d._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(c){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button)return this._mouseUp(c);if(!c.which)if(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(c)}return(c.which||
c.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted)},_mouseUp:function(c){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&
a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);e=this.ignoreMissingWhich=!1;c.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},
_mouseCapture:function(){return!0}});a.ui.plugin={add:function(c,h,e){var d;c=a.ui[c].prototype;for(d in e)c.plugins[d]=c.plugins[d]||[],c.plugins[d].push([h,e[d]])},call:function(a,c,e,f){if((c=a.plugins[c])&&(f||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(f=0;c.length>f;f++)a.options[c[f][0]]&&c[f][1].apply(a.element,e)}};a.ui.safeActiveElement=function(a){try{var c=a.activeElement}catch(k){c=a.body}return c||(c=a.body),c.nodeName||(c=a.body),c};a.ui.safeBlur=function(c){c&&
"body"!==c.nodeName.toLowerCase()&&a(c).trigger("blur")};a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},
_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(a,c){this._super(a,c);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(c){var d=
this.options;return this.helper||d.disabled||0<a(c.target).closest(".ui-resizable-handle").length?!1:(this.handle=this._getHandle(c),this.handle?(this._blurActiveElement(c),this._blockFrames(!0===d.iframeFix?"iframe":d.iframeFix),!0):!1)},_blockFrames:function(c){this.iframeBlocks=this.document.find(c).map(function(){var c=a(this);return a("<div>").css("position","absolute").appendTo(c.parent()).outerWidth(c.outerWidth()).outerHeight(c.outerHeight()).offset(c.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&
(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(c){var d=a.ui.safeActiveElement(this.document[0]);a(c.target).closest(d).length||a.ui.safeBlur(d)},_mouseStart:function(c){var d=this.options;return this.helper=this._createHelper(c),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),
this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(c),this.originalPosition=this.position=this._generatePosition(c,!1),this.originalPageX=c.pageX,this.originalPageY=c.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),!1===this._trigger("start",c)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&
!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(c,h){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),
this.position=this._generatePosition(c,!0),this.positionAbs=this._convertPositionTo("absolute"),!h){h=this._uiHash();if(!1===this._trigger("drag",c,h))return this._mouseUp(new a.Event("mouseup",c)),!1;this.position=h.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,c),!1},_mouseStop:function(c){var d=this,e=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(e=a.ui.ddmanager.drop(this,c)),
this.dropped&&(e=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!e||"valid"===this.options.revert&&e||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",c)&&d._clear()}):!1!==this._trigger("stop",c)&&this._clear(),!1},_mouseUp:function(c){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,c),
this.handleElement.is(c.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(c){return this.options.handle?!!a(c.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;
this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(c){var d=this.options,e=a.isFunction(d.helper);c=e?a(d.helper.apply(this.element[0],[c])):"clone"===d.helper?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo("parent"===d.appendTo?this.element[0].parentNode:d.appendTo),e&&c[0]===this.element[0]&&this._setPositionRelative(),c[0]===
this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute"),c},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(c){"string"==typeof c&&(c=c.split(" "));a.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&
(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var c=this.offsetParent.offset(),h=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==h&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),
this._isRootNode(this.offsetParent[0])&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),c=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(c?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+(c?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,h,e,f=this.options,m=this.document[0];return this.relativeContainer=
null,f.containment?"window"===f.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||m.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===f.containment?(this.containment=[0,0,a(m).width()-this.helperProportions.width-
this.margins.left,(a(m).height()||m.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):f.containment.constructor===Array?(this.containment=f.containment,void 0):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),h=a(f.containment),e=h[0],e&&(c=/(scroll|auto)/.test(h.css("overflow")),this.containment=[(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("paddingLeft"),10)||0),(parseInt(h.css("borderTopWidth"),10)||0)+(parseInt(h.css("paddingTop"),
10)||0),(c?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(h.css("borderRightWidth"),10)||0)-(parseInt(h.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(h.css("borderBottomWidth"),10)||0)-(parseInt(h.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=h),void 0):(this.containment=null,void 0)},_convertPositionTo:function(a,
c){c||(c=this.position);a="absolute"===a?1:-1;var d=this._isRootNode(this.scrollParent[0]);return{top:c.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*a,left:c.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*a}},_generatePosition:function(a,c){var d,h,e,f,q=this.options,t=this._isRootNode(this.scrollParent[0]),y=a.pageX,
v=a.pageY;return t&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),c&&(this.containment&&(this.relativeContainer?(h=this.relativeContainer.offset(),d=[this.containment[0]+h.left,this.containment[1]+h.top,this.containment[2]+h.left,this.containment[3]+h.top]):d=this.containment,a.pageX-this.offset.click.left<d[0]&&(y=d[0]+this.offset.click.left),a.pageY-this.offset.click.top<d[1]&&(v=d[1]+this.offset.click.top),a.pageX-this.offset.click.left>
d[2]&&(y=d[2]+this.offset.click.left),a.pageY-this.offset.click.top>d[3]&&(v=d[3]+this.offset.click.top)),q.grid&&(e=q.grid[1]?this.originalPageY+Math.round((v-this.originalPageY)/q.grid[1])*q.grid[1]:this.originalPageY,v=d?e-this.offset.click.top>=d[1]||e-this.offset.click.top>d[3]?e:e-this.offset.click.top>=d[1]?e-q.grid[1]:e+q.grid[1]:e,f=q.grid[0]?this.originalPageX+Math.round((y-this.originalPageX)/q.grid[0])*q.grid[0]:this.originalPageX,y=d?f-this.offset.click.left>=d[0]||f-this.offset.click.left>
d[2]?f:f-this.offset.click.left>=d[0]?f-q.grid[0]:f+q.grid[0]:f),"y"===q.axis&&(y=this.originalPageX),"x"===q.axis&&(v=this.originalPageY)),{top:v-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:t?0:this.offset.scroll.top),left:y-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:t?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,
"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(c,h,e){return e=e||this._uiHash(),a.ui.plugin.call(this,c,[h,e,this],!0),/^(drag|start|stop)/.test(c)&&(this.positionAbs=this._convertPositionTo("absolute"),e.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,c,h,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,
originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,h,e){var d=a.extend({},h,{item:e.element});e.sortables=[];a(e.options.connectToSortable).each(function(){var h=a(this).sortable("instance");h&&!h.options.disabled&&(e.sortables.push(h),h.refreshPositions(),h._trigger("activate",c,d))})},stop:function(c,h,e){var d=a.extend({},h,{item:e.element});e.cancelHelperRemoval=!1;a.each(e.sortables,function(){this.isOver?(this.isOver=
0,e.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(c),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",c,d))})},drag:function(c,h,e){a.each(e.sortables,function(){var d=!1,f=this;f.positionAbs=e.positionAbs;f.helperProportions=e.helperProportions;f.offset.click=e.offset.click;f._intersectsWith(f.containerCache)&&
(d=!0,a.each(e.sortables,function(){return this.positionAbs=e.positionAbs,this.helperProportions=e.helperProportions,this.offset.click=e.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(d=!1),d}));d?(f.isOver||(f.isOver=1,e._parent=h.helper.parent(),f.currentItem=h.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return h.helper[0]},c.target=f.currentItem[0],f._mouseCapture(c,
!0),f._mouseStart(c,!0,!0),f.offset.click.top=e.offset.click.top,f.offset.click.left=e.offset.click.left,f.offset.parent.left-=e.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=e.offset.parent.top-f.offset.parent.top,e._trigger("toSortable",c),e.dropped=f.element,a.each(e.sortables,function(){this.refreshPositions()}),e.currentItem=e.element,f.fromOutside=e),f.currentItem&&(f._mouseDrag(c),h.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,
f.options.revert=!1,f._trigger("out",c,f._uiHash(f)),f._mouseStop(c,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),h.helper.appendTo(e._parent),e._refreshOffsets(c),h.position=e._generatePosition(c,!0),e._trigger("fromSortable",c),e.dropped=!1,a.each(e.sortables,function(){this.refreshPositions()}))})}});a.ui.plugin.add("draggable","cursor",{start:function(c,h,e){c=a("body");e=e.options;c.css("cursor")&&(e._cursor=c.css("cursor"));c.css("cursor",
e.cursor)},stop:function(c,h,e){c=e.options;c._cursor&&a("body").css("cursor",c._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(c,h,e){c=a(h.helper);e=e.options;c.css("opacity")&&(e._opacity=c.css("opacity"));c.css("opacity",e.opacity)},stop:function(c,h,e){c=e.options;c._opacity&&a(h.helper).css("opacity",c._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,c,e){e.scrollParentNotHidden||(e.scrollParentNotHidden=e.helper.scrollParent(!1));e.scrollParentNotHidden[0]!==
e.document[0]&&"HTML"!==e.scrollParentNotHidden[0].tagName&&(e.overflowOffset=e.scrollParentNotHidden.offset())},drag:function(c,h,e){h=e.options;var d=!1,f=e.scrollParentNotHidden[0],k=e.document[0];f!==k&&"HTML"!==f.tagName?(h.axis&&"x"===h.axis||(e.overflowOffset.top+f.offsetHeight-c.pageY<h.scrollSensitivity?f.scrollTop=d=f.scrollTop+h.scrollSpeed:c.pageY-e.overflowOffset.top<h.scrollSensitivity&&(f.scrollTop=d=f.scrollTop-h.scrollSpeed)),h.axis&&"y"===h.axis||(e.overflowOffset.left+f.offsetWidth-
c.pageX<h.scrollSensitivity?f.scrollLeft=d=f.scrollLeft+h.scrollSpeed:c.pageX-e.overflowOffset.left<h.scrollSensitivity&&(f.scrollLeft=d=f.scrollLeft-h.scrollSpeed))):(h.axis&&"x"===h.axis||(c.pageY-a(k).scrollTop()<h.scrollSensitivity?d=a(k).scrollTop(a(k).scrollTop()-h.scrollSpeed):a(window).height()-(c.pageY-a(k).scrollTop())<h.scrollSensitivity&&(d=a(k).scrollTop(a(k).scrollTop()+h.scrollSpeed))),h.axis&&"y"===h.axis||(c.pageX-a(k).scrollLeft()<h.scrollSensitivity?d=a(k).scrollLeft(a(k).scrollLeft()-
h.scrollSpeed):a(window).width()-(c.pageX-a(k).scrollLeft())<h.scrollSensitivity&&(d=a(k).scrollLeft(a(k).scrollLeft()+h.scrollSpeed))));!1!==d&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,c)}});a.ui.plugin.add("draggable","snap",{start:function(c,h,e){c=e.options;e.snapElements=[];a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),
top:d.top,left:d.left})})},drag:function(c,h,e){var d,f,k,q,t,y,v=e.options,x=v.snapTolerance,w=h.offset.left,z=w+e.helperProportions.width,u=h.offset.top,A=u+e.helperProportions.height;for(t=e.snapElements.length-1;0<=t;t--){var C=e.snapElements[t].left-e.margins.left;var D=C+e.snapElements[t].width;var O=e.snapElements[t].top-e.margins.top;var G=O+e.snapElements[t].height;C-x>z||w>D+x||O-x>A||u>G+x||!a.contains(e.snapElements[t].item.ownerDocument,e.snapElements[t].item)?(e.snapElements[t].snapping&&
e.options.snap.release&&e.options.snap.release.call(e.element,c,a.extend(e._uiHash(),{snapItem:e.snapElements[t].item})),e.snapElements[t].snapping=!1):("inner"!==v.snapMode&&(d=x>=Math.abs(O-A),f=x>=Math.abs(G-u),k=x>=Math.abs(C-z),q=x>=Math.abs(D-w),d&&(h.position.top=e._convertPositionTo("relative",{top:O-e.helperProportions.height,left:0}).top),f&&(h.position.top=e._convertPositionTo("relative",{top:G,left:0}).top),k&&(h.position.left=e._convertPositionTo("relative",{top:0,left:C-e.helperProportions.width}).left),
q&&(h.position.left=e._convertPositionTo("relative",{top:0,left:D}).left)),y=d||f||k||q,"outer"!==v.snapMode&&(d=x>=Math.abs(O-u),f=x>=Math.abs(G-A),k=x>=Math.abs(C-w),q=x>=Math.abs(D-z),d&&(h.position.top=e._convertPositionTo("relative",{top:O,left:0}).top),f&&(h.position.top=e._convertPositionTo("relative",{top:G-e.helperProportions.height,left:0}).top),k&&(h.position.left=e._convertPositionTo("relative",{top:0,left:C}).left),q&&(h.position.left=e._convertPositionTo("relative",{top:0,left:D-e.helperProportions.width}).left)),
!e.snapElements[t].snapping&&(d||f||k||q||y)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,c,a.extend(e._uiHash(),{snapItem:e.snapElements[t].item})),e.snapElements[t].snapping=d||f||k||q||y)}}});a.ui.plugin.add("draggable","stack",{start:function(c,h,e){var d;c=a.makeArray(a(e.options.stack)).sort(function(c,d){return(parseInt(a(c).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});c.length&&(d=parseInt(a(c[0]).css("zIndex"),10)||0,a(c).each(function(c){a(this).css("zIndex",
d+c)}),this.css("zIndex",d+c.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(c,h,e){c=a(h.helper);e=e.options;c.css("zIndex")&&(e._zIndex=c.css("zIndex"));c.css("zIndex",e.zIndex)},stop:function(c,h,e){c=e.options;c._zIndex&&a(h.helper).css("zIndex",c._zIndex)}});a.ui.draggable;a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,
forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,c,e){return a>=c&&c+e>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},
_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,c){this._super(a,c);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var c=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");a.each(this.items,function(){c._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):
this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(c,e){var d=null,h=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(c),a(c.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(c.target,f.widgetName+"-item")===f&&(d=a(c.target)),
d?!this.options.handle||e||(a(this.options.handle,d).find("*").addBack().each(function(){this===c.target&&(h=!0)}),h)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(c,e,f){var d;e=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(c),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},
this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&"auto"!==e.cursor&&(d=this.document.find("body"),this.storedCursor=d.css("cursor"),d.css("cursor",e.cursor),this.storedStylesheet=a("<style>*{ cursor: "+e.cursor+" !important; }</style>").appendTo(d)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&
(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",c,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!f)for(f=this.containers.length-1;0<=f;f--)this.containers[f]._trigger("activate",c,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&
a.ui.ddmanager.prepareOffsets(this,c),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(c),!0},_mouseDrag:function(c){var d,e,f;var m=this.options;var n=!1;this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-
c.pageY<m.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+m.scrollSpeed:c.pageY-this.overflowOffset.top<m.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-m.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<m.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+m.scrollSpeed:c.pageX-this.overflowOffset.left<m.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-
m.scrollSpeed)):(c.pageY-this.document.scrollTop()<m.scrollSensitivity?n=this.document.scrollTop(this.document.scrollTop()-m.scrollSpeed):this.window.height()-(c.pageY-this.document.scrollTop())<m.scrollSensitivity&&(n=this.document.scrollTop(this.document.scrollTop()+m.scrollSpeed)),c.pageX-this.document.scrollLeft()<m.scrollSensitivity?n=this.document.scrollLeft(this.document.scrollLeft()-m.scrollSpeed):this.window.width()-(c.pageX-this.document.scrollLeft())<m.scrollSensitivity&&(n=this.document.scrollLeft(this.document.scrollLeft()+
m.scrollSpeed))),!1!==n&&a.ui.ddmanager&&!m.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(m=this.items.length-1;0<=m;m--)if(d=this.items[m],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&
this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(c,d);this._trigger("change",c,this._uiHash());break}return this._contactContainers(c),a.ui.ddmanager&&a.ui.ddmanager.drag(this,c),this._trigger("sort",c,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(c,
e){if(c){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c),this.options.revert){var d=this;e=this.placeholder.offset();var h=this.options.axis,f={};h&&"x"!==h||(f.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));h&&"y"!==h||(f.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(f,
parseInt(this.options.revert,10)||500,function(){d._clear(c)})}else this._clear(c,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("deactivate",null,this._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",
null,this._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(c){var d=
this._getItemsAsjQuery(c&&c.connected),e=[];return c=c||{},a(d).each(function(){var d=(a(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[\-=_](.+)/);d&&e.push((c.key||d[1]+"[]")+"="+(c.key&&c.expression?d[1]:d[2]))}),!e.length&&c.key&&e.push(c.key+"="),e.join("&")},toArray:function(c){var d=this._getItemsAsjQuery(c&&c.connected),e=[];return c=c||{},d.each(function(){e.push(a(c.item||this).attr(c.attribute||"id")||"")}),e},_intersectsWith:function(a){var c=this.positionAbs.left,
d=c+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,n=a.left,q=n+a.width,t=a.top,y=t+a.height,v=this.offset.click.top,x=this.offset.click.left;v="x"===this.options.axis||e+v>t&&y>e+v;x="y"===this.options.axis||c+x>n&&q>c+x;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?v&&x:c+this.helperProportions.width/
2>n&&q>d-this.helperProportions.width/2&&e+this.helperProportions.height/2>t&&y>f-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c,d,e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);return e&&a?(c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection(),this.floating?"right"===d||"down"===c?2:1:c&&("down"===
c?2:1)):!1},_intersectsWithSides:function(a){var c=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&a||"left"===e&&!a:d&&("down"===d&&c||"up"===d&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?
"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(c){function d(){m.push(this)}var e,f,m=[],n=[],q=this._connectWith();if(q&&c)for(c=q.length-1;0<=c;c--){var t=
a(q[c],this.document[0]);for(e=t.length-1;0<=e;e--)(f=a.data(t[e],this.widgetFullName))&&f!==this&&!f.options.disabled&&n.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}n.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(c=n.length-1;0<=c;c--)n[c][0].each(d);return a(m)},_removeCurrentsFromItems:function(){var c=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var d=0;c.length>d;d++)if(c[d]===a.item[0])return!1;return!0})},_refreshItems:function(c){this.items=[];this.containers=[this];var d,e,f,m,n=this.items,q=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):a(this.options.items,this.element),this]];
if((m=this._connectWith())&&this.ready)for(d=m.length-1;0<=d;d--){var t=a(m[d],this.document[0]);for(e=t.length-1;0<=e;e--)(f=a.data(t[e],this.widgetFullName))&&f!==this&&!f.options.disabled&&(q.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],c,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f))}for(d=q.length-1;0<=d;d--)for(c=q[d][1],t=q[d][0],e=0,m=t.length;m>e;e++)f=a(t[e]),f.data(this.widgetName+"-item",c),n.push({item:f,instance:c,width:0,
height:0,left:0,top:0})},refreshPositions:function(c){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var d,e,f;for(d=this.items.length-1;0<=d;d--){var m=this.items[d];m.instance!==this.currentContainer&&this.currentContainer&&m.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,m.item):m.item,c||(m.width=e.outerWidth(),m.height=
e.outerHeight()),f=e.offset(),m.left=f.left,m.top=f.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)f=this.containers[d].element.offset(),this.containers[d].containerCache.left=f.left,this.containers[d].containerCache.top=f.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();
return this},_createPlaceholder:function(c){c=c||this;var d,e=c.options;e.placeholder&&e.placeholder.constructor!==String||(d=e.placeholder,e.placeholder={element:function(){var e=c.currentItem[0].nodeName.toLowerCase(),h=a("<"+e+">",c.document[0]);return c._addClass(h,"ui-sortable-placeholder",d||c.currentItem[0].className)._removeClass(h,"ui-sortable-helper"),"tbody"===e?c._createTrPlaceholder(c.currentItem.find("tr").eq(0),a("<tr>",c.document[0]).appendTo(h)):"tr"===e?c._createTrPlaceholder(c.currentItem,
h):"img"===e&&h.attr("src",c.currentItem.attr("src")),d||h.css("visibility","hidden"),h},update:function(a,h){(!d||e.forcePlaceholderSize)&&(h.height()||h.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}});c.placeholder=a(e.placeholder.element.call(c.element,c.currentItem));
c.currentItem.after(c.placeholder);e.placeholder.update(c,c.placeholder)},_createTrPlaceholder:function(c,e){var d=this;c.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(c){var d,e,f,m,n,q=f=null;for(d=this.containers.length-1;0<=d;d--)a.contains(this.currentItem[0],this.containers[d].element[0])||(this._intersectsWith(this.containers[d].containerCache)?f&&a.contains(this.containers[d].element[0],f.element[0])||
(f=this.containers[d],q=d):this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",c,this._uiHash(this)),this.containers[d].containerCache.over=0));if(f)if(1===this.containers.length)this.containers[q].containerCache.over||(this.containers[q]._trigger("over",c,this._uiHash(this)),this.containers[q].containerCache.over=1);else{d=1E4;var t=null;f=(e=f.floating||this._isFloating(this.currentItem))?"left":"top";var y=e?"width":"height";var v=e?"pageX":"pageY";for(e=this.items.length-
1;0<=e;e--)a.contains(this.containers[q].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(m=this.items[e].item.offset()[f],n=!1,c[v]-m>this.items[e][y]/2&&(n=!0),d>Math.abs(c[v]-m)&&(d=Math.abs(c[v]-m),t=this.items[e],this.direction=n?"up":"down"));if(t||this.options.dropOnEmpty){if(this.currentContainer===this.containers[q])return this.currentContainer.containerCache.over||(this.containers[q]._trigger("over",c,this._uiHash()),this.currentContainer.containerCache.over=
1),void 0;t?this._rearrange(c,t,null,!0):this._rearrange(c,null,this.containers[q].element,!0);this._trigger("change",c,this._uiHash());this.containers[q]._trigger("change",c,this._uiHash(this));this.currentContainer=this.containers[q];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[q]._trigger("over",c,this._uiHash(this));this.containers[q].containerCache.over=1}}},_createHelper:function(c){var d=this.options;c=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],
[c,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;return c.parents("body").length||a("parent"!==d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]),c[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!c[0].style.width||d.forceHelperSize)&&c.width(this.currentItem.width()),
(!c[0].style.height||d.forceHelperSize)&&c.height(this.currentItem.height()),c},_adjustOffsetFromHelper:function(c){"string"==typeof c&&(c=c.split(" "));a.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},
_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,e,f,l=this.options;"parent"===l.containment&&(l.containment=this.helper[0].parentNode);"document"!==l.containment&&"window"!==l.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===l.containment?this.document.width():this.window.width()-this.helperProportions.width-
this.margins.left,("document"===l.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(l.containment)||(c=a(l.containment)[0],e=a(l.containment).offset(),f="hidden"!==a(c).css("overflow"),this.containment=[e.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(c).css("borderTopWidth"),
10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(c,e){e||
(e=this.position);c="absolute"===c?1:-1;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(d[0].tagName);return{top:e.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:d.scrollTop())*c,left:e.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():
h?0:d.scrollLeft())*c}},_generatePosition:function(c){var d,e,f=this.options,m=c.pageX,n=c.pageY,q="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,t=/(html|body)/i.test(q[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&
(c.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),c.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),c.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),c.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),f.grid&&(d=this.originalPageY+Math.round((n-this.originalPageY)/f.grid[1])*f.grid[1],n=this.containment?d-this.offset.click.top>=
this.containment[1]&&d-this.offset.click.top<=this.containment[3]?d:d-this.offset.click.top>=this.containment[1]?d-f.grid[1]:d+f.grid[1]:d,e=this.originalPageX+Math.round((m-this.originalPageX)/f.grid[0])*f.grid[0],m=this.containment?e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-f.grid[0]:e+f.grid[0]:e)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():t?0:q.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():t?0:q.scrollLeft())}},_rearrange:function(a,c,e,f){e?e[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?c.item[0]:c.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:1;this._delay(function(){d===this.counter&&this.refreshPositions(!f)})},
_clear:function(a,c){function d(a,c,d){return function(e){d._trigger(a,e,c._uiHash(c))}}this.reverting=!1;var e,h=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)"auto"!==this._storedCSS[e]&&"static"!==this._storedCSS[e]||(this._storedCSS[e]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!c&&h.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||c||h.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&(c||(h.push(function(a){this._trigger("remove",a,this._uiHash())}),h.push(function(a){return function(c){a._trigger("receive",c,this._uiHash(this))}}.call(this,
this.currentContainer)),h.push(function(a){return function(c){a._trigger("update",c,this._uiHash(this))}}.call(this,this.currentContainer))));for(e=this.containers.length-1;0<=e;e--)c||h.push(d("deactivate",this,this.containers[e])),this.containers[e].containerCache.over&&(h.push(d("out",this,this.containers[e])),this.containers[e].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",
this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,c||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!c){for(e=0;h.length>e;e++)h[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===
a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(c){var d=c||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:c?c.element:null}}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){function c(a){a=d.json?JSON.stringify(a):String(a);return d.raw?a:encodeURIComponent(a)}function f(c,f){if(d.raw)var h=c;else a:{0===c.indexOf('"')&&(c=c.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{c=decodeURIComponent(c.replace(e," "));h=d.json?JSON.parse(c):c;break a}catch(m){}h=void 0}return a.isFunction(f)?f(h):h}var e=/\+/g,d=a.cookie=
function(e,k,l){if(void 0!==k&&!a.isFunction(k)){l=a.extend({},d.defaults,l);if("number"===typeof l.expires){var h=l.expires,n=l.expires=new Date;n.setTime(+n+864E5*h)}return document.cookie=[d.raw?e:encodeURIComponent(e),"=",c(k),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}l=e?void 0:{};h=document.cookie?document.cookie.split("; "):[];n=0;for(var q=h.length;n<q;n++){var t=h[n].split("=");var y=t.shift();
y=d.raw?y:decodeURIComponent(y);t=t.join("=");if(e&&e===y){l=f(t,k);break}e||void 0===(t=f(t))||(l[y]=t)}return l};d.defaults={};a.removeCookie=function(c,d){if(void 0===a.cookie(c))return!1;a.cookie(c,"",a.extend({},d,{expires:-1}));return!a.cookie(c)}});(function(a){a.disableSelection||jQuery.fn.extend({disableSelection:function(){a(this).addClass("no-selectable-text")},enableSelection:function(){a(this).removeClass("no-selectable-text")}})})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)})(function(a){var c=0;a.ajaxTransport("iframe",function(f){if(f.async&&("POST"===f.type||"GET"===f.type)){var e,d;return{send:function(h,k){e=a('<form style="display:none;"></form>');e.attr("accept-charset",f.formAcceptCharset);d=a('<iframe src="javascript:false;" name="iframe-transport-'+(c+=1)+'"></iframe>').bind("load",function(){var c=a.isArray(f.paramName)?f.paramName:[f.paramName];d.unbind("load").bind("load",
function(){try{var c=d.contents();if(!c.length||!c[0].firstChild)throw Error();}catch(q){c=void 0}k(200,"success",{iframe:c});a('<iframe src="javascript:false;"></iframe>').appendTo(e);e.remove()});e.prop("target",d.prop("name")).prop("action",f.url).prop("method",f.type);f.formData&&a.each(f.formData,function(c,d){a('<input type="hidden"/>').prop("name",d.name).val(d.value).appendTo(e)});if(f.fileInput&&f.fileInput.length&&"POST"===f.type){var h=f.fileInput.clone();f.fileInput.after(function(a){return h[a]});
f.paramName&&f.fileInput.each(function(d){a(this).prop("name",c[d]||f.paramName)});e.append(f.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}e.submit();h&&h.length&&f.fileInput.each(function(c,d){c=a(h[c]);a(d).prop("name",c.prop("name"));c.replaceWith(d)})});e.append(d).appendTo(document.body)},abort:function(){d&&d.unbind("load").prop("src","javascript".concat(":false;"));e&&e.remove()}}}});a.ajaxSetup({converters:{"iframe text":function(c){return a(c[0].body).text()},
"iframe json":function(c){return a.parseJSON(a(c[0].body).text())},"iframe html":function(c){return a(c[0].body).html()},"iframe script":function(c){return a.globalEval(a(c[0].body).text())}}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a,c){var f=0,e=Array.prototype.slice,d=a.cleanData;a.cleanData=function(c){for(var e=0,h;null!=(h=c[e]);e++)try{a(h).triggerHandler("remove")}catch(m){}d(c)};a.FileUpload={};a.FileUpload.widget=function(c,d,e){var h=c.split(".")[0];c=c.split(".")[1];var f=h+"-"+c;e||(e=d,d=a.FileUpload.Widget);a.expr[":"][f.toLowerCase()]=function(c){return!!a.data(c,f)};a[h]=a[h]||{};var k=a[h][c];var l=a[h][c]=function(a,
c){if(!this._createWidget)return new l(a,c);arguments.length&&this._createWidget(a,c)};a.extend(l,k,{version:e.version,_proto:a.extend({},e),_childConstructors:[]});var y=new d;y.options=a.FileUpload.widget.extend({},y.options);a.each(e,function(c,h){a.isFunction(h)&&(e[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},e=function(a){return d.prototype[c].apply(this,a)};return function(){var c=this._super,d=this._superApply;this._super=a;this._superApply=e;var f=h.apply(this,
arguments);this._super=c;this._superApply=d;return f}}())});l.prototype=a.FileUpload.widget.extend(y,{widgetEventPrefix:c},e,{constructor:l,namespace:h,widgetName:c,widgetBaseClass:f,widgetFullName:f});k?(a.each(k._childConstructors,function(c,d){c=d.prototype;a.FileUpload.widget(c.namespace+"."+c.widgetName,l,d._proto)}),delete k._childConstructors):d._childConstructors.push(l);a.FileUpload.widget.bridge(c,l)};a.FileUpload.widget.extend=function(d){for(var h=e.call(arguments,1),f=0,m=h.length,n,
q;f<m;f++)for(n in h[f])q=h[f][n],h[f].hasOwnProperty(n)&&q!==c&&(d[n]=a.isPlainObject(q)?a.FileUpload.widget.extend({},d[n],q):q);return d};a.FileUpload.widget.bridge=function(d,f){var h=f.prototype.widgetFullName;a.fn[d]=function(k){var m="string"===typeof k,l=e.call(arguments,1),t=this;k=!m&&l.length?a.FileUpload.widget.extend.apply(null,[k].concat(l)):k;m?this.each(function(){var e=a.data(this,h);if(!e)return a.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+
k+"'");if(!a.isFunction(e[k])||"_"===k.charAt(0))return a.error("no such method '"+k+"' for "+d+" widget instance");var f=e[k].apply(e,l);if(f!==e&&f!==c)return t=f&&f.jquery?t.pushStack(f.get()):f,!1}):this.each(function(){var c=a.data(this,h);c?c.option(k||{})._init():new f(k,this)});return t}};a.FileUpload.Widget=function(a,c){};a.FileUpload.Widget._childConstructors=[];a.FileUpload.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},
_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0];this.element=a(d);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.FileUpload.widget.extend({},this.options,this._getCreateOptions(),c);this.bindings=a();this.hoverable=a();this.focusable=a();d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));
this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(d,e){var h=d,f;if(0===arguments.length)return a.FileUpload.widget.extend({},this.options);if("string"===typeof d){h={};var k=d.split(".");d=k.shift();if(k.length){var q=h[d]=a.FileUpload.widget.extend({},this.options[d]);for(f=0;f<k.length-1;f++)q[k[f]]=q[k[f]]||{},q=q[k[f]];d=k.pop();if(e===c)return q[d]===c?null:q[d];q[d]=e}else{if(e===
c)return this.options[d]===c?null:this.options[d];h[d]=e}}this._setOptions(h);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!c).attr("aria-disabled",c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",
!0)},_on:function(c,d){d?(c=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element);var e=this;a.each(d,function(d,h){function f(){if(!0!==e.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof h?e[h]:h).apply(e,arguments)}"string"!==typeof h&&(f.guid=h.guid=h.guid||f.guid||a.guid++);var k=d.match(/^(\w+)\s*(.*)$/);d=k[1]+e.eventNamespace;(k=k[2])?e.widget().delegate(k,d,f):c.bind(d,f)})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
a.unbind(c).undelegate(c)},_delay:function(a,c){var d=this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},c||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){a(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){a(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){a(c.currentTarget).addClass("ui-state-focus")},
focusout:function(c){a(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(c,d,e){var h,f=this.options[c];e=e||{};d=a.Event(d);d.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();d.target=this.element[0];if(c=d.originalEvent)for(h in c)h in d||(d[h]=c[h]);this.element.trigger(d,e);return!(a.isFunction(f)&&!1===f.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(c,d){a.FileUpload.Widget.prototype["_"+
c]=function(e,h,f){"string"===typeof h&&(h={effect:h});var k=h?!0===h||"number"===typeof h?d:h.effect||d:c;h=h||{};"number"===typeof h&&(h={duration:h});var m=!a.isEmptyObject(h);h.complete=f;h.delay&&e.delay(h.delay);if(m&&a.effects&&(a.effects.effect[k]||!1!==a.uiBackCompat&&a.effects[k]))e[c](h);else if(k!==c&&e[k])e[k](h.duration,h.easing,f);else e.queue(function(d){a(this)[c]();f&&f.call(e[0]);d()})}});!1!==a.uiBackCompat&&(a.FileUpload.Widget.prototype._getCreateOptions=function(){return a.metadata&&
a.metadata.get(this.element[0])[this.widgetName]})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):a(window.jQuery)})(function(a){a.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.FileUpload.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,
redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(a){return a.serializeArray()},add:function(a,f){f.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(a,f,e){var c=
a-this.timestamp;if(!this.bitrate||!e||c>e)this.bitrate=1E3/c*(f-this.loaded)*8,this.loaded=f,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(c){return!c.forceIframeTransport&&(!c.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(c){if("function"===typeof c.formData)return c.formData(c.form);if(a.isArray(c.formData))return c.formData;if(c.formData){var f=[];a.each(c.formData,function(a,c){f.push({name:a,value:c})});return f}return[]},_getTotal:function(c){var f=
0;a.each(c,function(a,c){f+=c.size||1});return f},_onProgress:function(a,f){if(a.lengthComputable){var c=+new Date;if(!(f._time&&f.progressInterval&&c-f._time<f.progressInterval&&a.loaded!==a.total)){f._time=c;var d=f.total||this._getTotal(f.files);var h=parseInt(a.loaded/a.total*(f.chunkSize||d),10)+(f.uploadedBytes||0);this._loaded+=h-(f.loaded||f.uploadedBytes||0);f.lengthComputable=!0;f.loaded=h;f.total=d;f.bitrate=f._bitrateTimer.getBitrate(c,h,f.bitrateInterval);this._trigger("progress",a,f);
this._trigger("progressall",a,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,f.bitrateInterval)})}}},_initProgressListener:function(c){var f=this,e=c.xhr?c.xhr():a.ajaxSettings.xhr();e.upload&&(a(e.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable;a.loaded=d.loaded;a.total=d.total;f._onProgress(a,c)}),c.xhr=function(){return e})},_initXHRData:function(c){var f=c.files[0],e=c.multipart||!a.support.xhrFileUpload,
d=c.paramName[0];c.headers=c.headers||{};c.contentRange&&(c.headers["Content-Range"]=c.contentRange);if(!e)c.headers["X-File-Name"]=f.name,c.contentType=f.type,c.data=c.blob||f;else if(a.support.xhrFormDataFileUpload){if(c.postMessage){var h=this._getFormData(c);c.blob?h.push({name:d,value:c.blob}):a.each(c.files,function(a,e){h.push({name:c.paramName[a]||d,value:e})})}else c.formData instanceof FormData?h=c.formData:(h=new FormData,a.each(this._getFormData(c),function(a,c){h.append(c.name,c.value)})),
c.blob?(c.headers["X-File-Name"]=f.name,c.headers["X-File-Type"]=f.type,h.append(d,c.blob,f.name)):a.each(c.files,function(a,e){e instanceof Blob&&h.append(c.paramName[a]||d,e,e.name)});c.data=h}c.blob=null},_initIframeSettings:function(c){c.dataType="iframe "+(c.dataType||"");c.formData=this._getFormData(c);c.redirect&&a("<a></a>").prop("href",c.url).prop("host")!==location.host&&c.formData.push({name:c.redirectParamName||"redirect",value:c.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?
(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a,"iframe")},_getParamName:function(c){var f=a(c.fileInput),e=c.paramName;e?a.isArray(e)||(e=[e]):(e=[],f.each(function(){var c=a(this),h=c.prop("name")||"files[]";for(c=(c.prop("files")||[1]).length;c;)e.push(h),--c}),e.length||(e=[f.prop("name")||"files[]"]));return e},_initFormSettings:function(c){c.form&&c.form.length||(c.form=
a(c.fileInput.prop("form")),c.form.length||(c.form=a(this.options.fileInput.prop("form"))));c.paramName=this._getParamName(c);c.url||(c.url=c.form.prop("action")||location.href);c.type=(c.type||c.form.prop("method")||"").toUpperCase();"POST"!==c.type&&"PUT"!==c.type&&(c.type="POST");c.formAcceptCharset||(c.formAcceptCharset=c.form.attr("accept-charset"))},_getAJAXSettings:function(c){c=a.extend({},this.options,c);this._initFormSettings(c);this._initDataSettings(c);return c},_enhancePromise:function(a){a.success=
a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(c,f,e){var d=a.Deferred(),h=d.promise();f=f||this.options.context||h;!0===c?d.resolveWith(f,e):!1===c&&d.rejectWith(f,e);h.abort=d.promise;return this._enhancePromise(h)},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(c,f){var e=this,d=c.files[0],h=d.size,k=c.uploadedBytes=c.uploadedBytes||0,l=c.maxChunkSize||h,m=d.slice||
d.webkitSlice||d.mozSlice,n=a.Deferred(),q=n.promise(),t;if(!(this._isXHRUpload(c)&&m&&(k||l<h))||c.data)return!1;if(f)return!0;if(k>=h)return d.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,c.context,[null,"error",d.error]);var y=function(f){var q=a.extend({},c);q.blob=m.call(d,k,k+l);q.chunkSize=q.blob.size;q.contentRange="bytes "+k+"-"+(k+q.chunkSize-1)+"/"+h;e._initXHRData(q);e._initProgressListener(q);t=(a.ajax(q)||e._getXHRPromise(!1,q.context)).done(function(d,f,m){k=e._getUploadedBytes(m)||
k+q.chunkSize;q.loaded||e._onProgress(a.Event("progress",{lengthComputable:!0,loaded:k-q.uploadedBytes,total:k-q.uploadedBytes}),q);c.uploadedBytes=q.uploadedBytes=k;k<h?y():n.resolveWith(q.context,[d,f,m])}).fail(function(a,c,d){n.rejectWith(q.context,[a,c,d])})};this._enhancePromise(q);q.abort=function(){return t.abort()};y();return q},_beforeSend:function(a,f){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=1;this._loaded+=f.uploadedBytes||0;this._total+=
this._getTotal(f.files)},_onDone:function(c,f,e,d){this._isXHRUpload(d)||this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:1,total:1}),d);d.result=c;d.textStatus=f;d.jqXHR=e;this._trigger("done",null,d)},_onFail:function(a,f,e,d){d.jqXHR=a;d.textStatus=f;d.errorThrown=e;this._trigger("fail",null,d);d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,f,e,d){--this._active;d.textStatus=f;e&&e.always?(d.jqXHR=
e,d.result=a):(d.jqXHR=a,d.errorThrown=e);this._trigger("always",null,d);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(c,f){var e=this,d,h=e._getAJAXSettings(f),k=function(f,k){e._sending+=1;h._bitrateTimer=new e._BitrateTimer;return d=d||(!1!==f&&!1!==e._trigger("send",c,h)&&(e._chunkedUpload(h)||a.ajax(h))||e._getXHRPromise(!1,h.context,k)).done(function(a,c,d){e._onDone(a,c,d,h)}).fail(function(a,c,d){e._onFail(a,c,d,h)}).always(function(a,
c,d){--e._sending;e._onAlways(a,c,d,h);if(h.limitConcurrentUploads&&h.limitConcurrentUploads>e._sending)for(a=e._slots.shift();a;){if(c=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=e._slots.shift()}})};this._beforeSend(c,h);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var l=a.Deferred();this._slots.push(l);var m=l.pipe(k)}else m=this._sequence=this._sequence.pipe(k,
k);m.abort=function(){var a=[void 0,"abort","abort"];return d?d.abort():(l&&l.rejectWith(m,a),k(!1,a))};return this._enhancePromise(m)}return k()},_onAdd:function(c,f){var e=this,d=!0,h=a.extend({},this.options,f),k=h.limitMultiFileUploads,l=this._getParamName(h),m;if((h.singleFileUploads||k)&&this._isXHRUpload(h))if(!h.singleFileUploads&&k){var n=[];var q=[];for(m=0;m<f.files.length;m+=k)n.push(f.files.slice(m,m+k)),h=l.slice(m,m+k),h.length||(h=l),q.push(h)}else q=l;else n=[f.files],q=[l];f.originalFiles=
f.files;a.each(n||f.files,function(h,k){var m=a.extend({},f);m.files=n?k:[k];m.paramName=q[h];m.submit=function(){return m.jqXHR=this.jqXHR=!1!==e._trigger("submit",c,this)&&e._onSend(c,this)};return d=e._trigger("add",c,m)});return d},_replaceFileInput:function(c){var f=c.clone(!0);a("<form></form>").append(f)[0].reset();c.after(f).detach();a.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,d){return d===c[0]?f[0]:d});c[0]===this.element[0]&&(this.element=
f)},_handleFileTreeEntry:function(c,f){var e=this,d=a.Deferred(),h=function(a){a&&!a.entry&&(a.entry=c);d.resolve([a])};f=f||"";if(c.isFile)c._file?(c._file.relativePath=f,d.resolve(c._file)):c.file(function(a){a.relativePath=f;d.resolve(a)},h);else if(c.isDirectory){var k=c.createReader();k.readEntries(function(a){e._handleFileTreeEntries(a,f+c.name+"/").done(function(a){d.resolve(a)}).fail(h)},h)}else d.resolve([]);return d.promise()},_handleFileTreeEntries:function(c,f){var e=this;return a.when.apply(a,
a.map(c,function(a){return e._handleFileTreeEntry(a,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(c){c=c||{};var f=c.items;return f&&f.length&&(f[0].webkitGetAsEntry||f[0].getAsEntry)?this._handleFileTreeEntries(a.map(f,function(a){var c;if(a.webkitGetAsEntry){if(c=a.webkitGetAsEntry())c._file=a.getAsFile();return c}return a.getAsEntry()})):a.Deferred().resolve(a.makeArray(c.files)).promise()},_getSingleFileInputFiles:function(c){c=a(c);var f=
c.prop("webkitEntries")||c.prop("entries");if(f&&f.length)return this._handleFileTreeEntries(f);f=a.makeArray(c.prop("files"));if(!f.length){c=c.prop("value");if(!c)return a.Deferred().resolve([]).promise();f=[{name:c.replace(/^.*\\/,"")}]}return a.Deferred().resolve(f).promise()},_getFileInputFiles:function(c){return c instanceof a&&1!==c.length?a.when.apply(a,a.map(c,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(c)},
_onChange:function(c){var f=this,e={fileInput:a(c.target),form:a(c.target.form)};this._getFileInputFiles(e.fileInput).always(function(a){e.files=a;f.options.replaceFileInput&&f._replaceFileInput(e.fileInput);!1!==f._trigger("change",c,e)&&f._onAdd(c,e)})},_onPaste:function(c){var f=c.originalEvent.clipboardData,e={files:[]};a.each(f&&f.items||[],function(a,c){(a=c.getAsFile&&c.getAsFile())&&e.files.push(a)});if(!1===this._trigger("paste",c,e)||!1===this._onAdd(c,e))return!1},_onDrop:function(a){a.preventDefault();
var c=this,e=a.dataTransfer=a.originalEvent.dataTransfer,d={};this._getDroppedFiles(e).always(function(e){d.files=e;!1!==c._trigger("drop",a,d)&&c._onAdd(a,d)})},_onDragOver:function(a){var c=a.dataTransfer=a.originalEvent.dataTransfer;if(!1===this._trigger("dragover",a))return!1;c&&(c.dropEffect="copy");a.preventDefault()},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));
this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(c,f){var e=-1!==a.inArray(c,this._refreshOptionsList);e&&this._destroyEventHandlers();this._super(c,f);e&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var c=this.options;void 0===c.fileInput?c.fileInput=this.element.is('input[type="file"]')?
this.element:this.element.find('input[type="file"]'):c.fileInput instanceof a||(c.fileInput=a(c.fileInput));c.dropZone instanceof a||(c.dropZone=a(c.dropZone));c.pasteZone instanceof a||(c.pasteZone=a(c.pasteZone))},_create:function(){a.extend(this.options,a(this.element[0].cloneNode(!1)).data());this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},
add:function(c){var f=this;c&&!this.options.disabled&&(c.fileInput&&!c.files?this._getFileInputFiles(c.fileInput).always(function(a){c.files=a;f._onAdd(null,c)}):(c.files=a.makeArray(c.files),this._onAdd(null,c)))},send:function(c){if(c&&!this.options.disabled){if(c.fileInput&&!c.files){var f=this,e=a.Deferred(),d=e.promise(),h,k;d.abort=function(){k=!0;if(h)return h.abort();e.reject(null,"abort","abort");return d};this._getFileInputFiles(c.fileInput).always(function(a){k||(c.files=a,h=f._onSend(null,
c).then(function(a,c,d){e.resolve(a,c,d)},function(a,c,d){e.reject(a,c,d)}))});return this._enhancePromise(d)}c.files=a.makeArray(c.files);if(c.files.length)return this._onSend(null,c)}return this._getXHRPromise(!1,c&&c.context)}})});
(function(a,c){a.fn.imagesLoaded=function(f){function e(){var c=a(q),d=a(t);k&&(t.length?k.reject(m,c,d):k.resolve(m));a.isFunction(f)&&f.call(h,m,c,d)}function d(c,d){"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="!==c.src&&-1===a.inArray(c,n)&&(n.push(c),d?t.push(c):q.push(c),a.data(c,"imagesLoaded",{isBroken:d,src:c.src}),l&&k.notifyWith(a(c),[d,m,a(q),a(t)]),m.length===n.length&&(setTimeout(e),m.unbind(".imagesLoaded")))}var h=this,k=a.isFunction(a.Deferred)?a.Deferred():
0,l=a.isFunction(k.notify),m=h.find("img").add(h.filter("img")),n=[],q=[],t=[];a.isPlainObject(f)&&a.each(f,function(a,c){if("callback"===a)f=c;else if(k)k[a](c)});m.length?m.bind("load.imagesLoaded error.imagesLoaded",function(a){d(a.target,"error"===a.type)}).each(function(e,h){e=h.src;var f=a.data(h,"imagesLoaded");if(f&&f.src===e)d(h,f.isBroken);else if(h.complete&&h.naturalWidth!==c)d(h,0===h.naturalWidth||0===h.naturalHeight);else if(h.readyState||h.complete)h.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",
h.src=e}):e();return k?k.promise(h):h}})(jQuery);
(function(a){a.fn.editable=function(c,f){if("disable"==c)a(this).data("disabled.editable",!0);else if("enable"==c)a(this).data("disabled.editable",!1);else if("destroy"==c)a(this).unbind(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var e=a.extend({},a.fn.editable.defaults,{target:c},f),d=a.editable.types[e.type].plugin||function(){},h=a.editable.types[e.type].submit||function(){},k=a.editable.types[e.type].buttons||a.editable.types.defaults.buttons,
l=a.editable.types[e.type].content||a.editable.types.defaults.content,m=a.editable.types[e.type].element||a.editable.types.defaults.element,n=a.editable.types[e.type].reset||a.editable.types.defaults.reset,q=e.callback||function(){},t=e.onedit||function(){},y=e.onsubmit||function(){},v=e.onreset||function(){},x=e.onerror||n;e.tooltip&&a(this).attr("title",e.tooltip);e.autowidth="auto"==e.width;e.autoheight="auto"==e.height;return this.each(function(){var c=this,f=a(c).width(),u=a(c).height();a(this).data("event.editable",
e.event);a.trim(a(this).html())||a(this).html(e.placeholder);a(this).bind(e.event,function(v){if(!0!==a(this).data("disabled.editable")&&!c.editing&&!1!==t.apply(this,[e,c])){v.preventDefault();v.stopPropagation();e.tooltip&&a(c).removeAttr("title");0==a(c).width()?(e.width=f,e.height=u):("none"!=e.width&&(e.width=e.autowidth?a(c).width():e.width),"none"!=e.height&&(e.height=e.autoheight?a(c).height():e.height));a(this).html().toLowerCase().replace(/(;|")/g,"")==e.placeholder.toLowerCase().replace(/(;|")/g,
"")&&a(this).html("");c.editing=!0;c.revert=a(c).html();a(c).html("");var w=a("<form />");e.cssclass&&("inherit"==e.cssclass?w.attr("class",a(c).attr("class")):w.attr("class",e.cssclass));e.style&&("inherit"==e.style?(w.attr("style",a(c).attr("style")),w.css("display",a(c).css("display"))):w.attr("style",e.style));var A=m.apply(w,[e,c]);if(e.datepicker)var z=w.children("input").datepicker({format:I18n.t("ui.date.placeholder"),weekStart:1}).on("changeDate",function(a){z.datepicker("hide")});if(e.loadurl){var G=
setTimeout(function(){A.disabled=!0;l.apply(w,[e.loadtext,e,c])},100);v={};v[e.id]=c.id;a.isFunction(e.loaddata)?a.extend(v,e.loaddata.apply(c,[c.revert,e])):a.extend(v,e.loaddata);a.ajax({type:e.loadtype,url:e.loadurl,data:v,async:!1,success:function(a){window.clearTimeout(G);B=a;A.disabled=!1}})}else if(e.data){var B=e.data;a.isFunction(e.data)&&(B=e.data.apply(c,[c.revert,e]))}else B=c.revert;l.apply(w,[B,e,c]);A.attr("name",e.name);k.apply(w,[e,c]);a(c).append(w);d.apply(w,[e,c]);a(":input:visible:enabled:first",
w).focus();e.select&&A.select();A.keydown(function(a){27==a.keyCode&&(a.preventDefault(),n.apply(w,[e,c]))});"cancel"==e.onblur?A.blur(function(a){G=setTimeout(function(){n.apply(w,[e,c])},500)}):"submit"==e.onblur?A.blur(function(a){G=setTimeout(function(){w.submit()},200)}):a.isFunction(e.onblur)?A.blur(function(a){e.onblur.apply(c,[A.val(),e])}):A.blur(function(a){});w.submit(function(d){G&&clearTimeout(G);d.preventDefault();if(!1!==y.apply(w,[e,c])&&!1!==h.apply(w,[e,c]))if(a.isFunction(e.target))d=
e.target.apply(c,[A.val(),e]),a(c).html(d),c.editing=!1,q.apply(c,[c.innerHTML,e]),a.trim(a(c).html())||a(c).html(e.placeholder);else{d={};d[e.name]=A.val();d[e.id]=c.id;a.isFunction(e.submitdata)?a.extend(d,e.submitdata.apply(c,[c.revert,e])):a.extend(d,e.submitdata);"PUT"==e.method&&(d._method="put");a(c).html(e.indicator);var f={type:"POST",data:d,dataType:"html",url:e.target,success:function(d,h){"html"==f.dataType&&a(c).html(d);c.editing=!1;q.apply(c,[d,e]);a.trim(a(c).html())||a(c).html(e.placeholder)},
error:function(a,d,h){x.apply(w,[e,c,a])}};a.extend(f,e.ajaxoptions);a.ajax(f)}a(c).attr("title",e.tooltip);return!1})}});this.reset=function(d){this.editing&&!1!==v.apply(d,[e,c])&&(a(c).html(c.revert),c.editing=!1,a.trim(a(c).html())||a(c).html(e.placeholder),e.tooltip&&a(c).attr("title",e.tooltip))}})}};a.editable={types:{defaults:{element:function(c,f){c=a('<input type="hidden"></input>');a(this).append(c);return c},content:function(c,f,e){a(":input:first",this).val(c)},reset:function(a,f){f.reset(this)},
buttons:function(c,f){var e=this;if(c.submit){if(c.submit.match(/>$/))var d=a(c.submit).click(function(){"submit"!=d.attr("type")&&e.submit()});else d=a('<button type="submit" class="btn btn-primary" />'),d.html(c.submit);a(this).append(d)}if(c.cancel){if(c.cancel.match(/>$/))var h=a(c.cancel);else h=a('<button type="cancel" class="btn" />'),h.html(c.cancel);a(this).append(h);a(h).click(function(d){(a.isFunction(a.editable.types[c.type].reset)?a.editable.types[c.type].reset:a.editable.types.defaults.reset).apply(e,
[c,f]);return!1})}}},text:{element:function(c,f){f=a("<input />");"none"!=c.width&&f.width(c.width);"none"!=c.height&&f.height(c.height);f.attr("autocomplete","off");a(this).append(f);return f}},textarea:{element:function(c,f){f=a("<textarea />");c.rows?f.attr("rows",c.rows):"none"!=c.height&&f.height(c.height);c.cols?f.attr("cols",c.cols):"none"!=c.width&&f.width(c.width);a(this).append(f);return f}},select:{element:function(c,f){c=a("<select />");a(this).append(c);return c},content:function(c,f,
e){if(String==c.constructor)eval("var json = "+c);else var d=c;for(var h in d)d.hasOwnProperty(h)&&"selected"!=h&&(c=a("<option />").val(h).append(d[h]),a("select",this).append(c));a("select",this).children().each(function(){a(this).val()!=d.selected&&a(this).text()!=a.trim(e.revert)||a(this).attr("selected","selected")})}}},addInputType:function(c,f){a.editable.types[c]=f}};a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",
loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function(a){a.sanitize=function(a){return a.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<[\/!]*?[^<>]*?>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,"")}})(jQuery);
(function(a){function c(){var c=a(this);if(!c.data("timeago")){c.data("timeago",{datetime:e.datetime(c)});var h=a.trim(c.text());0<h.length&&c.attr("title",h)}c=c.data("timeago");isNaN(c.datetime)||a(this).text(e.inWords(f(c.datetime)));return this}function f(a){return(new Date).getTime()-a.getTime()}a.timeago=function(c){return c instanceof Date?e.inWords(f(c)):"string"===typeof c?e.inWords(f(a.timeago.parse(c))):e.inWords(f(a.timeago.datetime(c)))};var e=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,
allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"Less than a minute",minute:"A minute",minutes:"%d minutes",hour:"An hour",hours:"%d hours",day:"A day",days:"%d days",month:"A month",months:"%d months",year:"A year",years:"%d years",numbers:[]}},inWords:function(c){function d(d,h){return(a.isFunction(d)?d(h,c):d).replace(/%d/i,e.numbers&&e.numbers[h]||h)}var e=this.settings.strings,f=e.prefixAgo,m=e.suffixAgo;this.settings.allowFuture&&0>
c&&(f=e.prefixFromNow,m=e.suffixFromNow);var n=Math.abs(c)/1E3,q=n/60,t=q/60,y=t/24,v=y/365;n=45>n&&d(e.seconds,Math.round(n))||90>n&&d(e.minute,1)||45>q&&d(e.minutes,Math.round(q))||90>q&&d(e.hour,1)||24>t&&d(e.hours,Math.round(t))||48>t&&d(e.day,1)||30>y&&d(e.days,Math.floor(y))||60>y&&d(e.month,1)||365>y&&d(e.months,Math.floor(y/30))||2>v&&d(e.year,1)||d(e.years,Math.floor(v));return a.trim([f,n,m].join(" "))},parse:function(c){c=a.trim(c);c=c.replace(/\.\d\d\d+/,"");c=c.replace(/-/,"/").replace(/-/,
"/");c=c.replace(/T/," ").replace(/Z/," UTC");c=c.replace(/([\+\-]\d\d):?(\d\d)/," $1$2");return new Date(c)},datetime:function(c){c="time"===a(c).get(0).tagName.toLowerCase()?a(c).attr("datetime"):a(c).attr("title");return e.parse(c)}});a.fn.timeago=function(){var a=this;a.each(c);var h=e.settings;0<h.refreshMillis&&setInterval(function(){a.each(c)},h.refreshMillis);return a};document.createElement("abbr");document.createElement("time")})(jQuery);
(function(a){var c=a(window);a.fn.visible=function(f,e,d,h){if(!(1>this.length)){d=d||"both";var k=1<this.length?this.eq(0):this,l="undefined"!==typeof h&&null!==h,m=l?a(h):c,n=l?m.position():0,q=k.get(0);h=m.outerWidth();var t=m.outerHeight();e=!0===e?q.offsetWidth*q.offsetHeight:!0;if("function"===typeof q.getBoundingClientRect){k=q.getBoundingClientRect();q=l?0<=k.top-n.top&&k.top<t+n.top:0<=k.top&&k.top<t;var y=l?0<k.bottom-n.top&&k.bottom<=t+n.top:0<k.bottom&&k.bottom<=t;m=l?0<=k.left-n.left&&
k.left<h+n.left:0<=k.left&&k.left<h;l=l?0<k.right-n.left&&k.right<h+n.left:0<k.right&&k.right<=h;t=0>k.top&&k.bottom>t?!0:f?q||y:q&&y;f=0>k.left&&k.right>h?!0:f?m||l:m&&l;if("both"===d)return e&&t&&f;if("vertical"===d)return e&&t;if("horizontal"===d)return e&&f}else{l=l?0:n;t=l+t;n=m.scrollLeft();h=n+h;m=k.position();q=m.top;y=q+k.height();m=m.left;var v=m+k.width();k=!0===f?y:q;q=!0===f?q:y;y=!0===f?v:m;f=!0===f?m:v;if("both"===d)return!!e&&q<=t&&k>=l&&f<=h&&y>=n;if("vertical"===d)return!!e&&q<=
t&&k>=l;if("horizontal"===d)return!!e&&f<=h&&y>=n}}}})(jQuery);
(function(){function a(a){return function(c,d,e,h){d=A(d,h,4);var f=!M(c)&&u.keys(c),k=(f||c).length,m=0<a?0:k-1;3>arguments.length&&(e=c[f?f[m]:m],m+=a);for(var l=d,n=e;0<=m&&m<k;m+=a){var q=f?f[m]:m;n=l(n,c[q],q,c)}return n}}function c(a){return function(c,d,e){d=C(d,e);e=U(c);for(var h=0<a?0:e-1;0<=h&&h<e;h+=a)if(d(c[h],h,c))return h;return-1}}function f(a,c,d){return function(e,h,f){var k=0,m=U(e);if("number"==typeof f)0<a?k=0<=f?f:Math.max(f+m,k):m=0<=f?Math.min(f+1,m):f+m+1;else if(d&&f&&m)return f=
d(e,h),e[f]===h?f:-1;if(h!==h)return f=c(n.call(e,k,m),u.isNaN),0<=f?f+k:-1;for(f=0<a?k:m-1;0<=f&&f<m;f+=a)if(e[f]===h)return f;return-1}}function e(a,c){var d=X.length,e=a.constructor;e=u.isFunction(e)&&e.prototype||l;var h="constructor";for(u.has(a,h)&&!u.contains(c,h)&&c.push(h);d--;)h=X[d],h in a&&a[h]!==e[h]&&!u.contains(c,h)&&c.push(h)}var d=this,h=d._,k=Array.prototype,l=Object.prototype,m=k.push,n=k.slice,q=l.toString,t=l.hasOwnProperty,y=Array.isArray,v=Object.keys,x=Function.prototype.bind,
w=Object.create,z=function(){},u=function(a){if(a instanceof u)return a;if(!(this instanceof u))return new u(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=u),exports._=u):d._=u;u.VERSION="1.8.3";var A=function(a,c,d){if(void 0===c)return a;switch(null==d?3:d){case 1:return function(d){return a.call(c,d)};case 2:return function(d,e){return a.call(c,d,e)};case 3:return function(d,e,h){return a.call(c,d,e,h)};case 4:return function(d,
e,h,f){return a.call(c,d,e,h,f)}}return function(){return a.apply(c,arguments)}},C=function(a,c,d){return null==a?u.identity:u.isFunction(a)?A(a,c,d):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,c){return C(a,c,Infinity)};var D=function(a,c){return function(d){var e=arguments.length;if(2>e||null==d)return d;for(var h=1;h<e;h++)for(var f=arguments[h],k=a(f),m=k.length,l=0;l<m;l++){var n=k[l];c&&void 0!==d[n]||(d[n]=f[n])}return d}},O=function(a){if(!u.isObject(a))return{};if(w)return w(a);
z.prototype=a;a=new z;z.prototype=null;return a},G=function(a){return function(c){return null==c?void 0:c[a]}},B=Math.pow(2,53)-1,U=G("length"),M=function(a){a=U(a);return"number"==typeof a&&0<=a&&a<=B};u.each=u.forEach=function(a,c,d){c=A(c,d);var e;if(M(a))for(d=0,e=a.length;d<e;d++)c(a[d],d,a);else{var h=u.keys(a);d=0;for(e=h.length;d<e;d++)c(a[h[d]],h[d],a)}return a};u.map=u.collect=function(a,c,d){c=C(c,d);d=!M(a)&&u.keys(a);for(var e=(d||a).length,h=Array(e),f=0;f<e;f++){var k=d?d[f]:f;h[f]=
c(a[k],k,a)}return h};u.reduce=u.foldl=u.inject=a(1);u.reduceRight=u.foldr=a(-1);u.find=u.detect=function(a,c,d){c=M(a)?u.findIndex(a,c,d):u.findKey(a,c,d);if(void 0!==c&&-1!==c)return a[c]};u.filter=u.select=function(a,c,d){var e=[];c=C(c,d);u.each(a,function(a,d,h){c(a,d,h)&&e.push(a)});return e};u.reject=function(a,c,d){return u.filter(a,u.negate(C(c)),d)};u.every=u.all=function(a,c,d){c=C(c,d);d=!M(a)&&u.keys(a);for(var e=(d||a).length,h=0;h<e;h++){var f=d?d[h]:h;if(!c(a[f],f,a))return!1}return!0};
u.some=u.any=function(a,c,d){c=C(c,d);d=!M(a)&&u.keys(a);for(var e=(d||a).length,h=0;h<e;h++){var f=d?d[h]:h;if(c(a[f],f,a))return!0}return!1};u.contains=u.includes=u.include=function(a,c,d,e){M(a)||(a=u.values(a));if("number"!=typeof d||e)d=0;return 0<=u.indexOf(a,c,d)};u.invoke=function(a,c){var d=n.call(arguments,2),e=u.isFunction(c);return u.map(a,function(a){var h=e?c:a[c];return null==h?h:h.apply(a,d)})};u.pluck=function(a,c){return u.map(a,u.property(c))};u.where=function(a,c){return u.filter(a,
u.matcher(c))};u.findWhere=function(a,c){return u.find(a,u.matcher(c))};u.max=function(a,c,d){var e=-Infinity,h=-Infinity,f;if(null==c&&null!=a){a=M(a)?a:u.values(a);for(var k=0,m=a.length;k<m;k++)d=a[k],d>e&&(e=d)}else c=C(c,d),u.each(a,function(a,d,k){f=c(a,d,k);if(f>h||-Infinity===f&&-Infinity===e)e=a,h=f});return e};u.min=function(a,c,d){var e=Infinity,h=Infinity,f;if(null==c&&null!=a){a=M(a)?a:u.values(a);for(var k=0,m=a.length;k<m;k++)d=a[k],d<e&&(e=d)}else c=C(c,d),u.each(a,function(a,d,k){f=
c(a,d,k);if(f<h||Infinity===f&&Infinity===e)e=a,h=f});return e};u.shuffle=function(a){a=M(a)?a:u.values(a);for(var c=a.length,d=Array(c),e=0,h;e<c;e++)h=u.random(0,e),h!==e&&(d[e]=d[h]),d[h]=a[e];return d};u.sample=function(a,c,d){return null==c||d?(M(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,c))};u.sortBy=function(a,c,d){c=C(c,d);return u.pluck(u.map(a,function(a,d,e){return{value:a,index:d,criteria:c(a,d,e)}}).sort(function(a,c){var d=a.criteria,e=c.criteria;if(d!==
e){if(d>e||void 0===d)return 1;if(d<e||void 0===e)return-1}return a.index-c.index}),"value")};var Z=function(a){return function(c,d,e){var h={};d=C(d,e);u.each(c,function(e,f){f=d(e,f,c);a(h,e,f)});return h}};u.groupBy=Z(function(a,c,d){u.has(a,d)?a[d].push(c):a[d]=[c]});u.indexBy=Z(function(a,c,d){a[d]=c});u.countBy=Z(function(a,c,d){u.has(a,d)?a[d]++:a[d]=1});u.toArray=function(a){return a?u.isArray(a)?n.call(a):M(a)?u.map(a,u.identity):u.values(a):[]};u.size=function(a){return null==a?0:M(a)?a.length:
u.keys(a).length};u.partition=function(a,c,d){c=C(c,d);var e=[],h=[];u.each(a,function(a,d,f){(c(a,d,f)?e:h).push(a)});return[e,h]};u.first=u.head=u.take=function(a,c,d){if(null!=a)return null==c||d?a[0]:u.initial(a,a.length-c)};u.initial=function(a,c,d){return n.call(a,0,Math.max(0,a.length-(null==c||d?1:c)))};u.last=function(a,c,d){if(null!=a)return null==c||d?a[a.length-1]:u.rest(a,Math.max(0,a.length-c))};u.rest=u.tail=u.drop=function(a,c,d){return n.call(a,null==c||d?1:c)};u.compact=function(a){return u.filter(a,
u.identity)};var fa=function(a,c,d,e){var h=[],f=0;e=e||0;for(var k=U(a);e<k;e++){var m=a[e];if(M(m)&&(u.isArray(m)||u.isArguments(m))){c||(m=fa(m,c,d));var l=0,n=m.length;for(h.length+=n;l<n;)h[f++]=m[l++]}else d||(h[f++]=m)}return h};u.flatten=function(a,c){return fa(a,c,!1)};u.without=function(a){return u.difference(a,n.call(arguments,1))};u.uniq=u.unique=function(a,c,d,e){u.isBoolean(c)||(e=d,d=c,c=!1);null!=d&&(d=C(d,e));e=[];for(var h=[],f=0,k=U(a);f<k;f++){var m=a[f],l=d?d(m,f,a):m;c?(f&&h===
l||e.push(m),h=l):d?u.contains(h,l)||(h.push(l),e.push(m)):u.contains(e,m)||e.push(m)}return e};u.union=function(){return u.uniq(fa(arguments,!0,!0))};u.intersection=function(a){for(var c=[],d=arguments.length,e=0,h=U(a);e<h;e++){var f=a[e];if(!u.contains(c,f)){for(var k=1;k<d&&u.contains(arguments[k],f);k++);k===d&&c.push(f)}}return c};u.difference=function(a){var c=fa(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(c,a)})};u.zip=function(){return u.unzip(arguments)};u.unzip=function(a){for(var c=
a&&u.max(a,U).length||0,d=Array(c),e=0;e<c;e++)d[e]=u.pluck(a,e);return d};u.object=function(a,c){for(var d={},e=0,h=U(a);e<h;e++)c?d[a[e]]=c[e]:d[a[e][0]]=a[e][1];return d};u.findIndex=c(1);u.findLastIndex=c(-1);u.sortedIndex=function(a,c,d,e){d=C(d,e,1);c=d(c);e=0;for(var h=U(a);e<h;){var f=Math.floor((e+h)/2);d(a[f])<c?e=f+1:h=f}return e};u.indexOf=f(1,u.findIndex,u.sortedIndex);u.lastIndexOf=f(-1,u.findLastIndex);u.range=function(a,c,d){null==c&&(c=a||0,a=0);d=d||1;c=Math.max(Math.ceil((c-a)/
d),0);for(var e=Array(c),h=0;h<c;h++,a+=d)e[h]=a;return e};var oa=function(a,c,d,e,h){if(!(e instanceof c))return a.apply(d,h);c=O(a.prototype);a=a.apply(c,h);return u.isObject(a)?a:c};u.bind=function(a,c){if(x&&a.bind===x)return x.apply(a,n.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var d=n.call(arguments,2),e=function(){return oa(a,e,c,this,d.concat(n.call(arguments)))};return e};u.partial=function(a){var c=n.call(arguments,1),d=function(){for(var e=
0,h=c.length,f=Array(h),k=0;k<h;k++)f[k]=c[k]===u?arguments[e++]:c[k];for(;e<arguments.length;)f.push(arguments[e++]);return oa(a,d,this,this,f)};return d};u.bindAll=function(a){var c,d=arguments.length;if(1>=d)throw Error("bindAll must be passed function names");for(c=1;c<d;c++){var e=arguments[c];a[e]=u.bind(a[e],a)}return a};u.memoize=function(a,c){var d=function(e){var h=d.cache,f=""+(c?c.apply(this,arguments):e);u.has(h,f)||(h[f]=a.apply(this,arguments));return h[f]};d.cache={};return d};u.delay=
function(a,c){var d=n.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},c)};u.defer=u.partial(u.delay,u,1);u.throttle=function(a,c,d){var e,h,f,k=null,m=0;d||(d={});var l=function(){m=!1===d.leading?0:u.now();k=null;f=a.apply(e,h);k||(e=h=null)};return function(){var n=u.now();m||!1!==d.leading||(m=n);var q=c-(n-m);e=this;h=arguments;0>=q||q>c?(k&&(clearTimeout(k),k=null),m=n,f=a.apply(e,h),k||(e=h=null)):k||!1===d.trailing||(k=setTimeout(l,q));return f}};u.debounce=function(a,
c,d){var e,h,f,k,m,l=function(){var n=u.now()-k;n<c&&0<=n?e=setTimeout(l,c-n):(e=null,d||(m=a.apply(f,h),e||(f=h=null)))};return function(){f=this;h=arguments;k=u.now();var n=d&&!e;e||(e=setTimeout(l,c));n&&(m=a.apply(f,h),f=h=null);return m}};u.wrap=function(a,c){return u.partial(c,a)};u.negate=function(a){return function(){return!a.apply(this,arguments)}};u.compose=function(){var a=arguments,c=a.length-1;return function(){for(var d=c,e=a[c].apply(this,arguments);d--;)e=a[d].call(this,e);return e}};
u.after=function(a,c){return function(){if(1>--a)return c.apply(this,arguments)}};u.before=function(a,c){var d;return function(){0<--a&&(d=c.apply(this,arguments));1>=a&&(c=null);return d}};u.once=u.partial(u.before,2);var ea=!{toString:null}.propertyIsEnumerable("toString"),X="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");u.keys=function(a){if(!u.isObject(a))return[];if(v)return v(a);var c=[],d;for(d in a)u.has(a,d)&&c.push(d);ea&&e(a,c);return c};
u.allKeys=function(a){if(!u.isObject(a))return[];var c=[],d;for(d in a)c.push(d);ea&&e(a,c);return c};u.values=function(a){for(var c=u.keys(a),d=c.length,e=Array(d),h=0;h<d;h++)e[h]=a[c[h]];return e};u.mapObject=function(a,c,d){c=C(c,d);d=u.keys(a);for(var e=d.length,h={},f,k=0;k<e;k++)f=d[k],h[f]=c(a[f],f,a);return h};u.pairs=function(a){for(var c=u.keys(a),d=c.length,e=Array(d),h=0;h<d;h++)e[h]=[c[h],a[c[h]]];return e};u.invert=function(a){for(var c={},d=u.keys(a),e=0,h=d.length;e<h;e++)c[a[d[e]]]=
d[e];return c};u.functions=u.methods=function(a){var c=[],d;for(d in a)u.isFunction(a[d])&&c.push(d);return c.sort()};u.extend=D(u.allKeys);u.extendOwn=u.assign=D(u.keys);u.findKey=function(a,c,d){c=C(c,d);d=u.keys(a);for(var e,h=0,f=d.length;h<f;h++)if(e=d[h],c(a[e],e,a))return e};u.pick=function(a,c,d){var e={},h=a;if(null==h)return e;if(u.isFunction(c)){var f=u.allKeys(h);var k=A(c,d)}else f=fa(arguments,!1,!1,1),k=function(a,c,d){return c in d},h=Object(h);for(var m=0,l=f.length;m<l;m++){var n=
f[m],q=h[n];k(q,n,h)&&(e[n]=q)}return e};u.omit=function(a,c,d){if(u.isFunction(c))c=u.negate(c);else{var e=u.map(fa(arguments,!1,!1,1),String);c=function(a,c){return!u.contains(e,c)}}return u.pick(a,c,d)};u.defaults=D(u.allKeys,!0);u.create=function(a,c){a=O(a);c&&u.extendOwn(a,c);return a};u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a};u.tap=function(a,c){c(a);return a};u.isMatch=function(a,c){var d=u.keys(c),e=d.length;if(null==a)return!e;a=Object(a);for(var h=
0;h<e;h++){var f=d[h];if(c[f]!==a[f]||!(f in a))return!1}return!0};var S=function(a,c,d,e){if(a===c)return 0!==a||1/a===1/c;if(null==a||null==c)return a===c;a instanceof u&&(a=a._wrapped);c instanceof u&&(c=c._wrapped);var h=q.call(a);if(h!==q.call(c))return!1;switch(h){case "[object RegExp]":case "[object String]":return""+a===""+c;case "[object Number]":return+a!==+a?+c!==+c:0===+a?1/+a===1/c:+a===+c;case "[object Date]":case "[object Boolean]":return+a===+c}h="[object Array]"===h;if(!h){if("object"!=
typeof a||"object"!=typeof c)return!1;var f=a.constructor,k=c.constructor;if(f!==k&&!(u.isFunction(f)&&f instanceof f&&u.isFunction(k)&&k instanceof k)&&"constructor"in a&&"constructor"in c)return!1}d=d||[];e=e||[];for(f=d.length;f--;)if(d[f]===a)return e[f]===c;d.push(a);e.push(c);if(h){f=a.length;if(f!==c.length)return!1;for(;f--;)if(!S(a[f],c[f],d,e))return!1}else{h=u.keys(a);f=h.length;if(u.keys(c).length!==f)return!1;for(;f--;)if(k=h[f],!u.has(c,k)||!S(a[k],c[k],d,e))return!1}d.pop();e.pop();
return!0};u.isEqual=function(a,c){return S(a,c)};u.isEmpty=function(a){return null==a?!0:M(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length};u.isElement=function(a){return!(!a||1!==a.nodeType)};u.isArray=y||function(a){return"[object Array]"===q.call(a)};u.isObject=function(a){var c=typeof a;return"function"===c||"object"===c&&!!a};u.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){u["is"+a]=function(c){return q.call(c)==="[object "+
a+"]"}});u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1});u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};u.isNaN=function(a){return u.isNumber(a)&&a!==+a};u.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===q.call(a)};u.isNull=function(a){return null===a};u.isUndefined=function(a){return void 0===a};u.has=function(a,c){return null!=
a&&t.call(a,c)};u.noConflict=function(){d._=h;return this};u.identity=function(a){return a};u.constant=function(a){return function(){return a}};u.noop=function(){};u.property=G;u.propertyOf=function(a){return null==a?function(){}:function(c){return a[c]}};u.matcher=u.matches=function(a){a=u.extendOwn({},a);return function(c){return u.isMatch(c,a)}};u.times=function(a,c,d){var e=Array(Math.max(0,a));c=A(c,d,1);for(d=0;d<a;d++)e[d]=c(d);return e};u.random=function(a,c){null==c&&(c=a,a=0);return a+Math.floor(Math.random()*
(c-a+1))};u.now=Date.now||function(){return(new Date).getTime()};y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};D=u.invert(y);G=function(a){var c=function(c){return a[c]},d="(?:"+u.keys(a).join("|")+")",e=RegExp(d),h=RegExp(d,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(h,c):a}};u.escape=G(y);u.unescape=G(D);u.result=function(a,c,d){c=null==a?void 0:a[c];void 0===c&&(c=d);return u.isFunction(c)?c.call(a):c};var W=0;u.uniqueId=function(a){var c=
++W+"";return a?a+c:c};u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ba=/(.)^/,ra={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},aa=/\\|'|\r|\n|\u2028|\u2029/g,ka=function(a){return"\\"+ra[a]};u.template=function(a,c,d){!c&&d&&(c=d);c=u.defaults({},c,u.templateSettings);d=RegExp([(c.escape||ba).source,(c.interpolate||ba).source,(c.evaluate||ba).source].join("|")+"|$","g");var e=0,h="__p+='";a.replace(d,function(c,
d,f,k,m){h+=a.slice(e,m).replace(aa,ka);e=m+c.length;d?h+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'":f?h+="'+\n((__t=("+f+"))==null?'':__t)+\n'":k&&(h+="';\n"+k+"\n__p+='");return c});h+="';\n";c.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var f=new Function(c.variable||"obj","_",h)}catch(ca){throw ca.source=h,ca;}d=function(a){return f.call(this,a,u)};d.source="function("+(c.variable||
"obj")+"){\n"+h+"}";return d};u.chain=function(a){a=u(a);a._chain=!0;return a};var T=function(a,c){return a._chain?u(c).chain():c};u.mixin=function(a){u.each(u.functions(a),function(c){var d=u[c]=a[c];u.prototype[c]=function(){var a=[this._wrapped];m.apply(a,arguments);return T(this,d.apply(u,a))}})};u.mixin(u);u.each("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];u.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);"shift"!==a&&"splice"!==a||0!==d.length||
delete d[0];return T(this,d)}});u.each(["concat","join","slice"],function(a){var c=k[a];u.prototype[a]=function(){return T(this,c.apply(this._wrapped,arguments))}});u.prototype.value=function(){return this._wrapped};u.prototype.valueOf=u.prototype.toJSON=u.prototype.value;u.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this);
!function(a,c){function f(a,c){var d,e,h=a.toLowerCase();c=[].concat(c);for(d=0;d<c.length;d+=1)if(e=c[d])if(e.test&&e.test(a)||e.toLowerCase()===h)return!0}var e=c.prototype.trim,d=c.prototype.trimRight,h=c.prototype.trimLeft,k=function(a,c){if(1>c)return"";for(var d="";0<c;)1&c&&(d+=a),c>>=1,a+=a;return d},l=[].slice,m=function(a){return null==a?"\\s":a.source?a.source:"["+v.escapeRegExp(a)+"]"},n={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},q={},t;for(t in n)q[n[t]]=t;q["'"]="#39";var y=function(){function a(a){return Object.prototype.toString.call(a).slice(8,
-1).toLowerCase()}var d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};return d.format=function(d,e){var h,f,m,l=1,n=d.length,q="",t=[];for(h=0;n>h;h++)if(q=a(d[h]),"string"===q)t.push(d[h]);else if("array"===q){if(m=d[h],m[2]){var v=e[l];for(f=0;f<m[2].length;f++){if(!v.hasOwnProperty(m[2][f]))throw Error(y('[_.sprintf] property "%s" does not exist',m[2][f]));v=v[m[2][f]]}}else v=m[1]?e[m[1]]:
e[l++];if(/[^s]/.test(m[8])&&"number"!=a(v))throw Error(y("[_.sprintf] expecting number but found %s",a(v)));switch(m[8]){case "b":v=v.toString(2);break;case "c":v=c.fromCharCode(v);break;case "d":v=parseInt(v,10);break;case "e":v=m[7]?v.toExponential(m[7]):v.toExponential();break;case "f":v=m[7]?parseFloat(v).toFixed(m[7]):parseFloat(v);break;case "o":v=v.toString(8);break;case "s":v=(v=c(v))&&m[7]?v.substring(0,m[7]):v;break;case "u":v=Math.abs(v);break;case "x":v=v.toString(16);break;case "X":v=
v.toString(16).toUpperCase()}v=/[def]/.test(m[8])&&m[3]&&0<=v?"+"+v:v;f=m[4]?"0"==m[4]?"0":m[4].charAt(1):" ";var x=m[6]-c(v).length;f=m[6]?k(f,x):"";t.push(m[5]?v+f:f+v)}return t.join("")},d.cache={},d.parse=function(a){for(var c,d=[],e=0;a;){if(null!==(c=/^[^\x25]+/.exec(a)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(a)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a)))throw Error("[_.sprintf] huh?");if(c[2]){e|=1;
var h=[],f=c[2],k;if(null===(k=/^([a-z_][a-z_\d]*)/i.exec(f)))throw Error("[_.sprintf] huh?");for(h.push(k[1]);""!==(f=f.substring(k[0].length));){if(null===(k=/^\.([a-z_][a-z_\d]*)/i.exec(f))&&null===(k=/^\[(\d+)\]/.exec(f)))throw Error("[_.sprintf] huh?");h.push(k[1])}c[2]=h}else e|=2;if(3===e)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}a=a.substring(c[0].length)}return d},d}(),v={VERSION:"2.4.0",isBlank:function(a){return null==a&&(a=""),
/^\s*$/.test(a)},stripTags:function(a){return null==a?"":c(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a=null==a?"":c(a),a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,d){return null==a?[]:(a=c(a),d=~~d,0<d?a.match(new RegExp(".{1,"+d+"}","g")):[a])},clean:function(a){return v.strip(a).replace(/\s+/g," ")},count:function(a,d){if(null==a||null==d)return 0;a=c(a);d=c(d);for(var e=0,h=0,f=d.length;h=a.indexOf(d,h),-1!==h;)e++,h+=f;return e},chars:function(a){return null==a?[]:
c(a).split("")},swapCase:function(a){return null==a?"":c(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return null==a?"":c(a).replace(/[&<>"']/g,function(a){return"&"+q[a]+";"})},unescapeHTML:function(a){return null==a?"":c(a).replace(/&([^;]+);/g,function(a,d){var e;return d in n?n[d]:(e=d.match(/^#x([\da-fA-F]+)$/))?c.fromCharCode(parseInt(e[1],16)):(e=d.match(/^#(\d+)$/))?c.fromCharCode(~~e[1]):a})},escapeRegExp:function(a){return null==
a?"":c(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,c,d,e){a=v.chars(a);return a.splice(~~c,~~d,e),a.join("")},insert:function(a,c,d){return v.splice(a,c,0,d)},include:function(a,d){return""===d?!0:null==a?!1:-1!==c(a).indexOf(d)},join:function(){var a=l.call(arguments),c=a.shift();return null==c&&(c=""),a.join(c)},lines:function(a){return null==a?[]:c(a).split("\n")},reverse:function(a){return v.chars(a).reverse().join("")},startsWith:function(a,d){return""===d?!0:null==a||
null==d?!1:(a=c(a),d=c(d),a.length>=d.length&&a.slice(0,d.length)===d)},endsWith:function(a,d){return""===d?!0:null==a||null==d?!1:(a=c(a),d=c(d),a.length>=d.length&&a.slice(a.length-d.length)===d)},succ:function(a){return null==a?"":(a=c(a),a.slice(0,-1)+c.fromCharCode(a.charCodeAt(a.length-1)+1))},titleize:function(a){return null==a?"":(a=c(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},camelize:function(a){return v.trim(a).replace(/[-_\s]+(.)?/g,function(a,c){return c?
c.toUpperCase():""})},underscored:function(a){return v.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return v.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return v.capitalize(v.camelize(c(a).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(a){return v.capitalize(v.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,d){return null==a?"":!d&&e?e.call(a):(d=m(d),
c(a).replace(new RegExp("^"+d+"+|"+d+"+$","g"),""))},ltrim:function(a,d){return null==a?"":!d&&h?h.call(a):(d=m(d),c(a).replace(new RegExp("^"+d+"+"),""))},rtrim:function(a,e){return null==a?"":!e&&d?d.call(a):(e=m(e),c(a).replace(new RegExp(e+"+$"),""))},truncate:function(a,d,e){return null==a?"":(a=c(a),e=e||"...",d=~~d,a.length>d?a.slice(0,d)+e:a)},prune:function(a,d,e){if(null==a)return"";if(a=c(a),d=~~d,e=null!=e?c(e):"...",a.length<=d)return a;d=a.slice(0,d+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==
a.toLowerCase()?"A":" "});return d=d.slice(d.length-2).match(/\w\w/)?d.replace(/\s*\S+$/,""):v.rtrim(d.slice(0,d.length-1)),(d+e).length>a.length?a:a.slice(0,d.length)+e},words:function(a,c){return v.isBlank(a)?[]:v.trim(a,c).split(c||/\s+/)},pad:function(a,d,e,h){a=null==a?"":c(a);d=~~d;var f=0;switch(e?1<e.length&&(e=e.charAt(0)):e=" ",h){case "right":return f=d-a.length,a+k(e,f);case "both":return f=d-a.length,k(e,Math.ceil(f/2))+a+k(e,Math.floor(f/2));default:return f=d-a.length,k(e,f)+a}},lpad:function(a,
c,d){return v.pad(a,c,d)},rpad:function(a,c,d){return v.pad(a,c,d,"right")},lrpad:function(a,c,d){return v.pad(a,c,d,"both")},sprintf:y,vsprintf:function(a,c){return c.unshift(a),y.apply(null,c)},toNumber:function(a,c){a?(a=v.trim(a),a=a.match(/^-?\d+(?:\.\d+)?$/)?1*(1*a||0).toFixed(~~c)||0:0/0):a=0;return a},numberFormat:function(a,c,d,e){if(isNaN(a)||null==a)return"";a=a.toFixed(~~c);e="string"==typeof e?e:",";a=a.split(".");d=a[1]?(d||".")+a[1]:"";return a[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+
e)+d},strRight:function(a,d){if(null==a)return"";a=c(a);var e=(d=null!=d?c(d):d)?a.indexOf(d):-1;return~e?a.slice(e+d.length,a.length):a},strRightBack:function(a,d){if(null==a)return"";a=c(a);var e=(d=null!=d?c(d):d)?a.lastIndexOf(d):-1;return~e?a.slice(e+d.length,a.length):a},strLeft:function(a,d){if(null==a)return"";a=c(a);d=(d=null!=d?c(d):d)?a.indexOf(d):-1;return~d?a.slice(0,d):a},strLeftBack:function(a,c){if(null==a)return"";a+="";c=a.lastIndexOf(null!=c?""+c:c);return~c?a.slice(0,c):a},toSentence:function(a,
c,d,e){c=c||", ";d=d||" and ";var h=a.slice(),f=h.pop();return 2<a.length&&e&&(d=v.rtrim(c)+d),h.length?h.join(c)+d+f:f},toSentenceSerial:function(){var a=l.call(arguments);return a[3]=!0,v.toSentence.apply(v,a)},slugify:function(a){if(null==a)return"";var d=new RegExp(m("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0103\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u015b\u0219\u021b\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),
"g");return a=c(a).toLowerCase().replace(d,function(a){a="\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0103\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u015b\u0219\u021b\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a);return"aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(a)||"-"}),v.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,c){return[c,a,c].join("")},quote:function(a,c){return v.surround(a,c||'"')},unquote:function(a,
c){return c=c||'"',a[0]===c&&a[a.length-1]===c?a.slice(1,a.length-1):a},exports:function(){var a={},c;for(c in this)this.hasOwnProperty(c)&&!c.match(/^(?:include|contains|reverse)$/)&&(a[c]=this[c]);return a},repeat:function(a,d,e){if(null==a)return"";if(d=~~d,null==e)return k(c(a),d);for(var h=[];0<d;h[--d]=a);return h.join(e)},naturalCmp:function(a,d){if(a==d)return 0;if(!a)return-1;if(!d)return 1;for(var e=/(\.\d+)|(\d+)|(\D+)/g,h=c(a).toLowerCase().match(e),f=c(d).toLowerCase().match(e),k=Math.min(h.length,
f.length),m=0;k>m;m++){e=h[m];var l=f[m];if(e!==l)return a=parseInt(e,10),!isNaN(a)&&(d=parseInt(l,10),!isNaN(d)&&a-d)?a-d:l>e?-1:1}return h.length===f.length?h.length-f.length:d>a?-1:1},levenshtein:function(a,d){if(null==a&&null==d)return 0;if(null==a)return c(d).length;if(null==d)return c(a).length;a=c(a);d=c(d);for(var e,h,f=[],k=0;k<=d.length;k++)for(var m=0;m<=a.length;m++)h=k&&m?a.charAt(m-1)===d.charAt(k-1)?e:Math.min(f[m],f[m-1],e)+1:k+m,e=f[m],f[m]=h;return f.pop()},toBoolean:function(a,
c,d){return"number"==typeof a&&(a=""+a),"string"!=typeof a?!!a:(a=v.trim(a),f(a,c||["true","1"])?!0:f(a,d||["false","0"])?!1:void 0)}};v.strip=v.trim;v.lstrip=v.ltrim;v.rstrip=v.rtrim;v.center=v.lrpad;v.rjust=v.lpad;v.ljust=v.rpad;v.contains=v.include;v.q=v.quote;v.toBool=v.toBoolean;"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=v),exports._s=v);"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return v});a._=a._||{};a._.string=
a._.str=v}(this,String);
(function(a){var c="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(d,e,f){c.Backbone=a(c,f,d,e)});else if("undefined"!==typeof exports){var f=require("underscore");try{var e=require("jquery")}catch(d){}a(c,exports,f,e)}else c.Backbone=a(c,{},c._,c.jQuery||c.Zepto||c.ender||c.$)})(function(a,c,f,e){var d=a.Backbone,h=Array.prototype.slice;c.VERSION="1.3.3";
c.$=e;c.noConflict=function(){a.Backbone=d;return this};c.emulateHTTP=!1;c.emulateJSON=!1;var k=function(a,c,d){switch(a){case 1:return function(){return f[c](this[d])};case 2:return function(a){return f[c](this[d],a)};case 3:return function(a,e){return f[c](this[d],m(a,this),e)};case 4:return function(a,e,h){return f[c](this[d],m(a,this),e,h)};default:return function(){var a=h.call(arguments);a.unshift(this[d]);return f[c].apply(f,a)}}},l=function(a,c,d){f.each(c,function(c,e){f[e]&&(a.prototype[e]=
k(c,e,d))})},m=function(a,c){return f.isFunction(a)?a:f.isObject(a)&&!c._isModel(a)?n(a):f.isString(a)?function(c){return c.get(a)}:a},n=function(a){var c=f.matches(a);return function(a){return c(a.attributes)}};e=c.Events={};var q=/\s+/,t=function(a,c,d,e,h){var k=0,m;if(d&&"object"===typeof d)for(void 0!==e&&("context"in h)&&void 0===h.context&&(h.context=e),m=f.keys(d);k<m.length;k++)c=t(a,c,m[k],d[m[k]],h);else if(d&&q.test(d))for(m=d.split(q);k<m.length;k++)c=a(c,m[k],e,h);else c=a(c,d,e,h);
return c};e.on=function(a,c,d){return y(this,a,c,d)};var y=function(a,c,d,e,h){a._events=t(v,a._events||{},c,d,{context:e,ctx:a,listening:h});h&&((a._listeners||(a._listeners={}))[h.id]=h);return a};e.listenTo=function(a,c,d){if(!a)return this;var e=a._listenId||(a._listenId=f.uniqueId("l")),h=this._listeningTo||(this._listeningTo={}),k=h[e];k||(k=this._listenId||(this._listenId=f.uniqueId("l")),k=h[e]={obj:a,objId:e,id:k,listeningTo:h,count:0});y(a,c,d,this,k);return this};var v=function(a,c,d,e){if(d){c=
a[c]||(a[c]=[]);var h=e.context,f=e.ctx;(e=e.listening)&&e.count++;c.push({callback:d,context:h,ctx:h||f,listening:e})}return a};e.off=function(a,c,d){if(!this._events)return this;this._events=t(x,this._events,a,c,{context:d,listeners:this._listeners});return this};e.stopListening=function(a,c,d){var e=this._listeningTo;if(!e)return this;a=a?[a._listenId]:f.keys(e);for(var h=0;h<a.length;h++){var k=e[a[h]];if(!k)break;k.obj.off(c,d,this)}return this};var x=function(a,c,d,e){if(a){var h=0,k=e.context;
e=e.listeners;if(c||d||k){for(var m=c?[c]:f.keys(a);h<m.length;h++){c=m[h];var l=a[c];if(!l)break;for(var n=[],q=0;q<l.length;q++){var t=l[q];d&&d!==t.callback&&d!==t.callback._callback||k&&k!==t.context?n.push(t):(t=t.listening)&&0===--t.count&&(delete e[t.id],delete t.listeningTo[t.objId])}n.length?a[c]=n:delete a[c]}return a}for(a=f.keys(e);h<a.length;h++)t=e[a[h]],delete e[t.id],delete t.listeningTo[t.objId]}};e.once=function(a,c,d){var e=t(w,{},a,c,f.bind(this.off,this));"string"===typeof a&&
null==d&&(c=void 0);return this.on(e,c,d)};e.listenToOnce=function(a,c,d){c=t(w,{},c,d,f.bind(this.stopListening,this,a));return this.listenTo(a,c)};var w=function(a,c,d,e){if(d){var h=a[c]=f.once(function(){e(c,h);d.apply(this,arguments)});h._callback=d}return a};e.trigger=function(a){if(!this._events)return this;for(var c=Math.max(0,arguments.length-1),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+1];t(z,this._events,a,void 0,d);return this};var z=function(a,c,d,e){if(a){d=a[c];var h=a.all;d&&h&&(h=h.slice());
d&&u(d,e);h&&u(h,[c].concat(e))}return a},u=function(a,c){var d,e=-1,h=a.length,f=c[0],k=c[1],m=c[2];switch(c.length){case 0:for(;++e<h;)(d=a[e]).callback.call(d.ctx);break;case 1:for(;++e<h;)(d=a[e]).callback.call(d.ctx,f);break;case 2:for(;++e<h;)(d=a[e]).callback.call(d.ctx,f,k);break;case 3:for(;++e<h;)(d=a[e]).callback.call(d.ctx,f,k,m);break;default:for(;++e<h;)(d=a[e]).callback.apply(d.ctx,c)}};e.bind=e.on;e.unbind=e.off;f.extend(c,e);var A=c.Model=function(a,c){var d=a||{};c||(c={});this.cid=
f.uniqueId(this.cidPrefix);this.attributes={};c.collection&&(this.collection=c.collection);c.parse&&(d=this.parse(d,c)||{});var e=f.result(this,"defaults");d=f.defaults(f.extend({},e,d),e);this.set(d,c);this.changed={};this.initialize.apply(this,arguments)};f.extend(A.prototype,e,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return f.clone(this.attributes)},sync:function(){return c.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},
escape:function(a){return f.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!f.iteratee(a,this)(this.attributes)},set:function(a,c,d){if(null==a)return this;if("object"===typeof a){var e=a;d=c}else(e={})[a]=c;d||(d={});if(!this._validate(e,d))return!1;var h=d.unset;a=d.silent;var k=[],m=this._changing;this._changing=!0;m||(this._previousAttributes=f.clone(this.attributes),this.changed={});var l=this.attributes,n=this.changed,q=this._previousAttributes,t;for(t in e)c=
e[t],f.isEqual(l[t],c)||k.push(t),f.isEqual(q[t],c)?delete n[t]:n[t]=c,h?delete l[t]:l[t]=c;this.idAttribute in e&&(this.id=this.get(this.idAttribute));if(!a)for(k.length&&(this._pending=d),c=0;c<k.length;c++)this.trigger("change:"+k[c],this,l[k[c]],d);if(m)return this;if(!a)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,c){return this.set(a,void 0,f.extend({},c,{unset:!0}))},clear:function(a){var c=
{},d;for(d in this.attributes)c[d]=void 0;return this.set(c,f.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var c=this._changing?this._previousAttributes:this.attributes,d={},e;for(e in a){var h=a[e];f.isEqual(c[e],h)||(d[e]=h)}return f.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return f.clone(this._previousAttributes)},
fetch:function(a){a=f.extend({parse:!0},a);var c=this,d=a.success;a.success=function(e){var h=a.parse?c.parse(e,a):e;if(!c.set(h,a))return!1;d&&d.call(a.context,c,e,a);c.trigger("sync",c,e,a)};ka(this,a);return this.sync("read",this,a)},save:function(a,c,d){if(null==a||"object"===typeof a){var e=a;d=c}else(e={})[a]=c;d=f.extend({validate:!0,parse:!0},d);var h=d.wait;if(e&&!h){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var k=this,m=d.success,l=this.attributes;d.success=function(a){k.attributes=
l;var c=d.parse?k.parse(a,d):a;h&&(c=f.extend({},e,c));if(c&&!k.set(c,d))return!1;m&&m.call(d.context,k,a,d);k.trigger("sync",k,a,d)};ka(this,d);e&&h&&(this.attributes=f.extend({},l,e));a=this.isNew()?"create":d.patch?"patch":"update";"patch"!==a||d.attrs||(d.attrs=e);a=this.sync(a,this,d);this.attributes=l;return a},destroy:function(a){a=a?f.clone(a):{};var c=this,d=a.success,e=a.wait,h=function(){c.stopListening();c.trigger("destroy",c,c.collection,a)};a.success=function(f){e&&h();d&&d.call(a.context,
c,f,a);c.isNew()||c.trigger("sync",c,f,a)};var k=!1;this.isNew()?f.defer(a.success):(ka(this,a),k=this.sync("delete",this,a));e||h();return k},url:function(){var a=f.result(this,"urlRoot")||f.result(this.collection,"url")||aa();if(this.isNew())return a;var c=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(c)},parse:function(a,c){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},
f.extend({},a,{validate:!0}))},_validate:function(a,c){if(!c.validate||!this.validate)return!0;a=f.extend({},this.attributes,a);a=this.validationError=this.validate(a,c)||null;if(!a)return!0;this.trigger("invalid",this,a,f.extend(c,{validationError:a}));return!1}});l(A,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var C=c.Collection=function(a,c){c||(c={});c.model&&(this.model=c.model);void 0!==c.comparator&&(this.comparator=c.comparator);this._reset();this.initialize.apply(this,
arguments);a&&this.reset(a,f.extend({silent:!0},c))},D={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},G=function(a,c,d){d=Math.min(Math.max(d,0),a.length);var e=Array(a.length-d),h=c.length,f;for(f=0;f<e.length;f++)e[f]=a[f+d];for(f=0;f<h;f++)a[f+d]=c[f];for(f=0;f<e.length;f++)a[f+h+d]=e[f]};f.extend(C.prototype,e,{model:A,initialize:function(){},toJSON:function(a){return this.map(function(c){return c.toJSON(a)})},sync:function(){return c.sync.apply(this,arguments)},add:function(a,c){return this.set(a,
f.extend({merge:!1},c,O))},remove:function(a,c){c=f.extend({},c);var d=!f.isArray(a);a=d?[a]:a.slice();a=this._removeModels(a,c);!c.silent&&a.length&&(c.changes={added:[],merged:[],removed:a},this.trigger("update",this,c));return d?a[0]:a},set:function(a,c){if(null!=a){c=f.extend({},D,c);c.parse&&!this._isModel(a)&&(a=this.parse(a,c)||[]);var d=!f.isArray(a);a=d?[a]:a.slice();var e=c.at;null!=e&&(e=+e);e>this.length&&(e=this.length);0>e&&(e+=this.length+1);var h=[],k=[],m=[],l=[],n={},q=c.add,t=c.merge,
v=c.remove,u=!1,x=this.comparator&&null==e&&!1!==c.sort,y=f.isString(this.comparator)?this.comparator:null,w;for(w=0;w<a.length;w++){var A=a[w];var z=this.get(A);z?(t&&A!==z&&(A=this._isModel(A)?A.attributes:A,c.parse&&(A=z.parse(A,c)),z.set(A,c),m.push(z),x&&!u&&(u=z.hasChanged(y))),n[z.cid]||(n[z.cid]=!0,h.push(z)),a[w]=z):q&&(A=a[w]=this._prepareModel(A,c))&&(k.push(A),this._addReference(A,c),n[A.cid]=!0,h.push(A))}if(v){for(w=0;w<this.length;w++)A=this.models[w],n[A.cid]||l.push(A);l.length&&
this._removeModels(l,c)}n=!1;h.length&&!x&&q&&v?(n=this.length!==h.length||f.some(this.models,function(a,c){return a!==h[c]}),this.models.length=0,G(this.models,h,0),this.length=this.models.length):k.length&&(x&&(u=!0),G(this.models,k,null==e?this.length:e),this.length=this.models.length);u&&this.sort({silent:!0});if(!c.silent){for(w=0;w<k.length;w++)null!=e&&(c.index=e+w),A=k[w],A.trigger("add",A,this,c);(u||n)&&this.trigger("sort",this,c);if(k.length||l.length||m.length)c.changes={added:k,removed:l,
merged:m},this.trigger("update",this,c)}return d?a[0]:a}},reset:function(a,c){c=c?f.clone(c):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],c);c.previousModels=this.models;this._reset();a=this.add(a,f.extend({silent:!0},c));c.silent||this.trigger("reset",this,c);return a},push:function(a,c){return this.add(a,f.extend({at:this.length},c))},pop:function(a){var c=this.at(this.length-1);return this.remove(c,a)},unshift:function(a,c){return this.add(a,f.extend({at:0},c))},
shift:function(a){var c=this.at(0);return this.remove(c,a)},slice:function(){return h.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){0>a&&(a+=this.length);return this.models[a]},where:function(a,c){return this[c?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var c=this.comparator;if(!c)throw Error("Cannot sort a set without a comparator");
a||(a={});var d=c.length;f.isFunction(c)&&(c=f.bind(c,this));1===d||f.isString(c)?this.models=this.sortBy(c):this.models.sort(c);a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=f.extend({parse:!0},a);var c=a.success,d=this;a.success=function(e){d[a.reset?"reset":"set"](e,a);c&&c.call(a.context,d,e,a);d.trigger("sync",d,e,a)};ka(this,a);return this.sync("read",this,a)},create:function(a,c){c=c?f.clone(c):{};var d=c.wait;a=this._prepareModel(a,
c);if(!a)return!1;d||this.add(a,c);var e=this,h=c.success;c.success=function(a,c,f){d&&e.add(a,f);h&&h.call(f.context,a,c,f)};a.save(null,c);return a},parse:function(a,c){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,c){if(this._isModel(a))return a.collection||(a.collection=
this),a;c=c?f.clone(c):{};c.collection=this;a=new this.model(a,c);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,c);return!1},_removeModels:function(a,c){for(var d=[],e=0;e<a.length;e++){var h=this.get(a[e]);if(h){var f=this.indexOf(h);this.models.splice(f,1);this.length--;delete this._byId[h.cid];var k=this.modelId(h.attributes);null!=k&&delete this._byId[k];c.silent||(c.index=f,h.trigger("remove",h,this,c));d.push(h);this._removeReference(h,c)}}return d},_isModel:function(a){return a instanceof
A},_addReference:function(a,c){this._byId[a.cid]=a;c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a);a.on("all",this._onModelEvent,this)},_removeReference:function(a,c){delete this._byId[a.cid];c=this.modelId(a.attributes);null!=c&&delete this._byId[c];this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,c,d,e){if(c){if(("add"===a||"remove"===a)&&d!==this)return;"destroy"===a&&this.remove(c,e);if("change"===a){var h=this.modelId(c.previousAttributes()),
f=this.modelId(c.attributes);h!==f&&(null!=h&&delete this._byId[h],null!=f&&(this._byId[f]=c))}}this.trigger.apply(this,arguments)}});l(C,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,
partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");l=c.View=function(a){this.cid=f.uniqueId("view");f.extend(this,f.pick(a,U));this._ensureElement();this.initialize.apply(this,arguments)};var B=/^(\S+)\s*(.*)$/,U="model collection el id attributes className tagName events".split(" ");f.extend(l.prototype,e,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();
return this},_removeElement:function(){this.$el.remove()},setElement:function(a){this.undelegateEvents();this._setElement(a);this.delegateEvents();return this},_setElement:function(a){this.$el=a instanceof c.$?a:c.$(a);this.el=this.$el[0]},delegateEvents:function(a){a||(a=f.result(this,"events"));if(!a)return this;this.undelegateEvents();for(var c in a){var d=a[c];f.isFunction(d)||(d=this[d]);if(d){var e=c.match(B);this.delegate(e[1],e[2],f.bind(d,this))}}return this},delegate:function(a,c,d){this.$el.on(a+
".delegateEvents"+this.cid,c,d);return this},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(a,c,d){this.$el.off(a+".delegateEvents"+this.cid,c,d);return this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"));else{var a=f.extend({},f.result(this,"attributes"));this.id&&(a.id=f.result(this,"id"));this.className&&(a["class"]=f.result(this,"className"));
this.setElement(this._createElement(f.result(this,"tagName")));this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}});c.sync=function(a,d,e){var h=M[a];f.defaults(e||(e={}),{emulateHTTP:c.emulateHTTP,emulateJSON:c.emulateJSON});var k={type:h,dataType:"json"};e.url||(k.url=f.result(d,"url")||aa());null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(k.contentType="application/json",k.data=JSON.stringify(e.attrs||d.toJSON(e)));e.emulateJSON&&(k.contentType="application/x-www-form-urlencoded",
k.data=k.data?{model:k.data}:{});if(e.emulateHTTP&&("PUT"===h||"DELETE"===h||"PATCH"===h)){k.type="POST";e.emulateJSON&&(k.data._method=h);var m=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",h);if(m)return m.apply(this,arguments)}}"GET"===k.type||e.emulateJSON||(k.processData=!1);var l=e.error;e.error=function(a,c,d){e.textStatus=c;e.errorThrown=d;l&&l.call(e.context,a,c,d)};a=e.xhr=c.ajax(f.extend(k,e));d.trigger("request",d,a,e);return a};var M={create:"POST",
update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};c.ajax=function(){return c.$.ajax.apply(c.$,arguments)};var Z=c.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},fa=/\((.*?)\)/g,oa=/(\(\?)?:\w+/g,ea=/\*\w+/g,X=/[\-{}\[\]+?.,\\\^$|#\s]/g;f.extend(Z.prototype,e,{initialize:function(){},route:function(a,d,e){f.isRegExp(a)||(a=this._routeToRegExp(a));f.isFunction(d)&&(e=d,d="");e||(e=this[d]);var h=this;c.history.route(a,function(f){f=
h._extractParameters(a,f);!1!==h.execute(e,f,d)&&(h.trigger.apply(h,["route:"+d].concat(f)),h.trigger("route",d,f),c.history.trigger("route",h,d,f))});return this},execute:function(a,c,d){a&&a.apply(this,c)},navigate:function(a,d){c.history.navigate(a,d);return this},_bindRoutes:function(){if(this.routes){this.routes=f.result(this,"routes");for(var a,c=f.keys(this.routes);null!=(a=c.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(X,"\\$&").replace(fa,"(?:$1)?").replace(oa,
function(a,c){return c?a:"([^/?]+)"}).replace(ea,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return f.map(d,function(a,c){return c===d.length-1?a||null:a?decodeURIComponent(a):null})}});var S=c.History=function(){this.handlers=[];this.checkUrl=f.bind(this.checkUrl,this);"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},W=/^[#\/]|\s+$/g,ba=/^\/+|\/+$/g,ra=/#.*$/;S.started=!1;f.extend(S.prototype,
e,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getPath:function(){var a=
this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash());return a.replace(W,"")},start:function(a){if(S.started)throw Error("Backbone.history has already been started");S.started=!0;this.options=f.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._hasHashChange=
"onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.history||!this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(ba,"/");if(this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&
this.navigate(this.getHash(),{replace:!0});else return a=this.root.slice(0,-1)||"/",this.location.replace(a+"#"+this.getPath()),!0;this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,a=document.body,a=a.insertBefore(this.iframe,a.firstChild).contentWindow,a.document.open(),a.document.close(),a.location.hash="#"+this.fragment);a=window.addEventListener||
function(a,c){return attachEvent("on"+a,c)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,c){return detachEvent("on"+a,c)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,
!1);this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);S.started=!1},route:function(a,c){this.handlers.unshift({route:a,callback:c})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getHash(this.iframe.contentWindow));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){if(!this.matchRoot())return!1;a=this.fragment=this.getFragment(a);return f.some(this.handlers,
function(c){if(c.route.test(a))return c.callback(a),!0})},navigate:function(a,c){if(!S.started)return!1;c&&!0!==c||(c={trigger:!!c});a=this.getFragment(a||"");var d=this.root;if(""===a||"?"===a.charAt(0))d=d.slice(0,-1)||"/";d+=a;a=this.decodeFragment(a.replace(ra,""));if(this.fragment!==a){this.fragment=a;if(this._usePushState)this.history[c.replace?"replaceState":"pushState"]({},document.title,d);else if(this._wantsHashChange)this._updateHash(this.location,a,c.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)&&
(d=this.iframe.contentWindow,c.replace||(d.document.open(),d.document.close()),this._updateHash(d.location,a,c.replace));else return this.location.assign(d);if(c.trigger)return this.loadUrl(a)}},_updateHash:function(a,c,d){d?(d=a.href.replace(/(javascript:|#).*$/,""),a.replace(d+"#"+c)):a.hash="#"+c}});c.history=new S;A.extend=C.extend=Z.extend=l.extend=S.extend=function(a,c){var d=this;var e=a&&f.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};f.extend(e,d,c);e.prototype=
f.create(d.prototype,a);e.prototype.constructor=e;e.__super__=d.prototype;return e};var aa=function(){throw Error('A "url" property or function must be specified');},ka=function(a,c){var d=c.error;c.error=function(e){d&&d.call(c.context,a,e,c);a.trigger("error",a,e,c)}};return c});
(function(a,c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c(require("underscore"),require("backbone")):"function"===typeof define&&define.amd?define(["underscore","backbone"],c):(a.Backbone=a.Backbone||{},a.Backbone.Radio=c(a._,a.Backbone))})(this,function(a,c){function f(c){return a.isFunction(c)?c:function(){return c}}a="default"in a?a["default"]:a;c="default"in c?c["default"]:c;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e="function"===
typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},d=c.Radio,h=c.Radio={};h.VERSION="2.0.0";h.noConflict=function(){c.Radio=d;return this};h.DEBUG=!1;h._debugText=function(a,c,d){return a+(d?" on the "+d+" channel":"")+': "'+c+'"'};h.debugLog=function(a,c,d){h.DEBUG&&console&&console.warn&&console.warn(h._debugText(a,c,d))};var k=/\s+/;h._eventsApi=
function(c,d,h,f){if(!h)return!1;var m={};if("object"===("undefined"===typeof h?"undefined":e(h))){for(var l in h){var n=c[d].apply(c,[l,h[l]].concat(f));k.test(l)?a.extend(m,n):m[l]=n}return m}if(k.test(h)){h=h.split(k);l=0;for(n=h.length;l<n;l++)m[h[l]]=c[d].apply(c,[h[l]].concat(f));return m}return!1};h._callHandler=function(a,c,d){var e=d[0],h=d[1],f=d[2];switch(d.length){case 0:return a.call(c);case 1:return a.call(c,e);case 2:return a.call(c,e,h);case 3:return a.call(c,e,h,f);default:return a.apply(c,
d)}};var l={};a.extend(h,{log:function(c,d){if("undefined"!==typeof console){var e=a.toArray(arguments).slice(2);console.log("["+c+'] "'+d+'"',e)}},tuneIn:function(c){var d=h.channel(c);d._tunedIn=!0;d.on("all",l[c]||(l[c]=a.bind(h.log,h,c)));return this},tuneOut:function(c){var d=h.channel(c);d._tunedIn=!1;d.off("all",l[c]||(l[c]=a.bind(h.log,h,c)));delete l[c];return this}});h.Requests={request:function(c){var d=a.toArray(arguments).slice(1),e=h._eventsApi(this,"request",c,d);if(e)return e;var f=
this.channelName;e=this._requests;f&&this._tunedIn&&h.log.apply(this,[f,c].concat(d));if(e&&(e[c]||e["default"]))return f=e[c]||e["default"],d=e[c]?d:arguments,h._callHandler(f.callback,f.context,d);h.debugLog("An unhandled request was fired",c,f)},reply:function(a,c,d){if(h._eventsApi(this,"reply",a,[c,d]))return this;this._requests||(this._requests={});this._requests[a]&&h.debugLog("A request was overwritten",a,this.channelName);this._requests[a]={callback:f(c),context:d||this};return this},replyOnce:function(c,
d,e){if(h._eventsApi(this,"replyOnce",c,[d,e]))return this;var k=this,m=a.once(function(){k.stopReplying(c);return f(d).apply(this,arguments)});return this.reply(c,m,e)},stopReplying:function(c,d,e){if(h._eventsApi(this,"stopReplying",c))return this;if(c||d||e){var f=this._requests,k=c;f||(f={});for(var m=k?[k]:a.keys(f),l=!1,n=0,q=m.length;n<q;n++)if(k=m[n],f[k]){var t=f[k];d&&d!==t.callback&&d!==t.callback._callback||e&&e!==t.context?k=void 0:(delete f[k],k=!0);k&&(l=!0)}l||h.debugLog("Attempted to remove the unregistered request",
c,this.channelName)}else delete this._requests;return this}};h._channels={};h.channel=function(a){if(!a)throw Error("You must provide a name for the channel.");return h._channels[a]?h._channels[a]:h._channels[a]=new h.Channel(a)};h.Channel=function(a){this.channelName=a};a.extend(h.Channel.prototype,c.Events,h.Requests,{reset:function(){this.off();this.stopListening();this.stopReplying();return this}});var m,n;a.each([c.Events,h.Requests],function(c){a.each(c,function(c,d){h[d]=function(c){n=a.toArray(arguments).slice(1);
m=this.channel(c);return m[d].apply(m,n)}})});h.reset=function(c){a.each(c?[this._channels[c]]:this._channels,function(a){a.reset()})};return h});
(function(a,c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c(require("backbone"),require("underscore"),require("backbone.radio")):"function"===typeof define&&define.amd?define(["backbone","underscore","backbone.radio"],c):a.Marionette=a.Mn=c(a.Backbone,a._,a.Backbone.Radio)})(this,function(a,c,f){function e(a,c,d){return d.toUpperCase()}function d(a){for(var d=arguments.length,e=Array(1<d?d-1:0),h=1;h<d;h++)e[h-1]=arguments[h];d=Q(a);d=P.call(this,d);h=void 0;c.isFunction(d)&&
(h=d.apply(this,e));this.trigger.apply(this,arguments);return h}function h(a){for(var e=arguments.length,h=Array(1<e?e-1:0),f=1;f<e;f++)h[f-1]=arguments[f];return c.isFunction(a.triggerMethod)?a.triggerMethod.apply(a,h):d.apply(a,h)}function k(a,d,e){a._getImmediateChildren&&c.each(a._getImmediateChildren(),function(a){e(a)&&h(a,d,a)})}function l(a){return!a._isAttached}function m(a){return a._isAttached?!1:a._isAttached=!0}function n(a){return a._isAttached}function q(a){if(!a._isAttached)return!1;
a._isAttached=!1;return!0}function t(a){a._isAttached&&a._isRendered&&h(a,"dom:refresh",a)}function y(a){a._isAttached&&a._isRendered&&h(a,"dom:remove",a)}function v(){k(this,"before:attach",l)}function x(){k(this,"attach",m);t(this)}function w(){k(this,"before:detach",n);y(this)}function z(){k(this,"detach",q)}function u(){y(this)}function A(){t(this)}function C(a){a._areViewEventsMonitored||(a._areViewEventsMonitored=!0,a.on({"before:attach":v,attach:x,"before:detach":w,detach:z,"before:render":u,
render:A}))}function D(a,d,e,h,f){h=h.split(/\s+/);c.each(h,function(c){var h=a[c];if(!h)throw new J('Method "'+c+'" was configured as an event handler, but does not exist.');a[f](d,e,h)})}function O(a,d,e,h){if(d&&e){if(!c.isObject(e))throw new J({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindevents"});c.each(e,function(e,f){if(c.isString(e))D(a,d,f,e,h);else a[h](d,f,e)})}}function G(a,c){O(this,a,c,"listenTo");return this}function B(a,c){O(this,a,c,"stopListening");
return this}function U(a,d,e,h){if(d&&e){if(!c.isObject(e))throw new J({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"});e=K.call(a,e);d[h](e,a)}}function M(a,c){U(this,a,c,"reply");return this}function Z(a,c){U(this,a,c,"stopReplying");return this}function fa(a,d){return c.chain(d).map(function(d,e){e=d.behaviorClass?d.behaviorClass:c.isFunction(d)?d:c.isFunction(H.Behaviors.behaviorsLookup)?H.Behaviors.behaviorsLookup(d,e)[e]:H.Behaviors.behaviorsLookup[e];
d=new e(d===e?{}:d,a);e=fa(a,c.result(d,"behaviors"));return[d].concat(e)}).flatten().value()}function oa(a){return!!la[a]}function ea(a,d){c.isString(d)&&(d={event:d});var e=d.event,h=!!d.preventDefault;oa("triggersPreventDefault")&&(h=!1!==d.preventDefault);var f=!!d.stopPropagation;oa("triggersStopPropagation")&&(f=!1!==d.stopPropagation);return function(c){h&&c.preventDefault();f&&c.stopPropagation();a.triggerMethod(e,a,c)}}function X(a){a.supportsDestroyLifecycle||h(a,"before:destroy",a);var c=
!!a._isAttached;c&&h(a,"before:detach",a);a.remove();c&&(a._isAttached=!1,h(a,"detach",a));a._isDestroyed=!0;a.supportsDestroyLifecycle||h(a,"destroy",a)}function S(a){var d=a.regionClass;a=c.omit(a,"regionClass");return new d(a)}function W(a,c){return c.model&&c.model.get(a)}a="default"in a?a["default"]:a;c="default"in c?c["default"]:c;f="default"in f?f["default"]:f;var ba=function(a){return function(c){for(var d=arguments.length,e=Array(1<d?d-1:0),h=1;h<d;h++)e[h-1]=arguments[h];return a.apply(c,
e)}},ra=a.Model.extend,aa=function ya(a,d){c.isObject(a)&&(a=a.prev+" is going to be removed in the future. Please use "+a.next+" instead."+(a.url?" See: "+a.url:""));!H.DEV_MODE||void 0!==d&&d||ya._cache[a]||(ya._warn("Deprecation warning: "+a),ya._cache[a]=!0)};aa._console="undefined"!==typeof console?console:{};aa._warn=function(){return(aa._console.warn||aa._console.log||c.noop).apply(aa._console,arguments)};aa._cache={};var ka=function(a){return document.documentElement.contains(a&&a.parentNode)},
T=function(a,d){var e=this;a&&c.each(d,function(c){var d=a[c];void 0!==d&&(e[c]=d)})},P=function(a){if(a)return this.options&&void 0!==this.options[a]?this.options[a]:this[a]},K=function(a){var d=this;return c.reduce(a,function(a,e,h){c.isFunction(e)||(e=d[e]);e&&(a[h]=e);return a},{})},I=/(^|:)(\w)/gi,Q=c.memoize(function(a){return"on"+a.replace(I,e)}),ma="description fileName lineNumber name message number".split(" "),J=ra.call(Error,{urlRoot:"http://marionettejs.com/docs/v3.3.1/",constructor:function(a,
d){c.isObject(a)?(d=a,a=d.message):d||(d={});a=Error.call(this,a);c.extend(this,c.pick(a,ma),c.pick(d,ma));this.captureStackTrace();d.url&&(this.url=this.urlRoot+d.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,J)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});J.extend=ra;var ca={normalizeMethods:K,_setOptions:function(){for(var a=arguments.length,d=Array(a),e=0;e<a;e++)d[e]=arguments[e];this.options=c.extend.apply(c,
[{},c.result(this,"options")].concat(d))},mergeOptions:T,getOption:P,bindEvents:G,unbindEvents:B},da={_initRadio:function(){var a=c.result(this,"channelName");if(a){if(!f)throw new J({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'});a=this._channel=f.channel(a);var d=c.result(this,"radioEvents");this.bindEvents(a,d);d=c.result(this,"radioRequests");this.bindRequests(a,d);this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,
null,this)},getChannel:function(){return this._channel},bindEvents:G,unbindEvents:B,bindRequests:M,unbindRequests:Z},wa=["channelName","radioEvents","radioRequests"],ha=function(a){this._setOptions(a);this.mergeOptions(a,wa);this.cid=c.uniqueId(this.cidPrefix);this._initRadio();this.initialize.apply(this,arguments)};ha.extend=ra;c.extend(ha.prototype,a.Events,ca,da,{cidPrefix:"mno",_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},initialize:function(){},destroy:function(){if(this._isDestroyed)return this;
for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];this.triggerMethod.apply(this,["before:destroy",this].concat(c));this._isDestroyed=!0;this.triggerMethod.apply(this,["destroy",this].concat(c));this.stopListening();return this},triggerMethod:d});var ia={createBuffer:function(){return document.createDocumentFragment()},appendChildren:function(c,d){a.$(c).append(d)},beforeEl:function(c,d){a.$(c).before(d)},replaceEl:function(a,c){if(a!==c){var d=c.parentNode;d&&d.replaceChild(a,c)}},
detachContents:function(c){a.$(c).contents().detach()},setInnerContent:function(c,d){a.$(c).html(d)},detachEl:function(c){a.$(c).detach()},removeEl:function(c){a.$(c).remove()},findEls:function(c,d){return a.$(c,d)}},ja=function(a){this.templateId=a};c.extend(ja,{templateCaches:{},get:function(a,c){var d=this.templateCaches[a];d||(d=new ja(a),this.templateCaches[a]=d);return d.load(c)},clear:function(){var a=arguments.length;for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d];d=c.length;if(0<d)for(a=
0;a<d;a++)delete this.templateCaches[c[a]];else this.templateCaches={}}});c.extend(ja.prototype,ia,{load:function(a){if(this.compiledTemplate)return this.compiledTemplate;var c=this.loadTemplate(this.templateId,a);return this.compiledTemplate=this.compileTemplate(c,a)},loadTemplate:function(a,c){c=this.findEls(a);if(!c.length)throw new J({name:"NoTemplateError",message:'Could not find template: "'+a+'"'});return c.html()},compileTemplate:function(a,d){return c.template(a,d)}});var pa=c.invokeMap||
c.invoke;da={_delegateEntityEvents:function(a,d){this._undelegateEntityEvents(a,d);var e=c.result(this,"modelEvents");G.call(this,a,e);a=c.result(this,"collectionEvents");G.call(this,d,a)},_undelegateEntityEvents:function(a,d){var e=c.result(this,"modelEvents");B.call(this,a,e);a=c.result(this,"collectionEvents");B.call(this,d,a)}};var na=/^(\S+)\s*(.*)$/,Pa=function(a){a=a.match(na);var d=a[2];return[a[1]+c.uniqueId(".evt"),d].join(" ")},la={childViewEventPrefix:!0,triggersStopPropagation:!0,triggersPreventDefault:!0},
Ba={_getViewTriggers:function(a,d){return c.reduce(d,function(c,d,e){e=Pa(e);c[e]=ea(a,d);return c},{})}},Ca=function(a,d){return c.reduce(a,function(a,c,e){e=qa(e,d);a[e]=c;return a},{})},qa=function(a,c){return a.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(a){return c[a.slice(4)]})},Ka=function Ga(a,d,e){c.each(a,function(h,f){c.isString(h)?a[f]=qa(h,d):c.isObject(h)&&c.isArray(e)&&(c.extend(h,Ga(c.pick(h,e),d)),c.each(e,function(a){var e=h[a];c.isString(e)&&(h[a]=qa(e,d))}))});return a},Qa={normalizeUIKeys:function(a){var c=
this._getUIBindings();return Ca(a,c)},normalizeUIString:function(a){var c=this._getUIBindings();return qa(a,c)},normalizeUIValues:function(a,c){var d=this._getUIBindings();return Ka(a,d,c)},_getUIBindings:function(){var a=c.result(this,"_uiBindings"),d=c.result(this,"ui");return a||d},_bindUIElements:function(){var a=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var d=c.result(this,"_uiBindings");this._ui={};c.each(d,function(c,d){a._ui[d]=a.$(c)});this.ui=this._ui}},_unbindUIElements:function(){var a=
this;this.ui&&this._uiBindings&&(c.each(this.ui,function(c,d){delete a.ui[d]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(a){return this._ui[a]}},ua={supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(d){this._proxyBehaviorViewProperties();this._buildEventProxies();
var e=this._getEvents(d);"undefined"===typeof d&&(this.events=e);d=c.extend({},this._getBehaviorEvents(),e,this._getBehaviorTriggers(),this.getTriggers());a.View.prototype.delegateEvents.call(this,d);return this},_getEvents:function(a){a=a||this.events;return c.isFunction(a)?this.normalizeUIKeys(a.call(this)):this.normalizeUIKeys(a)},getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return this._getViewTriggers(this,a)}},delegateEntityEvents:function(){this._delegateEntityEvents(this.model,
this.collection);this._delegateBehaviorEntityEvents();return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.model,this.collection);this._undelegateBehaviorEntityEvents();return this},destroy:function(){if(this._isDestroyed)return this;for(var a=!!this._isAttached,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];this.triggerMethod.apply(this,["before:destroy",this].concat(d));a&&this.triggerMethod("before:detach",this);this.unbindUIElements();this.removeEl(this.el);
a&&(this._isAttached=!1,this.triggerMethod("detach",this));this._removeChildren();this._isDestroyed=!0;this._isRendered=!1;this._destroyBehaviors.apply(this,d);this.triggerMethod.apply(this,["destroy",this].concat(d));this.stopListening();return this},bindUIElements:function(){this._bindUIElements();this._bindBehaviorUIElements();return this},unbindUIElements:function(){this._unbindUIElements();this._unbindBehaviorUIElements();return this},getUI:function(a){return this._getUI(a)},childViewEventPrefix:function(){return oa("childViewEventPrefix")?
"childview":!1},triggerMethod:function(){var a=d.apply(this,arguments);this._triggerEventOnBehaviors.apply(this,arguments);return a},_buildEventProxies:function(){this._childViewEvents=c.result(this,"childViewEvents");this._childViewTriggers=c.result(this,"childViewTriggers")},_proxyChildViewEvents:function(a){this.listenTo(a,"all",this._childViewEventHandler)},_childViewEventHandler:function(a){for(var d=this.normalizeMethods(this._childViewEvents),e=arguments.length,h=Array(1<e?e-1:0),f=1;f<e;f++)h[f-
1]=arguments[f];"undefined"!==typeof d&&c.isFunction(d[a])&&d[a].apply(this,h);(d=this._childViewTriggers)&&c.isString(d[a])&&this.triggerMethod.apply(this,[d[a]].concat(h));d=c.result(this,"childViewEventPrefix");!1!==d&&this.triggerMethod.apply(this,[d+":"+a].concat(h))}};c.extend(ua,ia,{_initBehaviors:function(){this._behaviors=this._getBehaviors()},_getBehaviors:function(){var a=c.result(this,"behaviors");return c.isObject(a)?fa(this,a):{}},_getBehaviorTriggers:function(){var a=pa(this._behaviors,
"getTriggers");return c.reduce(a,function(a,d){return c.extend(a,d)},{})},_getBehaviorEvents:function(){var a=pa(this._behaviors,"getEvents");return c.reduce(a,function(a,d){return c.extend(a,d)},{})},_proxyBehaviorViewProperties:function(){pa(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){pa(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){pa(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(){for(var a=arguments.length,
c=Array(a),d=0;d<a;d++)c[d]=arguments[d];pa.apply(void 0,[this._behaviors,"destroy"].concat(c))},_removeBehavior:function(a){this._isDestroyed||(this._behaviors=c.without(this._behaviors,a))},_bindBehaviorUIElements:function(){pa(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){pa(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(){for(var a=this._behaviors,c=0,e=a&&a.length;c<e;c++)d.apply(a[c],arguments)}},ca,da,Ba,Qa);var eb=["allowMissingEl","parentEl",
"replaceElement"],Ea=ha.extend({cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,constructor:function(c){this._setOptions(c);this.mergeOptions(c,eb);this._initEl=this.el=this.getOption("el");this.el=this.el instanceof a.$?this.el[0]:this.el;if(!this.el)throw new J({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el);ha.call(this,c)},show:function(a,c){if(this._ensureElement(c)){a=this._getView(a,c);if(a===this.currentView)return this;
this._isSwappingView=!!this.currentView;this.triggerMethod("before:show",this,a,c);a._isAttached||this.empty(c);this._setupChildView(a);this._renderView(a);this._attachView(a,c);this.currentView=a;this.triggerMethod("show",this,a,c);this._isSwappingView=!1;return this}},_setupChildView:function(a){C(a);this._proxyChildViewEvents(a);a.on("destroy",this._empty,this)},_proxyChildViewEvents:function(a){var c=this._parentView;c&&c._proxyChildViewEvents(a)},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||
h(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,h(a,"render",a)))},_attachView:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=!a._isAttached&&ka(this.el);d="undefined"===typeof d.replaceElement?!!c.result(this,"replaceElement"):!!d.replaceElement;e&&h(a,"before:attach",a);d?this._replaceEl(a):this.attachHtml(a);e&&(a._isAttached=!0,h(a,"attach",a))},_ensureElement:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||0===this.$el.length){if("undefined"===typeof a.allowMissingEl?c.result(this,"allowMissingEl"):a.allowMissingEl)return!1;throw new J('An "el" must exist in DOM for this region '+this.cid);}return!0},_getView:function(c){if(!c)throw new J({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(c._isDestroyed)throw new J({name:"ViewDestroyedError",
message:'View (cid: "'+c.cid+'") has already been destroyed and cannot be used.'});if(c instanceof a.View)return c;c=this._getViewOptions(c);return new F(c)},_getViewOptions:function(a){return c.isFunction(a)?{template:a}:c.isObject(a)?a:{template:function(){return a}}},getEl:function(a){return this.findEls(a,c.result(this,"parentEl"))},_replaceEl:function(a){this._restoreEl();a.on("before:destroy",this._restoreEl,this);this.replaceEl(a.el,this.el);this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var a=
this.currentView;a&&(this._detachView(a),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(a){this.appendChildren(this.el,a.el)},empty:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},c=this.currentView;if(!c)return this._ensureElement(a)&&this.detachHtml(),this;(a=!a.preventDestroy)||aa("The preventDestroy option is deprecated. Use Region#detachView");this._empty(c,
a);return this},_empty:function(a,c){a.off("destroy",this._empty,this);this.triggerMethod("before:empty",this,a);this._restoreEl();delete this.currentView;a._isDestroyed||(c?this.removeView(a):this._detachView(a),this._stopChildViewEvents(a));this.triggerMethod("empty",this,a)},_stopChildViewEvents:function(a){this._parentView&&this._parentView.stopListening(a)},destroyView:function(a){if(a._isDestroyed)return a;a.destroy?a.destroy():X(a);return a},removeView:function(a){this.destroyView(a)},detachView:function(){var a=
this.currentView;if(a)return this._empty(a),a},_detachView:function(a){var c=!!a._isAttached,d=this._isReplaced;c&&h(a,"before:detach",a);d?this.replaceEl(this.el,a.el):this.detachHtml();c&&(a._isAttached=!1,h(a,"detach",a))},detachHtml:function(){this.detachContents(this.el)},hasView:function(){return!!this.currentView},reset:function(a){this.empty(a);this.$el&&(this.el=this._initEl);delete this.$el;return this},destroy:function(a){if(this._isDestroyed)return this;this.reset(a);this._name&&this._parentView._removeReferences(this._name);
delete this._parentView;delete this._name;return ha.prototype.destroy.apply(this,arguments)}});c.extend(Ea.prototype,ia);var N=function(a,d){if(a instanceof Ea)return a;d=c.extend({},d);if(c.isString(a))c.extend(d,{el:a}),a=S(d);else if(c.isFunction(a))c.extend(d,{regionClass:a}),a=S(d);else if(c.isObject(a))a.selector&&aa("The selector option on a Region definition object is deprecated. Use el to pass a selector string"),c.extend(d,{el:a.selector},a),a=S(d);else throw new J({message:"Improper region configuration type.",
url:"marionette.region.html#region-configuration-types"});return a};ia={regionClass:Ea,_initRegions:function(){this.regions=this.regions||{};this._regions={};this.addRegions(c.result(this,"regions"))},_reInitRegions:function(){pa(this._regions,"reset")},addRegion:function(a,c){var d={};d[a]=c;return this.addRegions(d)[a]},addRegions:function(a){if(!c.isEmpty(a))return a=this.normalizeUIValues(a,["selector","el"]),this.regions=c.extend({},this.regions,a),this._addRegions(a)},_addRegions:function(a){var d=
this,e={regionClass:this.regionClass,parentEl:c.partial(c.result,this,"el")};return c.reduce(a,function(a,c,h){a[h]=N(c,e);d._addRegion(a[h],h);return a},{})},_addRegion:function(a,c){this.triggerMethod("before:add:region",this,c,a);a._parentView=this;a._name=c;this._regions[c]=a;this.triggerMethod("add:region",this,c,a)},removeRegion:function(a){var c=this._regions[a];this._removeRegion(c,a);return c},removeRegions:function(){var a=this._getRegions();c.each(this._regions,c.bind(this._removeRegion,
this));return a},_removeRegion:function(a,c){this.triggerMethod("before:remove:region",this,c,a);a.destroy();this.triggerMethod("remove:region",this,c,a)},_removeReferences:function(a){delete this.regions[a];delete this._regions[a]},emptyRegions:function(){var a=this.getRegions();pa(a,"empty");return a},hasRegion:function(a){return!!this.getRegion(a)},getRegion:function(a){this._isRendered||this.render();return this._regions[a]},_getRegions:function(){return c.clone(this._regions)},getRegions:function(){this._isRendered||
this.render();return this._getRegions()},showChildView:function(a,c){for(var d=this.getRegion(a),e=arguments.length,h=Array(2<e?e-2:0),f=2;f<e;f++)h[f-2]=arguments[f];return d.show.apply(d,[c].concat(h))},detachChildView:function(a){return this.getRegion(a).detachView()},getChildView:function(a){return this.getRegion(a).currentView}};var L={render:function(a,d){if(!a)throw new J({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(c.isFunction(a)?
a:ja.get(a))(d)}},Da="behaviors childViewEventPrefix childViewEvents childViewTriggers collectionEvents events modelEvents regionClass regions template templateContext triggers ui".split(" "),F=a.View.extend({constructor:function(d){this.render=c.bind(this.render,this);this._setOptions(d);this.mergeOptions(d,Da);C(this);this._initBehaviors();this._initRegions();var e=Array.prototype.slice.call(arguments);e[0]=this.options;a.View.prototype.constructor.apply(this,e);this.delegateEntityEvents();this._triggerEventOnBehaviors("initialize",
this)},serializeData:function(){return this.model||this.collection?this.model?this.serializeModel():{items:this.serializeCollection()}:{}},serializeModel:function(){return this.model?c.clone(this.model.attributes):{}},serializeCollection:function(){return this.collection?this.collection.map(function(a){return c.clone(a.attributes)}):{}},setElement:function(){var c=!!this.el;a.View.prototype.setElement.apply(this,arguments);c&&(this._isRendered=!!this.$el.length,this._isAttached=ka(this.el));this._isRendered&&
this.bindUIElements();return this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this);this._isRendered&&this._reInitRegions();this._renderTemplate();this.bindUIElements();this._isRendered=!0;this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1===a)aa("template:false is deprecated.  Use _.noop.");else{var c=this.mixinTemplateContext(this.serializeData());a=this._renderHtml(a,c);this.attachElContent(a)}},_renderHtml:function(a,
c){return L.render(a,c,this)},getTemplate:function(){return this.template},mixinTemplateContext:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=c.result(this,"templateContext");return c.extend(a,d)},attachElContent:function(a){this.setInnerContent(this.el,a);return this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return c.chain(this._getRegions()).map("currentView").compact().value()}},{setRenderer:function(a){this.prototype._renderHtml=
a}});c.extend(F.prototype,ua,ia);var kb="forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce partition".split(" ");ia=function(a,d){c.each(kb,function(e){a[e]=function(){var a=[c.values(c.result(this,d))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var Sa=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();c.each(a,c.bind(this.add,this))};ia(Sa.prototype,
"_views");c.extend(Sa.prototype,{add:function(a,c){return this._add(a,c)._updateLength()},_add:function(a,c){var d=a.cid;this._views[d]=a;a.model&&(this._indexByModel[a.model.cid]=d);c&&(this._indexByCustom[c]=d);return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return c.values(this._views)[a]},findByCid:function(a){return this._views[a]},
remove:function(a){return this._remove(a)._updateLength()},_remove:function(a){var d=a.cid;a.model&&delete this._indexByModel[a.model.cid];c.some(this._indexByCustom,c.bind(function(a,c){if(a===d)return delete this._indexByCustom[c],!0},this));delete this._views[d];return this},_updateLength:function(){this.length=c.size(this._views);return this}});var p="behaviors childView childViewEventPrefix childViewEvents childViewOptions childViewTriggers collectionEvents events filter emptyView emptyViewOptions modelEvents reorderOnSort sort triggers ui viewComparator".split(" "),
Ia=a.View.extend({sort:!0,constructor:function(d){this.render=c.bind(this.render,this);this._setOptions(d);this.mergeOptions(d,p);C(this);this._initBehaviors();this.once("render",this._initialEvents);this._initChildViewStorage();this._bufferedChildren=[];var e=Array.prototype.slice.call(arguments);e[0]=this.options;a.View.prototype.constructor.apply(this,e);this.delegateEntityEvents();this._triggerEventOnBehaviors("initialize",this)},_startBuffering:function(){this._isBuffering=!0},_endBuffering:function(){var a=
this._isAttached?this._getImmediateChildren():[];this._isBuffering=!1;c.each(a,function(a){h(a,"before:attach",a)});this.attachBuffer(this,this._createBuffer());c.each(a,function(a){a._isAttached=!0;h(a,"attach",a)});this._bufferedChildren=[]},_getImmediateChildren:function(){return c.values(this.children._views)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,
"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a,d,e){d=void 0!==e.at&&(e.index||d.indexOf(a));if(this.filter||!1===d)d=c.indexOf(this._filteredSortedModels(d),a);this._shouldAddChild(a,d)&&(this._destroyEmptyView(),this._addChild(a,d))},_onCollectionUpdate:function(a,c){this._removeChildModels(c.changes.removed)},_removeChildModels:function(a){a=this._getRemovedViews(a);a.length&&(this.children._updateLength(),this._updateIndices(a,
!1),this.isEmpty()&&this._showEmptyView())},_getRemovedViews:function(a){var d=this;return c.reduce(a,function(a,c){c=c&&d.children.findByModel(c);if(!c||c._isDestroyed)return a;d._removeChildView(c);a.push(c);return a},[])},_removeChildView:function(a){this.triggerMethod("before:remove:child",this,a);this.children._remove(a);a.destroy?a.destroy():X(a);this.stopListening(a);this.triggerMethod("remove:child",this,a)},setElement:function(){var c=!!this.el;a.View.prototype.setElement.apply(this,arguments);
c&&(this._isAttached=ka(this.el));return this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this);this._renderChildren();this._isRendered=!0;this.triggerMethod("render",this);return this},setFilter:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,d=this.filter!==a;this._isRendered&&!this._isDestroyed&&d&&!c?(c=this._filteredSortedModels(),this.filter=a,d=this._filteredSortedModels(),this._applyModelDeltas(d,c)):this.filter=
a;return this},removeFilter:function(a){return this.setFilter(null,a)},_applyModelDeltas:function(a,d){var e=this,h={};c.each(a,function(a,c){e.children.findByModel(a)||e._onCollectionAdd(a,e.collection,{at:c});h[a.cid]=!0});a=c.filter(d,function(a){return!h[a.cid]&&e.children.findByModel(a)});this._removeChildModels(a)},reorder:function(){var a=this.children,d=this._filteredSortedModels();if(!d.length&&this._showingEmptyView)return this;if(c.some(d,function(c){return!a.findByModel(c)}))this.render();
else{var e=[],h=a.reduce(function(a,h){var f=c.indexOf(d,h.model);if(-1===f)return e.push(h.model),a;h._index=f;a[f]=h.el;return a},Array(d.length));this.triggerMethod("before:reorder",this);this._appendReorderedChildren(h);this._removeChildModels(e);this.triggerMethod("reorder",this)}return this},resortView:function(){this.reorderOnSort?this.reorder():this._renderChildren();return this},_sortViews:function(){var a=this,d=this._filteredSortedModels();c.find(d,function(c,d){c=a.children.findByModel(c);
return!c||c._index!==d})&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.appendChildren(this.el,a)},_renderChildren:function(){this._isRendered&&(this._destroyEmptyView(),this._destroyChildren());var a=this._filteredSortedModels();this.isEmpty({processedModels:a})?this._showEmptyView():(this.triggerMethod("before:render:children",this),this._startBuffering(),this._showCollection(a),this._endBuffering(),this.triggerMethod("render:children",this))},_createView:function(a,
c){var d=this._getChildView(a);c=this._getChildViewOptions(a,c);return this.buildChildView(a,d,c)},_setupChildView:function(a,c){C(a);this._proxyChildViewEvents(a);this.sort&&(a._index=c)},_showCollection:function(a){c.each(a,c.bind(this._addChild,this));this.children._updateLength()},_filteredSortedModels:function(a){if(!this.collection||!this.collection.length)return[];var c=this.getViewComparator(),d=this.collection.models;a=Math.min(Math.max(a,0),d.length-1);if(c){var e=void 0;a&&(e=d[a],d=d.slice(0,
a).concat(d.slice(a+1)));d=this._sortModelsBy(d,c);e&&d.splice(a,0,e)}return d=this._filterModels(d)},getViewComparator:function(){return this.viewComparator},_filterModels:function(a){var d=this;this.filter&&(a=c.filter(a,function(a,c){return d._shouldAddChild(a,c)}));return a},_sortModelsBy:function(a,d){return"string"===typeof d?c.sortBy(a,function(a){return a.get(d)}):1===d.length?c.sortBy(a,c.bind(d,this)):c.clone(a).sort(c.bind(d,this))},_showEmptyView:function(){var d=this._getEmptyView();
if(d&&!this._showingEmptyView){this._showingEmptyView=!0;var e=new a.Model,h=this.emptyViewOptions||this.childViewOptions;c.isFunction(h)&&(h=h.call(this,e,this._emptyViewIndex));d=this.buildChildView(e,d,h);this.triggerMethod("before:render:empty",this,d);this.addChildView(d,0);this.triggerMethod("render:empty",this,d)}},_destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty",this),this._destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty",
this))},_getEmptyView:function(){var a=this.emptyView;if(a)return this._getView(a)},_getChildView:function(a){var c=this.childView;if(!c)throw new J({name:"NoChildViewError",message:'A "childView" must be specified'});c=this._getView(c,a);if(!c)throw new J({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return c},_getView:function(d,e){if(d.prototype instanceof a.View||d===a.View)return d;if(c.isFunction(d))return d.call(this,e)},
_addChild:function(a,c){a=this._createView(a,c);this.addChildView(a,c);return a},_getChildViewOptions:function(a,d){return c.isFunction(this.childViewOptions)?this.childViewOptions(a,d):this.childViewOptions},addChildView:function(a,c){this.triggerMethod("before:add:child",this,a);this._setupChildView(a,c);this._isBuffering?this.children._add(a):(this._updateIndices(a,!0),this.children.add(a));this._renderView(a);this._attachView(a,c);this.triggerMethod("add:child",this,a);return a},_updateIndices:function(a,
d){if(this.sort)if(d){var e=c.isArray(a)?c.max(a,"_index"):a;c.isObject(e)&&this.children.each(function(a){a._index>=e._index&&(a._index+=1)})}else c.each(c.sortBy(this.children._views,"_index"),function(a,c){a._index=c})},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||h(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,h(a,"render",a)))},_attachView:function(a,c){var d=!a._isAttached&&!this._isBuffering&&this._isAttached;d&&h(a,"before:attach",a);this.attachHtml(this,
a,c);d&&(a._isAttached=!0,h(a,"attach",a))},buildChildView:function(a,d,e){a=c.extend({model:a},e);return new d(a)},removeChildView:function(a){if(!a||a._isDestroyed)return a;this._removeChildView(a);this.children._updateLength();this._updateIndices(a,!1);return a},isEmpty:function(a){c.result(a,"processedModels")?a=a.processedModels:(a=this.collection?this.collection.models:[],a=this._filterModels(a));return 0===a.length},attachBuffer:function(a,c){this.appendChildren(a.el,c)},_createBuffer:function(){var a=
this,d=this.createBuffer();c.each(this._bufferedChildren,function(c){a.appendChildren(d,c.el)});return d},attachHtml:function(a,c,d){a._isBuffering?a._bufferedChildren.splice(d,0,c):a._insertBefore(c,d)||a._insertAfter(c)},_insertBefore:function(a,c){var d=void 0;this.sort&&c<this.children.length-1&&(d=this.children.find(function(a){return a._index===c+1}));return d?(this.beforeEl(d.el,a.el),!0):!1},_insertAfter:function(a){this.appendChildren(this.el,a.el)},_initChildViewStorage:function(){this.children=
new Sa},_removeChildren:function(){this._destroyChildren()},_destroyChildren:function(a){this.children.length&&(this.triggerMethod("before:destroy:children",this),this.children.each(c.bind(this._removeChildView,this)),this.children._updateLength(),this.triggerMethod("destroy:children",this))},_shouldAddChild:function(a,d){var e=this.filter;return!c.isFunction(e)||e.call(this,a,d,this.collection)}});c.extend(Ia.prototype,ua);var Ta=function(){this._init()};ia(Ta.prototype,"_views");c.extend(Ta.prototype,
{_init:function(){this._views=[];this._viewsByCid={};this._indexByModel={};this._updateLength()},_add:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._views.length,d=a.cid;this._viewsByCid[d]=a;a.model&&(this._indexByModel[a.model.cid]=d);this._views.splice(c,0,a);this._updateLength()},_sort:function(a){return"string"===typeof a?(a=c.partial(W,a),this._sortBy(a)):1===a.length?this._sortBy(a):this._views.sort(a)},_sortBy:function(a){a=c.sortBy(this._views,a);this._set(a);
return a},_set:function(a){this._views.length=0;this._views.push.apply(this._views,a.slice(0));this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByIndex:function(a){return this._views[a]},findIndexByView:function(a){return this._views.indexOf(a)},findByCid:function(a){return this._viewsByCid[a]},_remove:function(a){this._viewsByCid[a.cid]&&(a.model&&delete this._indexByModel[a.model.cid],delete this._viewsByCid[a.cid],
a=this.findIndexByView(a),this._views.splice(a,1),this._updateLength())},_updateLength:function(){this.length=this._views.length}});var ob="behaviors childView childViewEventPrefix childViewEvents childViewOptions childViewTriggers collectionEvents emptyView emptyViewOptions events modelEvents sortWithCollection triggers ui viewComparator viewFilter".split(" ");ia=a.View.extend({sortWithCollection:!0,constructor:function(c){this._setOptions(c);this.mergeOptions(c,ob);C(this);this.once("render",this._initialEvents);
this._initChildViewStorage();this._initBehaviors();var d=Array.prototype.slice.call(arguments);d[0]=this.options;a.View.prototype.constructor.apply(this,d);this._initEmptyRegion();this.delegateEntityEvents();this._triggerEventOnBehaviors("initialize",this)},_initChildViewStorage:function(){this.children=new Ta},_initEmptyRegion:function(){this.emptyRegion=new Ea({el:this.el});this.emptyRegion._parentView=this},_initialEvents:function(){this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,
update:this._onCollectionUpdate})},_onCollectionSort:function(){var a=this;this.sortWithCollection&&this.collection.length===this.children.length&&(this.collection.some(function(c){return!a.children.findByModel(c)})||this.sort())},_onCollectionReset:function(){this.render()},_onCollectionUpdate:function(a,c){a=c.changes;c=this._removeChildModels(a.removed);this._addChildModels(a.added);this._detachChildren(c);this._showChildren();this._removeChildViews(c)},_removeChildModels:function(a){return c.map(a,
c.bind(this._removeChildModel,this))},_removeChildModel:function(a){a=this.children.findByModel(a);this._removeChild(a);return a},_removeChild:function(a){this.triggerMethod("before:remove:child",this,a);this.children._remove(a);this.triggerMethod("remove:child",this,a)},_addChildModels:function(a){return c.map(a,c.bind(this._addChildModel,this))},_addChildModel:function(a){a=this._createChildView(a);this._addChild(a);return a},_createChildView:function(a){var c=this._getChildView(a),d=this._getChildViewOptions(a);
return this.buildChildView(a,c,d)},_addChild:function(a,c){this.triggerMethod("before:add:child",this,a);this._setupChildView(a);this.children._add(a,c);this.triggerMethod("add:child",this,a)},_getChildView:function(a){var c=this.childView;if(!c)throw new J({name:"NoChildViewError",message:'A "childView" must be specified'});c=this._getView(c,a);if(!c)throw new J({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return c},_getView:function(d,
e){if(d.prototype instanceof a.View||d===a.View)return d;if(c.isFunction(d))return d.call(this,e)},_getChildViewOptions:function(a){return c.isFunction(this.childViewOptions)?this.childViewOptions(a):this.childViewOptions},buildChildView:function(a,d,e){a=c.extend({model:a},e);return new d(a)},_setupChildView:function(a){C(a);a.on("destroy",this.removeChildView,this);this._proxyChildViewEvents(a)},_getImmediateChildren:function(){return this.children._views},setElement:function(){var c=!!this.el;
a.View.prototype.setElement.apply(this,arguments);c&&(this._isAttached=ka(this.el));return this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this);this._destroyChildren();this.children._init();this.collection&&this._addChildModels(this.collection.models);this._showChildren();this._isRendered=!0;this.triggerMethod("render",this);return this},sort:function(){if(this._isDestroyed||!this.children.length)return this;this._showChildren();return this},_showChildren:function(){this.isEmpty()?
this._showEmptyView():(this._sortChildren(),this.filter())},isEmpty:function(a){return a||!this.children.length},_showEmptyView:function(){var a=this._getEmptyView();if(a){var c=this._getEmptyViewOptions();this.emptyRegion.show(new a(c))}},_getEmptyView:function(){var a=this.emptyView;if(a)return this._getView(a)},_destroyEmptyView:function(){this.emptyRegion.hasView()&&this.emptyRegion.empty()},_getEmptyViewOptions:function(){var a=this.emptyViewOptions||this.childViewOptions;return c.isFunction(a)?
a.call(this):a},_sortChildren:function(){this.triggerMethod("before:sort",this);var a=this.getComparator();c.isFunction(a)&&(a=a.bind(this));this.children._sort(a);this.triggerMethod("sort",this)},setComparator:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,d=this.viewComparator!==a;this.viewComparator=a;d&&!c&&this.sort();return this},removeComparator:function(a){return this.setComparator(null,a)},getComparator:function(){return this.viewComparator||this._viewComparator},
_viewComparator:function(a){if(this.collection)return this.collection.indexOf(a.model)},filter:function(){if(this._isDestroyed||!this.children.length)return this;var a=this._filterChildren();this._renderChildren(a);return this},_filterChildren:function(){var a=this._getFilter();if(!a)return this.children._views;this.triggerMethod("before:filter",this);a=this.children.partition(c.bind(a,this));this._detachChildren(a[1]);this.triggerMethod("filter",this);return a[0]},_getFilter:function(){var a=this.getFilter();
if(!a)return!1;if(c.isFunction(a))return a;if(c.isObject(a)){var d=c.matches(a);return function(a){return d(a.model&&a.model.attributes)}}if(c.isString(a))return function(c){return c.model&&c.model.get(a)};throw new J({name:"InvalidViewFilterError",message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'});},getFilter:function(){return this.viewFilter},setFilter:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,
d=this.viewFilter!==a;this.viewFilter=a;d&&!c&&this.filter();return this},removeFilter:function(a){return this.setFilter(null,a)},_detachChildren:function(a){c.each(a,c.bind(this._detachChildView,this))},_detachChildView:function(a){var c=!!a._isAttached;c&&h(a,"before:detach",a);this.detachHtml(a);c&&(a._isAttached=!1,h(a,"detach",a))},detachHtml:function(a){this.detachEl(a.el)},_renderChildren:function(a){if(this.isEmpty(!a.length))this._showEmptyView();else{this._destroyEmptyView();this.triggerMethod("before:render:children",
this,a);var c=this._getBuffer(a);this._attachChildren(c,a);this.triggerMethod("render:children",this,a)}},_attachChildren:function(a,d){d=this._isAttached?d:[];c.each(d,function(a){a._isAttached||h(a,"before:attach",a)});this.attachHtml(this,a);c.each(d,function(a){a._isAttached||(a._isAttached=!0,h(a,"attach",a))})},_getBuffer:function(a){var d=this,e=this.createBuffer();c.each(a,function(a){d._renderChildView(a);d.appendChildren(e,a.el)});return e},_renderChildView:function(a){a._isRendered||(a.supportsRenderLifecycle||
h(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,h(a,"render",a)))},attachHtml:function(a,c){this.appendChildren(a.el,c)},addChildView:function(a,c){if(!a||a._isDestroyed)return a;this._addChild(a,c);this._showChildren();return a},detachChildView:function(a){this.removeChildView(a,{shouldDetach:!0});return a},removeChildView:function(a,c){if(!a)return a;this._removeChildView(a,c);this._removeChild(a);this.isEmpty()&&this._showEmptyView();return a},_removeChildViews:function(a){c.each(a,
c.bind(this._removeChildView,this))},_removeChildView:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shouldDetach;a.off("destroy",this.removeChildView,this);c?this._detachChildView(a):this._destroyChildView(a);this.stopListening(a)},_destroyChildView:function(a){a._isDestroyed||(a.destroy?a.destroy():X(a))},_removeChildren:function(){this._destroyChildren();this.emptyRegion.destroy()},_destroyChildren:function(){this.children&&this.children.length&&(this.triggerMethod("before:destroy:children",
this),this.children.each(c.bind(this._removeChildView,this)),this.triggerMethod("destroy:children",this))}});c.extend(ia.prototype,ua);var Ha=["childViewContainer","template","templateContext"];ua=Ia.extend({constructor:function(a){aa("CompositeView is deprecated. Convert to View at your earliest convenience");this.mergeOptions(a,Ha);Ia.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,
"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_getChildView:function(a){var c=this.childView;if(!c)return this.constructor;c=this._getView(c,a);if(!c)throw new J({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return c},serializeData:function(){return this.serializeModel()},render:function(){if(this._isDestroyed)return this;
this._isRendering=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.renderChildren();this._isRendering=!1;this._isRendered=!0;this.triggerMethod("render",this);return this},renderChildren:function(){(this._isRendered||this._isRendering)&&Ia.prototype._renderChildren.call(this)},attachBuffer:function(a,c){a=this.getChildViewContainer(a);this.appendChildren(a,c)},_insertAfter:function(a){var c=this.getChildViewContainer(this,
a);this.appendChildren(c,a.el)},_appendReorderedChildren:function(a){var c=this.getChildViewContainer(this);this.appendChildren(c,a)},getChildViewContainer:function(a,d){if(a.$childViewContainer)return a.$childViewContainer;if(a.childViewContainer){if(d=c.result(a,"childViewContainer"),d="@"===d.charAt(0)&&a.ui?a.ui[d.substr(4)]:this.findEls(d,a.$el),0>=d.length)throw new J({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else d=
a.$el;return a.$childViewContainer=d},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}});var Na=c.pick(F.prototype,"serializeModel","getTemplate","_renderTemplate","_renderHtml","mixinTemplateContext","attachElContent");c.extend(ua.prototype,Na);var xa=["collectionEvents","events","modelEvents","triggers","ui"];Na=ha.extend({cidPrefix:"mnb",constructor:function(a,d){this.view=d;this.defaults&&aa("Behavior defaults are deprecated. For similar functionality set options on the Behavior class.");
this.defaults=c.clone(c.result(this,"defaults",{}));this._setOptions(this.defaults,a);this.mergeOptions(this.options,xa);this.ui=c.extend({},c.result(this,"ui"),c.result(d,"ui"));ha.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();this.view._removeBehavior(this);return this},proxyViewProperties:function(){this.$el=this.view.$el;this.el=this.view.el;return this},bindUIElements:function(){this._bindUIElements();return this},unbindUIElements:function(){this._unbindUIElements();
return this},getUI:function(a){return this._getUI(a)},delegateEntityEvents:function(){this._delegateEntityEvents(this.view.model,this.view.collection);return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.view.model,this.view.collection);return this},getEvents:function(){var a=this,d=this.normalizeUIKeys(c.result(this,"events"));return c.reduce(d,function(d,e,h){c.isFunction(e)||(e=a[e]);if(e)return h=Pa(h),d[h]=c.bind(e,a),d},{})},getTriggers:function(){if(this.triggers){var a=
this.normalizeUIKeys(c.result(this,"triggers"));return this._getViewTriggers(this.view,a)}}});c.extend(Na.prototype,da,Ba,Qa);var Fa=["region","regionClass"];da=ha.extend({cidPrefix:"mna",constructor:function(a){this._setOptions(a);this.mergeOptions(a,Fa);this._initRegion();ha.prototype.constructor.apply(this,arguments)},regionClass:Ea,_initRegion:function(){var a=this.region;a&&(this._region=N(a,{regionClass:this.regionClass}))},getRegion:function(){return this._region},showView:function(a){for(var c=
this.getRegion(),d=arguments.length,e=Array(1<d?d-1:0),h=1;h<d;h++)e[h-1]=arguments[h];return c.show.apply(c,[a].concat(e))},getView:function(){return this.getRegion().currentView},start:function(a){this.triggerMethod("before:start",this,a);this.triggerMethod("start",this,a);return this}});var fb=["appRoutes","controller"];Ba=a.Router.extend({constructor:function(c){this._setOptions(c);this.mergeOptions(c,fb);a.Router.apply(this,arguments);var d=this.appRoutes,e=this._getController();this.processAppRoutes(e,
d);this.on("route",this._processOnRoute,this)},appRoute:function(a,c){var d=this._getController();this._addAppRoute(d,a,c);return this},_processOnRoute:function(a,d){if(c.isFunction(this.onRoute)){var e=c.invert(this.appRoutes)[a];this.onRoute(a,e,d)}},processAppRoutes:function(a,d){var e=this;if(!d)return this;var h=c.keys(d).reverse();c.each(h,function(c){e._addAppRoute(a,c,d[c])});return this},_getController:function(){return this.controller},_addAppRoute:function(a,d,e){var h=a[e];if(!h)throw new J('Method "'+
e+'" was not found on the controller');this.route(d,e,c.bind(h,a))},triggerMethod:d});c.extend(Ba.prototype,ca);var gb=a.Marionette,H=a.Marionette={};H.noConflict=function(){a.Marionette=gb;return this};H.bindEvents=ba(G);H.unbindEvents=ba(B);H.bindRequests=ba(M);H.unbindRequests=ba(Z);H.mergeOptions=ba(T);H.getOption=ba(P);H.normalizeMethods=ba(K);H.extend=ra;H.isNodeAttached=ka;H.deprecate=aa;H.triggerMethod=ba(d);H.triggerMethodOn=h;H.isEnabled=oa;H.setEnabled=function(a,c){return la[a]=c};H.monitorViewEvents=
C;H.Behaviors={};H.Behaviors.behaviorsLookup=function(){throw new J({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"});};H.Application=da;H.AppRouter=Ba;H.Renderer=L;H.TemplateCache=ja;H.View=F;H.CollectionView=Ia;H.NextCollectionView=ia;H.CompositeView=ua;H.Behavior=Na;H.Region=Ea;H.Error=J;H.Object=ha;H.DEV_MODE=!1;H.FEATURES=la;H.VERSION="3.3.1";return H});
(function(a){"function"===typeof define&&define.amd?define(["underscore","jquery","backbone"],a):"undefined"!==typeof module&&module.exports?module.exports=a(require("underscore"),require("jquery"),require("backbone")):a(_,jQuery,Backbone)})(function(a,c,f){if(!f)throw"Please include Backbone.js before Backbone.ModelBinder.js";f.ModelBinder=function(){a.bindAll.apply(a,[this].concat(a.functions(this)))};f.ModelBinder.SetOptions=function(a){f.ModelBinder.options=a};f.ModelBinder.VERSION="1.1.0";f.ModelBinder.Constants=
{};f.ModelBinder.Constants.ModelToView="ModelToView";f.ModelBinder.Constants.ViewToModel="ViewToModel";a.extend(f.ModelBinder.prototype,{bind:function(a,d,h,f){this.unbind();this._model=a;this._rootEl=d;this._setOptions(f);this._model||this._throwException("model must be specified");this._rootEl||this._throwException("rootEl must be specified");h?(this._attributeBindings=c.extend(!0,{},h),this._initializeAttributeBindings(),this._initializeElBindings()):this._initializeDefaultBindings();this._bindModelToView();
this._bindViewToModel()},bindCustomTriggers:function(a,c,h,f,l){this._triggers=h;this.bind(a,c,f,l)},unbind:function(){this._unbindModelToView();this._unbindViewToModel();this._attributeBindings&&(delete this._attributeBindings,this._attributeBindings=void 0)},_setOptions:function(c){this._options=a.extend({boundAttribute:"name"},f.ModelBinder.options,c);this._options.modelSetOptions||(this._options.modelSetOptions={});this._options.modelSetOptions.changeSource="ModelBinder";this._options.changeTriggers||
(this._options.changeTriggers={"":"change","[contenteditable]":"blur"});this._options.initialCopyDirection||(this._options.initialCopyDirection=f.ModelBinder.Constants.ModelToView)},_initializeAttributeBindings:function(){var c,d;for(c in this._attributeBindings){var h=this._attributeBindings[c];a.isString(h)?d={elementBindings:[{selector:h}]}:a.isArray(h)?d={elementBindings:h}:a.isObject(h)?d={elementBindings:[h]}:this._throwException("Unsupported type passed to Model Binder "+d);for(h=0;h<d.elementBindings.length;h++){var f=
d.elementBindings[h];f.attributeBinding=d}d.attributeName=c;this._attributeBindings[c]=d}},_initializeDefaultBindings:function(){var a;this._attributeBindings={};var d=c("["+this._options.boundAttribute+"]",this._rootEl);for(a=0;a<d.length;a++){var h=d[a];var f=c(h).attr(this._options.boundAttribute);if(this._attributeBindings[f])this._attributeBindings[f].elementBindings.push({attributeBinding:this._attributeBindings[f],boundEls:[h]});else{var l={attributeName:f};l.elementBindings=[{attributeBinding:l,
boundEls:[h]}];this._attributeBindings[f]=l}}},_initializeElBindings:function(){var a,d,h;for(a in this._attributeBindings){var f=this._attributeBindings[a];for(d=0;d<f.elementBindings.length;d++){var l=f.elementBindings[d];var m=""===l.selector?c(this._rootEl):c(l.selector,this._rootEl);if(0===m.length)this._throwException("Bad binding found. No elements returned for binding selector "+l.selector);else for(l.boundEls=[],h=0;h<m.length;h++){var n=m[h];l.boundEls.push(n)}}}},_bindModelToView:function(){this._model.on("change",
this._onModelChange,this);this._options.initialCopyDirection===f.ModelBinder.Constants.ModelToView&&this.copyModelAttributesToView()},copyModelAttributesToView:function(c){var d;for(d in this._attributeBindings)if(void 0===c||-1!==a.indexOf(c,d)){var e=this._attributeBindings[d];this._copyModelToView(e)}},copyViewValuesToModel:function(){var a,d,h,f;for(a in this._attributeBindings){var l=this._attributeBindings[a];for(d=0;d<l.elementBindings.length;d++){var m=l.elementBindings[d];if(this._isBindingUserEditable(m))if(this._isBindingRadioGroup(m))(f=
this._getRadioButtonGroupCheckedEl(m))&&this._copyViewToModel(m,f);else for(h=0;h<m.boundEls.length;h++)f=c(m.boundEls[h]),this._isElUserEditable(f)&&this._copyViewToModel(m,f)}}},_unbindModelToView:function(){this._model&&(this._model.off("change",this._onModelChange),this._model=void 0)},_bindViewToModel:function(){a.each(this._options.changeTriggers,function(a,d){c(this._rootEl).on(a,d,this._onElChanged)},this);this._options.initialCopyDirection===f.ModelBinder.Constants.ViewToModel&&this.copyViewValuesToModel()},
_unbindViewToModel:function(){this._options&&this._options.changeTriggers&&a.each(this._options.changeTriggers,function(a,d){c(this._rootEl).off(a,d,this._onElChanged)},this)},_onElChanged:function(a){var d;a=c(a.target)[0];var e=this._getElBindings(a);for(d=0;d<e.length;d++){var f=e[d];this._isBindingUserEditable(f)&&this._copyViewToModel(f,a)}},_isBindingUserEditable:function(a){return void 0===a.elAttribute||"text"===a.elAttribute||"html"===a.elAttribute},_isElUserEditable:function(a){return a.attr("contenteditable")||
a.is("input")||a.is("select")||a.is("textarea")},_isBindingRadioGroup:function(a){var d,e=0<a.boundEls.length;for(d=0;d<a.boundEls.length;d++){var f=c(a.boundEls[d]);if("radio"!==f.attr("type")){e=!1;break}}return e},_getRadioButtonGroupCheckedEl:function(a){var d;for(d=0;d<a.boundEls.length;d++){var e=c(a.boundEls[d]);if("radio"===e.attr("type")&&e.prop("checked"))return e}},_getElBindings:function(a){var c,e,f,l=[];for(c in this._attributeBindings){var m=this._attributeBindings[c];for(e=0;e<m.elementBindings.length;e++){var n=
m.elementBindings[e];for(f=0;f<n.boundEls.length;f++){var q=n.boundEls[f];q===a&&l.push(n)}}}return l},_onModelChange:function(){var a,c;for(a in this._model.changedAttributes())(c=this._attributeBindings[a])&&this._copyModelToView(c)},_copyModelToView:function(a){var d,e;var k=this._model.get(a.attributeName);for(d=0;d<a.elementBindings.length;d++){var l=a.elementBindings[d];for(e=0;e<l.boundEls.length;e++){var m=l.boundEls[e];if(!m._isSetting){var n=this._getConvertedValue(f.ModelBinder.Constants.ModelToView,
l,k);this._setEl(c(m),l,n)}}}},_setEl:function(a,c,h){c.elAttribute?this._setElAttribute(a,c,h):this._setElValue(a,h)},_setElAttribute:function(c,d,h){switch(d.elAttribute){case "html":c.html(h);break;case "text":c.text(h);break;case "enabled":c.prop("disabled",!h);break;case "displayed":c[h?"show":"hide"]();break;case "hidden":c[h?"hide":"show"]();break;case "css":c.css(d.cssAttribute,h);break;case "class":var e=this._model.previous(d.attributeBinding.attributeName),l=this._model.get(d.attributeBinding.attributeName);
a.isUndefined(e)&&a.isUndefined(l)||(e=this._getConvertedValue(f.ModelBinder.Constants.ModelToView,d,e),c.removeClass(e));h&&c.addClass(h);break;default:c.attr(d.elAttribute,h)}},_setElValue:function(a,c){if(a.attr("type"))switch(a.attr("type")){case "radio":a.prop("checked",a.val()===c);break;case "checkbox":a.prop("checked",!!c);break;case "file":break;default:a.val(c)}else a.is("input")||a.is("select")||a.is("textarea")?a.val(c||(0===c?"0":"")):a.text(c||(0===c?"0":""))},_copyViewToModel:function(a,
d){if(!d._isSetting){d._isSetting=!0;var e=this._setModel(a,c(d));d._isSetting=!1;e&&a.converter&&(e=this._model.get(a.attributeBinding.attributeName),e=this._getConvertedValue(f.ModelBinder.Constants.ModelToView,a,e),this._setEl(c(d),a,e))}},_getElValue:function(a,c){switch(c.attr("type")){case "checkbox":return c.prop("checked")?!0:!1;default:return void 0!==c.attr("contenteditable")?c.html():c.val()}},_setModel:function(a,c){var d={};c=this._getElValue(a,c);c=this._getConvertedValue(f.ModelBinder.Constants.ViewToModel,
a,c);d[a.attributeBinding.attributeName]=c;return this._model.set(d,this._options.modelSetOptions)},_getConvertedValue:function(a,c,h){c.converter?h=c.converter(a,h,c.attributeBinding.attributeName,this._model,c.boundEls):this._options.converter&&(h=this._options.converter(a,h,c.attributeBinding.attributeName,this._model,c.boundEls));return h},_throwException:function(a){if(this._options.suppressThrows)"undefined"!==typeof console&&console.error&&console.error(a);else throw a;}});f.ModelBinder.CollectionConverter=
function(c){this._collection=c;if(!this._collection)throw"Collection must be defined";a.bindAll(this,"convert")};a.extend(f.ModelBinder.CollectionConverter.prototype,{convert:function(a,c){return a===f.ModelBinder.Constants.ModelToView?c?c.id:void 0:this._collection.get(c)}});f.ModelBinder.createDefaultBindings=function(a,d,h,f){var e,k={};a=c("["+d+"]",a);for(e=0;e<a.length;e++){var n=a[e];n=c(n).attr(d);k[n]||(k[n]={selector:"["+d+'="'+n+'"]'},h&&(k[n].converter=h),f&&(k[n].elAttribute=f))}return k};
f.ModelBinder.combineBindings=function(c,d){a.each(d,function(a,d){var e={selector:a.selector};a.converter&&(e.converter=a.converter);a.elAttribute&&(e.elAttribute=a.elAttribute);c[d]=c[d]?[c[d],e]:e});return c};return f.ModelBinder});
Backbone.Paginator=function(a,c,f){var e=c.map(a.VERSION.split("."),function(a){return parseInt(a,10)}),d={version:"0.8.1"};d.clientPager=a.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this);this.on("remove",
this.removeModel,this);this.setDefaults()},setDefaults:function(){var a=c.defaults(this.paginator_ui,this.defaults_ui);c.defaults(this,a)},addModel:function(a){this.origModels.push(a)},removeModel:function(a){a=c.indexOf(this.origModels,a);this.origModels.splice(a,1)},sync:function(d,h,m){var k=this;this.setDefaults();var l={};c.each(c.result(k,"server_api"),function(a,d){c.isFunction(a)&&(a=c.bind(a,k),a=a());l[d]=a});var t=c.clone(k.paginator_core);c.each(t,function(a,d){c.isFunction(a)&&(a=c.bind(a,
k),a=a());t[d]=a});t=c.defaults(t,{timeout:25E3,cache:!1,type:"GET",dataType:"jsonp"});t=c.extend(t,{data:decodeURIComponent(f.param(l)),processData:!1,url:c.result(t,"url")},m);var y=!(0===e[0]&&9===e[1]&&10===e[2]),v=t.success;t.success=function(a,c,d){v&&(y?v(a,c,d):v(h,a,t));h&&h.trigger&&h.trigger("sync",h,a,t)};var x=t.error;t.error=function(a){x&&x(h,a,t);h&&h.trigger&&h.trigger("error",h,a,t)};d=t.xhr=a.ajax(t);h&&h.trigger&&h.trigger("request",h,d,t);return d},nextPage:function(a){this.currentPage<
this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(a))},previousPage:function(a){1<this.currentPage&&(this.currentPage=--this.currentPage,this.pager(a))},goTo:function(a,c){void 0!==a&&(this.currentPage=parseInt(a,10),this.pager(c))},howManyPer:function(a){if(void 0!==a){var c=this.perPage;this.perPage=parseInt(a,10);this.currentPage=Math.ceil((c*(this.currentPage-1)+1)/a);this.pager()}},setSort:function(a,c){void 0!==a&&void 0!==c&&(this.lastSortColumn=this.sortColumn,this.sortColumn=
a,this.sortDirection=c,this.pager(),this.info())},setFieldFilter:function(a){c.isEmpty(a)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=""):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=a);this.pager();this.info()},doFakeFieldFilter:function(a){if(!c.isEmpty(a)){var d=this.origModels;void 0===d&&(d=this.models);d=this._fieldFilter(d,a);""!==this.filterExpression&&(d=this._filter(d,this.filterFields,this.filterExpression));return d.length}},setFilter:function(a,
c){void 0!==a&&void 0!==c&&(this.filterFields=a,this.lastFilterExpression=this.filterExpression,this.filterExpression=c,this.pager(),this.info())},doFakeFilter:function(a,d){if(void 0!==a&&void 0!==d){var e=this.origModels;void 0===e&&(e=this.models);c.isEmpty(this.fieldFilterRules)||(e=this._fieldFilter(e,this.fieldFilterRules));e=this._filter(e,a,d);return e.length}},pager:function(a){var d=this.perPage,e=(this.currentPage-1)*d,h=e+d;void 0===this.origModels&&(this.origModels=this.models);this.models=
this.origModels.slice();""!==this.sortColumn&&(this.models=this._sort(this.models,this.sortColumn,this.sortDirection));c.isEmpty(this.fieldFilterRules)||(this.models=this._fieldFilter(this.models,this.fieldFilterRules));""!==this.filterExpression&&(this.models=this._filter(this.models,this.filterFields,this.filterExpression));this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&c.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(e=0,h=e+d,this.currentPage=
1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression);this.sortedAndFilteredModels=this.models.slice();this.info();this.reset(this.models.slice(e,h));c.result(a,"success")},_sort:function(a,d,e){return a=a.sort(function(a,h){var f=a.get(d),k=h.get(d);if(c.isUndefined(f)||c.isUndefined(k)||null===f||null===k)return 0;f=f.toString().toLowerCase();k=k.toString().toLowerCase();if("desc"===e)if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&
!k.match(/[^\-\d\.]/)&&k.match(/-?[\d\.]+/)){if(f-0<k-0)return 1;if(f-0>k-0)return-1}else{if(f<k)return 1;if(f>k)return-1}else if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&!k.match(/[^\-\d\.]/)&&k.match(/-?[\d\.]+/)){if(f-0<k-0)return-1;if(f-0>k-0)return 1}else{if(f<k)return-1;if(f>k)return 1}if(a.cid&&h.cid){a=a.cid;h=h.cid;if(a<h)return-1;if(a>h)return 1}return 0})},_fieldFilter:function(a,d){if(c.isEmpty(d))return a;var e=[];c.each(a,function(a){var h=!0;c.each(d,function(d){if(!h)return!1;
h=!1;"function"===d.type?c.wrap(d.value,function(c){return c(a.get(d.field))})()&&(h=!0):"required"===d.type?c.isEmpty(a.get(d.field).toString())||(h=!0):"min"===d.type?!c.isNaN(Number(a.get(d.field)))&&!c.isNaN(Number(d.value))&&Number(a.get(d.field))>=Number(d.value)&&(h=!0):"max"===d.type?!c.isNaN(Number(a.get(d.field)))&&!c.isNaN(Number(d.value))&&Number(a.get(d.field))<=Number(d.value)&&(h=!0):"range"===d.type?!c.isNaN(Number(a.get(d.field)))&&c.isObject(d.value)&&!c.isNaN(Number(d.value.min))&&
!c.isNaN(Number(d.value.max))&&Number(a.get(d.field))>=Number(d.value.min)&&Number(a.get(d.field))<=Number(d.value.max)&&(h=!0):"minLength"===d.type?a.get(d.field).toString().length>=d.value&&(h=!0):"maxLength"===d.type?a.get(d.field).toString().length<=d.value&&(h=!0):"rangeLength"===d.type?c.isObject(d.value)&&!c.isNaN(Number(d.value.min))&&!c.isNaN(Number(d.value.max))&&a.get(d.field).toString().length>=d.value.min&&a.get(d.field).toString().length<=d.value.max&&(h=!0):"oneOf"===d.type?c.isArray(d.value)&&
c.include(d.value,a.get(d.field))&&(h=!0):"equalTo"===d.type?d.value===a.get(d.field)&&(h=!0):"containsAllOf"===d.type?c.isArray(d.value)&&c.isArray(a.get(d.field))&&c.intersection(d.value,a.get(d.field)).length===d.value.length&&(h=!0):"pattern"===d.type?a.get(d.field).toString().match(d.value)&&(h=!0):h=!1});h&&e.push(a)});return e},_filter:function(d,e,h){var f=this,k={};c.isString(e)?k[e]={cmp_method:"regexp"}:c.isArray(e)?c.each(e,function(a){k[a]={cmp_method:"regexp"}}):c.each(e,function(a,
d){k[d]=c.defaults(a,{cmp_method:"regexp"})});e=k;c.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin&&(h=a.Paginator.removeDiacritics(h));if(""!==h&&c.isString(h))var m=c.map(h.match(/\w+/ig),function(a){return a.toLowerCase()}),l="("+c.uniq(m).join("|")+")",v=new RegExp(l,"igm");else return d;var x=[];c.each(d,function(d){var k=[];c.each(e,function(e,l){var n=d.get(l);n&&(l=[],n=c.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin?a.Paginator.removeDiacritics(n.toString()):n.toString(),
"levenshtein"===e.cmp_method&&c.has(a.Paginator,"levenshtein")&&f.useLevenshteinPlugin?(n=a.Paginator.levenshtein(n,h),c.defaults(e,{max_distance:0}),n<=e.max_distance&&(l=c.uniq(m))):l=n.match(v),l=c.map(l,function(a){return a.toString().toLowerCase()}),c.each(l,function(a){k.push(a)}))});k=c.uniq(c.without(k,""));c.isEmpty(c.difference(m,k))&&x.push(d)});return x},info:function(){var a=this.sortedAndFilteredModels?this.sortedAndFilteredModels.length:this.length;var c=Math.ceil(a/this.perPage);a=
{totalUnfilteredRecords:this.origModels.length,totalRecords:a,currentPage:this.currentPage,perPage:this.perPage,totalPages:c,lastPage:c,previous:!1,next:!1,startRecord:0===a?0:(this.currentPage-1)*this.perPage+1,endRecord:Math.min(a,this.currentPage*this.perPage)};1<this.currentPage&&(a.previous=this.currentPage-1);this.currentPage<a.totalPages&&(a.next=this.currentPage+1);a.pageSet=this.setPagination(a);return this.information=a},setPagination:function(a){var c=[],d=2*this.pagesInRange,e=Math.ceil(a.totalRecords/
a.perPage);if(1<e)if(e<=1+d){var h=1;for(a=e;h<=a;h++)c.push(h)}else if(a.currentPage<=this.pagesInRange+1)for(h=1,a=2+d;h<a;h++)c.push(h);else if(e-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(h=a.currentPage-this.pagesInRange;h<=a.currentPage+this.pagesInRange;h++)c.push(h);else for(h=e-d;h<=e;h++)c.push(h);return c},bootstrap:function(a){c.extend(this,a);this.goTo(1);this.info();return this}});d.clientPager.prototype.prevPage=d.clientPager.prototype.previousPage;var h=function(){var a=
new f.Deferred;a.reject();return a.promise()};d.requestPager=a.Collection.extend({sync:function(d,h,m){var k=this;k.setDefaults();var l={};c.each(c.result(k,"server_api"),function(a,d){c.isFunction(a)&&(a=c.bind(a,k),a=a());l[d]=a});var t=c.clone(k.paginator_core);c.each(t,function(a,d){c.isFunction(a)&&(a=c.bind(a,k),a=a());t[d]=a});t=c.defaults(t,{timeout:25E3,cache:!1,type:"GET",dataType:"jsonp"});m.data=m.data?decodeURIComponent(f.param(c.extend(l,m.data))):decodeURIComponent(f.param(l));t=c.extend(t,
{data:decodeURIComponent(f.param(l)),processData:!1,url:c.result(t,"url")},m);var y=!(0===e[0]&&9===e[1]&&10===e[2]),v=t.success;t.success=function(a,c,d){v&&(y?v(a,c,d):v(h,a,t));1>e[0]&&h&&h.trigger&&h.trigger("sync",h,a,t)};var x=t.error;t.error=function(a){x&&x(a);h&&h.trigger&&h.trigger("error",h,a,t)};d=t.xhr=a.ajax(t);h&&h.trigger&&h.trigger("request",h,d,t);return d},setDefaults:function(){var a=this;c.defaults(a.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4});
c.each(a.paginator_ui,function(d,e){c.isUndefined(a[e])&&(a[e]=a.paginator_ui[e])})},requestNextPage:function(a){return void 0!==this.currentPage&&this.currentPage<this.information.totalPages?(this.currentPage+=1,this.pager(a)):h()},requestPreviousPage:function(a){return void 0!==this.currentPage&&1<this.currentPage?(--this.currentPage,this.pager(a)):h()},updateOrder:function(a,c){return void 0!==a?(this.sortField=a,this.pager(c)):h()},goTo:function(a,c){return void 0!==a?(this.currentPage=parseInt(a,
10),this.pager(c)):h()},howManyPer:function(a,c){return void 0!==a?(this.currentPage=this.firstPage,this.perPage=a,this.pager(c)):h()},info:function(){var a={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};1<this.currentPage&&(a.previous=this.currentPage-1);this.currentPage<a.totalPages&&(a.next=this.currentPage+1);a.hasNext=a.next;a.hasPrevious=
a.next;a.pageSet=this.setPagination(a);return this.information=a},setPagination:function(a){var c=[],d=2*this.pagesInRange,e=Math.ceil(a.totalRecords/a.perPage);if(1<e)if(e<=1+d){var h=1;for(a=e;h<=a;h++)c.push(h)}else if(a.currentPage<=this.pagesInRange+1)for(h=1,a=2+d;h<a;h++)c.push(h);else if(e-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(h=a.currentPage-this.pagesInRange;h<=a.currentPage+this.pagesInRange;h++)c.push(h);else for(h=e-d;h<=e;h++)c.push(h);return c},pager:function(a){c.isObject(a)||
(a={});return this.fetch(a)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(a){c.extend(this,a);this.setDefaults();this.info();return this}});d.requestPager.prototype.nextPage=d.requestPager.prototype.requestNextPage;d.requestPager.prototype.prevPage=d.requestPager.prototype.requestPreviousPage;return d}(Backbone,_,jQuery);
var tabbable=function(a,c){function c(a,c){c=c||{};var e=[],k=[],q=new l(a.ownerDocument||a),t=a.querySelectorAll(m);c.includeContainer&&n.call(a,m)&&(t=Array.prototype.slice.apply(t),t.unshift(a));for(a=0;a<t.length;a++)if(c=t[a],f(c,q)){var u=d(c);0===u?e.push(c):k.push({documentOrder:a,tabIndex:u,node:c})}return k.sort(h).map(function(a){return a.node}).concat(e)}function f(a,c){if(!(c=!e(a,c))&&(c="INPUT"===a.tagName&&"radio"===a.type)){if(a.name){c=a.ownerDocument.querySelectorAll('input[type="radio"][name="'+
a.name+'"]');b:{for(var h=0;h<c.length;h++)if(c[h].checked){c=c[h];break b}c=void 0}c=!c||c===a}else c=!0;c=!c}return c||0>d(a)?!1:!0}function e(a,c){c=c||new l(a.ownerDocument||a);var d;(d=a.disabled)||(d="INPUT"===a.tagName&&"hidden"===a.type);return d||c.isUntouchable(a)?!1:!0}function d(a){var c=parseInt(a.getAttribute("tabindex"),10);return isNaN(c)?"true"===a.contentEditable?0:a.tabIndex:c}function h(a,c){return a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex}function k(a,
c){for(var d=0,e=a.length;d<e;d++)if(c(a[d]))return a[d]}function l(a){this.doc=a;this.cache=[]}a='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable="false"])'.split(" ");var m=a.join(","),n="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;c.isTabbable=function(a,c){if(!a)throw Error("No node provided");return!1===n.call(a,m)?!1:f(a,
c)};c.isFocusable=function(a,c){if(!a)throw Error("No node provided");return!1===n.call(a,q)?!1:e(a,c)};var q=a.concat("iframe").join(",");l.prototype.hasDisplayNone=function(a,c){if(a===this.doc.documentElement)return!1;var d=k(this.cache,function(c){return c===a});if(d)return d[1];c=c||this.doc.defaultView.getComputedStyle(a);d=!1;"none"===c.display?d=!0:a.parentNode&&(d=this.hasDisplayNone(a.parentNode));this.cache.push([a,d]);return d};l.prototype.isUntouchable=function(a){if(a===this.doc.documentElement)return!1;
var c=this.doc.defaultView.getComputedStyle(a);return this.hasDisplayNone(a,c)?!0:"hidden"===c.visibility};return c}(),focusTrap=function(a,c,f){var e=null;return function(d,h){function k(a){if(D.active){m();D.active=!1;D.paused=!1;var c=a&&void 0!==a.onDeactivate?a.onDeactivate:C.onDeactivate;c&&c();(a&&void 0!==a.returnFocus?a.returnFocus:C.returnFocusOnDeactivate)&&setTimeout(function(){z(D.nodeFocusedBeforeActivation)},0);return O}}function l(){if(D.active)return e&&e.pause(),e=O,w(),setTimeout(function(){z(q())},
0),u.addEventListener("focusin",y,!0),u.addEventListener("mousedown",t,!0),u.addEventListener("touchstart",t,!0),u.addEventListener("click",x,!0),u.addEventListener("keydown",v,!0),O}function m(){if(D.active&&e===O)return u.removeEventListener("focusin",y,!0),u.removeEventListener("mousedown",t,!0),u.removeEventListener("touchstart",t,!0),u.removeEventListener("click",x,!0),u.removeEventListener("keydown",v,!0),e=null,O}function n(a){var c=C[a],d=c;if(!c)return null;if("string"===typeof c&&(d=u.querySelector(c),
!d))throw Error("`"+a+"` refers to no known node");if("function"===typeof c&&(d=c(),!d))throw Error("`"+a+"` did not return a node");return d}function q(){var a=null!==n("initialFocus")?n("initialFocus"):A.contains(u.activeElement)?u.activeElement:D.firstTabbableNode||n("fallbackFocus");if(!a)throw Error("You can't have a focus-trap without at least one focusable element");return a}function t(a){A.contains(a.target)||(C.clickOutsideDeactivates?k({returnFocus:!f.isFocusable(a.target)}):a.preventDefault())}
function y(a){A.contains(a.target)||a.target instanceof Document||(a.stopImmediatePropagation(),z(D.mostRecentlyFocusedNode||q()))}function v(a){if(!1!==C.escapeDeactivates&&("Escape"===a.key||"Esc"===a.key||27===a.keyCode))a.preventDefault(),k(),c(A).trigger("focus_trap:escape");else if("Tab"===a.key||9===a.keyCode)w(),a.shiftKey&&a.target===D.firstTabbableNode?(a.preventDefault(),z(D.lastTabbableNode)):a.shiftKey||a.target!==D.lastTabbableNode||(a.preventDefault(),z(D.firstTabbableNode))}function x(a){C.clickOutsideDeactivates||
A.contains(a.target)||(a.preventDefault(),a.stopImmediatePropagation())}function w(){var a=f(A);D.firstTabbableNode=a[0]||q();D.lastTabbableNode=a[a.length-1]||q()}function z(a){a!==u.activeElement&&(a&&a.focus?(a.focus(),D.mostRecentlyFocusedNode=a,a.tagName&&"input"===a.tagName.toLowerCase()&&"function"===typeof a.select&&a.select()):z(q()))}var u=document,A="string"===typeof d?u.querySelector(d):d,C=a.extend({returnFocusOnDeactivate:!0,escapeDeactivates:!0},h),D={firstTabbableNode:null,lastTabbableNode:null,
nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},O={activate:function(a){if(!D.active)return w(),D.active=!0,D.paused=!1,D.nodeFocusedBeforeActivation=u.activeElement,(a=a&&a.onActivate?a.onActivate:C.onActivate)&&a(),l(),O},deactivate:k,pause:function(){!D.paused&&D.active&&(D.paused=!0,m())},unpause:function(){D.paused&&D.active&&(D.paused=!1,l())}};return O}}(_,jQuery,tabbable);
!function(a,c){"object"==typeof exports&&"object"==typeof module?module.exports=c():"function"==typeof define&&define.amd?define("Litepicker",[],c):"object"==typeof exports?exports.Litepicker=c():a.Litepicker=c()}(window,function(){return function(a){function c(e){if(f[e])return f[e].exports;var d=f[e]={i:e,l:!1,exports:{}};return a[e].call(d.exports,d,d.exports,c),d.l=!0,d.exports}var f={};return c.m=a,c.c=f,c.d=function(a,d,h){c.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},c.r=function(a){$jscomp.initSymbol();
$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var f in a)c.d(e,f,function(c){return a[c]}.bind(null,f));return e},c.n=function(a){var d=
a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(d,"a",d),d},c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},c.p="",c(c.s=4)}([function(a,c,f){Object.defineProperty(c,"__esModule",{value:!0});a=function(){function a(c,e,f){void 0===c&&(c=null);void 0===e&&(e=null);void 0===f&&(f="en-US");this.dateInstance=e?a.parseDateTime(c,e,f):c?a.parseDateTime(c):a.parseDateTime(new Date);this.lang=f}return a.parseDateTime=function(c,e,f){if(void 0===e&&(e="YYYY-MM-DD"),
void 0===f&&(f="en-US"),!c)return new Date(NaN);if(c instanceof Date)return new Date(c);if(c instanceof a)return c.clone().getDateInstance();if(/^-?\d{10,}$/.test(c))return a.getDateZeroTime(new Date(Number(c)));if("string"==typeof c){for(var d=[],h;null!=(h=a.regex.exec(e));)"\\"!==h[1]&&d.push(h);if(d.length){e={year:null,month:null,shortMonth:null,longMonth:null,day:null,value:""};0<d[0].index&&(e.value+=".*?");h=0;for(d=Object.entries(d);h<d.length;h++){var k=d[h],q=Number(k[0]);k=a.formatPatterns(k[1][0],
f);var t=k.pattern;e[k.group]=q+1;e.value+=t;e.value+=".*?"}h=new RegExp("^"+e.value+"$");if(h.test(c))return c=h.exec(c),h=Number(c[e.year]),d=null,e.month?d=Number(c[e.month])-1:e.shortMonth?d=a.shortMonths(f).indexOf(c[e.shortMonth]):e.longMonth&&(d=a.longMonths(f).indexOf(c[e.longMonth])),new Date(h,d,Number(c[e.day])||1,0,0,0,0)}}return a.getDateZeroTime(new Date(c))},a.convertArray=function(c,e){return c.map(function(c){return c instanceof Array?c.map(function(c){return new a(c,e)}):new a(c,
e)})},a.getDateZeroTime=function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)},a.shortMonths=function(c){return a.MONTH_JS.map(function(a){return(new Date(2019,a)).toLocaleString(c,{month:"short"})})},a.longMonths=function(c){return a.MONTH_JS.map(function(a){return(new Date(2019,a)).toLocaleString(c,{month:"long"})})},a.formatPatterns=function(c,e){switch(c){case "YY":case "YYYY":return{group:"year",pattern:"(\\d{"+c.length+"})"};case "M":return{group:"month",pattern:"(\\d{1,2})"};
case "MM":return{group:"month",pattern:"(\\d{2})"};case "MMM":return{group:"shortMonth",pattern:"("+a.shortMonths(e).join("|")+")"};case "MMMM":return{group:"longMonth",pattern:"("+a.longMonths(e).join("|")+")"};case "D":return{group:"day",pattern:"(\\d{1,2})"};case "DD":return{group:"day",pattern:"(\\d{2})"}}},a.prototype.getDateInstance=function(){return this.dateInstance},a.prototype.toLocaleString=function(a,c){return this.dateInstance.toLocaleString(a,c)},a.prototype.toDateString=function(){return this.dateInstance.toDateString()},
a.prototype.getSeconds=function(){return this.dateInstance.getSeconds()},a.prototype.getDay=function(){return this.dateInstance.getDay()},a.prototype.getTime=function(){return this.dateInstance.getTime()},a.prototype.getDate=function(){return this.dateInstance.getDate()},a.prototype.getMonth=function(){return this.dateInstance.getMonth()},a.prototype.getFullYear=function(){return this.dateInstance.getFullYear()},a.prototype.setMonth=function(a){return this.dateInstance.setMonth(a)},a.prototype.setHours=
function(a,c,e,f){void 0===a&&(a=0);void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=0);this.dateInstance.setHours(a,c,e,f)},a.prototype.setSeconds=function(a){return this.dateInstance.setSeconds(a)},a.prototype.setDate=function(a){return this.dateInstance.setDate(a)},a.prototype.setFullYear=function(a){return this.dateInstance.setFullYear(a)},a.prototype.getWeek=function(a){var c=new Date(this.timestamp()),d=(this.getDay()+(7-a))%7;c.setDate(c.getDate()-d);d=c.getTime();return c.setMonth(0,1),
c.getDay()!==a&&c.setMonth(0,1+(4-c.getDay()+7)%7),1+Math.ceil((d-c.getTime())/6048E5)},a.prototype.clone=function(){return new a(this.getDateInstance())},a.prototype.isBetween=function(a,c,e){switch(void 0===e&&(e="()"),e){default:case "()":return this.timestamp()>a.getTime()&&this.timestamp()<c.getTime();case "[)":return this.timestamp()>=a.getTime()&&this.timestamp()<c.getTime();case "(]":return this.timestamp()>a.getTime()&&this.timestamp()<=c.getTime();case "[]":return this.timestamp()>=a.getTime()&&
this.timestamp()<=c.getTime()}},a.prototype.isBefore=function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":return a.getTime()>this.getTime();case "day":case "days":return(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()>(new Date(this.getFullYear(),this.getMonth(),this.getDate())).getTime();case "month":case "months":return(new Date(a.getFullYear(),a.getMonth(),1)).getTime()>(new Date(this.getFullYear(),this.getMonth(),1)).getTime();case "year":case "years":return a.getFullYear()>
this.getFullYear()}throw Error("isBefore: Invalid unit!");},a.prototype.isSameOrBefore=function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":return a.getTime()>=this.getTime();case "day":case "days":return(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()>=(new Date(this.getFullYear(),this.getMonth(),this.getDate())).getTime();case "month":case "months":return(new Date(a.getFullYear(),a.getMonth(),1)).getTime()>=(new Date(this.getFullYear(),this.getMonth(),1)).getTime()}throw Error("isSameOrBefore: Invalid unit!");
},a.prototype.isAfter=function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":return this.getTime()>a.getTime();case "day":case "days":return(new Date(this.getFullYear(),this.getMonth(),this.getDate())).getTime()>(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime();case "month":case "months":return(new Date(this.getFullYear(),this.getMonth(),1)).getTime()>(new Date(a.getFullYear(),a.getMonth(),1)).getTime();case "year":case "years":return this.getFullYear()>a.getFullYear()}throw Error("isAfter: Invalid unit!");
},a.prototype.isSameOrAfter=function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":return this.getTime()>=a.getTime();case "day":case "days":return(new Date(this.getFullYear(),this.getMonth(),this.getDate())).getTime()>=(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime();case "month":case "months":return(new Date(this.getFullYear(),this.getMonth(),1)).getTime()>=(new Date(a.getFullYear(),a.getMonth(),1)).getTime()}throw Error("isSameOrAfter: Invalid unit!");},a.prototype.isSame=
function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":return this.getTime()===a.getTime();case "day":case "days":return(new Date(this.getFullYear(),this.getMonth(),this.getDate())).getTime()===(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime();case "month":case "months":return(new Date(this.getFullYear(),this.getMonth(),1)).getTime()===(new Date(a.getFullYear(),a.getMonth(),1)).getTime()}throw Error("isSame: Invalid unit!");},a.prototype.add=function(a,c){switch(void 0===
c&&(c="seconds"),c){case "second":case "seconds":this.setSeconds(this.getSeconds()+a);break;case "day":case "days":this.setDate(this.getDate()+a);break;case "month":case "months":this.setMonth(this.getMonth()+a)}return this},a.prototype.subtract=function(a,c){switch(void 0===c&&(c="seconds"),c){case "second":case "seconds":this.setSeconds(this.getSeconds()-a);break;case "day":case "days":this.setDate(this.getDate()-a);break;case "month":case "months":this.setMonth(this.getMonth()-a)}return this},
a.prototype.diff=function(a,c){void 0===c&&(c="seconds");switch(c){default:case "second":case "seconds":return this.getTime()-a.getTime();case "day":case "days":return Math.round((this.timestamp()-a.getTime())/864E5);case "month":case "months":}},a.prototype.format=function(c,e){void 0===e&&(e="en-US");for(var d="",h=[],f;null!=(f=a.regex.exec(c));)"\\"!==f[1]&&h.push(f);if(h.length){0<h[0].index&&(d+=c.substring(0,h[0].index));f=0;for(var n=Object.entries(h);f<n.length;f++){var q=n[f],t=q[1];q=Number(q[0]);
d+=this.formatTokens(t[0],e);h[q+1]&&(d+=c.substring(t.index+t[0].length,h[q+1].index));q===h.length-1&&(d+=c.substring(t.index+t[0].length))}}return d.replace(/\\/g,"")},a.prototype.timestamp=function(){return(new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0)).getTime()},a.prototype.formatTokens=function(c,e){switch(c){case "YY":return String(this.getFullYear()).slice(-2);case "YYYY":return String(this.getFullYear());case "M":return String(this.getMonth()+1);case "MM":return("0"+
(this.getMonth()+1)).slice(-2);case "MMM":return a.shortMonths(e)[this.getMonth()];case "MMMM":return a.longMonths(e)[this.getMonth()];case "D":return String(this.getDate());case "DD":return("0"+this.getDate()).slice(-2);default:return""}},a.regex=/(\\)?(Y{2,4}|M{1,4}|D{1,2}|d{1,4})/g,a.MONTH_JS=[0,1,2,3,4,5,6,7,8,9,10,11],a}();c.DateTime=a},function(a,c,f){c=f(6);"string"==typeof c&&(c=[[a.i,c,""]]);f(8)(c,{insert:function(a){var c=document.querySelector("head"),e=window._lastElementInsertedByStyleLoader;
window.disableLitepickerStyles||(e?e.nextSibling?c.insertBefore(a,e.nextSibling):c.appendChild(a):c.insertBefore(a,c.firstChild),window._lastElementInsertedByStyleLoader=a)},singleton:!1});c.locals&&(a.exports=c.locals)},function(a,c,f){function e(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}Object.defineProperty(c,"__esModule",{value:!0});c.isMobile=function(){var a="portrait"===e();return window.matchMedia("(max-device-"+(a?"width":"height")+": 480px)").matches};
c.getOrientation=e;c.findNestedMonthItem=function(a){for(var c=a.parentNode.childNodes,d=0;d<c.length;d+=1)if(c.item(d)===a)return d;return 0}},function(a,c,f){var e,d=this&&this.__extends||(e=function(a,c){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])})(a,c)},function(a,c){function d(){this.constructor=a}e(a,c);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}),h=this&&
this.__assign||function(){return(h=Object.assign||function(a){for(var c,d=1,e=arguments.length;d<e;d++)for(var h in c=arguments[d])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};a=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c.default=a,c};Object.defineProperty(c,"__esModule",{value:!0});var k=f(5),l=f(0),m=a(f(1)),n=f(2);f=function(a){function c(c){var d=
a.call(this)||this;d.options=h(h({},d.options),c.element.dataset);Object.keys(d.options).forEach(function(a){"true"!==d.options[a]&&"false"!==d.options[a]||(d.options[a]="true"===d.options[a])});var e=h(h({},d.options.dropdowns),c.dropdowns),f=h(h({},d.options.buttonText),c.buttonText),k=h(h({},d.options.tooltipText),c.tooltipText);d.options=h(h({},d.options),c);d.options.dropdowns=h({},e);d.options.buttonText=h({},f);d.options.tooltipText=h({},k);d.options.elementEnd||(d.options.allowRepick=!1);
d.options.lockDays.length&&(d.options.lockDays=l.DateTime.convertArray(d.options.lockDays,d.options.lockDaysFormat));d.options.bookedDays.length&&(d.options.bookedDays=l.DateTime.convertArray(d.options.bookedDays,d.options.bookedDaysFormat));d.options.highlightedDays.length&&(d.options.highlightedDays=l.DateTime.convertArray(d.options.highlightedDays,d.options.highlightedDaysFormat));!d.options.hotelMode||"bookedDaysInclusivity"in c||(d.options.bookedDaysInclusivity="[)");!d.options.hotelMode||"disallowBookedDaysInRange"in
c||(d.options.disallowBookedDaysInRange=!0);!d.options.hotelMode||"selectForward"in c||(d.options.selectForward=!0);e=d.parseInput();c=e[0];e=e[1];d.options.startDate&&(d.options.singleMode||d.options.endDate)&&(c=new l.DateTime(d.options.startDate,d.options.format,d.options.lang));c&&d.options.endDate&&(e=new l.DateTime(d.options.endDate,d.options.format,d.options.lang));c instanceof l.DateTime&&!isNaN(c.getTime())&&(d.options.startDate=c);d.options.startDate&&e instanceof l.DateTime&&!isNaN(e.getTime())&&
(d.options.endDate=e);!d.options.singleMode||d.options.startDate instanceof l.DateTime||(d.options.startDate=null);d.options.singleMode||d.options.startDate instanceof l.DateTime&&d.options.endDate instanceof l.DateTime||(d.options.startDate=null,d.options.endDate=null);for(c=0;c<d.options.numberOfMonths;c+=1)e=d.options.startDate instanceof l.DateTime?d.options.startDate.clone():new l.DateTime,e.setDate(1),e.setMonth(e.getMonth()+c),d.calendars[c]=e;if(d.options.showTooltip)if(d.options.tooltipPluralSelector)d.pluralSelector=
d.options.tooltipPluralSelector;else try{var m=new Intl.PluralRules(d.options.lang);d.pluralSelector=m.select.bind(m)}catch(A){d.pluralSelector=function(a){return 0===Math.abs(a)?"one":"other"}}return d.loadPolyfillsForIE11(),d.onInit(),d}return d(c,a),c.prototype.onInit=function(){var a=this;if(document.addEventListener("click",function(c){return a.onClick(c)},!0),this.picker=document.createElement("div"),this.picker.className=m.litepicker,this.picker.style.display="none",this.picker.addEventListener("mouseenter",
function(c){return a.onMouseEnter(c)},!0),this.picker.addEventListener("mouseleave",function(c){return a.onMouseLeave(c)},!1),this.options.autoRefresh?(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("keyup",function(c){return a.onInput(c)},!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("keyup",function(c){return a.onInput(c)},!0)):(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("change",
function(c){return a.onInput(c)},!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("change",function(c){return a.onInput(c)},!0)),this.options.moduleNavKeyboard){if("function"!=typeof this.enableModuleNavKeyboard)throw Error("moduleNavKeyboard is on but library does not included. See https://github.com/wakirin/litepicker-module-navkeyboard.");this.enableModuleNavKeyboard.call(this,this)}this.render();this.options.parentEl?this.options.parentEl instanceof
HTMLElement?this.options.parentEl.appendChild(this.picker):document.querySelector(this.options.parentEl).appendChild(this.picker):this.options.inlineMode?this.options.element instanceof HTMLInputElement?this.options.element.parentNode.appendChild(this.picker):this.options.element.appendChild(this.picker):document.body.appendChild(this.picker);this.options.mobileFriendly&&(this.backdrop=document.createElement("div"),this.backdrop.className=m.litepickerBackdrop,this.backdrop.addEventListener("click",
this.hide()),this.options.element&&this.options.element.parentNode&&this.options.element.parentNode.appendChild(this.backdrop),window.addEventListener("orientationchange",function(c){var d=function(){if(n.isMobile()&&a.isShowning()){switch(n.getOrientation()){case "landscape":a.options.numberOfMonths=2;a.options.numberOfColumns=2;break;default:a.options.numberOfMonths=1,a.options.numberOfColumns=1}if(a.render(),!a.options.inlineMode){var c=a.picker.getBoundingClientRect();a.picker.style.top="calc(50% - "+
c.height/2+"px)";a.picker.style.left="calc(50% - "+c.width/2+"px)"}}window.removeEventListener("resize",d)};window.addEventListener("resize",d)}));this.options.inlineMode&&(this.show(),this.options.mobileFriendly&&n.isMobile()&&(window.dispatchEvent(new Event("orientationchange")),window.dispatchEvent(new Event("resize"))));this.updateInput()},c.prototype.parseInput=function(){var a=this.options.delimiter,c=new RegExp(""+a),d=this.options.element instanceof HTMLInputElement?this.options.element.value.split(a):
[];if(this.options.elementEnd){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length)return[new l.DateTime(this.options.element.value,this.options.format),new l.DateTime(this.options.elementEnd.value,this.options.format)]}else if(this.options.singleMode){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length)return[new l.DateTime(this.options.element.value,
this.options.format)]}else if(this.options.element instanceof HTMLInputElement&&c.test(this.options.element.value)&&d.length&&0==d.length%2)return c=d.slice(0,d.length/2).join(a),a=d.slice(d.length/2).join(a),[new l.DateTime(c,this.options.format),new l.DateTime(a,this.options.format)];return[]},c.prototype.updateInput=function(){if(this.options.element instanceof HTMLInputElement){if(this.options.singleMode&&this.options.startDate)this.options.element.value=this.options.startDate.format(this.options.format,
this.options.lang);else if(!this.options.singleMode&&this.options.startDate&&this.options.endDate){var a=this.options.startDate.format(this.options.format,this.options.lang),c=this.options.endDate.format(this.options.format,this.options.lang);this.options.elementEnd?(this.options.element.value=a,this.options.elementEnd.value=c):this.options.element.value=""+a+this.options.delimiter+c}this.options.startDate||this.options.endDate||(this.options.element.value="",this.options.elementEnd&&(this.options.elementEnd.value=
""))}},c.prototype.isSamePicker=function(a){return a.closest("."+m.litepicker)===this.picker},c.prototype.shouldShown=function(a){return a===this.options.element||this.options.elementEnd&&a===this.options.elementEnd},c.prototype.shouldResetDatePicked=function(){return this.options.singleMode||2===this.datePicked.length},c.prototype.shouldSwapDatePicked=function(){return 2===this.datePicked.length&&this.datePicked[0].getTime()>this.datePicked[1].getTime()},c.prototype.shouldCheckLockDays=function(){return this.options.disallowLockDaysInRange&&
this.options.lockDays.length&&2===this.datePicked.length},c.prototype.shouldCheckBookedDays=function(){return this.options.disallowBookedDaysInRange&&this.options.bookedDays.length&&2===this.datePicked.length},c.prototype.onClick=function(a){var c=this,d=a.target;if(d&&this.picker)if(this.shouldShown(d))this.show(d);else if(d.closest("."+m.litepicker)){if(d.classList.contains(m.dayItem)){if((a.preventDefault(),!this.isSamePicker(d))||d.classList.contains(m.isLocked)||d.classList.contains(m.isBooked))return;
if(this.shouldResetDatePicked()&&(this.datePicked.length=0),this.datePicked[this.datePicked.length]=new l.DateTime(d.dataset.time),this.shouldSwapDatePicked())d=this.datePicked[1].clone(),this.datePicked[1]=this.datePicked[0].clone(),this.datePicked[0]=d.clone();if(this.shouldCheckLockDays()){var e=this.options.lockDaysInclusivity;this.options.lockDays.filter(function(a){return a instanceof Array?a[0].isBetween(c.datePicked[0],c.datePicked[1],e)||a[1].isBetween(c.datePicked[0],c.datePicked[1],e):
a.isBetween(c.datePicked[0],c.datePicked[1],e)}).length&&(this.datePicked.length=0,"function"==typeof this.options.onError&&this.options.onError.call(this,"INVALID_RANGE"))}if(this.shouldCheckBookedDays()){var h=this.options.bookedDaysInclusivity;this.options.hotelMode&&2===this.datePicked.length&&(h="()");d=this.options.bookedDays.filter(function(a){return a instanceof Array?a[0].isBetween(c.datePicked[0],c.datePicked[1],h)||a[1].isBetween(c.datePicked[0],c.datePicked[1],h):a.isBetween(c.datePicked[0],
c.datePicked[1])}).length;a=this.options.anyBookedDaysAsCheckout&&1===this.datePicked.length;d&&!a&&(this.datePicked.length=0,"function"==typeof this.options.onError&&this.options.onError.call(this,"INVALID_RANGE"))}return this.render(),void(this.options.autoApply&&(this.options.singleMode&&this.datePicked.length?(this.setDate(this.datePicked[0]),this.hide()):this.options.singleMode||2!==this.datePicked.length||(this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide())))}if(d.classList.contains(m.buttonPreviousMonth)){if(a.preventDefault(),
!this.isSamePicker(d))return;a=0;var f=this.options.moveByOneMonth?1:this.options.numberOfMonths;this.options.splitView&&(d=d.closest("."+m.monthItem),a=n.findNestedMonthItem(d),f=1);return this.calendars[a].setMonth(this.calendars[a].getMonth()-f),this.gotoDate(this.calendars[a],a),void("function"==typeof this.options.onChangeMonth&&this.options.onChangeMonth.call(this,this.calendars[a],a))}if(d.classList.contains(m.buttonNextMonth)){if(a.preventDefault(),!this.isSamePicker(d))return;a=0;f=this.options.moveByOneMonth?
1:this.options.numberOfMonths;this.options.splitView&&(d=d.closest("."+m.monthItem),a=n.findNestedMonthItem(d),f=1);return this.calendars[a].setMonth(this.calendars[a].getMonth()+f),this.gotoDate(this.calendars[a],a),void("function"==typeof this.options.onChangeMonth&&this.options.onChangeMonth.call(this,this.calendars[a],a))}if(d.classList.contains(m.buttonCancel)){if(a.preventDefault(),!this.isSamePicker(d))return;this.hide()}d.classList.contains(m.buttonApply)&&(a.preventDefault(),this.isSamePicker(d))&&
(this.options.singleMode&&this.datePicked.length?this.setDate(this.datePicked[0]):this.options.singleMode||2!==this.datePicked.length||this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide())}else this.hide()},c.prototype.showTooltip=function(a,c){var d=this.picker.querySelector("."+m.containerTooltip);d.style.visibility="visible";d.innerHTML=c;var e=this.picker.getBoundingClientRect();c=d.getBoundingClientRect();var h=a.getBoundingClientRect(),f=h.top,k=h.left;this.options.inlineMode&&
this.options.parentEl?(e=this.picker.parentNode.getBoundingClientRect(),f-=e.top,k-=e.left):(f-=e.top,k-=e.left);f-=c.height;k-=c.width/2;k+=h.width/2;d.style.top=f+"px";d.style.left=k+"px";"function"==typeof this.options.onShowTooltip&&this.options.onShowTooltip.call(this,d,a)},c.prototype.hideTooltip=function(){this.picker.querySelector("."+m.containerTooltip).style.visibility="hidden"},c.prototype.shouldAllowMouseEnter=function(a){return!this.options.singleMode&&!a.classList.contains(m.isLocked)&&
!a.classList.contains(m.isBooked)},c.prototype.shouldAllowRepick=function(){return this.options.elementEnd&&this.options.allowRepick&&this.options.startDate&&this.options.endDate},c.prototype.isDayItem=function(a){return a.classList.contains(m.dayItem)},c.prototype.onMouseEnter=function(a){var c=this;a=a.target;if(this.isDayItem(a)&&("function"==typeof this.options.onDayHover&&this.options.onDayHover.call(this,l.DateTime.parseDateTime(a.dataset.time),a.classList.toString().split(/\s/),a),this.shouldAllowMouseEnter(a))&&
(this.shouldAllowRepick()&&(this.triggerElement===this.options.element?this.datePicked[0]=this.options.endDate.clone():this.triggerElement===this.options.elementEnd&&(this.datePicked[0]=this.options.startDate.clone())),1===this.datePicked.length)){var d=this.picker.querySelector("."+m.dayItem+'[data-time="'+this.datePicked[0].getTime()+'"]'),e=this.datePicked[0].clone(),h=new l.DateTime(a.dataset.time),f=!1;e.getTime()>h.getTime()&&(f=e.clone(),e=h.clone(),h=f.clone(),f=!0);if(Array.prototype.slice.call(this.picker.querySelectorAll("."+
m.dayItem)).forEach(function(a){var d=new l.DateTime(a.dataset.time),f=c.renderDay(d);d.isBetween(e,h)&&f.classList.add(m.isInRange);a.className=f.className}),a.classList.add(m.isEndDate),f?(d&&d.classList.add(m.isFlipped),a.classList.add(m.isFlipped)):(d&&d.classList.remove(m.isFlipped),a.classList.remove(m.isFlipped)),this.options.showTooltip)d=h.diff(e,"day"),(this.options.hotelMode||(d+=1),0<d)?(f=this.pluralSelector(d),this.showTooltip(a,d+" "+(this.options.tooltipText[f]?this.options.tooltipText[f]:
"["+f+"]"))):this.hideTooltip()}},c.prototype.onMouseLeave=function(a){a.target;this.options.allowRepick&&(!this.options.allowRepick||this.options.startDate||this.options.endDate)&&(this.datePicked.length=0,this.render())},c.prototype.onInput=function(a){var c=this.parseInput(),d=c[0];c=c[1];var e=this.options.format;if(this.options.elementEnd?d instanceof l.DateTime&&c instanceof l.DateTime&&d.format(e)===this.options.element.value&&c.format(e)===this.options.elementEnd.value:this.options.singleMode?
d instanceof l.DateTime&&d.format(e)===this.options.element.value:d instanceof l.DateTime&&c instanceof l.DateTime&&""+d.format(e)+this.options.delimiter+c.format(e)===this.options.element.value){if(c&&d.getTime()>c.getTime()){var h=d.clone();d=c.clone();c=h.clone()}this.options.startDate=new l.DateTime(d,this.options.format,this.options.lang);c&&(this.options.endDate=new l.DateTime(c,this.options.format,this.options.lang));this.updateInput();this.render();h=d.clone();var f=0;(this.options.elementEnd?
d.format(e)===a.target.value:a.target.value.startsWith(d.format(e)))||(h=c.clone(),f=this.options.numberOfMonths-1);"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.getStartDate(),this.getEndDate());this.gotoDate(h,f)}},c.prototype.isShowning=function(){return this.picker&&"none"!==this.picker.style.display},c.prototype.loadPolyfillsForIE11=function(){Object.entries||(Object.entries=function(a){for(var c=Object.keys(a),d=c.length,e=Array(d);d;)e[--d]=[c[d],a[c[d]]];return e});
Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(a){var c=this;do{if(c.matches(a))return c;c=c.parentElement||c.parentNode}while(null!==c&&1===c.nodeType);return null})},c}(k.Calendar);c.Litepicker=f},function(a,c,f){Object.defineProperty(c,"__esModule",{value:!0});a=f(3);c.Litepicker=a.Litepicker;f(9);f(10);window.Litepicker=a.Litepicker;c.default=a.Litepicker},
function(a,c,f){a=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c.default=a,c};Object.defineProperty(c,"__esModule",{value:!0});var e=f(0),d=a(f(1)),h=f(2);f=function(){function a(){this.options={element:null,elementEnd:null,parentEl:null,firstDay:1,format:"YYYY-MM-DD",lang:"en-US",delimiter:" - ",numberOfMonths:1,numberOfColumns:1,startDate:null,endDate:null,zIndex:9999,minDate:null,maxDate:null,
minDays:null,maxDays:null,selectForward:!1,selectBackward:!1,splitView:!1,inlineMode:!1,singleMode:!0,autoApply:!0,allowRepick:!1,showWeekNumbers:!1,showTooltip:!0,hotelMode:!1,disableWeekends:!1,scrollToDate:!0,mobileFriendly:!0,useResetBtn:!1,autoRefresh:!1,moveByOneMonth:!1,lockDaysFormat:"YYYY-MM-DD",lockDays:[],disallowLockDaysInRange:!1,lockDaysInclusivity:"[]",bookedDaysFormat:"YYYY-MM-DD",bookedDays:[],disallowBookedDaysInRange:!1,bookedDaysInclusivity:"[]",anyBookedDaysAsCheckout:!1,highlightedDaysFormat:"YYYY-MM-DD",
highlightedDays:[],dropdowns:{minYear:1990,maxYear:null,months:!1,years:!1},buttonText:{apply:"Apply",cancel:"Cancel",previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',reset:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n        <path d="M0 0h24v24H0z" fill="none"/>\n        <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\n      </svg>'},
tooltipText:{one:"day",other:"days"},tooltipPluralSelector:null,onShow:null,onHide:null,onSelect:null,onError:null,onRender:null,onRenderDay:null,onChangeMonth:null,onChangeYear:null,onDayHover:null,onShowTooltip:null,resetBtnCallback:null,moduleRanges:null,moduleNavKeyboard:null};this.calendars=[];this.datePicked=[]}return a.prototype.render=function(){var a=this,c=document.createElement("div");c.className=d.containerMain;var e=document.createElement("div");e.className=d.containerMonths;d["columns"+
this.options.numberOfColumns]&&(e.classList.remove(d.columns2,d.columns3,d.columns4),e.classList.add(d["columns"+this.options.numberOfColumns]));this.options.splitView&&e.classList.add(d.splitView);this.options.showWeekNumbers&&e.classList.add(d.showWeekNumbers);for(var h=this.calendars[0].clone(),f=h.getMonth(),k=h.getMonth()+this.options.numberOfMonths,v=0;f<k;f+=1){var x=h.clone();x.setDate(1);this.options.splitView?x=this.calendars[v].clone():x.setMonth(f);e.appendChild(this.renderMonth(x));v+=
1}if(this.picker.innerHTML="",c.appendChild(e),this.options.useResetBtn)e=document.createElement("a"),e.href="#",e.className=d.resetButton,e.innerHTML=this.options.buttonText.reset,e.addEventListener("click",function(c){c.preventDefault();a.clearSelection();"function"==typeof a.options.resetBtnCallback&&a.options.resetBtnCallback.call(a)}),c.querySelector("."+d.monthItem+":last-child").querySelector("."+d.monthItemHeader).appendChild(e);if(this.picker.appendChild(c),this.options.autoApply&&!this.options.footerHTML||
this.picker.appendChild(this.renderFooter()),this.options.showTooltip&&this.picker.appendChild(this.renderTooltip()),this.options.moduleRanges){if("function"!=typeof this.enableModuleRanges)throw Error("moduleRanges is on but library does not included. See https://github.com/wakirin/litepicker-module-ranges.");this.enableModuleRanges.call(this,this)}"function"==typeof this.options.onRender&&this.options.onRender.call(this,this.picker)},a.prototype.renderMonth=function(a){var c=this,f=a.clone(),k=
32-(new Date(f.getFullYear(),f.getMonth(),32)).getDate(),l=document.createElement("div");l.className=d.monthItem;var y=document.createElement("div");y.className=d.monthItemHeader;var v=document.createElement("div");if(this.options.dropdowns.months){var x=document.createElement("select");x.className=d.monthItemName;for(var w=0;12>w;w+=1){var z=document.createElement("option"),u=new e.DateTime(new Date(a.getFullYear(),w,1,0,0,0));z.value=String(w);z.text=u.toLocaleString(this.options.lang,{month:"long"});
z.disabled=this.options.minDate&&u.isBefore(new e.DateTime(this.options.minDate),"month")||this.options.maxDate&&u.isAfter(new e.DateTime(this.options.maxDate),"month");z.selected=u.getMonth()===a.getMonth();x.appendChild(z)}x.addEventListener("change",function(a){a=a.target;var e=0;c.options.splitView&&(e=a.closest("."+d.monthItem),e=h.findNestedMonthItem(e));c.calendars[e].setMonth(Number(a.value));c.render();"function"==typeof c.options.onChangeMonth&&c.options.onChangeMonth.call(c,c.calendars[e],
e)});v.appendChild(x)}else z=document.createElement("strong"),z.className=d.monthItemName,z.innerHTML=a.toLocaleString(this.options.lang,{month:"long"}),v.appendChild(z);if(this.options.dropdowns.years){var A=document.createElement("select");A.className=d.monthItemYear;x=this.options.dropdowns.minYear;w=this.options.dropdowns.maxYear?this.options.dropdowns.maxYear:(new Date).getFullYear();a.getFullYear()>w&&((z=document.createElement("option")).value=String(a.getFullYear()),z.text=String(a.getFullYear()),
z.selected=!0,z.disabled=!0,A.appendChild(z));for(;w>=x;--w)z=document.createElement("option"),u=new e.DateTime(new Date(w,0,1,0,0,0)),z.value=w,z.text=w,z.disabled=this.options.minDate&&u.isBefore(new e.DateTime(this.options.minDate),"year")||this.options.maxDate&&u.isAfter(new e.DateTime(this.options.maxDate),"year"),z.selected=a.getFullYear()===w,A.appendChild(z);a.getFullYear()<x&&((z=document.createElement("option")).value=String(a.getFullYear()),z.text=String(a.getFullYear()),z.selected=!0,
z.disabled=!0,A.appendChild(z));"asc"===this.options.dropdowns.years&&(a=Array.prototype.slice.call(A.childNodes).reverse(),A.innerHTML="",a.forEach(function(a){a.innerHTML=a.value;A.appendChild(a)}));A.addEventListener("change",function(a){a=a.target;var e=0;c.options.splitView&&(e=a.closest("."+d.monthItem),e=h.findNestedMonthItem(e));c.calendars[e].setFullYear(Number(a.value));c.render();"function"==typeof c.options.onChangeYear&&c.options.onChangeYear.call(c,c.calendars[e],e)});v.appendChild(A)}else z=
document.createElement("span"),z.className=d.monthItemYear,z.innerHTML=String(a.getFullYear()),v.appendChild(z);a=document.createElement("a");a.href="#";a.className=d.buttonPreviousMonth;a.innerHTML=this.options.buttonText.previousMonth;z=document.createElement("a");z.href="#";z.className=d.buttonNextMonth;z.innerHTML=this.options.buttonText.nextMonth;y.appendChild(a);y.appendChild(v);y.appendChild(z);this.options.minDate&&f.isSameOrBefore(new e.DateTime(this.options.minDate),"month")&&l.classList.add(d.noPreviousMonth);
this.options.maxDate&&f.isSameOrAfter(new e.DateTime(this.options.maxDate),"month")&&l.classList.add(d.noNextMonth);v=document.createElement("div");v.className=d.monthItemWeekdaysRow;this.options.showWeekNumbers&&(v.innerHTML="<div>W</div>");for(a=1;7>=a;a+=1)z=3+this.options.firstDay+a,w=document.createElement("div"),w.innerHTML=this.weekdayName(z),w.title=this.weekdayName(z,"long"),v.appendChild(w);a=document.createElement("div");a.className=d.containerDays;z=this.calcSkipDays(f);this.options.showWeekNumbers&&
z&&a.appendChild(this.renderWeekNumber(f));for(w=0;w<z;w+=1)x=document.createElement("div"),a.appendChild(x);for(w=1;w<=k;w+=1)f.setDate(w),this.options.showWeekNumbers&&f.getDay()===this.options.firstDay&&a.appendChild(this.renderWeekNumber(f)),a.appendChild(this.renderDay(f));return l.appendChild(y),l.appendChild(v),l.appendChild(a),l},a.prototype.renderDay=function(a){var c=this;a.setHours();var h=document.createElement("a");if(h.href="#",h.className=d.dayItem,h.innerHTML=String(a.getDate()),h.dataset.time=
String(a.getTime()),a.toDateString()===(new Date).toDateString()&&h.classList.add(d.isToday),this.datePicked.length?(this.datePicked[0].toDateString()===a.toDateString()&&(h.classList.add(d.isStartDate),this.options.singleMode&&h.classList.add(d.isEndDate)),2===this.datePicked.length&&this.datePicked[1].toDateString()===a.toDateString()&&h.classList.add(d.isEndDate),2===this.datePicked.length&&a.isBetween(this.datePicked[0],this.datePicked[1])&&h.classList.add(d.isInRange)):this.options.startDate&&
(this.options.startDate.toDateString()===a.toDateString()&&(h.classList.add(d.isStartDate),this.options.singleMode&&h.classList.add(d.isEndDate)),this.options.endDate&&this.options.endDate.toDateString()===a.toDateString()&&h.classList.add(d.isEndDate),this.options.startDate&&this.options.endDate&&a.isBetween(this.options.startDate,this.options.endDate)&&h.classList.add(d.isInRange)),this.options.minDate&&a.isBefore(new e.DateTime(this.options.minDate))&&h.classList.add(d.isLocked),this.options.maxDate&&
a.isAfter(new e.DateTime(this.options.maxDate))&&h.classList.add(d.isLocked),this.options.minDays&&1===this.datePicked.length){var f=Number(!this.options.hotelMode),k=this.datePicked[0].clone().subtract(this.options.minDays-f,"day");f=this.datePicked[0].clone().add(this.options.minDays-f,"day");a.isBetween(k,this.datePicked[0],"(]")&&h.classList.add(d.isLocked);a.isBetween(this.datePicked[0],f,"[)")&&h.classList.add(d.isLocked)}this.options.maxDays&&1===this.datePicked.length&&(f=Number(this.options.hotelMode),
k=this.datePicked[0].clone().subtract(this.options.maxDays+f,"day"),f=this.datePicked[0].clone().add(this.options.maxDays+f,"day"),a.isSameOrBefore(k)&&h.classList.add(d.isLocked),a.isSameOrAfter(f)&&h.classList.add(d.isLocked));(this.options.selectForward&&1===this.datePicked.length&&a.isBefore(this.datePicked[0])&&h.classList.add(d.isLocked),this.options.selectBackward&&1===this.datePicked.length&&a.isAfter(this.datePicked[0])&&h.classList.add(d.isLocked),this.options.lockDays.length)&&this.options.lockDays.filter(function(d){return d instanceof
Array?a.isBetween(d[0],d[1],c.options.lockDaysInclusivity):d.isSame(a,"day")}).length&&h.classList.add(d.isLocked);this.options.highlightedDays.length&&this.options.highlightedDays.filter(function(c){return c instanceof Array?a.isBetween(c[0],c[1],"[]"):c.isSame(a,"day")}).length&&h.classList.add(d.isHighlighted);if(1>=this.datePicked.length&&this.options.bookedDays.length){k=this.options.bookedDaysInclusivity;this.options.hotelMode&&1===this.datePicked.length&&(k="()");f=a.clone();f.subtract(1,"day");
a.clone().add(1,"day");k=this.dateIsBooked(a,k);f=this.dateIsBooked(f,"[]");var l=this.dateIsBooked(a,"(]"),v=this.options.anyBookedDaysAsCheckout&&1===this.datePicked.length;(0===this.datePicked.length&&k||1===this.datePicked.length&&f&&k||1===this.datePicked.length&&f&&l)&&!v&&h.classList.add(d.isBooked)}return!this.options.disableWeekends||6!==a.getDay()&&0!==a.getDay()||h.classList.add(d.isLocked),"function"==typeof this.options.onRenderDay&&this.options.onRenderDay.call(this,h),h},a.prototype.renderFooter=
function(){var a=document.createElement("div");if(a.className=d.containerFooter,this.options.footerHTML?a.innerHTML=this.options.footerHTML:a.innerHTML='\n      <span class="'+d.previewDateRange+'"></span>\n      <button type="button" class="'+d.buttonCancel+'">'+this.options.buttonText.cancel+'</button>\n      <button type="button" class="'+d.buttonApply+'">'+this.options.buttonText.apply+"</button>\n      ",this.options.singleMode){if(1===this.datePicked.length){var c=this.datePicked[0].format(this.options.format,
this.options.lang);a.querySelector("."+d.previewDateRange).innerHTML=c}}else if(1===this.datePicked.length&&a.querySelector("."+d.buttonApply).setAttribute("disabled",""),2===this.datePicked.length){c=this.datePicked[0].format(this.options.format,this.options.lang);var e=this.datePicked[1].format(this.options.format,this.options.lang);a.querySelector("."+d.previewDateRange).innerHTML=""+c+this.options.delimiter+e}return a},a.prototype.renderWeekNumber=function(a){var c=document.createElement("div"),
e=a.getWeek(this.options.firstDay);return c.className=d.weekNumber,c.innerHTML=53===e&&0===a.getMonth()?"53 / 1":e,c},a.prototype.renderTooltip=function(){var a=document.createElement("div");return a.className=d.containerTooltip,a},a.prototype.dateIsBooked=function(a,c){return this.options.bookedDays.filter(function(d){return d instanceof Array?a.isBetween(d[0],d[1],c):d.isSame(a,"day")}).length},a.prototype.weekdayName=function(a,c){return void 0===c&&(c="short"),(new Date(1970,0,a,12,0,0,0)).toLocaleString(this.options.lang,
{weekday:c})},a.prototype.calcSkipDays=function(a){a=a.getDay()-this.options.firstDay;return 0>a&&(a+=7),a},a}();c.Calendar=f},function(a,c,f){(c=a.exports=f(7)(!1)).push([a.i,':root{--litepickerBgColor: #fff;--litepickerMonthHeaderTextColor: #333;--litepickerMonthButton: #9e9e9e;--litepickerMonthButtonHover: #2196f3;--litepickerMonthWidth: calc(var(--litepickerDayWidth) * 7);--litepickerMonthWeekdayColor: #9e9e9e;--litepickerDayColor: #333;--litepickerDayColorHover: #2196f3;--litepickerDayIsTodayColor: #f44336;--litepickerDayIsInRange: #bbdefb;--litepickerDayIsLockedColor: #9e9e9e;--litepickerDayIsBookedColor: #9e9e9e;--litepickerDayIsStartColor: #fff;--litepickerDayIsStartBg: #2196f3;--litepickerDayIsEndColor: #fff;--litepickerDayIsEndBg: #2196f3;--litepickerDayWidth: 38px;--litepickerButtonCancelColor: #fff;--litepickerButtonCancelBg: #9e9e9e;--litepickerButtonApplyColor: #fff;--litepickerButtonApplyBg: #2196f3;--litepickerButtonResetBtn: #909090;--litepickerButtonResetBtnHover: #2196f3;--litepickerHighlightedDayColor: #333;--litepickerHighlightedDayBg: #ffeb3b}.show-week-numbers{--litepickerMonthWidth: calc(var(--litepickerDayWidth) * 8)}.litepicker{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;font-size:0.8em;display:none}.litepicker .container__main{display:-webkit-box;display:-ms-flexbox;display:flex}.litepicker .container__months{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:var(--litepickerBgColor);border-radius:5px;-webkit-box-shadow:0 0 5px #ddd;box-shadow:0 0 5px #ddd;width:calc(var(--litepickerMonthWidth) + 10px);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months.columns-2{width:calc((var(--litepickerMonthWidth) * 2) + 20px)}.litepicker .container__months.columns-3{width:calc((var(--litepickerMonthWidth) * 3) + 30px)}.litepicker .container__months.columns-4{width:calc((var(--litepickerMonthWidth) * 4) + 40px)}.litepicker .container__months.split-view .month-item-header .button-previous-month,.litepicker .container__months.split-view .month-item-header .button-next-month{visibility:visible}.litepicker .container__months .month-item{padding:5px;width:var(--litepickerMonthWidth);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months .month-item-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:500;padding:10px 5px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--litepickerMonthHeaderTextColor)}.litepicker .container__months .month-item-header div{-webkit-box-flex:1;-ms-flex:1;flex:1}.litepicker .container__months .month-item-header div>.month-item-name{margin-right:5px}.litepicker .container__months .month-item-header div>.month-item-year{padding:0}.litepicker .container__months .month-item-header .reset-button{color:var(--litepickerButtonResetBtn)}.litepicker .container__months .month-item-header .reset-button>svg,.litepicker .container__months .month-item-header .reset-button>img{fill:var(--litepickerButtonResetBtn);pointer-events:none}.litepicker .container__months .month-item-header .reset-button:hover{color:var(--litepickerButtonResetBtnHover)}.litepicker .container__months .month-item-header .reset-button:hover>svg{fill:var(--litepickerButtonResetBtnHover)}.litepicker .container__months .month-item-header .button-previous-month,.litepicker .container__months .month-item-header .button-next-month{visibility:hidden;text-decoration:none;color:var(--litepickerMonthButton);padding:3px 5px;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__months .month-item-header .button-previous-month>svg,.litepicker .container__months .month-item-header .button-previous-month>img,.litepicker .container__months .month-item-header .button-next-month>svg,.litepicker .container__months .month-item-header .button-next-month>img{fill:var(--litepickerMonthButton);pointer-events:none}.litepicker .container__months .month-item-header .button-previous-month:hover,.litepicker .container__months .month-item-header .button-next-month:hover{color:var(--litepickerMonthButtonHover)}.litepicker .container__months .month-item-header .button-previous-month:hover>svg,.litepicker .container__months .month-item-header .button-next-month:hover>svg{fill:var(--litepickerMonthButtonHover)}.litepicker .container__months .month-item-weekdays-row{display:-webkit-box;display:-ms-flexbox;display:flex;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;color:var(--litepickerMonthWeekdayColor)}.litepicker .container__months .month-item-weekdays-row>div{padding:5px 0;font-size:85%;-webkit-box-flex:1;-ms-flex:1;flex:1;width:var(--litepickerDayWidth);text-align:center}.litepicker .container__months .month-item:first-child .button-previous-month{visibility:visible}.litepicker .container__months .month-item:last-child .button-next-month{visibility:visible}.litepicker .container__months .month-item.no-previous-month .button-previous-month{visibility:hidden}.litepicker .container__months .month-item.no-next-month .button-next-month{visibility:hidden}.litepicker .container__days{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:center;-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__days>div,.litepicker .container__days>a{padding:5px 0;width:var(--litepickerDayWidth)}.litepicker .container__days .day-item{color:var(--litepickerDayColor);text-align:center;text-decoration:none;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__days .day-item:hover{color:var(--litepickerDayColorHover);-webkit-box-shadow:inset 0 0 0 1px var(--litepickerDayColorHover);box-shadow:inset 0 0 0 1px var(--litepickerDayColorHover)}.litepicker .container__days .day-item.is-today{color:var(--litepickerDayIsTodayColor)}.litepicker .container__days .day-item.is-locked{color:var(--litepickerDayIsLockedColor)}.litepicker .container__days .day-item.is-locked:hover{color:var(--litepickerDayIsLockedColor);-webkit-box-shadow:none;box-shadow:none;cursor:default}.litepicker .container__days .day-item.is-booked{color:var(--litepickerDayIsBookedColor)}.litepicker .container__days .day-item.is-booked:hover{color:var(--litepickerDayIsBookedColor);-webkit-box-shadow:none;box-shadow:none;cursor:default}.litepicker .container__days .day-item.is-in-range{background-color:var(--litepickerDayIsInRange);border-radius:0}.litepicker .container__days .day-item.is-start-date{color:var(--litepickerDayIsStartColor);background-color:var(--litepickerDayIsStartBg);border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-flipped{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date{color:var(--litepickerDayIsEndColor);background-color:var(--litepickerDayIsEndBg);border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date.is-flipped{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-end-date{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-highlighted{color:var(--litepickerHighlightedDayColor);background-color:var(--litepickerHighlightedDayBg)}.litepicker .container__days .week-number{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#9e9e9e;font-size:85%}.litepicker .container__footer{text-align:right;padding:10px 5px;margin:0 5px;background-color:#fafafa;-webkit-box-shadow:inset 0px 3px 3px 0px #ddd;box-shadow:inset 0px 3px 3px 0px #ddd;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.litepicker .container__footer .preview-date-range{margin-right:10px;font-size:90%}.litepicker .container__footer .button-cancel{background-color:var(--litepickerButtonCancelBg);color:var(--litepickerButtonCancelColor);border:0;padding:3px 7px 4px;border-radius:3px}.litepicker .container__footer .button-cancel>svg,.litepicker .container__footer .button-cancel>img{pointer-events:none}.litepicker .container__footer .button-apply{background-color:var(--litepickerButtonApplyBg);color:var(--litepickerButtonApplyColor);border:0;padding:3px 7px 4px;border-radius:3px;margin-left:10px;margin-right:10px}.litepicker .container__footer .button-apply:disabled{opacity:0.7}.litepicker .container__footer .button-apply>svg,.litepicker .container__footer .button-apply>img{pointer-events:none}.litepicker .container__tooltip{position:absolute;margin-top:-4px;padding:4px 8px;border-radius:4px;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.25);box-shadow:0 1px 3px rgba(0,0,0,0.25);white-space:nowrap;font-size:11px;pointer-events:none;visibility:hidden}.litepicker .container__tooltip:before{position:absolute;bottom:-5px;left:calc(50% - 5px);border-top:5px solid rgba(0,0,0,0.12);border-right:5px solid transparent;border-left:5px solid transparent;content:""}.litepicker .container__tooltip:after{position:absolute;bottom:-4px;left:calc(50% - 4px);border-top:4px solid #fff;border-right:4px solid transparent;border-left:4px solid transparent;content:""}.litepicker-open{overflow:hidden}.litepicker-backdrop{display:none;background-color:#000;opacity:0.3;position:fixed;top:0;right:0;bottom:0;left:0}\n',
""]);c.locals={showWeekNumbers:"show-week-numbers",litepicker:"litepicker",containerMain:"container__main",containerMonths:"container__months",columns2:"columns-2",columns3:"columns-3",columns4:"columns-4",splitView:"split-view",monthItemHeader:"month-item-header",buttonPreviousMonth:"button-previous-month",buttonNextMonth:"button-next-month",monthItem:"month-item",monthItemName:"month-item-name",monthItemYear:"month-item-year",resetButton:"reset-button",monthItemWeekdaysRow:"month-item-weekdays-row",
noPreviousMonth:"no-previous-month",noNextMonth:"no-next-month",containerDays:"container__days",dayItem:"day-item",isToday:"is-today",isLocked:"is-locked",isBooked:"is-booked",isInRange:"is-in-range",isStartDate:"is-start-date",isFlipped:"is-flipped",isEndDate:"is-end-date",isHighlighted:"is-highlighted",weekNumber:"week-number",containerFooter:"container__footer",previewDateRange:"preview-date-range",buttonCancel:"button-cancel",buttonApply:"button-apply",containerTooltip:"container__tooltip",litepickerOpen:"litepicker-open",
litepickerBackdrop:"litepicker-backdrop"}},function(a,c,f){a.exports=function(a){var c=[];return c.toString=function(){return this.map(function(c){var d=function(a,c){var d=a[1]||"",e=a[3];if(!e)return d;if(c&&"function"==typeof btoa)return a=(h=e,f=btoa(unescape(encodeURIComponent(JSON.stringify(h)))),k="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(f),"/*# ".concat(k," */")),h=e.sources.map(function(a){return"/*# sourceURL=".concat(e.sourceRoot).concat(a," */")}),[d].concat(h).concat([a]).join("\n");
var h,f,k;return[d].join("\n")}(c,a);return c[2]?"@media ".concat(c[2],"{").concat(d,"}"):d}).join("")},c.i=function(a,d){"string"==typeof a&&(a=[[null,a,""]]);for(var e={},h=0;h<this.length;h++){var f=this[h][0];null!=f&&(e[f]=!0)}for(h=0;h<a.length;h++)f=a[h],null!=f[0]&&e[f[0]]||(d&&!f[2]?f[2]=d:d&&(f[2]="(".concat(f[2],") and (").concat(d,")")),c.push(f))},c}},function(a,c,f){function e(a,c){for(var d=[],e={},h=0;h<a.length;h++){var f=a[h],k=c.base?f[0]+c.base:f[0];f={css:f[1],media:f[2],sourceMap:f[3]};
e[k]?e[k].parts.push(f):d.push(e[k]={id:k,parts:[f]})}return d}function d(a,c){for(var d=0;d<a.length;d++){var e=a[d],h=q[e.id],f=0;if(h){for(h.refs++;f<h.parts.length;f++)h.parts[f](e.parts[f]);for(;f<e.parts.length;f++)h.parts.push(m(e.parts[f],c))}else{for(h=[];f<e.parts.length;f++)h.push(m(e.parts[f],c));q[e.id]={id:e.id,refs:1,parts:h}}}}function h(a){var c=document.createElement("style");if(void 0===a.attributes.nonce){var d=f.nc;d&&(a.attributes.nonce=d)}if(Object.keys(a.attributes).forEach(function(d){c.setAttribute(d,
a.attributes[d])}),"function"==typeof a.insert)a.insert(c);else{d=t(a.insert||"head");if(!d)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");d.appendChild(c)}return c}function k(a,c,d,e){d=d?"":e.css;a.styleSheet?a.styleSheet.cssText=v(c,d):(d=document.createTextNode(d),e=a.childNodes,e[c]&&a.removeChild(e[c]),e.length?a.insertBefore(d,e[c]):a.appendChild(d))}function l(a,c,d){c=d.css;var e=d.media;d=d.sourceMap;if(e&&a.setAttribute("media",
e),d&&btoa&&(c+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function m(a,c){if(c.singleton){var d=w++;var e=x||(x=h(c));var f=k.bind(null,e,d,!1);var m=k.bind(null,e,d,!0)}else e=h(c),f=l.bind(null,e,c),m=function(){if(null===e.parentNode)var a=!1;else e.parentNode.removeChild(e),a=void 0;
!a};return f(a),function(c){c?(c.css!==a.css||c.media!==a.media||c.sourceMap!==a.sourceMap)&&f(a=c):m()}}var n,q={},t=function(){var a={};return function(c){if(void 0===a[c]){var d=document.querySelector(c);if(window.HTMLIFrameElement&&d instanceof window.HTMLIFrameElement)try{d=d.contentDocument.head}catch(C){d=null}a[c]=d}return a[c]}}(),y,v=(y=[],function(a,c){return y[a]=c,y.filter(Boolean).join("\n")}),x=null,w=0;a.exports=function(a,c){(c=c||{}).attributes="object"==typeof c.attributes?c.attributes:
{};c.singleton||"boolean"==typeof c.singleton||(c.singleton=(void 0===n&&(n=!(!(window&&document&&document.all)||window.atob)),n));var h=e(a,c);return d(h,c),function(a){for(var f=[],k=0;k<h.length;k++){var m=q[h[k].id];m&&(m.refs--,f.push(m))}a&&d(e(a,c),c);for(a=0;a<f.length;a++)if(k=f[a],0===k.refs){for(m=0;m<k.parts.length;m++)k.parts[m]();delete q[k.id]}}}},function(a,c,f){var e=this&&this.__assign||function(){return(e=Object.assign||function(a){for(var c,d=1,e=arguments.length;d<e;d++)for(var h in c=
arguments[d])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};a=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c.default=a,c};Object.defineProperty(c,"__esModule",{value:!0});var d=f(0);c=f(3);var h=a(f(1)),k=f(2);c.Litepicker.prototype.show=function(a){void 0===a&&(a=null);var c=a||this.options.element;if(this.triggerElement=c,this.options.inlineMode)return this.picker.style.position=
"static",this.picker.style.display="inline-block",this.picker.style.top=null,this.picker.style.left=null,this.picker.style.bottom=null,void(this.picker.style.right=null);if(this.options.scrollToDate)if(!this.options.startDate||a&&a!==this.options.element){if(a&&this.options.endDate&&a===this.options.elementEnd){var d=this.options.endDate.clone();d.setDate(1);1<this.options.numberOfMonths&&d.setMonth(d.getMonth()-(this.options.numberOfMonths-1));this.calendars[0]=d.clone()}}else d=this.options.startDate.clone(),
d.setDate(1),this.calendars[0]=d.clone();if(this.options.mobileFriendly&&k.isMobile())return this.picker.style.position="fixed",this.picker.style.display="block","portrait"===k.getOrientation()?(this.options.numberOfMonths=1,this.options.numberOfColumns=1):(this.options.numberOfMonths=2,this.options.numberOfColumns=2),this.render(),c=this.picker.getBoundingClientRect(),this.picker.style.top="calc(50% - "+c.height/2+"px)",this.picker.style.left="calc(50% - "+c.width/2+"px)",this.picker.style.right=
null,this.picker.style.bottom=null,this.picker.style.zIndex=this.options.zIndex,this.backdrop.style.display="block",this.backdrop.style.zIndex=this.options.zIndex-1,document.body.classList.add(h.litepickerOpen),"function"==typeof this.options.onShow&&this.options.onShow.call(this),void(a?a.blur():this.options.element.blur());this.render();this.picker.style.position="absolute";this.picker.style.display="block";this.picker.style.zIndex=this.options.zIndex;a=c.getBoundingClientRect();c=this.picker.getBoundingClientRect();
d=a.bottom;var e=a.left,f=0,l=0,v=0,x=0;if(this.options.parentEl){var w=this.picker.parentNode.getBoundingClientRect();d-=w.bottom;(d+=a.height)+c.height>window.innerHeight&&0<a.top-w.top-a.height&&(v=a.top-w.top-a.height);(e-=w.left)+c.width>window.innerWidth&&0<a.right-w.right-c.width&&(x=a.right-w.right-c.width)}else f=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset,d+c.height>window.innerHeight&&0<a.top-c.height&&(v=a.top-c.height),e+c.width>window.innerWidth&&0<a.right-
c.width&&(x=a.right-c.width);this.picker.style.top=(v||d)+l+"px";this.picker.style.left=(x||e)+f+"px";this.picker.style.right=null;this.picker.style.bottom=null;"function"==typeof this.options.onShow&&this.options.onShow.call(this)};c.Litepicker.prototype.hide=function(){this.isShowning()&&(this.datePicked.length=0,this.updateInput(),this.options.inlineMode?this.render():(this.picker.style.display="none","function"==typeof this.options.onHide&&this.options.onHide.call(this),this.options.mobileFriendly&&
(document.body.classList.remove(h.litepickerOpen),this.backdrop.style.display="none")))};c.Litepicker.prototype.getDate=function(){return this.getStartDate()};c.Litepicker.prototype.getStartDate=function(){return this.options.startDate?this.options.startDate.clone().getDateInstance():null};c.Litepicker.prototype.getEndDate=function(){return this.options.endDate?this.options.endDate.clone().getDateInstance():null};c.Litepicker.prototype.setDate=function(a){this.setStartDate(a);"function"==typeof this.options.onSelect&&
this.options.onSelect.call(this,this.getDate())};c.Litepicker.prototype.setStartDate=function(a){a&&(this.options.startDate=new d.DateTime(a,this.options.format,this.options.lang),this.updateInput())};c.Litepicker.prototype.setEndDate=function(a){a&&(this.options.endDate=new d.DateTime(a,this.options.format,this.options.lang),this.options.startDate.getTime()>this.options.endDate.getTime()&&(this.options.endDate=this.options.startDate.clone(),this.options.startDate=new d.DateTime(a,this.options.format,
this.options.lang)),this.updateInput())};c.Litepicker.prototype.setDateRange=function(a,c){this.triggerElement=void 0;this.setStartDate(a);this.setEndDate(c);this.updateInput();"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.getStartDate(),this.getEndDate())};c.Litepicker.prototype.gotoDate=function(a,c){void 0===c&&(c=0);a=new d.DateTime(a);a.setDate(1);this.calendars[c]=a.clone();this.render()};c.Litepicker.prototype.setLockDays=function(a){this.options.lockDays=d.DateTime.convertArray(a,
this.options.lockDaysFormat);this.render()};c.Litepicker.prototype.setBookedDays=function(a){this.options.bookedDays=d.DateTime.convertArray(a,this.options.bookedDaysFormat);this.render()};c.Litepicker.prototype.setHighlightedDays=function(a){this.options.highlightedDays=d.DateTime.convertArray(a,this.options.highlightedDaysFormat);this.render()};c.Litepicker.prototype.setOptions=function(a){delete a.element;delete a.elementEnd;delete a.parentEl;a.startDate&&(a.startDate=new d.DateTime(a.startDate,
this.options.format,this.options.lang));a.endDate&&(a.endDate=new d.DateTime(a.endDate,this.options.format,this.options.lang));var c=e(e({},this.options.dropdowns),a.dropdowns),h=e(e({},this.options.buttonText),a.buttonText),f=e(e({},this.options.tooltipText),a.tooltipText);this.options=e(e({},this.options),a);this.options.dropdowns=e({},c);this.options.buttonText=e({},h);this.options.tooltipText=e({},f);!this.options.singleMode||this.options.startDate instanceof d.DateTime||(this.options.startDate=
null,this.options.endDate=null);this.options.singleMode||this.options.startDate instanceof d.DateTime&&this.options.endDate instanceof d.DateTime||(this.options.startDate=null,this.options.endDate=null);for(a=0;a<this.options.numberOfMonths;a+=1)c=this.options.startDate?this.options.startDate.clone():new d.DateTime,c.setDate(1),c.setMonth(c.getMonth()+a),this.calendars[a]=c;this.options.lockDays.length&&(this.options.lockDays=d.DateTime.convertArray(this.options.lockDays,this.options.lockDaysFormat));
this.options.bookedDays.length&&(this.options.bookedDays=d.DateTime.convertArray(this.options.bookedDays,this.options.bookedDaysFormat));this.options.highlightedDays.length&&(this.options.highlightedDays=d.DateTime.convertArray(this.options.highlightedDays,this.options.highlightedDaysFormat));this.render();this.options.inlineMode&&this.show();this.updateInput()};c.Litepicker.prototype.clearSelection=function(){this.options.startDate=null;this.options.endDate=null;this.datePicked.length=0;this.updateInput();
this.isShowning()&&this.render()};c.Litepicker.prototype.destroy=function(){this.picker&&this.picker.parentNode&&(this.picker.parentNode.removeChild(this.picker),this.picker=null);this.backdrop&&this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop)}},function(a,c,f){Object.defineProperty(c,"__esModule",{value:!0})}]).Litepicker});
!function(a){a(function(){var c=a.support;a:{var f=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},d;for(d in e)if(void 0!==f.style[d]){f=e[d];break a}f=void 0}c.transition=f&&{end:f}})}(window.jQuery);
!function(a){var c=function(c){a(c).on("click",'[data-dismiss="alert"]',this.close)};c.prototype.close=function(c){function d(){l.trigger("closed").remove()}var e=a(this),f=e.attr("data-target");f||(f=(f=e.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));var l=a(f);c&&c.preventDefault();l.length||(l=e.hasClass("alert")?e:e.parent());l.trigger(c=a.Event("close"));c.isDefaultPrevented()||(l.removeClass("in"),a.support.transition&&l.hasClass("fade")?l.on(a.support.transition.end,d):d())};var f=a.fn.alert;
a.fn.alert=function(e){return this.each(function(){var d=a(this),h=d.data("alert");h||d.data("alert",h=new c(this));"string"==typeof e&&h[e].call(d)})};a.fn.alert.Constructor=c;a.fn.alert.noConflict=function(){a.fn.alert=f;return this};a(document).on("click.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)}(window.jQuery);
!function(a){var c=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.button.defaults,d)};c.prototype.setState=function(a){var c=this.$element,e=c.data(),f=c.is("input")?"val":"html";a+="Text";e.resetText||c.data("resetText",c[f]());c[f](e[a]||this.options[a]);setTimeout(function(){"loadingText"==a?c.addClass("disabled").attr("disabled","disabled"):c.removeClass("disabled").removeAttr("disabled")},0)};c.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');
a&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var f=a.fn.button;a.fn.button=function(e){return this.each(function(){var d=a(this),h=d.data("button"),f="object"==typeof e&&e;h||d.data("button",h=new c(this,f));"toggle"==e?h.toggle():e&&h.setState(e)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=c;a.fn.button.noConflict=function(){a.fn.button=f;return this};a(document).on("click.button.data-api","[data-toggle^=button]",function(c){c=a(c.target);
c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle")})}(window.jQuery);
!function(a){var c=function(c,d){this.$element=a(c);this.$indicators=this.$element.find(".carousel-indicators");this.options=d;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};c.prototype={cycle:function(c){c||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=
this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(c){var d=this.getActiveIndex(),e=this;if(!(c>this.$items.length-1||0>c))return this.sliding?this.$element.one("slid",function(){e.to(c)}):d==c?this.pause().cycle():this.slide(c>d?"next":"prev",a(this.$items[c]))},pause:function(c){c||(this.paused=!0);this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),
this.cycle(!0));clearInterval(this.interval);this.interval=null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(c,d){var e=this.$element.find(".item.active"),f=d||e[c]();d=this.interval;var l="next"==c?"left":"right",m="next"==c?"first":"last",n=this;this.sliding=!0;d&&this.pause();f=f.length?f:this.$element.find(".item")[m]();m=a.Event("slide",{relatedTarget:f[0],direction:l});if(!f.hasClass("active")){this.$indicators.length&&
(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var c=a(n.$indicators.children()[n.getActiveIndex()]);c&&c.addClass("active")}));if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(m);if(m.isDefaultPrevented())return;f.addClass(c);f[0].offsetWidth;e.addClass(l);f.addClass(l);this.$element.one(a.support.transition.end,function(){f.removeClass([c,l].join(" ")).addClass("active");e.removeClass(["active",l].join(" "));n.sliding=!1;
setTimeout(function(){n.$element.trigger("slid")},0)})}else{this.$element.trigger(m);if(m.isDefaultPrevented())return;e.removeClass("active");f.addClass("active");this.sliding=!1;this.$element.trigger("slid")}d&&this.cycle();return this}}};var f=a.fn.carousel;a.fn.carousel=function(e){return this.each(function(){var d=a(this),h=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof e&&e),l="string"==typeof e?e:f.slide;h||d.data("carousel",h=new c(this,f));if("number"==typeof e)h.to(e);
else if(l)h[l]();else f.interval&&h.pause().cycle()})};a.fn.carousel.defaults={interval:5E3,pause:"hover"};a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){a.fn.carousel=f;return this};a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d=a(this),e,f=a(d.attr("data-target")||(e=d.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));e=a.extend({},f.data(),d.data());var l;f.carousel(e);(l=d.attr("data-slide-to"))&&f.data("carousel").pause().to(l).cycle();
c.preventDefault()})}(window.jQuery);
!function(a){var c=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.collapse.defaults,d);this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var c,d;if(!this.transitioning&&!this.$element.hasClass("in")){var h=this.dimension();var f=a.camelCase(["scroll",h].join("-"));if((c=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&
c.length){if((d=c.data("collapse"))&&d.transitioning)return;c.collapse("hide");d||c.data("collapse",null)}this.$element[h](0);this.transition("addClass",a.Event("show"),"shown");a.support.transition&&this.$element[h](this.$element[0][f])}},hide:function(){if(!this.transitioning&&this.$element.hasClass("in")){var c=this.dimension();this.reset(this.$element[c]());this.transition("removeClass",a.Event("hide"),"hidden");this.$element[c](0)}},reset:function(a){var c=this.dimension();this.$element.removeClass("collapse")[c](a||
"auto")[0].offsetWidth;this.$element[null!==a?"addClass":"removeClass"]("collapse");return this},transition:function(c,d,h){var e=this,f=function(){"show"==d.type&&e.reset();e.transitioning=0;e.$element.trigger(h)};this.$element.trigger(d);d.isDefaultPrevented()||(this.transitioning=1,this.$element[c]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var f=a.fn.collapse;
a.fn.collapse=function(e){return this.each(function(){var d=a(this),h=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof e&&e);h||d.data("collapse",h=new c(this,f));if("string"==typeof e)h[e]()})};a.fn.collapse.defaults={toggle:!0};a.fn.collapse.Constructor=c;a.fn.collapse.noConflict=function(){a.fn.collapse=f;return this};a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(c){var d=a(this),e;c=d.attr("data-target")||c.preventDefault()||(e=d.attr("href"))&&
e.replace(/.*(?=#[^\s]+$)/,"");e=a(c).data("collapse")?"toggle":d.data();d[a(c).hasClass("in")?"addClass":"removeClass"]("collapsed");a(c).collapse(e)})}(window.jQuery);
!function(a){function c(){a(".dropdown-backdrop").remove();a("[data-toggle=dropdown]").each(function(){f(a(this)).removeClass("open")})}function f(c){var d=c.attr("data-target");d||(d=(d=c.attr("href"))&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,""));(d=d&&"#"!=d&&a(d))&&d.length||(d=c.parent());return d}var e=function(c){var d=a(c).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){d.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){d=
a(this);if(!d.is(".disabled, :disabled")){var e=f(d);var h=e.hasClass("open");c();if(!h){if("ontouchstart"in document.documentElement)a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",c);e.toggleClass("open")}a("[data-toggle=dropdown]").attr("aria-expanded",h?"false":"true").trigger(h?"dropdown:collapsed":"dropdown:expanded");d.focus();return!1}},keydown:function(c){var d;if(/(38|40|27)/.test(c.keyCode)){var e=a(this);c.preventDefault();c.stopPropagation();if(!e.is(".disabled, :disabled")){var h=
f(e);(d=h.hasClass("open"))&&27==c.keyCode&&a("[data-toggle=dropdown]").attr("aria-expanded","false").trigger("dropdown:collapsed");if(!d||d&&27==c.keyCode)return 27==c.which&&h.find("[data-toggle=dropdown]").focus(),e.click();e=a("[role=menu] li:not(.divider):visible a",h);e.length&&(h=e.index(e.filter(":focus")),38==c.keyCode&&0<h&&h--,40==c.keyCode&&h<e.length-1&&h++,~h||(h=0),e.eq(h).focus())}}}};var d=a.fn.dropdown;a.fn.dropdown=function(c){return this.each(function(){var d=a(this),h=d.data("dropdown");
h||d.data("dropdown",h=new e(this));"string"==typeof c&&h[c].call(d)})};a.fn.dropdown.Constructor=e;a.fn.dropdown.noConflict=function(){a.fn.dropdown=d;return this};a(document).on("click.dropdown.data-api",c).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api","[data-toggle=dropdown]",e.prototype.toggle).on("keydown.dropdown.data-api","[data-toggle=dropdown], [role=menu]",e.prototype.keydown)}(window.jQuery);
!function(a){var c=function(c,d){this.options=d;this.$element=a(c).on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};c.prototype={constructor:c,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var c=this,d=a.Event("show");this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var d=a.support.transition&&
c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show();d&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);d?c.$element.one(a.support.transition.end,function(){c.$element.focus().trigger("shown")}):c.$element.focus().trigger("shown")}))},hide:function(c){c&&c.preventDefault();c=a.Event("hide");this.$element.trigger(c);this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.$element.removeClass("in").attr("aria-hidden",
!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},escape:function(){var a=this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(c){27==c.which&&a.hide()});else this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);c.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);
c.hideModal()})},hideModal:function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(c){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?
a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this));e&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c&&(e?this.$backdrop.one(a.support.transition.end,c):c())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,c):c()):c&&c()}};var f=a.fn.modal;a.fn.modal=function(e){return this.each(function(){var d=a(this),h=d.data("modal"),f=a.extend({},a.fn.modal.defaults,
d.data(),"object"==typeof e&&e);h||d.data("modal",h=new c(this,f));if("string"==typeof e)h[e]();else f.show&&h.show()})};a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){a.fn.modal=f;return this};a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""));e=f.data("modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());
c.preventDefault();f.modal(e).one("hide",function(){d.focus()})})}(window.jQuery);
!function(a){var c=function(a,c){this.init("tooltip",a,c)};c.prototype={constructor:c,init:function(c,d,h){this.type=c;this.$element=a(d);this.options=this.getOptions(h);this.enabled=!0;d=this.options.trigger.split(" ");for(h=d.length;h--;){var e=d[h];if("click"==e)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else"manual"!=e&&(c="hover"==e?"mouseenter":"focus",e="hover"==e?"mouseleave":"blur",this.$element.on(c+"."+this.type,this.options.selector,a.proxy(this.enter,
this)),this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.leave,this)))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(c){c=a.extend({},a.fn[this.type].defaults,this.$element.data(),c);c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay});return c},enter:function(c){var d=a.fn[this.type].defaults,e={};this._options&&a.each(this._options,function(a,c){d[a]!=c&&(e[a]=c)},this);var f=
a(c.currentTarget)[this.type](e).data(this.type);if(!f.options.delay||!f.options.delay.show)return f.show();clearTimeout(this.timeout);f.hoverState="in";this.timeout=setTimeout(function(){"in"==f.hoverState&&f.show()},f.options.delay.show)},leave:function(c){var d=a(c.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!d.options.delay||!d.options.delay.hide)return d.hide();d.hoverState="out";this.timeout=setTimeout(function(){"out"==d.hoverState&&
d.hide()},d.options.delay.hide)},show:function(){var c=a.Event("show");if(this.hasContent()&&this.enabled&&(this.$element.trigger(c),!c.isDefaultPrevented())){var d=this.tip();this.setContent();this.options.animation&&d.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement;d.detach().css({top:0,left:0,display:"block"});this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);c=this.getPosition();
var f=d[0].offsetWidth;d=d[0].offsetHeight;switch(h){case "bottom":var l={top:c.top+c.height,left:c.left+c.width/2-f/2};break;case "top":l={top:c.top-d,left:c.left+c.width/2-f/2};break;case "left":l={top:c.top+c.height/2-d/2,left:c.left-f};break;case "right":l={top:c.top+c.height/2-d/2,left:c.left+c.width}}this.applyPlacement(l,h);this.$element.trigger("shown")}},applyPlacement:function(a,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight;d.offset(a).addClass(c).addClass("in");var m=d[0].offsetWidth;
var n=d[0].offsetHeight;if("top"==c&&n!=f){a.top=a.top+f-n;var q=!0}"bottom"==c||"top"==c?(c=0,0>a.left&&(c=-2*a.left,a.left=0,d.offset(a),m=d[0].offsetWidth),this.replaceArrow(c-e+m,m,"left")):this.replaceArrow(n-f,n,"top");q&&d.offset(a)},replaceArrow:function(a,c,f){this.arrow().css(f,a?50*(1-a/c)+"%":"")},setContent:function(){var a=this.tip(),c=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](c);a.removeClass("fade in top bottom left right")},hide:function(){function c(){var c=
setTimeout(function(){d.off(a.support.transition.end).detach()},500);d.one(a.support.transition.end,function(){clearTimeout(c);d.detach()})}var d=this.tip(),f=a.Event("hide");this.$element.trigger(f);if(!f.isDefaultPrevented())return d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c():d.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var c=this.$element[0];return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():{width:c.offsetWidth,height:c.offsetHeight},this.$element.offset())},getTitle:function(){var a=this.$element,c=this.options;return a.attr("data-original-title")||("function"==typeof c.title?c.title.call(a[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(c){c=c?a(c.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var f=a.fn.tooltip;
a.fn.tooltip=function(e){return this.each(function(){var d=a(this),f=d.data("tooltip"),k="object"==typeof e&&e;f||d.data("tooltip",f=new c(this,k));if("string"==typeof e)f[e]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};a.fn.tooltip.noConflict=function(){a.fn.tooltip=f;return this}}(window.jQuery);
!function(a){var c=function(a,c){this.init("popover",a,c)};c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:c,setContent:function(){var a=this.tip(),c=this.getTitle(),f=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](c);a.find(".popover-content")[this.options.html?"html":"text"](f);a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a=this.$element,c=this.options;
return("function"==typeof c.content?c.content.call(a[0]):c.content)||a.attr("data-content")},tip:function(){this.$tip||(this.$tip=a(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var f=a.fn.popover;a.fn.popover=function(e){return this.each(function(){var d=a(this),f=d.data("popover"),k="object"==typeof e&&e;f||d.data("popover",f=new c(this,k));if("string"==typeof e)f[e]()})};a.fn.popover.Constructor=c;a.fn.popover.defaults=
a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});a.fn.popover.noConflict=function(){a.fn.popover=f;return this}}(window.jQuery);
!function(a){function c(c,d){var e=a.proxy(this.process,this),f=a(c).is("body")?a(window):a(c),l;this.options=a.extend({},a.fn.scrollspy.defaults,d);this.$scrollElement=f.on("scroll.scroll-spy.data-api",e);this.selector=(this.options.target||(l=a(c).attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=a("body");this.refresh();this.process()}c.prototype={constructor:c,refresh:function(){var c=this;this.offsets=a([]);this.targets=a([]);this.$body.find(this.selector).map(function(){var d=
a(this);d=d.data("target")||d.attr("href");var e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,c){return a[0]-c[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,c=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),f=this.offsets,k=this.targets,l=
this.activeTarget,m;if(a>=c)return l!=(m=k.last()[0])&&this.activate(m);for(m=f.length;m--;)l!=k[m]&&a>=f[m]&&(!f[m+1]||a<=f[m+1])&&this.activate(k[m])},activate:function(c){this.activeTarget=c;a(this.selector).parent(".active").removeClass("active");c=a(this.selector+'[data-target="'+c+'"],'+this.selector+'[href="'+c+'"]').parent("li").addClass("active");c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active"));c.trigger("activate")}};var f=a.fn.scrollspy;a.fn.scrollspy=
function(e){return this.each(function(){var d=a(this),f=d.data("scrollspy"),k="object"==typeof e&&e;f||d.data("scrollspy",f=new c(this,k));if("string"==typeof e)f[e]()})};a.fn.scrollspy.Constructor=c;a.fn.scrollspy.defaults={offset:10};a.fn.scrollspy.noConflict=function(){a.fn.scrollspy=f;return this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var c=a(this);c.scrollspy(c.data())})})}(window.jQuery);
!function(a){var c=function(c){this.element=a(c)};c.prototype={constructor:c,show:function(){var c=this.element,d=c.closest("ul:not(.dropdown-menu)"),f=c.attr("data-target");f||(f=(f=c.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));if(!c.parent("li").hasClass("active")){var k=d.find(".active:last a")[0];var l=a.Event("show",{relatedTarget:k});c.trigger(l);l.isDefaultPrevented()||(f=a(f),this.activate(c.parent("li"),d),this.activate(f,f.parent(),function(){c.trigger({type:"shown",relatedTarget:k})}))}},
activate:function(c,d,f){function e(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");c.addClass("active");m?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade");c.parent(".dropdown-menu")&&c.closest("li.dropdown").addClass("active");f&&f()}var h=d.find("> .active"),m=f&&a.support.transition&&h.hasClass("fade");m?h.one(a.support.transition.end,e):e();h.removeClass("in")}};var f=a.fn.tab;a.fn.tab=function(e){return this.each(function(){var d=a(this),f=d.data("tab");
f||d.data("tab",f=new c(this));if("string"==typeof e)f[e]()})};a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){a.fn.tab=f;return this};a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();a(this).tab("show")})}(window.jQuery);
!function(a){var c=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.typeahead.defaults,d);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=a(this.options.menu);this.shown=!1;this.listen()};c.prototype={constructor:c,select:function(){var a=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(a)).change();
return this.hide()},updater:function(a){return a},show:function(){var c=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:c.top+c.height,left:c.left}).show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(c){this.query=this.$element.val();return!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,
a.proxy(this.process,this)):this.source)?this.process(c):this},process:function(c){var d=this;c=a.grep(c,function(a){return d.matcher(a)});c=this.sorter(c);return c.length?this.render(c.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var c=[],e=[],f=[],l;l=a.shift();)l.toLowerCase().indexOf(this.query.toLowerCase())?~l.indexOf(this.query)?e.push(l):f.push(l):c.push(l);return c.concat(e,
f)},highlighter:function(a){var c=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+c+")","ig"),function(a,c){return"<strong>"+c+"</strong>"})},render:function(c){var d=this;c=a(c).map(function(c,e){c=a(d.options.item).attr("data-value",e);c.find("a").html(d.highlighter(e));return c[0]});c.first().addClass("active");this.$menu.html(c);return this},next:function(c){c=this.$menu.find(".active").removeClass("active").next();c.length||(c=a(this.$menu.find("li")[0]));
c.addClass("active")},prev:function(a){a=this.$menu.find(".active").removeClass("active").prev();a.length||(a=this.$menu.find("li").last());a.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",a.proxy(this.keydown,this));this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",
a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var c=a in this.$element;c||(this.$element.setAttribute(a,"return;"),c="function"===typeof this.$element[a]);return c},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault();this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(c){this.suppressKeyPressRepeat=~a.inArray(c.keyCode,
[40,38,9,13,27]);this.move(c)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation();a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation();a.preventDefault();
this.select();this.$element.focus()},mouseenter:function(c){this.mousedover=!0;this.$menu.find(".active").removeClass("active");a(c.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};var f=a.fn.typeahead;a.fn.typeahead=function(e){return this.each(function(){var d=a(this),f=d.data("typeahead"),k="object"==typeof e&&e;f||d.data("typeahead",f=new c(this,k));if("string"==typeof e)f[e]()})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',
item:'<li><a href="#"></a></li>',minLength:1};a.fn.typeahead.Constructor=c;a.fn.typeahead.noConflict=function(){a.fn.typeahead=f;return this};a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(c){c=a(this);c.data("typeahead")||c.typeahead(c.data())})}(window.jQuery);
!function(a){var c=function(c,d){this.options=a.extend({},a.fn.affix.defaults,d);this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this));this.$element=a(c);this.checkPosition()};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),f=this.$element.offset(),k=this.options.offset,l=k.bottom,m=k.top;"object"!=
typeof k&&(l=m=k);"function"==typeof m&&(m=k.top());"function"==typeof l&&(l=k.bottom());c=null!=this.unpin&&d+this.unpin<=f.top?!1:null!=l&&f.top+this.$element.height()>=c-l?"bottom":null!=m&&d<=m?"top":!1;this.affixed!==c&&(this.affixed=c,this.unpin="bottom"==c?f.top-d:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(c?"-"+c:"")))}};var f=a.fn.affix;a.fn.affix=function(e){return this.each(function(){var d=a(this),f=d.data("affix"),k="object"==typeof e&&e;f||d.data("affix",
f=new c(this,k));if("string"==typeof e)f[e]()})};a.fn.affix.Constructor=c;a.fn.affix.defaults={offset:0};a.fn.affix.noConflict=function(){a.fn.affix=f;return this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{};d.offsetBottom&&(d.offset.bottom=d.offsetBottom);d.offsetTop&&(d.offset.top=d.offsetTop);c.affix(d)})})}(window.jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,c){function f(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var a=new Date;return f(a.getFullYear(),a.getMonth(),a.getDate())}function d(a,c){return a.getUTCFullYear()===c.getUTCFullYear()&&a.getUTCMonth()===c.getUTCMonth()&&a.getUTCDate()===c.getUTCDate()}function h(d,e){return function(){e!==c&&a.fn.datepicker.deprecated(e);return this[d].apply(this,
arguments)}}function k(c,d){function e(a,c){return c.toLowerCase()}c=a(c).data();var f={},h=new RegExp("^"+d.toLowerCase()+"([A-Z])");d=new RegExp("^"+d.toLowerCase());for(var k in c)if(d.test(k)){var m=k.replace(h,e);f[m]=c[k]}return f}function l(c){var d={};if(!w[c]&&(c=c.split("-")[0],!w[c]))return;var e=w[c];a.each(x,function(a,c){c in e&&(d[c]=e[c])});return d}var m=function(){var c={get:function(a){return this.slice(a)[0]},contains:function(a){a=a&&a.valueOf();for(var c=0,d=this.length;c<d;c++)if(0<=
this[c].valueOf()-a&&864E5>this[c].valueOf()-a)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(c){c&&(a.isArray(c)||(c=[c]),this.clear(),this.push.apply(this,c))},clear:function(){this.length=0},copy:function(){var a=new m;a.replace(this);return a}};return function(){var d=[];d.push.apply(d,arguments);a.extend(d,c);return d}}(),n=function(c,d){a.data(c,"datepicker",this);this._process_options(d);this.dates=new m;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=
a(c);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=a(z.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);
this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(a,c){return Number(c)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,
daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()};n.prototype={constructor:n,_resolveViewName:function(c){a.each(z.viewModes,function(d,e){if(c===d||-1!==a.inArray(c,e.names))return c=d,!1});return c},_resolveDaysOfWeek:function(c){a.isArray(c)||(c=c.split(/[,\s]*/));return a.map(c,Number)},_check_template:function(d){try{return d===
c||""===d?!1:0>=(d.match(/[<>]/g)||[]).length?!0:0<a(d).length}catch(A){return!1}},_process_options:function(c){this._o=a.extend({},this._o,c);var d=this.o=a.extend({},this._o);c=d.language;w[c]||(c=c.split("-")[0],w[c]||(c=v.language));d.language=c;d.startView=this._resolveViewName(d.startView);d.minViewMode=this._resolveViewName(d.minViewMode);d.maxViewMode=this._resolveViewName(d.maxViewMode);d.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,d.startView));!0!==d.multidate&&(d.multidate=
Number(d.multidate)||!1,!1!==d.multidate&&(d.multidate=Math.max(0,d.multidate)));d.multidateSeparator=String(d.multidateSeparator);d.weekStart%=7;d.weekEnd=(d.weekStart+6)%7;var h=z.parseFormat(d.format);-Infinity!==d.startDate&&(d.startDate=d.startDate?d.startDate instanceof Date?this._local_to_utc(this._zero_time(d.startDate)):z.parseDate(d.startDate,h,d.language,d.assumeNearbyYear):-Infinity);Infinity!==d.endDate&&(d.endDate=d.endDate?d.endDate instanceof Date?this._local_to_utc(this._zero_time(d.endDate)):
z.parseDate(d.endDate,h,d.language,d.assumeNearbyYear):Infinity);d.daysOfWeekDisabled=this._resolveDaysOfWeek(d.daysOfWeekDisabled||[]);d.daysOfWeekHighlighted=this._resolveDaysOfWeek(d.daysOfWeekHighlighted||[]);d.datesDisabled=d.datesDisabled||[];a.isArray(d.datesDisabled)||(d.datesDisabled=d.datesDisabled.split(","));d.datesDisabled=a.map(d.datesDisabled,function(a){return z.parseDate(a,h,d.language,d.assumeNearbyYear)});c=String(d.orientation).toLowerCase().split(/\s+/g);var k=d.orientation.toLowerCase();
c=a.grep(c,function(a){return/^auto|left|right|top|bottom$/.test(a)});d.orientation={x:"auto",y:"auto"};if(k&&"auto"!==k)if(1===c.length)switch(c[0]){case "top":case "bottom":d.orientation.y=c[0];break;case "left":case "right":d.orientation.x=c[0]}else k=a.grep(c,function(a){return/^left|right$/.test(a)}),d.orientation.x=k[0]||"auto",k=a.grep(c,function(a){return/^top|bottom$/.test(a)}),d.orientation.y=k[0]||"auto";d.defaultViewDate instanceof Date||"string"===typeof d.defaultViewDate?d.defaultViewDate=
z.parseDate(d.defaultViewDate,h,d.language,d.assumeNearbyYear):d.defaultViewDate?(c=d.defaultViewDate.year||(new Date).getFullYear(),d.defaultViewDate=f(c,d.defaultViewDate.month||0,d.defaultViewDate.day||1)):d.defaultViewDate=e()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var d=0,e,f,h;d<a.length;d++)e=a[d][0],2===a[d].length?(f=c,h=a[d][1]):3===a[d].length&&(f=a[d][1],h=a[d][2]),e.on(h,f)},_unapplyEvents:function(a){for(var d=0,e,f,h;d<a.length;d++)e=a[d][0],2===a[d].length?(h=
c,f=a[d][1]):3===a[d].length&&(h=a[d][1],f=a[d][2]),e.off(f,h)},_buildEvents:function(){var c={keyup:a.proxy(function(c){-1===a.inArray(c.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(c.focus=a.proxy(this.show,this));this._events=this.isInput?[[this.element,c]]:this.component&&this.inputField.length?[[this.inputField,c],[this.component,{click:a.proxy(this.show,this)}]]:[[this.element,{click:a.proxy(this.show,
this),keydown:a.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[this.picker,".prev, .next",{click:a.proxy(this.navArrowsClick,this)}],[this.picker,
".day:not(.disabled)",{click:a.proxy(this.dayCellClick,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();
this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(c,d){d=d||this.dates.get(-1);d=this._utc_to_local(d);this.element.trigger({type:c,date:d,viewMode:this.viewMode,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,c){0===arguments.length?(a=this.dates.length-1,c=this.o.format):"string"===typeof a&&(c=a,a=this.dates.length-1);c=c||this.o.format;var d=this.dates.get(a);return z.formatDate(d,c,this.o.language)},
this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=null;this.picker.hide().detach();
this._detachSecondaryEvents();this.setViewMode(this.o.startView);this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(c){if(c.originalEvent.clipboardData&&c.originalEvent.clipboardData.types&&-1!==a.inArray("text/plain",c.originalEvent.clipboardData.types))var d=
c.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)d=window.clipboardData.getData("Text");else return;this.setDate(d);this.update();c.preventDefault()},_utc_to_local:function(a){if(!a)return a;var c=new Date(a.getTime()+6E4*a.getTimezoneOffset());c.getTimezoneOffset()!==a.getTimezoneOffset()&&(c=new Date(a.getTime()+6E4*c.getTimezoneOffset()));return c},_local_to_utc:function(a){return a&&new Date(a.getTime()-6E4*a.getTimezoneOffset())},_zero_time:function(a){return a&&
new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&f(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return a!==c?new Date(a):null},clearDates:function(){this.inputField.val("");this.update();this._trigger("changeDate");
this.o.autoclose&&this.hide()},setDates:function(){var c=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,c);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var c=a.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,a.map(c,this._utc_to_local));return this},setDate:h("setDates"),setUTCDate:h("setUTCDates"),remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var a=
this.getFormattedDate();this.inputField.val(a);return this},getFormattedDate:function(d){d===c&&(d=this.o.format);var e=this.o.language;return a.map(this.dates,function(a){return z.formatDate(a,d,e)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a,c){this._process_options({startDate:a});c?this.silentUpdate():this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){this._process_options({endDate:a});
this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();return this},setDaysOfWeekHighlighted:function(a){this._process_options({daysOfWeekHighlighted:a});this.update();return this},setDatesDisabled:function(a){this._process_options({datesDisabled:a});this.update();return this},place:function(){if(this.isInline)return this;var c=this.picker.outerWidth(),d=this.picker.outerHeight(),e=a(this.o.container),f=e.width(),
h="body"===this.o.container?a(document).scrollTop():e.scrollTop(),k=e.offset(),m=[0];this.element.parents().each(function(){var c=a(this).css("z-index");"auto"!==c&&0!==Number(c)&&m.push(Number(c))});e=Math.max.apply(Math,m)+this.o.zIndexOffset;var l=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),q=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=l.left-k.left;k=l.top-k.top;
"body"!==this.o.container&&(k+=h);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(t-=c-q)):0>l.left?(this.picker.addClass("datepicker-orient-left"),t-=l.left-10):t+c>f?(this.picker.addClass("datepicker-orient-right"),t+=q-c):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");
c=this.o.orientation.y;"auto"===c&&(c=0>-h+k-d?"bottom":"top");this.picker.addClass("datepicker-orient-"+c);k="top"===c?k-(d+parseInt(this.picker.css("padding-top"))):k+n;this.o.rtl?this.picker.css({top:k,right:f-(t+q),zIndex:e}):this.picker.css({top:k,left:t,zIndex:e});return this},silentUpdate:function(){this._silent=!0;n.prototype.update.apply(this,arguments);this._silent=!1},_allow_update:!0,update:function(){if(!this._allow_update)return this;var c=this.dates.copy(),d=[],e=!1;arguments.length?
(a.each(arguments,a.proxy(function(a,c){c instanceof Date&&(c=this._local_to_utc(c));d.push(c)},this)),e=!0):(d=(d=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?d.split(this.o.multidateSeparator):[d],delete this.element.data().date);d=a.map(d,a.proxy(function(a){return z.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));d=a.grep(d,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0);this.dates.replace(d);this.o.updateViewDate&&
(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate);e?(this.setValue(),this._silent||this.element.change()):this.dates.length&&String(c)!==String(this.dates)&&e&&!this._silent&&(this._trigger("changeDate"),this.element.change());this.dates.length||!c.length||this._silent||(this._trigger("clearDate"),this.element.change());this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var c=
this.o.weekStart,d="<tr>";for(this.o.calendarWeeks&&(d+='<th class="cw">&#160;</th>');c<this.o.weekStart+7;)d+='<th class="dow',-1!==a.inArray(c,this.o.daysOfWeekDisabled)&&(d+=" disabled"),d+='">'+w[this.o.language].daysMin[c++%7]+"</th>";d+="</tr>";this.picker.find(".datepicker-days thead").append(d)}},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),c="",d,e=0;12>e;e++)d=a&&a.getMonth()===e?" focused":"",c+='<span class="month'+d+'">'+w[this.o.language].monthsShort[e]+"</span>";
this.picker.find(".datepicker-months td").html(c)},setRange:function(c){c&&c.length?this.range=a.map(c,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(c){var f=[],h=this.viewDate.getUTCFullYear(),k=this.viewDate.getUTCMonth(),m=e();c.getUTCFullYear()<h||c.getUTCFullYear()===h&&c.getUTCMonth()<k?f.push("old"):(c.getUTCFullYear()>h||c.getUTCFullYear()===h&&c.getUTCMonth()>k)&&f.push("new");this.focusDate&&c.valueOf()===this.focusDate.valueOf()&&f.push("focused");
this.o.todayHighlight&&d(c,m)&&f.push("today");-1!==this.dates.contains(c)&&f.push("active");this.dateWithinRange(c)||f.push("disabled");this.dateIsDisabled(c)&&f.push("disabled","disabled-date");-1!==a.inArray(c.getUTCDay(),this.o.daysOfWeekHighlighted)&&f.push("highlighted");this.range&&(c>this.range[0]&&c<this.range[this.range.length-1]&&f.push("range"),-1!==a.inArray(c.valueOf(),this.range)&&f.push("selected"),c.valueOf()===this.range[0]&&f.push("range-start"),c.valueOf()===this.range[this.range.length-
1]&&f.push("range-end"));return f},_fill_yearsView:function(d,e,f,h,k,m,l){var n="",q=f/10;d=this.picker.find(d);f*=Math.floor(h/f);h=f+9*q;for(var t=Math.floor(this.viewDate.getFullYear()/q)*q,v=a.map(this.dates,function(a){return Math.floor(a.getUTCFullYear()/q)*q}),u,x,w,y=f-q;y<=h+q;y+=q)u=[e],x=null,y===f-q?u.push("old"):y===h+q&&u.push("new"),-1!==a.inArray(y,v)&&u.push("active"),(y<k||y>m)&&u.push("disabled"),y===t&&u.push("focused"),l!==a.noop&&(w=l(new Date(y,0,1)),w===c?w={}:"boolean"===
typeof w?w={enabled:w}:"string"===typeof w&&(w={classes:w}),!1===w.enabled&&u.push("disabled"),w.classes&&(u=u.concat(w.classes.split(/\s+/))),w.tooltip&&(x=w.tooltip)),n+='<span class="'+u.join(" ")+'"'+(x?' title="'+x+'"':"")+">"+y+"</span>";d.find(".datepicker-switch").text(f+"-"+h);d.find("td").html(n)},fill:function(){var d=new Date(this.viewDate),e=d.getUTCFullYear(),h=d.getUTCMonth(),k=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,m=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():
-Infinity,l=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,n=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,q=w[this.o.language].today||w.en.today||"",t=w[this.o.language].clear||w.en.clear||"",v=w[this.o.language].titleFormat||w.en.titleFormat;if(!isNaN(e)&&!isNaN(h)){this.picker.find(".datepicker-days .datepicker-switch").text(z.formatDate(d,v,this.o.language));this.picker.find("tfoot .today").text(q).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?
"table-cell":"none");this.picker.find("tfoot .clear").text(t).css("display",!0===this.o.clearBtn?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"===typeof this.o.title&&""!==this.o.title?"table-cell":"none");this.updateNavArrows();this.fillMonths();d=f(e,h,0);h=d.getUTCDate();d.setUTCDate(h-(d.getUTCDay()-this.o.weekStart+7)%7);h=new Date(d);100>d.getUTCFullYear()&&h.setUTCFullYear(d.getUTCFullYear());h.setUTCDate(h.getUTCDate()+42);h=h.valueOf();
q=[];for(var x;d.valueOf()<h;){t=d.getUTCDay();if(t===this.o.weekStart&&(q.push("<tr>"),this.o.calendarWeeks)){v=new Date(+d+(this.o.weekStart-t-7)%7*864E5);v=new Date(Number(v)+(11-v.getUTCDay())%7*864E5);var y=new Date(Number(y=f(v.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864E5);q.push('<td class="cw">'+((v-y)/864E5/7+1)+"</td>")}x=this.getClassNames(d);x.push("day");var ea=d.getUTCDate();if(this.o.beforeShowDay!==a.noop){v=this.o.beforeShowDay(this._utc_to_local(d));v===c?v={}:"boolean"===typeof v?
v={enabled:v}:"string"===typeof v&&(v={classes:v});!1===v.enabled&&x.push("disabled");v.classes&&(x=x.concat(v.classes.split(/\s+/)));if(v.tooltip)var X=v.tooltip;v.content&&(ea=v.content)}x=a.isFunction(a.uniqueSort)?a.uniqueSort(x):a.unique(x);q.push('<td class="'+x.join(" ")+'"'+(X?' title="'+X+'"':"")+' data-date="'+d.getTime().toString()+'">'+ea+"</td>");X=null;t===this.o.weekEnd&&q.push("</tr>");d.setUTCDate(d.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(q.join(""));X=w[this.o.language].monthsTitle||
w.en.monthsTitle||"Months";var S=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>this.o.maxViewMode?X:e).end().find("tbody span").removeClass("active");a.each(this.dates,function(a,c){c.getUTCFullYear()===e&&S.eq(c.getUTCMonth()).addClass("active")});(e<k||e>l)&&S.addClass("disabled");e===k&&S.slice(0,m).addClass("disabled");e===l&&S.slice(n+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var W=this;a.each(S,function(d,f){d=W.o.beforeShowMonth(new Date(e,d,1));
d===c?d={}:"boolean"===typeof d?d={enabled:d}:"string"===typeof d&&(d={classes:d});!1!==d.enabled||a(f).hasClass("disabled")||a(f).addClass("disabled");d.classes&&a(f).addClass(d.classes);d.tooltip&&a(f).prop("title",d.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,e,k,l,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,e,k,l,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,e,k,l,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=
new Date(this.viewDate),c=a.getUTCFullYear();a=a.getUTCMonth();var d=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,e=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,f=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,h=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,k=1;switch(this.viewMode){case 4:k*=10;case 3:k*=10;case 2:k*=10;case 1:var m=Math.floor(c/k)*k<d;var l=Math.floor(c/k)*k+k>f;break;case 0:m=c<=d&&a<e,l=
c>=f&&a>h}this.picker.find(".prev").toggleClass("disabled",m);this.picker.find(".next").toggleClass("disabled",l)}},click:function(c){c.preventDefault();c.stopPropagation();var d=a(c.target);d.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);d.hasClass("today")&&!d.hasClass("day")&&(this.setViewMode(0),this._setDate(e(),"linked"===this.o.todayBtn?null:"view"));d.hasClass("clear")&&this.clearDates();!d.hasClass("disabled")&&(d.hasClass("month")||
d.hasClass("year")||d.hasClass("decade")||d.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(c=d.parent().find("span").index(d),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(c)):(c=0,d=Number(d.text()),this.viewDate.setUTCFullYear(d)),this._trigger(z.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(f(d,c,1)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();
delete this._focused_from},dayCellClick:function(c){c=a(c.currentTarget).data("date");c=new Date(c);this.o.updateViewDate&&(c.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),c.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(c)},navArrowsClick:function(c){c=a(c.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(c*=12*z.viewModes[this.viewMode].navStep);this.viewDate=this.moveMonth(this.viewDate,
c);this._trigger(z.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(a){var c=this.dates.contains(a);a||this.dates.clear();-1!==c?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(c):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(a));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,c){c&&"date"!==c||this._toggle_multidate(a&&new Date(a));if(!c&&this.o.updateViewDate||
"view"===c)this.viewDate=a&&new Date(a);this.fill();this.setValue();c&&"view"===c||this._trigger("changeDate");this.inputField.trigger("change");!this.o.autoclose||c&&"date"!==c||this.hide()},moveDay:function(a,c){var d=new Date(a);d.setUTCDate(a.getUTCDate()+c);return d},moveWeek:function(a,c){return this.moveDay(a,7*c)},moveMonth:function(a,c){if(!a||isNaN(a.getTime()))return this.o.defaultViewDate;if(!c)return a;var d=new Date(a.valueOf());a=d.getUTCDate();var e=d.getUTCMonth(),f=Math.abs(c);c=
0<c?1:-1;if(1===f){f=-1===c?function(){return d.getUTCMonth()===e}:function(){return d.getUTCMonth()!==h};var h=e+c;d.setUTCMonth(h);h=(h+12)%12}else{for(var k=0;k<f;k++)d=this.moveMonth(d,c);h=d.getUTCMonth();d.setUTCDate(a);f=function(){return h!==d.getUTCMonth()}}for(;f();)d.setUTCDate(--a),d.setUTCMonth(h);return d},moveYear:function(a,c){return this.moveMonth(a,12*c)},moveAvailableDate:function(a,c,d){do{a=this[d](a,c);if(!this.dateWithinRange(a))return!1;d="moveDay"}while(this.dateIsDisabled(a));
return a},weekOfDateIsDisabled:function(c){return-1!==a.inArray(c.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(c){return this.weekOfDateIsDisabled(c)||0<a.grep(this.o.datesDisabled,function(a){return d(c,a)}).length},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var c=!1,d,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||
this.viewDate,this.fill()):this.hide();a.preventDefault();a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;var f=37===a.keyCode||38===a.keyCode?-1:1;if(0===this.viewMode)a.ctrlKey?(d=this.moveAvailableDate(e,f,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(d=this.moveAvailableDate(e,f,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===a.keyCode?d=this.moveAvailableDate(e,
f,"moveDay"):this.weekOfDateIsDisabled(e)||(d=this.moveAvailableDate(e,f,"moveWeek"));else if(1===this.viewMode){if(38===a.keyCode||40===a.keyCode)f*=4;d=this.moveAvailableDate(e,f,"moveMonth")}else if(2===this.viewMode){if(38===a.keyCode||40===a.keyCode)f*=4;d=this.moveAvailableDate(e,f,"moveYear")}d&&(this.focusDate=this.viewDate=d,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&
(this._toggle_multidate(e),c=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}c&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else if(40===a.keyCode||27===a.keyCode)this.show(),a.stopPropagation()},
setViewMode:function(a){this.viewMode=a;this.picker.children("div").hide().filter(".datepicker-"+z.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};var q=function(c,d){a.data(c,"datepicker",this);this.element=a(c);this.inputs=a.map(d.inputs,function(a){return a.jquery?a[0]:a});delete d.inputs;this.keepEmptyValues=d.keepEmptyValues;delete d.keepEmptyValues;y.call(a(this.inputs),d).on("changeDate",a.proxy(this.dateUpdated,this));
this.pickers=a.map(this.inputs,function(c){return a.data(c,"datepicker")});this.updateDates()};q.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var c=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,d){d.setRange(c)})},clearDates:function(){a.each(this.pickers,function(a,c){c.clearDates()})},dateUpdated:function(d){if(!this.updating){this.updating=!0;var e=a.data(d.target,
"datepicker");if(e!==c){var f=e.getUTCDate(),h=this.keepEmptyValues;d=a.inArray(d.target,this.inputs);var k=d-1,m=d+1,l=this.inputs.length;if(-1!==d){a.each(this.pickers,function(a,c){c.getUTCDate()||c!==e&&h||c.setUTCDate(f)});if(f<this.dates[k])for(;0<=k&&f<this.dates[k];)this.pickers[k--].setUTCDate(f);else if(f>this.dates[m])for(;m<l&&f>this.dates[m];)this.pickers[m++].setUTCDate(f);this.updateDates();delete this.updating}}}},destroy:function(){a.map(this.pickers,function(a){a.destroy()});a(this.inputs).off("changeDate",
this.dateUpdated);delete this.element.data().datepicker},remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var t=a.fn.datepicker,y=function(d){var e=Array.apply(null,arguments);e.shift();var f;this.each(function(){var c=a(this),h=c.data("datepicker"),m="object"===typeof d&&d;if(!h){h=k(this,"date");var t=a.extend({},v,h,m);t=l(t.language);m=a.extend({},v,t,h,m);c.hasClass("input-daterange")||m.inputs?(a.extend(m,{inputs:m.inputs||c.find("input").toArray()}),
h=new q(this,m)):h=new n(this,m);c.data("datepicker",h)}"string"===typeof d&&"function"===typeof h[d]&&(f=h[d].apply(h,e))});if(f===c||f instanceof n||f instanceof q)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+d+" function)");return f};a.fn.datepicker=y;var v=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,
clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",
templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},x=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=n;var w=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},z={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1E3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,
parseFormat:function(a){if("function"===typeof a.toValue&&"function"===typeof a.toDisplay)return a;var c=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!c||!c.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:c,parts:a}},parseDate:function(d,f,h,k){function m(a,c){!0===c&&(c=10);100>a&&(a+=2E3,a>(new Date).getFullYear()+c&&(a-=100));return a}function l(){var a=this.slice(0,x[t].length),c=x[t].slice(0,a.length);return a.toLowerCase()===c.toLowerCase()}
if(!d)return c;if(d instanceof Date)return d;"string"===typeof f&&(f=z.parseFormat(f));if(f.toValue)return f.toValue(d,f,h);var q={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},v={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},t;d in v&&(d=v[d]);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(d)){var x=d.match(/([\-+]\d+)([dmwy])/gi);d=new Date;for(t=0;t<x.length;t++)f=x[t].match(/([\-+]\d+)([dmwy])/i),h=Number(f[1]),v=q[f[2].toLowerCase()],d=n.prototype[v](d,h);return n.prototype._zero_utc_time(d)}x=
d&&d.match(this.nonpunctuation)||[];q={};var u="yyyy yy M MM m mm d dd".split(" ");v={yyyy:function(a,c){return a.setUTCFullYear(k?m(c,k):c)},m:function(a,c){if(isNaN(a))return a;for(--c;0>c;)c+=12;c%=12;for(a.setUTCMonth(c);a.getUTCMonth()!==c;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,c){return a.setUTCDate(c)}};v.yy=v.yyyy;v.M=v.MM=v.mm=v.m;v.dd=v.d;d=e();var y=f.parts.slice();x.length!==y.length&&(y=a(y).filter(function(c,d){return-1!==a.inArray(d,u)}).toArray());if(x.length===y.length){var A;
t=0;for(A=y.length;t<A;t++){var D=parseInt(x[t],10);f=y[t];if(isNaN(D))switch(f){case "MM":D=a(w[h].months).filter(l);D=a.inArray(D[0],w[h].months)+1;break;case "M":D=a(w[h].monthsShort).filter(l),D=a.inArray(D[0],w[h].monthsShort)+1}q[f]=D}for(t=0;t<u.length;t++)f=u[t],f in q&&!isNaN(q[f])&&(h=new Date(d),v[f](h,q[f]),isNaN(h)||(d=h))}return d},formatDate:function(c,d,e){if(!c)return"";"string"===typeof d&&(d=z.parseFormat(d));if(d.toDisplay)return d.toDisplay(c,d,e);e={d:c.getUTCDate(),D:w[e].daysShort[c.getUTCDay()],
DD:w[e].days[c.getUTCDay()],m:c.getUTCMonth()+1,M:w[e].monthsShort[c.getUTCMonth()],MM:w[e].months[c.getUTCMonth()],yy:c.getUTCFullYear().toString().substring(2),yyyy:c.getUTCFullYear()};e.dd=(10>e.d?"0":"")+e.d;e.mm=(10>e.m?"0":"")+e.m;c=[];for(var f=a.extend([],d.separators),h=0,k=d.parts.length;h<=k;h++)f.length&&c.push(f.shift()),c.push(e[d.parts[h]]);return c.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+v.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+
v.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};z.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+z.headTemplate+"<tbody></tbody>"+z.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+z.headTemplate+z.contTemplate+z.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
z.headTemplate+z.contTemplate+z.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+z.headTemplate+z.contTemplate+z.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+z.headTemplate+z.contTemplate+z.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=z;a.fn.datepicker.noConflict=function(){a.fn.datepicker=t;return this};a.fn.datepicker.version="1.8.0";a.fn.datepicker.deprecated=function(a){var c=window.console;
c&&c.warn&&c.warn("DEPRECATED: "+a)};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(c){var d=a(this);d.data("datepicker")||(c.preventDefault(),y.call(d,"show"))});a(function(){y.call(a('[data-provide="datepicker-inline"]'))})});
!(document.getElementById&&document.childNodes&&document.createElement)||window.MathJax&&MathJax.Hub||(window.MathJax=window.MathJax?{AuthorConfig:window.MathJax}:{},MathJax.isPacked=!0,MathJax.version="2.7.5",MathJax.fileversion="2.7.5",MathJax.cdnVersion="2.7.5",MathJax.cdnFileVersions={},function(a){var c=window[a];c||(c=window[a]={});var f=[];a=function(a){var c=a.constructor;c||(c=function(){});for(var d in a)"constructor"!==d&&a.hasOwnProperty(d)&&(c[d]=a[d]);return c};var e=function(){return function(){return arguments.callee.Init.call(this,
arguments)}};c.Object=a({constructor:e(),Subclass:function(a,c){var d=e();d.SUPER=this;d.Init=this.Init;d.Subclass=this.Subclass;d.Augment=this.Augment;d.protoFunction=this.protoFunction;d.can=this.can;d.has=this.has;d.isa=this.isa;d.prototype=new this(f);d.prototype.constructor=d;d.Augment(a,c);return d},Init:function(a){var c=this;if(1===a.length&&a[0]===f)return c;c instanceof a.callee||(c=new a.callee(f));return c.Init.apply(c,a)||c},Augment:function(a,c){var d;if(null!=a){for(d in a)a.hasOwnProperty(d)&&
this.protoFunction(d,a[d]);a.toString!==this.prototype.toString&&a.toString!=={}.toString&&this.protoFunction("toString",a.toString)}if(null!=c)for(d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);return this},protoFunction:function(a,c){this.prototype[a]=c;"function"===typeof c&&(c.SUPER=this.SUPER.prototype)},prototype:{Init:function(){},SUPER:function(a){return a.callee.SUPER},can:function(a){return"function"===typeof this[a]},has:function(a){return"undefined"!==typeof this[a]},isa:function(a){return a instanceof
Object&&this instanceof a}},can:function(a){return this.prototype.can.call(this,a)},has:function(a){return this.prototype.has.call(this,a)},isa:function(a){for(var c=this;c;){if(c===a)return!0;c=c.SUPER}return!1},SimpleSUPER:a({constructor:function(a){return this.SimpleSUPER.define(a)},define:function(a){var c={};if(null!=a){for(var d in a)a.hasOwnProperty(d)&&(c[d]=this.wrap(d,a[d]));a.toString!==this.prototype.toString&&a.toString!=={}.toString&&(c.toString=this.wrap("toString",a.toString))}return c},
wrap:function(a,c){if("function"!==typeof c||!c.toString().match(/\.\s*SUPER\s*\(/))return c;var d=function(){this.SUPER=d.SUPER[a];try{var e=c.apply(this,arguments)}catch(m){throw delete this.SUPER,m;}delete this.SUPER;return e};d.toString=function(){return c.toString.apply(c,arguments)};return d}})});c.Object.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.Object.Array=Array}("MathJax"),function(a){var c=window[a];c||(c=window[a]={});var f=c.Object.isArray,
e=function(a){var c=function(){return arguments.callee.execute.apply(arguments.callee,arguments)},d;for(d in e.prototype)e.prototype.hasOwnProperty(d)&&(c[d]="undefined"!==typeof a[d]?a[d]:e.prototype[d]);c.toString=e.prototype.toString;return c};e.prototype={isCallback:!0,hook:function(){},data:[],object:window,execute:function(){if(!this.called||this.autoReset)return this.called=!this.autoReset,this.hook.apply(this.object,this.data.concat([].slice.call(arguments,0)))},reset:function(){delete this.called},
toString:function(){return this.hook.toString.apply(this.hook,arguments)}};var d=function(a){return"function"===typeof a&&a.isCallback},h=function(a){return eval.call(window,a)},k=function(){h("var __TeSt_VaR__ = 1");if(window.__TeSt_VaR__)try{delete window.__TeSt_VaR__}catch(w){window.__TeSt_VaR__=null}else h=window.execScript?function(d){c.__code=d;d="try {"+a+".__result = eval("+a+".__code)} catch(err) {"+a+".__result = err}";window.execScript(d);d=c.__result;delete c.__result;delete c.__code;
if(d instanceof Error)throw d;return d}:function(d){c.__code=d;d="try {"+a+".__result = eval("+a+".__code)} catch(err) {"+a+".__result = err}";var e=document.getElementsByTagName("head")[0];e||(e=document.body);var f=document.createElement("script");f.appendChild(document.createTextNode(d));e.appendChild(f);e.removeChild(f);d=c.__result;delete c.__result;delete c.__code;if(d instanceof Error)throw d;return d};k=null},l=function(a,c){1<arguments.length&&(a=2===arguments.length&&"function"!==typeof arguments[0]&&
arguments[0]instanceof Object&&"number"===typeof arguments[1]?[].slice.call(a,c):[].slice.call(arguments,0));f(a)&&1===a.length&&"function"===typeof a[0]&&(a=a[0]);if("function"===typeof a)return a.execute===e.prototype.execute?a:e({hook:a});if(f(a)){if("string"===typeof a[0]&&a[1]instanceof Object&&"function"===typeof a[1][a[0]])return e({hook:a[1][a[0]],object:a[1],data:a.slice(2)});if("function"===typeof a[0])return e({hook:a[0],data:a.slice(1)});if("function"===typeof a[1])return e({hook:a[1],
object:a[0],data:a.slice(2)})}else{if("string"===typeof a)return k&&k(),e({hook:h,data:[a]});if(a instanceof Object)return e(a);if("undefined"===typeof a)return e({})}throw Error("Can't make callback from given data");},m=function(a,c){a=l(a);a.called||(q(a,c),c.pending++)},n=function(){var a=this.signal;delete this.signal;this.execute=this.oldExecute;delete this.oldExecute;var c=this.execute.apply(this,arguments);if(d(c)&&!c.called)q(c,a);else{c=0;for(var e=a.length;c<e;c++)a[c].pending--,0>=a[c].pending&&
a[c].call()}},q=function(a,c){f(c)||(c=[c]);a.signal?1===c.length?a.signal.push(c[0]):a.signal=a.signal.concat(c):(a.oldExecute=a.execute,a.execute=n,a.signal=c)},t=function(a){a=l(a);a.pending=0;for(var c=1,e=arguments.length;c<e;c++)arguments[c]&&m(arguments[c],a);0===a.pending&&(c=a(),d(c)&&(a=c));return a},y=MathJax.Object.Subclass({Init:function(a){this.hooks=[];this.remove=[];this.reset=a;this.running=!1},Add:function(a,c){null==c&&(c=10);d(a)||(a=l(a));a.priority=c;for(var e=this.hooks.length;0<
e&&c<this.hooks[e-1].priority;)e--;this.hooks.splice(e,0,a);return a},Remove:function(a){for(var c=0,d=this.hooks.length;c<d;c++)if(this.hooks[c]===a){this.running?this.remove.push(c):this.hooks.splice(c,1);break}},Execute:function(){var a=[{}];this.running=!0;for(var c=0,e=this.hooks.length;c<e;c++){this.reset&&this.hooks[c].reset();var f=this.hooks[c].apply(window,arguments);d(f)&&!f.called&&a.push(f)}this.running=!1;this.remove.length&&this.RemovePending();return 1===a.length?null:2===a.length?
a[1]:t.apply({},a)},RemovePending:function(){this.remove=this.remove.sort();for(var a=this.remove.length-1;0<=a;a--)this.hooks.splice(a,1);this.remove=[]}}),v=c.Object.Subclass({Init:function(){this.pending=this.running=0;this.queue=[];this.Push.apply(this,arguments)},Push:function(){for(var a,c=0,d=arguments.length;c<d;c++)a=l(arguments[c]),a!==arguments[c]||a.called||(a=l(["wait",this,a])),this.queue.push(a);this.running||this.pending||this.Process();return a},Process:function(a){for(;!this.running&&
!this.pending&&this.queue.length;){var c=this.queue[0];a=this.queue.slice(1);this.queue=[];this.Suspend();c=c();this.Resume();a.length&&(this.queue=a.concat(this.queue));d(c)&&!c.called&&m(c,this)}},Suspend:function(){this.running++},Resume:function(){this.running&&this.running--},call:function(){this.Process.apply(this,arguments)},wait:function(a){return a}}),x=v.Subclass({Init:function(a){v.prototype.Init.call(this);this.name=a;this.posted=[];this.listeners=y(!0);this.posting=!1;this.callback=null},
Post:function(a,c,e){c=l(c);this.posting||this.pending?this.Push(["Post",this,a,c,e]):(this.callback=c,c.reset(),e||this.posted.push(a),this.Suspend(),this.posting=!0,a=this.listeners.Execute(a),d(a)&&!a.called&&m(a,this),this.Resume(),this.posting=!1,this.pending||this.call());return c},Clear:function(a){a=l(a);this.posting||this.pending?a=this.Push(["Clear",this,a]):(this.posted=[],a());return a},call:function(){this.callback(this);this.Process()},Interest:function(a,c,e){a=l(a);this.listeners.Add(a,
e);if(!c)for(c=0,e=this.posted.length;c<e;c++){a.reset();var f=a(this.posted[c]);d(f)&&c===this.posted.length-1&&m(f,this)}return a},NoInterest:function(a){this.listeners.Remove(a)},MessageHook:function(a,c,d){c=l(c);this.hooks||(this.hooks={},this.Interest(["ExecuteHooks",this]));this.hooks[a]||(this.hooks[a]=y(!0));this.hooks[a].Add(c,d);d=0;for(var e=this.posted.length;d<e;d++)this.posted[d]==a&&(c.reset(),c(this.posted[d]));c.msg=a;return c},ExecuteHooks:function(a){var c=f(a)?a[0]:a;return this.hooks[c]?
this.hooks[c].Execute(a):null},RemoveHook:function(a){this.hooks[a.msg].Remove(a)}},{signals:{},find:function(a){x.signals[a]||(x.signals[a]=new x(a));return x.signals[a]}});c.Callback=c.CallBack=l;c.Callback.Delay=function(a,c){c=l(c);c.timeout=setTimeout(c,a);return c};c.Callback.After=t;c.Callback.Queue=v;c.Callback.Signal=x.find;c.Callback.Hooks=y;c.Callback.ExecuteHooks=function(a,c,d){if(!a)return null;f(a)||(a=[a]);f(c)||(c=null==c?[]:[c]);d=y(d);for(var e=0,h=a.length;e<h;e++)d.Add(a[e]);
return d.Execute.apply(d,c)}}("MathJax"),function(a){var c=window[a];c||(c=window[a]={});var f="Apple Computer, Inc."===navigator.vendor&&"undefined"===typeof navigator.vendorSub,e=0,d=function(a){document.styleSheets&&document.styleSheets.length>e&&(e=document.styleSheets.length);a||(a=document.head||document.getElementsByTagName("head")[0],a||(a=document.body));return a},h=[],k=function(){for(var a=0,d=h.length;a<d;a++)c.Ajax.head.removeChild(h[a]);h=[]},l={};l[a]="";l.a11y="[MathJax]/extensions/a11y";
l.Contrib="https://cdn.mathjax.org/mathjax/contrib";c.Ajax={loaded:{},loading:{},loadHooks:{},timeout:15E3,styleDelay:1,config:{root:"",path:l},params:{},STATUS:{OK:1,ERROR:-1},fileURL:function(a){for(var c;(c=a.match(/^\[([-._a-z0-9]+)\]/i))&&l.hasOwnProperty(c[1]);)a=(l[c[1]]||this.config.root)+a.substr(c[1].length+2);return a},fileName:function(c){var d=this.config.root;c.substr(0,d.length)===d&&(c="["+a+"]"+c.substr(d.length));do{d=!1;for(var e in l)if(l.hasOwnProperty(e)&&l[e]&&c.substr(0,l[e].length)===
l[e]){c="["+e+"]"+c.substr(l[e].length);d=!0;break}}while(d);return c},fileRev:function(a){(a=c.cdnFileVersions[a]||c.cdnVersion||"")&&(a="?V="+a);return a},urlRev:function(a){return this.fileURL(a)+this.fileRev(a)},Require:function(a,d){d=c.Callback(d);if(a instanceof Object)for(var e in a){if(a.hasOwnProperty(e)){var f=e.toUpperCase();a=a[e]}}else f=a.split(/\./).pop().toUpperCase();this.params.noContrib&&"[Contrib]"===a.substr(0,9)?d(this.STATUS.ERROR):(a=this.fileURL(a),this.loaded[a]?d(this.loaded[a]):
(e={},e[f]=a,this.Load(e,d)));return d},Load:function(a,e){e=c.Callback(e);if(a instanceof Object)for(var f in a){if(a.hasOwnProperty(f)){var h=f.toUpperCase();a=a[f]}}else h=a.split(/\./).pop().toUpperCase();a=this.fileURL(a);if(this.loading[a])this.addHook(a,e);else if(this.head=d(this.head),this.loader[h])this.loader[h].call(this,a,e);else throw Error("Can't load files of type "+h);return e},LoadHook:function(a,d,e){d=c.Callback(d);if(a instanceof Object)for(var f in a)a.hasOwnProperty(f)&&(a=
a[f]);a=this.fileURL(a);this.loaded[a]?d(this.loaded[a]):this.addHook(a,d,e);return d},addHook:function(a,c,d){this.loadHooks[a]||(this.loadHooks[a]=MathJax.Callback.Hooks());this.loadHooks[a].Add(c,d);c.file=a},removeHook:function(a){this.loadHooks[a.file]&&(this.loadHooks[a.file].Remove(a),this.loadHooks[a.file].hooks.length||delete this.loadHooks[a.file])},Preloading:function(){for(var a=0,c=arguments.length;a<c;a++){var d=this.fileURL(arguments[a]);this.loading[d]||(this.loading[d]={preloaded:!0})}},
loader:{JS:function(a,d){var e=this.fileName(a),f=document.createElement("script"),h=c.Callback(["loadTimeout",this,a]);this.loading[a]={callback:d,timeout:setTimeout(h,this.timeout),status:this.STATUS.OK,script:f};this.loading[a].message=c.Message.File(e);f.onerror=h;f.type="text/javascript";f.src=a+this.fileRev(e);this.head.appendChild(f)},CSS:function(a,d){var e=this.fileName(a),f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=a+this.fileRev(e);this.loading[a]={callback:d,
message:c.Message.File(e),status:this.STATUS.OK};this.head.appendChild(f);this.timer.create.call(this,[this.timer.file,a],f)}},timer:{create:function(a,d){a=c.Callback(a);"STYLE"===d.nodeName&&d.styleSheet&&"undefined"!==typeof d.styleSheet.cssText?a(this.STATUS.OK):window.chrome&&"LINK"===d.nodeName?a(this.STATUS.OK):f?this.timer.start(this,[this.timer.checkSafari2,e++,a],this.styleDelay):this.timer.start(this,[this.timer.checkLength,d,a],this.styleDelay);return a},start:function(a,d,e,f){d=c.Callback(d);
d.execute=this.execute;d.time=this.time;d.STATUS=a.STATUS;d.timeout=f||a.timeout;d.delay=d.total=e||0;e?setTimeout(d,e):d()},time:function(a){this.total+=this.delay;this.delay=Math.floor(1.05*this.delay+5);return this.total>=this.timeout?(a(this.STATUS.ERROR),1):0},file:function(a,d){0>d?c.Ajax.loadTimeout(a):c.Ajax.loadComplete(a)},execute:function(){this.hook.call(this.object,this,this.data[0],this.data[1])},checkSafari2:function(a,c,d){a.time(d)||(document.styleSheets.length>c&&document.styleSheets[c].cssRules&&
document.styleSheets[c].cssRules.length?d(a.STATUS.OK):setTimeout(a,a.delay))},checkLength:function(a,d,e){if(!a.time(e)){var f=0;d=d.sheet||d.styleSheet;try{0<(d.cssRules||d.rules||[]).length&&(f=1)}catch(y){y.message.match(/protected variable|restricted URI/)?f=1:y.message.match(/Security error/)&&(f=1)}f?setTimeout(c.Callback([e,a.STATUS.OK]),0):setTimeout(a,a.delay)}}},loadComplete:function(a){a=this.fileURL(a);var d=this.loading[a];d&&!d.preloaded?(c.Message.Clear(d.message),clearTimeout(d.timeout),
d.script&&(0===h.length&&setTimeout(k,0),h.push(d.script)),this.loaded[a]=d.status,delete this.loading[a],this.addHook(a,d.callback)):(d&&delete this.loading[a],this.loaded[a]=this.STATUS.OK,d={status:this.STATUS.OK});return this.loadHooks[a]?this.loadHooks[a].Execute(d.status):null},loadTimeout:function(a){this.loading[a].timeout&&clearTimeout(this.loading[a].timeout);this.loading[a].status=this.STATUS.ERROR;this.loadError(a);this.loadComplete(a)},loadError:function(a){c.Message.Set(["LoadFailed",
"File failed to load: %1",a],null,2E3);c.Hub.signal.Post(["file load error",a])},Styles:function(a,e){a=this.StyleString(a);if(""===a)e=c.Callback(e),e();else{var f=document.createElement("style");f.type="text/css";this.head=d(this.head);this.head.appendChild(f);f.styleSheet&&"undefined"!==typeof f.styleSheet.cssText?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a));e=this.timer.create.call(this,e,f)}return e},StyleString:function(a){if("string"===typeof a)return a;var d="",e;for(e in a)if(a.hasOwnProperty(e))if("string"===
typeof a[e])d+=e+" {"+a[e]+"}\n";else if(c.Object.isArray(a[e]))for(var f=0;f<a[e].length;f++){var h={};h[e]=a[e][f];d+=this.StyleString(h)}else if("@media"===e.substr(0,6))d+=e+" {"+this.StyleString(a[e])+"}\n";else if(null!=a[e]){h=[];for(var k in a[e])a[e].hasOwnProperty(k)&&null!=a[e][k]&&(h[h.length]=k+": "+a[e][k]);d+=e+" {"+h.join("; ")+"}\n"}return d}}}("MathJax"),MathJax.HTML={Element:function(a,c,f){var e=document.createElement(a),d;if(c){if(c.hasOwnProperty("style")){var h=c.style;c.style=
{};for(d in h)h.hasOwnProperty(d)&&(c.style[d.replace(/-([a-z])/g,this.ucMatch)]=h[d])}MathJax.Hub.Insert(e,c);for(d in c)"role"!==d&&"aria-"!==d.substr(0,5)||e.setAttribute(d,c[d])}if(f)for(MathJax.Object.isArray(f)||(f=[f]),c=0,d=f.length;c<d;c++)MathJax.Object.isArray(f[c])?e.appendChild(this.Element(f[c][0],f[c][1],f[c][2])):"script"===a?this.setScript(e,f[c]):e.appendChild(document.createTextNode(f[c]));return e},ucMatch:function(a,c){return c.toUpperCase()},addElement:function(a,c,f,e){return a.appendChild(this.Element(c,
f,e))},TextNode:function(a){return document.createTextNode(a)},addText:function(a,c){return a.appendChild(this.TextNode(c))},setScript:function(a,c){if(this.setScriptBug)a.text=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);this.addText(a,c)}},getScript:function(a){return(""===a.text?a.innerHTML:a.text).replace(/^\s+/,"").replace(/\s+$/,"")},Cookie:{prefix:"mjx",expires:365,Set:function(a,c){var f=[];if(c)for(var e in c)c.hasOwnProperty(e)&&f.push(e+":"+c[e].toString().replace(/&/g,"&&"));
a=this.prefix+"."+a+"="+escape(f.join("&;"));this.expires&&(c=new Date,c.setDate(c.getDate()+this.expires),a+="; expires="+c.toGMTString());try{document.cookie=a+"; path=/"}catch(d){}},Get:function(a,c){c||(c={});a=new RegExp("(?:^|;\\s*)"+this.prefix+"\\."+a+"=([^;]*)(?:;|$)");try{var f=a.exec(document.cookie)}catch(k){}if(f&&""!==f[1]){a=unescape(f[1]).split("&;");for(var e=0,d=a.length;e<d;e++){f=a[e].match(/([^:]+):(.*)/);var h=f[2].replace(/&&/g,"&");"true"===h?h=!0:"false"===h?h=!1:h.match(/^-?(\d+(\.\d+)?|\.\d+)$/)&&
(h=parseFloat(h));c[f[1]]=h}}return c}}},MathJax.Localization={locale:"en",directory:"[MathJax]/localization",strings:{ar:{menuTitle:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},ast:{menuTitle:"asturianu"},bg:{menuTitle:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},bcc:{menuTitle:"\u0628\u0644\u0648\u0686\u06cc"},br:{menuTitle:"brezhoneg"},ca:{menuTitle:"catal\u00e0"},cdo:{menuTitle:"M\u00ecng-d\u0115\u0324ng-ng\u1e73\u0304"},cs:{menuTitle:"\u010de\u0161tina"},da:{menuTitle:"dansk"},
de:{menuTitle:"Deutsch"},diq:{menuTitle:"Zazaki"},en:{menuTitle:"English",isLoaded:!0},eo:{menuTitle:"Esperanto"},es:{menuTitle:"espa\u00f1ol"},fa:{menuTitle:"\u0641\u0627\u0631\u0633\u06cc"},fi:{menuTitle:"suomi"},fr:{menuTitle:"fran\u00e7ais"},gl:{menuTitle:"galego"},he:{menuTitle:"\u05e2\u05d1\u05e8\u05d9\u05ea"},ia:{menuTitle:"interlingua"},it:{menuTitle:"italiano"},ja:{menuTitle:"\u65e5\u672c\u8a9e"},kn:{menuTitle:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},ko:{menuTitle:"\ud55c\uad6d\uc5b4"},lb:{menuTitle:"L\u00ebtzebuergesch"},
lki:{menuTitle:"\u0644\u06d5\u06a9\u06cc"},lt:{menuTitle:"lietuvi\u0173"},mk:{menuTitle:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438"},nl:{menuTitle:"Nederlands"},oc:{menuTitle:"occitan"},pl:{menuTitle:"polski"},pt:{menuTitle:"portugu\u00eas"},"pt-br":{menuTitle:"portugu\u00eas do Brasil"},ru:{menuTitle:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"},sco:{menuTitle:"Scots"},scn:{menuTitle:"sicilianu"},sk:{menuTitle:"sloven\u010dina"},sl:{menuTitle:"sloven\u0161\u010dina"},sv:{menuTitle:"svenska"},
th:{menuTitle:"\u0e44\u0e17\u0e22"},tr:{menuTitle:"T\u00fcrk\u00e7e"},uk:{menuTitle:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},vi:{menuTitle:"Ti\u1ebfng Vi\u1ec7t"},"zh-hans":{menuTitle:"\u4e2d\u6587\uff08\u7b80\u4f53\uff09"},"zh-hant":{menuTitle:"\u6c49\u8bed"}},pattern:/%(\d+|\{\d+\}|\{[a-z]+:%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,SPLIT:3==="axb".split(/(x)/).length?function(a,c){return a.split(c)}:function(a,c){var f=[],e,d=0;for(c.lastIndex=0;e=c.exec(a);)f.push(a.substr(d,
e.index-d)),f.push.apply(f,e.slice(1)),d=e.index+e[0].length;f.push(a.substr(d));return f},_:function(a,c){return MathJax.Object.isArray(c)?this.processSnippet(a,c):this.processString(this.lookupPhrase(a,c),[].slice.call(arguments,2))},processString:function(a,c,f){var e,d=MathJax.Object.isArray;var h=0;for(e=c.length;h<e;h++)f&&d(c[h])&&(c[h]=this.processSnippet(f,c[h]));a=this.SPLIT(a,this.pattern);h=1;for(e=a.length;h<e;h+=2){var k=a[h].charAt(0);if("0"<=k&&"9">=k)a[h]=c[a[h]-1],"number"===typeof a[h]&&
(a[h]=this.number(a[h]));else if("{"===k)if(k=a[h].substr(1),"0"<=k&&"9">=k)a[h]=c[a[h].substr(1,a[h].length-2)-1],"number"===typeof a[h]&&(a[h]=this.number(a[h]));else{var l=a[h].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/);l&&("plural"===l[1]?(k=c[l[2]-1],"undefined"===typeof k?a[h]="???":(k=this.plural(k)-1,l=l[3].replace(/(^|[^%])(%%)*%\|/g,"$1$2%\uefef").split(/\|/),a[h]=0<=k&&k<l.length?this.processString(l[k].replace(/\uEFEF/g,"|"),c,f):"???")):a[h]="%"+a[h])}null==a[h]&&(a[h]="???")}if(!f)return a.join("");
c=[];f="";for(h=0;h<e;h++)f+=a[h],h++,h<e&&(d(a[h])?(c.push(f),c=c.concat(a[h]),f=""):f+=a[h]);""!==f&&c.push(f);return c},processSnippet:function(a,c){for(var f=[],e=0,d=c.length;e<d;e++)if(MathJax.Object.isArray(c[e])){var h=c[e];if("string"===typeof h[1]){var k=h[0];MathJax.Object.isArray(k)||(k=[a,k]);k=this.lookupPhrase(k,h[1]);f=f.concat(this.processMarkdown(k,h.slice(2),a))}else MathJax.Object.isArray(h[1])?f=f.concat(this.processSnippet.apply(this,h)):3<=h.length?f.push([h[0],h[1],this.processSnippet(a,
h[2])]):f.push(c[e])}else f.push(c[e]);return f},markdownPattern:/(%.)|(\*{1,3})((?:%.|.)+?)\2|(`+)((?:%.|.)+?)\4|\[((?:%.|.)+?)\]\(([^\s\)]+)\)/,processMarkdown:function(a,c,f){for(var e=[],d=a.split(this.markdownPattern),h=d[0],k=1,l=d.length;k<l;k+=8)d[k+1]?(a=this.processString(d[k+2],c,f),MathJax.Object.isArray(a)||(a=[a]),a=[["b","i","i"][d[k+1].length-1],{},a],3===d[k+1].length&&(a=["b",{},a])):d[k+3]?(a=this.processString(d[k+4].replace(/^\s/,"").replace(/\s$/,""),c,f),MathJax.Object.isArray(a)||
(a=[a]),a=["code",{},a]):d[k+5]?(a=this.processString(d[k+5],c,f),MathJax.Object.isArray(a)||(a=[a]),a=["a",{href:this.processString(d[k+6],c),target:"_blank"},a]):(h+=d[k],a=null),a&&(e=this.concatString(e,h,c,f),e.push(a),h=""),""!==d[k+7]&&(h+=d[k+7]);return e=this.concatString(e,h,c,f)},concatString:function(a,c,f,e){""!=c&&(c=this.processString(c,f,e),MathJax.Object.isArray(c)||(c=[c]),a=a.concat(c));return a},lookupPhrase:function(a,c,f){f||(f="_");MathJax.Object.isArray(a)&&(f=a[0]||"_",a=
a[1]||"");var e=this.loadDomain(f);e&&MathJax.Hub.RestartAfter(e);(e=this.strings[this.locale])&&e.domains&&f in e.domains&&(f=e.domains[f],f.strings&&a in f.strings&&(c=f.strings[a]));return c},loadFile:function(a,c,f){f=MathJax.Callback(f);a=c.file||a;a.match(/\.js$/)||(a+=".js");a.match(/^([a-z]+:|\[MathJax\])/)||(a=(this.strings[this.locale].directory||this.directory+"/"+this.locale||"[MathJax]/localization/"+this.locale)+"/"+a);a=MathJax.Ajax.Require(a,function(){c.isLoaded=!0;return f()});return a.called?
null:a},loadDomain:function(a,c){var f,e=this.strings[this.locale];if(e){if(!e.isLoaded&&(f=this.loadFile(this.locale,e)))return MathJax.Callback.Queue(f,["loadDomain",this,a]).Push(c||{});if(e.domains&&a in e.domains&&(f=e.domains[a],!f.isLoaded&&(f=this.loadFile(a,f))))return MathJax.Callback.Queue(f).Push(c)}return MathJax.Callback(c)()},Try:function(a){a=MathJax.Callback(a);a.autoReset=!0;try{a()}catch(c){if(!c.restart)throw c;MathJax.Callback.After(["Try",this,a],c.restart)}},resetLocale:function(a){if(a){for(a=
a.toLowerCase();!this.strings[a];){var c=a.lastIndexOf("-");if(-1===c)return;a=a.substring(0,c)}this.locale=(c=this.strings[a].remap)?c:a;MathJax.Callback.Signal("Hub").Post(["Locale Reset",this.locale])}},setLocale:function(a){this.resetLocale(a);MathJax.Menu&&this.loadDomain("MathMenu")},addTranslation:function(a,c,f){var e=this.strings[a],d=!1;e||(e=this.strings[a]={},d=!0);e.domains||(e.domains={});c&&(e.domains[c]||(e.domains[c]={}),e=e.domains[c]);MathJax.Hub.Insert(e,f);d&&MathJax.Menu.menu&&
MathJax.Menu.CreateLocaleMenu()},setCSS:function(a){var c=this.strings[this.locale];c&&(c.fontFamily&&(a.style.fontFamily=c.fontFamily),c.fontDirection&&(a.style.direction=c.fontDirection,"rtl"===c.fontDirection&&(a.style.textAlign="right")));return a},fontFamily:function(){var a=this.strings[this.locale];return a?a.fontFamily:null},fontDirection:function(){var a=this.strings[this.locale];return a?a.fontDirection:null},plural:function(a){var c=this.strings[this.locale];return c&&c.plural?c.plural(a):
1==a?1:2},number:function(a){var c=this.strings[this.locale];return c&&c.number?c.number(a):a}},MathJax.Message={ready:!1,log:[{}],current:null,textNodeBug:"Apple Computer, Inc."===navigator.vendor&&"undefined"===typeof navigator.vendorSub||window.hasOwnProperty&&window.hasOwnProperty("konqueror"),styles:{"#MathJax_Message":{position:"fixed",left:"1px",bottom:"2px","background-color":"#E6E6E6",border:"1px solid #959595",margin:"0px",padding:"2px 8px","z-index":"102",color:"black","font-size":"80%",
width:"auto","white-space":"nowrap"},"#MathJax_MSIE_Frame":{position:"absolute",top:0,left:0,width:"0px","z-index":101,border:"0px",margin:"0px",padding:"0px"}},browsers:{MSIE:function(a){MathJax.Message.msieFixedPositionBug=7>(document.documentMode||0);MathJax.Message.msieFixedPositionBug&&(MathJax.Hub.config.styles["#MathJax_Message"].position="absolute");MathJax.Message.quirks="BackCompat"===document.compatMode},Chrome:function(a){MathJax.Hub.config.styles["#MathJax_Message"].bottom="1.5em";MathJax.Hub.config.styles["#MathJax_Message"].left=
"1em"}},Init:function(a){a&&(this.ready=!0);if(!document.body||!this.ready)return!1;this.div&&null==this.div.parentNode&&(this.text=(this.div=document.getElementById("MathJax_Message"))?this.div.firstChild:null);this.div||(a=document.body,this.msieFixedPositionBug&&window.attachEvent&&(a=this.frame=this.addDiv(document.body),a.removeAttribute("id"),a.style.position="absolute",a.style.border=a.style.margin=a.style.padding="0px",a.style.zIndex="101",a.style.height="0px",a=this.addDiv(a),a.id="MathJax_MSIE_Frame",
window.attachEvent("onscroll",this.MoveFrame),window.attachEvent("onresize",this.MoveFrame),this.MoveFrame()),this.div=this.addDiv(a),this.div.style.display="none");this.text||(this.text=this.div.appendChild(document.createTextNode("")));return!0},addDiv:function(a){var c=document.createElement("div");c.id="MathJax_Message";a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c);return c},MoveFrame:function(){var a=MathJax.Message.quirks?document.body:document.documentElement,c=MathJax.Message.frame;
c.style.left=a.scrollLeft+"px";c.style.top=a.scrollTop+"px";c.style.width=a.clientWidth+"px";c=c.firstChild;c.style.height=a.clientHeight+"px"},localize:function(a){return MathJax.Localization._(a,a)},filterText:function(a,c,f){"simple"===MathJax.Hub.config.messageStyle&&("LoadFile"===f?(this.loading||(this.loading=this.localize("Loading")+" "),a=this.loading,this.loading+="."):"ProcessMath"===f?(this.processing||(this.processing=this.localize("Processing")+" "),a=this.processing,this.processing+=
"."):"TypesetMath"===f&&(this.typesetting||(this.typesetting=this.localize("Typesetting")+" "),a=this.typesetting,this.typesetting+="."));return a},clearCounts:function(){delete this.loading;delete this.processing;delete this.typesetting},Set:function(a,c,f){null==c&&(c=this.log.length,this.log[c]={});var e="";if(MathJax.Object.isArray(a)){e=a[0];MathJax.Object.isArray(e)&&(e=e[1]);try{a=MathJax.Localization._.apply(MathJax.Localization,a)}catch(d){if(!d.restart)throw d;if(!d.restart.called)return null==
this.log[c].restarted&&(this.log[c].restarted=0),this.log[c].restarted++,delete this.log[c].cleared,MathJax.Callback.After(["Set",this,a,c,f],d.restart),c}}this.timer&&(clearTimeout(this.timer),delete this.timer);this.log[c].text=a;this.log[c].filteredText=a=this.filterText(a,c,e);"undefined"===typeof this.log[c].next&&(this.log[c].next=this.current,null!=this.current&&(this.log[this.current].prev=c),this.current=c);this.current===c&&"none"!==MathJax.Hub.config.messageStyle&&(this.Init()?(this.textNodeBug?
this.div.innerHTML=a:this.text.nodeValue=a,this.div.style.display="",this.status&&(window.status="",delete this.status)):(window.status=a,this.status=!0));this.log[c].restarted&&(this.log[c].cleared&&(f=0),0===--this.log[c].restarted&&delete this.log[c].cleared);f?setTimeout(MathJax.Callback(["Clear",this,c]),f):0==f&&this.Clear(c,0);return c},Clear:function(a,c){null!=this.log[a].prev&&(this.log[this.log[a].prev].next=this.log[a].next);null!=this.log[a].next&&(this.log[this.log[a].next].prev=this.log[a].prev);
this.current===a&&(this.current=this.log[a].next,this.text?(null==this.div.parentNode&&this.Init(),null==this.current?(this.timer&&(clearTimeout(this.timer),delete this.timer),null==c&&(c=600),0===c?this.Remove():this.timer=setTimeout(MathJax.Callback(["Remove",this]),c)):"none"!==MathJax.Hub.config.messageStyle&&(this.textNodeBug?this.div.innerHTML=this.log[this.current].filteredText:this.text.nodeValue=this.log[this.current].filteredText),this.status&&(window.status="",delete this.status)):this.status&&
(window.status=null==this.current?"":this.log[this.current].text));delete this.log[a].next;delete this.log[a].prev;delete this.log[a].filteredText;this.log[a].restarted&&(this.log[a].cleared=!0)},Remove:function(){this.text.nodeValue="";this.div.style.display="none"},File:function(a){return this.Set(["LoadFile","Loading %1",a],null,null)},Log:function(){for(var a=[],c=1,f=this.log.length;c<f;c++)a[c]=this.log[c].text;return a.join("\n")}},MathJax.Hub={config:{root:"",config:[],styleSheets:[],styles:{".MathJax_Preview":{color:"#888"}},
jax:[],extensions:[],preJax:null,postJax:null,displayAlign:"center",displayIndent:"0",preRemoveClass:"MathJax_Preview",showProcessingMessages:!0,messageStyle:"normal",delayStartupUntil:"none",skipStartupTypeset:!1,elements:[],positionToHash:!0,showMathMenu:!0,showMathMenuMSIE:!0,menuSettings:{zoom:"None",CTRL:!1,ALT:!1,CMD:!1,Shift:!1,discoverable:!1,zscale:"200%",renderer:null,font:"Auto",context:"MathJax",locale:null,mpContext:!1,mpMouse:!1,texHints:!0,FastPreview:null,assistiveMML:null,inTabOrder:!0,
semantics:!1},errorSettings:{message:["[",["MathProcessingError","Math Processing Error"],"]"],style:{color:"#CC0000","font-style":"italic"}},ignoreMMLattributes:{}},preProcessors:MathJax.Callback.Hooks(!0),inputJax:{},outputJax:{order:{}},processSectionDelay:50,processUpdateTime:250,processUpdateDelay:10,signal:MathJax.Callback.Signal("Hub"),Config:function(a){this.Insert(this.config,a);this.config.Augment&&this.Augment(this.config.Augment)},CombineConfig:function(a,c){var f=this.config;a=a.split(/\./);
for(var e=0,d=a.length;e<d;e++){var h=a[e];f[h]||(f[h]={});var k=f;f=f[h]}return k[h]=f=this.Insert(c,f)},Register:{PreProcessor:function(){return MathJax.Hub.preProcessors.Add.apply(MathJax.Hub.preProcessors,arguments)},MessageHook:function(){return MathJax.Hub.signal.MessageHook.apply(MathJax.Hub.signal,arguments)},StartupHook:function(){return MathJax.Hub.Startup.signal.MessageHook.apply(MathJax.Hub.Startup.signal,arguments)},LoadHook:function(){return MathJax.Ajax.LoadHook.apply(MathJax.Ajax,
arguments)}},UnRegister:{PreProcessor:function(a){MathJax.Hub.preProcessors.Remove(a)},MessageHook:function(a){MathJax.Hub.signal.RemoveHook(a)},StartupHook:function(a){MathJax.Hub.Startup.signal.RemoveHook(a)},LoadHook:function(a){MathJax.Ajax.removeHook(a)}},getAllJax:function(a){var c=[];a=this.elementScripts(a);for(var f=0,e=a.length;f<e;f++)a[f].MathJax&&a[f].MathJax.elementJax&&c.push(a[f].MathJax.elementJax);return c},getJaxByType:function(a,c){var f=[];c=this.elementScripts(c);for(var e=0,
d=c.length;e<d;e++)c[e].MathJax&&c[e].MathJax.elementJax&&c[e].MathJax.elementJax.mimeType===a&&f.push(c[e].MathJax.elementJax);return f},getJaxByInputType:function(a,c){var f=[];c=this.elementScripts(c);for(var e=0,d=c.length;e<d;e++)c[e].MathJax&&c[e].MathJax.elementJax&&c[e].type&&c[e].type.replace(/ *;(.|\s)*/,"")===a&&f.push(c[e].MathJax.elementJax);return f},getJaxFor:function(a){"string"===typeof a&&(a=document.getElementById(a));if(a&&a.MathJax)return a.MathJax.elementJax;if(this.isMathJaxNode(a)){a.isMathJax||
(a=a.firstChild);for(;a&&!a.jaxID;)a=a.parentNode;if(a)return MathJax.OutputJax[a.jaxID].getJaxFromMath(a)}return null},isJax:function(a){"string"===typeof a&&(a=document.getElementById(a));if(this.isMathJaxNode(a))return 1;if(a&&"script"===(a.tagName||"").toLowerCase()){if(a.MathJax)return a.MathJax.state===MathJax.ElementJax.STATE.PROCESSED?1:-1;if(a.type&&this.inputJax[a.type.replace(/ *;(.|\s)*/,"")])return-1}return 0},isMathJaxNode:function(a){return!!a&&(a.isMathJax||"MathJax_MathML"===(a.className||
""))},setRenderer:function(a,c){if(a){var f=MathJax.OutputJax[a];if(f){this.config.menuSettings.renderer=a;null==c&&(c="jax/mml");f.isUnknown&&f.Register(c);var e=this.outputJax;return e[c]&&e[c].length&&a!==e[c][0].id?(e[c].unshift(f),this.signal.Post(["Renderer Selected",a])):null}MathJax.OutputJax[a]=MathJax.OutputJax({id:"unknown",version:"1.0.0",isUnknown:!0});this.config.menuSettings.renderer="";return MathJax.Ajax.Require("[MathJax]/jax/output/"+a+"/config.js",["setRenderer",this,a,c])}},Queue:function(){return this.queue.Push.apply(this.queue,
arguments)},Typeset:function(a,c){if(!MathJax.isReady)return null;a=this.elementCallback(a,c);if(a.count)var f=MathJax.Callback.Queue(["PreProcess",this,a.elements],["Process",this,a.elements]);return f.Push(a.callback)},PreProcess:function(a,c){a=this.elementCallback(a,c);c=MathJax.Callback.Queue();if(a.count){var f=1===a.count?[a.elements]:a.elements;c.Push(["Post",this.signal,["Begin PreProcess",a.elements]]);for(var e=0,d=f.length;e<d;e++)f[e]&&c.Push(["Execute",this.preProcessors,f[e]]);c.Push(["Post",
this.signal,["End PreProcess",a.elements]])}return c.Push(a.callback)},Process:function(a,c){return this.takeAction("Process",a,c)},Update:function(a,c){return this.takeAction("Update",a,c)},Reprocess:function(a,c){return this.takeAction("Reprocess",a,c)},Rerender:function(a,c){return this.takeAction("Rerender",a,c)},takeAction:function(a,c,f){c=this.elementCallback(c,f);f=c.elements;var e=MathJax.Callback.Queue(["Clear",this.signal]),d={scripts:[],start:(new Date).getTime(),i:0,j:0,jax:{},jaxIDs:[]};
if(c.count){var h=["Delay",MathJax.Callback,this.processSectionDelay];h[2]||(h={});e.Push(["clearCounts",MathJax.Message],["Post",this.signal,["Begin "+a,f]],["Post",this.signal,["Begin Math",f,a]],["prepareScripts",this,a,f,d],["Post",this.signal,["Begin Math Input",f,a]],["processInput",this,d],["Post",this.signal,["End Math Input",f,a]],h,["prepareOutput",this,d,"preProcess"],h,["Post",this.signal,["Begin Math Output",f,a]],["processOutput",this,d],["Post",this.signal,["End Math Output",f,a]],
h,["prepareOutput",this,d,"postProcess"],h,["Post",this.signal,["End Math",f,a]],["Post",this.signal,["End "+a,f]],["clearCounts",MathJax.Message])}return e.Push(c.callback)},scriptAction:{Process:function(a){},Update:function(a){var c=a.MathJax.elementJax;c&&c.needsUpdate()?(c.Remove(!0),a.MathJax.state=c.STATE.UPDATE):a.MathJax.state=c.STATE.PROCESSED},Reprocess:function(a){var c=a.MathJax.elementJax;c&&(c.Remove(!0),a.MathJax.state=c.STATE.UPDATE)},Rerender:function(a){var c=a.MathJax.elementJax;
c&&(c.Remove(!0),a.MathJax.state=c.STATE.OUTPUT)}},prepareScripts:function(a,c,f){if(!arguments.callee.disabled)for(var e=this.elementScripts(c),d=MathJax.ElementJax.STATE,h=0,k=e.length;h<k;h++){var l=e[h];if(l.type&&this.inputJax[l.type.replace(/ *;(.|\n)*/,"")]){if(l.MathJax&&(l.MathJax.elementJax&&l.MathJax.elementJax.hover&&MathJax.Extension.MathEvents.Hover.ClearHover(l.MathJax.elementJax),l.MathJax.state!==d.PENDING))this.scriptAction[a](l);l.MathJax||(l.MathJax={state:d.PENDING});l.MathJax.error&&
delete l.MathJax.error;l.MathJax.state!==d.PROCESSED&&f.scripts.push(l)}}},checkScriptSiblings:function(a){if(!a.MathJax.checked){var c=this.config,f=a.previousSibling;if(f&&"#text"===f.nodeName){var e=a.nextSibling;e&&"#text"!==e.nodeName&&(e=null);if(c.preJax){"string"===typeof c.preJax&&(c.preJax=new RegExp(c.preJax+"$"));var d=f.nodeValue.match(c.preJax)}if(c.postJax&&e){"string"===typeof c.postJax&&(c.postJax=new RegExp("^"+c.postJax));var h=e.nodeValue.match(c.postJax)}!d||c.postJax&&!h||(f.nodeValue=
f.nodeValue.replace(c.preJax,1<d.length?d[1]:""),f=null);!h||c.preJax&&!d||(e.nodeValue=e.nodeValue.replace(c.postJax,1<h.length?h[1]:""));f&&!f.nodeValue.match(/\S/)&&(f=f.previousSibling)}c.preRemoveClass&&f&&f.className===c.preRemoveClass&&(a.MathJax.preview=f);a.MathJax.checked=1}},processInput:function(a){var c=MathJax.ElementJax.STATE,f,e,d=a.scripts.length;try{for(;a.i<d;)if(f=a.scripts[a.i])if((e=f.previousSibling)&&"MathJax_Error"===e.className&&e.parentNode.removeChild(e),f.parentNode&&
f.MathJax&&f.MathJax.state!==c.PROCESSED){if(f.MathJax.elementJax&&f.MathJax.state!==c.UPDATE)f.MathJax.state===c.OUTPUT&&this.saveScript(f.MathJax.elementJax,a,f,c);else{this.checkScriptSiblings(f);var h=f.type.replace(/ *;(.|\s)*/,""),k=this.inputJax[h];var l=k.Process(f,a);if("function"===typeof l){if(l.called)continue;this.RestartAfter(l)}l=l.Attach(f,k.id);this.saveScript(l,a,f,c);this.postInputHooks.Execute(l,k.id,f)}a.i++;var m=(new Date).getTime();m-a.start>this.processUpdateTime&&a.i<a.scripts.length&&
(a.start=m,this.RestartAfter(MathJax.Callback.Delay(1)))}else a.i++;else a.i++}catch(n){return this.processError(n,a,"Input")}a.scripts.length&&this.config.showProcessingMessages&&MathJax.Message.Set(["ProcessMath","Processing math: %1%%",100],0);a.start=(new Date).getTime();a.i=a.j=0;return null},postInputHooks:MathJax.Callback.Hooks(!0),saveScript:function(a,c,f,e){if(!this.outputJax[a.mimeType])throw f.MathJax.state=e.UPDATE,Error("No output jax registered for "+a.mimeType);a.outputJax=this.outputJax[a.mimeType][0].id;
c.jax[a.outputJax]||(0===c.jaxIDs.length?c.jax[a.outputJax]=c.scripts:(1===c.jaxIDs.length&&(c.jax[c.jaxIDs[0]]=c.scripts.slice(0,c.i)),c.jax[a.outputJax]=[]),c.jaxIDs.push(a.outputJax));1<c.jaxIDs.length&&c.jax[a.outputJax].push(f);f.MathJax.state=e.OUTPUT},prepareOutput:function(a,c){for(;a.j<a.jaxIDs.length;){var f=a.jaxIDs[a.j],e=MathJax.OutputJax[f];if(e[c])try{var d=e[c](a);if("function"===typeof d){if(d.called)continue;this.RestartAfter(d)}}catch(h){return h.restart||(MathJax.Message.Set(["PrepError",
"Error preparing %1 output (%2)",f,c],null,600),MathJax.Hub.lastPrepError=h,a.j++),MathJax.Callback.After(["prepareOutput",this,a,c],h.restart)}a.j++}return null},processOutput:function(a){var c=MathJax.ElementJax.STATE,f,e=a.scripts.length;try{for(;a.i<e;)if((f=a.scripts[a.i])&&f.parentNode&&f.MathJax&&!f.MathJax.error){var d=f.MathJax.elementJax;if(d){var h=MathJax.OutputJax[d.outputJax].Process(f,a);!1!==h&&(f.MathJax.state=c.PROCESSED,f.MathJax.preview&&(f.MathJax.preview.innerHTML="",f.MathJax.preview.style.display=
"none"),this.signal.Post(["New Math",d.inputID]));a.i++;var k=(new Date).getTime();k-a.start>this.processUpdateTime&&a.i<a.scripts.length&&(a.start=k,this.RestartAfter(MathJax.Callback.Delay(this.processUpdateDelay)))}else a.i++}else a.i++}catch(l){return this.processError(l,a,"Output")}a.scripts.length&&this.config.showProcessingMessages&&(MathJax.Message.Set(["TypesetMath","Typesetting math: %1%%",100],0),MathJax.Message.Clear(0));a.i=a.j=0;return null},processMessage:function(a,c){a=Math.floor(a.i/
a.scripts.length*100);c="Output"===c?["TypesetMath","Typesetting math: %1%%"]:["ProcessMath","Processing math: %1%%"];this.config.showProcessingMessages&&MathJax.Message.Set(c.concat(a),0)},processError:function(a,c,f){if(!a.restart){if(!this.config.errorSettings.message)throw a;this.formatError(c.scripts[c.i],a);c.i++}this.processMessage(c,f);return MathJax.Callback.After(["process"+f,this,c],a.restart)},formatError:function(a,c){var f=MathJax.Localization._("ErrorMessage","Error: %1",c.message,
void 0)+"\n";if(c.sourceURL||c.fileName)f+="\n"+MathJax.Localization._("ErrorFile","file: %1",c.sourceURL||c.fileName,void 0);if(c.line||c.lineNumber)f+="\n"+MathJax.Localization._("ErrorLine","line: %1",c.line||c.lineNumber,void 0);f+="\n\n"+MathJax.Localization._("ErrorTips","Debugging tips: use %1, inspect %2 in the browser console","'unpacked/MathJax.js'","'MathJax.Hub.lastError'");a.MathJax.error=MathJax.OutputJax.Error.Jax(f,a);a.MathJax.elementJax&&(a.MathJax.error.inputID=a.MathJax.elementJax.inputID);
f=this.config.errorSettings;f=MathJax.Localization._(f.messageId,f.message,void 0,void 0);var e=MathJax.HTML.Element("span",{className:"MathJax_Error",jaxID:"Error",isMathJax:!0,id:a.MathJax.error.inputID+"-Frame"},[["span",null,f]]);MathJax.Ajax.Require("[MathJax]/extensions/MathEvents.js",function(){var c=MathJax.Extension.MathEvents.Event,f=MathJax.Hub;e.oncontextmenu=c.Menu;e.onmousedown=c.Mousedown;e.onkeydown=c.Keydown;e.tabIndex=f.getTabOrder(f.getJaxFor(a))});(f=document.getElementById(e.id))&&
f.parentNode.removeChild(f);a.parentNode&&a.parentNode.insertBefore(e,a);a.MathJax.preview&&(a.MathJax.preview.innerHTML="",a.MathJax.preview.style.display="none");this.lastError=c;this.signal.Post(["Math Processing Error",a,c])},RestartAfter:function(a){throw this.Insert(Error("restart"),{restart:MathJax.Callback(a)});},elementCallback:function(a,c){if(null==c&&(MathJax.Object.isArray(a)||"function"===typeof a))try{MathJax.Callback(a),c=a,a=null}catch(d){}null==a&&(a=this.config.elements||[]);this.isHTMLCollection(a)&&
(a=this.HTMLCollection2Array(a));MathJax.Object.isArray(a)||(a=[a]);a=[].concat(a);for(var f=0,e=a.length;f<e;f++)"string"===typeof a[f]&&(a[f]=document.getElementById(a[f]));document.body||(document.body=document.getElementsByTagName("body")[0]);0==a.length&&a.push(document.body);c||(c={});return{count:a.length,elements:1===a.length?a[0]:a,callback:c}},elementScripts:function(a){var c=[];if(MathJax.Object.isArray(a)||this.isHTMLCollection(a)){for(var f=0,e=a.length;f<e;f++){for(var d=0,h=0;h<f&&
!d;h++)d=a[h].contains(a[f]);d||c.push.apply(c,this.elementScripts(a[f]))}return c}"string"===typeof a&&(a=document.getElementById(a));document.body||(document.body=document.getElementsByTagName("body")[0]);null==a&&(a=document.body);if(null!=a.tagName&&"script"===a.tagName.toLowerCase())return[a];c=a.getElementsByTagName("script");this.msieHTMLCollectionBug&&(c=this.HTMLCollection2Array(c));return c},isHTMLCollection:function(a){return"HTMLCollection"in window&&"object"===typeof a&&a instanceof HTMLCollection},
HTMLCollection2Array:function(a){if(!this.msieHTMLCollectionBug)return[].slice.call(a);for(var c=[],f=0,e=a.length;f<e;f++)c[f]=a[f];return c},Insert:function(a,c){for(var f in c)c.hasOwnProperty(f)&&("object"!==typeof c[f]||MathJax.Object.isArray(c[f])||"object"!==typeof a[f]&&"function"!==typeof a[f]?a[f]=c[f]:this.Insert(a[f],c[f]));return a},getTabOrder:function(a){return this.config.menuSettings.inTabOrder?0:-1},SplitList:"trim"in String.prototype?function(a){return a.trim().split(/\s+/)}:function(a){return a.replace(/^\s+/,
"").replace(/\s+$/,"").split(/\s+/)}},MathJax.Hub.Insert(MathJax.Hub.config.styles,MathJax.Message.styles),MathJax.Hub.Insert(MathJax.Hub.config.styles,{".MathJax_Error":MathJax.Hub.config.errorSettings.style}),MathJax.Extension={},MathJax.Hub.Configured=MathJax.Callback({}),MathJax.Hub.Startup={script:"",queue:MathJax.Callback.Queue(),signal:MathJax.Callback.Signal("Startup"),params:{},Config:function(){this.queue.Push(["Post",this.signal,"Begin Config"]);MathJax.AuthorConfig&&MathJax.AuthorConfig.root&&
(MathJax.Ajax.config.root=MathJax.AuthorConfig.root);this.params.locale&&(MathJax.Localization.resetLocale(this.params.locale),MathJax.Hub.config.menuSettings.locale=this.params.locale);if(this.params.config)for(var a=this.params.config.split(/,/),c=0,f=a.length;c<f;c++)a[c].match(/\.js$/)||(a[c]+=".js"),this.queue.Push(["Require",MathJax.Ajax,this.URL("config",a[c])]);this.queue.Push(["Config",MathJax.Hub,MathJax.AuthorConfig]);this.script.match(/\S/)&&this.queue.Push(this.script+";\n1;");this.queue.Push(["ConfigDelay",
this],["ConfigBlocks",this],[function(a){return a.loadArray(MathJax.Hub.config.config,"config",null,!0)},this],["Post",this.signal,"End Config"])},ConfigDelay:function(){var a=this.params.delayStartupUntil||MathJax.Hub.config.delayStartupUntil;return"onload"===a?this.onload:"configured"===a?MathJax.Hub.Configured:a},ConfigBlocks:function(){for(var a=document.getElementsByTagName("script"),c=MathJax.Callback.Queue(),f=0,e=a.length;f<e;f++){var d=String(a[f].type).replace(/ /g,"");d.match(/^text\/x-mathjax-config(;.*)?$/)&&
!d.match(/;executed=true/)&&(a[f].type+=";executed=true",c.Push(a[f].innerHTML+";\n1;"))}return c.Push(function(){MathJax.Ajax.config.root=MathJax.Hub.config.root})},Cookie:function(){return this.queue.Push(["Post",this.signal,"Begin Cookie"],["Get",MathJax.HTML.Cookie,"menu",MathJax.Hub.config.menuSettings],[function(a){var c=a.menuSettings;c.locale&&MathJax.Localization.resetLocale(c.locale);var f=a.menuSettings.renderer,e=a.jax;if(f){f="output/"+f;e.sort();for(var d=0,h=e.length;d<h&&"output/"!==
e[d].substr(0,7);d++);if(d==h-1)e.pop();else for(;d<h;){if(e[d]===f){e.splice(d,1);break}d++}e.unshift(f)}null!=c.CHTMLpreview&&(null==c.FastPreview&&(c.FastPreview=c.CHTMLpreview),delete c.CHTMLpreview);c.FastPreview&&!MathJax.Extension["fast-preview"]&&MathJax.Hub.config.extensions.push("fast-preview.js");a.menuSettings.assistiveMML&&!MathJax.Extension.AssistiveMML&&MathJax.Hub.config.extensions.push("AssistiveMML.js")},MathJax.Hub.config],["Post",this.signal,"End Cookie"])},Styles:function(){return this.queue.Push(["Post",
this.signal,"Begin Styles"],["loadArray",this,MathJax.Hub.config.styleSheets,"config"],["Styles",MathJax.Ajax,MathJax.Hub.config.styles],["Post",this.signal,"End Styles"])},Jax:function(){for(var a=MathJax.Hub.config,c=MathJax.Hub.outputJax,f=0,e=a.jax.length,d=0;f<e;f++){var h=a.jax[f].substr(7);"output/"===a.jax[f].substr(0,7)&&null==c.order[h]&&(c.order[h]=d,d++)}return MathJax.Callback.Queue().Push(["Post",this.signal,"Begin Jax"],["loadArray",this,a.jax,"jax","config.js"],["Post",this.signal,
"End Jax"])},Extensions:function(){return MathJax.Callback.Queue().Push(["Post",this.signal,"Begin Extensions"],["loadArray",this,MathJax.Hub.config.extensions,"extensions"],["Post",this.signal,"End Extensions"])},Message:function(){MathJax.Message.Init(!0)},Menu:function(){var a=MathJax.Hub.config.menuSettings,c=MathJax.Hub.outputJax,f;for(f in c)if(c.hasOwnProperty(f)&&c[f].length){var e=c[f];break}e&&e.length&&(a.renderer&&a.renderer!==e[0].id&&e.unshift(MathJax.OutputJax[a.renderer]),a.renderer=
e[0].id)},Hash:function(){if(MathJax.Hub.config.positionToHash&&document.location.hash&&document.body&&document.body.scrollIntoView){var a=decodeURIComponent(document.location.hash.substr(1)),c=document.getElementById(a);if(!c)for(var f=document.getElementsByTagName("a"),e=0,d=f.length;e<d;e++)if(f[e].name===a){c=f[e];break}if(c){for(;!c.scrollIntoView;)c=c.parentNode;(c=this.HashCheck(c))&&c.scrollIntoView&&setTimeout(function(){c.scrollIntoView(!0)},1)}}},HashCheck:function(a){var c=MathJax.Hub.getJaxFor(a);
c&&MathJax.OutputJax[c.outputJax].hashCheck&&(a=MathJax.OutputJax[c.outputJax].hashCheck(a));return a},MenuZoom:function(){MathJax.Hub.config.showMathMenu&&(MathJax.Extension.MathMenu?setTimeout(MathJax.Callback(["loadDomain",MathJax.Localization,"MathMenu"]),1E3):setTimeout(function(){MathJax.Callback.Queue(["Require",MathJax.Ajax,"[MathJax]/extensions/MathMenu.js",{}],["loadDomain",MathJax.Localization,"MathMenu"])},1E3),MathJax.Extension.MathZoom||setTimeout(MathJax.Callback(["Require",MathJax.Ajax,
"[MathJax]/extensions/MathZoom.js",{}]),2E3))},onLoad:function(){var a=this.onload=MathJax.Callback(function(){MathJax.Hub.Startup.signal.Post("onLoad")});if(document.body&&document.readyState)if(MathJax.Hub.Browser.isMSIE){if("complete"===document.readyState)return[a]}else if("loading"!==document.readyState)return[a];window.addEventListener?(window.addEventListener("load",a,!1),this.params.noDOMContentEvent||window.addEventListener("DOMContentLoaded",a,!1)):window.attachEvent?window.attachEvent("onload",
a):window.onload=a;return a},Typeset:function(a,c){return MathJax.Hub.config.skipStartupTypeset?function(){}:this.queue.Push(["Post",this.signal,"Begin Typeset"],["Typeset",MathJax.Hub,a,c],["Post",this.signal,"End Typeset"])},URL:function(a,c){c.match(/^([a-z]+:\/\/|\[|\/)/)||(c="[MathJax]/"+a+"/"+c);return c},loadArray:function(a,c,f,e){if(a&&(MathJax.Object.isArray(a)||(a=[a]),a.length)){for(var d=MathJax.Callback.Queue(),h={},k,l=0,m=a.length;l<m;l++)k=this.URL(c,a[l]),f&&(k+="/"+f),e?d.Push(["Require",
MathJax.Ajax,k,h]):d.Push(MathJax.Ajax.Require(k,h));return d.Push({})}return null}},function(a){var c=window[a];a="["+a+"]";var f=c.Hub,e=c.Ajax,d=c.Callback,h=MathJax.Object.Subclass({JAXFILE:"jax.js",require:null,config:{},Init:function(a,c){return 0===arguments.length?this:this.constructor.Subclass(a,c)()},Augment:function(a,c){var d=this.constructor,e={};if(null!=a){for(var h in a)a.hasOwnProperty(h)&&("function"===typeof a[h]?d.protoFunction(h,a[h]):e[h]=a[h]);a.toString!==d.prototype.toString&&
a.toString!=={}.toString&&d.protoFunction("toString",a.toString)}f.Insert(d.prototype,e);d.Augment(null,c);return this},Translate:function(a,c){throw Error(this.directory+"/"+this.JAXFILE+" failed to define the Translate() method");},Register:function(a){},Config:function(){this.config=f.CombineConfig(this.id,this.config);this.config.Augment&&this.Augment(this.config.Augment)},Startup:function(){},loadComplete:function(a){if("config.js"===a)return e.loadComplete(this.directory+"/"+a);var c=d.Queue();
c.Push(f.Register.StartupHook("End Config",{}),["Post",f.Startup.signal,this.id+" Jax Config"],["Config",this],["Post",f.Startup.signal,this.id+" Jax Require"],[function(a){return MathJax.Hub.Startup.loadArray(a.require,this.directory)},this],[function(a,c){return MathJax.Hub.Startup.loadArray(a.extensions,"extensions/"+c)},this.config||{},this.id],["Post",f.Startup.signal,this.id+" Jax Startup"],["Startup",this],["Post",f.Startup.signal,this.id+" Jax Ready"]);this.copyTranslate&&c.Push([function(a){a.preProcess=
a.preTranslate;a.Process=a.Translate;a.postProcess=a.postTranslate},this.constructor.prototype]);return c.Push(["loadComplete",e,this.directory+"/"+a])}},{id:"Jax",version:"2.7.5",directory:a+"/jax",extensionDir:a+"/extensions"});c.InputJax=h.Subclass({elementJax:"mml",sourceMenuTitle:["Original","Original Form"],copyTranslate:!0,Process:function(a,h){a=d.Queue();h=this.elementJax;c.Object.isArray(h)||(h=[h]);for(var k=0,l=h.length;k<l;k++){var q=c.ElementJax.directory+"/"+h[k]+"/"+this.JAXFILE;this.require?
c.Object.isArray(this.require)||(this.require=[this.require]):this.require=[];this.require.push(q);a.Push(e.Require(q))}q=this.directory+"/"+this.JAXFILE;var t=a.Push(e.Require(q));t.called||(this.constructor.prototype.Process=function(){if(!t.called)return t;throw Error(q+" failed to load properly");});(h=f.outputJax["jax/"+h[0]])&&a.Push(e.Require(h[0].directory+"/"+this.JAXFILE));return a.Push({})},needsUpdate:function(a){var d=a.SourceElement();return a.originalText!==c.HTML.getScript(d)},Register:function(a){f.inputJax||
(f.inputJax={});f.inputJax[a]=this}},{id:"InputJax",version:"2.7.5",directory:h.directory+"/input",extensionDir:h.extensionDir});c.OutputJax=h.Subclass({copyTranslate:!0,preProcess:function(a){var c,d=this.directory+"/"+this.JAXFILE;this.constructor.prototype.preProcess=function(a){if(!c.called)return c;throw Error(d+" failed to load properly");};return c=e.Require(d)},Process:function(a){throw Error(this.id+" output jax failed to load properly");},Register:function(a){var d=f.outputJax;d[a]||(d[a]=
[]);d[a].length&&(this.id===f.config.menuSettings.renderer||(d.order[this.id]||0)<(d.order[d[a][0].id]||0))?d[a].unshift(this):d[a].push(this);this.require?c.Object.isArray(this.require)||(this.require=[this.require]):this.require=[];this.require.push(c.ElementJax.directory+"/"+a.split(/\//)[1]+"/"+this.JAXFILE)},Remove:function(a){}},{id:"OutputJax",version:"2.7.5",directory:h.directory+"/output",extensionDir:h.extensionDir,fontDir:a+(c.isPacked?"":"/..")+"/fonts",imageDir:a+(c.isPacked?"":"/..")+
"/images"});c.ElementJax=h.Subclass({Init:function(a,c){return this.constructor.Subclass(a,c)},inputJax:null,outputJax:null,inputID:null,originalText:"",mimeType:"",sourceMenuTitle:["MathMLcode","MathML Code"],Text:function(a,d){var e=this.SourceElement();c.HTML.setScript(e,a);e.MathJax.state=this.STATE.UPDATE;return f.Update(e,d)},Reprocess:function(a){var c=this.SourceElement();c.MathJax.state=this.STATE.UPDATE;return f.Reprocess(c,a)},Update:function(a){return this.Rerender(a)},Rerender:function(a){var c=
this.SourceElement();c.MathJax.state=this.STATE.OUTPUT;return f.Process(c,a)},Remove:function(a){this.hover&&this.hover.clear(this);c.OutputJax[this.outputJax].Remove(this);a||(f.signal.Post(["Remove Math",this.inputID]),this.Detach())},needsUpdate:function(){return c.InputJax[this.inputJax].needsUpdate(this)},SourceElement:function(){return document.getElementById(this.inputID)},Attach:function(a,d){var e=a.MathJax.elementJax;a.MathJax.state===this.STATE.UPDATE?e.Clone(this):(e=a.MathJax.elementJax=
this,a.id?this.inputID=a.id:(a.id=this.inputID=c.ElementJax.GetID(),this.newID=1));e.originalText=c.HTML.getScript(a);e.inputJax=d;e.root&&(e.root.inputID=e.inputID);return e},Detach:function(){var a=this.SourceElement();if(a){try{delete a.MathJax}catch(l){a.MathJax=null}this.newID&&(a.id="")}},Clone:function(a){for(var c in this)this.hasOwnProperty(c)&&"undefined"===typeof a[c]&&"newID"!==c&&delete this[c];for(c in a)a.hasOwnProperty(c)&&("undefined"===typeof this[c]||this[c]!==a[c]&&"inputID"!==
c)&&(this[c]=a[c])}},{id:"ElementJax",version:"2.7.5",directory:h.directory+"/element",extensionDir:h.extensionDir,ID:0,STATE:{PENDING:1,PROCESSED:2,UPDATE:3,OUTPUT:4},GetID:function(){this.ID++;return"MathJax-Element-"+this.ID},Subclass:function(){var a=h.Subclass.apply(this,arguments);a.loadComplete=this.prototype.loadComplete;return a}});c.ElementJax.prototype.STATE=c.ElementJax.STATE;c.OutputJax.Error={id:"Error",version:"2.7.5",config:{},errors:0,ContextMenu:function(){return c.Extension.MathEvents.Event.ContextMenu.apply(c.Extension.MathEvents.Event,
arguments)},Mousedown:function(){return c.Extension.MathEvents.Event.AltContextMenu.apply(c.Extension.MathEvents.Event,arguments)},getJaxFromMath:function(a){return(a.nextSibling.MathJax||{}).error},Jax:function(a,c){var d=MathJax.Hub.inputJax[c.type.replace(/ *;(.|\s)*/,"")];this.errors++;return{inputJax:(d||{id:"Error"}).id,outputJax:"Error",inputID:"MathJax-Error-"+this.errors,sourceMenuTitle:["ErrorMessage","Error Message"],sourceMenuFormat:"Error",originalText:MathJax.HTML.getScript(c),errorText:a}}};
c.InputJax.Error={id:"Error",version:"2.7.5",config:{},sourceMenuTitle:["Original","Original Form"]}}("MathJax"),function(a){var c=window[a];c||(c=window[a]={});var f=c.Hub,e=f.Startup,d=f.config,h=document.head||document.getElementsByTagName("head")[0];h||(h=document.childNodes[0]);var k=(document.documentElement||document).getElementsByTagName("script");0===k.length&&h.namespaceURI&&(k=document.getElementsByTagNameNS(h.namespaceURI,"script"));var l=new RegExp("(^|/)"+a+"\\.js(\\?.*)?$");for(a=k.length-
1;0<=a;a--)if((k[a].src||"").match(l)){e.script=k[a].innerHTML;if(RegExp.$2){l=RegExp.$2.substr(1).split(/&/);for(var m=0,n=l.length;m<n;m++){var q=l[m].match(/(.*)=(.*)/);q?e.params[unescape(q[1])]=unescape(q[2]):e.params[l[m]]=!0}}d.root=k[a].src.replace(/(^|\/)[^\/]*(\?.*)?$/,"");c.Ajax.config.root=d.root;c.Ajax.params=e.params;break}var t=navigator.userAgent;d={isMac:"Mac"===navigator.platform.substr(0,3),isPC:"Win"===navigator.platform.substr(0,3),isMSIE:"ActiveXObject"in window&&"clipboardData"in
window,isEdge:"MSGestureEvent"in window&&"chrome"in window&&null==window.chrome.loadTimes,isFirefox:!!t.match(/Gecko\//)&&!t.match(/like Gecko/),isSafari:!!t.match(/ (Apple)?WebKit\//)&&!t.match(/ like iPhone /)&&(!window.chrome||null==window.chrome.app),isChrome:"chrome"in window&&null!=window.chrome.loadTimes,isOpera:"opera"in window&&null!=window.opera.version,isKonqueror:"konqueror"in window&&"KDE"==navigator.vendor,versionAtLeast:function(a){var c=this.version.split(".");a=(new String(a)).split(".");
for(var d=0,e=a.length;d<e;d++)if(c[d]!=a[d])return parseInt(c[d]||"0")>=parseInt(a[d]);return!0},Select:function(a){return(a=a[f.Browser])?a(f.Browser):null}};k=t.replace(/^Mozilla\/(\d+\.)+\d+ /,"").replace(/[a-z][-a-z0-9._: ]+\/\d+[^ ]*-[^ ]*\.([a-z][a-z])?\d+ /i,"").replace(/Gentoo |Ubuntu\/(\d+\.)*\d+ (\([^)]*\) )?/,"");f.Browser=f.Insert(f.Insert(new String("Unknown"),{version:"0.0"}),d);for(var y in d)if(d.hasOwnProperty(y)&&d[y]&&"is"===y.substr(0,2)&&(y=y.slice(2),"Mac"!==y&&"PC"!==y)){f.Browser=
f.Insert(new String(y),d);d=(new RegExp(".*(Version/| Trident/.*; rv:)((?:\\d+\\.)+\\d+)|.*("+y+")"+("MSIE"==y?" ":"/")+"((?:\\d+\\.)*\\d+)|(?:^|\\(| )([a-z][-a-z0-9._: ]+|(?:Apple)?WebKit)/((?:\\d+\\.)+\\d+)")).exec(k)||["","","","unknown","0.0"];f.Browser.name=""!=d[1]?y:d[3]||d[5];f.Browser.version=d[2]||d[4]||d[6];break}try{f.Browser.Select({Safari:function(a){var c=parseInt(String(a.version).split(".")[0]);85<c&&(a.webkit=a.version);538<=c?a.version="8.0":537<=c?a.version="7.0":536<=c?a.version=
"6.0":534<=c?a.version="5.1":533<=c?a.version="5.0":526<=c?a.version="4.0":525<=c?a.version="3.1":500<c?a.version="3.0":400<c?a.version="2.0":85<c&&(a.version="1.0");a.webkit=navigator.appVersion.match(/WebKit\/(\d+)\./)[1];a.isMobile=null!=navigator.appVersion.match(/Mobile/i);a.noContextMenu=a.isMobile},Firefox:function(a){if(("0.0"===a.version||null==t.match(/Firefox/))&&"Gecko"===navigator.product){var c=t.match(/[\/ ]rv:(\d+\.\d.*?)[\) ]/);c?a.version=c[1]:(c=(navigator.buildID||navigator.productSub||
"0").substr(0,8),"20111220"<=c?a.version="9.0":"20111120"<=c?a.version="8.0":"20110927"<=c?a.version="7.0":"20110816"<=c?a.version="6.0":"20110621"<=c?a.version="5.0":"20110320"<=c?a.version="4.0":"20100121"<=c?a.version="3.6":"20090630"<=c?a.version="3.5":"20080617"<=c?a.version="3.0":"20061024"<=c&&(a.version="2.0"))}a.isMobile=null!=navigator.appVersion.match(/Android/i)||null!=t.match(/ Fennec\//)||null!=t.match(/Mobile/)},Chrome:function(a){a.noContextMenu=a.isMobile=!!navigator.userAgent.match(/ Mobile[ \/]/)},
Opera:function(a){a.version=opera.version()},Edge:function(a){a.isMobile=!!navigator.userAgent.match(/ Phone/)},MSIE:function(a){a.isMobile=!!navigator.userAgent.match(/ Phone/);a.isIE9=!(!document.documentMode||!window.performance&&!window.msPerformance);MathJax.HTML.setScriptBug=!a.isIE9||9>document.documentMode;MathJax.Hub.msieHTMLCollectionBug=9>document.documentMode;if(10>document.documentMode&&!e.params.NoMathPlayer){try{new ActiveXObject("MathPlayer.Factory.1"),a.hasMathPlayer=!0}catch(w){}try{if(a.hasMathPlayer){var c=
document.createElement("object");c.id="mathplayer";c.classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987";h.appendChild(c);document.namespaces.add("m","http://www.w3.org/1998/Math/MathML");a.mpNamespace=!0;!document.readyState||"loading"!==document.readyState&&"interactive"!==document.readyState||(document.write('<?import namespace="m" implementation="#MathPlayer">'),a.mpImported=!0)}else document.namespaces.add("mjx_IE_fix","http://www.w3.org/1999/xlink")}catch(w){}}}})}catch(v){console.error(v.message)}f.Browser.Select(MathJax.Message.browsers);
c.AuthorConfig&&"function"===typeof c.AuthorConfig.AuthorInit&&c.AuthorConfig.AuthorInit();f.queue=c.Callback.Queue();f.queue.Push(["Post",e.signal,"Begin"],["Config",e],["Cookie",e],["Styles",e],["Message",e],function(){return c.Callback.Queue(e.Jax(),e.Extensions()).Push({})},["Menu",e],e.onLoad(),function(){MathJax.isReady=!0},["Typeset",e],["Hash",e],["MenuZoom",e],["Post",e.signal,"End"])}("MathJax"));
(function(a){var c=window.navigator.userAgent;void 0===c&&(c=window.navigator.userAgent);c=c.toLowerCase();var f=/(edge)\/([\w.]+)/.exec(c)||/(opr)[\/]([\w.]+)/.exec(c)||/(chrome)[ \/]([\w.]+)/.exec(c)||/(iemobile)[\/]([\w.]+)/.exec(c)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||0<=c.indexOf("trident")&&
/(rv)(?::| )([\w.]+)/.exec(c)||0>c.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[],e=/(ipad)/.exec(c)||/(ipod)/.exec(c)||/(windows phone)/.exec(c)||/(iphone)/.exec(c)||/(kindle)/.exec(c)||/(silk)/.exec(c)||/(android)/.exec(c)||/(win)/.exec(c)||/(mac)/.exec(c)||/(linux)/.exec(c)||/(cros)/.exec(c)||/(playbook)/.exec(c)||/(bb)/.exec(c)||/(blackberry)/.exec(c)||[],d={},h=f[5]||f[3]||f[1]||"",k=f[2]||f[4]||"0";f=f[4]||f[2]||"0";e=e[0]||"";h&&(d[h]=!0,d.version=k,d.versionNumber=parseInt(f,
10));e&&(d[e]=!0);if(d.android||d.bb||d.blackberry||d.ipad||d.iphone||d.ipod||d.kindle||d.playbook||d.silk||d["windows phone"])d.mobile=!0;if(d.cros||d.mac||d.linux||d.win)d.desktop=!0;if(d.chrome||d.opr||d.safari)d.webkit=!0;if(d.rv||d.iemobile)h="msie",d.msie=!0;d.edge&&(delete d.edge,h="msedge",d.msedge=!0);d.safari&&d.blackberry&&(h="blackberry",d.blackberry=!0);d.safari&&d.playbook&&(h="playbook",d.playbook=!0);d.bb&&(h="blackberry",d.blackberry=!0);d.opr&&(h="opera",d.opera=!0);d.safari&&d.android&&
(h="android",d.android=!0);d.safari&&d.kindle&&(h="kindle",d.kindle=!0);d.safari&&d.silk&&(h="silk",d.silk=!0);d.mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4));d.name=h;d.platform=e;a.Browser=d})(window);Date.now||(Date.now=function(){return(new Date).getTime()});
window.alternativeToLocaleFormat=function(a){return function(a,f,e){var c=I18n.t("ui.date.monthsAbbr"),h=I18n.t("ui.date.months"),k=I18n.t("ui.date.daysAbbr"),l=I18n.t("ui.date.days"),m=function(a,c,d,e){for("string"!=typeof a&&(a=""+a);a.length<e;)"left"==c?a=d+""+a:"right"==c&&(a=a+""+d);return a};f=f.replace(/(%[DhrRTC])/g,function(a,c,d){c="";switch(a){case "%D":c="%d/%m/%y";break;case "%h":c="%b";break;case "%r":c="%I:%M:%S %p";break;case "%R":c="%H:%M";break;case "%T":c="%H:%M:%S";break;case "%C":c=
"%d %b"}return c});return f.replace(/(%[a-zA-Z])/g,function(d,e,f){switch(d){case "%a":d=k[a.getDay()];break;case "%A":d=l[a.getDay()];break;case "%b":d=c[a.getMonth()];break;case "%B":d=h[a.getMonth()];break;case "%c":d="";break;case "%C":d=Math.floor(a.getFullYear()/100);break;case "%d":d=m(a.getDate(),"left","0",2);break;case "%e":d=m(a.getDate(),"left"," ",2);break;case "%H":d=m(a.getHours(),"left","0",2);break;case "%I":d=0==a.getHours()%12?"12":m(a.getHours()%12,"left","0",2);break;case "%j":d=
"";break;case "%m":d=m(a.getMonth()+1,"left","0",2);break;case "%M":d=m(a.getMinutes(),"left","0",2);break;case "%n":d="\n";break;case "%p":d=12<=a.getHours()?"PM":"AM";break;case "%S":d=m(a.getSeconds(),"left","0",2);break;case "%t":d="\t";break;case "%u":d=0==a.getDay()?7:a.getDay();break;case "%y":d=a.getFullYear();break;default:d=""}return d})}(this,a)};$(function(){$(document).ajaxError(function(a,c){-1!==$.inArray(c.status,[401,403])&&(window.top.location.href="/users/login")})});
!function(a,c,f,e){var d=function(a,c){this.init(a,c)};d.prototype={constructor:d,init:function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.skippable.defaults,d)},skip:function(){var c=function(c){return a(c).closest('[data-role="skippable-group"]')};this.$element.on("click",function(c){c=a(this).attr("data-skipto")||a(this).attr("href");c=a(c).filter(":first");1===c.length&&c.focus();return!1}).on("focus",function(d){if(a(a(this).attr("data-skipto")||a(this).attr("href")).filter(":first").length)c(this).data("current",
this);else{d.preventDefault();d=a(this).attr("data-next");var e=a(this).attr("data-previous");var f=c(d).data("current")==a(d).get(0);a(f?e:d).focus()}})}};a.fn.skippable=function(c){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=a(this),h=f.data("skippable"),k="object"==typeof c&&c;h||f.data("skippable",h=new d(this,k));"string"==typeof c&&h[c].apply(h,e)})};a.fn.skippable.Constructor=d;a.fn.skippable.defaults={}}(jQuery,window,document);
(function(a){Array.from||(Array.from=function(){var a=Object.prototype.toString,f=function(c){return"function"===typeof c||"[object Function]"===a.call(c)},e=Math.pow(2,53)-1;return function(a){var c=Object(a);if(null==a)throw new TypeError("Array.from requires an array-like object - not null or undefined");var d=1<arguments.length?arguments[1]:void 0,l;if("undefined"!==typeof d){if(!f(d))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&
(l=arguments[2])}var m=Number(c.length);m=isNaN(m)?0:0!==m&&isFinite(m)?(0<m?1:-1)*Math.floor(Math.abs(m)):m;m=Math.min(Math.max(m,0),e);for(var n=f(this)?Object(new this(m)):Array(m),q=0,t;q<m;)t=c[q],n[q]=d?"undefined"===typeof l?d(t,q):d.call(l,t,q):t,q+=1;n.length=m;return n}}())})(window);
function _typeof(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return _typeof(a)}
!function(a){function c(e){if(f[e])return f[e].exports;var d=f[e]={i:e,l:!1,exports:{}};return a[e].call(d.exports,d,d.exports,c),d.l=!0,d.exports}var f={};c.m=a;c.c=f;c.d=function(a,d,f){c.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:f})};c.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})};c.t=function(a,
d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==_typeof(a)&&a&&a.__esModule)return a;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var f in a)c.d(e,f,function(c){return a[c]}.bind(null,f));return e};c.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(d,"a",d),d};c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};c.p="https://statics.teams.cdn.office.net/teams-modular-packages/hashed-assets/";
c(c.s=7)}({"/1HP":function(a,c){a.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0Ij4KICAgICAgPGRlZnM+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJwbGF0ZS1maWxsIiB4MT0iLS4yIiB5MT0iLS4yIiB4Mj0iLjgiIHkyPSIuOCI+CiAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM1YTYyYzQiPjwvc3RvcD4KICAgICAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzM5NDBhYiI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPHN0eWxlPgogICAgICAgICAgLmNscy0xe2ZpbGw6IzUwNTljOX0uY2xzLTJ7ZmlsbDojN2I4M2VifQogICAgICAgIDwvc3R5bGU+CiAgICAgICAgPGZpbHRlciBpZD0icGVyc29uLXNoYWRvdyIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjMwMCUiIGhlaWdodD0iMzAwJSI+CiAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUFscGhhIiBzdGREZXZpYXRpb249IjI1Ij48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgPGZlT2Zmc2V0IGR5PSIyNSI+PC9mZU9mZnNldD4KICAgICAgICAgIDxmZUNvbXBvbmVudFRyYW5zZmVyPgogICAgICAgICAgICA8ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSIuMjUiPjwvZmVGdW5jQT4KICAgICAgICAgIDwvZmVDb21wb25lbnRUcmFuc2Zlcj4KICAgICAgICAgIDxmZU1lcmdlPgogICAgICAgICAgICA8ZmVNZXJnZU5vZGU+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgPC9mZU1lcmdlPgogICAgICAgIDwvZmlsdGVyPgoKCiAgICAgICAgPGZpbHRlciBpZD0iYmFjay1wbGF0ZS1zaGFkb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIzMDAlIiBoZWlnaHQ9IjMwMCUiPgogICAgICAgICAgCgk8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUFscGhhIiBzdGREZXZpYXRpb249IjI0Ij48L2ZlR2F1c3NpYW5CbHVyPgoJICA8ZmVPZmZzZXQgZHg9IjIiIGR5PSIyNCI+PC9mZU9mZnNldD4KICAgICAgICAgIDxmZUNvbXBvbmVudFRyYW5zZmVyPgogICAgICAgICAgPGZlRnVuY0EgdHlwZT0ibGluZWFyIiBzbG9wZT0iLjYiPjwvZmVGdW5jQT4KCiAgICAgICAgICA8L2ZlQ29tcG9uZW50VHJhbnNmZXI+CiAgICAgICAgICA8ZmVNZXJnZT4KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgIDwvZmVNZXJnZT4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIGlkPSJ0ZWUtc2hhZG93IiB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjUwJSIgaGVpZ2h0PSIyNTAlIj4KICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHN0ZERldmlhdGlvbj0iMTIiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjEwIiBkeT0iMjAiPjwvZmVPZmZzZXQ+CiAgICAgICAgICA8ZmVDb21wb25lbnRUcmFuc2Zlcj4KICAgICAgICAgICAgPGZlRnVuY0EgdHlwZT0ibGluZWFyIiBzbG9wZT0iLjIiPjwvZmVGdW5jQT4KICAgICAgICAgIDwvZmVDb21wb25lbnRUcmFuc2Zlcj4KICAgICAgICAgIDxmZU1lcmdlPgogICAgICAgICAgICA8ZmVNZXJnZU5vZGU+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgPC9mZU1lcmdlPgogICAgICAgIDwvZmlsdGVyPgoKICAgICAgIAoKICAgICAgICA8Y2xpcFBhdGggaWQ9ImJhY2stcGxhdGUtY2xpcCI+CiAgICAgICAgICA8cGF0aCBkPSJNNjg0IDQzMkg1MTJ2LTQ5LjE0M0ExMTIgMTEyIDAgMSAwIDQxNiAyNzJhMTExLjU1NiAxMTEuNTU2IDAgMCAwIDEwLjc4NSA0OEgxNjBhMzIuMDk0IDMyLjA5NCAwIDAgMC0zMiAzMnYzMjBhMzIuMDk0IDMyLjA5NCAwIDAgMCAzMiAzMmgxNzguNjdjMTUuMjM2IDkwLjggOTQuMiAxNjAgMTg5LjMzIDE2MCAxMDYuMDM5IDAgMTkyLTg1Ljk2MSAxOTItMTkyVjQ2OGEzNiAzNiAwIDAgMC0zNi0zNnoiIGZpbGw9IiNmZmYiPjwvcGF0aD4KICAgICAgICA8L2NsaXBQYXRoPgogICAgICA8L2RlZnM+CiAgICAgIDxnIGlkPSJzbWFsbF9wZXJzb24iIGZpbHRlcj0idXJsKCNwZXJzb24tc2hhZG93KSI+CiAgICAgICAgPHBhdGggaWQ9IkJvZHkiIGNsYXNzPSJjbHMtMSIgZD0iTTY5MiA0MzJoMTY4YTM2IDM2IDAgMCAxIDM2IDM2djE2NGExMjAgMTIwIDAgMCAxLTEyMCAxMjAgMTIwIDEyMCAwIDAgMS0xMjAtMTIwVjQ2OGEzNiAzNiAwIDAgMSAzNi0zNnoiPjwvcGF0aD4KICAgICAgICA8Y2lyY2xlIGlkPSJIZWFkIiBjbGFzcz0iY2xzLTEiIGN4PSI3NzYiIGN5PSIzMDQiIHI9IjgwIj48L2NpcmNsZT4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGFyZ2VfUGVyc29uIiBmaWx0ZXI9InVybCgjcGVyc29uLXNoYWRvdykiPgogICAgICAgIDxwYXRoIGlkPSJCb2R5LTIiIGRhdGEtbmFtZT0iQm9keSIgY2xhc3M9ImNscy0yIiBkPSJNMzcyIDQzMmgzMTJhMzYgMzYgMCAwIDEgMzYgMzZ2MjA0YTE5MiAxOTIgMCAwIDEtMTkyIDE5MiAxOTIgMTkyIDAgMCAxLTE5Mi0xOTJWNDY4YTM2IDM2IDAgMCAxIDM2LTM2eiI+PC9wYXRoPgogICAgICAgIDxjaXJjbGUgaWQ9IkhlYWQtMiIgZGF0YS1uYW1lPSJIZWFkIiBjbGFzcz0iY2xzLTIiIGN4PSI1MjgiIGN5PSIyNzIiIHI9IjExMiI+PC9jaXJjbGU+CiAgICAgIDwvZz4KICAgICAgPHJlY3QgaWQ9IkJhY2tfUGxhdGUiIHg9IjEyOCIgeT0iMzIwIiB3aWR0aD0iMzg0IiBoZWlnaHQ9IjM4NCIgcng9IjMyIiByeT0iMzIiIGZpbHRlcj0idXJsKCNiYWNrLXBsYXRlLXNoYWRvdykiIGNsaXAtcGF0aD0idXJsKCNiYWNrLXBsYXRlLWNsaXApIiBmaWxsPSJ1cmwoI3BsYXRlLWZpbGwpIj48L3JlY3Q+CiAgICAgIDxwYXRoIGlkPSJMZXR0ZXJfVCIgZD0iTTM5OS4zNjUgNDQ1Ljg1NWgtNjAuMjkzdjE2NC4yaC0zOC40MTh2LTE2NC4yaC02MC4wMlY0MTRoMTU4LjczeiIgZmlsdGVyPSJ1cmwoI3RlZS1zaGFkb3cpIiBmaWxsPSIjZmZmIj48L3BhdGg+CiAgICA8L3N2Zz4="},
7:function(a,c,f){a.exports=f("uzWZ")},VlZg:function(a,c,f){function e(a,c,e){a=e||Array.from(a.getElementsByClassName("teams-share-button"));if(0===a.length)d("No Share To Microsoft Teams Element found");else for(e=0;e<a.length;e++){var f=a[e],k=f.dataset;if(k&&k.href){var m=k.href,l=k.msgText,n=k.assignInstr,w=k.assignTitle,z;if(z=k.iconPxSize){var u=parseInt(z,10),A="";z=(isNaN(u)?A="is not an integer":0>=u?A="must be positive":128<u&&(d("data-icon-px-size must be no more than 128. Reverted to 128."),
u=128),A?(d("data-icon-px-size "+A+". Value given: "+z),32):u)}else z=32;n=n&&n.substring(0,200);w=w&&w.substring(0,50);l=l&&l.substring(0,200);u=(k=k.preview)?"true"!==k&&"false"!==k?void d('data-preview is not a valid value.  Use "true" or "false".  Value given: '+k):"false"===k?k:void 0:void 0;k=void 0;l={assignInstr:n,assignTitle:w,href:m,msgText:l,preview:u,referrer:window.location.hostname};n=[];for(k in l)Object.prototype.hasOwnProperty.call(l,k)&&(m=l[k],void 0!==m&&""!==m&&n.push(k+"="+encodeURIComponent(m)));
k=n.join("&");k=c+"?"+k;f.innerHTML='<a target="ms-teams-share-popup" onclick="window.open(\''+k+"', 'ms-teams-share-popup', 'width=700,height=600'); return false\" href=\""+k+'"><img alt="Share to Microsoft Teams" src="'+h.a+'" width="'+z+'" height="'+z+'"/></a>'}else console.error("Share To Microsoft Teams: ","data-href must be specified.")}}function d(a){console.warn("Share To Microsoft Teams: ",a)}a=f("/1HP");var h=f.n(a);f.d(c,"a",function(){return k});var k=function(a,c){e(a,c);window.shareToMicrosoftTeams=
{renderButtons:function(d){return void 0===d&&(d={}),e(a,c,d.elements)}}}},uzWZ:function(a,c,f){f.r(c);a=f("VlZg");Object(a.a)(document,"https://teams.microsoft.com/share")}});
function sniffBrowser(){function a(a){return a.test(navigator.userAgent.toLowerCase())}var c={isStrict:"CSS1Compat"==document.compatMode,isOpera:a(/opera/),isChrome:a(/\bchrome\b/),isWebKit:a(/webkit/),isWindows:a(/windows|win32/),isMac:a(/macintosh|mac os x/),isAir:a(/adobeair/),isLinux:a(/linux/),isSecure:/^https/i.test(window.location.protocol),isIOS:a(/iPhone/i)||a(/iPod/i)||a(/iPad/i),isIPadOS:"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,isAndroid:a(/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i)||
a(/Android/i),isWindowsPhone:a(/Windows Phone/i)||a(/(?=.*\bWindows\b)(?=.*\bARM\b)/i)};c.isMobile=c.isIOS||c.isAndroid||c.isWindowsPhone||c.isBlackberry||c.isIPadOS;c.isSafari=!c.isChrome&&a(/safari/);c.isIE=!c.isOpera&&a(/msie/);for(key in c)c[key]&&$("html").addClass(key.substring(2,key.length).toLowerCase());return c}
!function(a,c,f,e){var d={flashMessageSelector:"#flash",flashMessageTimeout:null,flashMessageDelay:5E3,heightFixSelector:".height-fix",heightFixNoFooterSelector:".height-fix-no-footer",headerFixSelector:".header-fix",previewFixSelector:".preview-fix",cellfixSelector:".vertical-span-fix",showInfoMessage:function(a,c){return d.showMessage(a,c).attr("class","alert alert-info")},showSuccessMessage:function(a,c){return d.showMessage(a,c).attr("class","alert alert-success")},showWarningMessage:function(a,
c){return d.showMessage(a,c).attr("class","alert alert-warning")},showErrorMessage:function(a,c){return d.showMessage(a,c).attr("class","alert alert-error")},showMessage:function(e,f){c.clearTimeout(d.flashMessageTimeout);d.flashMessageTimeout=setTimeout(d.hideMessage,f||d.flashMessageDelay);return a("<div></div>").prependTo(d.flashMessageSelector).html(e).fadeIn("fast")},hideMessage:function(){return a(d.flashMessageSelector).fadeOut("slow")}};a(f).ready(function(){c.Browser.msie&&10>=parseInt(c.Browser.version)&&
a("#ie_banner").show();c.clearTimeout(d.flashMessageTimeout);d.flashMessageTimeout=setTimeout(d.hideMessage,d.flashMessageDelay);a(f).on("keypress","form input, form select",function(c){return 0>=a(this).parents("form").find("button[type=submit].btn-default, input[type=submit].btn-default").length||!(c.which&&13==c.which||c.keyCode&&13==c.keyCode)?!0:(a(this).parents("form").find("button[type=submit].btn-default, input[type=submit].btn-default").click(),!1)});a(f).on("keydown",function(c){if(c.which&&
9==c.which||c.keyCode&&9==c.keyCode){var d=a(".nav.skip").find("li a#skip-to-content");d.hasClass("first-tab")&&(c.preventDefault(),d.removeClass("first-tab"),d.focus())}})});_.mixin({hideSpinnerAndRestoreOpacity:function(){a("#spinner").hide();clearTimeout(null);a("#content").css("opacity","1");a("#list").css("opacity","1")}});a.ajaxPrefilter(function(c,d,e){c.crossDomain||(c=a('meta[name="csrf-token"]').attr("content"))&&e.setRequestHeader("X-CSRF-Token",c)});a(function(){(new MutationObserver(function(c){c.forEach(function(c){a(c.addedNodes).each(function(){var c=
a(this),e=c.find(d.cellfixSelector);c.is(d.cellfixSelector)&&(e=e.addBack());e.heightFix("cell");e=c.find(d.heightFixSelector);c.is(d.heightFixSelector)&&(e=e.addBack());e.heightFix("fix");e=c.find(d.heightFixNoFooterSelector);c.is(d.heightFixNoFooterSelector)&&(e=e.addBack());e.heightFix({margin:0}).heightFix("fix");e=c.find(d.previewFixSelector);c.is(d.previewFixSelector)&&(e=e.addBack());e.heightFix("fix").heightFix("previewFooterMargin");e=c.find(d.datepickerSelector);c.is(d.datepickerSelector)&&
(e=e.addBack());e.datepicker({format:I18n.t("ui.date.placeholder"),weekStart:1,showAnim:""}).on("changeDate",function(){a(".datepicker").hide()}).removeClass("datepick")})})})).observe(a("body").get(0),{childList:!0,subtree:!0})});if(!Date.prototype.toLocaleFormat||a("body").hasClass("gecko"))Date.prototype.toLocaleFormat=c.alternativeToLocaleFormat}(jQuery,window,document);function getJsonDate(a){a=a.split("-");return new Date(a[0],a[1]-1,a[2])}
function formatJsonDate(a,c){try{return getJsonDate(a).toLocaleFormat(c)}catch(f){return"-"}}
function humanizeJsonDate(a,c,f){c="undefined"!==typeof c?c:I18n.t("ui.date.long");f="undefined"!==typeof f?f:I18n.t("ui.date.custom");try{var e=moment().startOf("day"),d=moment().startOf("day").subtract("years",1),h=getJsonDate(a),k=moment(h);return-1==k.diff(e,"days")?I18n.t("ui.date.yesterday"):0==k.diff(e,"days")?I18n.t("ui.date.today"):1==k.diff(e,"days")?I18n.t("ui.date.tomorrow"):0>k.diff(d,"days")||k.year()!=e.year()?h.toLocaleFormat(c):h.toLocaleFormat(f)}catch(l){return"-"}}
function progressString(a){var c="";switch(a){case "1":c="todo";break;case "2":c="done";break;case "3":c="failed"}return I18n.t("ui.assignments."+c)}
function backgroundUpload(a,c){$("body").append('<iframe name="targetFrame" id="targetFrame" style="display: none; height: 0px; width:0px;" ></iframe>');$(a).attr("target","targetFrame");window.backgroundUploadComplete=function(a,e){"undefined"!=typeof c.element&&c.element.html(e.html);399>a?"undefined"!=typeof c.success&&c.success():"undefined"!=typeof c.error&&c.error();$("#targetFrame").remove()};$(a).submit()}
var ctor=function(){},inherits=function(a,c,f){var e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){a.apply(this,arguments)};_.extend(e,a);ctor.prototype=a.prototype;e.prototype=new ctor;c&&_.extend(e.prototype,c);f&&_.extend(e,f);e.prototype.constructor=e;e.__super__=a.prototype;return e};
_.mixin({inherits:function(a,c,f){var e=function(){};var d=c&&c.hasOwnProperty("constructor")?c.constructor:function(){a.apply(this,arguments)};_.extend(d,a);e.prototype=a.prototype;d.prototype=new e;c&&_.extend(d.prototype,c);f&&_.extend(d,f);d.prototype.constructor=d;d.__super__=a.prototype;return d}});_.mixin(_.str.exports());
window.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("mousedown",function(){document.body.classList.add("using-mouse")});document.body.addEventListener("keydown",function(){document.body.classList.remove("using-mouse")})});function setMobileViewportHeight(){$("html").attr("style","--vh100:"+window.innerHeight+"px")}$(document).ready(function(){sniffBrowser().isMobile&&($(window).on("resize",_.debounce(setMobileViewportHeight,250)),setMobileViewportHeight())});Osp={};
(function(a,c,f){c=f.extend({},c.Events);a.vent=c})(Osp,Backbone,_);(function(a,c){a.app=new c.Application})(Osp,Marionette);
(function(a,c){var f=Backbone.Radio.channel("root");c=new (c.View.extend({template:!1,el:"body",regions:{header:"#header",body:"#body",footer:"#footer"}}));({init:function(){f.reply({"body:show":this.showBody},this);f.on("title:change",this.changeTitle)},showBody:function(c){a.root.showChildView("body",c)},changeTitle:function(a,c){var d=gon.brand;void 0!==a&&(d=d+" - "+a);void 0!==c&&(d=d+" - "+c);document.title!=d&&(document.title=d)}}).init();a.root=c})(Osp,Marionette);
!function(a){"strict";a.can=function(c,f){var e=a.profile.get("type");f=f.split("/");var d=f.shift(),h=a.config.permissions[e][d];_(f).each(function(a){null!=h&&(h=h[a])});return 0<=(null!=h?h.split(","):[]).indexOf(c)}}(Osp);
Osp.Analytics=function(a){var c=Backbone.Radio.channel("analytics"),f,e={getCourseData:function(){return{course_id:a.Analytics.Location.getParentCourse(),course_name:a.Analytics.Location.getCourseName()}},Lens:{getData:function(){return _.extend({title:a.Analytics.Location.getTitle()},!a.Analytics.Location.isGlobal()&&e.getCourseData())},send:function(c){f.sendPageView(a.Analytics.Location.getUrl(),this.getData())}},Download:{types:["pdf"],isTypeToTrack:function(a){return _(this.types).contains(a.get("file_ext"))},
send:function(a,c,d){c=_.extend({},c||e.getCourseData(),d&&{hitCallback:d});this.isTypeToTrack(a)&&f.sendEvent("Documents","download",a.get("name"),c)}},Videos:{MAX_ATTEMPTS:10,TIMEOUT:500,NAME_TEMPLATE:"{{ name }} (v{{ index }})",init:function(a){this.dialog=a;this.cache=[]},getName:function(a){return _.template(this.NAME_TEMPLATE)({name:this.dialog.model.get("name"),index:a+1})},getData:function(a){return _.extend({},e.getCourseData(),a&&{eventValue:Math.ceil(a.time)})},observe:function(a,c){this.cache[c]=
{time:0};a.reportUserActivity&&a.reportUserActivity();this.logFirstPlay(a,c);this.logCurrentTime(a,c)},logFirstPlay:function(a,c){a.on("firstplay",_.bind(function(){f.sendEvent("Videos","play",this.getName(c),this.getData())},this))},logCurrentTime:function(a,c){var d=this.cache[c];a.on("progress",_.bind(function(){d.time<a.duration()&&(d.time=a.currentTime())},this));a.on("ended",_.bind(function(){d.time=a.duration()},this))},onDestroy:function(){_(this.cache).each(function(a,c){f.sendEvent("Videos",
"close",this.getName(c),this.getData(a))},this)},search:function(a){var c=this,d=0,e=setInterval(function(){try{a.$(".video-js").each(function(d,e){c.observe(a.videojs(e),d)}),(a.$(".video-js").length||d===c.MAX_ATTEMPTS)&&clearInterval(e),d++}catch(n){clearInterval(e)}},this.TIMEOUT)},parse:function(a){this.init(a);var c=a.$("iframe").get(0).contentWindow;this.search(c);a.on("destroy",this.onDestroy,this)}},ShareContentClick:{send:function(){f.sendEvent("ShareContent","click","")}},AssignContent:{send:function(a){window.dataLayer&&
window.dataLayer.push({event:"assignContent",AssignedContent:a.join(", ")})}},IWB:{send:function(a,c){f.sendEvent("IWB",a,c,e.getCourseData())}}},d={init:function(a,c,d){f=a;f.create(c,d.user_id);f.setDimensions(d);this.comply();return this},comply:function(){c.reply({"track:lens":this.trackLens,"track:download":this.trackDownload,"track:videos":this.trackVideos,"track:shareContentClick":this.trackShareContentClick,"track:assignContent":this.trackAssignContent,"track:iwb":this.trackIWB},this)},trackLens:function(a){e.Lens.send(a)},
trackDownload:function(a,c,d){e.Download.send(a,c,d)},trackVideos:function(a){e.Videos.parse(a)},trackShareContentClick:function(){e.ShareContentClick.send()},trackAssignContent:function(a){e.AssignContent.send(a)},trackIWB:function(a,c){e.IWB.send(a,c)}};return{Manager:_.bind(d.init,d)}}(Osp);
Osp.Analytics.Adapter=function(){var a=null,c={config:{},setConfig:function(a){this.config=a},getIndex:function(a){return this.config[a]||a},getObject:function(a){return _.reduce(_.keys(a),function(c,e){var d=this.getIndex(e);e=a[e];e=_.isNumber(e)?e.toString():e;c[d]=e;return c},{},this)}},f={create:function(c,d){a("create",c.code,c.domain,{userId:d})},set:function(c){a("set",c)},send:function(c){a("send",c)},sendPageView:function(a,c){this.send(_.extend({hitType:"pageview",page:a},this.getDimensionsObject(c)))},
sendEvent:function(a,c,f,k){this.send(_.extend({hitType:"event",eventCategory:a,eventAction:c,eventLabel:f},this.getDimensionsObject(k)))},getDimensionsObject:function(a){return!_.isEmpty(a)&&c.getObject(a)},setDimensions:function(a){this.set(this.getDimensionsObject(a))}};return function(e,d){d&&c.setConfig(d);a=e;return f}}();
Osp.Analytics.Location=function(a){var c=/^courses\/([^\/]+)/;return{root:function(){return Backbone.history.options.root},fragment:function(){return Backbone.history.getFragment()},isGlobal:function(){return this.fragment().match(c)?!1:!0},getData:function(){return{course:!this.isGlobal()&&a.state.getCourse(),lens:a.state.getLens()}},getNames:function(){return{course:this.getData().course&&this.getData().course.get("name"),lens:this.getData().lens&&this.getData().lens.get("name").humanize()}},getTitle:function(){return _.template('{{ course || "Global" }}{{ lens ? (" - " + lens) : "" }}')(this.getNames())},
getParentCourse:function(){return this.getData().course.get("parent_id")},getCourseName:function(){return this.getData().course.get("name")},getCourseFragment:function(){return this.fragment().replace(c,"courses/"+this.getParentCourse())},getUrl:function(){return this.root()+(this.isGlobal()?this.fragment():this.getCourseFragment())}}}(Osp);
(function(a,c){var f={institution_account:"dimension1",user_id:"dimension2",course_id:"dimension3",course_name:"dimension4"};a.app.on("before:start",function(e,d){a.Analytics.Manager(a.Analytics.Adapter(c,f),d.analytics.config,d.analytics.data)})})(Osp,window.ga);
Osp.config={notificationsCategories:{teacher:["system"],student:["system"]},notificationsFetchPeriod:6E5,waitBeforeNoContents:1E3,lensesWidth:412,groupPollingCheckingPeriod:1E4,iwbQuotaPollingCheckingPeriod:3E4,defaultFilters:{teacher:{},student:{},administrator:{}},defaultSearch:{teacher:{markbook:"assigned_by:me"},student:{},administrator:{}}};
Osp.config.actions={teacher:{assignments:[{name:"preview",event:"course:assignments:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"edit",event:"course:resources:edit",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:edit",multiple:!1}},{name:"copy",event:"course:dialog:copy",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:copy",multiple:!1}},{name:"move",event:"course:dialog:move",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:move",
multiple:"permissions:move"}},{name:"delete",event:"course:dialog:delete",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:delete",multiple:"permissions:delete"}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,single:!0,multiple:!0}}],iwb:[{name:"copy",event:"course:iwb:copy",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:copy",multiple:!1}},{name:"rename",event:"course:iwb:rename",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:rename",
multiple:!1}},{name:"delete",event:"course:iwb:delete",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:delete",multiple:"permissions:delete"}}],markbook:[{name:"preview",event:"course:markbook:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"student_report",event:"course:markbook:report:student",toggle:!1,more:!1,enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"group_report",event:"course:markbook:report:group",toggle:!1,more:!1,enableWhen:{empty:!0,single:!0,
multiple:!0}},{name:"diagnostic_report",event:"course:markbook:report:diagnostic",toggle:!1,more:!1,enableWhen:{empty:!0,single:!0,multiple:!0}}],resources:[{name:"preview",event:"course:resources:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"edit",event:"course:resources:edit",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:edit",multiple:!1}},{name:"copy",event:"course:dialog:copy",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:copy",multiple:!1}},
{name:"google_classroom",event:"course:share",strategy:"GoogleClassroom",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"ms_teams",event:"course:share",strategy:"MSTeams",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"copy_link_to_vle",event:"course:share",strategy:"CopyLinkToVle",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"move",event:"course:dialog:move",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:move",
multiple:"permissions:move"}},{name:"delete",event:"course:dialog:delete",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:delete",multiple:"permissions:delete"}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,single:!0,multiple:!0}}],planning:[{name:"preview",event:"course:planning:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"edit",event:"course:resources:edit",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:edit",
multiple:!1}},{name:"copy",event:"course:dialog:copy",toggle:!1,more:!1,enableWhen:{empty:!1,single:"permissions:copy",multiple:!1}},{name:"google_classroom",event:"course:share",strategy:"GoogleClassroom",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"ms_teams",event:"course:share",strategy:"MSTeams",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"copy_link_to_vle",event:"course:share",strategy:"CopyLinkToVle",toggle:!1,more:"share",enableWhen:{empty:!0,
single:!0,multiple:!0}},{name:"move",event:"course:dialog:move",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:move",multiple:"permissions:move"}},{name:"delete",event:"course:dialog:delete",toggle:!1,more:"more",enableWhen:{empty:!1,single:"permissions:delete",multiple:"permissions:delete"}},{name:"export",event:"course:planning:export",toggle:!1,more:"more",enableWhen:{empty:!1,single:!0,multiple:!0}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,
single:!0,multiple:!0}}],users:[{name:"preview",event:"course:users:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}}]},tester:{assignments:[{name:"preview",event:"course:assignments:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,single:!0,multiple:!0}}],markbook:[],resources:[{name:"preview",event:"course:resources:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,
multiple:!1}},{name:"google_classroom",event:"course:share",strategy:"GoogleClassroom",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"ms_teams",event:"course:share",strategy:"MSTeams",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"copy_link_to_vle",event:"course:share",strategy:"CopyLinkToVle",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,
single:!0,multiple:!0}}],planning:[{name:"preview",event:"course:planning:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"google_classroom",event:"course:share",strategy:"GoogleClassroom",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"ms_teams",event:"course:share",strategy:"MSTeams",toggle:!1,more:"share",enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"copy_link_to_vle",event:"course:share",strategy:"CopyLinkToVle",toggle:!1,more:"share",
enableWhen:{empty:!0,single:!0,multiple:!0}},{name:"export",event:"course:planning:export",toggle:!1,more:"more",enableWhen:{empty:!1,single:!0,multiple:!0}},{name:"print",event:"course:dialog:print",toggle:!1,more:"more",enableWhen:{empty:!0,single:!0,multiple:!0}}],users:[]},student:{resources:[{name:"preview",event:"course:resources:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}}],planning:[{name:"preview",event:"course:planning:preview",toggle:!0,more:!1,enableWhen:{empty:!1,
single:!0,multiple:!1}}],assignments:[{name:"preview",event:"course:assignments:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}}],markbook:[{name:"preview",event:"course:markbook:preview",toggle:!0,more:!1,enableWhen:{empty:!1,single:!0,multiple:!1}}]},administrator:{users:[{name:"preview",event:"global:users:preview",toggle:!1,more:!1,selfStudy:!0,enableWhen:{empty:!1,single:!0,multiple:!1}},{name:"edit",event:"global:users:edit",toggle:!1,more:!1,selfStudy:!0,enableWhen:{empty:!1,
single:!0,multiple:!1}},{name:"newstudent",event:"global:users:new:student",toggle:!1,more:"newuser",selfStudy:!1,enableWhen:{empty:!0,single:!1,multiple:!1}},{name:"newteacher",event:"global:users:new:teacher",toggle:!1,more:"newuser",selfStudy:!0,enableWhen:{empty:!0,single:!1,multiple:!1}},{name:"delete",event:"global:users:delete",toggle:!1,more:"more",selfStudy:!0,enableWhen:{empty:!1,single:!0,multiple:!0}},{name:"archive",event:"global:users:archive",toggle:!1,more:"more",selfStudy:!0,enableWhen:{empty:!1,
single:!0,multiple:!0}},{name:"unarchive",event:"global:users:unarchive",toggle:!1,more:"more",selfStudy:!0,enableWhen:{empty:!1,single:!0,multiple:!0}},{name:"csvimport",event:"global:users:csvimport",toggle:!1,more:"csv",selfStudy:!1,enableWhen:{empty:!0,single:!1,multiple:!1}},{name:"csvtemplate",event:"global:users:csvtemplate",toggle:!1,more:"csv",selfStudy:!0,enableWhen:{empty:!0,single:!1,multiple:!1}},{name:"csvexport",event:"global:users:csvexport",toggle:!1,more:"csv",selfStudy:!0,enableWhen:{empty:!0,
single:!0,multiple:!1}},{name:"reset_passwords",event:"global:users:reset_passwords",toggle:!1,more:"more",selfStudy:!0,enableWhen:{empty:!1,single:!0,multiple:!0}}]}};
Osp.config.permissions={teacher:{lenses:{home:"show",assignments:"show",resources:"show",planning:"show",markbook:"show",digibook:"show",users:"show",iwb:"show",teacher_reports:"show"},home:{big_carousel:"show",small_carousel:"show"},resources:{structures:"show",buttons:"show",changes:"show",details:"show",preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",format:"read,write",source:"read,write",keywords:"read,write",file_ext:"read",student_access:"read,write",
url:"read,write",save:"show"},create:{name:"read,write",created_at:"read"},edit:{name:"read,write",created_at:"read"}},planning:{structures:"show",buttons:"show",changes:"show",details:"show",preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",format:"read,write",source:"read,write",keywords:"read,write",file_ext:"read",student_access:"read,write",save:"show"},create:{name:"read,write",created_at:"read"}},users:{buttons:"show",preview:{first_name:"read",
last_name:"read",display_name:"read",email:"read",username:"read",userid:"read",groups:"read",courses:"read",password:{student:"write"},save:"show"},create:{group:{name:"read,write",created_at:"read"}}},profile:{first_name:"read,write",last_name:"read,write",surname:"read,write",display_name:"read,write",email:"read,write",username:"read,write",userid:"",courses:"read",current_password:"read,write",password:"read,write",password_confirmation:"read,write"},assignments:{structures:"show",buttons:"show",
preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",points:"read,write",format:"read",test_name:"read",contents:"read",source:"read,write",keywords:"read,write",file_ext:"read",url:"read,write",used_as:"read,write",save:"show"},form:{mark:"read,write",content_student:"read"}},markbook:{tabs:"show",filters:"show",groups:"show",users:"show",group_name:"show",preview:{status:"read",description:"read",test_description:"read",mark:"read",due_date:"read",start_date:"read",
points:"read",test_name:"read",contents:"read",groups:"read",students:"read"}}},tester:{lenses:{home:"show",assignments:"show",resources:"show",planning:"show",markbook:"show",digibook:"show",users:"show"},home:{big_carousel:"show",small_carousel:"show"},resources:{structures:"show",buttons:"show",changes:"show",details:"show",preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",format:"read,write",source:"read,write",keywords:"read,write",file_ext:"read",
student_access:"read,write",save:"show"},create:{name:"read,write",created_at:"read"},edit:{name:"read,write",created_at:"read"}},planning:{structures:"show",buttons:"show",changes:"show",details:"show",preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",format:"read,write",source:"read,write",keywords:"read,write",file_ext:"read",student_access:"read,write",save:"show"},create:{name:"read,write",created_at:"read"}},users:{buttons:"show",preview:{first_name:"read",
last_name:"read",display_name:"read",email:"read",username:"read",userid:"read",groups:"read",courses:"read",password:{student:"write",teacher:""},save:"show"},create:{user:{first_name:"read,write",last_name:"read,write",display_name:"read,write",email:"read,write",username:"read,write",userid:"read,write",password:{student:"write",teacher:""}},group:{name:"read,write",created_at:"read"}}},profile:{first_name:"read,write",last_name:"read,write",surname:"read,write",display_name:"read,write",email:"read,write",
username:"read,write",userid:"",courses:"read",current_password:"read,write",password:"read,write",password_confirmation:"read,write"},assignments:{structures:"show",buttons:"show",preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",points:"read,write",format:"read",test_name:"read",contents:"read",source:"read,write",keywords:"read,write",file_ext:"read",used_as:"read,write",save:"show"},form:{mark:"read,write",content_student:"read"}},markbook:{tabs:"show",
filters:"show",groups:"show",users:"show",group_name:"show",preview:{status:"read",description:"read",test_description:"read",mark:"read",due_date:"read",start_date:"read",points:"read",test_name:"read",contents:"read",groups:"read",students:"read"}}},student:{lenses:{home:"show",assignments:"show",resources:"show",planning:"show",markbook:"show",digibook:"show",users:"",student_reports:"show",next_steps:"show"},home:{big_carousel:"show",small_carousel:"",group_code:"show"},resources:{structures:"show",
buttons:"",changes:"",details:"show",preview:{name:"read",description:"read",location:"read",activity_type:"read",format:"read",source:"read",keywords:"read",file_ext:"read",student_access:"read",save:""}},planning:{structures:"show",buttons:"",changes:"",details:"show",preview:{name:"read",description:"read",location:"read",activity_type:"read",format:"read",source:"read",keywords:"read",file_ext:"read",student_access:"read",save:""}},profile:{first_name:"read",last_name:"read",display_name:"",email:"read,write",
username:"read",userid:"read",courses:"read",groups:"read",current_password:"read,write",password:"read,write",password_confirmation:"read,write"},assignments:{preview:{due_date:"read",progress:"read",points:"read",instruction:"read",groups:"",students:""},form:{mark:"read",content_student:"read,write"}},markbook:{tabs:"",filters:"show",groups:"",users:"",group_name:"",preview:{percentage:"read",due_date:"read",start_date:"read",points:"read",test_name:"read",contents:"read"}}},administrator:{home:{lenses:"show",
big_carousel:"show"},lenses:{home:"show",assignments:"show",resources:"show",planning:"show",markbook:"show",digibook:"show",users:"show",settings:"show"},resources:{preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",format:"read,write",source:"read,write",keywords:"read,write",file_ext:"read",student_access:"read,write",save:"show"}},planning:{preview:{name:"read",description:"read",location:"read",activity_type:"read",format:"read",source:"read",keywords:"read",
file_ext:"read",student_access:"read",save:""}},assignments:{preview:{name:"read,write",description:"read,write",location:"read",activity_type:"read,write",points:"read,write",format:"read",test_name:"read",contents:"read",source:"read,write",keywords:"read,write",file_ext:"read",used_as:"read,write",save:"show"},form:{mark:"read,write",content_student:"read"}},markbook:{preview:{status:"read",description:"read",test_description:"read",mark:"read",due_date:"read",start_date:"read",points:"read",test_name:"read",
contents:"read",groups:"read",students:"read"}},users:{buttons:"show",preview:{first_name:"read,write",last_name:"read,write",display_name:"read,write",email:"read,write",username:"read,write",userid:"read,write",groups:"read",courses:"read",password:{student:"write",teacher:""},save:"show"},create:{user:{first_name:"read,write",last_name:"read,write",display_name:"read,write",email:"read,write",username:"read,write",userid:"read,write",password:{student:"write",teacher:""}},group:{name:"read,write",
created_at:"read"}}},profile:{first_name:"read,write",last_name:"read,write",surname:"read,write",display_name:"read,write",email:"read,write",username:"read,write",userid:"",courses:"read",current_password:"read,write",password:"read,write",password_confirmation:"read,write"}}};
Osp.Routing=function(a,c){var f=c.Radio.channel("routing:public"),e=function(a,c){return function(){var a=arguments,d=_.bind(function(){c.apply(this,a);f.trigger("route")},this);f.request("redirect:get").done(function(a){f.request("redirect",a)||d()}).fail(d)}};a.AppRouter=c.Marionette.AppRouter.extend({route:function(a,d,f){c.Marionette.AppRouter.prototype.route.call(this,a,d,e(a,f))}});var d=function(){this.stack=[];this.setForceRedirectPromise();this.complyWithCommands();this.replyToRequests();
_.bindAll(this,"onPopState")};_(d.prototype).extend({navigate:function(a){c.history&&(a instanceof Array&&(a=a.join("/")),this.triggerNavigateEvent(a),c.history.navigate(a,!0))},triggerNavigateEvent:function(a){!this.sameAsCurrentRoute(a)&&f.trigger("navigate",a)},sameAsCurrentRoute:function(a){return _(this.stack).first()===a},store:function(a){this.sameAsCurrentRoute(a)||(this.stack.unshift(a),5<this.stack.length&&this.stack.pop())},back:function(){this.stack.splice(0,1);this.navigate(this.stack.shift())},
stop:function(){c.history.stop();$(window).on("popstate",this.onPopState)},getForceRedirectPromise:function(){return this.redirectPromise},setForceRedirectPromise:function(a){this.redirectPromise=a||$.Deferred().reject().promise()},redirect:function(a){this.setForceRedirectPromise();if(this.sameAsCurrentRoute(a))return!1;this.navigate(a);return!0},restart:function(){$(window).off("popstate",this.onPopState);c.history.start({silent:!0})},onPopState:function(){var a=c.history.getFragment();window.history.pushState({},
document.title,c.history.options.root+_(this.stack).first());this.triggerNavigateEvent(a)},complyWithCommands:function(){f.reply({store:this.store,back:this.back,stop:this.stop,restart:this.restart,navigate:this.navigate,"redirect:set":this.setForceRedirectPromise},this)},replyToRequests:function(){f.reply({redirect:this.redirect,"redirect:get":this.getForceRedirectPromise},this)}});a.app.on("before:start",function(){new d});return{showRoute:function(a){f.request("navigate",a)}}}(Osp,Backbone);
function versionedName(a){var c=a.get("name"),f=/^(.*)\(([0-9]+)\)$/.exec(c);c=null==f?c:f[1];if("undefined"!=typeof a.collection){var e=new RegExp(c+"\\(([0-9]+)\\)");a=_.max(_.map(a.collection.pluck("name"),function(a){a=e.exec(a);return null!=a?a[1]:null}))}else a=null==f?"0":f[2];return c+"("+(1*a+1)+")"}function omit(a,c){var f={},e=Array.prototype.slice.call(arguments);a=e.shift();c=e;_.each(a,function(a,e){for(var d in c)e!==c[d]&&(f[e]=a)});return f}
function diff(a,c){var f={},e;for(e in a)a[e]!=c[e]&&(f[e]=a[e]);return f}function hex2rgba(a,c){a=a.replace("#","");r=parseInt(a.substring(0,a.length/3),16);g=parseInt(a.substring(a.length/3,2*a.length/3),16);b=parseInt(a.substring(2*a.length/3,3*a.length/3),16);return result="rgba("+r+","+g+","+b+","+c/100+")"}var JsonApiParser=function(a){this.payload=a};
JsonApiParser.prototype.getAttrs=function(a,c){if(!this.included)return null;var f=this.included.find(function(e){return e.id==a&&e.type==c});return f&&f.attributes};JsonApiParser.prototype.parseEntity=function(a){var c=this;return _(a).isArray()?a.map(function(a){return c.getAttrs(a.id,a.type)}):this.getAttrs(a.id,a.type)};
JsonApiParser.prototype.parseRelationships=function(a){var c=this;return a.relationships?Object.keys(a.relationships).reduce(function(f,e){var d=a.relationships[e].data;if(!d)return f;f[e]=c.parseEntity(d);return f},{}):{}};JsonApiParser.prototype.parseCollection=function(){var a=this;return _(this.data).map(function(c){return a.parseModel(c)})};JsonApiParser.prototype.parseModel=function(a){return Object.assign({},_.clone((a||this.data).attributes),this.parseRelationships(a||this.data))};
JsonApiParser.parseCollection=function(a){try{return(new JsonApiParser(a)).parseCollection()}catch(c){return a}};JsonApiParser.parseModel=function(a){try{return(new JsonApiParser(a)).parseModel()}catch(c){return a}};$jscomp.global.Object.defineProperties(JsonApiParser.prototype,{data:{configurable:!0,enumerable:!0,get:function(){return this.payload.data}},meta:{configurable:!0,enumerable:!0,get:function(){return this.payload.meta}},included:{configurable:!0,enumerable:!0,get:function(){return this.payload.included}}});
Osp.Behaviors={};(function(a,c,f,e){c.Date=f.Behavior.extend({ui:{date:".datepick"},onRender:function(){this.getUI("date").datepicker({format:I18n.t("ui.date.placeholder"),autoclose:!0,weekStart:1,startDate:e().format(I18n.t("ui.date.placeholder").toUpperCase())}).removeClass("datepick")}})})(Osp,Osp.Behaviors,Marionette,moment);
(function(a,c,f){c.FormErrors=f.Behavior.extend({initialize:function(){this.listenTo(this.view,"displayErrors",this.displayErrors.bind(this));this.listenTo(this.view,"clearErrors",this.clearErrors.bind(this));this.listenTo(this.view,"scrollToFirstError",this.scrollToFirstError.bind(this))},defaults:{rawErrorFor:[],prependFieldNameOnError:!0,scrollableElementSelector:".section__body",fieldErrorsContainerSelector:".helpCard__content"},getModelName:function(){var c=this.view.model;return c&&c instanceof
a.Model&&c.paramRoot?c.paramRoot.toLowerCase():c},getErrorField:function(a){a="[name="+a+"]";var c=this.$(a);0==c.length&&(c=$(a));return c},mustPrependFieldNameOnError:function(a){return this.options.prependFieldNameOnError&&!_(this.options.rawErrorFor).include(a)},normalizeError:function(a,c){this.mustPrependFieldNameOnError(a)&&(c=a.humanize(!1,this.getModelName())+" "+c);return c},displayErrors:function(a){_(a).each(function(a,c){var d=this.getErrorField(c).closest(".form__group");d.addClass("error");
d.find(".helpCard--error").toggleClass("hidden");var e=d.find(this.options.fieldErrorsContainerSelector);_(a).each(function(a){$("<p/>").html(this.normalizeError(c,a)).appendTo(e)},this)},this)},getFirstErrorField:function(){var a=this.$el.find(".error").first();0===a.length&&(a=$(".error").first());return a},scrollToFirstError:function(){var a=$(this.options.scrollableElementSelector),c=this.getFirstErrorField().offset().top-a.offset().top;a.animate({scrollTop:a.scrollTop()+c},300)},clearErrors:function(){var a=
$(".form__group.error");a.removeClass("error").find("p").remove();a.find(".helpCard--error").toggleClass("hidden")}})})(Osp,Osp.Behaviors,Marionette);(function(a,c,f){c.FuzzyTime=f.Behavior.extend({ui:{time:"time[datetime]"},onRender:function(){this.getUI("time").timeago()}})})(Osp,Osp.Behaviors,Marionette);
(function(a,c,f){c.Math=f.Behavior.extend({ui:{math:".math-formula"},onRender:function(){this.getUI("math").each(function(){$(this).find("math").length&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,this])})}})})(Osp,Osp.Behaviors,Marionette);
(function(a,c,f,e,d){c.Period=f.Behavior.extend({ui:{start:"[role=datepick][data-date=start]",end:"[role=datepick][data-date=end]"},defaults:{format:I18n.t("ui.date.placeholder"),autoclose:!0,weekStart:1,todayHighlight:!0,keyboardNavigation:!1},getZIndexMax:function(){return parseInt($(d.max($("body *"),function(a){return parseInt($(a).css("z-index"))})).css("z-index"))+1},getOptions:function(a){return d.extend({},this.defaults,a)},format:function(){return this.defaults.format.toUpperCase()},today:function(){return e().format(this.format())},
tomorrow:function(){return e().add("days",1).format(this.format())},onChangeStart:function(a){this.getUI("end").datepicker("setStartDate",this.startForEndDate(),!0)},dayAfterStart:function(){return e(this.getUI("start").val(),this.format()).add("days",1).format(this.format())},startForEndDate:function(){return this.getUI("start").val()?this.dayAfterStart():this.tomorrow()},onRender:function(){this.getZIndexMax();this.getUI("start").datepicker(this.getOptions({startDate:this.today(),zIndexOffset:this.getZIndexMax()})).on("changeDate",
this.onChangeStart.bind(this));this.getUI("end").datepicker(this.getOptions({startDate:this.startForEndDate(),zIndexOffset:this.getZIndexMax()}))}})})(Osp,Osp.Behaviors,Marionette,moment,_);
(function(a,c){a.Tabs=c.Behavior.extend({ui:{tab:".navigationTabs__button:not(.navigationTabs__button--disabled)"},events:{"click @ui.tab":"onTabClick"},initialize:function(){this.listenTo(this.view,"select",this.onSelect.bind(this))},onSelect:function(a){this.select(this.$("[data-event="+a+"]"))},select:function(a){if(a.parent().hasClass("navigationTabs__item--active")||a.parent().hasClass("navigationTabs__item--disabled"))return!1;this.$(".navigationTabs__item--active").removeClass("navigationTabs__item--active");
a.parent().addClass("navigationTabs__item--active");return!0},onTabClick:function(a){a.preventDefault();a=$(a.currentTarget);this.select(a)&&(this.$(".tabPanel--active").removeClass("tabPanel--active"),this.$(a.attr("href")).addClass("tabPanel--active"),a.data("event")&&(this.view.trigger("activate",a.data()),this.view.trigger(a.data("event"),a.attr("href"))))}})})(Osp.Behaviors,Marionette);
(function(a,c){a.Tooltip=c.Behavior.extend({ui:{tooltip:"[data-tooltip]"},shouldShowTooltip:function(a){var c=a.find("span").get(0);return c&&c.offsetWidth<c.scrollWidth||!!a.attr("data-tooltip-forceShow")},applyTooltip:function(a){this.shouldShowTooltip(a)&&(a.mouseover(function(){return a.focus()}).keydown(function(c){"Escape"===c.key&&a.blur()}),$(a.closest("th")[0]).mouseleave(function(){a.blur()}),tippy(a.get(0),{content:a.attr("data-tooltip"),placement:a.attr("data-tooltip-placement")||"top-end",
theme:"material",trigger:"mouseenter hover focus",interactiveBorder:10,appendTo:document.body,interactive:!0}))},onDomRefresh:function(){var a=this;this.getUI("tooltip").each(function(c,d){return a.applyTooltip($(d))})}})})(Osp.Behaviors,Marionette);
!function(){Osp.Model=Backbone.Model.extend({markAsFetched:function(){this._fetched=!0},wasFetched:function(){return!!this._fetched},planFetch:function(){this._fetched=!1},deepClone:function(){var a=new this.constructor(this.attributes),c;for(c in a.attributes){var f=a.attributes[c];f&&"function"===typeof f.clone&&(a.attributes[c]=f.clone())}return a},startPolling:function(a,c){setInterval(this.fetch.bind(this,c),a)},parseJsonAPI:JsonApiParser.parseModel});Osp.Collection=Backbone.Collection.extend({_fetched:!1,
_shouldRememberSelected:!1,sortColumn:"",sortDirection:"asc",constructor:function(){Backbone.Collection.prototype.constructor.apply(this,arguments);this.manageStatus();this._resetDfd=$.Deferred();this.on("reset",function(){this._resetDfd.resolve()},this)},params:function(){return{}},getQueryString:function(a){var c=a||this.params();return Object.keys(c).map(function(a){return a+"="+encodeURIComponent(c[a])}).join("&")},manageStatus:function(){this._fetching=!1;this.on("request",function(){this._fetching=
!0});this.on("sync error",function(){this._fetching=!1})},isFetching:function(){return this._fetching},planFetch:function(){this._fetched=!1},markAsFetched:function(){this._fetched=!0;this.trigger("fetched")},wasFetched:function(){return this._fetched},shouldRememberSelected:function(){return this._shouldRememberSelected},setCheckedItems:function(){this._selectedItemIds=_.map(_.select(this.models,function(a){return a.get("checked")}),function(a){return a.id});this._shouldRememberSelected=!0},rememberCheckedItems:function(){this._shouldRememberSelected&&
(_.each(this.models,function(a){-1!=_.indexOf(this._selectedItemIds,a.id)&&a.set({checked:!0})},this),this._shouldRememberSelected=!1)},sortByAttr:function(a){if("undefined"!==typeof a)return this.sortColumn===a?"asc"===this.sortDirection?this.sortDirection="desc":this.sortColumn="":(this.sortDirection="asc",this.sortColumn=a),this.fetch({reset:!0});this.sortColumn=""},setSort:function(a){this.sortColumn=a.attribute;this.sortDirection=a.direction},isSortable:function(){return""!=this.sortDirection&&
""!=this.sortColumn},onReset:function(a){this._resetDfd.promise().then(a.bind(this,this))},startPolling:function(a,c){var f=_.bind(function(){this.fetch(c)},this);setInterval(f,a)},clone:function(){return new this.constructor(this.models)},deepClone:function(){var a=new this.constructor(this.models),c;for(c in a.models){var f=a.models[c];f&&"function"===typeof f.clone&&(a.models[c]=f.clone())}return a},cloneRecursive:function(){for(var a,c,f=[],e=this.toArray();0<e.length;)a=e.shift(),c=a.clone(),
c._children=a.children().cloneRecursive(),c._children._parent=c,f.push(c);return new this.constructor(f,{course:this.course(),institution_id:Osp.institution&&Osp.institution.id})},allRecursive:function(a){var c=[];this._applyToTree(function(a){c.push(a)});return _(c).all(a)},mapRecursive:function(a){var c=[];this._applyToTree(function(a){c.push(a)});return _(c).map(a)},eachRecursive:function(a){this._applyToTree(a)},getRecursive:function(a){return this._applyToTree(function(c){return c.id==a?c:null})},
getRecursiveByCid:function(a){return this._applyToTree(function(c){return c.cid==a?c:null})},getRecursiveBy:function(a,c){return this._applyToTree(function(f){return f.get(a)==c?f:null})},rejectRecursive:function(a){var c=[];this._applyToTree(function(a){c.push(a)});return _(c).reject(a)},_applyToTree:function(a){for(var c=this.toArray(),f,e;0<c.length;){f=c.shift();if(e=a(f))return e;_.isFunction(f.children)&&f.children()&&c.push.apply(c,f.children().toArray())}return null},areAny:function(a){return this.any(function(c){return c.get(a)})},
areAll:function(a){return this.all(function(c){return c.get(a)})},areNone:function(a){return!this.areAll(a)},allThatAre:function(a){return this.filter(function(c){return c.get(a)})},allThatAreNot:function(a){return this.filter(function(c){return!c.get(a)})},firstWith:function(a){return this.where(a)[0]},setForAll:function(a){this.invoke("set",a);return this},setForAllBut:function(a,c){this.chain().without(a).invoke("set",c);return this},parse:function(a){return _(a.entries).isUndefined()||_(a.entries).isFunction()?
a:a.entries},parseTree:function(a){var c={};return _(this.parseJsonAPI(a)).reduce(function(a,e){if(0<e.depth)try{c[e.parent_id].children||(c[e.parent_id].children=[]),c[e.parent_id].children.push(e)}catch(d){console.log("Can not append node ["+e.id+"] to parent ["+e.parent_id+"]")}else a.push(e);c[e.id]=e;return a},[])},parseJsonAPI:JsonApiParser.parseCollection});Osp.PaginatedCollection=Backbone.Paginator.requestPager.extend({initialize:function(a,c){Backbone.Paginator.requestPager.prototype.initialize.apply(this,
arguments);this.server_api=_(_.clone(this.server_api)).extend(this.urlParams);this.paginator_ui=_.clone(this.paginator_ui);this.resetCurrentPage();_.defaults(this,Osp.Collection.prototype);this.manageStatus()},urlParams:{},paginator_core:{dataType:"json",url:function(){return this.url()}},paginator_ui:{firstPage:1,currentPage:1,perPage:20,pagesInRange:3},server_api:{per_page:function(){return this.perPage},page:function(){return this.currentPage||1},sort:function(){return this.isSortable()?encodeURIComponent(this.sortColumn):
""},order:function(){return this.isSortable()?encodeURIComponent(this.sortDirection):""},query:function(){return encodeURIComponent(Osp.state.getSearchTerm("query"))}},parse:function(a){this.totalRecords=a.total_entries;return a.entries},parseJsonAPI:function(a){this.totalRecords=a.meta?a.meta.total_entries:a.total_entries;return Osp.Collection.prototype.parseJsonAPI.call(this,a)},startRecord:function(){return"all"===this.perPage&&this.totalRecords?1:0===this.totalRecords?0:(this.currentPage-1)*this.perPage+
1},endRecord:function(){return"all"===this.perPage&&this.totalRecords?this.totalRecords:Math.min(this.totalRecords,this.currentPage*this.perPage)},pageInfo:function(){var a=this.info().totalPages||1;return _.extend(this.info(),{totalPages:a,startRecord:this.startRecord(),endRecord:this.endRecord(),prev:this.currentPage>this.paginator_ui.firstPage,next:this.currentPage<a})},resetCurrentPage:function(a){this.paginator_ui.totalPages=this.totalPages=null;this.paginator_ui.currentPage=this.currentPage=
a||1;return this},getSearchParams:function(){var a=this;return Object.keys(this.urlParams).reduce(function(c,f){var e={};return Object.assign(c,(e[f]=a.urlParams[f].call(a),e))},{})},getQueryStrim:function(){var a=this.getSearchParams();return Object.keys(a).map(function(c){return c+"="+encodeURIComponent(a[c])}).join("&")},isSortedByColumn:function(a){return this.sortColumn==a}})}();
!function(){Osp.Profile=Osp.Model.extend({paramRoot:"user",defaults:{clazz:"Profile"},limits:{first_name:25,surname:25,display_name:50},url:"/api/profile",isTeacher:function(){return"teacher"===this.get("type")||"administrator"===this.get("type")},isStudent:function(){return"student"===this.get("type")},isAdministrator:function(){return"administrator"===this.get("type")},getProperties:function(){return this.get("properties")},getProperty:function(a,c){return void 0!==this.get("properties")[a]?this.get("properties")[a]:
void 0!==c?c:!1},setProperty:function(a,c){var f=this.getProperties();f[a]=c;this.set({properties:f})},unsetProperty:function(a){var c=this.getProperties();delete c[a];this.set({properties:c})},saveProperty:function(a,c){this.setProperty(a,c);this.saveProperties()},saveProperties:function(){return(new Osp.ProfileProperties({properties:this.getProperties()})).save()}});Osp.ProfileProperties=Osp.Model.extend({url:"/api/profile/properties"});Osp.ProfileChangePassword=Osp.Model.extend({url:"/api/profile/change_password"})}();
!function(){Osp.Notification=Osp.Model.extend({parse:Osp.Model.prototype.parseJsonAPI,paramRoot:"notification"});Osp.NotificationsCount=Osp.Model.extend({url:"/api/notifications/count"});Osp.Notifications=Osp.PaginatedCollection.extend({model:Osp.Notification,url:function(){var a="/api/notifications";this.archived&&(a+="?archived=1");return a},toggleArchived:function(){this.archived=!this.archived;return this},parse:function(a){this.totalRecords=a.total_entries;Osp.notificationsCount.set({unread:a.unread});
return Osp.Collection.prototype.parseJsonAPI.apply(this,arguments)}});Osp.app.on("before:start",function(){Osp.notificationsCount=new Osp.NotificationsCount(gon.notificationsCount);Osp.notificationsCount.startPolling(Osp.config.notificationsFetchPeriod)})}();
!function(a){Osp.Course=Osp.Model.extend({parse:Osp.Model.prototype.parseJsonAPI,paramRoot:"course",urlRoot:"/api/v2/courses",defaults:{clazz:"Course",hideDescriptions:!1,currentState:{lens:null,filter:null,group:null,structure:null,content:null,page:null,savedTree:null,searchTerms:{type:"",source:"",query:"",used_as:""}}},initialize:function(a,f){f=f||{};this._lenses=f.lenses||new Osp.Lenses(null,{course:this});this._structures=f.structures||new Osp.Structures(null,{course:this});this._users=f.users||
new Osp.Users(null,{course:this});this._paginatedUsers=f.paginatedUsers||new Osp.PaginatedUsers(null,{course:this});this._groups=f.groups||new Osp.Groups(null,{course:this});this._groupsAndUsers=f.groupsAndUsers||new Osp.GroupsAndUsers(null,{course:this});this._assignmentPool=new Osp.AssignmentPool(null,{course:this});this._state=new Osp.Model},state:function(){return this._state},refreshStructuresCollection:function(){this.structures().refreshRelatedCollections()},lenses:function(){0===this._lenses.size()&&
this._lenses.fetch({reset:!0});return this._lenses},pLenses:function(){var a=new $.Deferred,f=this;0===this._lenses.size()?this._lenses.fetch({reset:!0}).done(function(){a.resolve(f._lenses)}):a.resolve(this._lenses);return a.promise()},resourcesPanelLens:function(){return this._lenses.findWhere({resources_panel_source:!0})},structures:function(){0===this._structures.size()&&this._structures.fetch({reset:!0});return this._structures},pStructures:function(){var a=new $.Deferred,f=this;0===this._structures.size()?
this._structures.fetch({reset:!0}).done(function(){a.resolve(f._structures)}):a.resolve(this._structures);return a.promise()},users:function(){0===this._users.size()&&this._users.fetch({reset:!0});return this._users},pUsers:function(){var a=new $.Deferred,f=this;0===this._users.size()?this._users.fetch({reset:!0}).done(function(){a.resolve(f._users)}):a.resolve(this._users);return a.promise()},paginatedUsers:function(){0===this._paginatedUsers.size()&&this._paginatedUsers.fetch({reset:!0});return this._paginatedUsers},
groups:function(){0===this._groups.size()&&this._groups.fetch({reset:!0});return this._groups},pGroups:function(){var a=new $.Deferred,f=this;0===this._groups.size()?this._groups.fetch({reset:!0}).done(function(){a.resolve(f._groups)}):a.resolve(this._groups);return a.promise()},groupsAndUsers:function(){0===this._groupsAndUsers.size()&&this._groupsAndUsers.fetch({reset:!0});return this._groupsAndUsers},assignmentPool:function(){this._assignmentPool.wasFetched()||(this._assignmentPool.fetch(),this._assignmentPool.markAsFetched());
return this._assignmentPool},setState:function(a){_.isObject(a)&&this.has("currentState")&&(_.each(_.keys(a),function(c){Osp.state.setState(c,a[c])}),this.trigger("change:currentState"))},setStateValue:function(a,f){return Osp.state.setState(a,f)},getState:function(a){return Osp.state.getOldState(a)},hasState:function(a){return Osp.state.hasState(a)},resetState:function(a){return Osp.state.resetState(a)},setHideDescriptions:function(a){$.ajax({type:"PUT",url:"/api/courses/"+encodeURIComponent(this.id)+
"/hide_descriptions",data:{hide_descriptions:a}});return Osp.state.setState("hideDescriptions",a)},setSearchTerm:function(a,f){return Osp.state.setSearchTerm(a,f)},getSearchTerm:function(a){return Osp.state.getSearchTerm(a)},saveSearchTerms:function(){return Osp.state.saveSearch()},getSavedSearchTerm:function(a){return Osp.state.getSavedSearchTerm(a)},restoreSearchTerm:function(a){return Osp.state.restoreSearchTerm(a)},restoreSearchTerms:function(){return Osp.state.restoreSearch()},saveAndResetSearchTerms:function(){return Osp.state.saveSearch().resetSearch()},
setSearchTerms:function(a){return Osp.state.setSearchTerms(a)},isSearchingOupContent:function(){return"oup"===Osp.state.getSearchTerm("source")},resetSearchTerm:function(a){return Osp.state.resetSearchTerm(a)},resetSearchTerms:function(){return Osp.state.resetSearch()},hasPageRangeNavigator:function(){return this.get("has_page_range_navigator")},hasAssigmentAvailable:function(){var a=this._lenses.findWhere({type:"assignments"});return a&&a.get("available")},hasMarkbookAvailable:function(){var a=this._lenses.findWhere({type:"markbook"});
return a&&a.get("available")},hasAssignmentAndMarkbookLensAvailable:function(){return this.hasMarkbookAvailable()&&this.hasAssigmentAvailable()},maxGroupUserTimestamp:function(){return this._groups.maxGroupUserTimestamp()},getColor:function(){return this.get("color")||this.get("banner_color")},hexToRgb:function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,h){return c+c+d+d+h+h});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],
16),b:parseInt(a[3],16)}:null},isDark:function(){var a=""+this.getColor();a=this.hexToRgb(a);return 125>Math.round((299*a.r+587*a.g+114*a.b)/1E3)},getHomeHeaderColor:function(){return this.getColor()}},{getAdminStatus:function(){return $.ajax({url:"/api/courses/"+Osp.state.getCourse().id+"/get_admin_status",cache:"false",type:"get"})},noAdminInvitations:function(a){return a==Osp.Invitation.noAdminInvitations},waitingAdminConfirmation:function(a){return a==Osp.Invitation.waitingAdminConfirmation},
withAdmin:function(a){return a==Osp.Invitation.withAdmin}});Osp.Courses=Osp.Collection.extend({parse:Osp.Collection.prototype.parseJsonAPI,model:Osp.Course,initialize:function(a,f){Osp.Collection.prototype.initialize.apply(this,arguments);this._user=f&&f.user},comparator:function(a){return a.get("name")},url:function(){return"/api/v2/courses"+(this._user?"?user_id="+this._user.id:"")}});Osp.PairedCourse=Osp.Model.extend();Osp.PairedCourses=Osp.Collection.extend({model:Osp.PairedCourse,url:"/api/courses/pairs",
fetchByCourseIds:function(a,f){f=_(f||{}).extend({data:{course_ids:a.join(",")}});return this.fetch(f)},indexByPairedCourseId:function(){return this.reduce(function(a,f){a[f.get("paired_course_id")]=f;return a},{})}});Osp.FavouriteCourses=function(){var a=function(){this.favouriteIds=[]};_(a.prototype).extend(Backbone.Events,{fetch:function(a){a=a||{};return $.ajax(_(a).extend({dataType:"json",url:"/api/courses/favourites"})).then(_.bind(function(a){this.favouriteIds=a;this.trigger("reset",this.favouriteIds);
return this.favouriteIds},this))},mark:function(a,c){var d=a;c=c||{};_(a).isObject()&&(d=a.get("id"));a="/api/courses/"+d+"/favourites";this.favouriteIds.unshift(d);return $.ajax(_(c).extend({type:"POST",url:a}))},unmark:function(a,c){var d=a;c=c||{};_(a).isObject()&&(d=a.get("id"));a="/api/courses/"+d+"/favourites";this.favouriteIds.splice(this.favouriteIds.indexOf(d),1);return $.ajax(_(c).extend({type:"DELETE",url:a}))}});return a}()}(Marionette);
!function(){Osp.Lens=Osp.Model.extend({paramRoot:"lens",defaults:{active:!1,clazz:"Lens"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);this._layout=null;this._course=a&&a.course||null;var c=this.get("filters");null!=c&&(this._filters=new Osp.Filters(null,{lens:this}),this._filters.reset(c));this.bind("change:active",this.updateState,this);this.listSortDirection=this.listSortColumn=null},currentCollection:function(){var a=Osp.state.getFilter(),c=Osp.state.getGroup(),
f=Osp.state.getStructure();return a?a.currentCollection():f?f.currentContents(this):c?this.isMarkbook()?c.currentMarkbooks():c.currentUsers():null},currentNode:function(){return Osp.state.getNode()},course:function(){return this.collection?this.collection.course():this._course?this._course:null},filters:function(){return this._filters},nodes:function(){var a=null;this.isGroupable()?a=this.isGlobal()?Osp.institution.groups:this.course().groups():this.isStructurable()&&this.course()&&(a=this.course().structures());
return a},setFilter:function(a){Osp.state.setFilter(a)},sortColumn:function(){return this.listSortColumn},setSortColumn:function(a){this.listSortColumn=a},sortDirection:function(){return this.listSortDirection},setSortDirection:function(a){this.listSortDirection=a},isHome:function(){return"home"==this.get("type")},isGlobal:function(){return this.get("global")},isResources:function(){return-1!=this.get("type").indexOf("resources")},isIwb:function(){return"iwb"==this.get("type")},isPlanning:function(){return"planning"==
this.get("type")},isAssignment:function(){return"assignments"==this.get("type")},getContentType:function(){return this.isAssignment()?"ContentAssignment":this.isPlanning()?"ContentPlan":"ContentResource"},isTeacherAssignment:function(){return Osp.profile.isTeacher()&&"assignments"==this.get("type")},isStudentAssignment:function(){return Osp.profile.isStudent()&&"assignments"==this.get("type")},isMarkbook:function(){return"markbook"==this.get("type")},isDigitalBook:function(){return"digibook"==this.get("type")},
isDigitalBookResources:function(){return"digital-book-resources"==this.get("type")},isGroupable:function(){return!0===_.include(["users","markbook"],this.get("type"))},isUsers:function(){return"users"==this.get("type")},isSettings:function(){return"settings"===this.get("type")},isStructurable:function(){return!0===_.include(["resources","assignments","planning"],this.get("type"))},isActive:function(){return this.get("active")},activate:function(){this.collection.setForAllBut(this,{active:!1});this.isActive()?
this.updateState():this.set({active:!0});Backbone.Radio.channel("analytics").request("track:lens",this)},inactivate:function(){this.set({active:!1})},hasPageRangeNavigator:function(){return this.isResources()||this.isPlanning()||this.isAssignment()},isAvailable:function(){return this.get("available")},refreshMarkbookCollections:function(){this._isMarkbookLike()&&this._refreshGroupMarkbooks()._refreshFilterMarkbooks();return this},refreshFilterCollections:function(){this.filters().refreshRelatedCollections();
return this},_isMarkbookLike:function(){return this.get("type")==this.constructor.MARKBOOK_TYPE||this.get("type")==this.constructor.ASSIGNMENT_TYPE},_refreshGroupMarkbooks:function(){Osp.state.getCourse()._groups.refreshRelatedCollections();return this},_refreshFilterMarkbooks:function(){this.filters().each(function(a){a.refreshMarkbooks()});return this},updateState:function(){this.get("active")&&(Osp.state.setStates({lens:this,filter:null,page:1}),"oup"!=Osp.state.getSearchTerm("source")?Osp.state.restoreSearch():
(Osp.state.resetSearchTerm("type"),Osp.state.resetSearchTerm("query"),Osp.state.resetSearchTerm("used_as"),Osp.state.resetSearchTerm("new_contents"),Osp.state.resetSearchTerm("updated_contents")))}},{ASSIGNMENT_TYPE:"assignments",MARKBOOK_TYPE:"markbook",PLANNING_TYPE:"planning",RESOURCES_TYPE:"resources"});Osp.Lenses=Osp.Collection.extend({model:Osp.Lens,initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null},course:function(){return this._course},
url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/modules"},inactivateAll:function(){this.setForAll({active:!1})}})}();
!function(){Osp.Filter=Osp.Model.extend({paramRoot:"filter",defaults:{active:!1,clazz:"Filter"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);this._lens=this.collection?this.collection.lens():a&&a.lens?a.lens:null;if(this._lens.isGlobal())this._users=new Osp.PaginatedUsers(null,{institution_id:Osp.institution.id});else{this._course=this._lens.course();if(this._lens.isResources()||this._lens.isPlanning()||this._lens.isTeacherAssignment())this._contents=new Osp.PaginatedContents(null,
{course:this._course,lens:this._lens,filter:this});this._lens.isUsers()&&(this._users=new Osp.PaginatedUsers(null,{course:this._course,lens:this._lens,filter:this}));this._lens.isMarkbook()&&(this._markbooks=new Osp.PaginatedMarkbooks(null,{course:this._course,lens:this._lens,filter:this}));this._lens.isStudentAssignment()&&(this._assignments=new Osp.PaginatedAssignments(null,{course:this._course,lens:this._lens,filter:this}))}this.bind("change:active",this.updateCourseState,this)},course:function(){return this._course||
this.lens().course()},currentCollection:function(){if(this._lens.isResources()||this._lens.isPlanning()||this._lens.isTeacherAssignment())return this._contents;if(this._lens.isUsers())return this._users;if(this._lens.isMarkbook())return this._markbooks;if(this._lens.isStudentAssignment())return this._assignments},hasCourse:function(){return null!==this.course()},isArchivedFilter:function(){return"all_archived"===this.get("name")},lens:function(){return this._lens||this.collection.lens()},hasLens:function(){return null!==
this.lens()},fetchRelatedCollection:function(a,c){var f=this[a];this._request||(this._request=[]);this._request[a]||f.wasFetched()||(f.setFilter(this,c),this._request[a]=f.fetch({reset:!0}).done(_.bind(function(a){a.markAsFetched();a.rememberCheckedItems()},this,f)).always(_.bind(function(){this._request[a]=null},this)));return f},contents:function(a,c){return this.fetchRelatedCollection("_contents",c)},users:function(a,c){return this.fetchRelatedCollection("_users",c)},markbooks:function(a){return this.fetchRelatedCollection("_markbooks",
a)},assignments:function(a){return this.fetchRelatedCollection("_assignments",a)},activate:function(){this.set({activate:!0})},isFavourite:function(){return"star"==this.get("tags")},updateCourseState:function(){this.get("active")&&this.lens().setFilter(this)},generateLinkToShare:function(a,c){if(null!=a&&null!=c){var f=gon.rootUrl;f+="app/courses/"+a.get("id")+"/modules/"+encodeURIComponent(c.get("name"));return f+="/filter/"+encodeURIComponent(this.get("name"))}},refreshContents:function(a){this._contents&&
(this._contents.planFetch(),Osp.state.getFilter()!=this||a||this.contents(this.get("name"),this._contents.currentPage))},refreshUsers:function(){this._users&&(this._users.planFetch(),Osp.state.getFilter()==this&&this.users())},refreshMarkbooks:function(){this._markbooks&&(this._markbooks.planFetch(),Osp.state.getFilter()==this&&this.markbooks())},refreshAssignments:function(){this._assignments&&(this._assignments.planFetch(),Osp.state.getFilter()==this&&this.assignments())}});Osp.Filters=Osp.Collection.extend({model:Osp.Filter,
initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._lens=c?c.lens:null},course:function(){return this.lens().course()},lens:function(){return this._lens},refreshRelatedCollections:function(){this.each(function(a){a.refreshContents();a.refreshUsers();a.refreshMarkbooks();a.refreshAssignments()})},contentCollectionsPlanFetch:function(a){this.each(function(c){c.refreshContents(a)})}})}();
!function(a){a.Content=a.Model.extend({paramRoot:"content",defaults:{checked:!1,starred:!1,clazz:"Content",downloadable:!0,student_access:!1},initialize:function(c){a.Model.prototype.initialize.apply(this,arguments);this._lens=this.collection?this.collection.lens():null;this._course=this.collection?this.collection.course():null;this._structure_from=c?c._structure_from:null;this.on("change:starred",this.planUpdateFilters,this);this.on("change:starred",this.planUpdateStructures,this)},clone:function(){return _.extend(a.Model.prototype.clone.call(this),
{_course:this._course,_lens:this._lens})},isPlan:function(){return this.get("content_plan_from_author")},getPlanUrl:function(){return"/api/courses/"+this.course().id+"/planning/"+this.id+"/edit.html"},planUpdateFilters:function(){var c=!a.state.getFilter()||!a.state.getFilter().isFavourite();a.state.getCourse().lenses().eachRecursive(function(a){a._filters.contentCollectionsPlanFetch(c)})},planUpdateStructures:function(){a.state.getCourse()._structures.refreshRelatedCollections(!0)},course:function(){return this._course||
a.currentCourse},lens:function(){return this._lens},hasCourse:function(){return null!=this.course()},isAuthor:function(){var c=a.ContentLauncherService.Service;return _([c.Author,c.LearningObject]).includes(this.get("launcher"))},isLti:function(){return this.get("launcher")===a.ContentLauncherService.Service.Lti},isInteractive:function(){return"interactive"==this.get("format")},isUsedAsBlueprintContent:function(){return this.get("used_as")==a.Content.TEST_PACKAGE||this.get("used_as")==a.Content.PRACTICE_PACKAGE},
isUsedAsSupport:function(){return this.get("used_as")==a.Content.SUPPORT},isUsedAsTest:function(){return this.get("used_as")==a.Content.TEST},isTeacherContent:function(){return this.get("source")},isOupContent:function(){return!this.isTeacherContent()},isWeblink:function(){return"webpage"===this.get("format")},isSsoContent:function(){return"sso content"===this.get("format")},markAsViewed:function(){var a=_.isUndefined($.cookie("contentIds"))?[]:$.cookie("contentIds").split(",");_.contains(a,this.id.toString())||
(a.push(this.id),$.cookie("contentIds",a))},canTrack:function(){return!this.isInteractive()&&!this.get("open_in_player")},tracking:function(){this.canTrack()&&a.Tracking.getChannel().request("notify","content",this)},showContent:function(c,f){(new a.ContentLauncherService(this,f)).launch(c)},openContentPlan:function(c){var f="";a.state.getStructure()&&(f="?st="+a.state.getStructure().id);c.open("/api/courses/"+a.state.getCourse().id+"/planning/"+this.id+".html"+f)},openAndTrackContentLink:function(a){a.open(this.get("content_object_link"),
"_blank");Backbone.Radio.channel("analytics").request("track:download",this)},generateLinkToShare:function(a,f){this.collection.generateLinkToShare(a,f)},setFile:function(a){null!==a&&this.set({file_name:a.name,file_size:a.size})},toggleVisibility:function(){var a=!this.get("student_access");$.post("/api/courses/"+this.course().id+"/contents/set_student_access",{content_ids:[this.id],visible:a}).done(function(){this.set({student_access:a})}.bind(this))},toggleFavourite:function(){var a=!this.get("starred");
$.ajax({url:"/api/courses/"+this.course().id+"/contents/"+this.id+"/favourite",type:"put",contentType:"application/json",data:JSON.stringify({marked:a})}).done(function(){this.set({starred:a})}.bind(this))},fetchSsoUrl:function(){return $.get("/api/courses/"+this.course().id+"/contents/"+this.id+"/get_sso_url")},setCourse:function(a){this._course=a},url:function(){var a="/api/courses/"+encodeURIComponent(this.course().get("id"))+"/contents";this.isNew()||(a+="/"+encodeURIComponent(this.id),null!=
this._structure_from&&(a+="?structure_from="+encodeURIComponent(this._structure_from.id)));return a},checkCompilingStatus:function(){var a=this,f,e,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return f="/api/courses/"+a.course().id+"/contents/"+a.id+"/compiling_status",c.yield(fetch(f),2);if(4!=c.nextAddress)return e=c.yieldResult,e.ok?c.yield(e.json(),4):c.jumpTo(0);d=c.yieldResult;a.set(d);return c.return(d)})}});a.Content.SUPPORT=0;a.Content.TEST=1;a.Content.TEST_PACKAGE=
2;a.Content.PRACTICE_PACKAGE=3;a.Contents=a.Collection.extend({model:a.Content,initialize:function(c,f){a.Collection.prototype.initialize.apply(this,arguments);this._course=f?f.course:null;this._lens=f?f.lens:null;this._filter=f?f.filter:null;this._structure=f?f.structure:null;this._search={}},course:function(){return this._course},lens:function(){return this._lens},resetSearch:function(){this._search={}},setSearchTerms:function(a){this._search=a},getSearchTerm:function(c){return _.isUndefined(this._search[c])?
a.state.getSearchTerm(c):this._search[c]},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));a+="/contents/search?";if(null!=this._lens){var f=this._lens.get("name");null!=f&&(a+="module="+encodeURIComponent(f)+"&")}if(null!=this._filter){f=this._filter.get("tags");var e=this._filter.get("user");null!=f&&(a+="tags="+encodeURIComponent(f)+"&");null!=e&&(a+="user="+encodeURIComponent(e)+"&")}null!=this._structure&&(a+="parent="+encodeURIComponent(this._structure.id)+
"&");a+="type="+this.getSearchTerm("type")+"&";a+="source="+this.getSearchTerm("source")+"&";a+="query="+this.getSearchTerm("query")+"&";a+="used_as="+this.getSearchTerm("used_as")+"&";a+="new_contents="+this.getSearchTerm("new_contents")+"&";return a+="updated_contents="+this.getSearchTerm("updated_contents")+"&"}});a.PaginatedContents=a.PaginatedCollection.extend({model:a.Content,initialize:function(c,f){a.PaginatedCollection.prototype.initialize.apply(this,arguments);_.defaults(this,a.Contents.prototype);
this._course=f?f.course:null;this._lens=f?f.lens:null;this._filter=f?f.filter:null;this._structure=f?f.structure:null;this._resourcesPanel=f?f.resourcesPanel:!1;this._search={}},isSearching:function(){return!_.chain(a.state.getSearch()).pick("query type source used_as new_contents updated_contents".split(" ")).values().compact().isEmpty().value()},parse:function(c){c.entries&&this._structure&&_.map(c.entries,function(a){a._structure_from=this._structure;return a},this);return a.PaginatedCollection.prototype.parse.apply(this,
arguments)},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/contents/search?"},urlParams:{module:function(){return null!=this._lens?encodeURIComponent(this._lens.get("name")):""},query:function(){return encodeURIComponent(this.getSearchTerm("query"))},tags:function(){return null!=this._filter?null!=this._filter.get("tags")?encodeURIComponent(this._filter.get("tags")):"":""},user:function(){return null!=this._filter?null!=this._filter.get("user")?
encodeURIComponent(this._filter.get("user")):"":""},parent:function(){return null!=this._structure?encodeURIComponent(this._structure.get("id")):""},new_contents:function(){return"undefined"===typeof this.getSearchTerm("new_contents")?"":this.getSearchTerm("new_contents")},updated_contents:function(){return"undefined"===typeof this.getSearchTerm("updated_contents")?"":this.getSearchTerm("updated_contents")},type:function(){return this.getSearchTerm("type")},source:function(){return this.getSearchTerm("source")},
used_as:function(){return _.isUndefined(this._usedAs)?this.getSearchTerm("used_as"):this._usedAs},filter:function(){return null!=this._filter?this._filter.get("name"):""},content_ids:function(){return this._contentIds},resources_panel:function(){return this._resourcesPanel||null}},setFilter:function(a,f){this._filter=a;this.trigger("contents:change:filter");this.resetCurrentPage(f)},setContentIds:function(a){this._contentIds=a},getStructure:function(){return this._structure},setStructure:function(a){this._structure=
a},setLens:function(a){this._lens=a},setUsedAs:function(a){this._usedAs=a},generateLinkToShare:function(a,f){var c=gon.rootUrl;null!=a&&(c+="app/courses/"+a.get("id")+"/modules/"+encodeURIComponent(f.get("name"))+"/filter/",c+=encodeURIComponent(f.get("name")),c+="/page/"+this.currentPage+"/content/"+this.pluck("id"));return c},isMyContentsFilterActive:function(){return this._filter?_(["my_resources","my_assignments","my_plans"]).contains(this._filter.get("name")):!1},isFavouriteFilterActive:function(){return this._filter?
"favourites"===this._filter.get("name"):!1}})}(Osp);"use strict";
!function(){Osp.IwbSavedStatus=Osp.Model.extend({paramRoot:"iwb_saved_statuses",defaults:{checked:!1,clazz:"IwbSavedStatus"},url:function(){return"/api/courses/"+this.get("course_id")+"/iwb_saved_statuses/"+(this.isNew()?"":this.id)},markAsViewed:function(){var a=_.isUndefined($.cookie("iwbSavedStatusIds"))?[]:$.cookie("iwbSavedStatusIds").split(",");_.contains(a,this.id.toString())||(a.push(this.id),$.cookie("iwbSavedStatusIds",a))}});Osp.IwbContent=Osp.Content.extend({isMaster:function(){return"IwbContent"===
this.get("type")},isResource:function(){return"IwbContentResource"===this.get("type")}});Osp.IwbQuota=Osp.Model.extend({defaults:{message:""},url:function(){return"/api/courses/"+this.get("course_id")+"/iwb_saved_statuses/quota"},startPolling:function(){this.fetch().done(this.setInterval.bind(this))},setInterval:function(){this._interval=setInterval(this.fetch.bind(this),Osp.config.iwbQuotaPollingCheckingPeriod)},stopPolling:function(){clearInterval(this._interval)}});Osp.PaginatedIwbItems=Osp.PaginatedCollection.extend({model:function(a,
c){return a.type?new Osp.IwbContent(a,c):new Osp.IwbSavedStatus(a,c)},initialize:function(a,c){Osp.PaginatedCollection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null;this._lens=c?c.lens:null},course:function(){return this._course},lens:function(){return this._lens},quota:function(){return this._quota||(this._quota=new Osp.IwbQuota({course_id:this._course.id}))},url:function(){return"/api/courses/"+this._course.id+"/iwb_saved_statuses"},urlParams:{type:function(){return Osp.state.getSearchTerm("type")},
source:function(){return Osp.state.getSearchTerm("source")}},getContents:function(a){return _(a.contents).map(function(a){return _.extend(a,{id:"c_"+a.id})})},parseQuota:function(a){a.quota&&this.quota().set(a.quota)},parse:function(a){this.parseQuota(a);return this.getContents(a).concat(Osp.PaginatedCollection.prototype.parse.apply(this,arguments))},savedStatuses:function(){return this.filter(function(a){return!(a instanceof Osp.IwbContent)})},setForAll:function(a){_(this.savedStatuses()).invoke("set",
a);return this},areAll:function(a){return _(this.savedStatuses()).all(function(c){return c.get(a)})},areAllChecked:function(){return!_(this.savedStatuses()).isEmpty()&&this.areAll("checked")},destroy:function(a){$.ajax({url:this.url()+"/destroy_all",data:{id:_(a).pluck("id")},type:"DELETE"}).done(this.fetch.bind(this))}})}();
!function(){Osp.Assignment=Osp.Model.extend({paramRoot:"assignment",defaults:{checked:!1,clazz:"Assignment"},initialize:function(a,c){Osp.Model.prototype.initialize.apply(this,arguments);this._lens=this.collection?this.collection._lens:null;this._course=c&&c.course||this.collection&&this.collection._course||null},course:function(){return this._course},lens:function(){return this._lens},sublistNames:function(a,c){return _.pluck(this.get(a),"name").join(c)},url:function(){var a="/api";this.course()&&
(a+="/courses/"+encodeURIComponent(this.course().id));return a+="/assignments/"+(this.isNew()?"":encodeURIComponent(this.id))},isPractice:function(){return this.get("mode")===Osp.Assignment.PRACTICE},isDue:function(){return this.get("is_due")},isInteractive:function(){var a=this.get("test_contents");return 0<a.length?"interactive"==a[0].format:!1},isFinished:function(){return _([Osp.Markbook.DONE,Osp.Markbook.MARKED]).contains(this.get("status"))}});Osp.Assignment.TEST=1;Osp.Assignment.PRACTICE=2;
Osp.Assignments=Osp.Collection.extend({model:Osp.Assignment,sortDirection:"desc",sortColumn:"due",initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null;this._group=c?c.group:null;this._user=c?c.user:null;this._filter=c?c.filter:null},course:function(){return this._course},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));a+="/assignments?";if(null!=this._group)a+="parent="+encodeURIComponent(this._group.id)+
"&";else if(null!=this._user)a+="user="+encodeURIComponent(this._user.id)+"&";else if(null!=this._filter){var c=this._filter.get("name");null!=c&&(a+="filter="+encodeURIComponent(c)+"&")}this.isSortable()&&(a+="sort="+encodeURIComponent(this.sortColumn)+"&",a+="order="+encodeURIComponent(this.sortDirection)+"&");return a}});Osp.PaginatedAssignments=Osp.PaginatedCollection.extend({model:Osp.Assignment,sortDirection:"desc",sortColumn:"due",initialize:function(a,c){Osp.PaginatedCollection.prototype.initialize.apply(this,
arguments);_.defaults(this,Osp.Assignments.prototype);this._course=c?c.course:null;this._group=c?c.group:null;this._user=c?c.user:null;this._filter=c?c.filter:null},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/assignments?"},urlParams:{user:function(){return null!=this._user?this._user.get("id"):""},parent:function(){return null!=this._group?this._group.get("id"):""},filter:function(){return null!=this._filter?this._filter.get("name"):
""}},setGroup:function(a,c){this._group=a;this.resetCurrentPage(c)},setUser:function(a,c){this._user=a;this.resetCurrentPage(c)},setFilter:function(a,c){this._filter=a;this.resetCurrentPage(c)}});Osp.GroupAssignment=Osp.Model.extend({initialize:function(){Osp.Model.prototype.initialize.apply(this,arguments);this.studentAssignments=new Osp.StudentAssignments(this.get("student_assignments"),{groupAssignment:this,course:this.course||this.collection&&this.collection.course||null})},status:function(){return this.get("num_marked")===
this.get("total_count")?Osp.GroupAssignment.status.allMarked:0<this.get("num_done")&&this.get("num_done")!==this.get("num_marked")?Osp.GroupAssignment.status.pendingOfMarking:Osp.GroupAssignment.status.incomplete}},{status:{allMarked:0,pendingOfMarking:1,incomplete:2}});(function(){Osp.GroupAssignments=Osp.Collection.extend({model:Osp.GroupAssignment,sortColumn:"due",sortDirection:"asc",initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);var f=c||{};if(_.isNull(f.course)||
_.isUndefined(f.course))throw"Missing course param";if(_.isNull(f.group)||_.isUndefined(f.group))throw"Missing student param";this.course=c.course;this.group=c.group;this.assignmentIDs=c.assignmentIDs;_.isUndefined(c.sortColumn)||(this.sortColumn=c.sortColumn);_.isUndefined(c.sortDirection)||(this.sortDirection=c.sortDirection)},url:function(a,c){c=c||"group";a="/api/courses/"+this.course.id+"/group_assignments."+(a||"json")+"?group_id="+this.group.id;_.isUndefined(this.assignmentIDs)&&_.isNull(this.assignmentIDs)||
(a+="&assignment_ids="+this.assignmentIDs);""!=this.sortColumn&&(a+="&order_col="+this.sortColumn,a+="&order_dir="+this.sortDirection);"diagnostic"===c&&(a+="&diagnostic=true");return a}})})()}();
(function(a,c){var f=function(a){return a?moment(a,"DD/MM/YYYY"):moment()};a.AssignmentPool=a.Model.extend({defaults:{count:0,valid_for_assign:!1},url:function(){return"/api/v2/courses/"+this._course.id+"/assignment_pools"},initialize:function(c,d){a.Model.prototype.initialize.apply(this,arguments);this._course=d.course;this._queue=new e(this);this._drafts=new a.DraftAssignments(null,{course:d.course});this._drafts.on("add remove",this.checkStatus.bind(this));this.on("sync",this.checkStatus.bind(this));
this.attachToDraftsChanges()},attachToDraftsChanges:function(){this.listenTo(this._drafts,"add",function(a){this.trigger("drafts:add",a.get("test_id"))}.bind(this));this.listenTo(this._drafts,"remove",function(a){this.trigger("drafts:remove",a.get("test_id"))}.bind(this))},course:function(){return this._course},getQueue:function(){return this._queue},enqueue:function(a){return this._queue.enqueue(a)},setForAllDrafts:function(a){this._drafts.setForAll(a)},isAdded:function(a){return!!this._drafts.findWhere({test_id:a.id})},
addTest:function(a,c,d){d={id:a.id,test_id:a.id,test_name:a.get("name"),test_description:a.get("description"),test_format:a.get("format"),test_ext:a.get("file_ext"),test_points:a.get("points")||null,no_mark:a.get("no_mark")||!1,title:a.get("name"),lens_name:d&&d.get("name")};c&&_.extend(d,{structure_id:this.findDeepestStructure(a,c).id});this.has("start_date")&&_.extend(d,{start_date:this.get("start_date")});this.has("end_date")&&_.extend(d,{end_date:this.get("end_date")});this._drafts.add(d);return this},
findDeepestStructure:function(a,c){a=_.chain(a.get("structures")||[]).map(function(a){return c.children().getRecursive(a)}).compact().value();return _(a).isEmpty()?c:_(a).max(function(a){return a.get("depth")})},createDrafts:function(c,d,e){var f=this;if(this.isLimitReached(c))throw a.AssignmentPool.LIMIT_EXCEEDED;_(c).each(function(a){return f.addTest(a,d,e)});this.enqueue();this.trigger("drafts:create",c.length)},restoreDraftChangesListeners:function(){this.attachToDraftsChanges()},removeDraft:function(a){this.singleTest()?
this.destroy():(this._drafts.remove(a),this.enqueue());return this},datesDifferFromDefault:function(){var a=this;return this._drafts.any(function(c){return a.distinctAttributeAsDraft(c,"start_date")||a.distinctAttributeAsDraft(c,"end_date")})},distinctAttributeAsDraft:function(a,c){return a.get(c)&&a.get(c)!=this.get(c)},destroy:function(){var c=this;return a.Model.prototype.destroy.apply(this,arguments).done(function(){return c.clear()})},clear:function(){var c=this._drafts.map(function(a){return a.get("test_id")});
this.trigger("drafts:empty",c);this._drafts.reset();this.restoreDraftChangesListeners();return a.Model.prototype.clear.apply(this,arguments).set(this.defaults)},checkStatus:function(){this.set({count:this._drafts.length,limit_reached:this.isLimitReached(),valid_for_assign:this.isValidForAssign(),valid_count:this.validForAssignCount()})},assign:function(){return $.post(this.url()+"/assign")},parse:function(a){a=this.parseJsonAPI(a);var c=a.draft_assignments;_(c).isEmpty()||(c.forEach(function(a){return a.id=
a.test_id}),this._drafts.set(c));return a},draftAssignments:function(){return this._drafts},singleTest:function(){return 1==this.get("count")},isLimitReached:function(a){return this._drafts.length+(a?a.length:0)>gon.assignmentPoolLimit},isValidForAssign:function(){return this._drafts.areAllValidForAssign()},validForAssignCount:function(){return this._drafts.validForAssignCount()},toJSON:function(){return _.extend({},a.Model.prototype.toJSON.call(this),{draft_assignments:this._drafts.toJSON()})}},
{LIMIT_EXCEEDED:"limitExceeded"});var e=c.Object.extend({initialize:function(a){this.next=this.current=null;this.model=a},isBusy:function(){return this.current||this.next},enqueue:function(a){this.next=this.buildFunction(a);this.current||this.processNext();return this},finish:function(){var a=$.Deferred(),c=a.resolve.bind(a);this.isBusy()?this.once("idle",c):c();return a.promise()},buildFunction:function(a){var c=this;return function(){return c.model[a?a:"save"]().done(function(){return c.processNext()})}},
processNext:function(){this.current=this.next;this.next=null;this.current?this.current():this.trigger("idle")}}),d={COMPLETE:"complete",INCOMPLETE:"incomplete",NO_DATES:"noDates",NO_STUDENTS:"noStudents"};a.DraftAssignment=a.Model.extend({defaults:{test_ext:null,test_points:null,lens_name:null,start_date:null,end_date:null,instructions:null,points:null,structure_id:null},initialize:function(){a.Model.prototype.initialize.apply(this,arguments);this._resources=new a.Collection(this.get("resources"));
this._support=new a.Collection(this.get("support"));this.attachEvents()},attachEvents:function(){var a=this;this.listenTo(this,"change:resources",function(){return a.resetResources()});this.listenTo(this,"change:support",function(){return a.resetSupport()});this.listenTo(this._resources,"add",function(){return a.onAddMaterial()});this.listenTo(this._support,"add",function(){return a.onAddMaterial()});this.listenTo(this._resources,"remove",function(){return a.onRemoveMaterial()});this.listenTo(this._support,
"remove",function(){return a.onRemoveMaterial()})},course:function(){return this.collection?this.collection.course():a.currentCourse},materialCount:function(){return this._resources.length+this._support.length},materialLimitReached:function(){return 5<=this.materialCount()},materialAdded:function(a){return this.containsResource(a)||this.containsSupport(a)},containsResource:function(a){return!!this._resources.get(a.id)},containsSupport:function(a){return!!this._support.get(a.id)},resetResources:function(){this._resources.reset(this.get("resources"))},
resetSupport:function(){this._support.reset(this.get("support"))},addResource:function(a){this._resources.add({id:a.id,name:a.get("name")});this.materialLimitReached()&&this.trigger("change:material:limit")},addSupport:function(a){this._support.add({id:a.id,name:a.get("name")})},removeResource:function(a){this._resources.remove(this._resources.get(a.id))},removeSupport:function(a){this._support.remove(this._support.get(a.id))},getResources:function(){return this._resources},getSupport:function(){return this._support},
groupsStore:function(){return a.store.get(a.Store.TYPE.GROUPS,this.course())},getGroups:function(){var a=this.groupsStore().get(),c=(this.get("group_ids")||[]).map(function(c){return a.getRecursive(c)});return _(c).compact()},getGroupNames:function(){return this.getGroups().map(function(a){return a.get("name")})},getGroupIds:function(){return this.getGroups().map(function(a){return a.id})},getGroupStudents:function(a){var c=this.get("student_ids");return a.getUsers().filter(function(a){return c.includes(a.id)})},
getStudents:function(){var a=this,c=this.getGroups().reduce(function(c,d){return c.concat(a.getGroupStudents(d))},[]);return _(c).uniq(function(a){return a.id})},getStudentIds:function(){return this.getStudents().map(function(a){return a.id})},getStudentsCount:function(){return this.getStudents().length},onAddMaterial:function(){this.materialLimitReached()&&this.trigger("change:material:limit")},onRemoveMaterial:function(){4===this.materialCount()&&this.trigger("change:material:limit")},getStatus:function(){return this.hasValidPeriod()||
this.hasGroupsAndStudents()?this.hasValidPeriod()?this.hasGroupsAndStudents()?d.COMPLETE:d.NO_STUDENTS:d.NO_DATES:d.INCOMPLETE},isComplete:function(){return this.getStatus()===d.COMPLETE},hasValidPeriod:function(){return!this.has("end_date")||f(this.get("end_date"))<=f()?!1:this.has("start_date")?f(this.get("end_date"))>f(this.get("start_date")):!0},hasValidTitle:function(){return this.has("title")&&!!this.get("title").trim()},hasGroupsAndStudents:function(){return!_(this.getGroups()).isEmpty()&&
!_(this.getStudents()).isEmpty()},isValidForAssign:function(){return this.hasValidTitle()&&this.hasValidPeriod()&&this.hasGroupsAndStudents()},toJSON:function(){return _.extend({},a.Model.prototype.toJSON.call(this),{support:this._support.toJSON(),resources:this._resources.toJSON()})}},{STATUS:d});a.DraftAssignments=a.Collection.extend({model:a.DraftAssignment,initialize:function(a,c){this._course=c.course},course:function(){return this._course},areAllValidForAssign:function(){return!this.any(function(a){return!a.isValidForAssign()})},
validForAssignCount:function(){return this.filter(function(a){return a.isValidForAssign()}).length}})})(Osp,Marionette);
!function(){Osp.Markbook=Osp.Model.extend({paramRoot:"markbook",defaults:{checked:!1,clazz:"Markbook"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);this.on("change",this.planUpdateFilters,this);this.on("change",this.planUpdateGroups,this);this.on("change",this.normalizeDetailedScore,this)},allScreensAreAutoMarked:function(){var a=this.get("detailed_score"),c=!1;a&&0<a.length&&(c=_(a).every(function(a){return"auto"==a[0]}));return c},normalizeDetailedScore:function(){_(this.get("detailed_score")).each(function(a){var c=
parseInt(a[1]);_.isNaN(c)&&(a[1]="")})},planUpdateFilters:function(){this.collection&&this.collection._filter&&this.collection._filter.collection.each(function(a){a._markbooks.planFetch()})},planUpdateGroups:function(){this.collection&&this.collection._group&&this.collection._group.collection.eachRecursive(function(a){a._markbooks&&a._markbooks.planFetch()})},assignedTo:function(){return this.sublistNames("groups",", ")},course:function(){return this.collection&&this.collection.course()||this.get("_course")||
null},isDue:function(){return this.get("is_due")},smart:function(){return this.get("smart")},isInteractive:function(){var a=this.get("test_contents");return 0<a.length?"interactive"==a[0].format:!1},isIndividualStudent:function(){return null!=this.get("student_assignment_id")},sublistNames:function(a,c){return _.pluck(this.get(a),"name").join(c)},allHasStatus:function(a){return!_.isEmpty(this.get("student_statuses"))&&_.all(this.get("student_statuses"),function(c){return c==a})},oneHasStatus:function(a){return!_.isEmpty(this.get("student_statuses"))&&
_.any(this.get("student_statuses"),function(c){return c==a})},baseUrl:function(){var a="/api";this.course()&&(a+="/courses/"+this.course().id);a+="/markbooks";this.isNew()||(a+="/"+this.id);return a},url:function(){var a=this.baseUrl();_.isUndefined(this.get("student_assignment_id"))||(a+="?student_assignment_id="+this.get("student_assignment_id"));return a},archive:function(){var a=this;return $.post(this.baseUrl()+"/archive").done(function(){return a.set("archived",!0)})},unarchive:function(){var a=
this;return $.post(this.baseUrl()+"/unarchive").done(function(){return a.set("archived",!1)})},withdraw:function(){return $.ajax({url:"/api/courses/"+this.course().id+"/assignments/"+this.id,type:"DELETE"})}},{TODO:1,DONE:2,FAILED:3,MARKED:4,SAVED:5,isUnfinished:function(a){return a==Osp.Markbook.TODO||a==Osp.Markbook.SAVED},isFinished:function(a){return a==Osp.Markbook.MARKED||a==Osp.Markbook.DONE},isGivingByHand:function(a){return a.get("manual_handing")},isGivingDigital:function(a){return!a.get("manual_handing")&&
"nothing"!==a.get("delivery")}});Osp.Markbooks=Osp.Collection.extend({model:Osp.Markbook,sortDirection:"desc",sortColumn:"due",initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null;this._group=c?c.group:null;this._user=c?c.user:null},course:function(){return this._course},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));a+="/markbooks?";null!=this._group?a+="parent="+encodeURIComponent(this._group.id)+
"&":null!=this._user&&(a+="user="+encodeURIComponent(this._user.id)+"&");return a}});Osp.PaginatedMarkbooks=Osp.PaginatedCollection.extend({model:Osp.Markbook,sortDirection:"desc",sortColumn:"due",initialize:function(a,c){Osp.PaginatedCollection.prototype.initialize.apply(this,arguments);_.defaults(this,Osp.Markbooks.prototype);this._course=c?c.course:null;this._group=c?c.group:null;this._user=c?c.user:null;this._filter=c?c.filter:null;this._anyToArchive=this._archived=!1},url:function(){var a="/api";
this.course()&&(a+="/courses/"+this._course.id);return a+"/markbooks"},urlParams:{user:function(){return null!=this._user?this._user.get("id"):""},parent:function(){return null!=this._group?this._group.get("id"):""},filter:function(){return null!=this._filter?this._filter.get("name"):""},assigned_by:function(){return this._assignedBy||Osp.state.getSearchTerm("assigned_by")},status:function(){return this._status||""},archived:function(){return this._archived||!1},query:function(){return encodeURIComponent(this._query||
Osp.state.getSearchTerm("query"))}},setGroup:function(a){this._group=a;this.resetCurrentPage()},setUser:function(a,c){this._user=a;this.resetCurrentPage(c)},setFilter:function(a,c){this._filter=a;this.resetCurrentPage(c)},setStatus:function(a){this._status=a},setQuery:function(a){this._query=a},setAssignedBy:function(a){this._assignedBy=a},setArchived:function(a){this._archived=a},isUserMarkbook:function(){return!!this._user},isArchived:function(){return this._archived},anyToArchive:function(){return this._anyToArchive},
archiveAll:function(){return $.post(this.url()+"/archive_all",this.getSearchParams())},getSearchParams:function(){var a=this;return Object.keys(this.urlParams).reduce(function(c,f){"archived"!=f&&(c[f]=a.urlParams[f].call(a));return c},{})},parse:function(a){var c=this,f=Osp.PaginatedCollection.prototype.parse.apply(this,arguments);_(f).each(function(a){return a.archived=c.isArchived()});this._anyToArchive=a.any_to_archive||!1;return f}})}();
!function(){Osp.MarkbookStats=Osp.Model.extend({paramRoot:"markbook_stats",defaults:{due_today:0,due_this_week:0,past_due_date:0,manual_marking:0,markbook_past_due_date:0,recently_marked:0,completed:0,course_id:"",clazz:"MarkbookStats"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);this._course=a?a.course:null},course:function(){return this._course},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/markbooks/stats"}})}();
!function(){Osp.Structure=Osp.Model.extend({paramRoot:"structure",defaults:{expanded:!1,active:!1,activeModal:!1,clazz:"Structure"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);var c=this.get("course");c&&this.unset("course");this.get("leaf");var f=this.get("children");this._children=new Osp.Structures(f,{parent:this,course:this.course()||c});this.unset("children",{silent:!0});this._contents={};this.hasCourse()&&null===Osp.state.getStructure()&&this.set({expanded:this.onFirstLevel()},
{silent:!0});this.on("change:active",this.updateCourseState,this);this.on("change:name",this.updateLookableName,this)},onFirstLevel:function(){return this.collection&&this.isAvailable()?void 0===this.collection.parent()||null===this.collection.parent():this.has("depth")&&this.isAvailable()?0===this.get("depth"):!1},expand:function(a){this.collection._parent&&this.collection._parent.expand(a);this.set({expanded:!0})},activate:function(){this.set({active:!0})},expandAndActivate:function(){this.expand();
this.activate()},updateCourseState:function(){this.get("active")&&Osp.state.setStates({structure:this.isRoot()?null:this,filter:null,page:1})},updateLookableName:function(){this.set("lookable_name",this.get("name"))},course:function(){return this.collection?this.collection.course():null},lens:function(){return null!=this.course()?this.course().lenses().firstWith({active:!0}):null},hasCourse:function(){return null!=this.course()},children:function(){return this._children},contents:function(a,c){var f=
a.get("name"),e=this._contents[f];null==e&&(this._contents[f]=new Osp.PaginatedContents(null,{course:this.course(),lens:a,structure:this}),e=this._contents[f],Backbone.Radio.channel("structures").request("contents:decorate",this,a));e._fetched||(e.setStructure(this),e.resetCurrentPage(c),e.fetch({reset:!0}).done(_.bind(function(){e.markAsFetched();e.rememberCheckedItems()},this)));return e},hasContentsFor:function(a){return this.has("has_contents")&&this.get("has_contents")[a.id]},allContents:function(a){a=
new Osp.Contents(null,{course:this.course(),lens:a,structure:this});a.fetch({reset:!0});return a},currentContents:function(a){a=a.get("name");return this._contents[a]},planFetch:function(){void 0!==this.collection.parent()&&null!==this.collection.parent()||this.collection.parent().planFetch();this._fetched=!1},generateLinkToShare:function(a,c){if(null!=a&&null!=c){var f=gon.rootUrl;f+="app/courses/"+a.get("id")+"/modules/"+encodeURIComponent(c.get("name"));return f+="/node/"+encodeURIComponent(this.get("id"))}},
isAvailable:function(){return this.get("available")},validate:function(a){if(!a.name)return{name:[I18n.t("errors.messages.blank")]}},isActiveFor:function(a){return!_(this.get("excluded_lenses")).contains(a.id)},isActiveForRecursive:function(a){return this.onFirstLevel()?this.isActiveFor(a):this.isActiveFor(a)&&this.collection.parent().isActiveForRecursive(a)},isRoot:function(){return"StructureRoot"===this.get("model_type")},parent:function(){return this.collection.parent()}});Osp.Structures=Osp.Collection.extend({model:Osp.Structure,
initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._parent=c?c.parent:null;this._course=c?c.course:null},parent:function(){return this._parent},course:function(){return this._course},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/structures"},getStructureByBookPage:function(a,c){var f=function(d){return(Osp.profile.isStudent()?d.student_id:d.id)==a&&c>=parseInt(d.start)&&c<=parseInt(d.end)};if(!this.length)return null;
if(this.first().isRoot())return this.first().children().getStructureByBookPage(a,c);var e=this.find(function(a){return _(a.get("digital_books")||[]).any(f)});return e?e.children().length?e.children().getStructureByBookPage(a,c):e:null},refreshRelatedCollections:function(a){var c=Osp.state.getLens(),f=Osp.state.getStructure();this.eachRecursive(function(e){var d=e.currentContents(c);d&&d.planFetch();f&&f==e&&!a&&e.contents(c,d&&d.currentPage)})}})}();"use strict";
!function(){Osp.User=Osp.Model.extend({paramRoot:"user",defaults:{email:"",active:!1,checked:!1,clazz:"User",managed:!0},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);this.get("email").match("local.host$")&&this.set({email:""},{silent:!0});this._courses=new Osp.Courses(null,{user:this});this._markbooks=new Osp.PaginatedMarkbooks(null,{user:this,course:this.course()});this.on("change",this.planUpdateFilters,this);this.on("change",this.planUpdateGroups,this)},isTeacher:function(){return"Teacher"===
this.get("type")},isStudent:function(){return"Student"===this.get("type")},planUpdateFilters:function(){this.collection&&this.collection._filter&&this.collection._filter.collection.each(function(a){a._users.planFetch()})},planUpdateGroups:function(){this.collection&&this.collection._group&&this.collection._group.collection&&this.collection._group.collection.eachRecursive(function(a){a._paginatedUsers.planFetch()})},courses:function(a){a=_.isUndefined(a)||a;0===this._courses.size()&&!this.isNew()&&
a&&this._courses.fetch();return this._courses},pCourses:function(){var a=new $.Deferred,c=this;this.isNew()||0!==this._courses.size()?a.resolve(this._courses):this._courses.fetch().done(function(){a.resolve(c._courses)});return a.promise()},markbooks:function(){0!==this._markbooks.size()||this.isNew()||(this._markbooks.setUser(this),this._markbooks.fetch());return this._markbooks},course:function(){return this.collection?this.collection.course():null},groupNames:function(a){return _.pluck(this.get("groups"),
"name").join(a)},courseNames:function(a){return _.pluck(this.get("courses"),"name").join(a)},lensSubtitle:function(){return[this.get("last_name"),this.get("first_name")].join(", ")},url:function(){var a="/api";this.course()&&(a+="/courses/"+encodeURIComponent(this.course().id));return a+="/users/"+(this.isNew()?"":encodeURIComponent(this.id))}});Osp.Student=Osp.User.extend({initialize:function(){Osp.User.prototype.initialize.apply(this,arguments);this.assignments={}},courseAssignments:function(a,
c){if(_.isUndefined(a)||_.isNull(a))throw"Course is undefined";return this.assignments[a.id]||new Osp.StudentAssignments(null,_.extend({course:a,student:this},c))},getCourseAssignments:function(a,c,f){var e=$.Deferred();if(_.isUndefined(a)||_.isNull(a))throw"Course is undefined";_.isUndefined(c)&&(c=!1);this.assignments[a.id]instanceof Osp.StudentAssignments&&!1===c?e.resolve():(this.assignments[a.id]=new Osp.StudentAssignments(null,_.extend({course:a,student:this},f)),this.assignments[a.id].fetch().done(e.resolve));
return e.promise()}});Osp.Users=Osp.Collection.extend({model:Osp.User,initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null;this._group=c?c.group:null;this._filter=c?c.filter:null;this._institution_id=c?c.institution_id:null},course:function(){return this._course},group:function(){return this._group},clone:function(){var a=Osp.Collection.prototype.clone.call(this);a._course=this._course;a._group=this._group;a._filter=this._filter;a._institution_id=
this._institution_id;return a},url:function(){var a="/api";this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));this._institution_id&&(a+="/institutions/"+encodeURIComponent(this._institution_id));a+="/users";this._group&&this._group.id&&(a+="?parent="+encodeURIComponent(this._group.id));return a}});Osp.PaginatedUsers=Osp.PaginatedCollection.extend({model:Osp.User,initialize:function(a,c){Osp.PaginatedCollection.prototype.initialize.apply(this,arguments);_.defaults(this,Osp.Users.prototype);
this._institution_id=c?c.institution_id:null;this._filter=c?c.filter:null;this._group=c?c.group:null;null!==this._course&&(this._course=c?c.course:null)},url:function(){var a="/api";this._institution_id?a+="/institutions/"+encodeURIComponent(this._institution_id):this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/users/"+(this._fetchAll?"all":"search")+"?"},urlParams:{filter:function(){return null!=this._filter?this._filter.get("name"):""},parent:function(){return null!=
this._group?this._group.get("id"):""}},setFilter:function(a,c){this._filter=a;this.resetCurrentPage(c)},setGroup:function(a,c){this._group=a;this.resetCurrentPage(c)},sync:function(a,c,f){a=Osp.PaginatedCollection.prototype.sync.call(this,a,c,f);this.trigger("request",this,a,f);return a},fetchAll:function(){this._fetchAll=!0;return this.fetch().fail(_.bind(this.onFetchAllError,this))},onFetchAllError:function(){this._fetchAll=!1;this.trigger("all:error")},parse:function(a){return this._fetchAll?this.parseAll(a):
Osp.PaginatedCollection.prototype.parse.apply(this,arguments)},parseAll:function(a){this.paginator_ui.currentPage=this.currentPage=1;this.paginator_ui.totalPages=this.totalPages=1;this.paginator_ui.lastPage=this.lastPage=1;return a}})}();
!function(a){a.Group=a.Model.extend({paramRoot:"group",defaults:{expanded:!1,active:!1,activeModal:!1,clazz:"Group"},initialize:function(c){a.Model.prototype.initialize.apply(this,arguments);var f=this.get("course");f&&this.unset("course",{silent:!0});this.get("leaf");var e=this.get("children");this.course()||f?(this._children=new a.Groups(e,{parent:this,course:this.course()||f,institution_id:this.institutionId()}),this.unset("children",{silent:!0}),this._users=new a.Users(null,{course:this.course(),
intitution_id:this.institutionId(),group:this}),this._paginatedUsers=new a.PaginatedUsers(null,{course:this.course(),group:this}),this._markbooks=new a.PaginatedMarkbooks(null,{course:this.course(),group:this})):(this._children=new a.Groups(e,{parent:this,institution_id:this.institutionId()}),this.unset("children",{silent:!0}),this._users=new a.Users(null,{institution_id:this.institutionId(),group:this}),this._paginatedUsers=new a.PaginatedUsers(null,{institution_id:this.institutionId(),group:this}));
this.on("change:active",this.updateState,this);this.on("change:name",this.updateLookableName,this)},addUsers:function(a){this._users.add(a);return this},removeUsers:function(a){this._users.remove(a);return this},resetUsers:function(a){this._users.reset(a);return this},onFirstLevel:function(){return this.collection?void 0===this.collection.parent()||null===this.collection.parent():this.has("depth")?0===this.get("depth"):!this.has("parent_id")},updateLookableName:function(){this.set("lookable_name",
this.get("name"))},course:function(){return this.collection?this.collection.course():null},hasCourse:function(){return null!=this.course()},relatedCourseGlobalGroup:function(){return this.get("related_course_global_group")},institutionId:function(){return this.collection&&this.collection.institutionId()||a.institution&&a.institution.id||null},children:function(){return this._children},updateState:function(){this.get("active")&&a.state.setStates({group:this,filter:null,page:1})},expand:function(){this.collection._parent&&
this.collection._parent.expand();this.set({expanded:!0})},activate:function(){this.set({active:!0})},expandAndActivate:function(){this.expand();this.activate()},currentMarkbooks:function(){return this._markbooks},currentUsers:function(){return this._paginatedUsers},getUsers:function(){return this._users},users:function(){this._users.wasFetched()||this.isNew()||(this._users._group=this,this._users.fetch({reset:!0}),this._users.markAsFetched());return this._users},pUsers:function(){var a=new $.Deferred,
f=this;0!==this._users.size()||this.isNew()?a.resolve(this._users):this._users.fetch({reset:!0}).done(function(){a.resolve(f._users)});return a.promise()},parent:function(){return this.collection.parent()},paginatedUsers:function(a){this._paginatedUsers._fetched||(this._paginatedUsers.setGroup(this,a),this._paginatedUsers.fetch(),this._paginatedUsers.markAsFetched());return this._paginatedUsers},markbooks:function(a){this._markbooks._fetched||(this._markbooks.setGroup(this,a),this._markbooks.fetch(),
this._markbooks.markAsFetched());return this._markbooks},planFetch:function(){void 0!==this.collection.parent()&&null!==this.collection.parent()||this.collection.parent().planFetch();this._fetched=!1},refreshMarkbooks:function(){if(this._markbooks){this._markbooks.planFetch();var c=a.state.getGroup();c&&this===c&&this.markbooks()}},refreshPaginatedUsers:function(){if(this._paginatedUsers){this._paginatedUsers.planFetch();var c=a.state.getGroup();c&&this===c&&this.paginatedUsers()}},generateLinkToShare:function(a,
f){if(null!=a&&null!=f){var c=gon.rootUrl;c+="app/courses/"+a.get("id")+"/modules/"+encodeURIComponent(f.get("name"));return c+="/node/"+encodeURIComponent(this.get("id"))}},validate:function(a){if(!a.name)return{name:[I18n.t("errors.messages.blank")]}},includeUserInSelfAndDescendants:function(a){return this._users.get(a)?!0:this._children.any(function(c){return c.includeUserInSelfAndDescendants(a)})},assignments:function(){return this._assignments||new a.GroupAssignments(null,{course:this.course(),
group:this})},getAssignments:function(c,f,e){var d=$.Deferred(),h=this._assignments instanceof a.GroupAssignments,k=_.isUndefined(c)||_.isNull(c);_.isUndefined(f)&&(f=!1);h&&k&&!1===f?d.resolve():(this._assignments=new a.GroupAssignments(null,_.extend({course:this.course(),group:this,assignmentIDs:c},e)),this._assignments.fetch().done(d.resolve));return d.promise()},ancestors:function(){for(var a=[],f=this.collection.parent();f;)a.push(f),f=f.collection.parent();return a},isAccesibleViaGroupCode:function(){return!1},
maxGroupUserTimestamp:function(){return this.get("group_users_updated_at")}});a.Groups=a.Collection.extend({model:function(c,f){return new (a[c.type]||a.Group)(c,f)},initialize:function(c,f){a.Collection.prototype.initialize.apply(this,arguments);this._parent=f?f.parent:null;this._institution_id=f?f.institution_id:null;this._course=f?f.course:null;this._withUsers=f?f.withUsers:!1},parent:function(){return this._parent},course:function(){return this._course},institutionId:function(){return this._institution_id},
url:function(){var a="/api";null!=this._course?a+="/courses/"+encodeURIComponent(this._course.id):this._institution_id&&(a+="/institutions/"+encodeURIComponent(this._institution_id));a+="/groups";this._withUsers&&(a+="?users=true");return a},refreshRelatedCollections:function(){this.eachRecursive(function(a){a.refreshMarkbooks();a.refreshPaginatedUsers()})},maxGroupUserTimestamp:function(){return this.chain().map(function(a){return a.maxGroupUserTimestamp()}).max(function(a){return a?Date.parse(a):
-Infinity}).value()}});a.CourseGroup=a.Group.extend({defaults:_({type:"CourseGroup"}).extend(a.Group.prototype.defaults),validate:function(c){var f=a.Group.prototype.validate.apply(this,arguments)||{};this.isAccesibleViaGroupCode()&&_(c.group_code).isBlank()&&_(f).extend({group_code:[I18n.t("errors.messages.blank")]});return _(f).isEmpty()?!1:f},validateCode:function(){return this.canValidateCode()?this._validateCodeGroupAgainstCollectionGroups()?this._requestCodeValidation().done(_.bind(this.onSuccessCodeValidation,
this)).fail(_.bind(this.onFailedCodeValidation,this)):$.Deferred().reject():$.Deferred().resolve()},onSuccessCodeValidation:function(){this._triggerValidCodeEvent()},onFailedCodeValidation:function(a){this._triggerInvalidCodeErrorEvent(a.responseText)},hasValidCode:function(){return _.isEmpty(this._codeError)},invalidCodeError:function(){return this._codeError},canValidateCode:function(){return this.has("group_code")&&this.isAccesibleViaGroupCode()},isAccesibleViaGroupCode:function(){return this.onFirstLevel()},
generateGroupCode:function(a){a=a||{};this.set("group_code",this._generateRandomToken(),a)},onConflictGroupCodeChange:function(a){a.off("change:group_code",this.onConflictGroupCodeChange,this);this.validateCode()},_validateCodeGroupAgainstCollectionGroups:function(){var a=this._findAGroupWithSameCodeInCollection();if(_.isUndefined(a))return!0;a.on("change:group_code",this.onConflictGroupCodeChange,this);this._triggerInvalidCodeErrorEvent(I18n.t("ui.courses.users.create.group_code.invalid_code"));
return!1},_findAGroupWithSameCodeInCollection:function(){return this.collection?_(this.collection.without(this)).find(_.bind(this._hasSameGroupCode,this)):null},_hasSameGroupCode:function(a){return a.has("group_code")&&this.has("group_code")?a.get("group_code").toLowerCase()===this.get("group_code").toLowerCase():!1},_requestCodeValidation:function(){this.trigger("validation:group_code:requesting",this);return $.post("/api/groups/validate_code",{group:this.toJSON()})},_triggerValidCodeEvent:function(){this._codeError=
null;this.trigger("validation:group_code:valid",this)},_triggerInvalidCodeErrorEvent:function(a){this._codeError=a;this.trigger("validation:group_code:invalid",a,this)},_generateRandomToken:function(){return("0000000"+Math.random().toString(36).substr(2,7)).toUpperCase().slice(-7)}},{newWithGroupCodeIfTopLevel:function(a,f){return _(new this(a,f)).tap(function(a){a.isAccesibleViaGroupCode()&&a.generateGroupCode({silent:!0,validate:!1})})}});a.CourseGlobalGroup=a.Group.extend({defaults:_({type:"CourseGlobalGroup"}).extend(a.Group.prototype.defaults)});
a.GlobalGroup=a.Group.extend({defaults:_({type:"GlobalGroup"}).extend(a.Group.prototype.defaults)});a.ReorderGlobalGroups=a.Model.extend({defaults:{groups:[]},urlRoot:"/api/groups/reorder"})}(Osp);!function(){Osp.GroupAndUser=Osp.Group.extend({});Osp.GroupsAndUsers=Osp.Groups.extend({model:Osp.GroupAndUser,url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/groups_and_users"}})}();
!function(){Osp.Action=Osp.Model.extend({defaults:{enabled:!1,toggled:!1,clazz:"Action"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);var c=this.targets();null!==c&&(this.listenTo(c,"reset",this.update.bind(this)),this.listenTo(c,"change:checked",this.update.bind(this)));this.update()},assignmentsCheck:function(){var a=_(this.selection()).any(function(a){return a.isUsedAsTest()});if(1<_(this.selection()).filter(function(a){return a.isUsedAsTest()}).length)return!1;var c=
_(this.selection()).any(function(a){return a.isUsedAsBlueprintContent()});return 1<this.selection().length&&a&&!c?!0:1==this.selection().length&&(c||a)?!0:!1},permissionsCheck:function(a){var c=!1,f=a.split(":");return c=_(this.selection()).all(function(a){return a.get(f[0])[f[1]]},this)},update:function(){if(!this._isPreviewing()){var a=this._lengthCheck();_(a).isString()&&(a=this.permissionsCheck(a));"assign"==this.get("name")&&a&&(a=this.assignmentsCheck());if(this.lens()&&this.lens().isMarkbook()&&
/report/.test(this.get("name"))){a=this.get("name");var c=this.selection(),f=!1;("group_report"==a||"diagnostic_report"==a)&&0<c.length&&Osp.state.getGroup()&&!Osp.state.getStudent()&&(f=!0);"student_report"==a&&Osp.state.getStudent()&&(f=!0);a=f}"add_to_group"==this.get("name")&&a&&(a=this.usersCheck());"reset_passwords"==this.get("name")&&a&&(a=this.usersCheck());"csvexport"==this.get("name")&&a&&(a=this._checkNodeSelectionForCsvExport());"archive"==this.get("name")&&a&&(a=this.archiveCheck()&&
this.selfStudyCheck());"delete"==this.get("name")&&a&&(a=this.selfStudyCheck());"unarchive"==this.get("name")&&a&&(a=this.unarchiveCheck());this.set({enabled:a,toggled:!1})}},schoolAllowsRedeemAccessCodesByUser:function(){return"by_user"==Osp.profile.get("school").allow_redeem_access_codes},selfStudyCheck:function(){var a=_.some(this.selection(),function(a){return"Student"===a.get("type")});return!this.schoolAllowsRedeemAccessCodesByUser()||this.get("enableWhen").selfStudy||!a},archiveCheck:function(){var a=
Osp.state.getFilter();return!a||a&&!a.isArchivedFilter()?!0:!1},unarchiveCheck:function(){var a=Osp.state.getFilter();return a&&a.isArchivedFilter()?!0:!1},usersCheck:function(){return gon.hasAdmin?_(this.selection()).all(function(a){return!a.isTeacher()}):!1},targets:function(){return this.collection?this.collection.targets():null},lens:function(){return this.collection?this.collection.lens():null},course:function(){return this.collection?this.collection.course():null},selection:function(){var a=
this.targets();return a?a.allThatAre("checked"):[]},_isPreviewing:function(){if("preview"==this.get("name")&&this.get("toggled")){var a=_(this.selection()).find(function(a){return!a.changedAttributes()});if(a)return a.set({checked:!1}),this.set({toggled:!0}),!0}return!1},_lengthCheck:function(){var a=this.get("enableWhen");switch(this.selection().length){case 0:a=a.empty;break;case 1:a=a.single;break;default:a=a.multiple}return a},_checkNodeSelectionForCsvExport:function(){return this._isGroupSelected()||
this._isExportableFilterSelected()?!0:!1},_isGroupSelected:function(){return!_.isUndefined(Osp.state.getGroup())&&!_.isNull(Osp.state.getGroup())},_isExportableFilterSelected:function(){return!_.isUndefined(Osp.state.getFilter())&&!_.isNull(Osp.state.getFilter())&&_(["all_students","unallocated_students","all_archived"]).contains(Osp.state.getFilter().get("name"))}});Osp.Actions=Osp.Collection.extend({model:Osp.Action,initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);
this._lens=c?c.lens:null;this._targets=c?c.targets:null;this._course=c?c.course:null},targets:function(){return this._targets},lens:function(){return this._lens},course:function(){return this._course}})}();
!function(){Osp.Digibook=Osp.Model.extend({isPublished:function(){return this.get("published")},purchased:function(a){return this.get("purchased")[a]},getLink:function(){return"/api/courses/"+Osp.state.getCourse().id+"/digital_books/"+this.id+".html?engine="+gon.engine},showDigitalBook:function(a){a=a.data("profile");this.purchased(a)?window.open(this.getLink()):(new Osp.UnpurchasedDialogBooks({purchase_url:this.get("purchase_url")[a],purchase_link_text:this.get("purchase_link_text")[a],purchase_instruction_text:this.get("purchase_instruction_text")[a],
purchase_popup_title:this.get("purchase_popup_title")[a],showCancel:!0})).render()}});Osp.Digibooks=Osp.Collection.extend({model:Osp.Digibook,initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this._course=c?c.course:null},url:function(){var a="/api";null!=this._course&&(a+="/courses/"+encodeURIComponent(this._course.id));return a+"/digital_books"}})}();
!function(){Osp.Book=Osp.Model.extend({paramRoot:"book",defaults:{name:"Page Range",left:null,right:null,bought:!1,marketing_url:"",clazz:"Book"},initialize:function(a){Osp.Model.prototype.initialize.apply(this,arguments);a&&(this.structure=a.structure);this.structure&&this.structure.get("digibook_name")&&this.set({name:this.structure.get("digibook_name"),purchase_url:this.structure.get("digibook_purchase_url"),id:this.structure.get("digibook_id"),link_text:this.structure.get("digibook_link_text"),
purchase_instruction_text:this.structure.get("digibook_purchase_instruction_text"),purchase_popup_title:this.structure.get("digibook_purchase_popup_title"),bought:this.structure.get("digibook_bought"),left:this.structure.get("digibook_page_range_start_on"),right:this.structure.get("digibook_page_range_end_on")})},showDigitalBook:function(a){this.get("bought")?window.open("/api/courses/"+Osp.state.getCourse().id+"/digital_books/"+this.id+".html?page="+a.addBack().closest("a").data("bookmark")+"&engine="+
gon.engine):Osp.profile.isTeacher()&&this.structure&&(new Osp.UnpurchasedDialogBooks({purchase_url:this.get("purchase_url"),purchase_instruction_text:this.get("purchase_instruction_text"),purchase_popup_title:this.get("purchase_popup_title"),purchase_link_text:this.get("link_text"),showCancel:!0})).render()},previous:function(){var a=this.get("left"),c=this.get("right");1<a&&this.set({left:a-1,right:c-1})},next:function(){var a=this.get("left"),c=this.get("right");this.set({left:a+1,right:c+1})}})}();
!function(){Osp.Invitation=Osp.Model.extend({initialize:function(a,c){Osp.Model.prototype.initialize.apply(this,arguments);this._course=c?c.course:null},toJSON:function(){return{invitation:_.clone(this.attributes)}},url:function(){return this.teacherInvitation()?"/api/courses/"+encodeURIComponent(this.course().id)+"/invitations":"/api/invitations"},course:function(){return this._course},teacherInvitation:function(){return!this.get("to_be_admin")},adminInvitation:function(){return this.get("to_be_admin")}});
Osp.Invitation.noAdminInvitations=0;Osp.Invitation.waitingAdminConfirmation=1;Osp.Invitation.withAdmin=2}();
!function(a){a.InstitutionStatusAdministrator=a.Model.extend({defaults:{status:null,template:""}});a.InstitutionStatusStudents=a.Model.extend({defaults:{status:null,template:""}});a.InstitutionStatus=function(){var c=function(){this.administrator=new a.InstitutionStatusAdministrator;this.students=new a.InstitutionStatusStudents};_(c.prototype).extend(Backbone.Events,{fetch:function(a){a=a||{};return $.ajax(_(a).extend({dataType:"json",url:"/api/institution_status"})).then(_.bind(function(a){a.administrator&&
this.administrator.set(a.administrator);a.students&&this.students.set(a.students);this.trigger("reset")},this))}});return c}()}(Osp);!function(){Osp.Client=Osp.Model.extend({urlRoot:"/api/clients"})}();"use strict";
Osp.StudentAssignment=Osp.Model.extend({initialize:function(){this.id=this.get("student_assignment_id")},isInteractive:function(){return(new Osp.Contents(this.get("test_contents"))).any(function(a){return a.isInteractive()})},isMarked:function(){return parseInt(this.get("status"),10)===Osp.StudentAssignment.status.marked},isUnfinished:function(){var a=parseInt(this.get("status"),10);return a===Osp.StudentAssignment.status.todo||a===Osp.StudentAssignment.failed||a===Osp.StudentAssignment.status.saved},
isUnmarked:function(){var a=parseInt(this.get("status"),10);return!this.isUnfinished()&&a!=Osp.StudentAssignment.status.marked}},{status:{todo:1,done:2,failed:3,marked:4,saved:5},DELIVERY:{NOTHING:"nothing",MANUAL:"manual",UPLOAD:"upload"}});
(function(){Osp.StudentAssignments=Osp.Collection.extend({model:Osp.StudentAssignment,sortColumn:"due",sortDirection:"asc",initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);var f=c||{};if(_.isNull(f.course)||_.isUndefined(f.course))throw"Missing course param";if((_.isNull(f.student)||_.isUndefined(f.student))&&(_.isNull(f.groupAssignment)||_.isUndefined(f.groupAssignment)))throw"Missing student or group assignment param";this.course=c.course;this.student=c.student;
this.groupAssignment=c.groupAssignment;_.isUndefined(c.sortColumn)||(this.sortColumn=c.sortColumn);_.isUndefined(c.sortDirection)||(this.sortDirection=c.sortDirection)},url:function(a){var c="/api/courses/"+this.course.id;c=this.student?c+("/users/"+this.student.id):c+("/group_assignments/"+this.groupAssignment.id);c+="/student_assignments."+(a||"json");""!=this.sortColumn&&(c+="?order_col="+this.sortColumn,c+="&order_dir="+this.sortDirection);return c}})})();"use strict";
(function(){var a={DROPDOWN:"d",SIMPLE:"s"};Osp.BaseButton=Osp.Model.extend({defaults:{cssId:"",label:"Default option label"},initialize:function(){Osp.Model.prototype.initialize.apply(this,arguments);this.get("command")||this.set("command",Osp.ButtonCommand.COMMANDS.NO_COMMAND)}});Osp.DropdownOption=Osp.BaseButton;Osp.DropdownOptions=Osp.Collection.extend({model:Osp.DropdownOption});Osp.Button=Osp.BaseButton.extend({defaults:_.defaults({cssSizeClass:"half",type:a.SIMPLE},Osp.BaseButton.prototype.defaults)},
{TYPE:a});Osp.DropdownButton=Osp.Button.extend({defaults:_.defaults({type:a.DROPDOWN},Osp.Button.prototype.defaults),initialize:function(){Osp.Button.prototype.initialize.apply(this,arguments);this.set("dropdownOptions",new Osp.DropdownOptions(this.get("dropdownOptions")))}});Osp.Buttons=Osp.Collection.extend({model:Osp.Button},{createCollection:function(a){var c=new Osp.Buttons,e;_(a).each(function(a){e=a.dropdownOptions?new Osp.DropdownButton(a):new Osp.Button(a);c.add(e)});return c}});Osp.ButtonCommand=
function(a,f){this._lens=a;this._view=f};Osp.ButtonCommand.prototype.execute=function(){};Osp.ExportUsernamesCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.vent.trigger("course:dialog:export_users")}});Osp.ManageGroupsCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.vent.trigger("course:dialog:user_management",this._lens)}});Osp.InviteTeachersCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.vent.trigger("course:users:invite")}});Osp.CreateButtonCommand=_.inherits(Osp.ButtonCommand,
{execute:function(){Osp.vent.trigger("course:dialog:create",this._lens)}});Osp.CreateGlobalGroupCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.GlobalApp.Create.showDialog(this._lens)}});Osp.CreatePlanButtonCommand=_.inherits(Osp.ButtonCommand,{execute:function(){window.open(this._planEditorUrl())},_currentCourseId:function(){return this._lens.course().id},_currentNodeId:function(){return this._lens.currentNode()?this._lens.currentNode().id:0},_planEditorUrl:function(){return"/api/courses/"+
this._currentCourseId()+"/planning/new.html?structure_id="+this._currentNodeId()}});Osp.CreateWeblinkButtonCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.vent.trigger("course:dialog:content:weblink",this._lens)}});Osp.UploadButtonCommand=_.inherits(Osp.ButtonCommand,{execute:function(){Osp.vent.trigger("course:dialog:content",this._lens)}});Osp.ButtonCommand.COMMANDS={ADD_GLOBAL_TO_COURSE:Osp.AddGlobalToCourseCommand,MANAGE_GROUPS_COMMAND:Osp.ManageGroupsCommand,EXPORT_USERNAMES:Osp.ExportUsernamesCommand,
INVITE_TEACHERS:Osp.InviteTeachersCommand,CREATE:Osp.CreateButtonCommand,CREATE_GLOBAL_GROUP:Osp.CreateGlobalGroupCommand,CREATE_PLAN:Osp.CreatePlanButtonCommand,CREATE_WEBLINK:Osp.CreateWeblinkButtonCommand,NO_COMMAND:Osp.ButtonCommand,UPLOAD:Osp.UploadButtonCommand}})();
!function(a){a.SsoContent=a.Model.extend({paramRoot:"sso_content",defaults:{clazz:"SsoContent"},initialize:function(c,f){a.Model.prototype.initialize.apply(this,arguments);this._successCallback=f.success_callback;this._errorCallback=f.error_callback},showContent:function(a){this.fetch({success:this._successCallback,error:this._errorCallback})},url:function(){return"/api/courses/"+encodeURIComponent(this.get("_course").id)+"/contents/"+encodeURIComponent(this.id)+"/get_sso_url"}})}(Osp);"use strict";
!function(){Osp.Subject=Osp.Model.extend({defaults:{checked:!1}});Osp.Subjects=Osp.Collection.extend({model:Osp.Subject,setChecked:function(a){var c=_(a).pluck("id");this.chain().filter(function(a){return _(c).include(a.id)}).invoke("set",{checked:!0})},getChecked:function(){return this.allThatAre("checked")},getCheckedIds:function(){return _(this.getChecked()).pluck("id")}})}();
(function(a){a.Subscription=a.Model.extend({});a.Subscriptions=a.Collection.extend({model:a.Subscription,initialize:function(c,f){a.Collection.prototype.initialize.apply(this,arguments);this.courseId=f.courseId},url:function(){return"/api/courses/"+this.courseId+"/products"}})})(Osp);
(function(a){a.CourseUpdate=a.Model.extend({getLens:function(){return this.get("course_lens")},isDigitalBook:function(){return"digibook"==this.getLensType()},getLensType:function(){var a=this.getLens();return a?a.type:null},getLensName:function(){var a=this.getLens();return a?a.name:null},hasLens:function(){return!!this.getLens()},url:function(){return this.get("data").url},hasUrl:function(){return!!this.url()},urlIsExternal:function(){return(new a.UrlService(this.url())).external},getSearch:function(){return{latest:this.get("message_type")}}});
a.CourseUpdates=a.Collection.extend({model:a.CourseUpdate,parse:a.Collection.prototype.parseJsonAPI,initialize:function(c,f){a.Collection.prototype.initialize.apply(this,arguments);this._course=f.course},course:function(){return this._course},url:function(){return"/api/courses/"+this._course.id+"/course_updates"},dismissUrl:function(){return this.url()+"/dismiss"},dismiss:function(a){var c=this;return $.post(this.dismissUrl(),{id:a?a.id:this.pluck("id")}).done(function(){return a?c.remove(a):c.reset()})}})})(Osp);
"use strict";
Osp.config.buttons={course:{assignments:[{cssId:"create-button",dropdownOptions:[{command:Osp.ButtonCommand.COMMANDS.NO_COMMAND,cssId:"create-interaction",label:"ui.actions.create-interaction"},{command:Osp.ButtonCommand.COMMANDS.CREATE,cssId:"create-node",label:"ui.actions.create-node"},{command:Osp.ButtonCommand.COMMANDS.CREATE_WEBLINK,cssId:"create-weblink",label:"ui.actions.create_weblink"}],iconType:"create",label:"ui.actions.create"},{command:Osp.ButtonCommand.COMMANDS.UPLOAD,cssId:"upload-content",iconType:"upload",
label:"ui.actions.upload"}],planning:[{dropdownOptions:[{command:Osp.ButtonCommand.COMMANDS.CREATE_PLAN,cssId:"create-plan",label:"ui.actions.create-plan"},{command:Osp.ButtonCommand.COMMANDS.CREATE,cssId:"create-node",label:"ui.actions.create-course-node"}],iconType:"create",label:"ui.actions.create"},{command:Osp.ButtonCommand.COMMANDS.UPLOAD,cssId:"upload-content",iconType:"upload",label:"ui.actions.upload"}],resources:[{cssId:"create-button",dropdownOptions:[{command:Osp.ButtonCommand.COMMANDS.NO_COMMAND,
cssId:"create-interaction",label:"ui.actions.create-interaction"},{command:Osp.ButtonCommand.COMMANDS.CREATE,cssId:"create-node",label:"ui.actions.create-node"},{command:Osp.ButtonCommand.COMMANDS.CREATE_WEBLINK,cssId:"create-weblink",label:"ui.actions.create_weblink"}],iconType:"create",label:"ui.actions.create"},{command:Osp.ButtonCommand.COMMANDS.UPLOAD,cssId:"upload-content",iconType:"upload",label:"ui.actions.upload"}],users:[{command:Osp.ButtonCommand.COMMANDS.MANAGE_GROUPS_COMMAND,adminInvitationNeeded:!0,
cssId:"manage-groups-button",cssSizeClass:"inline",label:"ui.actions.manage_groups"},{command:Osp.ButtonCommand.COMMANDS.EXPORT_USERNAMES,adminInvitationNeeded:!0,cssId:"export-usernames-button",cssSizeClass:"inline",label:"ui.actions.export_usernames"},{command:Osp.ButtonCommand.COMMANDS.INVITE_TEACHERS,adminInvitationNeeded:!1,cssId:"invite-teachers-button",cssSizeClass:"inline",label:"ui.actions.invite"}]},global:{users:[{command:Osp.ButtonCommand.COMMANDS.CREATE_GLOBAL_GROUP,cssId:"create-group",
cssSizeClass:"full",iconType:"create",label:"ui.actions.manage_global_groups"}]}};(function(a,c){a.TokenAccessService=c.Object.extend({isTokenAccessUser:function(){var c=a.profile.get("managed"),e=a.profile.isTeacher(),d=a.profile.isStudent(),h=a.profile.get("self_study"),k=a.profile.get("school").allow_redeem_access_codes;return h||e&&("by_user"===k||"by_admin"===k)||d&&!c&&"by_user"===k?!0:!1}})})(Osp,Marionette);
!function(a,c){a.FocusManagerService=c.Object.extend({initialize:function(a,c){var d=this;this.$el=(c=void 0===c?null:c)?a.$(c):a.$el;this.$el.on("keydown",function(a){return d.onKeyDown(a,d.$el[0])});this.listenTo(a,"destroy",function(){return d.$el.off("keydown")})},onKeyDown:function(a,c){if("Tab"===a.key&&9===a.keyCode){var d=this.getFocusableElements(c);c=d[0];d=d[d.length-1];a.shiftKey&&document.activeElement===c?(a.preventDefault(),d.focus()):a.shiftKey||document.activeElement!==d||(a.preventDefault(),
c.focus())}},getFocusableElements:function(a){a=a.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), .accordion--enabled input[type="radio"]:checked:not(:disabled), input[type="checkbox"]:not([disabled]), select:not([disabled]), .student-assignment__info__group ul li:first-child input[type="radio"]');return Array.from(a).filter(function(a){return!("BUTTON"===a.tagName&&a.closest(".hidden"))})}})}(Osp,Marionette);
!function(a,c){var f=c.Object.extend({initialize:function(a,c){this.content=a;this.context=c},isExternal:function(){return this.context!==window},id:function(){return this.content.id},get:function(a){return this.content.get(a)},has:function(a){return this.content.has(a)},track:function(){a.Tracking.getChannel().request("notify","content",this.content)},launch:function(){this.track();this.context.open(this.get("url"))}}),e=f.extend({getQuery:function(){return a.state.getStructure()?"?st="+a.state.getStructure().id:
""},launch:function(){this.context.open("/api/courses/"+a.state.getCourse().id+"/planning/"+this.id()+".html"+this.getQuery())}}),d=f.extend({launch:function(){this.context.open(this.get("url"),this.get("name"),"menubar=NO,location=NO,toolbar=NO")}}),h=f.extend({launch:function(){"no"===this.get("new_window")?this.context.location.href=this.get("url"):f.prototype.launch.call(this)}}),k=f.extend({launch:function(){this.context.open(this.get("content_object_link"),"_blank");this.track();Backbone.Radio.channel("analytics").request("track:download",
this.content)}}),l=f.extend({launch:function(){(new a.ImageDialog({title:this.get("name"),image_src:this.get("content_object_link"),className:"image-dialog",external:this.isExternal()})).render()}}),m=f.extend({showPlayer:function(c){a.InteractivePlayer.showPlayer(this.content,_(c).isNumber()?c.toString():c,this.isExternal())},launch:function(){this.showPlayer(this.get("bookmark"))},launchPage:function(a){this.showPlayer(a)}}),n=f.extend({template:'<div id="lti-iframe-container" class="interactive-dialog modal in"><iframe name="lti-iframe" id="lti-iframe" allowfullscreen="allowfullscreen"></iframe></div>',
$iframeContainer:function(){return $(this.template).appendTo("body")},clean:function(){return $("#lti-iframe-container").remove()},getUrl:function(a){var c=this.get("url"),d=(new URL(window.location.href)).searchParams.get("page"),e={};"undefined"!==typeof a&&null!==a?e.page=a:null!==d&&(e.page=d);this.studentAssignmentIdNotPresent(c)&&this.has("student_assignment_id")&&(e.student_assignment_id=this.get("student_assignment_id"));a=(new URLSearchParams(e)).toString();0<a.length&&(d=(new URL("http://"+
c)).search,c+=0<d.length?"&":"?",c+=a);return c},studentAssignmentIdNotPresent:function(a){return!_((new URL("http://"+a)).searchParams.get("student_assignment_id")).isEmpty()},launch:function(a){var c=this;this.clean();$("#body, #header").hide();window.onpopstate=function(){return c.closeBook()};this.$iframeContainer().find("iframe").attr("src",a||this.getUrl()).show();this.checkIframeLoaded()},checkIframeLoaded:function(){var a=document.getElementById("lti-iframe");"complete"==(a.contentDocument||
a.contentWindow.document).readyState?this.afterLoading():window.setTimeout(this.checkIframeLoaded(),100)},afterLoading:function(){var a=document.location.href+"#/open_book";setTimeout(function(){return window.history.pushState({},"",a)},6E3)},closeBook:function(){window.onpopstate=function(){};$("#lti-iframe-container").hide();$("#body").show();$("#header").show();$("#lti-iframe").attr("src","about:blank");window.history.pushState({},"",document.location.pathname)},launchPage:function(a){this.launch(this.getUrl(a))}}),
q=f.extend({launch:function(){this.context.open(this.get("url"))}}),t={embeddable:f,image:l,webpage:h,fallback:k},y={Lti:"lti",Author:"author",Iwb:"iwb",LearningObject:"learning_object",CompiledLearningObject:"compiled_learning_object"};a.ContentLauncherService=c.Object.extend({initialize:function(a,c){this.content=this.cast(a);this.context=c||window},cast:function(c){return c instanceof a.Model?c:new a.Content(c)},get:function(a){return this.content.get(a)},getViewed:function(){return _.isUndefined($.cookie("contentIds"))?
[]:$.cookie("contentIds").split(",")},markAsViewed:function(a){a&&(a.addClass("visited"),$.cookie("contentIds",_(this.getViewed().concat(this.content.id)).uniq()))},getLauncherClass:function(){return this.get("is_mfo")?d:this.get("content_plan_from_author")?e:this.get("launcher")===y.Iwb?q:this.get("launcher")===y.Author?m:this.get("launcher")===y.CompiledLearningObject?a.ContentLauncher.LearningObject.Compiled:this.get("launcher")===y.LearningObject?a.ContentLauncher.LearningObject:this.get("launcher")===
y.Lti?n:t[this.get("format")]||t.fallback},getLauncher:function(){return new (this.getLauncherClass())(this.content,this.context)},launch:function(a){var c=this.getLauncher();this.markAsViewed(a);c.launch();return c},launchPage:function(a){var c=this.getLauncher();"function"===typeof c.launchPage?c.launchPage(a):c.launch();return c}},{Service:y,Lti:n,Author:m,Launcher:f})}(Osp,Marionette);
(function(a,c){var f={CurriculumStrandTheme:"Theme",CurriculumStrandSubTheme:"Sub-theme"},e=function(a){this.model=a};$jscomp.global.Object.defineProperties(e.prototype,{nodes:{configurable:!0,enumerable:!0,get:function(){return this.model.get("curriculum")||[]}},course:{configurable:!0,enumerable:!0,get:function(){return c.isFunction(this.model.course)&&this.model.course()?this.model.course():a.currentCourse}},labels:{configurable:!0,enumerable:!0,get:function(){if(!this._labels){var a=this.course.get("curriculum");
this._labels=a?a.labels.type:f}return this._labels}},label:{configurable:!0,enumerable:!0,get:function(){if(!this._label){var a=this.labels[this.type];this._label=1==this.nodes.length?a:a.pluralize()}return this._label}},defaultType:{configurable:!0,enumerable:!0,get:function(){var a=this.course.get("curriculum");return a?a.display_level:"CurriculumStrandSubTheme"}},type:{configurable:!0,enumerable:!0,get:function(){if(!this._type){var a=c(this.nodes).first();this._type=a?a.type:this.defaultType}return this._type}},
titles:{configurable:!0,enumerable:!0,get:function(){this._titles||(this._titles=this.nodes.map(function(a){return a.title}).join(", "));return this._titles}},serialized:{configurable:!0,enumerable:!0,get:function(){return{label:this.label,titles:this.titles}}}});a.CurriculumService=e})(Osp,_);
(function(a,c){c=function(){};c.toHSL=function(a){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);a=parseInt(c[1],16);var d=parseInt(c[2],16);c=parseInt(c[3],16);a/=255;d/=255;c/=255;var f=Math.max(a,d,c),k=Math.min(a,d,c),l=(f+k)/2;if(f==k)var m=k=0;else{var n=f-k;k=.5<l?n/(2-f-k):n/(f+k);switch(f){case a:m=(d-c)/n+(d<c?6:0);break;case d:m=(c-a)/n+2;break;case c:m=(a-d)/n+4}m/=6}m=Math.round(360*m);k=Math.round(100*k);l=Math.round(100*l);return{h:m,s:k,l:l}};a.HexService=c})(Osp,_);
!function(a,c){a.LevelUpManager=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;c=void 0===c.pauseOnClose?!1:c.pauseOnClose;this.levelUp=a;this._pauseOnClose=c;this.tests=this.levelUp.get("tests")},channel:function(){return Backbone.Radio.channel("level_ups")},assignmentId:function(){return this.levelUp.get("student_assignment_id")},startIndex:function(){return _(this.tests).findIndex(function(a){return"done"!=a.status})},getLauncher:function(c){c=Object.assign({level_up_test_id:c.id},
c.content);return(new a.ContentLauncherService(c)).getLauncher().disableLockScroll()},getLauncherByIndex:function(a){return this.getLauncher(this.tests[a||this.index])},prepare:function(a){a=void 0===a?{}:a;a=void 0===a.hideUntilLoaded?!1:a.hideUntilLoaded;this.index=this.startIndex();var c=this.getLauncherByIndex();a&&c.hideUntilLoaded();this._pauseOnClose&&c.pauseOnClose();return this.setCurrent(c).prepare()},prepareNext:function(){this.end()||(this.next=this.getLauncherByIndex(this.index+1),this._pauseOnClose&&
this.next.pauseOnClose(),this.next.hideUntilLoaded(),this.next.prepare())},setCurrent:function(a){var c=this;this.current=a;this.listenTo(a,"submitted",function(){return c.startNext()});this.listenTo(a,"close",function(){return c.restoreScroll()});return this.current},lockScroll:function(){$("body").addClass("learningObject--lockScroll")},restoreScroll:function(){$("body").removeClass("learningObject--lockScroll")},start:function(){this.current.start();this.lockScroll();this.prepareNext();return this},
launch:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(a.prepare(),2);a.start();c.jumpToEnd()})},count:function(){return this.tests.length},end:function(){return this.index+1==this.count()},startNext:function(){if(this.end())return this.submitted();this.index++;this.setCurrent(this.next).start();this.prepareNext()},openTest:function(a,c){this.getLauncher(a).launchPage(c)},submitted:function(){this.restoreScroll();this.trigger("submitted",
this.levelUp);this.channel().trigger("submitted",this.levelUp);this.destroy()},onDestroy:function(){this.current&&this.current.cleanUp();this.next&&this.next.cleanUp()},cancel:function(){this.restoreScroll();this.destroy()}})}(Osp,Marionette);
!function(a,c){a.BookDownloadHelper=c.Object.extend({generateLinksForAssets:function(a,c){var d=this,e,f,l,m,n,q,t,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return h.yield(d.loadXMLParser(),2);case 2:return e=d.getBucketLink(),h.yield(d.decodeLearningObjectXml(a.offline_content_link),3);case 3:return f=h.yieldResult,h.yield(d.generateLinksForContent(a.offline_content_link),4);case 4:return l=h.yieldResult,h.yield(d.generateLinksForEngine(e,f.engine.version),
5);case 5:return m=h.yieldResult,n=$jscomp.makeIterator(d.generatePdfLinks(f.pages.page)),q=n.next().value,t=n.next().value,y=[].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(q),[""+window.location.origin+a.image_src,window.location.origin+"/api/courses/"+c+"/interactives/offline/"+a.id+".html",window.location.origin+"/stylesheets/learning_object/learning_object.css",window.location.origin+"/javascripts/underscore-min.js",window.location.origin+"/javascripts/jquery/jquery.min.js",
window.location.origin+"/javascripts/home/interactive/author_api.js",d.getAbsoluteUrl(a.offline_content_link)+"index.html",d.getAbsoluteUrl(a.offline_content_link)+"data.js",window.location.origin+"/favicon.ico"]),h.return([y,t])}})},decodeLearningObjectXml:function(a){var c=this,d,f,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(fetch(c.getAbsoluteUrl(a)+"LearningObjectInfo.xml"),2);if(3!=e.nextAddress)return d=e.yieldResult,e.yield(d.text(),
3);f=e.yieldResult;k=new XMLParser;l=k.parse(f);return e.return(l.LearningObjectInfo)})},loadXMLParser:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(new Promise(function(a,c){"function"!==typeof XMLParser?$.getScript("/javascripts/fxparser.min.js",a).fail(c):a()}))})},generateLinksForContent:function(a){var c=this,d,f,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=["hash.txt","compile.log","gitPath.txt","version.txt"],
e.yield(fetch(c.getAbsoluteUrl(a)+"sk/manifest.json"),2);if(3!=e.nextAddress)return f=e.yieldResult,e.yield(f.json(),3);k=e.yieldResult;l=k.files.filter(function(a){return!d.includes(a)});return e.return(l.map(function(d){return c.getAbsoluteUrl(a)+"sk/"+d}))})},generateLinksForEngine:function(a,c){var d,e,f,l,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return d=window.location.protocol+"//"+a,h.yield(fetch(d+"/"+c+"/manifest.json"),2);if(3!=h.nextAddress)return e=
h.yieldResult,h.yield(e.json(),3);f=h.yieldResult;l=f.resources.map(function(a){return d+"/"+c+"/"+a});m=f.engine.map(function(a){return d+"/"+c+"/"+a});n=f["third-party"].map(function(a){return d+"/"+c+"/"+a});return h.return([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(n)))})},generatePdfLinks:function(a){a=a.map(function(a){return""+window.location.protocol+a.url});var c=a[0],d=c.indexOf("/ebooks/")+8,f=c.indexOf("/pdfs");c=c.substring(d,f);return[a,
c]},getAbsoluteUrl:function(a){return a.startsWith("http")?a:""+window.location.origin+a},getBucketLink:function(){return offlineSettings&&offlineSettings.offline_storage_domain?offlineSettings.offline_storage_domain:"author-engine-production.avallain.net"}})}(Osp,Marionette);
!function(a,c){a.BookSubscriptionChecker=c.Object.extend({validateDownloadedDigitalBooks:function(){var c=this,e,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){if("undefined"===typeof workbox||"undefined"===typeof Dexie)return f.return();e=(new a.IndexedDbService).getDb();return f.yield(e.books.toArray(),2)}d=f.yieldResult;if(0===d.length)return f.return();h=d.map(function(a){return a.bookId});c.fetchBookAccessDate(e,h);f.jumpToEnd()})},fetchBookAccessDate:function(a,
c){var d=this;$.get("/digital_books/access_check",{ids:c}).done(function(c){c.data.forEach(function(c){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.books.where({bookId:c.attributes.id}).first(),2);e=f.yieldResult;if(!e)return f.return();if(null===c.attributes.offline_content_link)return f.return(d.deleteBook(e,c,a));c.attributes.active?a.books.where({bookId:c.attributes.id}).modify({subEndDate:(new Date(c.attributes.subs_end_date)).getTime()}):
d.deleteBook(e,c,a);f.jumpToEnd()})})})},deleteBook:function(a,c,d){workbox.messageSW({type:"BOOK_DELETE",PDFDirId:a.PDFDirId,bookId:a.bookId});d.books.where({bookId:c.attributes.id}).delete()}})}(Osp,Marionette);
!function(a,c){a.NotificationTemplates=c.Object.extend({offlineDownloadSuccess:function(){return{iconId:"icon_confirm",title:"Download completed",content:"Your digital book has downloaded. This download will only be available on Kerboodle when you're offline.",hasPipe:!0,hasClose:!0}},offlineDownloadFailed:function(a){return{iconId:"icon_alert",title:"Download failed",content:'Your digital book download has failed. Please try again. <a target="_blank" rel="noopener noreferrer" href="'+this.getFetchingFailedLink(a)+
'">Click here</a> for more support.',hasPipe:!0,hasClose:!0}},removeBookSuccess:function(){return{iconId:"icon_confirm",title:"Download removed",content:"Your digital book download has been removed.",hasPipe:!0,hasClose:!0}},bookUpgradeAvailable:function(a){return{iconId:"icon_alert",title:"Update(s) available",content:"Please check and update your downloaded book(s).",hasPipe:!0,hasClose:!0,customClass:a}},bookUpdateSuccess:function(){return{iconId:"icon_confirm",title:"Update complete",content:"Your digital book has been updated.",
hasPipe:!0,hasClose:!0}},offlineUpdateFailed:function(a){return{iconId:"icon_alert",title:"Update failed",content:'Your digital book update has failed. Please try again. <a target="_blank" rel="noopener noreferrer" href="'+this.getFetchingFailedLink(a)+'">Click here</a> for more support.',hasPipe:!0,hasClose:!0}},getFetchingFailedLink:function(a){return a?"https://support.kerboodle.com/teacher-support/resources-lessons-and-digital-book/optimised-digital-book-download-failed/":"https://support.kerboodle.com/student-support/using-kerboodle/student-optimised-digital-book-download-failed/"}})}(Osp,
Marionette);!function(a,c){a.IndexedDbService=c.Object.extend({getDb:function(){var a=new Dexie("kerboodle");a.version(3).stores({books:"++id, name, bookId, offline_content_version, PDFDirId, imgSrc, courseId, subEndDate"});return a}})}(Osp,Marionette);
!function(a,c){var f=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+this.courseId+"/reactivate/tasks"},initialize:function(a){this.courseId=a}}),e=a.Model.extend({defaults:{total_remaining_questions:0,mark:0,points:0,percentage_mark:0,percentage_memory_strength:0,questions:[]}}),d=a.Model.extend({url:function(){return"/api/v2/courses/"+this.courseId+"/reactivate/results/"+this.id},initialize:function(a){this.courseId=a},batch:function(){return this._batch?
this._batch:this._batch=new e},nextStep:function(){return this._nextStep?this._nextStep:this._nextStep=new f(this.courseId)},hasNextStep:function(){return!!this.nextStep().id},parse:function(a){var c=a.activity_batch;a=a.next_step;this.batch().set(this.parseJsonAPI(c));a&&this.nextStep().set(this.parseJsonAPI(a))}}),h=function(a){var d=c.Object.call(this)||this;d.courseId=a;return d};$jscomp.inherits(h,c.Object);h.prototype.fetch=function(){var a=this,c=new f(this.courseId);return c.fetch().done(function(){return a.task=
c}).fail(function(){return a.task=null}).always(function(){return a.trigger("sync")})};h.prototype.fetchResults=function(a){var c=this;this.results.set({id:a}).fetch().done(function(){return c.task=c.results.hasNextStep()?c.results.nextStep():null})};h.prototype.start=function(){var a=this;this.task&&(this.listenTo(this.launcher,"submitted",function(c){return a.submitted(c)}),this.listenTo(this.launcher,"close",function(){return a.close()}),this.launcher.launch())};h.prototype.clearStart=function(){this.cleanUp();
this.start()};h.prototype.cleanUp=function(){this.stopListening();this.panel.close();this._panel=this._launcher=this._results=null};h.prototype.submitted=function(a){this.trigger("submitted",a);this.channel.trigger("submitted",a);this.panel.show().toggle();this.fetchResults(a.activity_batch_id)};h.prototype.close=function(){this.trigger("close");this.cleanUp()};$jscomp.global.Object.defineProperties(h.prototype,{channel:{configurable:!0,enumerable:!0,get:function(){return Backbone.Radio.channel("reactivates")}},
task:{configurable:!0,enumerable:!0,get:function(){return this._task},set:function(a){this._task=a;this.trigger("change")}},available:{configurable:!0,enumerable:!0,get:function(){return this.task&&this.task.id}},results:{configurable:!0,enumerable:!0,get:function(){return this._results?this._results:this._results=new d(this.courseId)}},launcher:{configurable:!0,enumerable:!0,get:function(){if(this._launcher)return this._launcher;var c=Object.assign({reactivate_task_id:this.task.id},this.task.get("content"));
return this._launcher=(new a.ContentLauncherService(c)).getLauncher()}},panel:{configurable:!0,enumerable:!0,get:function(){var c=this;if(this._panel)return this._panel;this._panel=new a.Components.Course.NextStepsReactivateResultsPanel({model:this.results,destroyOnClose:!0});this.listenTo(this._panel,"start",function(){return c.clearStart()});this.listenTo(this._panel,"close",function(){return c.close()});return this._panel}}});a.ReactivateManager=h}(Osp,Marionette);
(function(a){var c=function(c){this.course=(void 0===c?null:c)||a.currentCourse};c.prototype.storeVisit=function(){var c=[this.courseId].concat($jscomp.arrayFromIterable(this.visited));a.profile.saveProperty("visited_courses",c)};$jscomp.global.Object.defineProperties(c.prototype,{courseId:{configurable:!0,enumerable:!0,get:function(){return this.course.id}},visited:{configurable:!0,enumerable:!0,get:function(){return a.profile.getProperty("visited_courses")||[]}},alreadyVisited:{configurable:!0,
enumerable:!0,get:function(){return this.visited.includes(this.courseId)}}});a.VisitedCoursesService=c})(Osp);
(function(a){var c=function(a){this.url=new URL(a)};c.prototype.normalize=function(a){return a.replace(/^(www\.)/,"")};$jscomp.global.Object.defineProperties(c.prototype,{locationHost:{configurable:!0,enumerable:!0,get:function(){return this.normalize(window.location.host)}},host:{configurable:!0,enumerable:!0,get:function(){return this.normalize(this.url.host)}},external:{configurable:!0,enumerable:!0,get:function(){return this.host!=this.locationHost}}});a.UrlService=c})(Osp);
!function(a){a.ContentLauncher=a.ContentLauncher||{};var c=["student_assignment_id","level_up_test_id","reactivate_task_id","reflect_id"],f=a.ContentLauncherService.Launcher.extend({template:'\n      <div class="learningObject">\n        <button type="button" class="button button--icon button--close" aria-label="'+I18n.t("ui.common.close")+'">\n          <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__streamline-close"></use>\n          </svg>\n        </button>\n        <iframe></iframe>\n      </div>',
initialize:function(){a.ContentLauncherService.Launcher.prototype.initialize.apply(this,arguments);this._lockScroll=!0;this._pauseOnClose=this._hideUntilLoaded=!1},$body:function(){return window==top?$("body"):$(top.document).contents().find("body")},$container:function(){return this.$_container?this.$_container:this.$_container=$(this.template).appendTo(this.$body())},getUrl:function(a){a=void 0===a?null:a;return this.content.get("interactive_link")+"?"+$.param(this.getQueryParams(a))},getTestIdParam:function(){var a=
this,d=c.find(function(c){return a.content.has(c)}),e={};return d?(e[d]=this.content.get(d),e):{}},getQueryParams:function(a){a=void 0===a?null:a;var c={};"undefined"!==typeof a&&(c.bookmark=a);return Object.assign(c,this.getTestIdParam())},$iframe:function(){return this.$container().find("iframe")},$button:function(){return this.$container().find("button")},prepare:function(a){var c=this;if(this._prepared)return this;this._prepared=!0;return new Promise(function(d){c._hideUntilLoaded&&c.hide();return c.$iframe().attr("src",
a||c.getUrl()).on("load",function(){return d(c)})})},disableLockScroll:function(){this._lockScroll=!1;return this},lockScroll:function(){this._lockScroll&&$("body").addClass("learningObject--lockScroll")},restoreScroll:function(){this._lockScroll&&$("body").removeClass("learningObject--lockScroll")},hideUntilLoaded:function(){this._hideUntilLoaded=!0;return this},pauseOnClose:function(){this._pauseOnClose=!0;return this},startListeningToMessages:function(){this.onMessage=this.onMessage.bind(this);
window.addEventListener("message",this.onMessage)},stopListeningToMessages:function(){var a=this;_.defer(function(){return window.removeEventListener("message",a.onMessage)})},start:function(){var a=this;if(this._paused)return this.resume();this.lockScroll();this.startListeningToMessages();this.$button().on("click",function(){return _.defer(a.close.bind(a))});this.show()},show:function(){this.$container().css("visibility","visible");this.$iframe().css("visibility","visible")},hide:function(){this.$container().css("visibility",
"hidden");this.$iframe().css("visibility","hidden")},launch:function(a){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return c.track(),d.yield(c.prepare(a),2);c.start();d.jumpToEnd()})},launchPage:function(a){this.launch(this.getUrl(a))},finish:function(){this._submitted&&(this.trigger("submitted",this._data),this.content.trigger("submitted",this._data));this._screens&&(new e(this.content,this._screens)).save();this.trigger("finished");this.cleanUp()},
cleanUp:function(){this.$container().remove();this.$_container=null;this.stopListeningToMessages();this.stopListening();this.restoreScroll()},close:function(){try{if(this._pauseOnClose)return this.pause();this.trigger("close");this.finish()}catch(h){}},pause:function(){this._paused=!0;this.hide()},resume:function(){this._paused=!1;this.show()},isSubmittedMessage:function(a){try{return"response"===a.type&&a.data.submitted}catch(k){return!1}},isLOSubmitWithoutAPIBackendMessage:function(a){var c=a.data;
return"lo:submit"===a.type&&!c.useAPI},isFinishMessage:function(a){return"lo:finish"===a.type},isInteractionStart:function(a){return"interaction:start"===a.type},isAnswers:function(a){return"lo:answers"===a.type},onMessage:function(a){a=a.data;try{if(this.isInteractionStart(a))return this.trigger("interaction:start");if(this.isFinishMessage(a))return this.finish();if(this.isSubmittedMessage(a))return this._data=a.data,this._submitted=!0;if(this.isAnswers(a))return this._screens=a.data;if(this.isLOSubmitWithoutAPIBackendMessage(a)){var c=
a.data;this._submitted=!0;this._data=c}}catch(l){}}}),e=function(a,c){this.content=a;this.screens=c;this.attempts=5};e.prototype.extract=function(a){return a.answerIds?a.answerIds.flat().map(function(a){return a.answerIds}):[]};e.prototype.save=function(){var a=this;this.isATest&&(this.attempts--,fetch(this.url,this.options).then(function(a){if(!a.ok)throw Error();}).catch(function(){0!=a.attempts&&setTimeout(function(){return a.save()},2E3)}))};$jscomp.global.Object.defineProperties(e.prototype,
{url:{configurable:!0,enumerable:!0,get:function(){return"/api/v2/courses/"+a.currentCourse.id+"/test_answers"}},token:{configurable:!0,enumerable:!0,get:function(){return $('meta[name="csrf-token"]').attr("content")}},data:{configurable:!0,enumerable:!0,get:function(){var a=this;return this.screens.map(function(c){return{uid:c.uid,answers:a.extract(c)}})}},headers:{configurable:!0,enumerable:!0,get:function(){return{"Content-Type":"application/json","X-CSRF-Token":this.token}}},body:{configurable:!0,
enumerable:!0,get:function(){var a={};return a.data=this.data,a[this.testIdName]=this.content.get(this.testIdName),a}},isATest:{configurable:!0,enumerable:!0,get:function(){return!!this.testIdName}},testIdName:{configurable:!0,enumerable:!0,get:function(){var a=this;return this._testIdName?this._testIdName:this._testIdName=c.find(function(c){return a.content.has(c)})}},options:{configurable:!0,enumerable:!0,get:function(){return{method:"POST",headers:this.headers,body:JSON.stringify(this.body)}}}});
var d=function(a){this._content=a;this._loaded=this._compiled=!1};d.prototype.request=function(a){this.requests[a]+=1};d.prototype.compiled=function(){this._compiled=!0;this.compiling.stop();return this};d.prototype.loaded=function(){this._loaded=!0;this.loading.stop();this.log();return this};d.prototype.stop=function(){this.compiling.stop();this.loading.stop();this.log();return this};d.prototype.log=function(){return a.logger.log("compiler",this.payload)};$jscomp.global.Object.defineProperties(d.prototype,
{requests:{configurable:!0,enumerable:!0,get:function(){return this._requests?this._requests:this._requests={not_compiled:0,compiling:0,compiled:0,error:0}}},compiling:{configurable:!0,enumerable:!0,get:function(){return this._compiling?this._compiling:this._compiling=new a.Profiler}},loading:{configurable:!0,enumerable:!0,get:function(){return this._loading?this._loading:this._loading=new a.Profiler}},payload:{configurable:!0,enumerable:!0,get:function(){return{loaded:this._loaded,compiled:this._compiled,
content_id:this._content.id,loading_time:this.loading.time,compiling_time:this.compiling.time,requests:this.requests}}}});f.Compiled=f.extend({onceCompiled:function(){var a=this;return new Promise(function(c,d){var e=function(){var e=a.content.get("compiling_status");return"error"==e?(d(),!0):"compiled"==e?(c(),!0):!1};e()||(a.interval=setInterval(function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(a.content.checkCompilingStatus(),2);
c=d.yieldResult;a.setRequestLog(c);e()&&clearInterval(a.interval);d.jumpToEnd()})},1E3))})},setRequestLog:function(a){try{this.logger().request(a.compiling_status)}catch(k){console.log("Can not set request log")}},settings:function(){return a.store.get(a.Store.TYPE.SETTINGS).get().get("compiled_content")},logger:function(){return this._logger?this._logger:this._logger=new d(this.content)},settingsTimeout:function(){try{return this.settings().timeout||10}catch(h){return 10}},prepare:function(){var c=
this,d=this.logger();return new Promise(function(e,f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return d.compiling.start(),c.timeout=setTimeout(function(){d.stop();c.cleanUp();f()},1E3*c.settingsTimeout()),h.setCatchFinallyBlocks(2),h.yield(c.onceCompiled(),4);case 4:d.compiled();h.leaveTryBlock(3);break;case 2:return h.enterCatchBlock(),c.cleanUp(),f(),d.stop(),h.return();case 3:d.loading.start(),c.listenTo(c,"interaction:start",function(){c.stopListeningToMessages();
clearTimeout(c.timeout);d.loaded();e()}),c.startListeningToMessages(),a.ContentLauncher.LearningObject.prototype.prepare.call(c),h.jumpToEnd()}})})},cleanUp:function(){clearTimeout(this.timeout);clearInterval(this.interval);a.ContentLauncher.LearningObject.prototype.cleanUp.call(this)}});a.ContentLauncher.LearningObject=f}(Osp);
Osp.state=function(){var a={course:null,lens:null,filter:null,structure:null,group:null,node:null,hideDescriptions:null,page:null,savedTree:null,search:{type:"",source:"",query:"",used_as:""},savedSearch:{type:"",source:"",query:"",used_as:""}},c={course:null,lens:null,filter:null,structure:null,studentAssignment:null,group:null,node:null,hideDescriptions:null,savedTree:null,page:null,search:{type:"",source:"",query:"",used_as:""},savedSearch:{type:"",source:"",query:"",used_as:""}};return _.extend({},
{get:function(a){return c},setStates:function(a){if(_.isObject(a)){var c=this;_.each(_.keys(a),function(d){c.setState(d,a[d])})}},reset:function(f){c=_.extend({},a);var e={lens:null,filter:null,group:null,structure:null,content:null,page:null,savedTree:null,searchTerms:{type:"",source:"",query:"",used_as:""}};Osp.currentCourse&&(Osp.currentCourse.attributes.currentState=_.extend({},e));f&&(f.attributes.currentState=_.extend({},e));Osp.currentStructure=null;Osp.currentNode=null;Osp.currentCourse=null},
getState:function(a){return c[a]},getOldState:function(a){var c=null;switch(a){case "lens":case "structure":case "group":c=null===this.getState(a)?c:this.getState(a).id;break;case "filter":c=null===this.getState(a)?c:this.getState(a).get("name");break;default:c=this.getState(a)}return c},setState:function(a,e,d){var f=null,k=_.extend({},this.getSearch());if(null!==e&&"null"!==e)if(_.isObject(e))void 0!=e&&(f=e);else switch(a){case "lens":f=_.isObject(e)?e:this.getCourse().lenses().get(e);break;case "filter":f=
this.getLens().filters().firstWith({name:e});break;case "structure":break;case "group":break;default:void 0!=e&&(f=e)}c[a]=f;d||this.markCollectionAsUnfetched(k);this.updateOldState(a,f);return this},existState:function(a){return void 0!==c[a]},hasState:function(f){return this.existState(f)&&c[f]!==a[f]},resetState:function(c){return this.setState(c,a[c])},getCourse:function(){return this.getState("course")},setCourse:function(a){return this.setState("course",a)},getLens:function(){return this.getState("lens")},
setLens:function(a){return this.setState("lens",a)},getFilter:function(){return this.getState("filter")},setFilter:function(a){return this.setGroup(null).setStructure(null).setPage(1).setState("filter",a)},getStructure:function(){return this.getState("structure")},setStructure:function(a){this.setNode(a);return this.setState("structure",a)},getPage:function(){return this.getState("page")},setPage:function(a){return this.setState("page",a)},setStudentAssignment:function(a){return this.setState("studentAssignment",
a)},getStudentAssignment:function(){return this.getState("studentAssignment")},setNode:function(a){return this.setState("node",a)},getNode:function(){return this.getState("node")},getGroup:function(){return this.getState("group")},setGroup:function(a){this.setNode(a);return this.setState("group",a)},getSearch:function(){return this.getState("search")},setSearch:function(a,c){return this.setState("search",_.extend({},a),c)},setSearchTerms:function(a){return this.setState("search",_.extend(this.getSearch(),
a))},saveSearch:function(){return this.setState("savedSearch",_.extend({},this.getSearch()))},resetSearch:function(c,e){return this.setSearch(_.extend({},a.search,c||{}),e)},setSearchTerm:function(a,e){var d=_.extend({},this.getSearch());c.search[a]=e;this.markCollectionAsUnfetched(d);return this},getSearchTerm:function(a){return this.getSearch()[a]},resetSearchTerm:function(c){return this.setSearchTerm(c,a.search[c])},restoreSearch:function(){return this.setSearch(this.getSavedSearch()).resetSavedSearch()},
getSavedSearch:function(){return this.getState("savedSearch")},getSavedSearchTerm:function(a){return this.getSavedSearch()[a]},restoreSearchTerm:function(a){return this.setSearchTerm(a,this.getSavedSearchTerm(a)).resetSavedSearchTerm(a)},setSavedSearch:function(a){return this.setState("savedSearch",_.extend({},a))},setSavedSearchTerms:function(a){return this.setState("savedSearch",_.extend(this.getSavedSearch(),a))},resetSavedSearch:function(){return this.setSavedSearch(a.search)},resetSavedSearchTerm:function(c){return this.setSavedSearchTerms({term:a.search[c]})},
getStudent:function(){return this.getState("student")},setStudent:function(a){this.setState("student",a)},markCollectionAsUnfetched:function(a){var c=this.getSearch();a=omit(a,"query");var d=omit(c,"query");this.isSearch(c)||_.isEqual(a,d)||!this.checkSearchTermsChanged(d,a)||(c=this.getLens(),c.isGlobal()?c._filters.refreshRelatedCollections():(c=this.getCourse(),c.lenses().eachRecursive(function(a){a._filters.refreshRelatedCollections()}),c._structures.refreshRelatedCollections(),c._groups.refreshRelatedCollections()));
return this},isSearch:function(a){return""!==a.query},checkSearchTermsChanged:function(a,c){var d=diff(a,c),e=_.keys(d);d=e.length;e=e[0];return 1<d||1==d&&"source"!=e||1==d&&"source"==e&&!this.filterChanged(a,c)},filterChanged:function(a,c){c=c.source;var d=["oup",""];return!_.include(d,a.source)||!_.include(d,c)},updateOldState:function(a,c){switch(a){case "course":Osp.currentCourse=c;break;case "lens":Osp.currentCourse&&(Osp.currentCourse.attributes.currentState[a]=null!=c?c.id:null);break;case "filter":Osp.currentCourse&&
(Osp.currentCourse.attributes.currentState[a]=null!=c?c.get("name"):null);break;case "structure":Osp.currentNode=this.getState(a);Osp.currentStructure=this.getState(a);Osp.currentCourse&&(Osp.currentCourse.attributes.currentState[a]=null!=c?c.id:null);break;case "group":Osp.currentNode=this.getState(a);Osp.currentCourse&&(Osp.currentCourse.attributes.currentState[a]=null!=c?c.id:null);break;case "node":Osp.currentNode=this.getState(a);Osp.currentNode&&"Structure"==Osp.currentNode.get("clazz")?(Osp.currentStructure=
this.getState(a),Osp.currentCourse&&(Osp.currentCourse.attributes.currentState.structure=null!=c?c.id:null)):Osp.currentCourse&&(Osp.currentCourse.attributes.currentState.group=null!=c?c.id:null);break;default:Osp.currentCourse&&(Osp.currentCourse.attributes.currentState[a]=c)}}})}();
(function(a){a.GroupPolling=function(){var a=function(a){a=a||{};this._course=a.course;this._group=a.group};_(a.prototype).extend(Backbone.Events,{url:function(){var a=this._course&&this._course.id,c=this._group&&this._group.id;return a&&c?this._urlForCourseAndGroup(a,c):this._urlForCourse(a)},check:function(){var a={},c=this._getMaxGroupUserTimestamp();_(c).isNull()||(a.last_modified=c);this._request=$.ajax({type:"get",url:this.url(),dataType:"json",noSpinner:!0,data:a}).done(_.bind(function(a){a.has_changes&&
this.trigger("changed",this._normalizeData(a))},this))},checkPeriodically:function(a){this.stopChecking();this._timerId=setInterval(_.bind(this.check,this),a)},stopChecking:function(){this._request&&this._request.abort();this._timerId&&clearInterval(this._timerId);this._request=this._timerId=null},_getMaxGroupUserTimestamp:function(){return(this._group||this._course).maxGroupUserTimestamp()},_urlForCourse:function(a){return _("%s/%s/groups/changes").sprintf("/api/courses",encodeURIComponent(a))},
_urlForCourseAndGroup:function(a,c){return _("%s/%s/groups/%s/changes").sprintf("/api/courses",encodeURIComponent(a),encodeURIComponent(c))},_normalizeData:function(a){return _(a).reduce(function(a,c,f){a[_(f).camelize()]=c;return a},{})}});return a}()})(Osp);"use strict";Osp.replayable={};
Osp.replayable.actionList=function(){var a,c,f,e,d=function(){this.reset()},h=function(c){var d=[],e=_.uniq(_(a).map(function(a){return a.model().cid}));_(e).each(function(a){c.children().getRecursiveByCid(a)&&d.push(a)});return d},k=function(c){a=_(a).reject(function(a){if(a.model().cid==c)return!0})};d.prototype.push=function(c){if(c instanceof Osp.replayable.RemoveAction){var d=c.model();k(d.cid);d=h(d);for(var e=d.shift();e;)k(e),e=d.shift()}a.push(c);return this};d.prototype.playAll=function(d){var e=
a.shift();d&&_.isFunction(d)&&(c=d);e?$.when(e.play()).done(_.bind(this.playAll,this)).fail(_.bind(function(d,e){a=[];f=e;c(f)},this,e)):c&&c(f);return this};d.prototype.errors=function(){return f};d.prototype.isEmpty=function(){return 0==a.length};d.prototype.addNewNode=function(a){e.push(a);return this};d.prototype.getNewNode=function(a){return _(e).find(function(c){return c.cid===a})};d.prototype.reset=function(){a=[];e=[];f=c=null;return this};d.prototype.reject=function(a){k(a.cid);return this};
return new d}();Osp.replayable.Action=function(){var a=function(){this._dfd=$.Deferred();this.initialize.apply(this,arguments)};a.prototype.initialize=function(a){this._model=a};a.prototype.model=function(){return this._model};a.prototype.options=function(){return{wait:!0,success:this._dfd.resolve,error:_.bind(function(a,f){this._dfd.reject(f.responseText)},this)}};a.prototype.play=function(){this._model.save(null,this.options());return this._dfd.promise()};return a}();
Osp.replayable.UpdateAction=function(){return _.inherits(Osp.replayable.Action,{initialize:function(a,c){Osp.replayable.Action.prototype.initialize.apply(this,arguments);this._actionList=c},play:function(){if(this._actionList.getNewNode(this._model.cid))this._dfd.resolve();else return this._model.save(void 0,this.options()),this._dfd.promise()}})}();
Osp.replayable.AddAction=function(){return _.inherits(Osp.replayable.Action,{initialize:function(a,c){Osp.replayable.Action.prototype.initialize.apply(this,arguments);this._actionList=c},play:function(){if(this._model.collection){if(_.isString(this._model.get("parent_id"))&&"c"===this._model.get("parent_id").charAt(0)){var a=this._actionList.getNewNode(this._model.get("parent_id"));if(!a){this._dfd.resolve();return}this._model.set("parent_id",a.id)}this._model.save(void 0,_.extend(this.options(),
{success:_.bind(function(){this._actionList.addNewNode(this._model);this._dfd.resolve()},this)}));return this._dfd.promise()}this._dfd.resolve()}})}();
Osp.replayable.RemoveAction=function(){return _.inherits(Osp.replayable.Action,{initialize:function(a,c){Osp.replayable.Action.prototype.initialize.apply(this,arguments);this._collection=a.collection},play:function(){if(this._model.id){this._model.collection=this._collection;var a=this._model;a instanceof Osp.Group?Osp.state.getState("group")&&a.id==Osp.state.getState("group").id&&Osp.state.setState("group",null):Osp.state.getState("structure")&&a.id==Osp.state.getState("structure").id&&Osp.state.setState("structure",
null);if(a=Osp.state.getState("lens"))Osp.state.setState("filter",a.filters().first()),a.isGlobal()?Osp.vent.trigger("global:"+a.get("type")+":filter:show",null,a.get("name"),a.filters().first().get("name"),1):Osp.vent.trigger("course:"+a.get("type")+":filter:show",Osp.state.get("course").id,a.get("name"),a.filters().first().get("name"),1);this._model.destroy(this.options());return this._dfd.promise()}this._dfd.resolve()}})}();
Osp.Tracking=function(){var a={},c=null;a={getChannel:function(){return c},notify:function(a,c){var d=a.camelize();_.isUndefined(this.Notifier[d])?this.Notifier.notify(a,c):this.Notifier[d].notify(c)}};Osp.app.on("before:start",function(){c=Backbone.Radio.channel("tracking");c.reply("notify",a.notify,a)});return a}();Osp.Tracking.Notifier=function(){return{notify:function(a,c){$.ajax({type:"post",url:"/api/tracking",data:{event:a,data:c},noSpinner:!0})}}}();
Osp.Tracking.Notifier.Content=function(){return{getData:function(a){return _.extend({content_id:a.id},Osp.state.getLens()&&{lens_id:Osp.state.getLens().id})},notify:function(a){Osp.Tracking.Notifier.notify("content",this.getData(a))}}}();"use strict";
!function(a){_.extend(a.View.prototype,{preventBlank:function(a,f){return""===a||"undefined"===a?"undefined"!==typeof f?f:"-":a},humanizeDate:function(a,f){return""===a||"undefined"===a?"undefined"!==typeof f?f:"-":humanizeJsonDate(a)},serverDate:function(a,f){return""===a||"undefined"===a?"undefined"!==typeof f?f:"-":formatJsonDate(a,I18n.t("ui.date.long"))},can:function(a,f){return Osp.can(a,f)},templateContext:_.extend({preventBlank:function(){return a.View.prototype.preventBlank.apply(this,arguments)},
humanizeDate:function(){return a.View.prototype.humanizeDate.apply(this,arguments)},serverDate:function(){return a.View.prototype.serverDate.apply(this,arguments)},can:function(){return a.View.prototype.can.apply(this,arguments)}},a.View.prototype.templateContext),onRender:function(){var a=this;this.$("*[data-restricted]").each(function(){var c=$(this);(c=c.data("action")&&c.data("permissions")&&!a.can(c.data("action"),c.data("permissions")))||(c=$(this),c=c.data("profile")&&!_.include(c.data("profile").split(","),
Osp.profile.get("type")));c&&$(this).remove()})}});Osp.View=a.View;Osp.CollectionView=a.CollectionView;Osp.CompositeView=a.CompositeView}(Marionette);"use strict";
Osp.Observer=function(){var a=function(a){this._activeAttr=a._activeAttr?a._activeAttr:"active";this.bindEvents=_.bind(this.bindEvents,a);this.onClickSelect=_.bind(this.onClickSelect,a);this.onChange=_.bind(this.onChange,a);this.initialize&&_.isFunction(this.initialize)&&this.initialize.apply(this,arguments)};a.prototype.bindEvents=function(){throw Error("Please implement method!");};a.prototype.onChange=function(){throw Error("Please implement method!");};a.prototype.onClickSelect=function(){throw Error("Please implement method!");
};return a}();
Osp.NavigationObserver=function(){var a=function(){this.model.set(this._activeAttr,!1)},c=function(a,c,d){this.model.set(this._activeAttr,this.model.get(this instanceof Osp.FilterView?"name":"id")==d)};return _.inherits(Osp.Observer,{initialize:function(a){null===Osp.state.getGroup()&&a.model instanceof Osp.Group&&a.model.set({expanded:a.model.onFirstLevel()});null===Osp.state.getStructure()&&a.model instanceof Osp.Structure&&a.model.set({expanded:a.model.onFirstLevel()})},bindEvents:function(){this.listenTo(Osp.vent,"course:"+
this._lens.get("type")+":filter:show",_.bind(this instanceof Osp.FilterView?c:a,this),this);this.listenTo(Osp.vent,"course:"+this._lens.get("type")+":node:show",_.bind(this instanceof Osp.FilterView?a:c,this),this);this.listenTo(Osp.vent,"global:"+this._lens.get("type")+":filter:show",_.bind(this instanceof Osp.FilterView?c:a,this),this);this.listenTo(Osp.vent,"global:"+this._lens.get("type")+":node:show",_.bind(this instanceof Osp.FilterView?a:c,this),this)},onClickSelect:function(a){a.stopPropagation();
a.preventDefault();var c=this.model;a=c.get(this instanceof Osp.FilterView?"name":"id");c.get("name");var d=c.get("clazz"),f=this._lens,k=f.get("name"),l=f.get("type");"Structure"==d?Osp.state.setStructure(c):"Group"==d&&Osp.state.setGroup(c);if("Filter"==d&&c.get("name").match(/my/))"oup"!=Osp.state.getSearchTerm("source")&&""!=Osp.state.getSearchTerm("source")||Osp.state.saveSearch(),Osp.state.setSearchTerm("source",Osp.profile.get("id"));else if(Osp.state.getSearchTerm("source")==Osp.profile.get("id")||
"other"==Osp.state.getSearchTerm("source"))Osp.state.restoreSearchTerm("source"),Osp.state.resetSavedSearchTerm("source");Osp.vent.trigger("search:clean");this instanceof Osp.LegacyTreeView&&this.model.set(this._expandedAttr,!(this.model.get(this._expandedAttr)&&this.model.get(this._activeAttr)));c.get(this._activeAttr)||(f.isGlobal()?Osp.vent.trigger("global:"+l+":"+(this instanceof Osp.FilterView?"filter":"node")+":show",null,k,a):(c=c.course().get("id"),Osp.vent.trigger("course:"+l+":"+(this instanceof
Osp.FilterView?"filter":"node")+":show",c,k,a)),this._lens.hasPageRangeNavigator()&&Osp.profile.isTeacher()&&Osp.currentCourse.hasPageRangeNavigator()&&null==Osp.currentCourse.getState("structure")&&Backbone.Radio.channel("course.lens").request("title:book:show",new Osp.Book))},onChange:function(a){this.$el.toggleClass("active",this.model.get(this._activeAttr))}})}();
Osp.SelectionObserver=function(){return _.inherits(Osp.Observer,{initialize:function(a){a.model.set(this._activeAttr,!1,{silent:!0})},bindEvents:function(){this.listenTo(Osp.vent,"course:selection:node:select",this._observer.onNodeSelected.bind(this));this.listenTo(Osp.vent,"course:selection:node:deselect",this._observer.onNodeDeselect.bind(this))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();var c=this.model;a=c.course().get("id");var f=this._lens.get("name");c=c.get("id")||c;
this.model.set(this._expandedAttr,!(this.model.get(this._expandedAttr)&&this.model.get(this._activeAttr)));Osp.vent.trigger("course:selection:node:select",a,f,c)},onNodeSelected:function(a,c,f){_.isObject(f)?this.model.set(this._activeAttr,this.model===f):this.model.set(this._activeAttr,this.model.get("id")==f)},onNodeDeselect:function(){this.model.set(this._activeAttr,!1)},onChange:function(a){this.$el.toggleClass("active",this.model.get(this._activeAttr))}})}();
Osp.GlobalSelectionObserver=function(){return _.inherits(Osp.SelectionObserver,{bindEvents:function(){this.listenTo(Osp.vent,"global:selection:node:select",this._observer.onNodeSelected.bind(this));this.listenTo(Osp.vent,"global:selection:node:deselect",this._observer.onNodeDeselect.bind(this))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();this.model.set(this._expandedAttr,!(this.model.get(this._expandedAttr)&&this.model.get(this._activeAttr)));Osp.vent.trigger("global:selection:node:select",
this.model)},onNodeSelected:function(a){this.model.set(this._activeAttr,this.model.id&&this.model.id===a.id||this.model.cid===a.cid)}})}();
Osp.CheckboxSelectionObserver=function(){var a=function(a){0<this.collection.length&&(this.expand(),this.collection.each(function(c){c.set(this._activeAttr,!0,a);c.set(this._disabledAttr,!1,a)},this))},c=function(){var a=this.model.collection&&this.model.collection.parent();a&&d.call(this)&&(a.set(this._disabledAttr,!1),this.activateParentModel&&a.set(this._activeAttr,!0))},f=function(){0<this.collection.length&&this.collection.each(function(a){a.set("isDeactivatingChildren",0!=a.get(this._activeAttr));
a.set(this._activeAttr,!1)},this)},e=function(){return this.model.collection.all(function(a){return this.model==a?!0:a.get(this._activeAttr)},this)},d=function(){return this.model.collection.all(function(a){return this.model==a?!0:a.get(this._activeAttr)&&!a.get(this._disabledAttr)},this)},h=function(){return this.model.collection.all(function(a){return this.model==a?!0:!a.get(this._activeAttr)},this)};return _.inherits(Osp.Observer,{initialize:function(a){a.model.set(this._activeAttr,!1);a._disabledAttr=
this._activeAttr+"disabled";a.model.set(a._disabledAttr,!1);a.checkboxSelector='input[value="'+a.model.get("id")+'"]';a.$el.on("change",a.checkboxSelector,_.bind(this.onChangeCheckbox,a));if(_.isUndefined(a.activateParentModel)||_.isNull(a.activateParentModel))a.activateParentModel=!0;if(_.isUndefined(a.deactivateParentModel)||_.isNull(a.deactivateParentModel))a.deactivateParentModel=!0},bindEvents:function(){this.listenTo(this.model,"change:"+this._activeAttr,this._observer.onChangeActive.bind(this));
this.listenTo(this.model,"change:"+this._disabledAttr,this._observer.onChangeDisabled.bind(this));this.listenTo(Osp.vent,"course:selection:node:disable",this._observer.disableNode.bind(this));this.listenTo(Osp.vent,"course:selection:node:deactivate",this._observer.deactivateNode.bind(this));this.listenTo(Osp.vent,"course:selection:node:activate",this._observer.activateNode.bind(this))},activateNode:function(a){this.model.get("id")==a&&(this.model.set(this._activeAttr,!0),this.model.set(this._disabledAttr,
!1))},disableNode:function(a){this.model.get("id")==a&&this.model.set(this._disabledAttr,!0)},deactivateNode:function(a){this.model.get("id")==a&&(this.model.set(this._activeAttr,!1),this.model.set(this._disabledAttr,!1))},onChange:function(a){},onChangeCheckbox:function(){this.model.set(this._activeAttr,this.$(this.checkboxSelector).prop("checked"))},onChangeActive:function(){var d=this.model.get(this._activeAttr),l=this.model.collection&&this.model.collection.parent();this.model.get(this._disabledAttr);
d?(this.$(this.checkboxSelector).prop("checked",!0),Osp.vent.trigger("course:selection:node:select",this.model.get("id")),a.call(this),c.call(this)):(this.$(this.checkboxSelector).prop("checked",!1),Osp.vent.trigger("course:selection:node:deselect",this.model),!this.model.get("isDeactivatingChildren")&&l&&this.deactivateParentModel&&(e.call(this)?l.set(this._disabledAttr,!0):h.call(this)&&(l.set(this._disabledAttr,!1),l.set(this._activeAttr,!1))),this.model.set("isDeactivatingChildren",!1),f.call(this))},
onChangeDisabled:function(){var d=this.model.get(this._disabledAttr),e=this.model.collection&&this.model.collection.parent();d?(this.$(this.checkboxSelector).prop("disabled",!0),e&&e.get(this._activeAttr)&&e.set(this._disabledAttr,!0)):(this.$(this.checkboxSelector).prop("disabled",!1),this.model.get(this._activeAttr)&&(Osp.vent.trigger("course:selection:node:select",this.model.get("id")),a.call(this),c.call(this)))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();this.$(this.checkboxSelector).click();
(this.model.get(this._expandedAttr)||this.model.get("leaf"))&&this.model.get(this._disabledAttr)?this.model.set(this._disabledAttr,!1):this.model.set(this._expandedAttr,!this.model.get(this._expandedAttr))}})}();
Osp.CheckboxSelectionCheckedObserver=function(){return _.inherits(Osp.CheckboxSelectionObserver,{initialize:function(a){a.model.set(this._activeAttr,!1);a.checkboxSelector='input[value="'+a.model.get("id")+'"]';a.$el.on("change",a.checkboxSelector,_.bind(this.onChangeCheckbox,a))},bindEvents:function(){this.listenTo(this.model,"change:"+this._activeAttr,this._observer.onChangeActive.bind(this));this.listenTo(Osp.vent,"course:selection:node:deactivate",this._observer.deactivateNode.bind(this));this.listenTo(Osp.vent,
"course:selection:node:activate",this._observer.activateNode.bind(this))},onChangeCheckbox:function(){this.model.set(this._activeAttr,this.$(this.checkboxSelector).prop("checked"))},onChangeActive:function(){var a=this.model.get(this._activeAttr);this.model.collection&&this.model.collection.parent();if(a)for(this.$(this.checkboxSelector).prop("checked",!0),Osp.vent.trigger("global:selection:node:select",this.model),a=this.model,a=a.collection.parent();a;)a.set(this._expandedAttr,!0),a=a.collection.parent();
else this.$(this.checkboxSelector).prop("checked",!1),Osp.vent.trigger("global:selection:node:deselect",this.model)}})}();
Osp.GroupSelectionCheckedObserver=function(){return _.inherits(Osp.CheckboxSelectionCheckedObserver,{onChangeCheckbox:function(){var a=this,c;Osp.CheckboxSelectionCheckedObserver.prototype.onChangeCheckbox.apply(this,arguments);if(this.$(this.checkboxSelector).prop("checked"))this.model.children().eachRecursive(function(c){c.set(a._activeAttr,!0)});else{for(c=this.model.parent();c;)c.set(this._activeAttr,!1),c=c.parent();this.model.children().eachRecursive(function(c){c.set(a._activeAttr,!1)})}}})}();
(function(){Backbone.Marionette.Renderer.render=function(a,c){var f=a;_.isString(a)&&(f=window.JST[a.replace(/^(.*?)(?:-layout)?-template$/,"$1")]);if(!f)throw"Template '"+a+"' not found!";return f(c)};_.templateSettings={interpolate:/\{\[([\s\S]+?)\]\}/g,escape:/\{\{([\s\S]+?)\}\}/g,evaluate:/\{%([\s\S]+?)%\}/g}})();
!function(){var a=function(a,f){var c=$("<div></div>",{"class":"pull-left"});a=$("<a/>",{href:"#","class":"btn dropdown-toggle","data-toggle":"dropdown"}).text(I18n.t("ui.common."+a)+" ");var d=$("<span/>",{"class":"caret"}),h=$("<ul/>",{"class":"dropdown-menu"});f.each(function(a,c){$("<li/>").append($(c).removeClass("btn")).appendTo(h)});return c.append(a.append(d)).append(h)};Osp.ActionView=Osp.View.extend({tagName:"a",className:"btn",template:"common/list/action-template",events:{click:"onClickAction"},
modelEvents:{"change:toggled":"onChangeToggled","change:enabled":"render"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);var a=this.model.get("event");this.model.get("toggle")&&(this.listenTo(Osp.vent,a+":on",this.activate.bind(this)),this.listenTo(Osp.vent,a+":off",this.deactivate.bind(this)))},activate:function(){this.model.set({toggled:!0})},deactivate:function(){this.model.set({toggled:!1})},onClickAction:function(a){a.preventDefault();if(this.model.get("enabled")){a=
this.model.get("event");if(this.model.get("toggle")){var c=!this.model.get("toggled");this.model.set({toggled:c})}Osp.vent.trigger(a,this.model.selection(),this.model.course(),this.model.lens(),this.model.targets(),this)}},onChangeToggled:function(){var a=this.model.get("event");if(this.model.get("toggle")){var f=this.model.get("toggled");Osp.vent.trigger(a+(f?":on":":off"),this.model.selection())}},onRender:function(){this.$el.attr({href:"#",tabindex:this.model.get("enabled")?0:-1}).addClass(this.model.get("name")).toggleClass("disabled",
!this.model.get("enabled")).toggleClass("active",this.model.get("toggled"));this.model.get("more")&&this.$el.addClass(this.model.get("more"));this.toggleAriaAttrs()},toggleAriaAttrs:function(){this.model.get("enabled")?this.$el.removeAttr("aria-disabled"):this.$el.attr("aria-disabled","true")}});Osp.ActionsView=Osp.CollectionView.extend({childView:Osp.ActionView,className:"actions btn-group",childViewOptions:function(a){var c={};a.get("behaviors")&&(c.behaviors=a.get("behaviors"));return c},onBeforeRender:function(){this.$el.empty()},
onRender:function(){var c=_.uniq(_(this.collection.pluck("more")).reject(function(a){return!_.isString(a)}));_.each(c,function(c){var e=this.$el.find(".btn."+c);0<e.length&&this.$el.append(a(c,e))},this)}})}();
!function(){Osp.LensView=Osp.View.extend({tagName:"li",className:"navigationTabs__item",events:{click:"onClickLens"},onClickLens:function(a){a.preventDefault();a.stopPropagation()},isLensDisabled:function(){return!this.model.get("available")||!this.templateContext.can("show","lenses/"+this.model.get("type"))},canViewDisabledLenses:function(){return this.templateContext.can("show","lenses/disabled")},onRender:function(){this.model.get("active")?(this.$el.addClass("navigationTabs__item--active"),this.$el.find("span").attr("role",
"heading").attr("aria-level","3")):(this.$el.removeClass("navigationTabs__item--active"),this.$el.find("span").removeAttr("role aria-level"));this.isLensDisabled()&&(this.canViewDisabledLenses()?this.$el.addClass("navigationTabs__item--disabled"):this.$el.addClass("hidden"))}});Osp.LensesView=Osp.CollectionView.extend({tagName:"ul",className:"navigationTabs navigationTabs--primary",childView:Osp.LensView})}();"use strict";
Osp.FilterView=Osp.View.extend({tagName:"li",template:"common/filter-template",events:{"click a":"onClickSelect"},modelEvents:{change:"render"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this._lens=this.options.lens||null;this._activeAttr="active";this._observer=new Osp.NavigationObserver(this);this._observer.bindEvents()},onClickSelect:function(a){this._observer.onClickSelect.call(this,a)},onRender:function(){this.$el.toggleClass("active",this.model.get(this._activeAttr))}});
Osp.FiltersView=Osp.CollectionView.extend({childView:Osp.FilterView,tagName:"ul",className:"nav nav-list",initialize:function(){Osp.CollectionView.prototype.initialize.apply(this,arguments);this._lens=this.options.lens||null},buildChildView:function(a,c){return new c({model:a,lens:this._lens})}});
!function(){Osp.FormView=Osp.View.extend({prependFieldNameOnError:!0,rawErrorFor:[],events:{"click input[type=submit]":"onClickSubmit","keypress input":"onKeyPressed","keypress textarea":"onKeyPressed"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this._modelBinder=new Backbone.ModelBinder},onRender:function(){Osp.View.prototype.onRender.apply(this,arguments);this.model&&this._modelBinder.bind(this.model,this.el,this._modelBindings)},onDestroy:function(){this._modelBinder.unbind()},
onKeyPressed:function(a){13==a.which&&this._modelBinder._onElChanged(a)},onClickSubmit:function(a){a.preventDefault();a.stopPropagation();var c=$(a.target);c.hasClass("disabled")||(c.addClass("disabled"),this.clearErrors(),this.model.save(null,{wait:!0,success:$.proxy(function(f,e){c.removeClass("disabled");this.onSaveSuccess(a,f,e)},this),error:$.proxy(function(f,e){c.removeClass("disabled");this.displayErrors(JSON.parse(e.responseText),void 0,this.model);this.onSaveError(a,f,e)},this)}))},onSaveSuccess:function(a,
c,f){c.set("reset_password",null)},onSaveError:function(a,c,f){},displayErrors:function(a,c,f){var e=f&&f instanceof Osp.Model&&f.paramRoot?f.paramRoot.toLowerCase():f,d=_.bind(function(a){return this.prependFieldNameOnError&&!_(this.rawErrorFor).include(a)},this),h=_.bind(function(a,c){d(a)&&(c=a.humanize(!1,e)+" "+c);return c},this);_(a).each(function(a,d){var e="[name="+d+"]";_.isFunction(c)&&(e=c(d));var f=this.$(e);0==f.length&&(f=$(e));e=f.closest(".form__group");f=e.find(".controls").filter(":first");
var k=f.find("help-block");0===k.length&&(k=$("<ul/>",{"class":"help-block"}).appendTo(f));e.addClass("error");_(a).each(function(a){$("<li/>").html(h(d,a)).appendTo(k)},this)},this)},clearErrors:function(){var a=this.$(".form__group.error");a.removeClass("error").find(".help-block").remove();a=$(".form__group.error");a.removeClass("error").find(".help-block").remove()}})}();
!function(){Osp.PreviewView=Osp.FormView.extend({behaviors:[Osp.Behaviors.Math],className:"preview fade",events:{"click .close":"onClickClose","click input[type=submit]":"onClickSubmit","change select#used_as":"togglePointsField"},getTemplate:function(){return Backbone.Marionette.getOption(this,"template")||"course/"+this._lens.get("type")+"/list/preview-template"},initialize:function(a){Osp.FormView.prototype.initialize.apply(this,arguments);this._lens=a.lens;this.listenTo(Osp.vent,"course:"+this._lens.get("type")+
":preview:on",this.show.bind(this));this.listenTo(Osp.vent,"course:"+this._lens.get("type")+":preview:off",this.hide.bind(this))},setSelected:function(a){return _(a).isEmpty()?!1:this._selected=_(a).first()},getSelected:function(){return this._selected},setModelFromSelected:function(){this.model=this.getSelected()},show:function(a){if(this.setSelected(a)){this.setModelFromSelected();var c=this;this.model.fetch({success:function(){c.render();$("img#thumbnail").attr("src",c.model.get("thumbnail_url"));
c.$("#thumbnail").imagesLoaded(function(a,e,d){this.removeAttr("style");c.$(".loader").remove();0!=d.length&&c.$("img#thumbnail").attr("src","/images/no_thumb.png")});c.$el.stop(!0,!0).show().animate({right:0,opacity:1});c.$("#content_used_as option[value="+c.model.get("used_as")+"]").attr("selected",!0)}})}},hide:function(){var a=this;this.$el.stop(!0,!0).animate({right:"-42.5%",opacity:0},1E3,function(){a.$el.hide()})},onClickClose:function(a){a.preventDefault();a.stopPropagation();Osp.vent.trigger("course:"+
this._lens.get("type")+":preview:off")},onSaveSuccess:function(){Osp.vent.trigger("course:"+this._lens.get("type")+":preview:off")},togglePointsField:function(a){$("#points_field").toggle()}});Osp.ContentPreviewView=Osp.PreviewView.extend({displayableFormat:function(){var a=this.model.get("format");return"sso content"===a?"sso":a},setModelFromSelected:function(){this.model=this.getSelected().clone()},onSaveSuccess:function(){this.getSelected().set(this.model.toJSON());Osp.PreviewView.prototype.onSaveSuccess.call(this)},
getLocation:function(){return this.model.get("location")?_(this.model.get("location")).pluck("name").join(" > "):""},serializeData:function(){var a=Osp.PreviewView.prototype.serializeData.call(this),c={name:"",lookable_name:"",description:"",keywords:"",format:"",source:"",activity_type:"",may_edit:!1,url:"",student_access:"",thumbnail_url:"",location:"",file_ext:"",points:"",usedAsSupport:!1,usedAsTest:!1,isTeacherContent:!1,used_as:"",used_as_string:"",test_name:"",contents:"",usedAsBlueprint:!1};
"undefined"!=typeof this.model&&"Content"==this.model.defaults.clazz&&(c.name=this.model.get("name"),c.lookable_name=this.model.get("lookable_name"),c.description=this.model.get("description"),c.keywords=this.model.get("keywords"),c.format=this.displayableFormat(),c.source=this.model.get("source"),c.activity_type=this.model.get("activity_type"),c.may_edit=this.model.get("permissions").edit,c.url=this.model.get("url"),c.student_access=this.model.get("student_access"),c.thumbnail_url=this.model.get("thumbnail_url"),
c.location=this.getLocation(),c.file_ext=this.model.get("file_ext"),c.points=this.model.get("points"),c.usedAsTest=this.model.isUsedAsTest(),c.usedAsSupport=this.model.isUsedAsSupport(),c.isTeacherContent=this.model.isTeacherContent(),c.used_as=this.model.get("used_as")||"",c.used_as_string=this.model.get("used_as_string")||"",this.model.isUsedAsBlueprintContent()&&(c.test_name=this.model.get("blueprint").assignment.name,c.contents=_.pluck(this.model.get("blueprint").contents,"name").toString(),c.file_exts=
_.pluck(this.model.get("blueprint").contents,"file_ext").toString(),c.usedAsBlueprint=this.model.isUsedAsBlueprintContent()));return _(a).extend(c)}});Osp.MarkbookPreviewView=Osp.PreviewView.extend({template:"course/markbook/list/preview-template",serializeData:function(){var a=Osp.PreviewView.prototype.serializeData.call(this),c={name:"",description:"",start:"",due:"",points:"",groupNames:"",studentNames:"",contentNames:"",progress:"",instruction:"",messages:"",anyDone:!1,allMarked:!1,test_description:"",
test_name:"",contents:"",support_contents:"",mark:"",percentage:"",isIndividual:!1,student_status_val:""};if("undefined"!==typeof this.model){c=this.model.get("description");null===c&&(c="");var f=this.model.get("status");f=1==f?"Not started":"Started";var e=void 0!=this.model.isIndividualStudent?this.model.isIndividualStudent():null,d="";1==this.model.get("test_contents").length&&1==this.model.get("contents").length?this.model.get("test_contents")[0].content_object_id==this.model.get("contents")[0].content_object_id&&
(d=""):d=_.pluck(this.model.get("contents"),"name").toString();var h=_.pluck(this.model.get("support_contents"),"name").toString();c={name:this.model.get("name"),description:c,points:this.model.get("points"),groupNames:this.model.sublistNames("groups",", "),studentNames:this.model.sublistNames("students",", "),contentNames:this.model.sublistNames("contents",", "),progress:f,start:this.model.get("start"),due:this.model.get("due"),messages:"number of messages",test_description:_.pluck(this.model.get("test_contents"),
"description").toString(),test_name:_.pluck(this.model.get("test_contents"),"name").toString(),contents:d,support_contents:h,mark:this.model.get("student_mark"),isIndividual:e,student_status_val:this.model.get("student_status_val"),allMarked:void 0!=this.model.allHasStatus&&this.model.allHasStatus(Osp.Markbook.MARKED),anyDone:void 0!=this.model.oneHasStatus&&1==this.model.get("manual_marking")&&this.model.oneHasStatus(Osp.Markbook.DONE)}}return _(a).extend(c)}});Osp.UserPreviewView=Osp.PreviewView.extend({rawErrorFor:["reset_password"],
events:_.extend({"click input[name=reset_password]":"onClickResetPassword"},Osp.PreviewView.prototype.events),getTemplate:function(){return _.isUndefined(this.model)||!_.isUndefined(this.model)&&this.model.isStudent()?"common/dialogs/preview/users/students-template":"common/dialogs/preview/users/no_students-template"},onClickResetPassword:function(a){$(a.currentTarget).is(":checked")&&(new Osp.AlertDialog({title:I18n.t("ui.users.reset_password.title"),message:I18n.t("ui.users.reset_password.message"),
submitText:I18n.t("ui.users.reset_password.reset")})).render()},onRender:function(){Osp.View.prototype.onRender.apply(this,arguments);this.model&&this._modelBinder.bind(this.model,this.el,this._modelBindings,{boundAttribute:"id"})},serializeData:function(){var a=Osp.PreviewView.prototype.serializeData.call(this),c="",f="",e=!0,d=!1;_.isUndefined(this.model)||(c=this.model.groupNames(", "),f=this.model.courseNames(", "),d=this.model.isTeacher(),e=this.model.isNew());return _(a).extend({groupNames:c,
courseNames:f,isTeacher:d,isNew:e})}})}();
!function(){Osp.TableHeadView=Osp.View.extend({className:"head",initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens||null},events:{"click .sortable":"sortByColumn","keydown .sortable":"onSortableKeyDown","keydown .checkall input":"onCheckAllKeyDown"},collectionEvents:{"change:checked":"render",add:"render",remove:"render",reset:"render"},getTemplate:function(){return Backbone.Marionette.getOption(this,"template")||"course/"+this._lens.get("type")+"/list/head-template"},
onRender:function(){Osp.View.prototype.onRender.call(this);this.$(".sortable").attr({tabindex:0});Osp.TableHeadView.setSortingIcons.call(this,this.collection.sortColumn,this.collection.sortDirection);return this},onSortableKeyDown:function(a){a.key&&"enter"===a.key.toLowerCase()&&this.sortByColumn(a)},onCheckAllKeyDown:function(a){a.key&&"enter"===a.key.toLowerCase()&&$(a.currentTarget).click()},sortByColumn:function(a){var c=$(a.target).data("sortable-attribute"),f=this._lens||Osp.state.getLens();
a.preventDefault();a.stopPropagation();this.collection.resetCurrentPage();this.collection.sortByAttr(c);f.setSortColumn(this.collection.sortColumn);f.setSortDirection(this.collection.sortDirection);Osp.TableHeadView.setSortingIcons.call(this,this.collection.sortColumn,this.collection.sortDirection)},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);return _.extend(a,{allSelected:!this.collection.isEmpty()&&this.collection.areAll("checked")})}},{setSortingIcons:function(a,
c){var f={asc:"icon-arrow-up",desc:"icon-arrow-down"};this.$("i").remove();_.isNull(a)||""===a||""===c||this.$('.sortable[data-sortable-attribute="'+a+'"]').append($("<i/>",{"class":f[c]}))}});Osp.FootView=Osp.View.extend({className:"foot",template:"common/no_contents-template"});Osp.CourseLensFootView=Osp.FootView.extend({template:"common/course_lens_no_contents-template",defaultMessage:I18n.t("ui.common.course_lens_nocontents"),getStateEntityAttribute:function(a,c){return Osp.state.getState(a)&&
Osp.state.getState(a).get(c)},getMessageFor:function(a){return this.getStateEntityAttribute(a,"no_contents_found_message")},isSearching:function(){return this.collection.isSearching&&this.collection.isSearching()},canShowNodeMessage:function(){var a=Osp.state.getState("structure"),c=Osp.state.getState("lens");return!this.isSearching()||!a.hasContentsFor(c)},getNodeMessage:function(){var a=this.getStateEntityAttribute("lens","type"),c=this.getMessageFor("structure");return(a=a&&c&&c[a])?this.canShowNodeMessage()?
a:this.defaultMessage:null},getStudentMessage:function(){return Osp.profile.isStudent()&&gon.noContentsFoundMessageForStudents},getNoContentsFoundMessage:function(){return this.getStudentMessage()||this.getNodeMessage()||this.getMessageFor("lens")||this.getMessageFor("course")||this.defaultMessage},serializeData:function(){return{message:this.getNoContentsFoundMessage()}}});Osp.TableRows=Osp.CollectionView.extend({collectionEvents:{"reset sync":"onResetOrSync"},childViewEventPrefix:"row",childViewOptions:function(){return{lens:this.lens}},
initialize:function(a){this.lens=a.lens},onResetOrSync:function(){this.collection.isEmpty()&&this.render();this._scrollToTop();this.trigger("update")},isEmpty:function(){return!this.collection.isFetching()&&this.collection.isEmpty()},_scrollToTop:function(){var a=this.$el.closest(".height-fix");1==a.length&&a.scrollTop(0)}});Osp.TableView=Osp.View.extend({headView:Osp.TableHeadView,rowsView:Osp.TableRows,footView:Osp.FootView,template:"common/table-template",regions:{head:".head-wrapper",body:".body-wrapper",
pagination:".pagination-wrapper"},initialize:function(a){this.lens=a.lens},getRowsView:function(){var a=new this.rowsView({lens:this.lens,childView:this.childView,emptyView:this.footView,collection:this.collection,emptyViewOptions:{collection:this.collection}});this.listenTo(a,"render update",this.trigger.bind(this,"rows:render"));return a},onRender:function(){var a=this.paginationView;this.showChildView("head",new this.headView({lens:this.lens,collection:this.collection}));this.showChildView("body",
this.getRowsView());a&&this.showChildView("pagination",new a({collection:this.collection}));return this}})}();
!function(){Osp.DialogLayout=Osp.View.extend({template:"common/dialog-template",focusTrap:!1,events:{mousedown:"onBringToFront","mousedown .resize-handler":"onResize","keypress input":"onKeyPressed","click .cancel":"onClickCancel"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._className=(a&&a.className||"")+" modal fade";this._keyboard=a&&a.keyboard||!1;this._context=(this._external=a&&a.external||!1)?window.parent:window;this._backdrop=a&&!_.isUndefined(a.backdrop)?
a.backdrop:!(0<$(".modal-backdrop:visible").length);this._show=a&&!_.isUndefined(a.show)?a.show:!0;this._draggable=a&&a.draggable||!1;this._resizable=a&&!_.isUndefined(a.resizable)?a.resizable:!0;this._until_footer=a&&!_.isUndefined(a.until_footer)?a.until_footer:35;this._position=_.extend({top:"50%",left:"50%"},a&&a.position||{});this._min_height=a&&a.min_height||400;this._min_width=a&&a.min_width||560;this._onHide=a&&a.onHide||null;this._resizable&&(this._className+=" resizable",$(this._context).on("resize.app",
_.bind(this.onResizeWindow,this)));this.$el.on("hidden",this.hideModal.bind(this));this.$el.on("show",function(){this.triggerMethod("dom:refresh")}.bind(this));this.$el.attr("role","document");this.focusTrap&&this.activateFocusTrap()},activateFocusTrap:function(){var a=focusTrap(this.$el.get(0),{clickOutsideDeactivates:!0});this.$el.on("focus_trap:escape",this.hideModal.bind(this)).on("show",function(){setTimeout(a.activate.bind(a),500)}).on("hide",a.deactivate.bind(a))},onBeforeRender:function(){$("#spinner").hide()},
onRender:function(){this._resizable&&this.$(".modal-footer").append("<div class='resize-handler'></div>");this.$el.css("height","auto");this.showModal();this.onBringToFront(!0)},onDomRefresh:function(){this.moveToParentWindow()},showModal:function(){this.$el.addClass(this._className).modal({backdrop:this._external?!1:this._backdrop,keyboard:this._keyboard,show:this._show}).css({top:this._position.top,left:this._position.left});this._draggable&&this.$el.draggable({handle:".modal-header"})},moveToParentWindow:function(){if(this._external){var a=
$("body",window.parent.document),c=a.find(".modal:last");this.$el.removeClass("in");this.$el.css({transform:"translate(-50%, -50%)"});if(c.length)this.$el.insertAfter(c);else{var f=$('<div class="modal-backdrop fade in" />').appendTo(a);f.click(function(){this.$el.modal("hide")}.bind(this));this.$el.on("hidden",function(){f.remove()}.bind(this));this.$el.appendTo(a)}this.$el.addClass("in").fadeIn()}},onResizeWindow:function(){var a=this;this.$el.position();this.$el.offset();this.$el.removeClass("fade");
clearTimeout(c);var c=setTimeout(function(){a.reposition();a.onCheckSize();a.$el.addClass("fade")},200)},reposition:function(){this.$el.css({top:$(this._context).height()>this.$el.height()?"50%":"0",marginTop:$(this._context).height()>this.$el.height()?-(this.$el.height()/2-1.5):"0",left:$(this._context).width()>this.$el.width()?"50%":"0",marginLeft:$(this._context).width()>this.$el.width()?-this.$el.width()/2:"0"});return this},hideModal:function(){this._external||_.each(this.$el.nextAll(".modal").addBack(),
function(a){$(a).modal("hide")},this);_.isFunction(this._onHide)&&this._onHide();this.removeModal()},removeModal:function(){this.$el.remove();this.destroy()},onKeyPressed:function(a){13==a.which&&(a.stopPropagation(),a.preventDefault(),this.$(".modal-footer .btn-primary").click())},onResize:function(a){var c=this,f=this.$el,e=f.offset();a=this.$(".modal-body");$("body").css("cursor","se-resize");a.css({height:a.height(),maxHeight:"none"});$(document).disableSelection();this.$el.disableSelection();
$(this._context).bind({mousemove:function(a){var d=a.pageX-e.left;d>=c._min_width&&f.width(d);a=a.pageY-e.top;a>=c._min_height&&c.setBodyModalHeight(a);c.trigger("resize")},mouseup:function(a){c.onCheckSize();$(c._context).unbind("mousemove");$("body").css("cursor","default");$(document).enableSelection();c.trigger("resize")}})},onCheckSize:function(){var a=this.$el.offset();a.left+this.$el.width()>$(this._context).width()&&$(this._context).width()-a.left>=this._min_width&&this.$el.width($(this._context).width()-
a.left);a.top+this.$el.height()>$(this._context).height()&&$(this._context).height()-a.top>=this._min_height&&this.setBodyModalHeight($(this._context).height()-a.top-3)},setBodyModalHeight:function(a){var c=this.$(".modal-header"),f=this.$(".modal-footer"),e=0;f.length?(this.$(".modal-body").height(a-c.outerHeight()-f.outerHeight()-parseInt(this.$(".modal-body").css("padding-top"))-parseInt(this.$(".modal-body").css("padding-top"))),e=f.position().top):this.$(".modal-body").height(a-c.outerHeight()-
parseInt(this.$(".modal-body").css("padding-top"))-parseInt(this.$(".modal-body").css("padding-top")));_.each(this.$(".dialog-fix, .height-fix"),function(a){var c=$(a).position().top,d=parseInt(this.$(a).css("padding-top")),f=parseInt(this.$(a).css("padding-bottom"));this.$(a).height(e-c-this._until_footer-d-f)},this)},onBringToFront:function(a){if(this._draggable||a)a=$(".modal:visible"),a.length&&(a=parseInt($(_.max(a,function(a){return $(a).css("z-index")})).css("z-index")),this.$el.css("z-index",
a+1))},onClickCancel:function(a){a.stopPropagation();a.preventDefault();this.hideModal()}});Osp.FormDialogLayout=Osp.DialogLayout.extend({dirty:function(){this.$el.data("dirty",!0)},isDirty:function(){return!!this.$el.data("dirty")},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this);if($(".modal-backdrop").length)this.$('*[data-dismiss="modal"]').on("click",this.tryToClose.bind(this))},tryToClose:function(a){this.isDirty()&&(a.preventDefault(),a.stopPropagation(),this.raiseTryToCloseToParentDialog(a))},
raiseTryToCloseToParentDialog:function(a){$(".modal-backdrop").click()}});Osp.ParentDialogLayout=Osp.FormDialogLayout.extend({initialize:function(a){Osp.FormDialogLayout.prototype.initialize.call(this,_.extend(a,{backdrop:!1}));this._unsaved=_.extend({title:I18n.t("ui.common.unsaved.title"),message:I18n.t("ui.common.unsaved.message"),submitText:I18n.t("ui.common.unsaved.submit"),cancelText:I18n.t("ui.common.unsaved.close"),className:"confirm-dialog",showCancel:!0},a.unsaved)},isDirty:function(){return _.some(this.$el.nextAll(".modal").addBack(),
function(a){return!!$(a).data("dirty")},this)},onUnsavedForceClose:function(){this._unsaved.submitCallback&&this._unsaved.submitCallback();this.hideModal()},onUnsavedClose:function(){this._unsaved.cancelCallback&&this._unsaved.cancelCallback();this.confirming=!1},tryToClose:function(){if(this.isDirty())if(this.confirming)this.alertDialog.onBringToFront(!0);else this.confirming=!0,this.alertDialog=(new Osp.AlertDialog(_.extend({},this._unsaved,{submitCallback:this.onUnsavedClose.bind(this),closeCallback:this.onUnsavedClose.bind(this),
cancelCallback:this.onUnsavedForceClose.bind(this)}))).render();else this.hideModal()},hideModal:function(){Osp.DialogLayout.prototype.hideModal.call(this);this.$backdrop.remove()},onRender:function(){this.$backdrop=$('<div class="modal-backdrop fade in" />').appendTo(document.body).click(this.tryToClose.bind(this));Osp.DialogLayout.prototype.onRender.apply(this)}});Osp.ImageDialog=Osp.DialogLayout.extend({template:"common/image_dialog-template",initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,
arguments);this._title=a&&a.title||"Please, change your title";this._image_src=a&&a.image_src||null},onDomRefresh:function(){var a=this,c=$("<img/>").appendTo(this.$(".modal-body")),f=new Image;c.attr("src",a._image_src).imagesLoaded({done:function(c){f.src=a._image_src;c=parseInt(.8*$(a._context).height());var d=parseInt(.8*$(a._context).width());if(f.width>d||f.height>c)c=Math.min(d/f.width,c/f.height),f.width=parseInt(f.width*c),f.height=parseInt(f.height*c),a.resizeDialog(f.width,f.height)},fail:function(a,
d,f){c.attr("src","/images/no_thumb.png")},always:function(){a.$(".modal-body").css("max-height","none");Osp.DialogLayout.prototype.onDomRefresh.apply(a,arguments)}})},resizeDialog:function(a,c){var f=""===this.$(".modal-body").css("padding-top")?15:parseInt(this.$(".modal-body").css("padding-top"));this.$el.css({width:a+2*f,height:c+2*f+46});this.reposition()},serializeData:function(){return{title:this._title}}});Osp.RemoteDialog=Osp.DialogLayout.extend({template:"common/remote_dialog-template",
initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._title=a&&a.title||"Please, change your title";this._remote=a&&a.remote||null},onDomRefresh:function(){Osp.DialogLayout.prototype.onDomRefresh.apply(this,arguments);this._resizable&&this.$(".modal-footer").append("<div class='resize-handler'></div>");var a=this;this.$(".modal-body").append("<iframe style='display: none;' frameborder='0' width='100%' height='100%'></iframe>");this.$("iframe").attr("src",this._remote).load(function(){a.$(".loader").remove();
$(this).show()})},serializeData:function(){return{title:this._title}}});Osp.AlertDialog=Osp.DialogLayout.extend({template:"common/alert_dialog-template",events:_.extend({"click [data-dismiss=modal]":"onClose","click [data-action=submit]":"onSubmit","click [data-action=cancel]":"onClickCancel"},Osp.DialogLayout.prototype.events),initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._title=a&&a.title||"Please, change your title";this._message=a&&a.message||"Please, change your message";
this._showSubmit=a&&void 0!==a.showSubmit?a.showSubmit:!0;this._submitText=a&&a.submitText||I18n.t("ui.common.ok");this._submitClass=(a&&a.submitClass||"")+" btn btn-primary";this._submitCallback=a&&a.submitCallback||function(){};this._showCancel=a&&a.showCancel||!1;this._cancelText=a&&a.cancelText||I18n.t("ui.common.cancel");this._cancelCallback=a&&a.cancelCallback||function(){};this._closeCallback=a&&a.closeCallback||function(){};this._showCheckbox=a&&a.showCheckbox||!1;this._checkboxText=a&&a.checkboxText||
"Please, change checkbox text";this._checkboxClass=a&&a.checkboxClass||"";this._min_height=a&&a.min_height||132},onDomRefresh:function(){Osp.DialogLayout.prototype.onDomRefresh.call(this);this.$(".btn-primary").focus()},onSubmit:function(){this._submitCallback();this.hideModal()},onClose:function(){this._closeCallback();this.hideModal()},onClickCancel:function(){this._cancelCallback();this.hideModal()},serializeData:function(){return{title:this._title,message:this._message,submitText:this._submitText,
submitClass:this._submitClass,showSubmit:this._showSubmit,showCancel:this._showCancel,cancelText:this._cancelText,showCheckbox:this._showCheckbox,checkboxText:this._checkboxText,checkboxClass:this._checkboxClass}}});Osp.InfoIconDialog=Osp.AlertDialog.extend({className:"diagnostic-report-info",template:"common/dialogs/info_icon_dialog-template",initialize:function(a){var c={backdrop:!1,resizable:!1};a.position&&_.extend(c,{position:{top:a.position.top,left:a.position.left+30}});Osp.AlertDialog.prototype.initialize.call(this,
c);this._header=a.header;this._text_markup=a.text_markup},serializeData:function(){return{hasHeader:this._hasHeader(),header:this._header,text_markup:this._text_markup}},onRender:function(){Osp.AlertDialog.prototype.onRender.apply(this,arguments);this.$el.removeClass("fade");$("a").on("click",_.bind(this.destroy,this))},_hasHeader:function(){return!_(this._header).isBlank()}});Osp.InfoIconAutoDialog=Osp.InfoIconDialog.extend({className:"info-icon-auto-dialog",padding:2,initialize:function(a){this._icon=
$(a.icon);Osp.InfoIconDialog.prototype.initialize.call(this,_.extend(a,{position:this.getPosition()}));_.bindAll(this,"setPosition");$(this._context).on("resize",this.setPosition)},getPosition:function(a){var c=this._icon.offset();c.top+=this.$el.height()/2;c.left+=this.$el.width()/2;"left"===a?c.left-=this.$el.outerWidth()+this.padding:c.left+=this._icon.width()+this.padding;return c},avoidViewportClipping:function(){var a=this.$el.outerHeight()+this.padding+this._position.top;a>$(this._context).height()&&
this.$el.css("top",this._position.top-(a-$(this._context).height()))},determiningProperDirection:function(){var a=this.getPosition();return $(this._context).width()<a.left+this.$el.outerWidth()/2?"left":"right"},setPosition:function(){this.$el.css(this.getPosition(this.determiningProperDirection()));this.avoidViewportClipping()},onDomRefresh:function(){Osp.InfoIconDialog.prototype.onDomRefresh.apply(this,arguments);this.setPosition()},onDestroy:function(){$(this._context).off("resize",this.setPosition)},
onRender:function(){Osp.InfoIconDialog.prototype.onRender.apply(this,arguments);this.setPosition();this.avoidViewportClipping()}});Osp.GroupManagementDialog=Osp.DialogLayout.extend({prependFieldNameOnError:!0,template:"common/dialogs/group/group_management_layout-template",events:_.extend({"click input[type=submit]":"onClickSave","click .cancel":"onClickCancel","click input#select-all-students":"onClickSelectAllStudentsInput"},Osp.DialogLayout.prototype.events),templateContext:function(){return{helpMessageIfAvailable:_.bind(function(){var a=
_(this).result("help");return _(a).isBlank()?"":_('<p class="help-block">%s</p>').sprintf(a)},this)}},regions:{studentsArea:"#students"},initialize:function(a){a=a||{};Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._deferred=$.Deferred();this._mode="create";this._course=a.course},editNode:function(a){throw Error("not implemented");},getNewNode:function(a){throw Error("not implemented");},hasToShowStudentList:function(){return!1},fetchAvailableStudents:function(){if(this._parent)return this._parent.pUsers();
var a=$.Deferred();0===Osp.institution.users.size()?Osp.institution.users.fetch().done(function(){return a.resolve(Osp.institution.users)}):a.resolve(Osp.institution.users);return a.promise()},fetchGroupStudents:function(){return this.model.pUsers()},fetchStudents:function(){return $.when(this.fetchAvailableStudents(),this.fetchGroupStudents())},updateGroupStudentList:function(){this.model.resetUsers(this._getAllStudents().allThatAre("checkedCreate"));this._deferred.resolve(this.model)},onClickCancel:function(a){a.stopPropagation();
a.preventDefault();this.hideModal()},onDestroy:function(){this._unbindAllStudents();this._deferred.reject()},onClickSave:function(a){var c=$(a.target);a.stopPropagation();a.preventDefault();c.hasClass("disabled")||(c.addClass("disabled"),Osp.FormView.prototype.clearErrors.call(this),this.model.set("name",this.$("input[name=name]").val()),this.validate()&&(this.updateGroupStudentList(),this.hideModal()))},validate:function(){if(this.model.isValid())return!0;this.onError(this.model,this.model.validationError);
return!1},onError:function(a,c){a=this.$("input[type=submit]");_.isObject(c)||(c=JSON.parse(c));Osp.FormView.prototype.displayErrors.call(this,c);a.removeClass("disabled")},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);this.hasToShowStudentList()&&this._showStudents()},onClickSelectAllStudentsInput:function(a){this.getChildView("studentsArea").toggleCheckAll(this._getSelectAllStudentsInput().prop("checked"))},serializeData:function(){return _({parentId:this._parent&&
this._parent.id||null,parentName:this._parent&&this._parent.get("name")||"",name:this.model.get("name"),mode:this._mode,hasToShowStudentList:this.hasToShowStudentList()}).extend(Osp.DialogLayout.prototype.serializeData.apply(this,arguments))},_showStudents:function(){this.fetchStudents().done(_.bind(function(a,c){this._setAllStudents(this._filterStudentsFromUsers(a));this._markCheckedUsersInAllStudentsList(c);this.showChildView("studentsArea",new Osp.StudentsView({collection:this._getAllStudents()}));
this._initSelectAllStudentsInput()},this))},_setAllStudents:function(a){this._allStudents=a instanceof Osp.Users?a:new Osp.Users(a)},_getAllStudents:function(){return this._allStudents},_unbindAllStudents:function(){this._getAllStudents()&&this._getAllStudents().unbind()},_setModel:function(a){this._unbindModelEvents();this.model=a;this._bindModelEvents()},_initSelectAllStudentsInput:function(){this._getSelectAllStudentsInput().removeAttr("disabled");this.getChildView("studentsArea").areAllChecked()&&
this._getSelectAllStudentsInput().prop("checked",!0);this._bindSelectAllStudentsEvents()},_bindModelEvents:function(){this._modelBindings=[this.listenTo(this.model,"error",this.onError.bind(this))]},_unbindModelEvents:function(){_(this._modelBindings).each(function(a){this.unbindFrom(a)},this)},_getSelectAllStudentsInput:function(){return this.$("input#select-all-students")},_bindSelectAllStudentsEvents:function(){this.getChildView("studentsArea").on("all_check:change",function(a){this._getSelectAllStudentsInput().prop("checked",
a)},this)},_filterStudentsFromUsers:function(a){return a.filter(function(a){return!a.isTeacher()})},_markCheckedUsersInAllStudentsList:function(a){a instanceof Osp.Users&&(a=a.models);var c=this._indexUsersById(a);this._getAllStudents().each(function(a){a.set("checkedCreate",_(c).has(a.id))})},_indexUsersById:function(a){return _(a).inject(function(a,f){a[f.id]=f;return a},{})}});Osp.ContinueAnywayDialog=Osp.DialogLayout.extend({template:"common/dialogs/continue_anyway-template",events:_.extend({"click .modal-footer input":"onSubmit"},
Osp.DialogLayout.prototype.events),initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._submitCallback=a.submitCallback},onDomRefresh:function(){Osp.DialogLayout.prototype.onDomRefresh.call(this);this.$(".btn-primary").focus();return this},onSubmit:function(){this.hideModal();this._submitCallback()}})}();
!function(){Osp.DismissibleDialog=Osp.AlertDialog.extend({ui:{dismiss:".modal-dismiss input"},events:_.extend({"click @ui.dismiss":"onDismiss"},Osp.AlertDialog.prototype.events),initialize:function(a){Osp.AlertDialog.prototype.initialize.call(this,_.extend({submitText:I18n.t("ui.common.close"),submitCallback:this.onFinish.bind(this),closeCallback:this.onFinish.bind(this),showCheckbox:!0,checkboxText:I18n.t("ui.common.dismissible"),checkboxClass:"assistance-checkbox"},a));this._dismiss=!1;this._property=
a.property},onDismiss:function(a){this._dismiss=this.getUI("dismiss").is(":checked")},onFinish:function(){this._dismiss&&Osp.profile.saveProperty(this._property,!0)}})}();
!function(a,c,f){a.UnpurchasedDialog=a.AlertDialog.extend({template:"course/dialog/unpurchased/layout-template",content:{title:c.t("ui.common.unpurchased_dialog.default.title"),text:c.t("ui.common.unpurchased_dialog.default.text")},initialize:function(e){a.AlertDialog.prototype.initialize.apply(this,arguments);e=e||{};this._purchase_url=f(e.purchase_url).isBlank()?"#":e.purchase_url;this._purchase_link_text=f(e.purchase_link_text).isBlank()?c.t("ui.common.unpurchased_link_title"):e.purchase_link_text;
this._purchase_instruction_text=f(e.purchase_instruction_text).isBlank()?this.content.text:e.purchase_instruction_text;this._purchase_popup_title=f(e.purchase_popup_title).isBlank()?this.content.title:e.purchase_popup_title},getFormatedInstructionText:function(){return f(this._purchase_instruction_text).chain().lines().reduce(function(a,c){return a+("<p>"+c+"</p>")},"").value()},getFormatedTitle:function(){return f(this._purchase_popup_title).truncate(45)},serializeData:function(){return f.extend({purchase_url:this._purchase_url,
purchase_link_text:this._purchase_link_text,purchase_instruction_text:this.getFormatedInstructionText(),purchase_popup_title:this.getFormatedTitle()},a.AlertDialog.prototype.serializeData.call(this))}});a.UnpurchasedDialogLenses=a.UnpurchasedDialog.extend({content:{title:c.t("ui.common.unpurchased_dialog.lenses.title"),text:c.t("ui.common.unpurchased_dialog.lenses.text")}});a.UnpurchasedDialogBooks=a.UnpurchasedDialog.extend({content:{title:c.t("ui.common.unpurchased_dialog.books.title"),text:c.t("ui.common.unpurchased_dialog.books.text")}});
a.UnpurchasedDialogNodes=a.UnpurchasedDialog.extend({content:{title:c.t("ui.common.unpurchased_dialog.nodes.title"),text:c.t("ui.common.unpurchased_dialog.nodes.text")}})}(Osp,I18n,_);
!function(){Osp.ListContentView=Osp.View.extend({behaviors:[Osp.Behaviors.Math],className:"item",events:{"click .check input[type=checkbox]":"onClickCheck","click .star":"onClickStar","click .name":"onClickName",click:"onClickCheck"},modelEvents:{select:"onSelect",change:"render"},templateContext:_.extend({showNewLabel:function(){return this.is_new&&Osp.profile.isTeacher()},showUpdatedLabel:function(){return this.is_updated&&Osp.profile.isTeacher()},favouritesLabel:function(){return I18n.t("ui.common.favourites."+
(this.starred?"remove":"add"))}},Mn.View.prototype.templateContext),getTemplate:function(){return Backbone.Marionette.getOption(this,"template")||"course/"+this._lens.get("type")+"/list/item-template"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens||null;_.bindAll(this,"onContinueAnyway")},onClickCheck:function(a){a.preventDefault();a.stopPropagation();this.model.set({checked:!this.model.get("checked")})},onClickStar:function(a){a.preventDefault();a.stopPropagation();
var c=this,f=!this.model.get("starred");this.model.collection.setCheckedItems();$.ajax({url:"/api/courses/"+Osp.state.getCourse().id+"/contents/"+this.model.id+"/favourite/",type:"put",contentType:"application/json",data:JSON.stringify({marked:f})}).done(function(){c.model.set({starred:f})})},onClickName:function(a){a.preventDefault();a.stopPropagation();this.openContent()},onSelect:function(){this.showContent()},showContent:function(a){(a||this.model).showContent(this.$el)},showSsoContent:function(){var a=
window.open(),c=this.showSsoGetUrlError;this.showContent(new Osp.SsoContent(this.model,{success_callback:function(c,e){a.location.href=e.url},error_callback:function(f,e){a.close();c()}}));return!0},showOnlyDesktopWarning:function(){(new Osp.ContinueAnywayDialog({submitCallback:this.onContinueAnyway})).render();return!0},showSsoGetUrlError:function(){(new Osp.AlertDialog({title:I18n.t("ui.common.sso_error_dialog"),message:I18n.t("ui.common.sso_error_message")})).render()},onContinueAnyway:function(){this.showContent(this.model)},
addVisitedClass:function(){this.model.get("clazz")&&"Content"==this.model.get("clazz")&&!_.isUndefined($.cookie("contentIds"))&&_.contains($.cookie("contentIds").split(","),this.model.id.toString())&&this.$el.addClass("visited")},toggleChecked:function(){this.model.get("checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")},hideDescription:function(){var a=this.$el.find(".description");Osp.state.getState("hideDescriptions")?a.hide():a.show()},onRender:function(){this.addVisitedClass();
this.toggleChecked();this.hideDescription();$(".header-fix").heightFix("header");this.$(".vertical-span-fix").heightFix("cell")},openContent:function(){this._checkOnlyForDesktop()||this._checkSsoContent()||this.showContent(this.model)},_onlyForDesktop:function(){return this.model.get("only_desktop")&&window.Browser.mobile},_checkOnlyForDesktop:function(){return this._onlyForDesktop()&&this.showOnlyDesktopWarning()},_checkSsoContent:function(){return this.model.isSsoContent()&&this.showSsoContent()}});
Osp.ListOptionsView=Osp.View.extend({className:"options",events:{"change #oxford_content":"onToggleShowOxfordContentOnly","change #toggle_description":"onToggleDescription"},collectionEvents:{refresh:"render",reset:"render",sync:"render"},getTemplate:function(){return Backbone.Marionette.getOption(this,"template")||"course/"+this._lens.get("type")+"/list/options-template"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens;this._course=this._lens.course();
null===Osp.state.getState("hideDescriptions")&&Osp.state.setState("hideDescriptions",this._course.get("hide_descriptions"))},onToggleDescription:function(a){a=$(a.currentTarget).is(":checked");Osp.state.setState("hideDescriptions",a);a?$(".description").hide():$(".description").show();$(".description").parents(".item").find(".vertical-span-fix").heightFix("cell")},onToggleShowOxfordContentOnly:function(a){var c=$(a.currentTarget).is(":checked");Osp.state.setSearchTerm("source",c?"oup":"");Osp.vent.trigger("search:change:source",
a);""!==Osp.state.getSearch().query&&this.collection.goTo(this.collection.information.firstPage);return!1},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);return _(a).extend({hideDescriptions:Osp.state.getState("hideDescriptions"),oxfordContent:"oup"===Osp.state.getSearchTerm("source"),totalRecords:this.collection.totalRecords})},onRender:function(){Osp.state.getFilter()&&this.$("#oxford_content").prop("disabled",Osp.state.getFilter().get("name").match(/my_/))}});Osp.ListView=
Osp.TableView.extend({template:"common/list/table-template",className:"items",events:{"click .checkall input[type=checkbox]":"onClickCheckAll"},checkAll:function(){return this.collection.setForAll({checked:!0})},uncheckAll:function(){return this.collection.setForAll({checked:!1})},anyChecked:function(){return this.collection.areAny("checked")},allChecked:function(){return this.collection.areAll("checked")},noneChecked:function(){return this.collection.areNone("checked")},onClickCheckAll:function(a){$(a.currentTarget).is(":checked")?
this.checkAll():this.uncheckAll();a.preventDefault();a.stopPropagation()}});Osp.PaginationView=Osp.View.extend({tagName:"aside",className:"row-fluid",template:"common/pagination-template",events:{"click a.servernext":"nextResultPage"},collectionEvents:{add:"render",refresh:"render",reset:"render",change:"render"},nextResultPage:function(a){a.preventDefault();this.collection.requestNextPage({add:!0,remove:!1})},serializeData:function(){return this.collection.pageInfo()}});Osp.NumberedPaginationView=
Osp.View.extend({className:"row-fluid",perPageOptions:[20,50,100],template:"common/numbered_pagination-template",events:{"click a.prev":"previous","click a.next":"next","click a.go-to":"goTo","change select":"changeResultsPerPage"},collectionEvents:{refresh:"render",reset:"render",sync:"render"},templateContext:_.extend({pageClass:function(a,c){return isNaN(a)?"disabled "+c:(this.currentPage==a?"active ":"")+c},pageItems:function(){var a=this.totalPages;return 10>=a?_(a).times(function(a){return a+
1}):this.currentPage>Math.floor(a/2)?_.union([1,"..."],this.pageSet):_.union(this.pageSet,["...",a])}},Osp.View.prototype.templateContext),previous:function(a){a.preventDefault();$(a.target).hasClass("disabled")||this.collection.requestPreviousPage()},next:function(a){a.preventDefault();$(a.target).hasClass("disabled")||this.collection.requestNextPage()},goTo:function(a){a.preventDefault();a=$(a.target);a.hasClass("disabled")||a.hasClass("active")||this.collection.goTo(a.html())},serializeData:function(){return _.extend(this.collection.pageInfo(),
{perPageOptions:this.perPageOptions,totalRecords:this.collection.totalRecords})},changeResultsPerPage:function(){this.collection.howManyPer(this.$("select").val())}});Osp.SimplePaginationView=Osp.NumberedPaginationView.extend({template:"common/simple_pagination-template"});Osp.ContentView=Osp.View.extend({behaviors:[Osp.Behaviors.Math],className:"item row-fluid",tagName:"div",events:{"click .name":"onClickName"},getTemplate:function(){var a=Backbone.Marionette.getOption(this,"template");return a?
a:this.model.get("name")?"common/content-template":"common/no_file_content-template"},onClickName:function(a){a.preventDefault();a.stopPropagation();this.model.showContent()}});Osp.ContentsView=Osp.CollectionView.extend({childView:Osp.ContentView,className:"contentDialogList"});Osp.CopyLinkToVLEView=Osp.DialogLayout.extend({template:"course/dialog/copy_link_to_vle/layout-template",events:{"click .vle_link":"onClickLink",mousedown:"onBringToFront","mousedown .resize-handler":"onResize"},initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,
arguments);this._selection=a.selection||null;this._course=a.course||null;this._lens=a.lens||null;if(_.isEmpty(this._selection)){var c=this._course.get("currentState");c=c.filter||(this._lens.isGroupable()?c.group:c.structure);this._entity=this._lens.filters().firstWith({name:c})||this._course.structures().getRecursive(c)||this._course.groups().getRecursive(c)}else this._entity=new Osp.PaginatedContents(this._selection);this._link=this._entity.generateLinkToShare(this._course,this._lens)},serializeData:function(){var a=
Osp.DialogLayout.prototype.serializeData.call(this);return _.extend(a,{link:this._link})},onClickLink:function(a){a.preventDefault();try{var c=document.createRange(),f=window.getSelection();c.selectNodeContents(a.currentTarget);f.removeAllRanges();f.addRange(c)}catch(e){}}});Osp.SearchView=Osp.View.extend({className:"search",events:{"click button":"onClickButton","keyup input[name=query]":"onKeyUpQuery","click #cancel-search":"onClickCancelSearch",focusin:"onFocus",focusout:"onBlur"},getTemplate:function(){return"course/"+
this._lens.get("type")+"/search-template"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this._lens=this.options.lens;if(this._lens.isGlobal())this._scope="global",this._elements=new Osp.PaginatedUsers(null,{lens:this._lens,institution_id:Osp.institution.id});else{this._scope="course";this._course=this._lens.course();if(this._lens.isResources()||this._lens.isPlanning()||Osp.profile.isTeacher()&&this._lens.isAssignment())this._elements=new Osp.PaginatedContents(null,{lens:this._lens,
course:this._course});Osp.profile.isStudent()&&this._lens.isAssignment()&&(this._elements=new Osp.PaginatedAssignments(null,{lens:this._lens,course:this._course}));this._lens.isMarkbook()&&(this._elements=new Osp.PaginatedMarkbooks(null,{lens:this._lens,course:this._course}));this._lens.isUsers()&&(this._elements=new Osp.PaginatedUsers(null,{course:this._course,lens:this._lens}));this._lens.isIwb()&&(this._elements=new Osp.PaginatedIwbItems(null,{course:this._course,lens:this._lens}));this._elements._shown=
!0}this.listenTo(Osp.vent,"search:clean",this.cleanSearch.bind(this));this.listenTo(Osp.vent,"search:refresh",this.refreshSearch.bind(this))},onKeyUpQuery:function(a){""===$(a.currentTarget).val()?$("#cancel-search").addClass("hide"):$("#cancel-search").removeClass("hide")},onClickCancelSearch:function(a){this.cleanSearch();this.onClickButton(a)},onBlur:function(a){this.$el.find("#search-box").removeClass("focus")},onFocus:function(a){this.$el.find("#search-box").addClass("focus")},setGroup:function(){this._elements.setGroup(Osp.state.getGroup())},
setStructureAndResetPage:function(){_.isFunction(this._elements.setStructure)&&this._elements.setStructure(Osp.state.getStructure());_.isFunction(this.resetCurrentPage)&&this._elements.resetCurrentPage()},onClickButton:function(a){a.preventDefault();this.isButtonDisabled()||(this.disableButton(),Osp.state.setSearchTerm("query",this.$("form input[name=query]").val()),this.fetchContents())},fetchContents:function(){this._lens.isGroupable()?this.setGroup():this.setStructureAndResetPage();this._elements.setFilter(Osp.state.getFilter());
return this._elements.fetch().done(_.bind(this.triggerShowEvent,this)).fail(_.bind(this.showErrorDialog,this)).always(_.bind(this.enableButton,this))},triggerShowEvent:function(){Osp.vent.trigger(this._scope+":"+this._lens.get("type")+":search:show",this._elements,this._lens)},isButtonDisabled:function(){return this.$("button").hasClass("disabled")},disableButton:function(){this.$("button").addClass("disabled")},enableButton:function(){this.$("button").removeClass("disabled")},showErrorDialog:function(){(new Osp.AlertDialog({title:I18n.t("ui.search.error_dialog.title"),
message:I18n.t("ui.search.error_dialog.message"),submitText:I18n.t("ui.search.error_dialog.button")})).render()},cleanSearch:function(){Osp.state.resetSearchTerm("query");$("#cancel-search").addClass("hide");this.$el.find("input[name=query]").val("")},refreshSearch:function(){this.fetchContents()}});Osp.LegacyAdvancedSearchView=Osp.SearchView.extend({events:_.extend({"click #advanced-search-options a":"onClickSearchTerm","click a.search-option-remove":"onClickOptionRemove"},Osp.SearchView.prototype.events),
initialize:function(){Osp.SearchView.prototype.initialize.apply(this,arguments);$(window).resize(_.bind(this.onWindowResize,this));this.listenTo(Osp.vent,"search:change:source",this.changeSource.bind(this))},onClickCancelSearch:function(a){this.$el.find("#search-box span").remove();this.$el.find('input[type=hidden][name!="content"]').val("");this.resizeSearchField();Osp.SearchView.prototype.onClickCancelSearch.call(this,a)},onClickOptionRemove:function(a){a.preventDefault();var c=$(a.target).data("fieldname");
this.$("form input[name="+c+"]").val("");this.removeSearchOption(c);this.resizeSearchField();this.$("#search-options span").length||""!==this.$("input[name=query]").val()||$("#cancel-search").addClass("hide");Osp.state.resetSearchTerm(c);this.onClickButton(a)},onClickSearchTerm:function(a){var c=$(a.target).data("term"),f=$(a.target).data("value");if(!Osp.state.getFilter()||!Osp.state.getFilter().get("name").match(/my_/)||"source"!==c||"oup"!==f&&"other"!==f)"used_as"===c||"type"===c?(this.removeSearchOption("used_as"),
this.removeSearchOption("type")):this.removeSearchOption(c),this.selectAdvancedSearchOption(a,c,f),this.onClickButton(a)},onRender:function(){Osp.profile.isTeacher()&&!this._lens.isStructurable&&(this.$("form button").addClass("disabled"),this.$("#search-advanced-options").remove());Osp.profile.isStudent()&&!this._lens.isResources()&&this.$("#search-advanced-options").remove()},onWindowResize:function(){this.$("#search-input").width("96%");this._maxWidth=this.$("#search-input").width();this.resizeSearchField()},
removeSearchOption:function(a){this.$("span."+a).remove()},resizeSearchField:function(){var a=this.$("#search-options").outerWidth(!0);this.$("#search-input").width(this._maxWidth-a-14)},selectAdvancedSearchOption:function(a,c,f){a.preventDefault();this._maxWidth=this._maxWidth||this.$("#search-input").width();c=this.$("form input[name="+c+"]");a=$(a.target);c.val(f);f=c.attr("name");c=' <a href="#" class="search-option-remove" data-fieldname="'+f+'">&times;</a>';f='<span class="'+f+'">'+a.text()+
c+"</span>";this.$("#search-options").append(f);this.resizeSearchField();$("#cancel-search").removeClass("hide");this.$("#search-input input").focus()},serializeData:function(){return{user_id:Osp.profile.get("id")}},onClickButton:function(a){a.preventDefault();this.isButtonDisabled()||(this.disableButton(),Osp.state.setSearchTerms({type:this.$("form input[name=type]").val()||"",source:this.$("form input[name=source]").val()||Osp.state.getSearchTerm("source"),query:this.$("form input[name=query]").val()||
"",used_as:this.$("form input[name=used_as]").val()||"",new_contents:this.$("form input[name=new_contents]").val()||"",updated_contents:this.$("form input[name=updated_contents]").val()||""}),this.fetchContents().done(this.onFetchContentsDone))},onFetchContentsDone:function(a){a.total_entries?$(".foot").hide():$(".foot").show()},changeSource:function(a){"oup"==Osp.state.getSearchTerm("source")&&this.$("#search-options").find(".source").length?(this.removeSearchOption("source"),this._maxWidth=this._maxWidth||
this.$("#search-input").width(),a=this.$("form input[name=source]"),a.val("oup"),a.attr("name"),this.$("#search-options").append('<span class="source">Oxford <a href="#" class="search-option-remove" data-fieldname="source">&times;</a></span>'),this.resizeSearchField(),$("#cancel-search").removeClass("hide"),this.$("#search-input input").focus()):this.removeSearchOption("source");this.resizeSearchField()},cleanSearch:function(){Osp.SearchView.prototype.cleanSearch.call(this);Osp.state.resetSearchTerm("type");
this.$el.find("input[name=type]").val("");Osp.state.resetSearchTerm("used_as");this.$el.find("input[name=used_as]").val("");"oup"!==Osp.state.getSearchTerm("source")&&this.$el.find("input[name=source]").val("");this.$("#search-options").empty();this.$("#search-input").css("width","")}});Osp.StudentView=Osp.View.extend({template:"common/list/student-template",className:"controls item",tagName:"div",events:{"click a.select":"onClickSelect"},modelEvents:{change:"render"},initialize:function(){Osp.View.prototype.initialize.apply(this,
arguments);this.listenTo(this.model,"change:checkedCreate",this.onChangeChecked.bind(this))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();this.model.set("checkedCreate",!this.model.get("checkedCreate"));this.trigger("check:click")},onChangeChecked:function(){this.$("input").prop("checked",this.model.get("checkedCreate"))}});Osp.StudentsView=Osp.CollectionView.extend({childView:Osp.StudentView,initialize:function(){this.on("item:added",this.onItemAdded,this)},onItemAdded:function(a){this.listenTo(a,
"check:click",this.onChildViewCheckClick.bind(this))},onChildViewCheckClick:function(){this.areAllChecked()&&this.trigger("all_check:change",!0);this.areAllUnchecked()&&this.trigger("all_check:change",!1)},toggleCheckAll:function(a){this.collection.setForAll({checkedCreate:a})},areAllChecked:function(){return this.collection.areAll("checkedCreate")},areAllUnchecked:function(){return this.collection.areNone("checkedCreate")}})}();"use strict";
!function(){Osp.LegacyTreeView=Osp.CompositeView.extend({behaviors:[Osp.Behaviors.Math],tagName:"li",template:"common/tree-template",childViewContainer:".children",events:{"click a.toggle":"onClickToggle","click a.select":"onClickSelect"},observer:Osp.Observer,initialize:function(a){Osp.CompositeView.prototype.initialize.apply(this,arguments);this._lens=this.options.lens||null;this._activeAttr=this.options.activeAttr||"active";this._expandedAttr="active"==this._activeAttr?"expanded":this._activeAttr+
"_expanded";this.activateParentModel=this.options&&this.options.activateParentModel;this.deactivateParentModel=this.options&&this.options.deactivateParentModel;this.collection=this.model&&this.model.children()||null;this._observerStrategy=this.options.observer?this.options.observer:this.observer;this._observer=new this._observerStrategy(this);this.model.set("checkboxName",this.options.checkboxName,{silent:!0});this.nodeTypeIcon=this.options.icon&&_(this.options.icon).isFunction()?this.options.icon(this.model,
this):this.options.icon;"active"==this._activeAttr&&this.listenTo(Osp.vent,"course:restore:tree",this.restoreEvents.bind(this));this.model.set(this._expandedAttr,this.model.get("expanded"),{silent:!0});this.bindModelEvents();this._observer.bindEvents()},restoreEvents:function(){this.bindModelEvents()},serializeData:function(){return _({nodeTypeIcon:this.nodeTypeIcon}).extend(Osp.CompositeView.prototype.serializeData.call(this))},bindModelEvents:function(){this.model&&("Group"===this.model.get("clazz")||
"Structure"===this.model.get("clazz")&&this.model.isAvailable())&&(this.listenTo(this.model,"change:"+this._expandedAttr,this.onChangeExpanded.bind(this)),this.listenTo(this.model,"change:leaf",this.onChangeLeaf.bind(this)),this.listenTo(this.model,"change:lookable_name",this.render.bind(this)),this.listenTo(this.model,"change:group_code",this.render.bind(this)),this.listenTo(this.model,"change",this.onChange.bind(this)))},buildChildView:function(a,c){return new c({model:a,lens:this._lens,activeAttr:this._activeAttr,
observer:this._observerStrategy,checkboxName:this.options.checkboxName,activateParentModel:this.activateParentModel,deactivateParentModel:this.deactivateParentModel,hide_unavailable:this.options.hide_unavailable,icon:this.options.icon})},controls:function(){return this.$controls||(this.$controls=this.$el.children(".controls"))},$children:function(){return this.$el.children("ul")},expand:function(){this.model.set(this._expandedAttr,!0)},contract:function(){this.model.set(this._expandedAttr,!1)},toggle:function(){this.model.set(this._expandedAttr,
!this.model.get(this._expandedAttr))},onClickToggle:function(a){a.stopPropagation();a.preventDefault();this.toggle()},onClickSelect:function(a){"Group"===this.model.get("clazz")||"Structure"===this.model.get("clazz")&&this.model.isAvailable()?this._observer.onClickSelect.call(this,a):(a.stopPropagation(),a.preventDefault(),(new Osp.UnpurchasedDialogNodes({purchase_url:this.model.get("purchase_url"),purchase_link_text:this.model.get("purchase_link_text"),purchase_popup_title:this.model.get("purchase_popup_title"),
purchase_instruction_text:this.model.get("purchase_instruction_text"),showCancel:!0})).render())},onChange:function(a){if(this._observer.onChange)this._observer.onChange()},onChangeExpanded:function(a){a=this.$children();var c=this.model.get(this._expandedAttr);this.setToggleHandler();c?a.show():a.hide()},onChangeLeaf:function(a){a=this.$(".toggle").html();this.model.previous("leaf")?this.$(".toggle").replaceWith('<a href="#" class="toggle">'+a+"</a>"):this.$(".toggle").replaceWith('<span class="toggle">'+
a+"</span>");this.setToggleHandler()},onRender:function(){0==this.model.get("available")&&"undefined"!=typeof this.options.hide_unavailable&&1==this.options.hide_unavailable&&this.$el.first().addClass("hide");this.$children().toggle(this.model.get(this._expandedAttr));this.setToggleHandler();this.setToggleActive();this.setNodeId()},setNodeId:function(){this.$el.attr("data-id",this.model.id)},setToggleHandler:function(){var a=this.$("i").first();a.removeClass();a.addClass(this.toggleCssClass())},toggleCssClass:function(){var a=
"tree-icon-";return a=this.model.get("leaf")?a+"vertex":a+(this.model.get(this._expandedAttr)?"expanded":"contracted")},setToggleActive:function(){this.model.get(this._activeAttr)&&$(this.el).addClass("active")},templateContext:function(){var a=this;return _.extend({},Osp.CompositeView.prototype.templateContext,{icon:function(){return a.model.get("leaf")?"vertex":a.model.get(a._expandedAttr)?"expanded":"contracted"},isNotAvailable:function(){return"boolean"==typeof this.available&&!this.available},
unpurchasedClassIfNotAvailable:function(){return this.isNotAvailable()?"unpurchased":""},title:function(){return this.isNotAvailable()?I18n.t("ui.browser.structures.unpurchased"):this.lookable_name}})}});Osp.TreeCheckboxView=Osp.LegacyTreeView.extend({initialize:function(a){Osp.LegacyTreeView.prototype.initialize.apply(this,arguments);this._checked_ids=this.options.checked_ids||[];this._checked=0<this._checked_ids.length?_.include(this._checked_ids,this.model.id):!1},buildChildView:function(a,c){return new c({model:a,
checked_ids:this._checked_ids,checked:this._checked,lens:this._lens,activeAttr:this._activeAttr,observer:this._observerStrategy,checkboxName:this.options.checkboxName,hide_unavailable:this.options.hide_unavailable})},onRender:function(){0==this.model.get("available")&&"undefined"!=typeof this.options.hide_unavailable&&1==this.options.hide_unavailable&&this.$el.first().addClass("hide");this.model.set(this._activeAttr,this._checked);this.$children().toggle(this.model.get(this._expandedAttr));this.setToggleHandler()}});
Osp.TreeRootView=Osp.CollectionView.extend({childView:Osp.LegacyTreeView,tagName:"ul",className:"nav nav-list tree",initialize:function(){Osp.CollectionView.prototype.initialize.apply(this,arguments);this._lens=this.options&&this.options.lens?this.options.lens:null;this.observer=this.options&&this.options.observer?this.options.observer:null;this.selected=this.model;this._checked_ids=this.options&&this.options.checked_ids?this.options.checked_ids:[];this._activeAttr=this.options&&this.options.activeAttr?
this.options.activeAttr:"active";this.activateParentModel=this.options&&this.options.activateParentModel;this.deactivateParentModel=this.options&&this.options.deactivateParentModel;this._checkboxName=this.options&&this.options.checkboxName?this.options.checkboxName:null;if(this.observer===Osp.NavigationObserver)this.on("collection:before:render",this.onBeforeRender,this)},buildChildView:function(a,c){return new c({model:a,lens:this._lens,checked_ids:this._checked_ids,observer:this.observer,activeAttr:this._activeAttr,
checkboxName:this._checkboxName,icon:this.options.icon,activateParentModel:this.activateParentModel,deactivateParentModel:this.deactivateParentModel,hide_unavailable:this.options.hide_unavailable})},onDestroy:function(){"active"!=this._activeAttr&&Osp.vent.trigger("course:restore:tree")},onBeforeRender:function(){var a,c=Osp.state.getState("savedTree");c&&"active"===this._activeAttr&&(this.collection.eachRecursive(function(f){(a=c.getRecursive(f.id))&&f.set({active:a.get("active"),expanded:a.get("expanded")})}),
Osp.state.resetState("savedTree"))}})}();"use strict";
Osp.CreateDialog=function(){var a={activeAttr:"activeCreateDialog"};a.Button=Osp.Model.extend({idAttribute:"action",defaults:{label:"",description:"",action:"",icon:"",enabled:!1,active:!1},initialize:function(a,f){Osp.Model.prototype.initialize.apply();this.setEnabled()},setEnabled:function(a){this.set("enabled",this.isEnabled(a))},isEnabled:function(a){return a?a.get("permissions")[this.get("action")]:!1},view:function(){return a.ButtonView}});a.ButtonCollection=Osp.Collection.extend({disableAll:function(){this.setForAll({enabled:!1})},
refreshEnabledStatus:function(a){this.each(function(c){c.setEnabled(a)})}},{factory:function(c){var f=[];switch(c){case "group":var e=Osp.CourseApp.Dialog.Create.GroupButtonCollectionParams;break;case "groupCode":e=Osp.CourseApp.Dialog.Create.GroupCodeButtonCollectionParams;break;case "globalGroup":e=Osp.GlobalApp.Create.GroupButtonCollectionParams;break;case "subgroup":e=Osp.CourseApp.Dialog.Create.SubgroupButtonCollectionParams;break;default:e=Osp.CourseApp.Dialog.Create.StructureButtonCollectionParams}var d=
e.i18nPrefix||_("ui.create.%s").sprintf(c);for(var h=0;h<e.actions.length;h++){c=e.actions[h][0];var k=e.actions[h][1];f.push({label:I18n.t(d+"."+c+".button"),description:I18n.t(d+"."+c+".help"),action:c,iconclass:k})}return new a.ButtonCollection(f,{model:e.buttonModel})}});a.ButtonView=Osp.View.extend({className:"control-group modify-node",template:"common/create/button-template",modelEvents:{change:"render"}});a.ButtonsView=Osp.CollectionView.extend({className:"row-fluid",childView:a.ButtonView,
buildChildView:function(a,f){return new (a.view())({model:a})},onRender:function(){this.$el.prepend(this.$(".header-button").parent())}});a.Layout=Osp.DialogLayout.extend({template:"common/create/layout-template",regions:{tree:"#create-node-tree",buttons:"#create-node-buttons"},events:_.extend({"click #create-node-tree":"onClick","click .add":"onClickAdd","click .remove":"onClickRemove","click input[type=submit]":"onClickSave","click .cancel":"onClickCancel"},Osp.DialogLayout.prototype.events),initialize:function(){Osp.DialogLayout.prototype.initialize.apply(this,
arguments);(this._lens=this.options.lens)&&this._lens.isGroupable()?(this._i18nKey=this._lens.isGlobal()?"globalGroup":"group",this._mainTreeCollection=this._lens.isGlobal()?Osp.institution.groups:this._lens.course().groups()):(this._i18nKey="structure",this._mainTreeCollection=this._lens.course().structures());this._buttons=a.ButtonCollection.factory(this._i18nKey);this._nodes=this._mainTreeCollection.cloneRecursive();this._actions=Osp.replayable.actionList.reset();this.listenTo(Osp.vent,"course:selection:node:select",
this.onNodeSelected.bind(this))},onClick:function(){var a=this._lens.isGlobal()?"global:selection:node:deselect":"course:selection:node:deselect";this.model=null;this._setButtons();Osp.FormView.prototype.clearErrors.call(this);Osp.vent.trigger(a)},onClickAdd:function(){throw Error("Overwrite this method");},onClickCancel:function(a){a.stopPropagation();a.preventDefault();this.hideModal()},onClickRemove:function(a){var c=$(a.target);a.stopPropagation();a.preventDefault();c.hasClass("disabled")||(this._disableAllButtons(),
Osp.FormView.prototype.clearErrors.call(this),a=new Osp.AlertDialog({title:I18n.t("ui.create."+this._i18nKey+".remove.button"),message:I18n.t("ui.create."+this._i18nKey+".remove.message"),submitCallback:_.bind(this.onConfirmRemove,this),className:"confirm-dialog",showCancel:!0}),a.render(),$(".confirm-dialog").on("hide",this.onHideConfirmDialog.bind(this)))},onClickSave:function(a){a.stopPropagation();a.preventDefault();$(a.target).hasClass("disabled")||(this._actions.isEmpty()?this.hideModal():(this._disableAllButtons(),
this._actions.playAll(_.bind(function(a){if(a)this._setButtons();else{var c=this._mainTreeCollection,d=c.cloneRecursive();Osp.state.setState("savedTree",d);c.fetch({reset:!0}).then(function(){var a={};d.eachRecursive(function(c){c.get("expanded")&&(a[c.get("id")]=c)});c.eachRecursive(function(c){a[c.get("id")]&&c.set("expanded",!0)})});this.hideModal()}},this))))},onConfirmRemove:function(){var a=this.model.collection&&this.model.collection.parent();this._actions.push(new Osp.replayable.RemoveAction(this.model));
this.model.collection.remove(this.model);this.model=null;a&&a.set("leaf",0==a.children().size());this.getChildView("tree").render();this._setButtons();Osp.vent.trigger("course:selection:node:removed")},onHideConfirmDialog:function(){this._setButtons();$(".confirm-dialog").off("hide")},onNodeSelected:function(a,f,e){_.isObject(e)?this.model=e:this.model=this._nodes.getRecursive(e);this._setButtons();Osp.FormView.prototype.clearErrors.call(this)},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,
arguments);this._showTree();var c=new a.ButtonsView({collection:this._buttons});this.showChildView("buttons",c)},serializeData:function(){return _({i18nKey:this._i18nKey}).extend(Osp.DialogLayout.prototype.serializeData.apply(this,arguments))},onAttach:function(){Osp.state.getNode()&&(this._lens.isGlobal()?Osp.vent.trigger("global:selection:node:select",Osp.state.getNode()):Osp.vent.trigger("course:selection:node:select",this._lens.course().get("id"),this._lens.get("name"),Osp.state.getNode().get("id")))},
_disableAllButtons:function(){this._buttons.disableAll();this.$("a.cancel").addClass("disabled")},_setButtons:function(){this._buttons.refreshEnabledStatus(this.model);this.$("a.cancel").removeClass("disabled")},_showErrors:function(a){_.isObject(a)||(a=JSON.parse(a));Osp.FormView.prototype.displayErrors.call(this,a);this._setButtons()},_showTree:function(){var c=new Osp.TreeRootView({collection:this._nodes,lens:this._lens,observer:this._lens.isGlobal()?Osp.GlobalSelectionObserver:Osp.SelectionObserver,
activeAttr:a.activeAttr,hide_unavailable:!0});this.showChildView("tree",c)}},{factory:function(a){var c={className:"big create-dialog",until_footer:10,lens:a};return a.isGroupable()?a.isGlobal()?new Osp.GlobalApp.Create.GlobalGroupLayout(c):new Osp.CourseApp.Dialog.Create.GroupLayout(c):new Osp.CourseApp.Dialog.Create.StructureLayout(c)}});return a}();"use strict";
(function(a){Osp.ButtonsLayout=Osp.View.extend({className:"buttons",template:"common/buttons/layout-template",initialize:function(a){this._buttons=a&&a.buttons?a.buttons:new Osp.Buttons;this._lens=a.lens;return this},onRender:function(){0<this._buttons.length&&this._renderButtons();return this},_renderButtons:function(){(new h({collection:this._buttons,el:this.$(".btn-group"),lens:this._lens})).render();return this}});var c={attachAndShow:function(a){this._hidePreviousIfExists();this._view=a;this._target=
a.$el.closest(".btn-group");this._lens=a.getLens();this._showTooltip()},_hidePreviousIfExists:function(){this._view&&this._getTooltip().remove()},_showTooltip:function(){this._addTooltip();this._view.$(".dropdown-menu").length&&this._view.$(".dropdown-menu").remove();this._target.tooltip("show");this._getTooltip().css("cursor","pointer");$("body").one("click",this._hideTooltip.bind(this));$("body").one("click",".tooltip.admin-notice",this._onClickTooltip.bind(this))},_getTooltip:function(){return $(".tooltip.admin-notice")},
_addTooltip:function(){$("body").off("click",".tooltip.admin-notice");this._target.tooltip(this.getOptions())},getOptions:function(){return{title:a.bind(this.getTitle,this),trigger:"manual",template:'<div class="tooltip admin-notice"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}},getTitle:function(){if(this.noAdminInvitations())return I18n.t("ui.users.no_admin_tooltip");if(this.waitingAdminConfirmation())return I18n.t("ui.users.admin_invited_tooltip")},noAdminInvitations:function(){return Osp.Course.noAdminInvitations(this._lens.adminStatus)},
waitingAdminConfirmation:function(){return Osp.Course.waitingAdminConfirmation(this._lens.adminStatus)},_hideTooltip:function(){$("body").off("click",".tooltip.admin-notice");this._target.tooltip("hide")},_onClickTooltip:function(a){a.preventDefault();this.noAdminInvitations()&&Osp.CourseApp.Lens.Users.Invitations.showAdminDialog()}},f=Osp.View.extend({events:{click:"onClick"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens;this.command=new (this.model.get("command"))(this._lens,
this)},getLens:function(){return this._lens},serializeData:function(){return a({hasIcon:this.model.has("iconType")}).extend(Osp.View.prototype.serializeData.call(this))},onClick:function(a){a.preventDefault();this._isAdminInvitationNeeded()&&a.stopPropagation();this._executeCommand()},_isAdminInvitationNeeded:function(){return this.model.has("adminInvitationNeeded")&&this.model.get("adminInvitationNeeded")&&!Osp.Course.withAdmin(this._lens.adminStatus)},_executeCommand:function(){this._isAdminInvitationNeeded()?
c.attachAndShow(this):this.command.execute()}}),e=f.extend({template:"common/buttons/button-template",onRender:function(){f.prototype.onRender.apply(this,arguments);this.$el.addClass(this.model.get("cssSizeClass"));return this}}),d=e.extend({template:"common/buttons/dropdown-button-template",onRender:function(){var a=new l({collection:this.model.get("dropdownOptions"),lens:this._lens});e.prototype.onRender.apply(this,arguments);this.$el.append(a.render().el);return this}}),h=Osp.CollectionView.extend({childView:e,
_views:{},initialize:function(a){this._views[Osp.Button.TYPE.SIMPLE]=e;this._views[Osp.Button.TYPE.DROPDOWN]=d;this._lens=a.lens;return this},buildChildView:function(a,c){return new (this._views[a.get("type")])({lens:this._lens,model:a})}}),k=f.extend({tagName:"li",template:"common/buttons/dropdown-option-template"}),l=Osp.CollectionView.extend({tagName:"ul",className:"dropdown-menu",childView:k,initialize:function(a){Osp.CollectionView.prototype.initialize.apply(this,arguments);this._lens=a.lens},
buildChildView:function(a,c){return new c({lens:this._lens,model:a})}});try{a.isUndefined(jasmine)||(jasmine.exported=jasmine.exported||{},a.extend(jasmine.exported,{buttonViews:{DropdownButtonView:d}}))}catch(m){}})(_);
(function(a){a.AdvancedSearchView=a.View.extend({className:"search",template:"common/search-template",events:{"click button":"onSearch","click #cancel-search":"onCancelSearch","click #advanced-search-options a":"onSearchTerm","click a.search-option-remove":"onOptionRemove",focusin:"onFocus","keyup input[name=query]":"onQueryKeyUp",focusout:"onBlur"},initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this.lens=c.lens},focus:function(){this.$("#search-box input[name=query]").focus()},
onRender:function(){this._updateCancelSearchButton();this._updateCursorPosition()},onBlur:function(){this.$("#search-box").removeClass("focus")},onFocus:function(){this.$("#search-box").addClass("focus")},onQueryKeyUp:function(){this._updateCancelSearchButton()},onSearch:function(a){a.preventDefault();this.trigger("search",this.extractSearchFromControls())},onCancelSearch:function(a){a.preventDefault();this.trigger("search",{})},onSearchTerm:function(a){var c=$(a.currentTarget),e=c.data("value");
c=c.data("term");a.preventDefault();a=this.extractSearchFromControls();a[c]=e;this.trigger("search",a)},onOptionRemove:function(a){var c=$(a.currentTarget).closest("[data-term]").data("term");a.preventDefault();a=this.extractSearchFromControls();delete a[c];this.trigger("search",a)},extractSearchFromControls:function(){var a=this.$("input[name=query]"),f={};_.isEmpty(a.val())||(f.query=a.val());return f},_updateCancelSearchButton:function(){var a=this.extractSearchFromControls();this.$("#cancel-search").toggleClass("hide",
_.isEmpty(a))},_updateCursorPosition:function(){var a=this.$("input[name=query]"),f=a.val().length,e=function(){f&&a[0].setSelectionRange(f,f)};try{e()}catch(d){setTimeout(e,10)}}})})(Osp);
(function(a,c){a.Store=c.Object.extend({initialize:function(a){this.mergeOptions(a,_.keys(a));this.isReady=$.Deferred()},ready:function(){return this.isReady.promise()},invalidate:function(){this.isReady=$.Deferred();this.get().planFetch();this.trigger("invalidated");return this},getInstance:function(){throw"Please, implement in child classes";},getCollection:function(){return this.get()},getAttr:function(a){return this.get().get(a)},toJSON:function(){return this.get().toJSON()},get:function(){var a=
this;if(this.source)return this.source;this.source=this.getInstance();this.listenTo(this.source,"sync",function(){return a.trigger("sync")});return this.source},fetch:function(){var a=this,c=this.get();c.wasFetched()||(_.isFunction(c.reset)&&c.reset(),c.fetch().done(function(){return a.isReady.resolve(c)}),c.markAsFetched());return this.ready()}},{TYPE:{COURSE_HOMEPAGE:"CourseHomepage",COURSE_HOMEPAGE_DATA_FOR_STUDENT:"CourseHomepageDataForStudent",COURSE_HOMEPAGE_DATA_FOR_TEACHER:"CourseHomepageDataForTeacher",
COURSES:"Courses",DIGITAL_BOOKS:"DigitalBooks",GROUPS:"Groups",SETTINGS:"Settings",STRUCTURES:"Structures",STRUCTURES_WITH_TAGGING:"StructuresWithTagging"}});a.Store.Service=c.Object.extend({initialize:function(){this.cache={}},getCache:function(a){this.cache[a]||(this.cache[a]={});return this.cache[a]},getCourseCache:function(c,e){var d=this.getCache(c);d[e.id]||(d[e.id]=new a.Store[c]({course:e}));return d[e.id]},get:function(c,e){if(e)return this.getCourseCache(c,e);e=this.getCache(c);e.store||
(e.store=new a.Store[c]);return e.store}});a.store=new a.Store.Service})(Osp,Marionette);(function(a,c){c.CourseHomepage=c.extend({getInstance:function(){return new f({course:this.course})}});var f=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,initialize:function(a){this._course=a.course},url:function(){return"/api/v2/courses/"+this._course.id+"/homepage"}})})(Osp,Osp.Store);
(function(a,c){c.CourseHomepageDataForStudent=c.extend({getInstance:function(){return new h({course:this.course})}});var f=a.Collection.extend({stats:function(){this._stats||(this._stats=new a.Model);return this._stats},parse:function(a){var c=a.meta;this.stats().set({due_today:c.due_today,due_this_week:c.due_this_week});this.reset(this.parseJsonAPI(a))}}),e=a.Collection.extend({parseReactivateTask:function(a){this._reactivateTask=null;a&&(this._reactivateTask=new d,this._reactivateTask.parse(a))},
reactivateAvailable:function(){return!!this._reactivateTask},reactivateTask:function(){return this._reactivateTask},parse:function(a){this.reset(this.parseJsonAPI(a))}}),d=a.Model.extend({parse:function(a){this.set(this.parseJsonAPI(a))}}),h=a.Model.extend({url:function(){return"/api/v2/courses/"+this._course.id+"/homepage/data"},initialize:function(a){this._course=a.course},assignments:function(){this._assignments||(this._assignments=new f);return this._assignments},nextSteps:function(){this._nextSteps||
(this._nextSteps=new e);return this._nextSteps},parseAssignments:function(a){var c=a.meta;this.assignments().parse(a);return{assignments_completed:c.assignments_completed}},parseNextSteps:function(a){if(!a)return{};var c=a.meta;this.nextSteps().parse(a);return{next_steps_completed:c.next_steps_completed}},parse:function(a){return Object.assign({},this.parseAssignments(a.assignments),this.nextSteps().parseReactivateTask(a.reactivate_task),this.parseNextSteps(a.next_steps))}})})(Osp,Osp.Store);
(function(a,c){c.CourseHomepageDataForTeacher=c.extend({getInstance:function(){return new e({course:this.course})},assignmentsStats:function(){return this.get().assignmentsStats()},reports:function(){return this.get().reports()},courseUpdates:function(){return this.get().courseUpdates()}});var f=a.CourseUpdates.extend({parse:function(a){this.reset(this.parseJsonAPI(a))}}),e=a.Model.extend({url:function(){return"/api/v2/courses/"+this._course.id+"/homepage/data"},initialize:function(a){this._course=
a.course},assignmentsStats:function(){return this._assignmentsStats?this._assignmentsStats:this._assignmentsStats=new a.Model},reports:function(){return this._reports?this._reports:this._reports=new a.Model},courseUpdates:function(){return this._courseUpdates?this._courseUpdates:this._courseUpdates=new f([],{course:this._course})},parse:function(a){this.assignmentsStats().clear().set(a.assignments_stats||{});this.reports().clear().set(a.reports||{});this.courseUpdates().parse(a.course_updates||{data:[]})}})})(Osp,
Osp.Store);(function(a,c){c.Courses=c.extend({getInstance:function(){return new a.Courses}})})(Osp,Osp.Store);(function(a,c){c.DigitalBooks=c.extend({getInstance:function(){return new a.Digibooks(null,{course:this.course})}})})(Osp,Osp.Store);
(function(a,c){var f=["group:added","group:deleted","group:changed"],e=Backbone.Radio.channel("users:management");c.Groups=c.extend({initialize:function(){var a=this;c.prototype.initialize.apply(this,arguments);this.listenTo(e,f.join(" "),function(){return a.invalidate()})},getInstance:function(){return new h(null,{course:this.course})},setUsers:function(a){this.users=a},getUsers:function(){return this.users}},{getStoreFor:function(d){return a.store.get(c.TYPE.GROUPS,d.course())}});var d=a.Model.extend({defaults:{selected:!1},
initialize:function(){a.Model.prototype.initialize.apply(this,arguments);this._children=new h(this.get("children"),{parent:this,course:this.course()});this.unset("children",{silent:!0})},children:function(){return this._children},course:function(){return this.collection&&this.collection.course()},parent:function(){return this.collection.parent()},getUsers:function(){var a=this;return this._users?this._users:this._users=c.Groups.getStoreFor(this).getUsers().reduce(function(c,d){var e=_(d.get("groups"));
(e.contains(a.id)||e.contains(a.get("global_group_id")))&&c.push(d);return c},[])}}),h=a.Collection.extend({model:d,initialize:function(a,c){this._course=c.course;this._parent=c.parent},course:function(){return this._course},parent:function(){return this._parent},url:function(){return"/api/v2/courses/"+this._course.id+"/groups"},parse:function(a){var d=new k;d.set(a.group_users,{parse:!0});c.Groups.getStoreFor(this).setUsers(d);a.groups.data=_(a.groups.data).sortBy(function(a){return a.attributes.depth});
return this.parseTree(a.groups)}});d=a.Model.extend({defaults:{selected:!1}});var k=a.Collection.extend({model:d,comparator:"last_name",parse:function(a){var c=[];return _(this.parseJsonAPI(a)).reduce(function(a,d){c[d.user_id]?c[d.user_id].groups.push(d.group_id):(c[d.user_id]={id:d.user_id,first_name:d.first_name,last_name:d.last_name,groups:[d.group_id]},a.push(c[d.user_id]));return a},[])}})})(Osp,Osp.Store);
(function(a,c){c.Settings=c.extend({getInstance:function(){return new f}});var f=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:"/api/v2/settings",toJSON:function(){var a=_.clone(this.attributes),c={};_(a).chain().keys().each(function(d){c[d.camelize(!0)]=a[d]});return c}})})(Osp,Osp.Store);
(function(a,c){c.Structures=c.extend({getInstance:function(){return new f(null,{course:this.course})}});c.StructuresWithTagging=c.Structures.extend({getInstance:function(){var a=c.Structures.prototype.getInstance.call(this);a.withTagging();return a}});var f=a.Structures.extend({rootNodeFix:function(a){var c=a[0];"StructureRoot"!==c.attributes.model_type&&(c=c.attributes.parent_id,a.unshift({id:c,type:"structure",attributes:{available:!0,depth:0,id:c,model_type:"StructureRoot",name:"Root",no_contents_found_message:{resources:"",
assignments:"",planning:""},parent_id:null,position:0}}))},withTagging:function(){this._tagging=!0},parse:function(c){this.rootNodeFix(c.data);return a.Collection.prototype.parseTree.call(this,c)},url:function(){var a="/api/v2/courses/"+this._course.id+"/structures";this._tagging&&(a+="?tagging=true");return a}})})(Osp,Osp.Store);Osp.Components={};
Osp.Components.Component=Mn.Object.extend({initialize:function(a){this.mergeOptions(a,_.keys(a))},getViewClass:function(){if(this.view.prototype instanceof Backbone.View||this.view===Backbone.View)return this.view;if(_.isFunction(this.view))return this.view.apply(this)},viewOptions:function(){return _.extend({collection:this.collection,model:this.model},this.className?{className:this.className}:null)},getView:function(){this._view||(this._view=new (this.getViewClass())(this.viewOptions()),this.listenTo(this._view,
"destroy",this.destroy.bind(this)),this.propagateEvents(),this.onCreate(this._view));return this._view},$:function(a){return this.getView().$(a)},$el:function(){return this.getView().$el},getRegion:function(a){return this.getView().getRegion(a)},showChildView:function(a,c){return this.getView().showChildView(a,c)},getStore:function(a){return Osp.store.get(a,this.getCourse())},getCourse:function(){return this.course?this.course:this.model&&_.isFunction(this.model.course)?this.model.course():this.collection&&
_.isFunction(this.collection.course)?this.collection.course():Osp.currentCourse},getCourseState:function(a){try{return this.getCourse().state().get(a)}catch(c){return null}},setCourseState:function(a){try{this.getCourse().state().set(a)}catch(c){}},unsetCourseState:function(){var a=this;try{Array.from(arguments).forEach(function(c){return a.getCourse().state().unset(c)})}catch(c){}},fetchStore:function(a){return this.getStore(a).fetch()},onCreate:function(){},onAfterShow:function(){},propagateEvents:function(a,
c){(c||this.propagate)&&_((c||this.propagate).split(" ")).each(this.propagateEvent.bind(this,a))},propagateEvent:function(a,c){this.listenTo(a||this.getView(),c,this.triggerEvent.bind(this,c))},triggerEvent:function(){this.trigger.apply(this,arguments)},append:function(){var a=this.getView();a.render();a.$el.appendTo($("body"));return this},render:function(a){if(_(a).isUndefined())return this.append(),this.onAfterShow(),this;var c=this.getView();a instanceof Backbone.View?(this.listenTo(a,"destroy",
function(){return c.destroy()}),this.append()):a.show(c);this.onAfterShow();return this},hasDependencies:function(){return _(this.waitForDependencies).isFunction()},whenDependenciesLoaded:function(){return this.hasDependencies()?$.when.apply($,[this.waitForDependencies()].flat()):$.Deferred().resolve().promise()},show:function(a){var c=this;this.whenDependenciesLoaded().done(function(){return c.render(a)});return this}});
(function(a,c){var f=a.View.extend({initialize:function(a){this.childView=a.childView;this.filter=a.filter},behaviors:[a.Behaviors.Math],template:"common/components/tree-node",tagName:"li",className:function(){var a="tree__branch";this.model.children().isEmpty()&&(a+=" tree__branch--leaf");this.model.get("available")||(a+=" tree__branch--unavailable");return a},templateContext:function(){var a=this;return{isRootStructure:function(){return a.isRootStructure()},getUniqueIdentifier:function(){return"rsc-"+
this.id}}},attributes:function(){return{"data-depth":this.model.get("depth")}},regions:{tree:{el:".tree--inner",replaceElement:!0}},modelEvents:{"change:expanded":"render","change:active":"updateActiveClass"},triggers:{"click .tree__toggle--desktop":"toggle:desktop","click .tree__toggle--mobile":"toggle:mobile","click .button--secondary":"view"},childViewTriggers:{"node:toggle:desktop":"toggle:desktop","node:toggle:mobile":"toggle:mobile","node:view":"view"},onRender:function(){this.renderChildren();
this.updateExpandedClass();this.updateActiveClass()},renderChildren:function(){this.model.get("expanded")&&(this.model.children().isEmpty()||this.showChildView("tree",new e({childView:this.childView,collection:this.model.children(),className:"tree tree--inner",filter:this.filter})))},updateActiveClass:function(){this.$el.toggleClass("tree__branch--active",this.model.get("active"))},updateExpandedClass:function(){this.$el.toggleClass("tree__branch--expanded",this.model.get("expanded"))},isRootStructure:function(){return"StructureRoot"===
this.model.get("model_type")},getName:function(){return this.isRootStructure()?"All Resources":this.model.get("name")},serializeData:function(){return _.extend({},this.model.toJSON(),{name:this.getName()})}}),e=a.CollectionView.extend({initialize:function(a){this.childView=a.childView;this.filter=a.filter},childViewEventPrefix:"node",tagName:"ul",className:"tree tree--root",childViewOptions:function(){return{childView:this.childView,filter:this.filter}}});c.Tree=c.Component.extend({view:e,childView:f,
onCreate:function(a){this.active()||this.collection.first().set({active:!0,expanded:!0});this.listenTo(a,"node:toggle:desktop",this.onNodeToggleForDesktop.bind(this));this.listenTo(a,"node:toggle:mobile",this.onNodeToggleForMobile.bind(this));this.listenTo(a,"node:view",this.onNodeView.bind(this))},active:function(){return this.collection.getRecursiveBy("active",!0)},getActive:function(){return this.active()},viewOptions:function(){return _.extend({childView:this.childView,filter:this.filter},c.Component.prototype.viewOptions.call(this))},
isLeaf:function(a){return a.children().isEmpty()},expandAncestors:function(a){a.isRoot()||(a.parent().set("expanded",!0),this.expandAncestors(a.parent()))},toggleChildren:function(a){this.isLeaf(a)||a.children().each(function(a){this.toggleChildren(a);a.set({expanded:!1})}.bind(this))},toggle:function(a){this.active()&&this.active().set("active",!1);a.set({active:!0});if(a.get("available")){if(a.get("expanded"))return this.toggleChildren(a);a.set({expanded:!this.isLeaf(a)})}},activate:function(a){this.toggle(this.collection.first());
this.expandAncestors(a);this.toggle(a)},onNodeToggleForDesktop:function(a){this.toggle(a.model);this.onNodeView(a)},onNodeToggleForMobile:function(a){this.toggle(a.model)},onNodeView:function(a){this.trigger("node:view",a.model)}},{TreeNode:f})})(Osp,Osp.Components);
(function(a,c){var f={focusVisible:!1},e=a.View.extend({tagName:"section",className:"sidepanel",template:"common/components/side_panel/layout-template",regions:{annex:{el:".sidepanel__annex",replaceElement:!0},body:".sidepanel__body",footer:{el:".sidepanel__footer",replaceElement:!0}},attributes:function(){return{role:"dialog","aria-modal":"true"}},triggers:{"click [data-action=close]":"close"},initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this.title=c.title;new a.FocusManagerService(this)},
toggle:function(){this.$el.toggleClass("sidepanel--enabled");this.previousFocus=document.activeElement;this.$el.find("#sidepanel-focusable")[0].focus(f)},close:function(){this.$el.toggleClass("sidepanel--enabled",!1);this.previousFocus&&this.previousFocus.focus(f)},isEnabled:function(){return this.$el.hasClass("sidepanel--enabled")},serializeData:function(){return{title:this.title}}}),d=a.View.extend({className:"sidepanel__page",template:"common/components/side_panel/page-template",regions:{header:{el:".sidepanel__header",
replaceElement:!0},annex:{el:".sidepanel__annex",replaceElement:!0},body:{el:".sidepanel__body",replaceElement:!0},footer:{el:".sidepanel__footer",replaceElement:!0}},templateContext:{isIcon:function(){return this.icon}},ui:{goTo:"[data-action=goTo]",title:"header h1"},triggers:{"click @ui.goTo":"goTo"},modelEvents:{"change:title":"onChangeTitle"},attributes:function(){return{"data-page":this.model.id}},onChangeTitle:function(){this.getUI("title").text(this.model.get("title"))}}),h=a.CollectionView.extend({tagName:"section",
className:"sidepanel",childView:d,childViewEventPrefix:"page",triggers:{"click [data-action=back]":"back","click [data-action=close]":"close"},collectionEvents:{"change:active":"activatePage"},initialize:function(){a.View.prototype.initialize.apply(this,arguments);new a.FocusManagerService(this)},toggle:function(){this.$el.toggleClass("sidepanel--enabled")},close:function(){this.$el.toggleClass("sidepanel--enabled",!1)},isEnabled:function(){return this.$el.hasClass("sidepanel--enabled")},onRender:function(){this.activatePage()},
activatePage:function(){var a=this.collection.findWhere({active:!0});a&&this.$el.attr("data-current",a.id)},updatePrevious:function(a){a?this.$el.attr("data-previous",a instanceof Backbone.Model?a.id:a):this.$el.removeAttr("data-previous")}});c.SidePanel=c.Component.extend({backdropTemplate:'<div class="backdrop"></div>',initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.destroyOnClose=this.destroyOnClose||!1},view:function(){return this.isMultiPage()?h:e},viewOptions:function(){return _.extend({},
this.title?{title:this.title}:null,c.Component.prototype.viewOptions.call(this),this.pages?{collection:this.pages}:null)},onCreate:function(a){this.listenTo(a,"close",this.close.bind(this));this.listenTo(a,"back",this.back.bind(this));this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"page:render",this.onPageRender.bind(this));this.listenTo(a,"page:goTo",this.onGoTo.bind(this))},attachBackdropListener:function(a){$(a).on("mousedown",function(a){return a.preventDefault()})},beforeEnabling:function(){},
onDestroy:function(){this.getBackdrop().remove()},onRender:function(){this.isMultiPage()||(this.component.show(this.getRegion("body")),_(this.component.showAnnex).isFunction()&&this.component.showAnnex(this.getRegion("annex")))},onPageRender:function(a){a.model.get("component").show(a)},onGoTo:function(a,c){this.goTo($(c.currentTarget).data("target"))},isMultiPage:function(){return!_(this.pages).isUndefined()},isEnabled:function(){return this.getView().isEnabled()},close:function(){$("body").removeClass("body--noScroll");
this.getView().close();this.destroyOnClose&&this.destroyView()},destroyView:function(){var a=this;setTimeout(function(){return a.getView().destroy()},300)},toggle:function(){this.isEnabled()||this.beforeEnabling();this.getView().toggle();$("body").toggleClass("body--noScroll",this.isEnabled());this.isMultiPage()&&!this.isEnabled()&&this.pages.first().set({active:!0});this.destroyOnClose&&!this.isEnabled()&&this.destroyView();return this},back:function(){var a=this.pages.findWhere({active:!0}).get("back")||
this.backTo||this.pages.first();this.goTo(a,null)},goTo:function(c){var d=this.pages.findWhere({active:!0});this.backTo=d;this.pages.setForAll({active:!1});d&&d.trigger("deactivate");c=c instanceof a.Model?c:this.pages.get(c);c.set({active:!0});this.getView().updatePrevious(d);c.trigger("activate")},getBackdrop:function(){return this.$backdrop?this.$backdrop:this.$backdrop=$(this.backdropTemplate).insertAfter(this.getView().$el)},isClosed:function(){return!this.getView().isEnabled()},delayClose:function(a){a=
1E3*a||2E3;setTimeout(this.close.bind(this),a)},delayToggle:function(a){a=1E3*a||100;setTimeout(this.toggle.bind(this),a)},getPage:function(a){return this.pages.get(a)},getActive:function(){return this.pages.findWhere({active:!0})},activatePage:function(a){this.getView().activatePage(a||this.pages.first().id)},onAfterShow:function(){var a=this.getBackdrop();this.attachBackdropListener(a)},open:function(){var a=this;this.whenDependenciesLoaded().done(function(){return a.render().delayToggle()});return this}})})(Osp,
Osp.Components);
(function(a,c){var f={expired:I18n.t("ui.redeem_token.expired"),invalid:I18n.t("ui.redeem_token.invalid"),already_taken:I18n.t("ui.redeem_token.already_taken"),role_error:I18n.t("ui.redeem_token.role_error")},e=a.Model.extend({defaults:{token:"",products:[]},url:function(){return"/api/redeem_token/"+this.get("token").trim()},validate:function(a){if(!a.token||10>a.token.trim().length)return"Invalid code"},parse:function(c){return{products:a.Collection.prototype.parseJsonAPI.call(this,c)}}}),d=Mn.Object.extend({initialize:function(a){this.component=
a},buildMain:function(){return{id:"main",title:"Add book",active:!0,component:this.component.getMain()}},buildConfirm:function(){return{id:"confirm",title:"Add book",active:!1,component:this.component.getConfirm()}},build:function(){return new a.Collection([this.buildMain(),this.buildConfirm()])}});c.ActivateProduct=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.builder=new d(this);this.model=new e;this.pages=this.builder.build()},getErrorMessage:function(a){try{var c=
a.responseJSON.message}catch(l){c=null}return f[c]?f[c]:I18n.t("ui.homepage.activate_product.error")},getMain:function(){var a=new c.ActivateProduct.Main({model:this.model,getErrorMessage:this.getErrorMessage.bind(this)});this.listenTo(a,"confirm",this.onConfirm.bind(this));return a},getConfirm:function(){var a=new c.ActivateProduct.Confirm({model:this.model,getErrorMessage:this.getErrorMessage.bind(this)});this.listenTo(a,"close",this.close.bind(this));this.listenTo(a,"activated",this.onceActivated.bind(this));
return a},fetchCourses:function(){a.courses.fetch({reset:!0})},onceActivated:function(){this.fetchCourses();this.delayClose()},onConfirm:function(){this.goTo("confirm")}})})(Osp,Osp.Components);
(function(a){var c=Osp.View.extend({template:"common/components/breadcrumbs/layout-template",triggers:{'click [data-action="view:node"]':"view:node"},collectionEvents:{add:"render",remove:"render"},behaviors:[Osp.Behaviors.Tooltip],serializeData:function(){return{breadcrumbs:this.collection.toJSON()}}});a.Breadcrubms=a.Component.extend({view:c,initialize:function(){a.Component.prototype.initialize.apply(this,arguments);this.collection=new Osp.Collection(this.root)},onCreate:function(a){var c=this;
this.listenTo(a,"view:node",function(a,e){return c.onViewNode(parseInt($(e.currentTarget).data("index")))})},onViewNode:function(a){var c=this.collection.slice(a+1);this.collection.remove(c);this.trigger("view:node",this.collection.at(a))},add:function(a){this.collection.add(a)}})})(Osp.Components);
(function(a,c,f){a=a.View.extend({template:"common/components/calendar/layout-template",attributes:{tabindex:"0"},ui:{picker:".calendar__picker",prevButton:".calendar__pickerButton--previous",nextButton:".calendar__pickerButton--next"},triggers:{"click @ui.prevButton":"prev","click @ui.nextButton":"next"},scrollToBottom:function(){this.$el.parent().scrollTop(this.$el.height())}});c.Calendar=c.Component.extend({view:a,pickerOptions:function(){return{element:this.getView().getUI("picker").get(0),minDays:2,
maxDate:f().startOf("day").toDate(),inlineMode:!0,singleMode:!1,numberOfMonths:3,showTooltip:!1,onSelect:this.onSelectDate.bind(this)}},moveBackwards:function(a){return this.first.subtract(f.duration({months:a||1}))},setup:function(){var a=this;this.first=f();this.setPickerDates();this.picker.setOptions({numberOfMonths:3});picker.gotoDate(this.moveBackwards(2).toDate());_.delay(function(){return a.getView().scrollToBottom()},100)},setPickerDates:function(){this.picker.setOptions({startDate:f(this.model.get("start"),
"DD/MM/YY").toDate(),endDate:f(this.model.get("end"),"DD/MM/YY").toDate()})},createPicker:function(){this.picker=window.picker=new Litepicker(this.pickerOptions())},increaseMonths:function(){this.picker.setOptions({numberOfMonths:this.picker.options.numberOfMonths+1})},next:function(){this.increaseMonths();this.picker.gotoDate(new Date)},previous:function(){this.increaseMonths();this.picker.gotoDate(this.moveBackwards().toDate())},onSelectDate:function(a,c){this.model.set({start:f(a).format(this.format||
"DD/MM/YY"),end:f(c).format(this.format||"DD/MM/YY")})},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"prev",this.previous.bind(this));this.listenTo(a,"next",this.next.bind(this))},onRender:function(){this.createPicker();this.setup()},onDestroy:function(){this.picker.destroy()}})})(Osp,Osp.Components,moment);
(function(a,c,f,e,d){f=a.View.extend({tagName:"li",className:"updatesList__item",template:"common/components/course_updates/update-template",triggers:{'click [data-action="more"]':"more",'click [data-action="dismiss"]':"dismiss"},templateContext:function(){var a=this.model;return{message:function(){var c=a.get("data"),d=c.count;c=c.description;var f=a.get("message_type"),h=a.getLensType(),k=e(a.get("date"),"YYYY-MM-DD").format("DD/MM/YYYY");return I18n.t("ui.course_updates.messages."+(h?h+"."+f:f),
{count:d,description:c,date:k})},showMore:function(){return!a.isDigitalBook()&&(a.hasLens()||a.hasUrl())},moreLinkAttrs:function(){if(!a.hasUrl())return'href="#" data-action="more"';var c='href="'+a.url()+'"';return a.urlIsExternal()?c+' target="_blank"':c}}}});var h=a.CollectionView.extend({childViewEventPrefix:"update",childView:f,tagName:"ul",className:"updatesList"});f=a.View.extend({className:"grid grid--maxWidth",template:"common/components/course_updates/layout-template",regions:{updates:".section__body"},
triggers:{"click .button--close":"close"}});c.CourseUpdates=c.Component.extend({view:f,onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()});this.listenTo(a,"close",function(){return c.onClose()});this.listenTo(this.collection,"add remove reset",function(){return c.toggleVisibility()})},toggleVisibility:function(){this.getView().$el.toggleClass("hidden",this.collection.isEmpty())},onRender:function(){var a=this;this.updatesView=new h({collection:this.collection});
this.getView().showChildView("updates",this.updatesView);this.listenTo(this.updatesView,"update:dismiss",function(c){return a.onUpdateDismiss(c)});this.listenTo(this.updatesView,"update:more",function(c){return a.onUpdateFindOutMore(c)});this.toggleVisibility()},onUpdateDismiss:function(a){var c=this;a.$el.addClass("updatesList__item--dismissed");d.delay(function(){return c.collection.dismiss(a.model)},500)},onUpdateFindOutMore:function(c){a.vent.trigger("course:lens:show",this.getCourse().id,c.model.getLensName(),
{search:c.model.getSearch()})},onClose:function(){this.collection.dismiss()}},{Layout:f})})(Osp,Osp.Components,Marionette,moment,_);
(function(a,c){a=a.View.extend({tagName:"button",template:"common/components/dates_filter/button-template",className:"button button--icon",ui:{dates:".dates"},triggers:{click:"select"},modelEvents:{change:"render"}});c.DatesFilter=c.Component.extend({view:a,onCreate:function(a){this.listenTo(a,"select",this.togglePanel.bind(this));this.listenTo(this.model,"change",this.togglePanel.bind(this))},getPanel:function(){if(this.panel)return this.panel;this.panel=new c.CalendarPanel({model:this.model,title:I18n.t("ui.calendar_panel.title")});
this.panel.show();return this.panel},togglePanel:function(){this.getPanel().toggle()}})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({tagName:"li",className:"card",triggers:{click:"open","click .buy":"buy","click .card__download":"triggerDownloadPrompt","click .card__download-overlay":"overlay","click .card__download-overlay-in-progress":"overlay","click .download":"startDownload","click .download-cancel":"cancelDownload","click .card__download_remover":"triggerRemoveDownloadPrompt","click .dropdown__toggle":"onToggle","mouseover .dropdown__toggle":"onToggleOver","mouseleave .dropdown__toggle":"onToggleLeave",
"click .dropdown__delete-button":"onDeleteDownload","click .card__remove-overlay":"overlay","click .remove":"removeBook","click .remove-cancel":"cancelRemoveOverlay","click .card__update-overlay-in-progress":"overlay"},behaviors:[a.Behaviors.Tooltip],attributes:function(){return{"data-id":this.model.get("id")}},templateContext:function(){var c=this.model;return{purchasedToTeachers:function(){return c.purchased(a.profile.get("type"))},hideOrShowIcon:function(a,c){return Array.isArray(c)?c.includes(a)?
"display: block;":"display: none;":a===c?"display: block;":"display: none;"},shouldRenderOfflinePart:function(){return!!c.get("offline_content_link")&&c.purchased(a.profile.get("type"))}}},getTemplate:function(){return a.state.getCourse().get("token_course")?"common/components/digital_books/token_book-template":a.profile.isTeacher()?"common/components/digital_books/teacher_book-template":"common/components/digital_books/student_book-template"},serializeData:function(){return _.extend({url:this.model.get("purchased")[a.profile.get("type")]?
this.model.getLink():this.model.get("purchase_link")},a.View.prototype.serializeData.call(this))},onRender:function(){var c=this.model;!c.purchased(a.profile.get("type"))&&this.$el.addClass("card--unpurchased");this.dropdown=(new k({model:c})).render();this.dropdown.$el.appendTo($("body"))},setStatusOfTheOfflineBook:function(){var c=this,d,e,f,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return d=(new a.IndexedDbService).getDb(),k.yield(d.books.where({bookId:c.model.id}).first(),
2);if(e=k.yieldResult)f=e.offline_content_version,f!==c.model.get("offline_content_version")?(c.model.set("offlineStatus","update"),(h=document.querySelector(".book-upgrade-available-banner"))||showNotification((new a.NotificationTemplates).bookUpgradeAvailable("book-upgrade-available-banner"))):c.model.set("offlineStatus","downloaded");k.jumpToEnd()})},render:function(){var c=this,d=arguments;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c.model.set("offlineStatus",
""),c.model.get("offline_content_link")?e.yield(c.setStatusOfTheOfflineBook(),2):e.jumpTo(2);a.View.prototype.render.apply(c,d);e.jumpToEnd()})},onDestroy:function(){this.dropdown&&"function"===typeof this.dropdown.destroy&&this.dropdown.destroy()}}),d=a.CollectionView.extend({childViewEventPrefix:"book",childView:e,tagName:"ol",className:"cardGrid books",attributes:{tabindex:"0"}}),h=a.View.extend({template:"common/components/digital_books/pages-template",modelEvents:{change:"render"},events:{"click button":"goTo"},
goTo:function(a){this.trigger("goToPage",$(a.currentTarget).data("page"))}}),k=a.View.extend({template:"common/components/digital_books/dropdown-template",className:"custom-dropdown dropdown",attributes:function(){return{id:"dropdown-"+this.model.get("id")}},events:{"click .dropdown__delete-button":"onDeleteDownload","click .dropdown__update-button":"onUpdateDownload"},onDeleteDownload:function(){var a=this.model.get("id"),c=$('li[data-id="'+a+'"]');c.find(".card__remove-overlay").fadeIn({duration:300});
c.css("cursor","default");this.closeDropdown(a)},closeDropdown:function(a){var c=$("#dropdown-"+a);c.removeClass("dropdown--enable").addClass("dropdown--oneSelected");setTimeout(function(){return c.removeClass("dropdown--oneSelected")},500)},onUpdateDownload:function(){a.vent.trigger("book:startUpdate",{model:this.model,closeDropdown:this.closeDropdown})}}),l=a.View.extend({template:"common/components/digital_books/layout-template",className:"grid grid--maxWidth",ui:{previous:".carousel__pagination--previous",
next:".carousel__pagination--next"},triggers:{"click .carousel__expand":"toggle","click .carousel__pagination--previous":"previous","click .carousel__pagination--next":"next"},regions:{library:".carousel__content",pages:".carousel__dots"}});c.DigitalBooks=f.Object.extend({initialize:function(a){this.books=a.books;this.className=a.className},viewOptions:function(){return _.extend({},this.className?{className:this.className}:null)},onRender:function(){var a=this;this.showLibrary();this.library.$el.on("scroll",
_.debounce(function(){return a.onScroll()},100));$(window).on("resize.carousel",_.debounce(function(){return a.onResize()},100));this.listenTo(this.library,"destroy",function(){return a.onDestroy()})},onDestroy:function(){$(window).off("resize.carousel")},onRenderLibrary:function(){this.library.$el.addClass("cardGrid--"+(this.books.length%2?"odd":"even"));this.updateDummyCards();this.updateVisibleCards();this.showPages();this.updateCarouselControls()},onResize:function(){this.updateDummyCards();this.updateVisibleCards();
this.updateCarouselControls();this.updateCarouselScroll(1,!1)},onScroll:function(){this.updateVisibleCards();this.updateCarouselControls()},hasSinglePage:function(){return 1==this.totalPages()},isExpanded:function(){return this.view.$(".carousel").hasClass("carousel--expanded")},showLibrary:function(){this.library=new d({collection:this.books});this.listenTo(this.library,"attach",this.onRenderLibrary.bind(this));this.listenTo(this.library,"book:open",this.onBookOpen.bind(this));this.listenTo(this.library,
"book:buy",this.onBuyClick.bind(this));this.listenTo(this.library,"book:triggerDownloadPrompt",this.triggerDownloadPrompt.bind(this));this.listenTo(this.library,"book:startDownload",this.startDownload.bind(this));this.listenTo(this.library,"book:cancelDownload",this.cancelDownload.bind(this));this.listenTo(this.library,"book:onToggle",this.onToggle.bind(this));this.listenTo(this.library,"book:onToggleOver",this.onToggleOver.bind(this));this.listenTo(this.library,"book:onToggleLeave",this.onToggleLeave.bind(this));
this.listenTo(this.library,"book:removeBook",this.removeBook.bind(this));this.listenTo(this.library,"book:cancelRemoveOverlay",this.cancelRemoveOverlay.bind(this));this.listenTo(a.vent,"book:startUpdate",this.updateBook.bind(this));this.view.showChildView("library",this.library)},showPages:function(){var c=this;this.pagination=new a.Model({pages:this.totalPages(),current:1});this.buttonsEnabled=!0;this.pages=new h({model:this.pagination});this.listenTo(this.pages,"goToPage",function(a){return c.updateCarouselScroll(a)});
this.view.showChildView("pages",this.pages);1<this.pagination.get("pages")&&this.pages.$el.parent().addClass("carousel__dots--visible")},getCardsPerPage:function(){return window.matchMedia("(min-width: 1245px)").matches?3:window.matchMedia("(min-width: 768px)").matches?2:1},$dummyCards:function(){return this.library.$(".card--dummy")},getNumberOfDummyCards:function(){var a=this.books.length,c=this.getCardsPerPage();if(a<c)return c-a;a%=c;return 1===c||0===a?0:c-a},updateDummyCards:function(){var a=
this.library.$el,c=this.getNumberOfDummyCards(),d=this.$dummyCards().length;if(c!==d){if(c>d)return _.times(c,function(){return a.append('<li class="card card--dummy"></li>')}),a.addClass("cardGrid--extraDummy");this.$dummyCards().get().slice(0,d-c).forEach(function(a){return $(a).remove()});0===this.$dummyCards().length&&a.removeClass("cardGrid--extraDummy")}},getView:function(){var a=this;this.view||(this.view=new l(this.viewOptions()),this.listenTo(this.view,"render",this.onRender.bind(this)),
this.listenTo(this.view,"toggle",this.toggle.bind(this)),this.listenTo(this.view,"previous",function(){return a.updateCarouselScroll("previous")}),this.listenTo(this.view,"next",function(){return a.updateCarouselScroll("next")}));return this.view},toggle:function(){this.view.$(".carousel").toggleClass("carousel--expanded");this.isExpanded()||(this.onToggleClosed(),$("html").animate({scrollTop:0},800))},onToggleClosed:function(){this.buttonsEnabled=!0;this.updateVisibleCards();this.updateCarouselControls()},
getScrollingTarget:function(a){var c=this.visibleCards.length;if("previous"===a)return this.visibleCards[0].prevAll().eq(c-1);if("next"===a)return this.visibleCards[c-1].next();a=c*(Number(a)-1);return this.library.$(".card").eq(a)},updateCarouselScroll:function(a,c){var d=this;c=void 0===c?!0:c;if(this.buttonsEnabled&&0!==this.visibleCards.length){var e=this.library.$el;this.buttonsEnabled=!1;a=this.getScrollingTarget(a);a=e.scrollLeft()+a.offset().left-e.offset().left;e.addClass("cardGrid--animated");
if(!c)return e.scrollLeft(a),this.onCarouselUpdated();e.animate({scrollLeft:a},500,function(){return d.onCarouselUpdated()})}},onCarouselUpdated:function(){this.updateVisibleCards();this.updateCarouselControls();this.library.$el.removeClass("cardGrid--animated");this.buttonsEnabled=!0},updateCarouselControls:function(){this.getView().$(".carousel__controls").toggleClass("hidden",this.hasSinglePage()&&!this.isExpanded());this.updateCarouselDots();this.updateCarouselButtons()},updateCarouselDots:function(){this.visibleCards&&
0<this.visibleCards.length&&this.pagination.set({pages:this.totalPages(),current:Math.ceil((this.visibleCards[0].index()+1)/this.visibleCards.length)})},updateCarouselButtons:function(){this.view.getUI("previous").attr("disabled",this.atFirstPage());this.view.getUI("next").attr("disabled",this.atLastPage())},isVisible:function(a){var c=this.view.$(".carousel");return a.visible()?a.position().left>=c.position().left:!1},updateVisibleCards:function(){var a=this;return this.visibleCards=this.library.$(".card").get().map(function(a){return $(a)}).filter(function(c){return a.isVisible(c)}).slice(0,
this.maxVisibleItems())},maxVisibleItems:function(){var a=this.view.$(".carousel").innerWidth(),c=this.library.$(".card").outerWidth(!0);return Math.round(a/c)},totalPages:function(){return Math.ceil(this.books.length/this.visibleCards.length)},scrollLeft:function(){return this.library.$el.get(0).scrollLeft},scrollWidth:function(){return this.library.$el.get(0).scrollWidth},atFirstPage:function(){return 0===this.scrollLeft()},atLastPage:function(){return Math.round(this.library.$el.outerWidth()+this.scrollLeft())>=
this.scrollWidth()},getBookUrl:function(c){return"/api/courses/"+a.state.getCourse().id+"/digital_books/"+c.id+".html"},isLtiBook:function(c){return c.get("launcher")===a.ContentLauncherService.Service.Lti},isAvailable:function(c){return c.get("purchased")[a.profile.get("type")]},onBookOpen:function(c){if(this.isAvailable(c.model)){var d=this.getBookUrl(c.model);this.isLtiBook(c.model)?(new a.ContentLauncherService.Lti).launch(d):window.open(d);return!1}},onBuyClick:function(c,d){c.model.get("purchased")[a.profile.get("type")]||
window.open($(d.target).attr("href"));return!1},show:function(a){a.show(this.getView())},triggerDownloadPrompt:function(a,c){$(c.currentTarget).next(".card__download-overlay").fadeIn({duration:300});$(c.currentTarget).closest("li").css("cursor","default")},startDownload:function(c,d,e){e=void 0===e?!1:e;var f=this,h,k,m,l,n,q,A,C,D,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress)return f.askForDataPersistance(),e||(h=$(d.currentTarget).closest(".card__download-overlay"),
k=h.next(".card__download-overlay-in-progress"),m=k.fadeIn({duration:300}).promise(),m.always(function(){return h.fadeOut({duration:300})})),l=e?d.currentTarget.find(".card__update-spinner"):k.find(".card__download-spinner"),n=new ProgressBar.Circle(l[0],f.getProgressBarConfig()),t.setCatchFinallyBlocks(2),q=new a.BookDownloadHelper,t.yield(q.generateLinksForAssets(c.model.attributes,a.state.getCourse().id),4);if(2!=t.nextAddress)return A=t.yieldResult,C=$jscomp.makeIterator(A),D=C.next().value,O=
C.next().value,f.sendDataToServiceWorker(D,c.model.attributes,n,O,a.state.getCourse().id,e),t.leaveTryBlock(0);t.enterCatchBlock();f.handleFetchingError(c.model.attributes,e);t.jumpToEnd()})},cancelDownload:function(a,c){$(c.currentTarget).closest(".card__download-overlay").fadeOut({duration:300});$(c.currentTarget).closest("li").css("cursor","pointer")},askForDataPersistance:function(){navigator.storage&&navigator.storage.persist&&navigator.storage.persist()},sendDataToServiceWorker:function(a,c,
d,e,f,h){var k=this,m="object"===typeof uuid?uuid.v4():Math.random();this.SWHandler=function(a){return k.handleServiceWorkerResponse(a,c,d,m,h,function(a){return d=a})};workbox.messageSW({type:h?"UPDATE_ASSETS":"CACHE_ASSETS",items:a,book:c,hash:m,PDFDirId:e,courseId:f});workbox.addEventListener("message",this.SWHandler)},handleServiceWorkerResponse:function(a,c,d,e,f,h){a.data&&"FETCHED"===a.data.type&&a.data.bookId===c.id&&e===a.data.hash?(document.contains(d._container)||(c=this.restoreDownloadUi(c.id,
f))&&h(c),d.animate(a.data.progress)):a.data&&"FETCHING_FINISHED"===a.data.type&&a.data.bookId===c.id&&e===a.data.hash?this.handleFetchingFinished(c,f):a.data&&"FETCHING_ERROR"===a.data.type&&a.data.bookId===c.id&&e===a.data.hash&&this.handleFetchingError(c,f)},handleFetchingFinished:function(c,d){var e=d?".card__update-spinner":".card__download-spinner",f=$('li[data-id="'+c.id+'"]');f.find(".card__dropdown").css("display","block");f.css("cursor","pointer");f.find(".card__download").css("display",
"none");d?(showNotification((new a.NotificationTemplates).bookUpdateSuccess()),f.find(".card__manage-download-with-update").css("display","none"),f.find(".card__manage-download-without-update").css("display","block"),f.find(".card__update-overlay-in-progress").fadeOut({duration:300}),$("#dropdown-"+c.id).find(".dropdown__update-button").remove()):(showNotification((new a.NotificationTemplates).offlineDownloadSuccess()),f.find(".card__manage-download-without-update").css("display","block"),f.find(".card__download-overlay-in-progress").fadeOut({duration:300}));
(c=f.find(e)[0])&&c.firstChild.remove()},handleFetchingError:function(c,d){d?showNotification((new a.NotificationTemplates).offlineUpdateFailed(a.profile.isTeacher())):showNotification((new a.NotificationTemplates).offlineDownloadFailed(a.profile.isTeacher()));c=$('li[data-id="'+c.id+'"]');c.css("cursor","pointer");var e=d?".card__update-overlay-in-progress":".card__download-overlay-in-progress";d=c.find(d?".card__update-spinner":".card__download-spinner")[0];c.find(e).fadeOut({duration:300});d&&
d.firstChild.remove()},restoreDownloadUi:function(a,c){if($("ol.books").length&&(a=$('li[data-id="'+a+'"]'),a.length&&(a=c?a.find(".card__update-overlay-in-progress"):a.find(".card__download-overlay-in-progress"),c=c?a.find(".card__update-spinner"):a.find(".card__download-spinner"),!(0<c.children().length))))return a.fadeIn({duration:300}),new ProgressBar.Circle(c[0],this.getProgressBarConfig())},getProgressBarConfig:function(){return{strokeWidth:8,easing:"easeInOut",duration:0,color:"#fff",trailColor:"#575757",
trailWidth:4,svgStyle:null}},onToggle:function(a){$("#dropdown-"+a.model.id).toggleClass("dropdown--enabled")},onToggleOver:function(a){this.setPositionOfDropdown(a);var c=$("#dropdown-"+a.model.id);a.closeDelay&&(clearTimeout(a.closeDelay),a.closeDelay=null);c.addClass("dropdown--enabled")},onToggleLeave:function(a){var c=$("#dropdown-"+a.model.id);a.closeDelay=setTimeout(function(){return c.removeClass("dropdown--enabled")},600)},setPositionOfDropdown:function(a){var c=a.$el.find(".card__dropdown").offset();
$("#dropdown-"+a.model.id).css("transform","translate("+(c.left+"px")+","+(c.top+"px")+")")},removeBook:function(c){var d=this,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return e=(new a.IndexedDbService).getDb(),h.yield(e.books.where({bookId:c.model.id}).first(),2);f=h.yieldResult;workbox.messageSW({type:"BOOK_DELETE",PDFDirId:f.PDFDirId,bookId:f.bookId});e.books.where({bookId:c.model.id}).delete();showNotification((new a.NotificationTemplates).removeBookSuccess());
d.cancelRemoveOverlay(c);c.$el.find(".card__dropdown").css("display","none");c.$el.find(".card__download").css("display","block");h.jumpToEnd()})},updateBook:function(a){var c=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){d=$('li[data-id="'+a.model.id+'"]');d.find(".card__update-overlay-in-progress").fadeIn({duration:300});d.css("cursor","default");a.closeDropdown(a.model.id);c.startDownload(a,{currentTarget:d},!0);e.jumpToEnd()})},cancelRemoveOverlay:function(a){a.$el.find(".card__remove-overlay").fadeOut({duration:300});
a.$el.css("cursor","pointer")}})})(Osp,Osp.Components,Marionette);
(function(a,c){var f=a.View.extend({tagName:"button",className:"filtersToggle button button--icon",template:"common/components/filters_toggler-template",templateContext:{showLabel:function(){return!this.hideLabel}},initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this.hideLabel=c.hideLabel||!1},triggers:{click:"toggle"},toggleFilterHighlight:function(a){this.$el.toggleClass("filtersToggle--highlighted",a)},serializeData:function(){return{hideLabel:this.hideLabel}}});c.Filters=
c.Component.extend({view:f,viewOptions:function(){return _.extend({hideLabel:this.hideLabel},c.Component.prototype.viewOptions.call(this))},onCreate:function(a){this.listenTo(a,"toggle",this.toggle.bind(this));this.listenTo(a,"render",this.toggleFilterHighlight.bind(this));this.listenTo(this.collection,"change:selected",_.debounce(this.toggleFilterHighlight.bind(this,50)))},toggleFilterHighlight:function(){this.getView().toggleFilterHighlight(this.someFilterHighlighted())},someFilterHighlighted:function(){return this.collection.some(function(a){return a.isHighlighted()})},
getPanel:function(){if(this.panel)return this.panel;this.panel=new c.SidePanel({title:I18n.t("ui.search.title"),component:new c.Form({collection:this.collection}),className:"sidepanel sidepanel--filters"});this.panel.show(this.getView());return this.panel},toggle:function(){this.getPanel().toggle()}})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({highlightClassName:"highlighted",templateContext:{isSelected:function(a){return this.selected&&a.value===this.selected.value}},modelEvents:{change:"render","change:selected":"toggleHighlight"},events:{"click input[type=radio]":"onSelect"},toggleHighlight:function(){this.$el.toggleClass(this.highlightClassName,this.model.isHighlighted())},getSelected:function(){var a=this.model.get("selected")||this.model.get("defaultOption");return _.find(this.model.get("options"),
function(c){return c.value===a})||this.model.get("options")[0]},onSelect:function(a){this.model.set("selected",$(a.currentTarget).val());this.$('input[type="radio"][value="'+a.currentTarget.value+'"]').focus()},serializeData:function(){return _.extend({},a.View.prototype.serializeData.apply(this),{selected:this.getSelected()})}}),d=e.extend({className:"accordion",highlightClassName:"accordion--highlighted",template:"common/components/form/accordion_list-template",events:_.extend({"click .accordion__toggle":"onToggle"},
e.prototype.events),ui:{accordionToggle:".accordion__toggle"},templateContext:function(){return Object.assign({},e.prototype.templateContext,{getUniqueIdentifier:function(){return"sortBy_"+this.name}})},onToggle:function(a){a.preventDefault();this.$el.toggleClass("accordion--enabled");this.ui.accordionToggle.attr("aria-expanded",this.$el.hasClass("accordion--enabled"))}}),h=d.extend({template:"common/components/form/accordion_list_multiple-template",templateContext:{isSelected:function(a){return _(this.selected).chain().pluck("value").contains(a.value).value()}},
events:_.extend({"click input[type=checkbox]":"onSelect"},d.prototype.events),getSelected:function(){return _(this.model.get("selected")||[]).map(function(a){return _(this.model.get("options")).findWhere({value:a})}.bind(this))},getChecked:function(){return this.$(":checkbox:checked").map(function(){return $(this).val()}).get()},onSelect:function(){var a=this.getChecked();_(a).isEmpty()?this.model.unset("selected"):this.model.set("selected",a)}}),k=e.extend({className:"dropdown",template:"common/components/form/dropdown_list-template",
ui:{option:".dropdown__item",toggler:".dropdown__toggle"},events:_.extend({"click @ui.toggler":"onToggle","touchend @ui.toggler":"onToggle","click @ui.option":"onClickOption","mouseover @ui.toggler":"onToggleOver","mouseleave @ui.toggler":"onToggleLeave"},e.prototype.events),onToggle:function(a){a.preventDefault();this.$el.toggleClass("dropdown--enabled")},closeDelay:0,onToggleOver:function(){clearTimeout(this.closeDelay);this.$el.parent().find(".dropdown--enabled").removeClass("dropdown--enabled");
this.$el.addClass("dropdown--enabled")},onToggleLeave:function(){this.closeDelay=setTimeout(function(){this.$el.removeClass("dropdown--enabled")}.bind(this),600)},onClickOption:function(){this.$el.hasClass("dropdown--one")&&(this.$el.removeClass("dropdown--enable").addClass("dropdown--oneSelected"),setTimeout(function(){this.$el.removeClass("dropdown--oneSelected")}.bind(this),300))}});f=a.View.extend({className:"filtersSidepanel__field",template:"common/components/form/query-template"});var l=a.View.extend({className:"filtersSidepanel__field filtersSidepanel__field--spaced",
template:"common/components/form/reset-template",triggers:{"click a":"reset"}}),m=a.CollectionView.extend({tagName:"form",childViewEventPrefix:"field",childView:function(a){return a.get("format")}});c.Form=c.Component.extend({view:m,onCreate:function(a){this.listenTo(a,"field:reset",this.reset.bind(this))},reset:function(){this.collection.each(function(a){_.isFunction(a.reset)&&a.reset()})}});c.Form.Field=c.Component.extend({view:function(){return this.format||this.model.get("format")}});c.Form.ListFormat=
{DROPDOWN:k,ACCORDION:d,ACCORDION_MULTIPLE:h};d=a.Model.extend({reset:function(){this.has("defaultOption")?this.set("selected",this.get("defaultOption")):this.unset("selected")},getSearchTerm:function(){var a={};this.has("selected")&&(a[this.get("name")]=this.get("selected"));return a},isHighlighted:function(){return this.get("highlight")?!_.isEmpty(this.get("selected"))&&this.get("selected")!==this.get("defaultOption"):!1}});c.Form.List=d.extend({defaults:{format:c.Form.ListFormat.ACCORDION,multiple:!1}});
c.Form.Query=d.extend({defaults:{format:f}});c.Form.Reset=d.extend({defaults:{format:l}})})(Osp,Osp.Components,Marionette);
(function(a,c,f){var e=a.View.extend({template:"common/components/groups/layout-template",behaviors:[a.Behaviors.Tabs],regions:{groups:"#groups",students:"#students"},ui:{studentsCounter:"[data-counter=students]"},updateUsersCounter:function(a){this.getUI("studentsCounter").toggleClass("badge--muted",!a).text(a)}}),d=a.View.extend({className:"controls item",tagName:"li",ui:{selectionToggler:"[type=checkbox]"},modelEvents:{"change:selected":"onChangeSelected"},triggers:{"click @ui.selectionToggler":{event:"selection:toggle",
preventDefault:!1,stopPropagation:!0}},onChangeSelected:function(){this.updateToggler()},updateToggler:function(){this.getUI("selectionToggler").prop("checked",this.model.get("selected"))}}),h=a.View.extend({tagName:"li",attributes:function(){return{"data-depth":this.model.get("depth")}},modelEvents:{"change:selected":"onChangeSelected"},ui:{selectionToggler:"[type=checkbox]"},triggers:{"click @ui.selectionToggler":{event:"selection:toggle",preventDefault:!1,stopPropagation:!0}},childViewTriggers:{"group:selection:toggle":"selection:toggle"},
regions:{tree:{el:".children",replaceElement:!0}},onRender:function(){this.model.children().isEmpty()||this.renderChildren()},renderChildren:function(){this.showChildView("tree",new l({className:"children",collection:this.model.children()}))},onChangeSelected:function(){this.updateToggler()},updateToggler:function(){this.getUI("selectionToggler").prop("checked",this.model.get("selected"))}}),k=a.View.extend({tagName:"li",className:"helpCard",template:"common/components/groups/no_students-template"});
k=a.CollectionView.extend({tagName:"ul",emptyView:k,childViewEventPrefix:"student"});var l=a.CollectionView.extend({tagName:"ul",className:"tree tree--branched",childViewEventPrefix:"group"}),m={StudentView:d.extend({template:"common/components/groups/multiple/student-template"}),GroupNode:h.extend({template:"common/components/groups/multiple/group-template",renderChildren:function(){this.showChildView("tree",new m.GroupsTree({className:"children",collection:this.model.children()}))}})};m.GroupsTree=
l.extend({childView:m.GroupNode});m.StudentsList=k.extend({childView:m.StudentView});var n={StudentView:d.extend({template:"common/components/groups/single/student-template",ui:{selectionToggler:"[type=radio]",viewButton:"[data-action=view]"},triggers:{"change @ui.selectionToggler":{event:"selection:toggle",preventDefault:!1,stopPropagation:!0},"click @ui.viewButton":"view"},updateViewButton:function(){var a=this.getUI("viewButton");this.model.get("selected")?a.addClass("viewButton--active"):a.removeClass("viewButton--active")},
onChangeSelected:function(){this.updateToggler();this.updateViewButton()}}),GroupNode:h.extend({template:"common/components/groups/single/group-template",ui:{selectionToggler:"[type=radio]",viewButton:"[data-action=view]"},triggers:{"change @ui.selectionToggler":{event:"selection:toggle",preventDefault:!1,stopPropagation:!0},"click @ui.viewButton":"view"},childViewTriggers:_.extend({"group:view":"view"},h.prototype.childViewTriggers),renderChildren:function(){this.showChildView("tree",new n.GroupsTree({className:"children",
collection:this.model.children()}))},updateViewButton:function(){var a=this.getUI("viewButton");this.model.get("selected")?a.addClass("viewButton--active"):a.removeClass("viewButton--active")},onChangeSelected:function(){this.updateToggler();this.updateViewButton()}})},q=a.View.extend({template:"common/components/groups/single/group-template",ui:{selectionToggler:"[type=radio]",viewButton:"[data-action=view]"},events:{"change @ui.selectionToggler":"onSelectToggle"},triggers:{"click @ui.viewButton":"view:all"},
isChecked:function(){return this.getUI("selectionToggler").is(":checked")},onSelectToggle:function(){this.updateViewButton();this.isChecked()&&this.trigger("select:all")},onRender:function(){this.updateViewButton()},updateViewButton:function(){var a=this.getUI("viewButton");this.isChecked()?a.addClass("viewButton--active"):a.removeClass("viewButton--active")},noGroupSelected:function(){var a=!1;this.collection.eachRecursive(function(c){c.get("selected")&&(a=!0)});return!a},serializeData:function(){return{id:"",
name:I18n.t("ui.common.all_groups"),selected:this.noGroupSelected()}}});n.GroupsTree=l.extend({childView:n.GroupNode});n.RootGroupsTree=n.GroupsTree.extend({childView:n.GroupNode,initialize:function(a){n.GroupsTree.prototype.initialize.apply(this,arguments);this.allGroups=a.allGroups},getAllGroupsView:function(){return this.allGroupsView?this.allGroupsView:this.allGroupsView=new q({collection:this.collection})},onRender:function(){this.allGroups&&this.addChildView(this.getAllGroupsView(),0)}});n.StudentsList=
k.extend({childView:n.StudentView});c.Groups={};c.Groups.Base=c.Component.extend({view:e,groupsView:l,studentsView:k,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.students=new a.Collection},waitForDependencies:function(){var a=this;return this.getStore(f.TYPE.GROUPS).fetch().done(function(c){a.groups=c.cloneRecursive();a.selectDefaults()})},selectDefaults:function(){this.selected&&(this.selected.id&&this.preselect([this.selected.id]),this.preselect([this.selected.group.id],
this.selected.student?[this.selected.student.id]:[]))},onCreate:function(a){this.listenTo(a,"render",this.showGroups.bind(this));this.listenTo(a,"render",this.showStudents.bind(this))},getClass:function(a){return this.namespace[a]},groupsViewOptions:function(){return{collection:this.groups}},showGroups:function(){var a=new this.groupsView(this.groupsViewOptions());this.listenTo(a,"group:selection:toggle",this.onSelectGroup.bind(this));this.getView().showChildView("groups",a);return a},preselect:function(a,
c){var d=[];this.groups.eachRecursive(function(c){c.set({selected:_(a).contains(c.id)});c.get("selected")&&(d=d.concat(c.getUsers()))});this.students.set(d);this.students.each(function(a){a.set({selected:_(c).contains(a.id)})})},showStudents:function(){var a=new this.studentsView({collection:this.students});this.listenTo(a,"student:selection:toggle",this.onSelectStudent.bind(this));this.getView().showChildView("students",a);return a},setStudents:function(){var a=[];this.groups.eachRecursive(function(c){c.get("selected")&&
(a=a.concat(c.getUsers()))});this.students.set(a)},onSelectGroup:function(a){a.model.set({selected:!0});this.setStudents()},onSelectStudent:function(a){a.model.set({selected:!0})},selectedStudents:function(){return this.students.allThatAre("selected")},studentIds:function(){return _(this.selectedStudents()).pluck("id")},selectedGroups:function(){var a=[];this.groups.eachRecursive(function(c){c.get("selected")&&a.push(c)});return a},groupIds:function(){return _(this.selectedGroups()).pluck("id")}});
c.Groups.Multiple=c.Groups.Base.extend({groupsView:m.GroupsTree,studentsView:m.StudentsList,showStudents:function(){c.Groups.Base.prototype.showStudents.call(this);this.listenTo(this.students,"add",this.onStudentAdded.bind(this));this.listenTo(this.students,"change:selected update",this.onStudentsChange.bind(this))},toggleChildren:function(a){a.children().isEmpty()||a.children().each(function(c){c.set({selected:a.get("selected")});this.toggleChildren(c)}.bind(this))},onStudentsChange:function(){this.updateUsersCounter()},
onSelectGroup:function(a){a.model.set({selected:!a.model.get("selected")});this.toggleChildren(a.model);this.setStudents()},onSelectStudent:function(a){a.model.set({selected:!a.model.get("selected")})},onStudentAdded:function(a){a.set({selected:!0})},updateUsersCounter:function(){this.getView().updateUsersCounter(this.selectedStudents().length)}});c.Groups.Single=c.Groups.Base.extend({groupsView:n.RootGroupsTree,studentsView:n.StudentsList,initialize:function(){c.Groups.Base.prototype.initialize.apply(this,
arguments);this.allGroups=_(this.allGroups).isUndefined()?!0:this.allGroups},showGroups:function(){var a=c.Groups.Base.prototype.showGroups.call(this);this.listenTo(a,"group:view",this.onViewGroup.bind(this));this.allGroups&&(this.listenTo(a,"group:view:all",this.onViewAllGroups.bind(this)),this.listenTo(a,"group:select:all",this.onSelectAllGroups.bind(this)),this.allGroupsView=a.getAllGroupsView())},groupsViewOptions:function(){return{collection:this.groups,allGroups:this.allGroups}},showStudents:function(){var a=
c.Groups.Base.prototype.showStudents.call(this);this.listenTo(a,"student:view",this.onViewStudent.bind(this))},updateAllGroups:function(){this.allGroups&&this.allGroupsView.updateViewButton()},deselectGroups:function(){_(this.selectedGroups()).invoke("set",{selected:!1})},deselectStudents:function(){_(this.selectedStudents()).invoke("set",{selected:!1})},setStudents:function(){c.Groups.Base.prototype.setStudents.call(this);this.deselectStudents()},selectedGroup:function(){return _(this.selectedGroups()).first()},
onSelectGroup:function(){this.deselectGroups();c.Groups.Base.prototype.onSelectGroup.apply(this,arguments);this.updateAllGroups()},onSelectStudent:function(){this.deselectStudents();c.Groups.Base.prototype.onSelectStudent.apply(this,arguments)},onViewGroup:function(a){this.deselectStudents();this.trigger("view:group",a.model)},onViewStudent:function(a){this.trigger("view:student",a.model,this.selectedGroup())},onViewAllGroups:function(){this.trigger("view:all_groups")},onSelectAllGroups:function(){this.deselectGroups();
this.students.reset()}})})(Osp,Osp.Components,Osp.Store);
(function(a,c,f){var e=a.View.extend({behaviors:[a.Behaviors.Math],template:"common/components/tree-node",tagName:"li",childViewEventPrefix:!1,modelEvents:{"change:expanded":"onModelChangeExpanded","change:leaf":"onModelChangeLeaf","change:active":"onModelChangeActive"},regions:{tree:{el:"ul.children",replaceElement:!0}},serializeModel:function(){return _.clone(this.model.pick("leaf","lookable_name"))},triggers:{"click a.toggle":"toggle:expand","click a.select":"select"},childViewTriggers:{"node:toggle:expand":"toggle:expand",
"node:select":"select"},templateContext:function(){var a=this.model;return{iconClass:function(){return a.get("leaf")?"tree-icon-vertex":a.get("expanded")?"tree-icon-expanded":"tree-icon-contracted"},folderStatusText:function(){return a.get("leaf")?"":a.get("expanded")?I18n.t("ui.browser.structures.expanded"):I18n.t("ui.browser.structures.collapsed")},title:function(){return a.get("available")?a.get("lookable_name"):I18n.t("ui.browser.structures.unpurchased")},unpurchasedClassIfNotAvailable:function(){return a.get("available")?
"":"unpurchased"}}},initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this._shouldRenderChildren=!0;this.filter=c.filter||null},onRender:function(){this._shouldRenderChildren&&this._renderChildren();this._updateActiveClass()},onModelChangeActive:function(){this._updateActiveClass()},onModelChangeExpanded:function(){this.render()},onModelChangeLeaf:function(){this.render()},_lightRender:function(){var a=this.detachChildView("tree");this._shouldRenderChildren=!1;this.render();
this._shouldRenderChildren=!0;this.showChildView("tree",a)},_renderChildren:function(){if(this.model.get("expanded")){var a=this.model.children();a.isEmpty()||(a=new d({collection:a,className:"nav nav-list children",filter:this.filter}),this.showChildView("tree",a))}},_updateActiveClass:function(){this.$el.toggleClass("active",this.model.get("active"))}}),d=a.CollectionView.extend({childView:e,childViewEventPrefix:"node",tagName:"ul",childViewOptions:function(){return{filter:this.filter||null}},scrollToActiveNode:function(a){var c=
this.$(".active > .controls");a=a[0];(c=c[0])&&!this._isNodeVisibleInContainer(c,a)&&(a.scrollTop=c.offsetTop)},_isNodeVisibleInContainer:function(a,c){return a.offsetTop>c.scrollTop&&a.offsetTop+a.offsetHeight<c.scrollTop+c.offsetHeight}});c.LegacyTree=f.Object.extend({initialize:function(a){this.mergeOptions(a,["region","nodes","scroll","$scrollable","filter"]);this.active=null;this.onWindowResize=this.onWindowResize.bind(this);this._scrollToActiveNode=_.debounce(this._scrollToActiveNode,200);$(window).on("resize",
this.onWindowResize)},show:function(){this.treeView=new d({collection:this.nodes,filter:this.filter||null});this.treeView.on("node:select",function(a){this.triggerMethod("node:select",a.model)},this);this.treeView.on("node:toggle:expand",function(a){a=a.model;a.set("expanded",!a.get("expanded"))},this);this.treeView.on("dom:attach",function(){this.scroll&&this._scrollToActiveNode()},this);this.treeView.on("destroy",function(){this.destroy()},this);this.region.show(this.treeView)},deselect:function(){this.active&&
this.active.set("active",!1);this.active=null},select:function(a){a!==this.active&&(this.active&&this.active.set("active",!1),this.active=a,this.active.expandAndActivate(),this.scroll&&this.$scrollable&&this.scrollToActiveNode())},getActive:function(){return this.active},onBeforeDestroy:function(){$(window).off("resize",this.onWindowResize)},onWindowResize:function(){this.scroll&&this._scrollToActiveNode()},scrollToActiveNode:function(){this.treeView.scrollToActiveNode(this.$scrollable)}})})(Osp,
Osp.Components,Marionette);
(function(a,c){var f=a.View.extend({tagName:"li",className:"navigationTabs__item",template:"common/components/lens_filter-template",triggers:{"click button":"select"},modelEvents:{"change:active":"updateActiveClass"},templateContext:function(){return{name:I18n.t(_.str.sprintf("ui.lens_filters.%s",this.model.get("name")))}},onRender:function(){this.updateActiveClass()},updateActiveClass:function(){this.$el.toggleClass("navigationTabs__item--active",this.model.get("active"))}});a=a.CollectionView.extend({tagName:"ul",
className:"navigationTabs",childView:f,childViewEventPrefix:"filter"});c.LensFilters=c.Component.extend({view:a,onCreate:function(a){this.updateActiveFilter();this.listenTo(a,"filter:select",this.onSelect.bind(this))},onSelect:function(a){this.select(a.model)},updateActiveFilter:function(){this.active=this.collection.findWhere({active:!0})},select:function(a){void 0===this.active&&this.updateActiveFilter();a!==this.active&&(this.active&&this.active.set("active",!1),this.active=a,this.active.set("active",
!0))}})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({templateContext:{isSelected:function(a){return this.selected&&a.value===this.selected.value}},triggers:{"click input[type=radio]":{event:"select",preventDefault:!1}},modelEvents:{"change:options":"render"},getSelected:function(){var a=this.model.get("selected")||this.model.get("defaultOption");return _.find(this.model.get("options"),function(c){return c.value===a})||this.model.get("options")[0]},serializeData:function(){return _.extend({},a.View.prototype.serializeData.apply(this),
{selected:this.getSelected()})}}),d=a.CollectionView.extend({childViewEventPrefix:"filter"}),h=e.extend({className:"accordion",template:"common/components/list_filters/accordion_filter-template",events:{"click .accordion__toggle":"onToggle"},ui:{accordionToggle:".accordion__toggle"},templateContext:function(){return Object.assign({},e.prototype.templateContext,{getUniqueIdentifier:function(){return"sortBy_"+this.name}})},onToggle:function(a){a.preventDefault();this.$el.toggleClass("accordion--enabled");
this.ui.accordionToggle.attr("aria-expanded",this.$el.hasClass("accordion--enabled"))}});h=d.extend({childView:h});var k=e.extend({tagName:"li",className:"dropdown dropdown--filter dropdown--one",template:"common/components/list_filters/dropdown_filter-template",ui:{toggler:".dropdown__toggle",option:".dropdown__item"},events:{"click @ui.toggler":"onToggle","mouseover @ui.toggler":"onToggleOver","mouseleave @ui.toggler":"onToggleLeave","click @ui.option":"onClickOption"},modelEvents:{"change:selected":"changeSelectedLabel",
"change:options":"render"},onToggle:function(a){a.preventDefault();this.$el.toggleClass("dropdown--enabled")},closeDelay:0,onToggleOver:function(){clearTimeout(this.closeDelay);this.$el.parent().find(".dropdown--enabled").removeClass("dropdown--enabled");this.$el.addClass("dropdown--enabled")},onToggleLeave:function(){this.closeDelay=setTimeout(function(){this.$el.removeClass("dropdown--enabled")}.bind(this),600)},onClickOption:function(){this.$el.hasClass("dropdown--one")&&(this.$el.removeClass("dropdown--enable").addClass("dropdown--oneSelected"),
setTimeout(function(){this.$el.removeClass("dropdown--oneSelected")}.bind(this),300))},changeSelectedLabel:function(){this.$(".selected").text(this.getSelected().label)}}),l={DROPDOWN:d.extend({tagName:"ul",childView:k,triggers:{"click .reset":"reset"},onRender:function(){this.$(".reset").parent("li").remove();this.$el.append('<li><a role="button" class="reset">'+I18n.t("ui.homepage.filters.reset")+" </a></li>")}}),ACCORDION:h};c.ListFilters=f.Object.extend({initialize:function(a){this.filters=a.filters;
this.className=a.className;this.viewClass=a.format||l.DROPDOWN},viewOptions:function(){return _.extend({collection:this.filters},this.className?{className:this.className}:null)},getView:function(){this.view||(this.view=(new this.viewClass(this.viewOptions())).on("reset",this.reset.bind(this)).on("filter:select",this.onFilterSelect.bind(this)));return this.view},show:function(a){a.show(this.getView())},reset:function(){this.filters.invoke("set",{selected:null});this.getView().render()},onFilterSelect:function(a,
c){a.model.set("selected",$(c.currentTarget).val())}});c.ListFilters.Format=l})(Osp,Osp.Components,Marionette);
(function(a,c){var f=Backbone.Radio.channel("my_profile:public"),e=Backbone.Radio.channel("my_profile:navigation"),d=a.View.extend({triggers:{"click button[type=button]":"cancel","click button[type=submit]":"save"},templateContext:{isConfirmationScreen:function(){return this.must_change_password},isSelfStudyTeacher:function(){return a.profile.get("self_study")&&a.profile.isTeacher()}},toggleMyProfileActions:function(a){this.$el.find(".section__footer").toggleClass("hidden",!a)},toogleInfoMessageSuccess:function(a){this.$(".messageDone").toggleClass("message--visible",
a)},toogleMessageError:function(a){this.$(".messageError").toggleClass("message--visible",a)}}),h=d.extend({template:"global/my_profile/teacher_layout-template",rawErrorFor:["subjects"],regions:{form:".myprofile__account",school:".myprofile__school",courses:".myprofile__courses .coursesList",subjects:".myprofile__subjects .subjectsList",contact:{el:".myprofile__contact",replaceElement:!0}},ui:{tab:".navigationTabs__button",panels:".tabPanel"},events:{"click @ui.tab":"onTabClick"},onTabClick:function(a){a=
$(a.currentTarget);var c=a.data("panel");this.$(".navigationTabs__item--active").removeClass("navigationTabs__item--active");a.parent().addClass("navigationTabs__item--active");this.getUI("panels").removeClass("tabPanel--active");this.$(c).addClass("tabPanel--active")},showSubjectsError:function(){this.$(".myprofile__subjects").addClass("error")},clearErrors:function(){this.$(".myprofile__subjects").removeClass(".clearErrors")},toggleMyProfileActions:function(){d.prototype.toggleMyProfileActions.apply(this,
arguments)}}),k=d.extend({template:"global/my_profile/student_layout-template",templateContext:_.extend({getCoursesListTitle:function(){return a.profile.get("self_study")?I18n.t("ui.my_profile.courses.title_self_study_user"):I18n.t("ui.my_profile.courses.title_student")}},d.prototype.templateContext),regions:{form:".myprofile__account",courses:".myprofile__courses .coursesList"}}),l=a.FormView.extend({behaviors:[{rawErrorFor:["first_name","last_name","username","display_name","email"],behaviorClass:a.Behaviors.FormErrors}],
template:"global/my_profile/form-template",tagName:"form",triggers:{"keyup input":"fieldsChanged"},templateContext:{isConfirmationScreen:function(){return this.must_change_password},getPasswordInstructions:function(){return I18n.t("ui.my_profile.account.password_instructions."+a.profile.get("type")+".instruction")},isStudent:function(){return a.profile.isStudent()},isTeacher:function(){return a.profile.isTeacher()},isManagedStudent:function(){return a.profile.get("managed")&&a.profile.isStudent()},
isSelfStudyTeacher:function(){return a.profile.get("self_study")&&a.profile.isTeacher()},showEmailTipInfobox:function(){return(new a.TokenAccessService).isTokenAccessUser()}},displayErrors:function(a){this.trigger("displayErrors",a);this.trigger("scrollToFirstError")},clearErrors:function(){this.trigger("clearErrors")},serializeData:function(){return _.extend({must_change_password:this.model.get("must_change_password")},this.model.get("school"))}}),m=a.FormView.extend({tagName:"article",className:"myprofile__contact",
template:"global/my_profile/contact_preferences-template"}),n=a.View.extend({template:"global/my_profile/school-template",templateContext:function(){return{showInviteAction:function(){return this.getAdminStatus()!=a.Invitation.waitingAdminConfirmation}.bind(this)}},initialize:function(){this.setAdminStatus(gon.adminState);this.listenTo(a.vent,"users:set_admin_status",this.onSetAdminStatus.bind(this))},events:{"click a[role=invite]":"onInvite"},onSetAdminStatus:function(a){this.setAdminStatus(a);this.render()},
setAdminStatus:function(a){this._adminStatus=a},getAdminStatus:function(){return this._adminStatus},onInvite:function(){a.CourseApp.Lens.Users.Invitations.showAdminDialog()},serializeData:function(){return this.model.get("school")}}),q=a.View.extend({initialize:function(){var a=Math.ceil(this.collection.length/2);this.$().ready(function(){$(".myprofile__coursesList").css("--numberOfRows",a)})},template:"global/my_profile/courses-template",serializeData:function(){return{courses:this.collection.pluck("name")}}}),
t=c.Component.extend({initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.changed=!1;this.courses=a.courses;this.isConfirmationScreen=this.model.get("must_change_password");this.saveDefaults()},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this));this.listenTo(a,"save",this.save.bind(this));this.attach()},onRender:function(){this.showForm();this.showCourses()},attach:function(){this.listenTo(this.model,
"change",this.onProfileChange.bind(this));f.reply("exit",this.exit.bind(this));f.reply("profile:has_changed",this.hasChanged.bind(this))},saveDefaults:function(){this.model.defaults=this.model.clone().attributes;this.model.defaults.accept_tips=this.model.get("properties").accept_tips},restoreDefaults:function(){this.model.set(this.model.defaults);this.model.get("accept_tips")?this.model.setProperty("accept_tips",!0):this.model.unsetProperty("accept_tips")},enableSubmit:function(){this.getView().toggleMyProfileActions(!0)},
disableSubmit:function(){this.getView().toggleMyProfileActions(!1)},onDestroy:function(){f.stopReplying("exit");f.stopReplying("profile:has_changed")},showForm:function(){this.form=new l({model:this.model});this.getView().showChildView("form",this.form);this.listenTo(this.form,"fieldsChanged",this.enableSubmit.bind(this))},showCourses:function(){this.model.get("must_change_password")&&a.profile.isStudent()||this.getView().showChildView("courses",new q({collection:this.courses}))},exit:function(){e.request("finish")},
copy:function(){a.profile=this.model},fail:function(a){a=JSON.parse(a.responseText);this.form.displayErrors(a)},onCancel:function(){this.restoreDefaults();this.disableSubmit();this.changed=!1;this.form.clearErrors()},save:function(){this.form.clearErrors();this.model.save().done(this.onSaveSuccess.bind(this)).fail(this.onSaveFail.bind(this))},toggleSuccessMessage:function(a){this.getView().toogleInfoMessageSuccess(a)},onSaveSuccess:function(){this.saveDefaults();this.copy();this.toggleSuccessMessage(!0);
setTimeout(_.bind(function(){this.isConfirmationScreen?this.exit():(this.toggleSuccessMessage(!1),this.disableSubmit())},this),3E3)},onSaveFail:function(a){var c=this.getView();c.toogleMessageError(!0);try{var d=JSON.parse(a.responseText);(d.current_password||d.password||d.password_confirmation)&&this.$(".resetPasswordHeading").focus();this.fail(a)}catch(w){console.error(w)}setTimeout(function(){c.toogleMessageError(!1)},2E3)},onProfileChange:function(){this.changed=!0},hasChanged:function(){return this.changed}});
c.MyProfile={};c.MyProfile.Teacher=t.extend({view:h,onRender:function(){t.prototype.onRender.call(this);this.showSubjects();this.showContact();this.showSchool()},attach:function(){t.prototype.attach.call(this);this.listenTo(this.model,"change:accept_tips",this.onAcceptTipsChange.bind(this));this.listenTo(this.model,"change:accept_marketing",this.onAcceptTipsChange.bind(this))},onAcceptTipsChange:function(){this.model.get("accept_tips")?this.model.setProperty("accept_tips",!0):this.model.unsetProperty("accept_tips");
this.enableSubmit()},onAcceptMarketingChange:function(){this.enableSubmit()},showSubjects:function(){this.subjects=f.request("render:subjects",this.getView().getRegion("subjects"),this.model.get("subjects"));this.listenTo(this.subjects,"change",this.setSubjectsOnProfile.bind(this));this.setSubjectsOnProfile()},showContact:function(){this.model.getProperty("accept_tips")&&this.model.set({accept_tips:!0},{silent:!0});this.getView().showChildView("contact",new m({model:this.model}))},showSchool:function(){this.getView().showChildView("school",
new n({model:this.model}))},setSubjectsOnProfile:function(){var a=this.subjects.getCheckedIds(),c=this.model.get("subject_ids");if(a.length!==c.length||_.some(a,function(a){return!_.contains(c,a)}))this.model.set("subject_ids",a),this.enableSubmit()},save:function(){this.getView().clearErrors();t.prototype.save.call(this)},fail:function(a){var c=JSON.parse(a.responseText);_(c).has("subjects")&&this.getView().showSubjectsError();t.prototype.fail.apply(this,arguments)},onCancel:function(){t.prototype.onCancel.call(this);
this.showSubjects();this.showContact()}});c.MyProfile.Student=t.extend({view:k,onCreate:function(){t.prototype.onCreate.apply(this,arguments);$("body").addClass("body--navigationDisabled")},onDestroy:function(){t.prototype.onDestroy.apply(this,arguments);$("body").removeClass("body--navigationDisabled")}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({template:"common/components/notifications/layout-template",regions:{current:"#notificationsCurrent",archive:"#notificationsArchive"},ui:{tab:".navigationTabs__item button",panels:".tabPanel"},events:{"click @ui.tab":"onTabClick"},onTabClick:function(a){a=$(a.currentTarget);var c=a.data("panel");this.$(".navigationTabs__item--active").removeClass("navigationTabs__item--active");a.parent().addClass("navigationTabs__item--active");this.getUI("panels").removeClass("tabPanel--active");
this.$(c).addClass("tabPanel--active");this.trigger(a.data("event"))}});c.Notifications=c.Component.extend({view:f,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.notifications=new a.Notifications;this.archived=(new a.Notifications).toggleArchived()},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"archive",this.showArchivedList.bind(this))},goToTop:function(){this.getView().$(".section__body").animate({scrollTop:0},500)},onRender:function(){$("body").addClass("body--composed body--shortFooter");
this.showCurrentList()},onDestroy:function(){$("body").removeClass("body--composed body--shortFooter")},showCurrentList:function(){var a=new c.List.Notifications({collection:this.notifications});this.listenTo(this.notifications,"change:archived",this.onNotificationArchived.bind(this));this.listenTo(a,"goTo:top",this.goToTop.bind(this));a.show(this.getView().getRegion("current"));this.notifications.fetch()},showArchivedList:function(){this.archive||(this.archive=new c.List.Notifications({collection:this.archived}),
this.archive.show(this.getView().getRegion("archive")),this.listenTo(this.archive,"goTo:top",this.goToTop.bind(this)));this.fectchArchived()},fectchArchived:function(){this.archived.wasFetched()||this.archived.fetch().done(this.archived.markAsFetched.bind(this.archived))},onNotificationArchived:function(){this.notifications.fetch();this.archived.planFetch()}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({id:"oupLens",className:"oupLens oupLens__placeholder",template:"common/components/oup_lens/placeholder-template"}),e=a.View.extend({id:"oupLens",className:"oupLens",template:"common/components/oup_lens/layout-template"});c.OupLens=c.Component.extend({view:function(){return this.model.get("url")?e:f},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(!a.model.get("url"))return c.return();
a.$("iframe").attr("src",a.model.get("url"));c.jumpToEnd()})}})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({template:"common/components/pagination/layout-template",className:"content__footerActions",initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this.desktopMediaQuery=window.matchMedia("(min-width: 1024px)");this.compactMode=f(c.compactMode).isUndefined()?!1:c.compactMode;this.showGoToTop=f(c.showGoToTop).isUndefined()?!0:c.showGoToTop;this.showCounter=f(c.showCounter).isUndefined()?!0:c.showCounter;this.watchWindowWidthChanges()},setForcedCompactMode:function(){this.$el.find(".pagination").addClass("pagination--compact")},
totalPages:function(){return this.collection.information.totalPages},onRender:function(){this.compactMode&&this.setForcedCompactMode();1<this.totalPages()?this.$el.removeClass("hidden"):this.$el.addClass("hidden")},events:{"click [data-action=previousPage]":"previous","click [data-action=nextPage]":"next","blur [data-action=goToPage]":"goTo","blur [data-action=inputPage]":"inputPage","keyup [data-action=inputPage]":"keyUp"},triggers:{"click [data-action=goToTop]":"goTo:top"},collectionEvents:{refresh:"render",
reset:"render",sync:"render"},watchWindowWidthChanges:function(){this.desktopMediaQuery.addListener(this.render.bind(this))},isCompactMode:function(){return this.compactMode||!this.desktopMediaQuery.matches},templateContext:function(){var c=this.isCompactMode(),e=this.showGoToTop,k=this.showCounter,l=this.$el.get(0),m=l.closest(".content"),n=l.closest(".section__body");return f.extend({getPageItemClass:function(a,d){d=c&&2==d;return f.contains(["...","/"],a)?"pagination__separator":this.currentPage!=
a||d?"pagination__goTo":"pagination__input"},getPageItemType:function(a,d){d=c&&2==d;return this.currentPage==a&&c&&!d?"number":"button"},showPreviousButton:function(){return this.prev},showNextButton:function(){return this.next},showBackToTopButton:function(){return e?m&&n?m.getBoundingClientRect().height>n.getBoundingClientRect().height:!0:!1},showCounter:function(){return k},showGoToTopButtonLabel:function(){return!c},showCompactModePageItems:function(){return c&&1<this.totalPages},showExtendedModePageItems:function(){return!c&&
1<this.totalPages},getPageItems:function(){var a=this.totalPages,d=this.currentPage,e=4>=d,h=d>a-4;return 1===a?[]:c?[d,"/",a]:7>=a?f(a).times(function(a){return a+1}):e?[1,2,3,4,5,"...",a]:h?[1,"...",a-4,a-3,a-2,a-1,a]:[1,"...",d-1,d,d+1,"...",a]}},a.View.prototype.templateContext)},previous:function(){this.collection.requestPreviousPage();this.saveScrollPosition();this.trigger("page:change")},next:function(){this.collection.requestNextPage();this.saveScrollPosition();this.trigger("page:change")},
goTo:function(a){this.collection.goTo($(a.currentTarget).val());this.saveScrollPosition();this.trigger("page:change")},keyUp:function(a){13===a.keyCode&&a.currentTarget.blur()},inputPage:function(a){this.saveScrollPosition();var c=parseInt($(a.currentTarget).val()),d=this.collection.information.totalPages;1>c||c>d||f.isNaN(c)?$(a.currentTarget).val(this.collection.information.currentPage):(this.collection.goTo(c),this.trigger("page:change"))},serializeData:function(){return f.extend(this.collection.pageInfo(),
{totalRecords:this.collection.totalRecords,totalPages:this.collection.information.totalPages})},saveScrollPosition:function(){var a=document.querySelector(".scrollableTable__wrapper").scrollLeft;window.sessionStorage.setItem("offsetScrollX",""+a)}});c.Pagination=c.Component.extend({view:e,propagate:"page:change goTo:top dom:refresh",outerWidth:function(a){var c=this.getView().$el;return a?c.outerWidth(a):c.outerWidth()},viewOptions:function(){return Object.assign(this.template?{template:this.template}:
{},f(this.compactMode).isUndefined()?{}:{compactMode:this.compactMode},f(this.showGoToTop).isUndefined()?{}:{showGoToTop:this.showGoToTop},f(this.showCounter).isUndefined()?{}:{showCounter:this.showCounter},c.Component.prototype.viewOptions.call(this))}})})(Osp,Osp.Components,_);
(function(a,c){var f=a.View.extend({template:"common/components/scrollable_table/layout-template",className:"section__body",regions:{body:{el:".scrollableTable__container",replaceElement:!0},footer:{el:".scrollableTable__footer",replaceElement:!0}},collectionEvents:{reset:"render"}}),e=a.View.extend({template:"common/components/scrollable_table/table-template",className:"scrollableTable scrollableTable--hasStartOverflow scrollableTable--hasEndOverflow",regions:{header:{el:"thead",replaceElement:!0},
body:{el:"tbody",replaceElement:!0}},templateContext:function(){var a=this.collection;return{hasCaptions:function(){return a.getHeader().any(function(a){return a.has("caption")})},tableExtraClass:function(){return this.hasCaptions()?"scrollableTable__table--withFloatingLabels":""}}},ui:{table:".scrollableTable__table",wrapper:".scrollableTable__wrapper"},isScrollable:function(){return this.getUI("table")[0].scrollWidth>this.$el[0].clientWidth},checkIfScrollable:function(){this.isScrollable()?this.$el.addClass("scrollableTable--hasStartOverflow"):
this.$el.removeClass("scrollableTable--hasStartOverflow")}}),d=a.View.extend({tagName:"th",className:function(){var a="scrollableTable__cell";this.model.get("mini")&&(a+=" scrollableTable__cell--mini");this.model.get("dashed")&&(a+=" scrollableTable__cell--dashedBorder");return a},attributes:function(){return this.model.has("columns")?{colspan:this.model.get("columns").length}:{}},template:"common/components/scrollable_table/header_cell-template",triggers:{"click [data-action=open]":"open","click [data-action=sort]":"sort",
"click [data-action=openKeyMap]":"keyMapOpen"},modelEvents:{change:"render"},templateContext:function(){var a=this.model;return{isLinkable:function(){return a.has("event")},showCaption:function(){return a.has("caption")},columnsClassName:function(){return 1<a.get("columns").length?"scrollableTable__columns":"scrollableTable__column"},sortableClassName:function(a){return a?"scrollableTable__cellHeading--sortable":"scrollableTable__cellHeading--nonSortable"},formatAriaLabelName:function(a){return a.replaceAll(" ",
"_").toLowerCase()},sortLabel:function(a){return a?""+a:"Sort options"},sortClassName:function(c){var d=a.get("columns").find(function(a){return a.sortColumn==c});return d.sortDirection?"scrollableTable__circularSort scrollableTable__circularSort--"+d.sortDirection:"scrollableTable__circularSortOptions"},showSmart:function(){return a.has("meta")&&!!a.get("meta").smart},showKeyMap:function(){return a.has("keyMap")}}}}),h=a.View.extend({tagName:"thead",template:_.template('<tr class="columns"></tr>'),
regions:{columns:{el:".columns",replaceElement:!0}}}),k=a.CollectionView.extend({tagName:"tr",childView:function(a){return a.get("view")||d},className:"scrollableTable__row"}),l=a.View.extend({tagName:"tr",template:"common/components/scrollable_table/row-template",triggers:{"click [data-action=open]":"open"},className:function(){return this.model.get("highlighted")?"scrollableTable__row scrollableTable__row--dark":"scrollableTable__row"},templateContext:{hasBadge:function(){return this.badge},hasSmartBadge:function(){return this.hasBadge()&&
"smart"==this.badge.type},hasPlainHeader:function(){return!this.event},hasPlainValue:function(a){return!_(a).isObject()},colspan:function(a){return this.hasPlainValue(a)||!a.colspan?"":'colspan="'+a.colspan+'"'},value:function(a){return this.hasPlainValue(a)?a:a.value},extraClass:function(a){if(this.hasPlainValue(a))return"n/a"===a?" scrollableTable__cell--notApplicable":"";var c="";a.mini&&(c+=" scrollableTable__cell--mini");a.dashed&&(c+=" scrollableTable__cell--dashedBorder");"n/a"===a.value&&
(c+=" scrollableTable__cell--notApplicable");a.className&&(c+=" "+a.className);return c}}}),m=a.CollectionView.extend({tagName:"tbody",childView:function(a){return a.get("view")||l}});c.ScrollableTable=c.Component.extend({view:f,emptyView:null,isLoading:null,loaderView:null,onCreate:function(a){this.resizeHandler=this.afterRender.bind(this);this.listenTo(a,"render",this.onRender.bind(this));$(window).on("resize",this.resizeHandler)},onDestroy:function(){$(window).off("resize",this.resizeHandler)},
onRender:function(){if(this.isLoading&&this.isLoading()&&this.loaderView)return this.showChildView("body",new this.loaderView);if(this.collection.isEmpty()&&this.emptyView)return this.showChildView("body",new this.emptyView);this.table=new e({collection:this.collection});this.className&&$(this.table).addClass(this.className);this.listenTo(this.table,"render",this.onRenderTable.bind(this));this.showChildView("body",this.table);this.scrollToOffset();this.setSortedHeader()},onOpenKeyMap:function(){this.trigger("keyMapOpen")},
onRenderTable:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return a.showHeader(),c.yield(a.showBody(),2);if(3!=c.nextAddress)return c.yield(a.showFooter(),3);a.afterRender();c.jumpToEnd()})},setFooterWidth:function(){if(this.footer){var a=this.footer.outerWidth(),c=this.table.getUI("table").outerWidth(),d=document.querySelector(".section__body").clientWidth,e=this.table.getUI("wrapper").outerWidth();a!=c&&(a=c>e?e:c,this.footer.outerWidth(a>
d?d:a))}},afterRender:function(){var a=this;_(function(){a.setFooterWidth();a.table.checkIfScrollable()}).delay(0)},onItemOpen:function(a,c){c=$(c.currentTarget).data();this.trigger(c.event||a.model.get("event"),a.model.get("meta"),c)},getSortDir:function(a){return a.sortDirection?"asc"==a.sortDirection?"desc":"asc":a.defaultsortDirection||"asc"},onItemSort:function(a,c){a=a.model;var d=a.collection.find(function(a){return!!a.get("columns").find(function(a){return!!a.sortDirection})});d&&d!=a&&(d.get("columns").find(function(a){return!!a.sortDirection}).sortDirection=
null);var e=$(c.currentTarget).data().sortColumn;c=a.get("columns").find(function(a){return a.sortColumn==e});c.sortDirection=this.getSortDir(c);this.saveScrollPosition();this.trigger("sort",a.get("meta"),c.sortDirection,e)},isPaginated:function(){return this.collection.getSource()instanceof a.PaginatedCollection},showHeader:function(){var a=this,c=new h;this.listenTo(c,"render",function(){var d=new k({collection:a.collection.getHeader()});a.listenTo(d,"childview:open",a.onItemOpen.bind(a));a.listenTo(d,
"childview:sort",a.onItemSort.bind(a));a.listenTo(d,"childview:keyMapOpen",a.onOpenKeyMap.bind(a));c.showChildView("columns",d)});this.table.showChildView("header",c)},getBody:function(){return new m({collection:this.collection})},showBody:function(){var a=this;return new Promise(function(c){var d=a.getBody();a.listenTo(d,"childview:open",a.onItemOpen.bind(a));a.listenTo(d,"dom:refresh",function(){return c(a.table.getUI("table").outerWidth())});a.table.showChildView("body",d)})},showFooter:function(){var a=
this;return new Promise(function(d){if(!a.isPaginated())return d(0);a.footer=new c.Pagination({className:"scrollableTable__pagination",compactMode:!0,showGoToTop:!1,collection:a.collection.getSource()});a.listenTo(a.footer,"dom:refresh",function(){return d()});a.footer.show(a.getRegion("footer"));a.setFooterWidth()})},saveScrollPosition:function(){var a=document.querySelector(".scrollableTable__wrapper").scrollLeft;window.sessionStorage.setItem("offsetScrollX",""+a)},scrollToOffset:function(){var a=
window.sessionStorage.getItem("offsetScrollX")||"0",c=document.querySelector(".scrollableTable__wrapper");c&&c.scrollTo({left:Number(a)});window.sessionStorage.removeItem("offsetScrollX")},setSortedHeader:function(){var a=this.getView().$(".scrollableTable__circularSort--desc")[0]||this.getView().$(".scrollableTable__circularSort--asc")[0];if(a){var c=a.closest("th");a=a.classList.contains("scrollableTable__circularSort--desc")?"descending":"ascending";c&&c.setAttribute("aria-sort",a)}}},{HeaderCell:d,
Row:l});var n=a.View.extend({tagName:"thead",template:_.template('<tr class="labels"></tr><tr class="columns"></tr>'),regions:{labels:{el:".labels",replaceElement:!0},columns:{el:".columns",replaceElement:!0}}});n.LabelCell=a.View.extend({tagName:"th",className:function(){var a="scrollableTable__cell";this.model.get("collapsible")&&(a+=" scrollableTable__cell--collapsible");!1===this.model.get("border")&&(a+=" scrollableTable__cell--noBorder");return a},triggers:{"click [data-action=toggle]":"collapsible:toggle"},
template:"common/components/scrollable_table/grouped_columns/header_label_cell-template",templateContext:{showLabel:function(){return!!this.label},isCollapsible:function(){return!!this.collapsible},groupId:function(){return this.group||""}},attributes:function(){var a={},c=this.model.get("columns").length,d=this.model.get("group"),e=this.model.get("status")||"expanded";1<c&&"expanded"==e&&(a.colspan=c);d&&(a["data-group"]=d);e&&(a["data-group-status"]=e);return a},toggle:function(a){this.$el.attr("data-group-status",
a);var c=this.model.get("columns").length;"expanded"==a?this.$el.attr("colspan",c):this.$el.removeAttr("colspan")}});n.ColumnCell=a.View.extend({tagName:"th",template:"common/components/scrollable_table/grouped_columns/header_column_cell-template",className:function(){var a="scrollableTable__cell";this.model.get("mini")&&(a+=" scrollableTable__cell--mini");this.model.get("dashed")&&(a+=" scrollableTable__cell--dashedBorder");this.model.get("className")&&(a+=" "+this.model.get("className"));return a},
attributes:function(){var a={},c=this.model.get("field"),d=this.model.get("group"),e=this.model.get("status");c&&(a["data-field"]=c);d&&(a["data-group"]=d);e&&(a["data-status"]=e);return a},triggers:{"click [data-action=sort]":"sort"},modelEvents:{change:"render"},templateContext:{showSorting:function(){return!!this.sortColumn},sortableClassName:function(){return this.sortColumn?"scrollableTable__cellHeading--sortable":"scrollableTable__cellHeading--nonSortable"},formatAriaLabelName:function(a){return a.replaceAll(" ",
"_").toLowerCase()},sortLabel:function(){return this.sortDirection?"Sort "+this.sortDirection:"Sort options"},sortClassName:function(){return this.sortDirection?"scrollableTable__circularSort scrollableTable__circularSort--"+this.sortDirection:"scrollableTable__circularSortOptions"},showSmart:function(){return this.meta&&!!this.meta.smart}}});n.Labels=a.CollectionView.extend({tagName:"tr",childView:function(a){return a.get("view")||n.LabelCell},className:"scrollableTable__row"});n.Columns=a.CollectionView.extend({tagName:"tr",
childView:n.ColumnCell,className:"scrollableTable__row"});var q=l.extend({template:"common/components/scrollable_table/grouped_columns/row-template",templateContext:_.extend({dataAttributes:function(a){if(this.hasPlainValue(a))return"";var c=[],d=function(d){return a[d]&&c.push({name:d,val:a[d]})};d("group");d("status");d("field");return c.map(function(a){return"data-"+a.name+'="'+a.val+'"'}).join(" ")}},l.prototype.templateContext),behaviors:[a.Behaviors.Tooltip]});var t=a.CollectionView.extend({tagName:"tbody",
childView:function(a){return a.get("view")||q}});var y=function(c){return a.Collection.apply(this,arguments)||this};$jscomp.inherits(y,a.Collection);y.prototype.initialize=function(c,d){a.Collection.prototype.initialize.apply(this,arguments);this.header=d.header;this.extract()};y.prototype.extract=function(){var c=this,d=0;this.header.each(function(e){var f=e.get("group"),h=e.get("status");e=e.get("columns").length;f&&c.add(new a.Model({name:f,start:d,end:d+e-1,status:h}));d+=e},{})};y.prototype.setStatus=
function(a,c){this.findWhere({name:a}).set({status:c})};y.prototype.getStatus=function(a){return this.findWhere({name:a}).get("status")};c.ScrollableTable.GroupedColumns=c.ScrollableTable.extend({getGroups:function(){if(this._groups)return this._groups;var a=this.getHeader();return this._groups=new y(null,{header:a})},getHeader:function(){return this.collection.getHeader()},getCells:function(){return this.collection.map(function(a){return a.get("cells")}).flat()},parse:function(a){var c=this;a.each(function(a){var d=
a.get("group");a.get("status")&&d&&a.set({status:c.getGroups().getStatus(d)})});return a},parseRows:function(){var a=this;this.getCells().forEach(function(c){c.status&&c.group&&(c.status=a.getGroups().getStatus(c.group))})},getHeaderColumns:function(){var c=this.getHeader().map(function(c){return c.get("columns").map(function(c){return new a.Model(c)})}).flat();return new a.Collection(c)},onOpenKeyMap:function(){this.trigger("keyMapOpen")},onCollapsibleToggle:function(a){var c=a.model,d=c.get("group"),
e="collapsed"==c.get("status")?"expanded":"collapsed";this.getGroups().setStatus(d,e);c.set({status:e});a.toggle(e);this.table.$("[data-group="+d+"]").attr("data-group-status",e);this.table.$("[data-group="+d+"][data-status]").attr("data-status",e);this.afterRender()},onItemSort:function(a,c){a=a.model;c="asc"==a.get("sortDirection")?"desc":"asc";a.set({sortDirection:c});this.saveScrollPosition();this.trigger("sort",a.get("meta"),c,a.get("sortColumn"))},showHeader:function(){var a=this,c=this.parse(this.getHeader()),
d=this.parse(this.getHeaderColumns()),e=new n;this.listenTo(e,"render",function(){var f=new n.Labels({collection:c});a.listenTo(f,"childview:collapsible:toggle",a.onCollapsibleToggle.bind(a));a.listenTo(f,"childview:keyMapOpen",a.onOpenKeyMap.bind(a));e.showChildView("labels",f);f=new n.Columns({collection:d});a.listenTo(f,"childview:sort",a.onItemSort.bind(a));e.showChildView("columns",f)});this.table.showChildView("header",e)},getBody:function(){this.parseRows();return new t({collection:this.collection})}})})(Osp,
Osp.Components);
(function(a,c,f,e){f=a.View.extend({template:"common/components/search-template",className:"inputGroup inputGroup--compact inputGroup--search",initialize:function(c){a.View.prototype.initialize.apply(this,arguments);this.placeholder=c.placeholder},ui:{query:"input[type=search]"},events:{"keyup @ui.query":"onKeyUp"},triggers:{"click [data-action=clear]":"clear","click [data-action=search]":"search"},onKeyUp:function(a){"Enter"===a.key&&this.trigger("search",this,a)},serializeData:function(){return{placeholder:this.placeholder}}});c.Search=
c.Component.extend({view:f,onCreate:function(a){this.query="";this.listenTo(a,"search",this.search.bind(this));this.listenTo(a,"clear",this.clear.bind(this))},getPlaceholder:function(){return e(this.placeholder).isUndefined()?I18n.t("ui.info.search"):this.placeholder},viewOptions:function(){return e.extend({placeholder:this.getPlaceholder()},c.Component.prototype.viewOptions.call(this))},$query:function(){return this.getView().getUI("query")},getQuery:function(){return(this.$query().val()||"").trim()},
search:function(){this.getQuery()!==this.query&&(this.query=this.getQuery(),this.trigger("search",this.query))},clear:function(){this.getQuery()&&(this.$query().val(""),this.search())}})})(Osp,Osp.Components,Marionette,_);
(function(a,c){a.Structures=a.Tree.extend({initialize:function(){a.Tree.prototype.initialize.apply(this,arguments);this.filter=this.activeForLensFilter.bind(this)},activeForLensFilter:function(a){return this.lens?a.isActiveFor(this.lens):!0},waitForDependencies:function(){return this.collection?$.Deferred().resolve().promise():this.fetchStore(c.TYPE.STRUCTURES).done(function(a){this.collection=a}.bind(this))},activateBy:function(a){a=this.collection.getRecursive(a);this.activate(a);return a}})})(Osp.Components,
Osp.Store);
(function(a,c,f,e){var d=a.FormView.extend({rawErrorFor:["reset_password"],template:"common/components/user_preview/form-template",triggers:{"click input[name=reset_password]":{event:"password:reset:click",preventDefault:!1}},templateContext:function(){var c=this.model;return e.extend({canShowGroups:function(){return c.isStudent()},coursesList:function(){return c.courseNames(", ")},groupsList:function(){return c.groupNames(", ")},canShowUserid:function(){return c.isStudent()}},a.FormView.prototype.templateContext)},onRender:function(){a.View.prototype.onRender.apply(this);
this._modelBinder.bind(this.model,this.el,this._modelBindings,{boundAttribute:"id"})},onSaveSuccess:function(c,d,e){a.FormView.prototype.onSaveSuccess.apply(this,arguments);this.trigger("saved")}}),h=a.DialogLayout.extend({template:"common/components/user_preview/layout-template",regions:{form:"#form"},triggers:{"click input[type=submit]":"save"}}),k=f.Object.extend({initialize:function(a){this.user=a},show:function(){this.user.fetch().done(this.showLayout.bind(this))},showLayout:function(){this.layout=
new h({model:this.user,className:this.getClassName()});this.layout.on("save",this.onSave,this).on("render",this.showForm,this).render()},getClassName:function(){return this.user.isTeacher()?"big":"large"},showForm:function(){this.form=new d({model:this.user});this.form.on("saved",this.layout.hideModal,this.layout).on("password:reset:click",this.onPasswordResetClick,this);this.layout.showChildView("form",this.form)},onPasswordResetClick:function(c,d){$(d.currentTarget).is(":checked")&&(new a.AlertDialog({title:I18n.t("ui.users.reset_password.title"),
message:I18n.t("ui.users.reset_password.message"),submitText:I18n.t("ui.users.reset_password.reset")})).render()},onSave:function(a,c){this.form.onClickSubmit(c)}});a.vent.on("global:users:preview",function(a){(new k(e(a).first())).show()})})(Osp,Osp.Components,Marionette,_);
(function(a,c,f,e){var d=a.View.extend({className:"list__item",ui:{selectionToggler:".resources__selection input"},triggers:{"click @ui.selectionToggler":{event:"selection:toggle",preventDefault:!1}},modelEvents:{"change:checked":"toggleSelection"},toggleSelection:function(){this.getUI("selectionToggler").prop("checked",this.model.get("checked"))}}),h=d.extend({className:"accordion",ui:e.extend({accordionToggler:".accordion__toggle"},d.prototype.ui),triggers:e.extend({"click @ui.accordionToggler":{event:"accordion:toggle",
preventDefault:!1}},d.prototype.triggers),modelEvents:e.extend({"change:expanded":"toggle"},d.prototype.modelEvents),toggle:function(){this.$el.toggleClass("accordion--enabled")}}),k=a.CollectionView.extend({childViewEventPrefix:"item"}),l=a.View.extend({tagName:"label",className:"checkbox",template:"common/components/list/selection-template",collectionEvents:{sync:"render","change:checked":"render"},ui:{selectionToggler:"input[type=checkbox]"},triggers:{"click @ui.selectionToggler":{event:"selection:toggle",
preventDefault:!1}},onRender:function(){this.$el.toggleClass("checkbox--partial",this.isPartiallySelected())},isPartiallySelected:function(){return this.collection.areAny("checked")&&!this.collection.areAll("checked")},checked:function(){return this.collection.length&&this.collection.areAll("checked")},serializeData:function(){return{count:this.collection.allThatAre("checked").length,checked:this.checked()}}}),m=a.View.extend({initialize:function(a){this.desktopMediaQuery=window.matchMedia("(min-width: 1024px)");
this.forceCompactMode="compact"===a.paginationType;this.showGoToTop=e(a.showGoToTop).isUndefined()?!0:a.showGoToTop;this.watchWindowWidthChanges()},template:"common/components/list/pagination-template",className:"content__footerActions",setForcedCompactMode:function(){this.$el.find(".pagination").addClass("pagination--compact")},onRender:function(){this.forceCompactMode&&this.setForcedCompactMode()},events:{"click [data-action=previousPage]":"previous","click [data-action=nextPage]":"next","click [data-action=goToPage]":"goTo",
"input [data-action=inputPage][type=number]":"inputPage"},triggers:{"click [data-action=goToTop]":"goTo:top"},collectionEvents:{refresh:"render",reset:"render",sync:"render","change:expanded":"onChangeExpanded"},onChangeExpanded:function(){setTimeout(this.render.bind(this),500)},watchWindowWidthChanges:function(){this.desktopMediaQuery.addListener(this.render.bind(this))},isCompactMode:function(){return this.forceCompactMode||!this.desktopMediaQuery.matches},templateContext:function(){var c=this.isCompactMode(),
d=this.$el.get(0),f=d.closest(".content"),h=d.closest(".section__body"),k=this.showGoToTop;return e.extend({getPageItemClass:function(a,d){d=c&&2==d;return e.contains(["...","/"],a)?"pagination__separator":this.currentPage!=a||d?"pagination__goTo":"pagination__input"},getPageItemType:function(a,d){d=c&&2==d;return this.currentPage==a&&c&&!d?"number":"button"},isInputNumberType:function(a,c){return"number"===this.getPageItemType(a,c)},isPaginationSeparator:function(a,c){return"pagination__separator"===
this.getPageItemClass(a,c)},showPreviousButton:function(){return this.prev},showNextButton:function(){return this.next},showBackToTopButton:function(){return k?f&&h?f.getBoundingClientRect().height>h.getBoundingClientRect().height:!0:!1},showGoToTopButtonLabel:function(){return!c},isCompactMode:function(){return c},getPageItems:function(){var a=this.totalPages,d=this.currentPage,f=4>=d,h=d>a-4;return 1===a?[]:c?[d,"/",a]:7>=a?e(a).times(function(a){return a+1}):f?[1,2,3,4,5,"...",a]:h?[1,"...",a-
4,a-3,a-2,a-1,a]:[1,"...",d-1,d,d+1,"...",a]}},a.View.prototype.templateContext)},previous:function(){this.collection.requestPreviousPage();this.trigger("page:change")},next:function(){this.collection.requestNextPage();this.trigger("page:change")},goTo:function(a){this.collection.goTo(a.currentTarget.value||a.currentTarget.innerText);this.trigger("page:change")},inputPage:e.debounce(function(a){a=parseInt(a.target.value);var c=this.collection.information.totalPages;1>a||a>c||e.isNaN(a)||(this.collection.goTo(a),
this.trigger("page:change"))},2E3),serializeData:function(){return e.extend(this.collection.pageInfo(),{totalRecords:this.collection.totalRecords})}});f=a.View.extend({template:"common/components/list/layout-template",className:"content",regions:{selection:{el:".selection",replaceElement:!1},list:".content__body",pagination:".content__footer"},ui:{title:".queryTitle"},collectionEvents:{"refresh reset sync":"renderPaginationResults"},setTitle:function(a){this.getUI("title").text(a)},renderPaginationResults:function(){var a=
this.collection.pageInfo();0<this.collection.totalRecords?this.$(".queryResults").text(I18n.t("ui.pagination.showing",{start:a.startRecord,end:a.endRecord,total:this.collection.totalRecords})):this.$(".queryResults").empty()},onRender:function(){this.renderPaginationResults()},toggleLoading:function(a){this.$el.toggleClass("loading",a)}});c.List=c.Component.extend({view:f,itemView:null,emptyView:null,selectable:!0,accordion:!0,title:null,loadingStatus:!0,onCreate:function(){this.getView().once("render",
this.onRender.bind(this));this.listenTo(this.collection,"request",this.onRequest.bind(this));this.listenTo(this.collection,"sync error",this.onSync.bind(this))},onRender:function(){this.selectable&&this.showSelection();this.title&&this.getView().setTitle(this.title);this.showList();this.showPagination()},onRequest:function(){this.loadingStatus&&this.getView().toggleLoading(!0)},onSync:function(){this.loadingStatus&&this.getView().toggleLoading(!1)},showSelection:function(){var a=new l({collection:this.collection});
this.getView().showChildView("selection",a);this.listenTo(a,"selection:toggle",this.onSelectionToggle.bind(this))},showList:function(){this.list=new k({className:this.getListClassName(),childView:this.getItemView(),emptyView:this.emptyView,collection:this.collection});this.getView().showChildView("list",this.list);this.listenTo(this.list,"item:selection:toggle",this.onItemSelectionToggle.bind(this));this.listenTo(this.list,"item:accordion:toggle",this.toggleAccordion.bind(this))},showPagination:function(){var a=
new m({collection:this.collection,paginationType:this.options.paginationType,showGoToTop:this.showGoToTop});this.getView().showChildView("pagination",a);this.listenTo(a,"page:change goTo:top",this.trigger.bind(this,"goTo:top"))},getListClassName:function(){return this.accordion?"accordionList":"list"},getItemView:function(){return this.itemView||(this.accordion?h:d)},onItemSelectionToggle:function(a){a.model.set({checked:a.getUI("selectionToggler").is(":checked")});this.trigger("selection:change",
this.collection)},toggleAccordion:function(a){var c=a.model.collection.find(function(a){return a.get("expanded")});c&&c!==a.model&&c.set({expanded:!1});a.model.set({expanded:!a.getUI("accordionToggler").prevObject.hasClass("accordion--enabled")})},onSelectionToggle:function(a){this.collection.setForAll({checked:a.getUI("selectionToggler").is(":checked")});this.trigger("selection:change",this.collection)}},{LayoutView:f,ItemView:d,AccordionItemView:h})})(Osp,Osp.Components,Marionette,_);
(function(a,c,f){var e=c.List.ItemView.extend({template:"common/components/list/assignments/item-template",tagName:"button",className:"list__item assignment-widget-button",attributes:function(){var a=this.model.id;return{"aria-labelledby":"assess"+a,"aria-describedby":"marks"+a+" assignedBy"+a+" status"+a+" dueDate"+a}},templateContext:function(){var c=this.model;return{status:function(){return c.get("student_status_val")===a.Markbook.SAVED?I18n.t("ui.assignments.started"):I18n.t("ui.assignments.not_started")},
dueDate:function(){return f(c.get("due")).format("dddd Do MMMM")},showMarksAvailable:function(){return!c.get("no_mark")&&!_(c.get("points")).isUndefined()},showNoMarks:function(){return c.get("no_mark")},getAssessmentId:function(){return"assess"+this.id},getMarksId:function(){return"marks"+this.id},getAssignedById:function(){return"assignedBy"+this.id},getStatusId:function(){return"status"+this.id},getDueDateId:function(){return"dueDate"+this.id}}},triggers:{click:"open"},modelEvents:{change:"render"}}),
d=a.View.extend({template:"common/components/list/assignments/empty-template"}),h=c.List.LayoutView.extend({renderPaginationResults:function(){c.List.LayoutView.prototype.renderPaginationResults.call(this);var a=this.collection.totalRecords;0!==a&&(a=1===a?"assessment":"assessments",this.$(".queryResults").append(" "+a))}});c.List.Assignments=c.List.extend({itemView:e,emptyView:d,selectable:!1,accordion:!1,view:h,showList:function(){c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open",
this.onItemOpen.bind(this))},onItemOpen:function(a){this.trigger("assignment:open",a.model)}})})(Osp,Osp.Components,moment);
(function(a,c,f){var e=c.List.AccordionItemView.extend({template:"common/components/list/contents/item-template",className:"accordion resources--noSelectable",ui:f.extend({favouriteToggler:".resources__favourite input",openButton:'[data-action="open"]'},c.List.AccordionItemView.prototype.ui),triggers:f.extend({"click @ui.favouriteToggler":{event:"favourite:toggle",preventDefault:!1},"click @ui.openButton":"open"},c.List.AccordionItemView.prototype.triggers),templateContext:{getId:function(){return this.id}}}),
d=e.extend({template:"common/components/list/contents/teacher_item-template",className:"accordion",templateContext:function(){var c=this.model;return f.extend({showNewLabel:function(){return this.is_new},showUpdatedLabel:function(){return this.is_updated},showLabels:function(){return this.is_new||this.is_updated},showBook:function(){return!f(this.digital_book).isEmpty()&&this.digital_book.start},showVisibility:function(){return!a.state.getLens().isAssignment()},showLocation:function(){return!f(this.location).isEmpty()},
showMarksAvailable:function(){return!this.no_mark&&void 0!==this.points},showNoMarks:function(){return this.no_mark},showImage:function(){return!1},bookRange:function(){return this.digital_book.start?"Pages "+this.digital_book.start+"-"+this.digital_book.end:"Page 1"},bookUrl:function(){var d=this.isLtiBook(c)?c.get("url"):"/api/courses/"+a.state.getCourse().id+"/digital_books/"+this.digital_book.id+".html";this.digital_book.start&&(d+="?page="+this.digital_book.start);return d},isLtiBook:function(c){return c.get("launcher")===
a.ContentLauncherService.Service.Lti},isInBasket:function(){return a.currentCourse.assignmentPool().isAdded(c)}},e.prototype.templateContext)},ui:f.extend({visibilityToggler:".button__visibility",locationButton:".resources__location",statusText:".resources__status"},e.prototype.ui),triggers:f.extend({"click @ui.visibilityToggler":"visibility:toggle","click @ui.locationButton":"node:view"},e.prototype.triggers),modelEvents:f.extend({"change:student_access":"toggleVisibility",added_to_basket:"toggleIsInBasketMessage"},
e.prototype.modelEvents),toggleVisibility:function(){this.getUI("visibilityToggler").toggleClass("button--enabled",this.model.get("student_access"))},toggleIsInBasketMessage:function(a){this.getUI("statusText").toggleClass("hidden",!a)}}),h=a.View.extend({template:"common/components/list/contents/empty-template",defaultMessage:I18n.t("ui.common.noresources.body"),getStateEntityAttribute:function(c,d){return a.state.getState(c)&&a.state.getState(c).get(d)},getMessageFor:function(a){return this.getStateEntityAttribute(a,
"no_contents_found_message")},getNodeMessage:function(){var a=this.getStateEntityAttribute("lens","type"),c=this.getMessageFor("structure");return a&&c&&c[a]},getStudentMessage:function(){return a.profile.isStudent()&&gon.noContentsFoundMessageForStudents},getNoContentsFoundMessage:function(){return this.getStudentMessage()||this.getNodeMessage()||this.getMessageFor("lens")||this.getMessageFor("course")||this.defaultMessage},serializeData:function(){return{message:this.getNoContentsFoundMessage()}}});
c.List.Contents=c.List.extend({emptyView:h,initialize:function(){c.List.prototype.initialize.apply(this,arguments);this.selectable=!a.profile.isStudent();this.itemView=a.profile.isStudent()?e:d},onRender:function(){c.List.prototype.onRender.apply(this);this.listenTo(this.collection,"sync",this.updateTitle.bind(this));this.updateTitle()},showList:function(){c.List.prototype.showList.call(this);this.listenTo(this.list,"item:visibility:toggle",this.onVisibilityToggle.bind(this));this.listenTo(this.list,
"item:favourite:toggle",this.onItemFavouriteToggle.bind(this));this.listenTo(this.list,"item:node:view",this.onItemNodeView.bind(this));this.listenTo(this.list,"item:open",this.onItemOpen.bind(this));this.listenTo(this.list,"item:accordion:toggle",this.onItemExpand.bind(this))},onVisibilityToggle:function(a){a.model.toggleVisibility()},onItemFavouriteToggle:function(a){a.model.toggleFavourite()},onItemNodeView:function(a,c){this.trigger("node:activate",$(c.currentTarget).data("id"))},onItemOpen:function(a){a=
a.model;if(a.isSsoContent())return this.launchSso(a);this.launch(a)},onItemExpand:function(a){var c=a.$el.find(".accordion__toggle");this.previousToggle&&!this.previousToggle.is(c)&&this.previousToggle.attr("aria-expanded",!1);c.attr("aria-expanded",a.model.get("expanded"));this.previousToggle=c},launchSso:function(a){a.fetchSsoUrl().done(function(a){try{window.open(a.url)}catch(m){}})},selfStudyAssignmentFor:function(c){var d,e,f,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==
k.nextAddress)return d=$('meta[name="csrf-token"]').attr("content"),e="/api/v2/courses/"+a.currentCourse.id+"/self_study",k.yield(fetch(e,{method:"POST",body:JSON.stringify({content_id:c.id}),headers:{"Content-Type":"application/json","X-CSRF-Token":d}}),2);if(3!=k.nextAddress)return f=k.yieldResult,k.yield(f.json(),3);h=k.yieldResult;return k.return(f.ok?h:null)})},launch:function(c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return c.get("self_study")?
f.yield(d.selfStudyAssignmentFor(c),3):f.jumpTo(2);if(2!=f.nextAddress&&(e=f.yieldResult,c.set({student_assignment_id:e.student_assignment_id}),e.smart))c.once("submitted",function(){return d.showResults(e.student_assignment_id)});(new a.ContentLauncherService(c)).launch();f.jumpToEnd()})},showResults:function(d){d=new a.Model({student_assignment_id:d});(new c.Course.StudentAssignmentResultsPanel({model:d})).show().toggle()},getTitle:function(){if(this.collection.isFavouriteFilterActive())return I18n.t("ui.filters.favourites");
if(this.collection.isMyContentsFilterActive())return I18n.t("ui.my_content."+a.state.getLens().get("type"));var c=this.collection.getStructure();return c&&!c.isRoot()?c.get("name"):I18n.t("ui.common.all_resources")},updateTitle:function(){this.getView().setTitle(this.getTitle())}})})(Osp,Osp.Components,_);
(function(a,c,f){var e=c.List.ItemView.extend({template:"common/components/list/level_ups/item-template",behaviors:[a.Behaviors.FuzzyTime],ui:_.extend({openButton:"[data-action=open]"},c.List.ItemView.prototype.ui),triggers:_.extend({"click @ui.openButton":"open"},c.List.ItemView.prototype.triggers),templateContext:{typeLabel:function(){return"intervention"==this.type?"secure":"extend"},curriculumLabel:function(){return this.curriculum.label},curriculumText:function(){return _.isEmpty(this.curriculum.titles)?
"None added":this.curriculum.titles},createdAtDate:function(){return f(this.created).format("dddd Do MMMM")},badgeClass:function(){return"intervention"==this.type?"badge--green":"badge--purple"}},serializeData:function(){var d=(new a.CurriculumService(this.model)).serialized;return _.extend(c.List.ItemView.prototype.serializeData.call(this),{curriculum:d})}}),d=c.List.LayoutView.extend({template:"common/components/list/level_ups/layout-template",regions:_.extend({filters:".filters"},c.List.LayoutView.prototype.regions)}),
h=a.View.extend({template:"common/components/list/level_ups/empty-template"});c.List.LevelUps=c.List.extend({view:d,itemView:e,emptyView:h,selectable:!1,accordion:!1,showList:function(){c.List.prototype.showList.call(this);this.showFilters();this.listenTo(this.list,"item:open",this.onItemOpen.bind(this))},showFilters:function(){(new c.Filters({hideLabel:!0,collection:this.filters,className:"filtersToggle button button--icon"})).show(this.getRegion("filters"))},onItemOpen:function(a){this.trigger("start",
a.model.id)}})})(Osp,Osp.Components,moment);
(function(a,c){var f=c.List.ItemView.extend({className:"list__item assignment",template:"common/components/list/markbook/assignment-template",ui:_.extend({archiveButton:"[data-action=archive]"},c.List.ItemView.prototype.ui),triggers:_.extend({click:"open","click @ui.archiveButton":"archive"},c.List.ItemView.prototype.triggers),templateContext:function(){var c=this.model;return{isOwner:function(){return c.get("teacher_id")==a.profile.id},showArchive:function(){return!c.collection.isArchived()&&c.get("is_due")&&
this.isOwner()},studentsCount:function(){var a=c.get("students").length;return 1<a?a+" "+I18n.t("ui.assignments.students"):a+" "+I18n.t("ui.assignments.student")},groupsList:function(){var a=_(c.get("groups")).pluck("name").join(", ");return _(a).truncate(75)},dueDate:function(){return moment(c.get("due")).format("ddd Do MMMM YYYY")},showToMarkCounter:function(){return c.get("manual_marking")&&!c.get("no_mark")},toMarkCount:function(){return c.get("num_done")-c.get("num_marked")},notSubmittedCount:function(){return c.get("num_assignments")-
c.get("num_done")},markedLabel:function(){var a=c.get("no_mark")?"completed":"marked";return I18n.t("ui.assignments.status."+a)},markedCount:function(){return c.get("num_marked")}}},modelEvents:{change:"onChange"},wasArchived:function(){return Object.keys(this.model.changed).includes("archived")},showArchivedFeedbackMessage:function(){var a=this;return new Promise(function(c){a.$("[data-event=archived]").addClass("message--visible").siblings("button").addClass("hidden");_.delay(c,2E3)})},onChange:function(){if(!this.wasArchived())return this.render()}}),
e=c.List.ItemView.extend({template:"common/components/list/markbook/student_assignment-template",triggers:_.extend({click:"open"},c.List.ItemView.prototype.triggers),templateContext:{isMarked:function(){return this.status==a.Markbook.MARKED},isAwaitingMarks:function(){return this.status==a.Markbook.DONE},isSubmitted:function(){return this.status==a.Markbook.DONE||this.status==a.Markbook.MARKED},statusText:function(){switch(this.status){case a.Markbook.MARKED:return this.markedLabel();case a.Markbook.DONE:return"To mark";
default:return"Not submitted"}},markedLabel:function(){return I18n.t("ui.assignments.status."+(this.no_mark?"completed":"marked"))},dueDate:function(){return moment(this.due).format("ddd Do MMMM YYYY")},submittedAt:function(){return moment(this.submitted_at).format("ddd Do MMMM YYYY")},showMark:function(){return!this.no_mark&&(this.isMarked()||!!this.detailed_score)},markText:function(){return this.points?this.mark+"/"+this.points:this.mark},pendingQuestions:function(){return _(this.detailed_score).filter(function(a){return"manual"==
a[0]&&!_(a[1]).isNumber()})},pendingQuestionsCount:function(){return this.pendingQuestions().length},hasPendingQuestions:function(){return 0<this.pendingQuestionsCount()}},modelEvents:{change:"render"}}),d=c.List.LayoutView.extend({template:"common/components/list/markbook/layout-template",behaviors:[a.Behaviors.Tabs],ui:{archiveAll:"[data-action=archive_all]"},triggers:{"click @ui.archiveAll":"archive:all"},collectionEvents:_.extend({sync:"onSync"},c.List.LayoutView.prototype.collectionEvents),onSync:function(){this.$el.attr("data-archive",
this.collection.anyToArchive().toString());this.$el.attr("data-mode",this.collection.isUserMarkbook()?"student":"group");this.$el.attr("data-tab",this.collection.isArchived()?"archived":"current")}}),h=a.View.extend({template:"common/components/list/markbook/empty-template"});c.List.Markbook=c.List.extend({view:d,emptyView:h,selectable:!1,accordion:!1,itemView:function(a){return a.collection.isUserMarkbook()?e:f},onCreate:function(a){var d=this;c.List.prototype.onCreate.apply(this,arguments);this.listenTo(a,
"archive:all",this.archiveAll.bind(this));this.listenTo(a,"load:current",function(){return d.setArchived(!1)});this.listenTo(a,"load:archived",function(){return d.setArchived(!0)})},fetch:function(){return this.collection.fetch({reset:!0})},setArchived:function(a){this.collection.setArchived(a);this.fetch()},showList:function(){var a=this;c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open",function(c){return a.trigger("open",c.model)});this.listenTo(this.list,"item:archive",this.onItemArchive.bind(this))},
onItemArchive:function(a){var c=this;a.model.archive().done(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(a.showArchivedFeedbackMessage(),2);c.fetch();d.jumpToEnd()})})},archiveAll:function(){var c=this;(new a.AlertDialog({resizable:!1,showCancel:!0,title:I18n.t("ui.assignments.archive_all_dialog.title"),message:I18n.t("ui.assignments.archive_all_dialog.message"),submitText:I18n.t("ui.assignments.archive_all_dialog.submit"),submitCallback:function(){return c.collection.archiveAll().done(function(){return c.fetch()})}})).render()}})})(Osp,
Osp.Components);
(function(a,c,f){var e=c.List.AccordionItemView.extend({template:"common/components/list/material/item-template",ui:f.extend({content:".accordion__content",openButton:"[data-action=open]",manageButton:"[data-action=manage]",materialAdded:"[data-event=materialAdded]",materialRemoved:"[data-event=materialRemoved]"},c.List.AccordionItemView.prototype.ui),triggers:f.extend({"click @ui.openButton":"open","click @ui.manageButton":"manage"},c.List.AccordionItemView.prototype.triggers),modelEvents:f.extend({added:"onAdded",removed:"onRemoved",
"change:limit":"toggleLimitReachedMessage"},c.List.AccordionItemView.prototype.modelEvents),isAdded:function(){return this.getAssignment().materialAdded(this.model)},isLimitReached:function(){return this.getAssignment().materialLimitReached()},getAssignment:function(){return this.model.collection.getAssignment()},toggleLimitReachedMessage:function(){this.getUI("content").toggleClass("assignmentBasket__material--limitReached",this.isLimitReached()&&!this.isAdded())},showMessage:function(a){var c=this.$(".message");
this.getUI(a).addClass("message--visible");f.delay(c.removeClass.bind(c,"message--visible"),3E3)},onAdded:function(){this.getUI("manageButton").addClass("button--enabled");this.showMessage("materialAdded")},onRemoved:function(){this.getUI("manageButton").removeClass("button--enabled");this.showMessage("materialRemoved")},onRender:function(){this.getUI("manageButton").toggleClass("button--enabled",this.isAdded());this.toggleLimitReachedMessage()}}),d=a.View.extend({template:"common/components/list/contents/empty-template",
getNoContentsFoundMessage:function(){return a.profile.isStudent()?gon.noContentsFoundMessageForStudents:I18n.t("ui.common.noresources.body")},serializeData:function(){return{message:this.getNoContentsFoundMessage()}}});c.List.Material=c.List.extend({itemView:e,selectable:!1,emptyView:d,showList:function(){c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open",this.onItemOpen.bind(this));this.listenTo(this.list,"item:manage",this.onItemToggle.bind(this))},onItemOpen:function(a){a.model.showContent()},
onItemToggle:function(a){this.trigger("item:toggle",a.model)}})})(Osp,Osp.Components,_);
(function(a,c,f){var e=a.View.extend({templateContext:{lastSelected:function(){return f(this.last_selected).format("D/M/YY")}},className:function(){return this.model.collection.isStudent()?"misconception misconception--student":"misconception misconception--group"},getTemplate:function(){return"common/components/list/misconceptions/"+(this.model.collection.isStudent()?"student":"group")+"-template"},events:{"click .misconception__text-toggle":"onTextToggle"},triggers:{"click .misconception__link":"open"},
onAttach:function(){var a=this;$(window).on("resize.misconceptions",function(){return a.onResize()});this.displayOrHideSeeMore();this.toggleMobile()},onDestroy:function(){$(window).off("resize.misconceptions")},onTextToggle:function(){var a=this.$(".misconception__description"),c=this.$(".misconception__text-toggle");if(a.hasClass("expanded")){var d=856<$(window).width()?"40px":"80px";c.text("See more");a.css("max-height",d);setTimeout(function(){return a.removeClass("expanded")},500)}else a.css("max-height",
a[0].scrollHeight+"px").addClass("expanded"),c.text("See less")},onResize:function(){this.displayOrHideSeeMore();this.toggleMobile()},shouldShowSeeMoreButton:function(){var a=this.$(".misconception__description")[0];return a&&(a.offsetHeight<a.scrollHeight||a.offsetWidth<a.scrollWidth)},toggleMobile:function(){this.isMobile()?this.$el.addClass("forceMobile"):this.$el.removeClass("forceMobile")},isMobile:function(){return 1023>=window.innerWidth},displayOrHideSeeMore:function(){var a=this.$(".misconception__text-toggle");
this.shouldShowSeeMoreButton()?a.show():a.hide()}}),d=a.Collection.extend({parse:a.Collection.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/misconceptions/"+this.id()+"?group_id="+this.groupId()},id:function(){return this.misconception.id},groupId:function(){return this.group.id},setMisconception:function(a){this.misconception=a;return this},setGroup:function(a){this.group=a;return this}});c.List.Misconceptions=c.List.extend({itemView:e,accordion:!1,
selectable:!1,showGoToTop:!1,title:"Misconceptions",loadingStatus:!1,showList:function(){var a=this;c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open",function(c){return a.open(c.model)})},getGroup:function(){return this.collection.getGroup()},getStudents:function(a){return(new d).setMisconception(a).setGroup(this.getGroup())},open:function(a){(new c.Course.TeacherReports.MisconceptionStudentsPanel({collection:this.getStudents(a)})).show().toggle()}})})(Osp,Osp.Components,moment);
(function(a,c,f,e){var d=c.List.AccordionItemView.extend({template:"common/components/list/notifications/item-template",behaviors:[a.Behaviors.FuzzyTime],className:"accordion",ui:e.extend({unreadBadge:"[data-badge=unread]",openButton:"[data-action=open]",archiveButton:"[data-action=archive]",assignment:".assignment-notification"},c.List.AccordionItemView.prototype.ui),triggers:e.extend({"click @ui.openButton":"open","click @ui.archiveButton":"archive","click @ui.assignment":"assignment"},c.List.AccordionItemView.prototype.triggers),
modelEvents:e.extend({"change:read":"removeUnreadBadge"},c.List.AccordionItemView.prototype.modelEvents),templateContext:function(){return{getUniqueIdentifier:function(){return"notif_"+this.id},getTitleId:function(){return"assign_"+$(this.body).attr("data-student-assignment-id")},getNextStepsIfExists:function(){if(this.body.includes("data-with-next-steps"))return"nextSteps"}}},toggle:function(){this.$(".accordion__toggle").attr("aria-expanded",this.model.get("expanded"));c.List.AccordionItemView.prototype.toggle.call(this);
this.$el.has("accordion--enabled")&&this.trigger("read",this)},removeUnreadBadge:function(){e.delay(function(){this.getUI("unreadBadge").remove()}.bind(this),1E3)}}),h=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+this.attributes.courseId+"/level_ups/"+this.id}}),k=f.Object.extend({initialize:function(c){this.view=c;this.notification=c.model;this.course=a.courses.get(this.courseId())},getTarget:function(){return this.view.$("[data-link-type]")},show:function(){this.course.pLenses().done(this.onceReady.bind(this))},
type:function(){return this.getTarget().data("link-type")},courseId:function(){return this.getTarget().data("course-id")},levelUpId:function(){return this.getTarget().data("level-up-id")},assignmentId:function(){return this.notification.get("assignment_id")},studentAssignmentId:function(){return this.getTarget().data("student-assignment-id")},createAssignment:function(){return new a.Assignment({id:this.assignmentId(),student_assignment_id:this.studentAssignmentId()},{course:this.course})},setAssignment:function(){this.course.state().set({assignment:this.createAssignment()})},
onceLevelUpSubmitted:function(a){a.fetch().done(function(){(new c.Course.StudentAssignmentResultsPanel({model:a})).show().toggle()})},startLevelUp:function(){var c=this,d=new h({courseId:this.courseId(),id:this.levelUpId()});d.fetch().done(function(){var e=new a.LevelUpManager(d);c.listenTo(e,"submitted",function(){return c.onceLevelUpSubmitted(d)});e.start()})},onSubmitReactivateActivityTests:function(c){var d=this;this._reactivateResultsPanel&&this.stopListening(this._reactivateResultsPanel);var e=
new a.Components.Course.NextStepsReactivateResultsPanel({results:c});this.listenTo(e,"reactivate:start",function(){e.close();d.startReactivate()});e.show().toggle();this._reactivateResultsPanel=e},onEmptytReactivateActivityTests:function(){(new a.AlertDialog({title:I18n.t("ui.next_steps.reactivate.title"),message:I18n.t("ui.next_steps.reactivate.no_items")})).render()},startReactivate:function(){this._reactivateManager&&this.stopListening(this._reactivateManager);this._reactivateManager=new a.ReactivateManager(this.courseId());
this.listenTo(this._reactivateManager,"submitted",this.onSubmitReactivateActivityTests);this.listenTo(this._reactivateManager,"empty",this.onEmptytReactivateActivityTests);this._reactivateManager.start()},onceReady:function(d){"level_up"==this.type()&&this.startLevelUp();"reactivate"==this.type()&&this.startReactivate();"assignments"==this.type()&&(this.setAssignment(),a.vent.trigger("course:lens:show",this.course.id,d.firstWith({type:this.type()}).get("name")));"markbook"==this.type()&&a.profile.isStudent()&&
(d="student_assignment-"+this.studentAssignmentId(),(new c.Course.StudentReports.TaskPanel({id:d,course:this.course})).open())}});f=a.View.extend({template:"common/components/list/notifications/empty-template"});var l=c.List.LayoutView.extend({renderPaginationResults:function(){c.List.LayoutView.prototype.renderPaginationResults.call(this);var a=this.collection.totalRecords;0!==a&&(a=1===a?"notification":"notifications",this.$(".queryResults").append(" "+a))}});c.List.Notifications=c.List.extend({itemView:d,
emptyView:f,selectable:!1,view:l,showList:function(){c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open item:assignment",this.onItemOpen.bind(this));this.listenTo(this.list,"item:read",this.onItemRead.bind(this));this.listenTo(this.list,"item:archive",this.onItemArchive.bind(this))},onItemOpen:function(a){(new k(a)).show()},onItemArchive:function(a){a.model.save({read:!0,archived:!0})},onItemRead:function(a){a.model.get("read")||a.model.save({read:!0})}})})(Osp,Osp.Components,
Marionette,_);
(function(a,c,f){f=c.List.AccordionItemView.extend({template:"common/components/list/resources/item-template",ui:f.extend({openButton:"[data-action=open]"},c.List.AccordionItemView.prototype.ui),triggers:f.extend({"click @ui.openButton":"open"},c.List.AccordionItemView.prototype.triggers)});var e=a.View.extend({template:"common/components/list/contents/empty-template",getNoContentsFoundMessage:function(){return a.profile.isStudent()?gon.noContentsFoundMessageForStudents:I18n.t("ui.common.noresources.body")},serializeData:function(){return{message:this.getNoContentsFoundMessage()}}});
c.List.Resources=c.List.extend({itemView:f,emptyView:e,selectable:!1,showList:function(){c.List.prototype.showList.call(this);this.listenTo(this.list,"item:open",this.onItemOpen.bind(this))},onItemOpen:function(a){a.model.showContent(null,window.parent)}})})(Osp,Osp.Components,_);
(function(a){var c=a.List.ItemView.extend({template:"common/components/list/student_assignments/not_submitted_item-template"}),f=a.List.AccordionItemView.extend({className:"list__item accordion",ui:_.extend({actions:".actions",message:".message",cancel:"[data-action=cancel]",submit:"[data-action=submit]"},a.List.AccordionItemView.prototype.ui),triggers:_.extend({"click @ui.cancel":"cancel","click @ui.submit":"submit","input input[type=number]":"mark:change"},a.List.AccordionItemView.prototype.triggers),
templateContext:{submittedAt:function(){return moment(this.submitted_at).format("ddd Do MMMM YYYY")},submitText:function(){return I18n.t("ui.teacher_markbook_panel."+(this.status==Osp.Markbook.MARKED?"resubmit":"submit"))},submittedText:function(){return I18n.t("ui.teacher_markbook_panel."+(this.status==Osp.Markbook.MARKED?"marking_resubmitted":"marking_submitted"))}},toggleActionsClassModifier:function(a,c){var d=this.getUI("actions");c?d.addClass("actions--"+a):d.removeClass("actions--"+a)},toggleActions:function(a){a&&
(this.toggleActionsClassModifier("notVisible",!1),this.getUI("message").removeClass("message--visible"));this.toggleActionsClassModifier("active",a)},hideActions:function(){this.toggleActionsClassModifier("notVisible",!0)},showFeedbackMessage:function(){var a=this;return new Promise(function(c){a.getUI("message").addClass("message--visible");_.delay(c,2E3)})},restore:function(){},serializeData:function(){return Object.assign({},a.List.AccordionItemView.prototype.serializeData.call(this),{mark:this.model.mark()})}}),
e=f.extend({template:"common/components/list/student_assignments/single_mark_item-template",ui:_.extend({mark:"input[type=number]"},f.prototype.ui),triggers:_.extend({'click [data-action="open:student_content"]':"open:student_content"},f.prototype.triggers),templateContext:function(){var a=this.model;return _.extend({showMark:function(){return!a.get("no_mark")},showDelivery:function(){return a.wasDelivered()},deliveryText:function(){return I18n.t("ui.teacher_markbook_panel.delivery_type."+a.get("delivery_type"))},
showStudentContents:function(){return a.get("student_contents")&&a.get("student_contents").length}},f.prototype.templateContext)},restore:function(){this.getUI("mark").val(this.model.get("mark")||"")}}),d=f.extend({template:"common/components/list/student_assignments/multiple_marks_item-template",templateContext:function(){var a=this.model;return _.extend({hasPendingQuestions:function(){return a.hasPendingQuestions()},pendingQuestionsCount:function(){return a.pendingQuestions().length}},f.prototype.templateContext)},
triggers:_.extend({'click [data-action="open:screen"]':"open:screen"},f.prototype.triggers),ui:_.extend({mark:".mark",question:"input[type=number]"},f.prototype.ui),updateMark:function(){this.getUI("mark").text(this.model.get("mark"))},restore:function(){var a=this;this.getUI("question").each(function(c,d){c=$(d).data("id");$(d).val(a.model.getQuestion(c).mark||"")});this.updateMark()}}),h=Osp.View.extend({template:"common/components/list/student_assignments/empty-template"});a.List.StudentAssignments=
a.List.extend({emptyView:h,selectable:!1,itemView:function(a){return a.isSubmitted()?a.hasSingleMark()?e:d:c},showList:function(){a.List.prototype.showList.call(this);this.listenTo(this.list,"item:mark:change",this.onMarkChange.bind(this));this.listenTo(this.list,"item:submit",this.onSubmit.bind(this));this.listenTo(this.list,"item:cancel",this.onCancel.bind(this));this.listenTo(this.list,"item:open:student_content",this.onOpenStudentContent.bind(this));this.listenTo(this.list,"item:open:screen",
this.onOpenScreen.bind(this))},onMarkChange:function(a,c){var d=$(c.currentTarget);c=parseInt(d.val());if(_(c).isNaN())return a.toggleActions(!1);a.model.hasSingleMark()?a.model.updateMark(c):(d=parseInt(d.data("id")),a.model.updateQuestionMark(d,c),a.updateMark());a.toggleActions(a.model.isMarkingReady())},onSubmit:function(a){var c=this;a.model.submit().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return a.hideActions(),d.yield(a.showFeedbackMessage(),
2);a.toggleActions(!1);c.toggleAccordion(a);c.trigger("submitted",a.model);d.jumpToEnd()})})},onCancel:function(a){a.model.restore();a.toggleActions(!1);a.restore();this.toggleAccordion(a)},onOpenStudentContent:function(a,c){c=$(c.currentTarget).data("index");a=a.model.get("student_contents")[c];(new Osp.ContentLauncherService(a)).launch()},onOpenScreen:function(a,c){c=$(c.currentTarget).data("id");this.trigger("open:screen",c,a.model)}})})(Osp.Components);
(function(a,c){var f=a.View.extend({className:"sidepanel__body",template:"common/components/activate_product/confirm/body-template",templateContext:function(){return{time:function(a){if(30>a)return I18n.t("ui.common.days",{n:a});a=Math.round(a/30);return 1===a?I18n.t("ui.common.month"):I18n.t("ui.common.months",{n:a})},getHelpLink:function(){return a.store.get(a.Store.TYPE.SETTINGS).getAttr("activate_product_help")}}},ui:{confirm:".helpCard--confirm",success:".helpCard--success",error:".helpCard--error",
errorText:".helpCard--error .helpCard__content p"},modelEvents:{change:"render"},hideConfirm:function(){this.getUI("confirm").addClass("hidden")},showSuccess:function(){this.hideConfirm();this.getUI("success").removeClass("hidden")},showError:function(a){this.hideConfirm();this.getUI("error").removeClass("hidden");this.getUI("errorText").html(a)}}),e=a.View.extend({template:"common/components/activate_product/confirm/footer-template",className:"sidepanel__footer",ui:{activate:"[data-action=activate]",
cancel:"[data-action=cancel]",button:"[role=button]"},triggers:{"click @ui.activate":"activate","click @ui.cancel":"close"},disable:function(){this.getUI("button").attr("disabled","true")}});c.ActivateProduct.Confirm=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",this.showFooter.bind(this))},showFooter:function(){this.footer=new e;this.propagateEvents(this.footer,"close");this.listenTo(this.footer,"activate",this.activate.bind(this));this.page.showChildView("footer",this.footer)},
activate:function(){this.footer.disable();this.model.save().done(this.onActivation.bind(this)).fail(this.onFail.bind(this))},onActivation:function(){this.getView().showSuccess();this.trigger("activated")},onFail:function(a){a=this.getErrorMessage(a);this.getView().showError(a)},show:function(a){this.page=a;c.Component.prototype.show.call(this,a.getRegion("body"))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({className:"sidepanel__body",template:"common/components/activate_product/main/body-template",templateContext:{getHelpLink:function(){return a.store.get(a.Store.TYPE.SETTINGS).getAttr("activate_product_help")}},ui:{token:"input:text",continue:"button[data-action=continue]",error:".helpCard--error",errorText:".helpCard--error .helpCard__content p"},triggers:{"click @ui.continue":"continue","keyup @ui.token":"change","change @ui.token":"change"},toggleButton:function(a){a?
this.enable():this.disable()},disable:function(){this.getUI("continue").attr("disabled","true")},enable:function(){this.getUI("continue").removeAttr("disabled")},toggleError:function(a,c){this.getUI("error").toggleClass("hidden",!a);a&&this.getUI("errorText").html(c)}});c.ActivateProduct.Main=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"change",this.onChange.bind(this));this.listenTo(a,"continue",this.onContinue.bind(this))},onChange:function(){this.model.set("token",this.getView().getUI("token").val());
this.getView().toggleButton(this.model.isValid())},onContinue:function(){this.getView().toggleError(!1);this.model.fetch().done(this.onSuccess.bind(this)).fail(this.onFail.bind(this))},onSuccess:function(){this.trigger("confirm")},onFail:function(a){a=this.getErrorMessage(a);this.getView().toggleError(!0,a)},show:function(a){c.Component.prototype.show.call(this,a.getRegion("body"))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({template:"common/components/calendar_panel/annex-template",className:"sidepanel__annex",modelEvents:{change:"render"},templateContext:{isEmpty:function(){return _.isEmpty(this.end)}}}),e=c.Calendar.extend({showAnnex:function(a){this.annex=new f({model:this.model});a.show(this.annex)}});c.CalendarPanel=c.SidePanel.extend({className:"sidepanel calendar__panel",initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new e({model:this.model})}})})(Osp,
Osp.Components);
(function(a,c,f){c.Course=c.Course||{};var e=Mn.Object.extend({initialize:function(a){this.component=a},buildMain:function(){return{id:"main",title:"Assignment Basket",active:!0,component:this.component.getMain(),single:!1,position:1}},buildSingleMain:function(){return{id:"main",title:"Assignment Basket",active:!0,component:this.component.getSingleMain(),single:!0,position:1}},buildSettings:function(a){return{id:"settings",title:"Settings",active:!1,component:a,back:"main",position:2}},buildSetStudents:function(){return{id:"students",
title:"Set students for all",active:!1,component:this.component.getSetStudents(),position:3}},buildSetDates:function(){return{id:"dates",title:"Set dates for all",active:!1,component:this.component.getSetDates(),position:4}},buildMaterial:function(){return{id:"material",title:"Support material",active:!1,component:this.component.getMaterial(),back:"settings",position:5}},buildBrowser:function(){return{id:"structures",title:"Browse",active:!1,component:this.component.getBrowser(),position:6}},buildProperMain:function(){return this.component.model.singleTest()?
this.buildSingleMain():this.buildMain()},build:function(){return new a.Collection([this.buildProperMain(),this.buildSetStudents(),this.buildSetDates()],{comparator:"position"})}});c.Course.AssignmentBasket=c.SidePanel.extend({waitForDependencies:function(){return this.fetchStore(f.TYPE.STRUCTURES).done(function(a){this.structures=a.cloneRecursive()}.bind(this))},initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.builder=new e(this);this.pages=this.builder.build()},firstAssignment:function(){return this.model.draftAssignments().first()},
singleMode:function(){return this.model.singleTest()},rebuildMain:function(){this.pages.remove(this.getPage("main"));this.pages.add(this.builder.buildProperMain())},beforeEnabling:function(){var a=this.getPage("main"),c=a.get("component").model;!this.singleMode()||a.get("single")&&c===this.firstAssignment()||this.rebuildMain();!this.singleMode()&&a.get("single")&&this.rebuildMain()},getMain:function(){var a=new c.Course.AssignmentBasket.Main({model:this.model,close:this.close.bind(this)});this.listenTo(a,
"assignment:settings",this.onOpenSettings.bind(this));this.listenTo(a,"assignment:preview",this.onPreview.bind(this));this.listenTo(a,"setDates",this.onSetDates.bind(this));this.listenTo(a,"setStudents",this.onSetStudents.bind(this));this.listenTo(a,"assign",this.assign.bind(this));return a},close:function(){c.SidePanel.prototype.close.apply(this,arguments);this.rebuildMain()},getSingleMain:function(){return this.getAssignment(this.firstAssignment(),"SingleMain")},getSetDates:function(){if(this.setDates)return this.setDates;
this.setDates=new c.Course.AssignmentBasket.SetDates({pool:this.model});this.listenTo(this.setDates,"back",this.back.bind(this));return this.setDates},getSetStudents:function(){if(this.setStudents)return this.setStudents;this.setStudents=new c.Course.AssignmentBasket.SetStudents({pool:this.model,course:this.model.course()});this.listenTo(this.setStudents,"back",this.back.bind(this));return this.setStudents},getAssignment:function(a,e){a=new c.Course.AssignmentBasket[e]({model:a,pool:this.model,course:this.model.course(),
close:this.close.bind(this)});a.on("assignment:setDates",this.onSetDates.bind(this));a.on("assignment:setStudents",this.onSetStudents.bind(this));a.on("assignment:preview",this.onPreview.bind(this));a.on("assignment:material",this.onOpenMaterial.bind(this));a.on("goTo:main",this.onGoToMain.bind(this));a.on("assign",this.assign.bind(this));return a},getMaterial:function(){if(this.material)return this.material;this.material=new c.Course.AssignmentBasket.Material({pool:this.model,course:this.model.course(),
structures:this.structures});this.listenTo(this.material,"structures",this.onOpenBrowser.bind(this));return this.material},getBrowser:function(){if(this.browser)return this.browser;this.browser=new c.Course.AssignmentBasket.Structures({course:this.model.course(),collection:this.structures});this.listenTo(this.browser,"node:view",this.onStructureView.bind(this));return this.browser},getLens:function(){return a.state.getLens()},getStructure:function(){var c=a.state.getStructure();return c&&"StructureRoot"!==
c.get("model_type")?c:null},onOpenSettings:function(a){var c=this.pages.get("settings");c&&this.pages.remove(c);this.pages.add(this.builder.buildSettings(this.getAssignment(a,"Settings")));_.delay(this.goTo.bind(this,"settings"),10)},onPreview:function(c){var d=new a.Content({id:c.get("test_id")});d.setCourse(a.currentCourse);d.fetch().done(function(){d.showContent()})},onSetDates:function(a){this.getSetDates().setTarget(a);this.goTo("dates")},onSetStudents:function(a){this.getSetStudents().setTarget(a);
this.goTo("students")},onOpenMaterial:function(a,c){var d=function(){this.getMaterial().setContentType(c);this.getMaterial().setTarget(a);this.getPage("material").set("back",this.getActive().id);this.goTo("material")}.bind(this);this.pages.get("material")||this.pages.add(this.builder.buildMaterial());_.delay(d,50)},onOpenBrowser:function(a){var c=function(){this.getBrowser().setTarget(a);this.goTo("structures")}.bind(this);this.pages.get("structures")||this.pages.add(this.builder.buildBrowser());
_.delay(c,50)},onStructureView:function(a){this.getMaterial().setStructure(a);this.goTo("material")},onGoToMain:function(){this.goTo("main")},assign:function(){$.when(this.model.getQueue().finish()).then(this.model.assign.bind(this.model)).then(this.onAssignDone.bind(this)).fail(this.onAssignFail.bind(this))},onAssignDone:function(a){Backbone.Radio.channel("analytics").request("track:assignContent",a.assigned_contents);this.model.trigger("assign:done",a.delayed?"delayed":"submitted")},onAssignFail:function(c){(new a.AlertDialog({className:"error",
title:I18n.t("ui.common.error"),message:c.responseText,submitText:I18n.t("ui.common.close")})).render();this.model.trigger("assign:fail")}});c.Course.AssignmentBasket.Empty=a.View.extend({className:"sidepanel__wrapper",template:"course/components/assignment_basket/empty-template"});c.Course.AssignmentBasket.Success=a.View.extend({initialize:function(c){a.View.prototype.initialize.apply(this,c);this.course=this.options.course},templateContext:function(){var a=this.options.assignmentsCount,c=this.options.assignmentStatus,
e=this.course.lenses().find(function(a){return a.get("active")});return{assignmentsCount:a,activeLensName:e.get("name"),assignmentStatus:c,assignmentsLabel:1<a?"assignments":"assignment"}},className:"assignmentBasket__success",template:"course/components/assignment_basket/main/success-template",ui:{returnTo:"[data-action=returnTo]",goToMarkbook:"[data-action=goToMarkbook]"},events:{"click @ui.returnTo":"onReturnTo","click @ui.goToMarkbook":"onGoToMarkbook"},onReturnTo:function(a){this.options.close()},
onGoToMarkbook:function(c){c=this.course.lenses().find(function(a){return"markbook"===a.get("type")});c="courses/"+this.course.id+"/modules/"+c.get("name");a.Routing.showRoute(c)}})})(Osp,Osp.Components,Osp.Store);
(function(a,c){c.Course=c.Course||{};a=a.View.extend({template:"course/assignments/student/header-template",className:"section__header",regions:{lensFilters:{el:".assignments__lensFilters",replaceElement:!0},search:{el:".assignments__search",replaceElement:!0},filters:{el:".assignments__filters",replaceElement:!0}}});c.Course.AssignmentsLensHeader=c.Component.extend({view:a,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){this.showLensFilters();this.showSearch();
this.showFilters()},showLensFilters:function(){(new c.LensFilters({collection:this.lens.filters()})).show(this.getRegion("lensFilters"))},showSearch:function(){var a=new c.Search;this.propagateEvent(a,"search");a.show(this.getRegion("search"))},showFilters:function(){(new c.Filters({collection:this.filters,className:"filtersToggle button button--icon ml--4x"})).show(this.getRegion("filters"))}})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({className:"content",template:"course/components/assignments_widget/layout-template",ui:{lensLink:'[data-action="open:assignments"]'},triggers:{"click @ui.lensLink":"open:assignments"},collectionEvents:{reset:"toggleLensLink"},regions:{list:{el:".home__assignments__items",replaceElement:!0},stats:{el:".home__assignments__stats",replaceElement:!0}},toggleLensLink:function(){this.getUI("lensLink").toggleClass("hidden",this.collection.isEmpty())},onRender:function(){this.toggleLensLink()}}),
d=a.View.extend({tagName:"ul",className:"shortcuts",template:"course/components/assignments_widget/stats-template",triggers:{'click [data-action="open:due_today"]':"open:due_today",'click [data-action="open:due_this_week"]':"open:due_this_week"},modelEvents:{change:"render"},templateContext:{muted:function(a){return this[a]?"":"badge--muted"},getTodayLink:function(){return"/app/courses/"+a.state.getCourse().id+"/modules/Assessment/filter/due_today"},getThisWeekLink:function(){return"/app/courses/"+
a.state.getCourse().id+"/modules/Assessment/filter/due_this_week"}}}),h=a.View.extend({className:"list__item",template:"course/components/assignments_widget/assignment-template",tagName:"button",triggers:{click:"open"},attributes:function(){return{"aria-labelledby":"assess_title"+this.model.get("id"),"aria-describedby":"assigned"+this.model.get("id")+" due_date"+this.model.get("id")}},templateContext:{dueDate:function(){return f(this.due).format("ddd DD MMM YYYY")},getAssignedById:function(){return"assigned"+
this.id},getDueDateId:function(){return"due_date"+this.id},getTitleId:function(){return"assess_title"+this.id}}}),k=a.View.extend({template:"course/components/assignments_widget/empty-template"}),l=a.CollectionView.extend({emptyView:k,childView:h,childViewEventPrefix:"assignment"});c.Course.AssignmentsWidget=c.Component.extend({view:e,propagate:"open:assignments",onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()})},showStats:function(){var a=this,c=new d({model:this.collection.stats()});
this.listenTo(c,"open:due_today",function(){return a.trigger("open:due_today")});this.listenTo(c,"open:due_this_week",function(){return a.trigger("open:due_this_week")});this.showChildView("stats",c)},showList:function(){var a=this,c=new l({collection:this.collection});this.listenTo(c,"assignment:open",function(c){return a.trigger("open:assignment",c.model)});this.showChildView("list",c)},onRender:function(){this.showStats();this.showList()}})})(Osp,Osp.Components,moment);
(function(a,c){c.Course=c.Course||{};var f=a.View.extend({template:"course/resources/actions-template",className:"actions",regions:{actionPanel:".actionPanel"},templateContext:function(){var a=this;return{isMyContentsMode:function(){return a.collection.isMyContentsFilterActive()},showShare:function(){return a.lens&&"assignments"!==a.lens.get("type")},onlyOneResourceSelected:function(){return 1===a.collection.allThatAre("checked").length}}},ui:{close:"[data-action=close]",back:"[data-action=back]",
assign:"[data-action=assign]",share:"[data-action=share]",copy:"[data-action=copy]",shareGoogle:"[data-action=shareGoogle]",shareTeams:"[data-action=shareTeams]",copyLink:"[data-action=copyLink]",assignNow:"[data-action=assignNow]",assignLater:"[data-action=assignLater]",delete:"[data-action=delete]",edit:"[data-action=edit]",addEditShortcut:"[data-action=addEditShortcut]",toggleMore:"[data-action=toggleMore]"},triggers:{"click @ui.close":"close","click @ui.assignNow":"assignNow","click @ui.assignLater":"assignLater",
"click @ui.shareGoogle":"shareGoogle","click @ui.copy":"copy","click @ui.shareTeams":"shareTeams","click @ui.copyLink":"copyLink","click @ui.delete":"delete","click @ui.edit":"edit","click @ui.addEditShortcut":"addEditShortcut","click @ui.toggleMore":"panel:toggleMore"},events:{"click @ui.assign":"onAssign","click @ui.share":"onShare","click @ui.back":"onGoBack"},onAssign:function(){this.$el.addClass("actions--assign")},onShare:function(){this.$el.removeClass("moreRoot--enabled").addClass("actions--share")},
onGoBack:function(){this.$el.removeClass("moreRoot--enabled actions--assign actions--share")},setLens:function(a){this.lens=a}});c.Course.ContentActions=c.Component.extend({view:f,propagate:"close assignNow assignLater",onCreate:function(a){a.setLens(this.lens);this.listenTo(a,"shareGoogle",this.onShare.bind(this,"GoogleClassroom"));this.listenTo(a,"shareTeams",this.onShare.bind(this,"MSTeams"));this.listenTo(a,"copyLink",this.onShare.bind(this,"CopyLinkToClipboard"));this.listenTo(a,"delete",this.onDelete.bind(this));
this.listenTo(a,"edit",this.onEdit.bind(this));this.listenTo(a,"addEditShortcut",this.onAddEditShortcut.bind(this));this.listenTo(a,"copy",this.onCopy.bind(this));this.listenTo(a,"panel:toggleMore",this.onToggleMoreMenu.bind(this))},onShare:function(c){a.vent.trigger("course:share",c,this.collection,this.lens)},onDelete:function(){(new a.Components.Course.DeletePanel({selection:this.collection.allThatAre("checked")})).showPanel(this.getView())},onEdit:function(){var c=this.collection.allThatAre("checked")[0];
c.isPlan()?window.open(c.getPlanUrl()):(new ("webpage"===c.get("format")?a.Components.Course.AddLinkPanel:a.Components.Course.UploadPanel)({uploadType:this.lens.getContentType(),mode:"edit",selection:c})).showPanel(this.getView())},onAddEditShortcut:function(){(new a.Components.Course.ShortcutPanel({selection:this.collection.allThatAre("checked"),lens:this.lens})).showPanel(this.getView())},onCopy:function(){this.getView().$el.removeClass("moreRoot--enabled");(new a.Components.Course.CopyPanel({selection:this.collection.allThatAre("checked"),
course:this.lens.course()})).showPanel(this.getView())},onToggleMoreMenu:function(){this.getView().$el.toggleClass("moreRoot--enabled")}})})(Osp,Osp.Components);
(function(a,c){c.Course=c.Course||{};var f=a.View.extend({template:"course/components/content_lens_header/layout-template",className:"section__header",templateContext:function(){var c=this;return{isMyContentsMode:function(){return c.collection.isMyContentsFilterActive()},showAssignmnetBasket:function(){return a.profile.isTeacher()}}},ui:{filtersToggler:".filtersToggle",assignmentsCounter:"[data-counter=assignments]"},triggers:{"click @ui.filtersToggler":"panel:toggleFilters"},regions:{myContentsActions:{el:".myContents__actions",
replaceElement:!0},myContentsMore:{el:".myContents__more",replaceElement:!0},search:{el:".search",replaceElement:!0},filters:{el:".filters",replaceElement:!0},actions:{el:".actions",replaceElement:!0}},toggleFilterHighlight:function(a){this.getUI("filtersToggler").toggleClass("filtersToggle--highlighted",a)},updateAssignmentsCounter:function(a){this.getUI("assignmentsCounter").toggleClass("hidden",!a).text(a)}}),e=a.View.extend({ui:{upload:"[data-action=upload]",addLink:"[data-action=addLink]"},triggers:{"click @ui.upload":"upload",
"click @ui.addLink":"addLink"}}),d=e.extend({template:"course/components/content_lens_header/my_contents_actions-template",className:"mr--auto--l"}),h=e.extend({template:"course/components/content_lens_header/my_contents_more-template",className:"more",ui:_.extend({toggleMore:"[data-action=toggleMore]"},e.prototype.ui),triggers:_.extend({"click @ui.toggleMore":"panel:toggleMore"},e.prototype.triggers)});c.Course.ContentLensHeader=c.Component.extend({view:f,propagate:"upload addLink",onCreate:function(a){this.listenTo(this.collection,
"sync reset",this.toggle.bind(this));this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){this.showSearch();this.showFilters();a.profile.isTeacher()&&(this.listenTo(this.collection,"contents:change:filter",this.toggleMyContentsActions.bind(this)),this.listenTo(this.pool,"change:count",this.updateAssignmentsCounter.bind(this)),this.updateAssignmentsCounter(),this.toggleMyContentsActions())},showSearch:function(){var a=new c.Search;this.propagateEvent(a,"search");a.show(this.getRegion("search"))},
showFilters:function(){(new c.Filters({collection:this.filters,className:"filtersToggle button button--icon ml--auto"})).show(this.getRegion("filters"))},showActions:function(){this.getView().$el.addClass("section__header--actions");var a=new c.Course.ContentActions({lens:this.lens,collection:this.collection});this.listenTo(a,"close",this.onActionsClose.bind(this));this.propagateEvents(a,"assignNow assignLater");a.show(this.getView().getRegion("actions"))},toggleMyContentsActions:function(){if(this.collection.isMyContentsFilterActive())return this.showMyContentsActions();
this.getRegion("myContentsActions").empty();this.getRegion("myContentsMore").empty()},showMyContentsActions:function(){var a=function(a){this.listenTo(a,"panel:toggleMore",this.onToggleMoreMenu.bind(this));this.listenTo(a,"upload addLink",this.onClickOption.bind(this));this.listenTo(a,"upload",this.showUploadPanel.bind(this));this.listenTo(a,"addLink",this.showAddLinkPanel.bind(this));return a}.bind(this);this.getView().showChildView("myContentsActions",a(new d));this.getView().showChildView("myContentsMore",
a(new h))},onClickOption:function(){this.getView().$el.find(".moreRoot--enabled").removeClass("moreRoot--enabled")},showMain:function(){this.getView().$el.removeClass("section__header--actions");this.getView().$el.find(".moreRoot--enabled").removeClass("moreRoot--enabled")},onActionsClose:function(){this.collection.setForAll({checked:!1});this.toggle()},updateAssignmentsCounter:function(){this.getView().updateAssignmentsCounter(this.pool.get("count"))},onToggleMoreMenu:function(){this.getView().$el.find(".main").toggleClass("moreRoot--enabled")},
toggle:function(){a.profile.isTeacher()&&(this.collection.areAny("checked")?this.showActions():this.showMain())},showUploadPanel:function(){var c={uploadType:this.lens.getContentType(),mode:"new"};(new a.Components.Course.UploadPanel(c)).showPanel(this.layout)},showAddLinkPanel:function(){var c={uploadType:this.lens.getContentType(),mode:"new"};(new a.Components.Course.AddLinkPanel(c)).showPanel(this.layout)}})})(Osp,Osp.Components);
(function(a,c,f){c.CopyPanel=c.CopyPanel||{};var e=a.Model.extend({defaults:{title:""},areMandatoryFieldsMissing:function(a){return 0<_.filter(["title"],function(c){return!a[c]||0===a[c].trim().length}).length},validate:function(a,c){if(this.areMandatoryFieldsMissing(a))return"Mandatory fields missing"}});f=a.View.extend({prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/copy-panel-template",templateContext:{getInstructionsText:function(){return I18n.t("ui.copyPanel.common.save_copy",
{folder:this.folderLabel})}},getFolderLabel:function(){return a.state.getLens().isPlanning()?I18n.t("ui.copyPanel.common.my_contents"):a.state.getLens().isAssignment()?I18n.t("ui.copyPanel.common.my_assessments"):I18n.t("ui.copyPanel.common.my_resources")},serializeData:function(){return{folderLabel:this.getFolderLabel()}},triggers:{'click button[data-action="confirm"]':"confirm",'click button[data-action="cancel"]':"cancel",'keyup input[data-action="changeTitle"]':"changeTitle"},toogleInfoMessageError:function(){this.$(".messageError").toggleClass("message--visible")},
toogleInfoMessageSuccess:function(){this.$(".messageDone").toggleClass("message--visible")},setTitle:function(a){this.$('input[data-action="changeTitle"]').val(a)},disableConfirmButton:function(a){this.$('button[data-action="confirm"]').prop("disabled",a)}});c.Course.CopyPanel=c.Component.extend({view:f,initialize:function(a){this.model=new e;c.Component.prototype.initialize.apply(this,a)},onCreate:function(a){this.listenTo(a,"confirm",this.onConfirm.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this));
this.listenTo(a,"changeTitle",this.onChangeTitle.bind(this));this.setDefaultTitle()},setDefaultTitle:function(){var a=this.options.selection[0].get("name"),c=this.model;if(a){var e=this.getView(),f="Copy of "+a;e.$().ready(function(){e.setTitle(f);c.set("title",f)})}},onChangeTitle:function(a,c){a=$(c.currentTarget).val();this.model.set("title",a)},onCancel:function(){this.toggle()},refetchList:function(){a.vent.trigger("change:myContents")},onConfirm:function(){if(this.model.isValid()){this.getView().disableConfirmButton(!0);
var a=this.options.course.id,c=this.options.selection[0].get("id");$.ajax({url:"/api/courses/"+a+"/contents/"+c+"/copy",data:{new_name:this.model.get("title")}}).done(this.onCopySuccess.bind(this)).fail(this.onCopyFailure.bind(this))}},onCopySuccess:function(){this.getView().toogleInfoMessageSuccess();this.getPanel().delayClose();this.refetchList()},onCopyFailure:function(){this.getView().disableConfirmButton(!1);this.getView().toogleInfoMessageError()},getPanel:function(){this.panel||(this.panel=
new c.SidePanel({title:I18n.t("ui.copyPanel.common.copy"),component:this}));return this.panel},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);this.toggle()}})})(Osp,Osp.Components,Marionette);
(function(a,c,f){c.DeletePanel=c.DeletePanel||{};f=a.View.extend({prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/delete-panel-template",triggers:{'click button[data-action="confirm"]':"confirm",'click button[data-action="cancel"]':"cancel"},toogleMessageError:function(){this.$(".messageError").toggleClass("message--visible")},toogleMessageSuccess:function(){this.$(".messageDone").toggleClass("message--visible")},disableConfirmButton:function(a){this.$('button[data-action="confirm"]').prop("disabled",
a)}});c.Course.DeletePanel=c.Component.extend({view:f,initialize:function(a){c.Component.prototype.initialize.apply(this,a)},onCreate:function(a){this.listenTo(a,"confirm",this.onConfirm.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this))},onCancel:function(){this.toggle()},refetchList:function(){a.vent.trigger("change:myContents")},onConfirm:function(){this.getView().disableConfirmButton(!0);var a=this.options.selection.map(function(a){return a.destroy({wait:!0})});$.when.apply($,a).done(this.onDeleteSuccess.bind(this)).fail(this.onDeleteFailure.bind(this))},
onDeleteSuccess:function(){this.getView().toogleMessageSuccess();this.getPanel().delayClose();this.refetchList()},onDeleteFailure:function(){var a=this.getView();a.toogleMessageError();a.disableConfirmButton(!1);setTimeout(function(){a.toogleMessageError()},2E3)},getPanel:function(){this.panel||(this.panel=new c.SidePanel({title:I18n.t("ui.deletePanel.common.delete"),component:this}));return this.panel},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);this.toggle()}})})(Osp,
Osp.Components,Marionette);
(function(a,c){a=a.View.extend({template:"course/components/group_filter/layout-template",className:"dropdown dropdown--filter",ui:{label:".label",selected:".selected"},triggers:{click:"select"},onRender:function(){this.getUI("label").hide()},setSelected:function(a,c){a!==I18n.t("ui.common.all_groups")?this.getUI("selected").removeClass("badge badge--info"):this.getUI("selected").addClass("badge badge--info");this.getUI("label").text(c||"");this.getUI("selected").text(a);c?this.getUI("label").show():
this.getUI("label").hide()}});c.Course.GroupFilter=c.Component.extend({view:a,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.setDefaults()},setDefaults:function(){var a=this.getCourseState("group"),c=this.getCourseState("student");!this.selected&&a&&(this.selected={group:a},c&&Object.assign(this.selected,{student:c}))},onCreate:function(a){this.listenTo(a,"select",this.onSelect.bind(this));this.listenTo(a,"render",this.onRender.bind(this))},getPanel:function(){if(this.panel)return this.panel;
this.panel=new c.Course.GroupsPanel({multiple:!1,course:this.getCourse(),selected:this.selected,allGroups:this.allGroups,className:"sidepanel groupsPanel",title:I18n.t("ui.groups_panel.title")});this.propagateEvents(this.panel,"view:all_groups view:group view:student");this.listenTo(this.panel,"view:all_groups",this.onViewAllGroups.bind(this));this.listenTo(this.panel,"view:group",this.onViewGroup.bind(this));this.listenTo(this.panel,"view:student",this.onViewStudent.bind(this));this.panel.show();
return this.panel},onSelect:function(){this.getPanel().toggle()},onRender:function(){if(this.selected){var a=this.selected.group,c=this.selected.student;c?this.selectStudent(c):this.selectGroup(a)}},onViewAllGroups:function(){this.getView().setSelected(I18n.t("ui.common.all_groups"));this.unsetCourseState("group","student");this.getPanel().toggle()},onViewGroup:function(a){this.selectGroup(a);this.setCourseState({group:a});this.unsetCourseState("student");this.getPanel().toggle()},onViewStudent:function(a){this.selectStudent(a);
this.setCourseState({student:a});this.getPanel().toggle()},selectStudent:function(a){this.getView().setSelected(a.get("first_name")+" "+a.get("last_name"),"student")},selectGroup:function(a){this.getView().setSelected(a.get("name"),"group")},setStudent:function(a,c){this.selectStudent(a);this.getPanel().setStudent(a,c)}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({template:"course/components/groups_panel/annex-template",className:"sidepanel__annex",behaviors:[a.Behaviors.Tabs]});a=a.View.extend({template:"course/components/groups_panel/body-template",attributes:{tabindex:"0"},regions:{groups:"#groups",students:"#students"},showTab:function(a){this.$(".tabPanel--active").removeClass("tabPanel--active");this.$(a).addClass("tabPanel--active")}});var e=c.Groups.Single.extend({view:a,showAnnex:function(a){var c=this;this.annex=
new f;this.listenTo(this.annex,"show:panel",function(a){return c.getView().showTab(a)});a.show(this.annex)}});c.Course.GroupsPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new e({course:this.course,multiple:this.multiple,selected:this.selected,allGroups:this.allGroups});this.propagateEvents(this.component,"view:all_groups view:group view:student")},setStudent:function(a,c){this.component.preselect([c.id],[a.id])}})})(Osp,Osp.Components);
(function(a,c){var f=a.Model.extend({defaults:{code:""},validate:function(a){if(!a.code||7>a.code.trim().length)return"Invalid code"},urlRoot:"/api/groups/join"});a=a.View.extend({prependFieldNameOnError:!1,className:"joinGroup",tagName:"form",template:"course/home/student/join_group-template",triggers:{"click button":"save","keyup input:text":"change"},templateContext:function(){var a=this;return{instructions:function(){return a.instructions}}},initialize:function(a){this.instructions=a.instructions},
removeMessages:function(){this.$(".infoCard--error").toggleClass("infoCard--hidden",!0);this.$(".infoCard--success").toggleClass("infoCard--hidden",!0)},toogleMessageBoxError:function(){this.$(".infoCard--error").toggleClass("infoCard--hidden")},toogleMessageBoxSuccess:function(){this.$(".infoCard--success").toggleClass("infoCard--hidden")},disableButton:function(){this.$("[data-action=join]").attr("disabled","true")},enableButton:function(){this.$("[data-action=join]").removeAttr("disabled")}});
c.Course.JoinTeachingGroupForm=c.Component.extend({view:a,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.model=new f;this.instructions||(this.instructions=this.defaultInstructions())},viewOptions:function(){return{model:this.model,instructions:this.instructions}},defaultInstructions:function(){return I18n.t("ui.courses.lenses.home.teaching_groups.join_group_form_instructions")},toggleLoading:function(){this.getView().$el.toggleClass("loading")},onCreate:function(a){var c=
this;this.listenTo(a,"change",function(a,d){return c.onChange(a,d)});this.listenTo(a,"save",function(){return c.onSave()})},onChange:function(a,c){c=$(c.currentTarget).val();this.model.set("code",c);this.model.isValid()?a.enableButton():a.disableButton()},onSaveSuccess:function(){this.getView().toogleMessageBoxSuccess();this.trigger("save")},onSaveFailure:function(){this.getView().toogleMessageBoxError()},onSave:function(){var a=this;this.toggleLoading();this.getView().removeMessages();this.model.save().always(function(){return a.toggleLoading()}).done(function(){return a.onSaveSuccess()}).fail(function(){return a.onSaveFailure()})}})})(Osp,
Osp.Components);
(function(a,c){var f={NA:{symbol:"\u27cb",meaning:I18n.t("ui.teacher_reports.key_map.symbols.not_assigned")},"\u0421":{symbol:"\u2714",meaning:I18n.t("ui.teacher_reports.key_map.symbols.completed")},NC:{symbol:"\u2718",meaning:I18n.t("ui.teacher_reports.key_map.symbols.not_completed")},TM:{symbol:"\u2014",meaning:I18n.t("ui.teacher_reports.key_map.symbols.to_mark")},NAP:{symbol:"n/a",meaning:I18n.t("ui.teacher_reports.key_map.symbols.not_applicable")},DEV:{symbol:"/images/icon_DSE-developing.svg",meaning:I18n.t("ui.teacher_reports.key_map.symbols.developing")},
SEC:{symbol:"/images/icon_DSE-secure.svg",meaning:I18n.t("ui.teacher_reports.key_map.symbols.secure")},EXT:{symbol:"/images/icon_DSE-extending.svg",meaning:I18n.t("ui.teacher_reports.key_map.symbols.extending")},CONF:{symbol:"/images/icon_confidence-rating_confident.svg",meaning:I18n.t("ui.teacher_reports.key_map.symbols.confident")},NS:{symbol:"/images/icon_confidence-rating_not-sure.svg",meaning:I18n.t("ui.teacher_reports.key_map.symbols.not_sure")},NCONF:{symbol:"/images/icon_confidence-rating_not-confident.svg",
meaning:I18n.t("ui.teacher_reports.key_map.symbols.not_confident")}},e=a.View.extend({template:"common/components/scrollable_table/key_map/layout-template",regions:{keymap:{el:".keyMap__body",replaceElement:!1}},templateContext:{getMeaningHeader:function(){return I18n.t("ui.teacher_reports.key_map.headers.meaning")},getSymbolHeader:function(){return I18n.t("ui.teacher_reports.key_map.headers.symbol")}}}),d=a.View.extend({template:"common/components/scrollable_table/key_map/item-template",className:function(){return"key__itemContainer key__itemContainer--"+
this.model.get("classPrefix")},templateContext:{getImg:function(){return this.img},getKey:function(){return this.key},isImg:function(){return/.svg/g.test(this.img)}}}),h=a.CollectionView.extend({className:"keyMap__body",childView:d}),k=c.Component.extend({view:e,onCreate:function(a){var c=this;this.listenTo(a,"render",function(){c.showKeyMap()})},keyMap:function(){var c=[];this.options.keys.forEach(function(a){c.push({key:f[""+a].meaning,img:f[""+a].symbol,classPrefix:a})});return new a.Collection([].concat($jscomp.arrayFromIterable(c)))},
showKeyMap:function(){this.showChildView("keymap",new h({collection:this.keyMap()}))}});c.Course.KeyMap=c.SidePanel.extend({initialize:function(a){this.destroyOnClose=!0;c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new k({keys:a.keys})},viewOptions:function(){return _.extend({className:"sidepanel sidepanel--keyMap",title:I18n.t("ui.teacher_reports.key_map.headers.name")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c,f){c.Course=c.Course||{};var e=a.Model.extend({defaults:{link:"",linkTitle:"",linkDescription:"",marksAvailable:void 0,visibleForAllStudents:!1},areMandatoryFieldsMissing:function(a){return 0<_.filter(["link","linkTitle"],function(c){return!a[c]||0===a[c].trim().length}).length},validate:function(a,c){if(this.areMandatoryFieldsMissing(a))return"Mandatory fields missing"}});f=a.View.extend({initialize:function(a){this.isEditMode="edit"===a.options.mode;this.uploadType=a.options.uploadType},
prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/link-panel-template",templateContext:function(){var a=this.model,c=this.isEditMode,e="ContentAssignment"===this.uploadType;return{saveButtonLabel:c?I18n.t("ui.linkPanel.common.saveChanges"):I18n.t("ui.common.add"),successLabel:c?I18n.t("ui.linkPanel.common.updateSuccess"):I18n.t("ui.linkPanel.common.success"),errorLabel:c?I18n.t("ui.linkPanel.common.updateError"):I18n.t("ui.linkPanel.common.error"),showMarksField:e,
showVisibilityToggle:!e,shouldDisableSaveButton:c&&!a.hasChanged()}},modelEvents:{change:"render"},triggers:{'click button[data-action="confirmAddLink"]':"confirmAddLink",'click button[data-action="cancel"]':"cancel","change input":"change","change textarea":"change",'click a[data-action="changeVisibility"]':"toggleStudentsVisibility"},onRender:function(){this.toggleStudentsVisibility(this.model.get("visibleForAllStudents"))},toggleStudentsVisibility:function(a){this.$('a[data-action="changeVisibility"]').toggleClass("button--enabled",
a)},toogleInfoMessageError:function(){this.$(".messageError").toggleClass("message--visible")},toogleInfoMessageSuccess:function(){this.$(".messageDone").toggleClass("message--visible")},toogleInfoMessageWarn:function(a){this.$(".messageWarning").toggleClass("message--visible",a)},disableConfirmButton:function(a){this.$('button[data-action="confirmAddLink"]').prop("disabled",a)}});c.Course.AddLinkPanel=c.Component.extend({view:f,initialize:function(a){c.Component.prototype.initialize.apply(this,a);
this.onConfirmSuccess=this.onConfirmSuccess.bind(this);this.onConfirmFailure=this.onConfirmFailure.bind(this);this.isEditMode="edit"===this.options.mode;this.setViewInitialValues()},setViewInitialValues:function(){var a=this.isEditMode?this.getModelDataFromSelection():void 0;this.model=new e(a)},getModelDataFromSelection:function(){var a=this.options.selection;return{link:a.get("url"),linkTitle:a.get("name"),linkDescription:a.get("description"),marksAvailable:a.get("points"),visibleForAllStudents:a.get("student_access")}},
onCreate:function(a){this.listenTo(a,"cancel",this.onCancel.bind(this));this.listenTo(a,"change",this.onChange.bind(this));this.listenTo(a,"toggleStudentsVisibility",this.onToggleStudentsVisibility.bind(this));this.listenTo(a,"confirmAddLink",this.onConfirmAddLink.bind(this));this.listenTo(a,"render",this.enableAddLink.bind(this))},viewOptions:function(){return _.extend({options:this.options},c.Component.prototype.viewOptions.call(this))},enableAddLink:function(){this.model.isValid()?this.getView().toogleInfoMessageWarn(!1):
this.getView().toogleInfoMessageWarn(!0)},onToggleStudentsVisibility:function(){var a=!this.model.get("visibleForAllStudents");this.model.set("visibleForAllStudents",a)},onChange:function(a,c){a=$(c.currentTarget);this.model.set(a.attr("name"),a.val())},onCancel:function(){this.toggle()},refetchList:function(){a.vent.trigger("change:myContents")},getRequestURL:function(){var c="/api/courses/"+a.state.getCourse().id+"/contents",e=this.isEditMode&&c+"/"+this.options.selection.get("id");return this.isEditMode?
e:c},getDataForRequest:function(){var a=new FormData;a.append("url",this.model.get("link"));a.append("name",this.model.get("linkTitle"));var c=this.model.get("linkDescription");a.append("description",c?c.trim():"");a.append("format_id",gon.weblinkFormat.id);a.append("type",this.options.uploadType);"ContentAssignment"===this.options.uploadType?a.append("points",this.model.get("marksAvailable")):a.append("student_access",this.model.get("visibleForAllStudents"));return a},onConfirmAddLink:function(){this.model.isValid()?
(this.getView().disableConfirmButton(!0),$.ajax({method:this.isEditMode?"put":"post",processData:!1,contentType:!1,cache:!1,data:this.getDataForRequest(),enctype:"multipart/form-data",url:this.getRequestURL()}).done(this.onConfirmSuccess).fail(this.onConfirmFailure)):console.warn(this.model.validationError)},onConfirmSuccess:function(){this.getView().toogleInfoMessageSuccess();this.getPanel().delayClose();this.refetchList()},onConfirmFailure:function(){var a=this.getView();a.disableConfirmButton(!1);
a.toogleInfoMessageError();setTimeout(function(){a.toogleInfoMessageError()},2E3)},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);this.toggle()},getPanel:function(){this.panel||(this.panel=new c.SidePanel({title:this.isEditMode?I18n.t("ui.linkPanel.common.editLink"):I18n.t("ui.linkPanel.common.addLink"),component:this}));return this.panel}})})(Osp,Osp.Components,Marionette);
(function(a,c){var f=a.View.extend({tagName:"section",className:"markbook",behaviors:[a.Behaviors.Tabs],template:"course/components/markbook/layout-template",ui:{archiveAll:"button[data-action=archive_all]"},triggers:{"click @ui.archiveAll":"archive:all"},regions:{header:{el:".section__header",replaceElement:!0},body:".section__body"}});c.Course.Markbook=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){$("body").addClass("body--composed");
this.showHeader();this.showList();this.fetch()},onDestroy:function(){$("body").removeClass("body--composed")},onSearch:function(a){this.query=a;this.getData().setQuery(a);this.fetch()},onFiltering:function(a){"sort_by"===a.get("name")?this.setSort():this.setFilters();this.fetch()},onViewAllGroups:function(){this.getData().setGroup(null);this.getData().setUser(null);this.fetch()},onViewGroup:function(a){this.getData().setGroup(a);this.getData().setUser(null);this.fetch()},onViewStudent:function(a){this.getData().setGroup(null);
this.getData().setUser(a);this.fetch()},setSort:function(){this.getData().setSort(this.getFilters().findWhere({name:"sort_by"}).getSort())},setFilters:function(){this.getData().setAssignedBy(this.getFilters().findWhere({name:"assigned_by"}).get("selected"));this.getData().setStatus(this.getFilters().findWhere({name:"status"}).get("selected"))},fetch:function(){this.getData().resetCurrentPage();return this.getData().fetch({reset:!0})},getData:function(){if(this._data)return this._data;this._data=new a.PaginatedMarkbooks(null,
{lens:this.model,course:this.model.course()});this.loadState();return this._data},loadState:function(){var a=this._data,c=this.getCourseState("group"),f=this.getCourseState("student");c&&a.setGroup(c);f&&a.setUser(f);(c=this.getCourseState("filters:assigned_by"))&&a.setAssignedBy(c);(c=this.getCourseState("filters:status"))&&a.setStatus(c)},getFilters:function(){if(this.filters)return this.filters;this.filters=(new a.Builders.MarkbookFilters).build();this.listenTo(this.filters,"change:selected",_.debounce(this.onFiltering.bind(this),
50));return this.filters},goToTop:function(){this.getRegion("body").$el.animate({scrollTop:0},500)},showHeader:function(){var a=new c.Course.MarkbookLensHeader({lens:this.model,filters:this.getFilters()});this.listenTo(a,"search",this.onSearch.bind(this));this.listenTo(a,"view:all_groups",this.onViewAllGroups.bind(this));this.listenTo(a,"view:group",this.onViewGroup.bind(this));this.listenTo(a,"view:student",this.onViewStudent.bind(this));a.show(this.getRegion("header"))},showList:function(){var a=
this,d=new c.List.Markbook({collection:this.getData()});this.listenTo(d,"goTo:top",this.goToTop.bind(this));this.listenTo(d,"open",function(c){return a.open(c)});this.listenTo(this.getData(),"sync",function(){return a.toggleStatusPresenter()});d.show(this.getRegion("body"))},toggleStatusPresenter:function(){var a=this.$el().find(".hide-when-not-empty").hide();0===this.getData().length&&setTimeout(function(){return a.show()},250)},open:function(a){a=new c.Course.TeacherMarkbookPanel({model:a});a.show(this.getView());
a.toggle()}})})(Osp,Osp.Components);
(function(a,c){a=a.View.extend({template:"course/components/markbook/header-template",className:"section__header",regions:{search:{el:".markbook__search",replaceElement:!0},groupFilter:{el:".markbook__groupFilter",replaceElement:!0},assignedByFilter:{el:".markbook__assignedByFilter",replaceElement:!0},filters:{el:".markbook__filters",replaceElement:!0}}});c.Course.MarkbookLensHeader=c.Component.extend({view:a,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){this.showSearch();
this.showGroupFilter();this.showAssignedByFilter();this.showFilters()},showSearch:function(){var a=new c.Search({className:"inputGroup inputGroup--compact inputGroup--search mr--auto"});this.propagateEvent(a,"search");a.show(this.getRegion("search"))},showAssignedByFilter:function(){(new c.Form.Field({format:c.Form.ListFormat.DROPDOWN,model:this.filters.findWhere({name:"assigned_by"}),className:"dropdown dropdown--filter dropdown--assign mr--8x hidden visible--l"})).show(this.getRegion("assignedByFilter"))},
showGroupFilter:function(){var a=new c.Course.GroupFilter({className:"dropdown dropdown--filter dropdown--group"});this.propagateEvents(a,"view:all_groups view:group view:student");a.show(this.getRegion("groupFilter"))},showFilters:function(){(new c.Filters({collection:this.filters,className:"filtersToggle button button--icon"})).show(this.getRegion("filters"))}})})(Osp,Osp.Components);
(function(a,c,f){f=a.View.extend({template:"course/components/markbook_panel/body-template",className:"student-assignment",regions:{info:".student-assignment__info",work:".student-assignment__work"}});var e=a.View.extend({template:"course/components/markbook_panel/work-template",triggers:{'click [data-action="open:screen"]':"open:screen"},templateContext:function(){var c=this.model;return{hasStudentContents:function(){return c.get("delivery")===a.StudentAssignment.DELIVERY.UPLOAD||c.get("student_contents").length},
yourWorkMessage:function(){return c.get("delivery")===a.StudentAssignment.DELIVERY.MANUAL||c.get("manual_handing")?I18n.t("ui.assignments.delivery_type.manual"):c.get("delivery")===a.StudentAssignment.DELIVERY.NOTHING?I18n.t("ui.assignments.delivery_type.nothing"):I18n.t("ui.assignments.student_assignment.automarked")},hasMark:function(){return c.get("status")===a.Markbook.MARKED&&!c.get("no_mark")},yourMarkMessage:function(){if(c.get("status")===a.Markbook.DONE)return I18n.t("ui.markbook.awaiting_marks");
if(c.get("no_mark"))return I18n.t("ui.assignments.no_marks")},hasDetailedScore:function(){return!_.isNull(c.get("detailed_score"))}}}}),d=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},getTestLauncher:function(){var c=new a.Content(_.extend({student_assignment_id:this.model.get("student_assignment_id")},this.model.get("test_contents")[0]));return new a.ContentLauncherService(c)},getInfoComponent:function(){return new c.Course.StudentAssignmentInfo({model:this.model})},
showWork:function(){var a=new e({model:this.model});this.listenTo(a,"open:screen",this.onOpenScreen.bind(this));this.showChildView("work",a)},onRender:function(){this.getInfoComponent().show(this.getRegion("info"));this.showWork()},onOpenScreen:function(a,c){this.getTestLauncher().launchPage($(c.target).attr("data-screen"))}});c.Course.MarkbookPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component||(this.component=new d({model:this.model}))},
viewOptions:function(){return _.extend({className:"sidepanel sidepanel--full sidepanel__markbook",title:I18n.t("ui.assignments.assignment")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components,moment);
(function(a,c){var f=a.PaginatedCollection.extend({parse:a.PaginatedCollection.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/level_ups"},initialize:function(){a.PaginatedCollection.prototype.initialize.apply(this,arguments);this.perPage=5},setDse:function(a){this.dse=a},urlParams:{dse:function(){return this.dse?this.dse:""}}}),e=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/level_ups/"+this.id}}),
d=a.View.extend({tagName:"section",className:"nextSteps section__body",template:"course/components/next_steps/layout-template",regions:{levelUps:".levelUps",reactivate:".nextSteps__reactivate",help:".nextSteps__help",resultsPanel:".nextSteps__results"},triggers:{'click [data-action="help"]':"help"}});c.Course.NextSteps=c.Component.extend({view:d,goToTop:function(){this.getView().$el.animate({scrollTop:0},500)},channel:function(){return Backbone.Radio.channel("level_ups")},onCreate:function(a){var c=
this;this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"help",this.onHelp.bind(this));this.listenTo(this.channel(),"submitted",function(){return c.getLevelUps().fetch()})},onRender:function(){$("body").addClass("body--composed");this.showLevelUps();this.showReactivate();this.getLevelUps().fetch()},onHelp:function(){(new c.Course.NextStepsHelpPanel).show(this.getRegion("help")).toggle()},onDestroy:function(){$("body").removeClass("body--composed")},onFiltering:function(a){var c=this.getLevelUps();
"sort_by"===a.get("name")&&c.setSort(a.getSort());"dse"===a.get("name")&&c.setDse(a.get("selected"));c.fetch()},getFilters:function(){if(this.filters)return this.filters;this.filters=(new a.Builders.LevelUpsFilters).build();this.listenTo(this.filters,"change:selected",_.debounce(this.onFiltering.bind(this),50));return this.filters},getLevelUps:function(){return this._levelUps?this._levelUps:this._levelUps=new f},startLevelUp:function(c){var d=this,f=new e({id:c});f.fetch().done(function(){var c=new a.LevelUpManager(f);
d.listenTo(c,"submitted",function(){return d.showResults(f)});c.launch()})},showResults:function(a){(new c.Course.StudentAssignmentResultsPanel({model:a})).show().toggle()},showReactivate:function(){(new c.Course.NextStepsReactivate).show(this.getRegion("reactivate"))},showLevelUps:function(){var a=this,d=new c.List.LevelUps({filters:this.getFilters(),collection:this.getLevelUps()});this.listenTo(d,"start",function(c){return a.startLevelUp(c)});this.listenTo(d,"goTo:top",function(){return a.goToTop()});
d.show(this.getRegion("levelUps"))}})})(Osp,Osp.Components);
(function(a,c){a=a.View.extend({template:"course/components/next_steps/help_panel-template"});var f=c.Component.extend({view:a});c.Course.NextStepsHelpPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new f},viewOptions:function(){return _.extend({className:"sidepanel",title:I18n.t("ui.next_steps.help_panel.title")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({template:"course/components/next_steps/reactivate/layout-template",className:"content",regions:{body:".tabbed-box__content"},childViewTriggers:{start:"start"}}),e=a.View.extend({template:"course/components/next_steps/reactivate/empty-template"}),d=a.View.extend({template:"course/components/next_steps/reactivate/not-empty-template",triggers:{"click button":"start"}});c.Course.NextStepsReactivate=c.Component.extend({view:f,manager:function(){var c=this;if(this._manager)return this._manager;
this._manager=new a.ReactivateManager(this.getCourse().id);this.listenTo(this._manager,"change",function(){return c.showBody()});return this._manager},onCreate:function(a){var c=this;this.listenTo(a,"start",function(){return c.manager().start()});this.listenTo(a,"render",function(){return c.manager().fetch()})},showBody:function(){var a=this.manager().available?d:e;this.showChildView("body",new a)}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({className:"assessment-details",template:"course/components/next_steps/reactivate_results_panel/next_step-template",triggers:{"click [data-action=start]":"start","click [data-action=close]":"close"}}),e=a.View.extend({className:"loading",template:"course/components/next_steps/reactivate_results_panel/body-template",ui:{questionMarks:".marks-details",marksToggler:'[data-action="toggleMarks"]',openQuestionButton:".marks-details [data-action=open]"},events:{"click @ui.marksToggler":"toggleMarks"},
childViewTriggers:{start:"start",close:"close"},triggers:{"click @ui.openQuestionButton":"openQuestion"},regions:{nextStep:".nextStep"},modelEvents:{change:"onChange"},templateContext:{markFor:function(a){return 0==a.points?"n/a":a.mark+"/"+a.points+" ("+a.percentage_mark+"%)"},oddNumberOfQuestions:function(){return 0!=this.questions.length%2}},toggleMarks:function(){this.getUI("marksToggler").find("span").toggleClass("hidden");this.getUI("questionMarks").toggle()},onChange:function(){this.$el.removeClass("loading");
this.render()}}),d=c.Component.extend({view:e,propagate:"start close",onCreate:function(a){var c=this;this.listenTo(this.nextStep,"change",function(){return c.showNextStep()});this.listenTo(a,"openQuestion",function(a,d){return c.openQuestion(d.target)})},openQuestion:function(c){if(this.model.has("task_id")){c=$(c).data("index");var d=Object.assign({reactivate_task_id:this.model.get("task_id")},this.model.get("content"));return(new a.ContentLauncherService(d)).launchPage(c)}},showNextStep:function(){this.showChildView("nextStep",
new f)}});c.Course.NextStepsReactivateResultsPanel=c.SidePanel.extend({initialize:function(a){var e=a.model;c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new d({model:e.batch(),nextStep:e.nextStep()});this.propagateEvents(this.component,"close start")},viewOptions:function(){return _.extend({title:"",className:"sidepanel sidepanel--np sidepanel--full smartResultsPanel"},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c,f){f=a.View.extend({className:"home__nextSteps__widget content",template:"course/components/next_steps_widget/layout-template",ui:{lensLink:'[data-action="open:next_steps"]'},triggers:{"click @ui.lensLink":"open:next_steps"},collectionEvents:{reset:"toggleLensLink"},regions:{list:{el:".home__nextSteps__items",replaceElement:!0}},toggleLensLink:function(){this.getUI("lensLink").toggleClass("hidden",this.collection.isEmpty())},onRender:function(){this.toggleLensLink()}});var e=a.View.extend({className:"list__item",
template:"course/components/next_steps_widget/reactivate-template",triggers:{click:"open"}}),d=a.View.extend({className:"list__item",template:"course/components/next_steps_widget/level_up-template",modelEvents:{"change:curriculum":"render"},triggers:{click:"open"},templateContext:{typeLabel:function(){return I18n.t("ui.next_steps.level_up."+("intervention_level_up"==this.type?"secure":"extend"))},tabbedBoxClass:function(){return"tabbed-box__tab--level-up--"+("intervention_level_up"==this.type?"secure":
"extend")},curriculumLabel:function(){return this.curriculum.label},curriculumText:function(){return _.isEmpty(this.curriculum.titles)?"None added":this.curriculum.titles}},serializeData:function(){var c=(new a.CurriculumService(this.model)).serialized;return _.extend(a.View.prototype.serializeData.call(this),{curriculum:c})}}),h=a.View.extend({template:"course/components/next_steps_widget/empty-template"}),k=a.CollectionView.extend({emptyView:h,childViewEventPrefix:"next_step",childView:function(a){return"reactivate"==
a.get("item_type")?e:d}}),l=function(a){this.data=a};l.prototype.extractLevelUps=function(){return this.data.isEmpty()?[]:this.data.models.map(function(a){return a.clone().set({item_type:"level_up"})})};l.prototype.build=function(){var a=[],c=this.extractLevelUps();this.data.reactivateAvailable()&&a.push(this.reactivate);for(c.length&&a.push.apply(a,$jscomp.arrayFromIterable(c));2<a.length;)a.pop();this.collection.reset(a);return this.collection};$jscomp.global.Object.defineProperties(l.prototype,
{collection:{configurable:!0,enumerable:!0,get:function(){this._collection||(this._collection=new a.Collection);return this._collection}},reactivate:{configurable:!0,enumerable:!0,get:function(){return new a.Model({item_type:"reactivate"})}}});c.Course.NextStepsWidget=c.Component.extend({view:f,propagate:"open:next_steps",initialize:function(){var a=this;c.Component.prototype.initialize.apply(this,arguments);this.listenTo(this.collection,"reset",function(){return a.build()});this.items=this.builder().collection},
viewOptions:function(){return{collection:this.items}},onCreate:function(a){var c=this,d=Backbone.Radio.channel("level_ups");this.listenTo(a,"render",function(){return c.onRender()});this.listenTo(d,"change:curriculum",function(a){return c.setCurriculumFor(a)})},builder:function(){this._builder||(this._builder=new l(this.collection));return this._builder},build:function(){this.builder().build()},setCurriculumFor:function(a){var c=this.items.findWhere({id:a.id,item_type:"level_up"});c&&c.set({curriculum:a.get("curriculum")})},
onRender:function(){var a=this;this.build();var c=new k({collection:this.items});this.listenTo(c,"next_step:open",function(c){return a.trigger("open:next_step",c.model)});this.showChildView("list",c)}})})(Osp,Osp.Components,moment);
(function(a,c,f,e){c.Course=c.Course||{};var d=Mn.Object.extend({initialize:function(a){this.component=a},buildMain:function(){return{id:"main",title:"Resources",active:!0,component:this.component.getMain()}},buildBrowse:function(){return{id:"browse",title:"Browse",active:!1,component:this.component.getBrowse()}},build:function(){return new a.Collection([this.buildMain(),this.buildBrowse()])}});c.Course.ResourcesPanel=c.SidePanel.extend({fetchStructures:function(){return this.fetchStore(f.TYPE.STRUCTURES_WITH_TAGGING).done(function(a){this.structures=
a}.bind(this))},fetchLens:function(){return this.course.pLenses().done(function(){this.lens=this.course.resourcesPanelLens()}.bind(this))},waitForDependencies:function(){return[this.fetchStructures(),this.fetchLens()]},initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.pages=(new d(this)).build();this.$externalClose("hide");this.attachToAuthor()},findAuthorAPI:function(){return window.parent===window?null:window.parent.authorAPI?window.parent.authorAPI:window.parent.parent.authorAPI},
$externalClose:function(a){if(window.parent!==window)return e(".resources-panel-popup .close",window.parent.document)[a]()},attachToAuthor:function(){try{this.findAuthorAPI().resourcePanelManager.bind("open_page",this.setBookPage.bind(this))}catch(h){}},getMain:function(){if(this.main)return this.main;this.main=new c.Course.ResourcesPanel.Main({course:this.course});this.listenTo(this.main,"browse",this.onBrowse.bind(this));return this.main},getBrowse:function(){if(this.browse)return this.browse;this.browse=
new c.Course.ResourcesPanel.Browse({course:this.course,lens:this.lens});this.listenTo(this.browse,"node:view",this.onStructureView.bind(this));return this.browse},close:function(){this.$externalClose("click")},getStructureByBookPage:function(){return this.structures.getStructureByBookPage(this.bookId,this.bookPage)},isBrowsing:function(){return"browse"===this.pages.findWhere({active:!0}).id},setStructureInPages:function(){var a=this.getStructureByBookPage();this.getMain().setPageStructure(a)},setBookPage:function(a){this.bookPage=
a;this.setStructureInPages();this.isBrowsing()&&this.goTo("main")},onBrowse:function(a){this.goTo("browse")},onStructureView:function(a){this.getMain().setStructure(a);this.goTo("main")},onAfterShow:function(){this.setStructureInPages()}})})(Osp,Osp.Components,Osp.Store,jQuery);
(function(a,c){var f=a.View.extend({tagName:"li",className:"navigationTabs__item",template:"course/components/sections_menu/option-template",triggers:{"click button":"select"},modelEvents:{"change:active":"updateActiveClass"},onRender:function(){this.updateActiveClass()},updateActiveClass:function(){this.$el.toggleClass("navigationTabs__item--active",this.model.get("active"))}});f=a.CollectionView.extend({tagName:"ul",className:"navigationTabs",childView:f,childViewEventPrefix:"section"});c.Course.SectionsMenu=
c.Component.extend({view:f,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.buildCollection();this.setActiveOption()},onCreate:function(a){this.listenTo(a,"section:select",this.onSelect.bind(this))},buildSection:function(a){return Object.assign({},a,{active:!1,url:this.buildUrl(a)})},buildUrl:function(a){var c=this.lens.get("name");return"courses/"+this.lens.course().id+"/modules/"+c+"/s/"+a.url},buildCollection:function(){var c=this,d=this.lens.get("sections").map(function(a){return c.buildSection(a)});
this.collection=new a.Collection(d)},setActiveOption:function(){this.active?this.collection.findWhere({type:this.active.type}).set({active:!0}):this.collection.first().set({active:!0})},onSelect:function(c){a.Routing.showRoute(c.model.get("url"))},show:function(){1<this.collection.length&&c.Component.prototype.show.apply(this,arguments);return this}})})(Osp,Osp.Components);
(function(a,c,f,e){c.Course=c.Course||{};f=a.View.extend({prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/shortcut-panel-template",regions:{tree:".shortcutPanelTree"},triggers:{'click button[data-action="add"]':"add",'click button[data-action="cancel"]':"cancel"},toogleMessageError:function(){this.$(".messageError").toggleClass("message--visible")},toogleMessageSuccess:function(){this.$(".messageDone").toggleClass("message--visible")},toogleMessageWarning:function(a){this.$(".messageWarning").toggleClass("message--visible",
a)},disableConfirmButton:function(a){this.$('button[data-action="add"]').prop("disabled",a)}});e=a.Components.Tree.TreeNode.extend({tagName:"li",template:"course/resources/shortcut-panel-tree-node-template",triggers:_.extend({'click button[data-action="selectNode"]':"selectNode"},{'click button[data-action="clearSelection"]':"clearSelection"},a.Components.Tree.TreeNode.prototype.triggers),childViewTriggers:_.extend({"node:selectNode":"selectNode"},{"node:clearSelection":"clearSelection"},a.Components.Tree.TreeNode.prototype.childViewTriggers),
toggleSelectNodeButton:function(a){this.$('.nodeActions > button[data-action="selectNode"]').toggleClass("hidden",!a)},toggleSelectedNodeActions:function(a){this.$(".selectedNodeActions").toggleClass("hidden",!a)}});c.Course.SelectionTree=c.Structures.extend({childView:e,onCreate:function(a){c.Structures.prototype.onCreate.call(this,a);this.listenTo(a,"node:selectNode",this.onSelectNode.bind(this));this.listenTo(a,"node:clearSelection",this.onClearSelection.bind(this))},initialize:function(d){c.Structures.prototype.initialize.call(this,
d);this.course=a.currentCourse;this.onNodeSelectionCallback=d.onNodeSelection;this.onClearNodeSelectionCallback=d.onClearNodeSelection},onNodeView:function(a){this.trigger("node:view",a.model);a.toggleSelectedNodeActions(!1);this.onClearNodeSelectionCallback()},onSelectNode:function(a,c){a.toggleSelectNodeButton(!1);a.toggleSelectedNodeActions(!0);this.onNodeSelectionCallback(a.model.get("id"))},onClearSelection:function(a){a.toggleSelectNodeButton(!0);a.toggleSelectedNodeActions(!1);this.onClearNodeSelectionCallback()}});
c.Course.ShortcutPanel=c.Component.extend({view:f,initialize:function(){c.Component.prototype.initialize.apply(this,arguments);this.selectedNodeId=void 0},onCreate:function(a){this.listenTo(a,"add",this.onAdd.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this))},onCancel:function(){this.toggle()},onNodeSelection:function(a){this.getView().toogleMessageWarning(!1);this.selectedNodeId=a},onClearNodeSelection:function(){this.getView().toogleMessageWarning(!0);this.selectedNodeId=void 0},getRequestForEachSelection:function(){var c=
this.selectedNodeId;return this.selection.map(function(d){return $.ajax({method:"put",data:{new_node_id:c},enctype:"multipart/form-data",url:"/api/courses/"+a.state.getCourse().id+"/contents/"+d.get("id")+"/move"})})},onAdd:function(){var a=this.getView();a.disableConfirmButton(!0);var c=this.getPanel(),e=this.getRequestForEachSelection();$.when.apply($,e).done(function(){a.toogleMessageSuccess();c.delayClose()}).fail(function(){a.toogleMessageError();a.disableConfirmButton(!0)})},getPanel:function(){this.panel||
(this.panel=new c.SidePanel({title:I18n.t("ui.shortcutPanel.common.addEditShortcut"),component:this}));return this.panel},getTree:function(){this.tree||(this.tree=new c.Course.SelectionTree({lens:this.lens,onNodeSelection:this.onNodeSelection.bind(this),onClearNodeSelection:this.onClearNodeSelection.bind(this)}));return this.tree},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);this.toggle();this.getTree().show(this.getRegion("tree"))}})})(Osp,Osp.Components,
Marionette,Osp.Store);
(function(a,c,f){var e={NOTHING:"nothing",MANUAL:"manual",UPLOAD:"upload"},d=a.View.extend({prependFieldNameOnError:!1,className:"sidepanel__WIP",template:"course/components/student_assignment/layout-template",ui:{saveButton:'button[data-action="save"]',doneButton:'button[data-action="done"]',actions:".sidepanel__footerActions"},regions:{info:".student-assignment__info",work:".student-assignment__work"},triggers:{"click @ui.saveButton":"save","click @ui.doneButton":"done"},templateContext:function(){var a=this.model;
return{showWorkSection:function(){return a.get("manual_marking")&&!a.isDue()}}},toogleInfoMessageError:function(){var a=this.$(".messageError");a.toggleClass("message--visible");_.delay(function(){return a.removeClass("message--visible")},3E3)},toogleInfoMessageSuccess:function(a){var c=this.$(".messageDone");"save"===a?c.find(".message-text").html(I18n.t("ui.assignments.student_assignment.save_not_completed")):c.find(".message-text").html(I18n.t("ui.assignments.student_assignment.assignment_complete"));
c.toggleClass("message--visible");_.delay(function(){return c.removeClass("message--visible")},3E3)},toggleActions:function(a){this.getUI("actions").toggleClass("hidden",!a)}}),h=a.View.extend({template:"course/components/student_assignment/info-section-template",triggers:{'click button[data-action="open"]':"open:test","click a.link":"open:support"},modelEvents:{sync:"render"},templateContext:function(){var c=this.model;return{status:function(){return c.get("status")===a.Markbook.SAVED?I18n.t("ui.assignments.started"):
this.isDone()?I18n.t("ui.assignments.completed"):I18n.t("ui.assignments.not_started")},isInteractive:function(){return c.isInteractive()},isDue:function(){return c.isDue()},smart:function(){return c.smart},isDone:function(){return a.Markbook.isFinished(c.get("status"))},showMarksAvailable:function(){return!c.get("no_mark")&&!_(c.get("points")).isUndefined()},showNoMarks:function(){return c.get("no_mark")},getInstructions:function(){var a=c.get("description");return a&&a.trim()?a.split("\n").map(function(a){return _.template("<p>{{text}}</p>")({text:a})}).join(""):
_.template("<i>{{text}}</i>")({text:I18n.t("ui.assignments.not_available")})}}},getTest:function(){return _(this.model.get("test_contents")).first()},getSupport:function(){return 0<this.model.get("support_contents").length?this.model.get("support_contents"):null},serializeData:function(){return{name:this.model.get("name")||"",startDate:this.model.get("start")?f(this.model.get("start")).format("dddd Do MMMM"):"",dueDate:this.model.get("due")?f(this.model.get("due")).format("dddd Do MMMM"):"",teacher:this.model.get("teacher")||
"",points:this.model.get("points")||"",activity_type:this.getTest().activity_type||"",support_contents:this.getSupport()}}}),k=a.View.extend({template:"course/components/student_assignment/work-section-template",regions:{studentContent:".student-assignment__student-contents"},triggers:{'change input[data-action="uploadFile"]':"uploadFile"},events:{'click button[data-action="fileSelection"]':"onFileSelection","click input[type=radio]":"onDeliveryChange"},templateContext:function(){var a=this,c=this.model;
return{showUploadSection:function(){return a.isUploadDelivery()},isDue:function(){return c.isDue()},smart:function(){return c.smart},isSelected:function(a){return c.get("delivery")===a}}},isUploadDelivery:function(){return this.model.get("delivery")===e.UPLOAD},onFileSelection:function(){this.$('input[data-action="uploadFile"]').click()},onDeliveryChange:function(a){this.model.set({delivery:$(a.currentTarget).val()});this.toggleUploadSection()},toggleUploadSection:function(){this.$(".student-assignment__upload-section, .student-assignment__student-contents").toggleClass("hidden",
!this.isUploadDelivery())},serializeData:function(){return _.extend({DELIVERY:e},a.View.prototype.serializeData.call(this))}}),l=a.View.extend({tagName:"li",className:"student-assignment__student-contents__item",template:"course/components/student_assignment/student-content-template",events:{"click [data-action=open]":"onContentOpen"},triggers:{"click [data-action=remove]":"remove"},onContentOpen:function(){this.model.showContent()}}),m=a.CollectionView.extend({tagName:"ul",childView:l,childViewEventPrefix:"studentContent"}),
n=c.Component.extend({view:d,workView:null,channel:function(){return Backbone.Radio.channel("student_assignments")},isDirty:function(){return!!this.dirty},clear:function(){this.isDirty()&&$.post(this.getUrl("put")+"/clear")},waitForDependencies:function(){return this.model.fetch()},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"save",this.saveModel.bind(this,"save"));this.listenTo(a,"done",this.saveModel.bind(this,"submit"))},onRender:function(){this.renderInfoSection();
!this.model.get("manual_marking")||this.model.isDue()||this.model.get("handing_in_work")||this.renderWorkSection();this.toggleActions()},renderInfoSection:function(){var a=new h({model:this.model});this.listenTo(a,"open:test",this.onOpenTest.bind(this));this.listenTo(a,"open:support",this.onOpenSupport.bind(this));this.getView().showChildView("info",a)},renderWorkSection:function(){this.workView=new k({model:this.model});this.getView().showChildView("work",this.workView);this.listenTo(this.workView,
"uploadFile",this.onUploadFile.bind(this));this.listenTo(this.model,"change:delivery",this.onDeliveryChange.bind(this));this.hasStudentContents()&&this.renderStudentContentList()},renderStudentContentList:function(){var a=this.getStudentContents();this.studentContentList=new m({collection:a});this.listenTo(this.studentContentList,"studentContent:remove",this.onStudentContentRemove.bind(this));this.workView.showChildView("studentContent",this.studentContentList)},showResults:function(){(new c.Course.StudentAssignmentResultsPanel({model:this.model})).show().toggle()},
isSmart:function(){return this.model.get("smart")},onOpenTest:function(){var c=this,d=new a.Content(_(this.model.get("test_contents")).first());(d.isAuthor()||d.isLti())&&d.set({student_assignment_id:this.model.get("student_assignment_id")});if(d.isAuthor())d.once("submitted",function(){c.isSmart()&&c.showResults();c.submitted();c.model.fetch()});this.launcher=(new a.ContentLauncherService(d)).launch()},onOpenSupport:function(c,d){c=$(d.target).data("link");(new a.Content(this.model.get("support_contents")[c])).showContent()},
updateStudentContents:function(){this.dirty=!0;this.model.set({student_contents:this.getStudentContents().toJSON()})},onStudentContentRemove:function(a){this.getStudentContents().remove(a.model);a.destroy();this.updateStudentContents();this.toggleActions()},onUploadFile:function(a,c){a=new FormData;a.append("name",this.model.get("name"));a.append("content_file",c.currentTarget.files[0]);a.append("student_assignment_id",this.model.get("student_assignment_id"));this.uploadFile(a)},getUrl:function(a){var c=
"/api/courses/"+this.model.course().id+"/student_assignments";"put"===a&&(c+="/"+this.model.get("student_assignment_id"));return c},uploadFile:function(a){var c=this.getView();$.ajax({method:"post",processData:!1,contentType:!1,cache:!1,data:a,enctype:"multipart/form-data",url:this.getUrl()}).done(this.uploadSuccess.bind(this)).fail(c.toogleInfoMessageError.bind(c))},uploadSuccess:function(a){this.getStudentContents().add(JSON.parse(a));this.updateStudentContents();this.studentContentList||this.renderStudentContentList();
this.toggleActions()},hasStudentContents:function(){return!_(this.model.get("student_contents")).isEmpty()},getStudentContents:function(){this.studentContents||(this.studentContents=new a.Contents(this.model.get("student_contents"),{course:this.model.course()}));return this.studentContents},noNeedStudentContents:function(){return _([e.NOTHING,e.MANUAL]).contains(this.model.get("delivery"))},isCompleted:function(){return this.noNeedStudentContents()||this.hasStudentContents()},isNotDone:function(){return this.model.get("student_status_val")!==
a.Markbook.DONE},setAsSaved:function(a){this.dirty=!1;"submit"===a&&this.submitted()},shouldShowActions:function(){return this.isCompleted()&&this.isNotDone()},toggleActions:function(){this.getView().toggleActions(this.shouldShowActions())},onDeliveryChange:function(){this.dirty=!0;this.toggleActions()},delayedClose:function(){_.delay(this.trigger.bind(this,"close"),3E3)},saveModel:function(a){var c=this;this.model.save({student_action:a},{url:this.getUrl("put")}).done(function(){c.getView().toogleInfoMessageSuccess(a);
c.setAsSaved(a);c.delayedClose()})},submitted:function(){this.trigger("submitted");this.channel().trigger("submitted",this.model)}});n.Panel=c.SidePanel.extend({className:"sidepanel sidepanel--full",initialize:function(){var a=this;c.SidePanel.prototype.initialize.apply(this,arguments);this.destroyOnClose=!0;this.title=I18n.t("ui.assignments.assignment");this.component=new n({model:this.model});this.listenTo(this.component,"submitted",function(){return a.trigger("submitted")});this.listenTo(this.component,
"close",function(){return a.close()})},close:function(){this.component.isDirty()?this.showConfirmDialog():this.safeClose();this.trigger("close")},showConfirmDialog:function(){var c=this;(new a.AlertDialog({title:I18n.t("ui.common.unsaved.title"),message:I18n.t("ui.assignments.student_assignment.leave_warning"),submitCallback:function(){return c.safeClose()},className:"confirm-dialog",showCancel:!0})).render()},safeClose:function(){this.component.clear();c.SidePanel.prototype.close.call(this)}});c.Course.StudentAssignment=
n})(Osp,Osp.Components,moment);
(function(a,c,f){var e=a.View.extend({template:"course/components/student_assignment_info/layout-template",triggers:{'click [data-action="open:test"]':"open:test",'click [data-action="open:support"]':"open:support"},templateContext:function(){var c=this.model;return{status:function(){return c.get("status")===a.Markbook.SAVED?I18n.t("ui.assignments.started"):_([a.Markbook.DONE,a.Markbook.MARKED]).contains(c.get("status"))?I18n.t("ui.assignments.completed"):I18n.t("ui.assignments.not_started")},isInteractive:function(){return c.isInteractive()},
isDue:function(){return c.isDue()},smart:function(){return c.smart},getInstructions:function(){var a=c.get("description");return a&&a.trim()?a.split("\n").map(function(a){return _.template("<p>{{text}}</p>")({text:a})}).join(""):_.template("<i>{{text}}</i>")({text:I18n.t("ui.assignments.not_available")})}}},getTest:function(){return _(this.model.get("test_contents")).first()},getSupport:function(){return 0<this.model.get("support_contents").length?this.model.get("support_contents"):null},serializeData:function(){return{name:this.model.get("name")||
"",startDate:this.model.get("start")?f(this.model.get("start")).format("dddd Do MMMM"):"",dueDate:this.model.get("due")?f(this.model.get("due")).format("dddd Do MMMM"):"",teacher:this.model.get("teacher")||"",points:this.model.get("points")||"",activity_type:this.getTest().activity_type||"",test_content:this.getTest(),support_contents:this.getSupport()}}});c.Course.StudentAssignmentInfo=c.Component.extend({view:e,onCreate:function(a){this.listenTo(a,"open:test",this.onOpenTest.bind(this));this.listenTo(a,
"open:support",this.onOpenSupport.bind(this))},onOpenTest:function(){var c=function(){this.trigger("submitted")}.bind(this),e=new a.Content(_(this.model.get("test_contents")).first());(e.isAuthor()||e.isLti())&&e.set({student_assignment_id:this.model.get("student_assignment_id")});if(e.isAuthor())e.once("submitted",c);e.showContent()},onOpenSupport:function(c,e){c=$(e.target).data("item");(new a.Content(this.model.get("support_contents")[c])).showContent()}})})(Osp,Osp.Components,moment);
(function(a,c){var f=a.View.extend({template:"course/components/student_assignment_results_panel/body-template",ui:{questionMarks:".marks-details",marksToggler:'[data-action="toggleMarks"]',openQuestionButton:".marks-details [data-action=open]"},events:{"click @ui.marksToggler":"toggleMarks"},triggers:{"click @ui.openQuestionButton":"openQuestion"},regions:{nextStep:".nextStep"},modelEvents:{request:"onRequest",sync:"onSync"},templateContext:{nameText:function(){return this.name?this.name:I18n.t("ui.results.level_up.name."+
this.type)},markFor:function(a){return 0==a.points?"n/a":a.mark+"/"+a.points+" ("+a.percentage_mark+"%)"},curriculumLabel:function(){return this.curriculum.label},curriculumText:function(){return _.isEmpty(this.curriculum.titles)?"None added":this.curriculum.titles},dseBadge:function(){return"secure"==this.dse?"badge--green":"extending"==this.dse?"badge--purple":"badge--yellow"},oddNumberOfQuestions:function(){return 0!=this.questions.length%2}},toggleMarks:function(){this.getUI("marksToggler").find("span").toggleClass("hidden");
this.getUI("questionMarks").toggle()},onRequest:function(){this.$el.addClass("loading")},onSync:function(){this.$el.removeClass("loading");this.render()},serializeData:function(){var c=(new a.CurriculumService(this.model)).serialized;return _.extend(a.View.prototype.serializeData.call(this),{curriculum:c})}}),e=a.View.extend({className:"assessment-details",template:"course/components/student_assignment_results_panel/next_step-template",templateContext:{oneMoreLevelUp:function(){return"intervention_level_up_done"==
this.progress}},regions:{item:{el:".item",replaceElement:!0}},onRender:function(){this.setProgressLevel()},level:function(){switch(this.model.get("progress")){case "level_ups_done":return 2;case "reflect_done":return 3;default:return 1}},setProgressLevel:function(){var a=this;_.times(this.level(),function(c){return a.$('[data-progress="'+(c+1)+'"]').addClass("result-progress__bullet-item--filled")})}}),d=a.View.extend({className:"helpCard helpCard--error",template:"course/components/student_assignment_results_panel/next_step_error-template"}),
h=a.View.extend({template:"course/components/student_assignment_results_panel/level_up-template",className:function(){return"levelUp tabbed-box tabbed-box--"+("intervention_level_up"==this.model.get("type")?"green":"purple")},modelEvents:{"change:status":"render"},triggers:{"click [data-action=start]":"start","click [data-action=close]":"close"},templateContext:{curriculumLabel:function(){return this.curriculum.label},curriculumText:function(){return _.isEmpty(this.curriculum.titles)?"None added":
this.curriculum.titles},isReady:function(){return"ready"==this.status}},serializeData:function(){var c=(new a.CurriculumService(this.model)).serialized;return _.extend(a.View.prototype.serializeData.call(this),{curriculum:c})}}),k=a.View.extend({className:"tabbed-box tabbed-box--blue",template:"course/components/student_assignment_results_panel/reflect-template",triggers:{"click [data-action=start]":"start"}}),l=a.Collection.extend({parse:a.Collection.prototype.parseJsonAPI,initialize:function(a){this.courseId=
a},url:function(){return"/api/v2/courses/"+this.courseId+"/level_ups/"+this.levelUpId+"/curriculum"},setCurriculumFor:function(a){var c=this;this.levelUpId=a.id;var d=Backbone.Radio.channel("level_ups");return new Promise(function(e){return c.fetch().done(function(){c.isEmpty()||(a.set({curriculum:c.toJSON()}),d.trigger("change:curriculum",a))}).always(function(){return e()})})}}),m=a.Model.extend({url:function(){return"/api/v2/courses/"+this.courseId()+"/student_assignment_results/"+this.id},parse:function(c){var d=
a.Model.prototype.parseJsonAPI.call(this,c.results);this._nextStep=null;if(c.next_step){var e=a.Model.prototype.parseJsonAPI.call(this,c.next_step);this._nextStep=new a.Model(e);this._nextStep.set("progress",c.progress)}return d},getNextStep:function(){return this._nextStep},studentAssignmentId:function(){return"student_assignment"==this.get("type")?this.id:this.get("student_assignment_id")},courseId:function(){return this.get("courseId")},refresh:function(){var a=this.studentAssignmentId(),c=this.courseId();
return this.clear().set({id:a,courseId:c}).fetch()}}),n=c.Component.extend({view:f,propagate:"close",waitForDependencies:function(){return this.model.fetch()},openAssignmentQuestion:function(c){var d=Object.assign({student_assignment_id:this.model.id},this.model.get("test"));return(new a.ContentLauncherService(d)).launchPage(c)},openLevelUpQuestion:function(c){var d=this.model.get("questions")[c];c=_(this.model.get("tests")).find(function(a){return a.id==d.test.id});(new a.LevelUpManager(this.model)).openTest(c,
d.test.index)},openQuestion:function(a){a=$(a).data("index");"student_assignment"==this.model.get("type")?this.openAssignmentQuestion(a):this.openLevelUpQuestion(a)},onCreate:function(a){var c=this;this.listenTo(a,"destroy",function(){return c.onDestroy()});this.listenTo(a,"render",function(){return c.showNextStep()});this.listenTo(a,"openQuestion",function(a,d){return c.openQuestion(d.target)})},startNextStep:function(){var a=this.model.getNextStep();if("reflect"==a.get("type"))return this.startReflect(a);
this.startLevelUp(a)},startLevelUp:function(){var a=this;this.levelUpManager.start();this.listenTo(this.levelUpManager,"submitted",function(){return a.model.refresh()})},startReflect:function(){var c=this,d=(new a.ContentLauncherService(this.reflectContent())).launch();this.listenTo(d,"finished",function(){return c.trigger("close")})},reflectContent:function(){var a=this.model.getNextStep();return Object.assign({reflect_id:a.id},a.get("content"))},showNextStep:function(){var a=this,c=this.model.getNextStep();
if(c){var d=new e({model:c});this.listenTo(d,"render",function(){"reflect"==c.get("type")?a.renderReflect(d):a.renderLevelUp(d)});this.showChildView("nextStep",d)}},showNextStepError:function(){this.showChildView("nextStep",new d)},prepareLevelUp:function(c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return c.set({status:"loading"}),d.levelUpManager&&d.levelUpManager.destroy(),d.levelUpManager=new a.LevelUpManager(c,{pauseOnClose:!0}),
f.setCatchFinallyBlocks(2),e=d.model.get("courseId"),f.yield(d.levelUpManager.prepare({hideUntilLoaded:!0}),4);case 4:return f.yield((new l(e)).setCurriculumFor(c),5);case 5:c.set({status:"ready"});f.leaveTryBlock(0);break;case 2:f.enterCatchBlock(),d.showNextStepError(),f.jumpToEnd()}})},renderLevelUp:function(a){var c=this,d=this.model.getNextStep(),e=new h({model:d});this.listenTo(e,"start",function(){return c.startLevelUp()});this.listenTo(e,"close",function(){return c.trigger("close")});this.prepareLevelUp(d);
a.showChildView("item",e)},renderReflect:function(a){var c=this,d=new k({model:this.model.getNextStep()});this.listenTo(d,"start",function(){return c.startReflect()});a.showChildView("item",d)},onDestroy:function(){this.levelUpManager&&this.levelUpManager.cancel()}});c.Course.StudentAssignmentResultsPanel=c.SidePanel.extend({initialize:function(){var a=this;c.SidePanel.prototype.initialize.apply(this,arguments);this.destroyOnClose=!0;this.component=new n({model:this.results()});this.listenTo(this.component,
"close",function(){return a.close()})},results:function(){var c=this.model.get("student_assignment_id"),d=a.currentCourse&&a.currentCourse.id||this.model.get("courseId");return new m({courseId:d,id:c})},viewOptions:function(){return _.extend({title:"",className:"sidepanel sidepanel--np sidepanel--full smartResultsPanel"},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({tagName:"section",className:"studentReports",template:"course/components/student_reports/layout-template",regions:{header:{el:".section__header",replaceElement:!0},body:{el:".section__body",replaceElement:!0}}});c.Course.StudentReports=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){$("body").addClass("body--composed");this.showHeader();this.showSection()},onDestroy:function(){$("body").removeClass("body--composed")},
getFilter:function(){return this.filter?this.filter:this.filter=(new a.Builders.StudentReportsPeriodFilter).build()},showHeader:function(){this.header=new c.Course.StudentReportsHeader({model:this.model,section:this.section,filter:this.getFilter()});this.header.show(this.getRegion("header"))},sectionClass:function(){return _(this.section.type).classify()},showSection:function(){(new (c.Course.StudentReports[this.sectionClass()])({filter:this.getFilter()})).show(this.getRegion("body"))}})})(Osp,Osp.Components);
(function(a,c){a=a.View.extend({template:"course/components/student_reports/header-template",className:"section__header",regions:{sectionsMenu:{el:".studentReports__sectionsMenu",replaceElement:!0},periodFilter:{el:".studentReports__periodFilter",replaceElement:!0}}});c.Course.StudentReportsHeader=c.Component.extend({view:a,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},isTasksSection:function(){return"tasks"==this.section.type},onRender:function(){this.showSectionsMenu();
this.isTasksSection()&&this.showPeriodFilter()},showSectionsMenu:function(){(new c.Course.SectionsMenu({lens:this.model,active:this.section})).show(this.getRegion("sectionsMenu"))},showPeriodFilter:function(){(new c.Form.Field({format:c.Form.ListFormat.DROPDOWN,model:this.filter,className:"dropdown dropdown--filter dropdown--period hidden visible--l ml--auto"})).show(this.getRegion("periodFilter"))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({className:"loading",template:"course/components/subscriptions_panel/body-template",regions:{body:{el:"tbody",replaceElement:!0}}}),e=a.View.extend({template:"course/components/subscriptions_panel/subscription-template",tagName:"tr",templateContext:{isSubscribed:function(){return this.subscribed}}}),d=a.CollectionView.extend({tagName:"tbody",childView:e}),h=c.Component.extend({view:f,onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()})},
subscriptions:function(){return this._subscriptions?this._subscriptions:this._subscriptions=new a.Subscriptions(null,{courseId:this.course.id})},onRender:function(){var a=this;this.subscriptions().fetch().done(function(){return a.showSubscriptions()}).always(function(){return a.$el().removeClass("loading")})},showSubscriptions:function(){var a=this.subscriptions();this.showChildView("body",new d({collection:a}))}});c.Course.SubscriptionsPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,
arguments);this.component=new h({course:this.course})},viewOptions:function(){return _.extend({className:"sidepanel subscriptionsPanel",title:I18n.t("ui.courses.lenses.home.my_subscriptions")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c,f){var e={id:1,label:"TODO"},d={id:2,label:"DONE"},h={id:4,label:"MARKED"};f=a.Model.extend({wasDelivered:function(){return this.get("delivery_type")&&"nothing"!=this.get("delivery_type")},isSubmitted:function(){return!_([a.Markbook.TODO,a.Markbook.SAVED]).contains(this.get("status"))},isMarked:function(){return this.get("status")==a.Markbook.MARKED},isPartiallyMarked:function(){return this.hasMultipleMarks()&&!this.isMarked()},hasSingleMark:function(){return _(this.get("detailed_score")).isEmpty()},
hasMultipleMarks:function(){return!this.hasSingleMark()},pendingQuestions:function(){return _(this.get("detailed_score")).filter(function(a){return!a.automarked&&!a.mark})},hasPendingQuestions:function(){var a=this.pendingQuestions();return a&&0<a.length},mark:function(){try{return this.isMarked()||this.isPartiallyMarked()?parseInt(this.get("mark")):null}catch(t){return null}},cloneScores:function(){return _(this.get("detailed_score")).map(function(a){return Object.assign({},a)})},setRestorePoint:function(){this._restore||
(this._restore={mark:this.get("mark"),detailed_score:this.get("detailed_score")&&this.cloneScores()})},restore:function(){this._restore&&(this.set(this._restore),this._restore=void 0)},calculateQuestionsMark:function(){return _(this.get("detailed_score")).reduce(function(a,c){return a+c.mark},0)},updateMark:function(a){this.setRestorePoint();this.set("mark",parseInt(a))},updateQuestionMark:function(a,c){this.setRestorePoint();this.get("detailed_score")[a].mark=parseInt(c);this.set("mark",this.calculateQuestionsMark())},
getQuestion:function(a){return this.get("detailed_score")[a]},isMarkingReady:function(){return this.hasSingleMark()?_(this.get("mark")).isNumber():_(this.get("detailed_score")).every(function(a){return a.automarked||_(a.mark).isNumber()})},serializeForMarking:function(){var a=this.get("detailed_score")&&_(this.get("detailed_score")).map(function(a){return[a.automarked?"auto":"manual",a.mark,a.points]});return{mark:this.get("mark"),detailed_score:a,student_assignment_id:this.id}},submit:function(){return $.ajax({type:"POST",
url:"/api/markbooks/mark_assignments",data:JSON.stringify({marks:[this.serializeForMarking()]}),contentType:"application/json"})}});var k=a.PaginatedCollection.extend({model:f,initialize:function(c,d){d=void 0===d?{}:d;a.PaginatedCollection.prototype.initialize.apply(this,arguments);this._assignmentId=d?d.assignmentId:null;this._status=d?d.status:null},url:function(){return"/api/v2/student_assignments"},urlParams:{assignment_id:function(){return this._assignmentId},status:function(){return this._status}},
parse:function(){var c=a.PaginatedCollection.prototype.parseJsonAPI.apply(this,arguments);_(c).each(function(a){return a.mark=parseInt(a.mark)});return c}});f=a.View.extend({template:"course/components/teacher_markbook_panel/body-template",className:"sidepanel__markbook__body",ui:{contentPanel:".sidepanel__markbook__content"},regions:{menu:{el:".sidepanel__markbook__menu",replaceElement:!0},overview:".sidepanel__markbook__overview",toMark:".sidepanel__markbook__to_mark",notSubmitted:".sidepanel__markbook__not_submitted",
marked:".sidepanel__markbook__marked"},showTab:function(a){this.getUI("contentPanel").hide();this.$("[data-id="+a+"]").show()}});var l=a.View.extend({behaviors:[a.Behaviors.Tabs],modelEvents:{"change:num_done change:num_marked":"render"},templateContext:{showToMarkSection:function(){return this.manual_marking&&!this.no_mark},toMarkCount:function(){return this.num_done-this.num_marked},notSubmittedCount:function(){return this.num_assignments-this.num_done},markedCount:function(){return this.num_marked},
markedLabel:function(){return I18n.t("ui.markbook."+(this.no_mark?"completed":"marked"))}},initialize:function(a){this._active=a.active||"overview";this.listenTo(this,"activate",this.onActivate.bind(this))},onActivate:function(a){this._active=a.event},select:function(a){this._active=a||this._active;this.trigger("select",this._active)},onRender:function(){this.select()}}),m=l.extend({template:"course/components/teacher_markbook_panel/menu-template",className:"sidepanel__markbook__menu",ui:{archive:"[data-action=archive]",
unarchive:"[data-action=unarchive]",withdraw:"[data-action=withdraw]"},triggers:{"click @ui.archive":"archive","click @ui.unarchive":"unarchive","click @ui.withdraw":"withdraw"},modelEvents:_.extend({"change:archived":"onChangeArchived"},l.prototype.modelEvents),templateContext:_.extend({isOwner:function(){return this.teacher_id==a.profile.id},showArchive:function(){return!this.archived&&this.is_due&&this.isOwner()},showUnarchive:function(){return this.archived&&this.isOwner()}},l.prototype.templateContext),
showFeedbackMessage:function(a){this.$("[data-event="+a+"]").addClass("message--visible").siblings("button").addClass("hidden")},onChangeArchived:function(){var a=this;this.showFeedbackMessage(this.model.get("archived")?"archived":"unarchived");_.delay(function(){return a.render()},2E3)}}),n=l.extend({template:"course/components/teacher_markbook_panel/footer-template",className:"sidepanel__footer sidepanel__markbook__footer hidden--l",ui:{more:"[data-event=more]",mainPanel:".sidepanel__markbook__footer__menu",
morePanel:".sidepanel__markbook__footer__morePanel"},events:{"click @ui.more":"toggleMore"},isMorePanelEnabled:function(){return this.getUI("morePanel").hasClass("sidepanel__markbook__footer__morePanel--enabled")},toggleMore:function(){var a=this.getUI("morePanel");if(!this.isMorePanelEnabled()){var c=this.getUI("mainPanel").outerHeight();a.css({bottom:c})}a.toggleClass("sidepanel__markbook__footer__morePanel--enabled")}}),q=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",
this.onRender.bind(this))},onRender:function(){this.showMenu();this.showOverview();this.showAssignmentListByStatus(d,"toMark");this.showAssignmentListByStatus(e,"notSubmitted");this.showAssignmentListByStatus(h,"marked");this.selectTabByStatus()},listenToMenuEvents:function(a){this.listenTo(a,"overview",this.showTab.bind(this,"overview"));this.listenTo(a,"to_mark",this.showTab.bind(this,"to_mark"));this.listenTo(a,"not_submitted",this.showTab.bind(this,"not_submitted"));this.listenTo(a,"marked",this.showTab.bind(this,
"marked"))},getMenu:function(){if(this.menu)return this.menu;var a=this.menu=new m({model:this.model});this.listenTo(a,"archive",this.onArchive.bind(this));this.listenTo(a,"unarchive",this.onUnarchive.bind(this));this.listenTo(a,"withdraw",this.onWithdraw.bind(this));this.listenToMenuEvents(a);return a},getFooterMenu:function(){if(this.footerMenu)return this.footerMenu;this.footerMenu=new n({model:this.model});this.listenToMenuEvents(this.footerMenu);return this.footerMenu},showMenu:function(){this.showChildView("menu",
this.getMenu())},showFooterMenu:function(a){a.show(this.getFooterMenu())},selectMenuOption:function(a){this.getMenu().select(a);this.getFooterMenu().select(a)},showOverview:function(){var a=new c.Course.TeacherMarkbookPanel.Overview({model:this.model});this.listenTo(a,"open",this.onOpen.bind(this));this.listenTo(a,"open:support",this.onOpenSupport.bind(this));a.show(this.getRegion("overview"))},showAssignmentListByStatus:function(a,e){var f=new c.List.StudentAssignments({collection:this.getAssignments(a)});
a==d&&this.listenTo(f,"submitted",this.onSubmitted.bind(this));this.listenTo(f,"open:screen",this.onOpenScreen.bind(this));f.show(this.getRegion(e));this.getAssignments(a).fetch()},selectTab:function(a){this.selectMenuOption(a);this.getView().showTab(a)},selectTabByStatus:function(){var c="overview";if(this.model.has("student_assignment_id"))switch(this.model.get("status")){case a.Markbook.MARKED:c="marked";break;case a.Markbook.DONE:c="to_mark";break;default:c="not_submitted"}this.selectTab(c)},
showTab:function(a){this.getView().showTab(a)},fetchCollection:function(){var a=this,c=this.model.collection;return c.fetch().then(function(){return a.model.collection=c})},onArchive:function(){var a=this;this.model.archive().then(function(){return a.fetchCollection()})},onUnarchive:function(){var a=this;this.model.unarchive().then(function(){return a.fetchCollection()})},onSubmitted:function(){this.getAssignments(d).fetch();this.getAssignments(h).fetch();this.model.fetch()},onOpenScreen:function(a,
c){this.getLauncher(this.getTest(c)).launchPage(a)},onOpen:function(){this.getLauncher(this.getTest()).launch()},onOpenSupport:function(a){this.getLauncher(this.getSupport(a)).launch()},withdraw:function(){var a=this;this.model.withdraw().then(function(){a.model.collection.fetch();a.trigger("close")})},onWithdraw:function(){(new a.AlertDialog({showCancel:!0,title:I18n.t("ui.assignments.withdraw"),message:I18n.t("ui.markbook.withdraw_confirm.message"),submitText:I18n.t("ui.markbook.withdraw_confirm.button"),
submitCallback:this.withdraw.bind(this)})).render()},getLauncher:function(c){return new a.ContentLauncherService(c)},getTest:function(a){return _.extend({student_assignment_id:a&&a.id},this.model.get("test_contents")[0])},getSupport:function(a){return this.model.get("support_contents")[a]},getCache:function(){this.cache||(this.cache={});return this.cache},getAssignments:function(a){var c=this.getCache();c[a.label]||(c[a.label]=this.getAssignmentsByStatus(a.id));return c[a.label]},getAssignmentsByStatus:function(a){return new k([],
{assignmentId:this.model.id,status:a})}});c.Course.TeacherMarkbookPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component||(this.component=new q({model:this.model}));this.listenTo(this.component,"close",this.toggle.bind(this))},onRender:function(){c.SidePanel.prototype.onRender.call(this);this.component.showFooterMenu(this.getRegion("footer"))},viewOptions:function(){return _.extend({className:"sidepanel sidepanel--full sidepanel__markbook",
title:this.model.get("name")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components,moment);
(function(a,c,f){var e=a.View.extend({tagName:"section",className:"teacherReports",template:"course/components/teacher_reports/layout-template",regions:{header:{el:".section__header",replaceElement:!0},body:{el:".section__body",replaceElement:!0},panel:".teacherReports__panel",map:".keyMap__overlay"},toggleLoading:function(a){this.$el.find(".section__body").toggleClass("loading",a)}}),d=a.Model.extend({defaults:{start:null,end:null}}),h=a.View.extend({template:"course/components/teacher_reports/marks_toggle-template",
className:"marksToggle__wrapper",events:{"click .marksToggle input":"onToggle"},$parent:function(){return $(".teacherReports")},isPercentageModeActive:function(){return"percentage"==this.$parent().attr("data-mode")},templateContext:function(){return{isChecked:function(){return this.isPercentageModeActive()}.bind(this)}},onToggle:function(){var a=this.$parent();this.isPercentageModeActive()?a.removeAttr("data-mode"):a.attr("data-mode","percentage")}}),k=a.View.extend({template:"course/components/teacher_reports/key_map-template",
className:"keyMap__wrapper",events:{"click [data-action=openKeyMap]":"onKeyMapOpen"},onKeyMapOpen:function(){this.trigger("keyMapOpen")}}),l=a.PaginatedCollection.extend({parse:a.PaginatedCollection.prototype.parseJsonAPI,exportUrl:function(){return this.url()+".csv?"+this.getQueryStrim()},initialize:function(){var c=a.store.get(a.Store.TYPE.SETTINGS).getAttr("pagination_size");a.PaginatedCollection.prototype.initialize.apply(this,arguments);c&&(this.perPage=c.reports);this.paginationKeys={}},setMode:function(a){this.mode=
a},getMode:function(){return this.mode},setSource:function(a){this.source=a},getSource:function(){return this.source},addStartKey:function(a){this.paginationKeys[this.currentPage+1]=a},getStartKey:function(){return this.paginationKeys[this.currentPage]},prepare:function(){this.paginationKeys={};this.resetCurrentPage()}}),m=a.Model.extend({defaults:{developing:{value:0,percentage:0},secure:{value:0,percentage:0},extending:{value:0,percentage:0},questions:0,extended:!0},empty:function(){var a=this.get("developing"),
c=this.get("secure"),d=this.get("extending");return 0==a.percentage&&0==c.percentage&&0==d.percentage}});c.Course.TeacherReports=c.Component.extend({view:e,waitForDependencies:function(){var a=this;return this.getStore(f.TYPE.GROUPS).fetch().done(function(c){return a.setDefaults(c)})},getPeriod:function(){var a=this;if(this.period)return this.period;var c=this.loadPeriod()||this.defaultPeriod();this.period=new d(c);this.listenTo(this.period,"change",function(){return a.setPeriodState()});return this.period},
defaultPeriod:function(){return{start:moment().subtract(moment.duration({days:30})).format("DD/MM/YY"),end:moment().format("DD/MM/YY")}},loadPeriod:function(){return this.getCourseState("teacher_reports_period")},setPeriodState:function(){this.setCourseState({teacher_reports_period:this.period.toJSON()})},setDefaults:function(a){this.getCourseState("group")||this.setCourseState({group:a.first()});this.group=this.getCourseState("group");this.student=this.getCourseState("student")},onCreate:function(a){this.listenTo(a,
"render",this.onRender.bind(this))},onRequest:function(a){this.getView().toggleLoading(a)},onRender:function(){$("body").addClass("body--composed");this.showHeader();this.showBody()},onDestroy:function(){$("body").removeClass("body--composed")},onExport:function(){this.report.export()},onViewGroup:function(a){this.report.viewGroup(a)},onViewStudent:function(a,c){this.report.viewStudent(a,c)},getMode:function(){return this.getView().$el.attr("data-mode")},getFilters:function(){return this.filters?
this.filters:this.filters=(new a.Builders.TeacherReportsFilters(this)).build()},showHeader:function(){this.header=new c.Course.TeacherReportsHeader({model:this.model,group:this.group,student:this.student,section:this.section,period:this.getPeriod(),filters:this.getFilters()});this.listenTo(this.header,"export",this.onExport.bind(this));this.listenTo(this.header,"view:group",this.onViewGroup.bind(this));this.listenTo(this.header,"view:student",this.onViewStudent.bind(this));this.header.show(this.getRegion("header"))},
sectionClass:function(){return _(this.section.type).classify()},showBody:function(){var a=this;this.report=(new (c.Course.TeacherReports[this.sectionClass()])({component:this,group:this.group,student:this.student,period:this.getPeriod(),filters:this.getFilters(),panelRegion:this.getRegion("panel"),keyMapRegion:this.getRegion("map")})).show(this.getRegion("body"));this.listenTo(this.report,"select:student",function(c,d){return a.header.setStudent(c,d)});this.listenTo(this.report,"loading",function(c){return a.onRequest(c)})}},
{Stats:m,Report:l,MarksToggle:h,KeyMapButton:k})})(Osp,Osp.Components,Osp.Store);
(function(a,c){a=a.View.extend({template:"course/components/teacher_reports/header-template",className:"section__header",ui:{exportButton:'[data-action="export"]'},regions:{sectionsMenu:{el:".teacherReports__sectionsMenu",replaceElement:!0},groupFilter:{el:".teacherReports__groupFilter",replaceElement:!0},datesFilter:{el:".teacherReports__datesFilter",replaceElement:!0},filters:{el:".teacherReports__filters",replaceElement:!0}},initialize:function(a){this.showExport=a.showExport},templateContext:function(){return{showExport:function(){return this.showExport}.bind(this)}},
triggers:{"click @ui.exportButton":"export"}});c.Course.TeacherReportsHeader=c.Component.extend({view:a,propagate:"export",viewOptions:function(){return _.extend({showExport:this.canExport()},c.Component.prototype.viewOptions.call(this))},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},setStudent:function(a,c){this.groupFilter.setStudent(a,c)},isTasksSection:function(){return"tasks"==this.section.type},canExport:function(){return this.isTasksSection()},onRender:function(){this.showSectionsMenu();
this.showGroupFilter();this.isTasksSection()&&(this.showDatesFilter(),this.showFilters())},showSectionsMenu:function(){(new c.Course.SectionsMenu({lens:this.model,active:this.section})).show(this.getRegion("sectionsMenu"))},showGroupFilter:function(){this.groupFilter=new c.Course.GroupFilter({allGroups:!1,selected:{group:this.group,student:this.student},className:"dropdown dropdown--filter"});this.propagateEvents(this.groupFilter,"view:all_groups view:group view:student");this.groupFilter.show(this.getRegion("groupFilter"))},
showDatesFilter:function(){(new c.DatesFilter({model:this.period,className:"teacherReports__datesFilter ml--auto mr--4x button button--icon"})).show(this.getRegion("datesFilter"))},showFilters:function(){(new c.Filters({hideLabel:!0,collection:this.filters,className:"teacherReports__filters filtersToggle button button--icon mr--4x"})).show(this.getRegion("filters"))}})})(Osp,Osp.Components);
(function(a,c,f){c.Course=c.Course||{};var e=a.Model.extend({defaults:{fileTitle:"",file:void 0,fileDescription:"",marksAvailable:void 0,contentType:"",visibleForAllStudents:!1},isFileSizeLimitExceeded:function(a){return a&&5E6<a.size},areMandatoryFieldsMissing:function(a,c){return 0<_.filter(["file","fileTitle","contentType"],function(d){return"file"===d?!a[d]&&!c.isEditMode:!a[d]||0===a[d].trim().length}).length},validate:function(a,c){if(this.isFileSizeLimitExceeded(a.file))return"File limit exceeded";
if(this.areMandatoryFieldsMissing(a,c))return"Mandatory fields missing"}});f=a.View.extend({initialize:function(a){this.currentFile=(this.isEditMode="edit"===a.options.mode)?a.options.selection.get("file_name"):void 0;this.uploadType=a.options.uploadType;this.formats=gon.formats.filter(function(a){return"webpage"!==a.name})},prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/upload-panel-template",templateContext:function(){var a=this.isEditMode,c=this.currentFile,
e="ContentAssignment"===this.uploadType,f=this.model;return{contentTypeOptions:this.formats,fileControlLabel:a?I18n.t("ui.uploadPanel.common.replaceFile"):I18n.t("ui.uploadPanel.common.chooseFile"),saveButtonLabel:a?I18n.t("ui.uploadPanel.common.saveChanges"):I18n.t("ui.common.upload"),successLabel:a?I18n.t("ui.uploadPanel.common.changesSaved"):I18n.t("ui.uploadPanel.common.success"),currentFile:c,isEditMode:a,showMarksField:e,showVisibilityToggle:!e,shouldDisableSaveButton:a&&!f.hasChanged(),fileName:f.get("file")?
f.get("file").name:"*"+I18n.t("ui.uploadPanel.common.noFile")}},triggers:{'click button[data-action="confirmUpload"]':"confirmUpload",'click button[data-action="cancel"]':"cancel",'change input[data-action="uploadFile"]':"uploadFile","change input:text":"change","change textarea":"change",'change input[type="number"]':"change",'change input[data-action="changeContentType"]':"changeContentType",'click a[data-action="changeVisibility"]':"toggleStudentsVisibility",'click a[data-action="openCurrentFile"]':"openCurrentFile"},
events:{'click button[data-action="fileSelection"]':"onFileSelection",'click button[data-action="contentTypeSelection"]':"toogleContentTypeSelection"},modelEvents:{change:"render"},onFileSelection:function(){this.$('input[data-action="uploadFile"]').click()},onRender:function(){var a=gon.formats.find(_.bind(function(a){return a.id==this.model.get("contentType")},this));a&&this.setContentType(a.name);this.toggleStudentsVisibility(this.model.get("visibleForAllStudents"))},setContentType:function(a){this.$(".accordion__toggle .button__label").text(a);
this.$('input[data-content-type="'+a+'"]').prop("checked",!0)},setFileName:function(a){this.$(".fileSelection > .fileSelection__fileName").text(a)},toogleContentTypeSelection:function(){this.$(".accordion--select").toggleClass("accordion--enabled");this.$('button[data-action="contentTypeSelection"]').toggleClass("accordion__toggle--enabled")},toggleStudentsVisibility:function(a){this.$('a[data-action="changeVisibility"]').toggleClass("button--enabled",a)},disableConfirmButton:function(a){this.$('button[data-action="confirmUpload"]').prop("disabled",
a)},toogleMessageError:function(){this.$(".messageError").toggleClass("message--visible")},toogleMessageSuccess:function(){this.$(".messageDone").toggleClass("message--visible")},toogleMessageWarn:function(a){this.$(".messageWarning").toggleClass("message--visible",a)},toggleFileSizeLimitExceededMessage:function(){this.$(".messageWarning__label").text(I18n.t("ui.uploadPanel.common.max_size"))},toggleRequiredFieldsMessage:function(){this.$(".messageWarning__label").text(I18n.t("ui.uploadPanel.common.requiredFields"))}});
c.Course.UploadPanel=c.Component.extend({view:f,initialize:function(a){c.Component.prototype.initialize.apply(this,a);a=(this.isEditMode="edit"===this.options.mode)?this.getModelDataFromSelection():void 0;this.model=new e(a)},getModelDataFromSelection:function(){var a=this.options.selection;return{fileTitle:a.get("name"),fileDescription:a.get("description"),marksAvailable:parseInt(a.get("points")),contentType:a.get("format_id"),visibleForAllStudents:a.get("student_access")}},viewOptions:function(){return _.extend({options:this.options},
c.Component.prototype.viewOptions.call(this))},onCreate:function(a){this.listenTo(a,"confirmUpload",this.onConfirmUpload.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this));this.listenTo(a,"change",this.onChange.bind(this));this.listenTo(a,"uploadFile",this.onUploadFile.bind(this));this.listenTo(a,"changeContentType",this.onChangeContentType.bind(this));this.listenTo(a,"toggleStudentsVisibility",this.onToggleStudentsVisibility.bind(this));this.listenTo(a,"openCurrentFile",this.onOpenCurrentFile.bind(this));
this.listenTo(a,"render",this.enableUpload.bind(this))},getFileNameFromPath:function(a){return a?a.split("\\").pop():""},enableUpload:function(){this.model.isValid({isEditMode:this.isEditMode})?this.getView().toogleMessageWarn(!1):(this.getView().toogleMessageWarn(!0),this.model.isFileSizeLimitExceeded(this.model.get("file"))?this.getView().toggleFileSizeLimitExceededMessage():this.getView().toggleRequiredFieldsMessage())},onChange:function(a,c){a=$(c.currentTarget);this.model.set(a.attr("name"),
a.val())},onUploadFile:function(a,c){this.model.set("file",c.currentTarget.files[0])},onChangeContentType:function(a,c){var d=$(c.currentTarget).val();gon.formats.find(function(a){return parseInt(a.id)===parseInt(d)});this.getView().toogleContentTypeSelection();this.model.set("contentType",d)},onToggleStudentsVisibility:function(){var a=!this.model.get("visibleForAllStudents");this.model.set("visibleForAllStudents",a)},onOpenCurrentFile:function(a,c){this.options.selection.showContent()},onCancel:function(){this.toggle()},
refetchList:function(){a.vent.trigger("change:myContents")},getRequestURL:function(){var c="/api/courses/"+a.state.getCourse().id+"/contents",e=this.isEditMode&&c+"/"+this.options.selection.get("id");return this.isEditMode?e:c},getDataForRequest:function(){var a=new FormData;a.append("name",this.model.get("fileTitle"));var c=this.model.get("fileDescription");a.append("description",c?c.trim():"");a.append("format_id",this.model.get("contentType"));a.append("type",this.options.uploadType);"ContentAssignment"===
this.options.uploadType?a.append("points",this.model.get("marksAvailable")):a.append("student_access",this.model.get("visibleForAllStudents"));(c=this.model.get("file"))&&a.append("content_file",c);return a},onConfirmUpload:function(){this.getView().disableConfirmButton(!0);$.ajax({method:this.isEditMode?"put":"post",processData:!1,contentType:!1,cache:!1,data:this.getDataForRequest(),enctype:"multipart/form-data",url:this.getRequestURL()}).done(this.onUploadSuccess.bind(this)).fail(this.onUploadFail.bind(this))},
onUploadSuccess:function(){this.getView().toogleMessageSuccess();this.getPanel().delayClose();this.refetchList()},onUploadFail:function(){var a=this.getView(),c=a.toogleMessageError.bind(a);a.disableConfirmButton(!1);c();setTimeout(c,2E3)},getPanel:function(){this.panel||(this.panel=new c.SidePanel({title:this.isEditMode?I18n.t("ui.actions.edit"):I18n.t("ui.common.upload"),component:this}));return this.panel},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);
this.toggle()}})})(Osp,Osp.Components,Marionette);
(function(a,c,f){var e=a.View.extend({className:"sidepanel__body",attributes:{tabindex:"0"},template:"course/components/assignment_basket/assignment/body-template",regions:{metadata:{el:".metadata",replaceElement:!0}},ui:{title:".assignmentBasket__title",titleText:".assignmentBasket__title span",editTitle:"[data-action=editTitle]",titleInput:".assignmentBasket__title input",setDatesButton:"[data-action=setDates]",setStudentsButton:"[data-action=setStudents]"},events:{"click @ui.editTitle":"toggleTitle",
"blur @ui.titleInput":"toggleTitle","keyup @ui.titleInput":"onTitleKeyUp"},triggers:{"click @ui.setDatesButton":"setDates","click @ui.setStudentsButton":"setStudents","change @ui.titleInput":"attr:change"},modelEvents:{"change:title":"updateTitle","change:start_date change:end_date change:group_ids change:student_ids":"render"},initialize:function(a){this.groups=a.groups},toggleTitle:function(){var a=this.getUI("title");a.toggleClass("assignmentBasket__title--edit");a.hasClass("assignmentBasket__title--edit")&&
this.getUI("titleInput").focus()},onTitleKeyUp:function(a){"Enter"===a.key&&this.getUI("titleInput").blur()},updateTitle:function(){this.getUI("titleText").text(this.model.get("title"))},serializeData:function(){return _.extend({groups:this.model.getGroupNames(),students_count:this.model.getStudentsCount()},a.View.prototype.serializeData.call(this))}}),d=a.View.extend({className:"assignmentBasket__metadata",template:"course/components/assignment_basket/assignment/metadata-template",templateContext:function(){return{showSupportMaterial:function(){return this.lens&&
this.lens.isAssignment()}.bind(this),showMarksAvailable:function(){return!this.no_mark&&!_(this.test_points).isUndefined()},showNoMarks:function(){return this.no_mark}}},regions:{resourcesAdded:{el:".material__resources",replaceElement:!0},supportAdded:{el:".material__support",replaceElement:!0}},ui:{toggleMetadata:"[data-action=toggleMetadata]",instructionsInput:".form__group textarea",pointsInput:"input[name=points]",previewButton:"[data-action=preview]",materialButton:"[data-action=material]",
removeButton:"[data-action=remove]",material:".assignmentBasket__material"},events:{"click @ui.toggleMetadata":"toggle"},triggers:{"change @ui.pointsInput":"attr:change","change @ui.instructionsInput":"attr:change","click @ui.previewButton":"preview","click @ui.materialButton":"material","click @ui.removeButton":"remove"},modelEvents:{"change:material:limit":"toggleMaterialLimitReachedMessage"},initialize:function(a){this.lens=a.lens},toggle:function(a){$(a.currentTarget).toggleClass("button--enabled");
this.$el.toggleClass("assignmentBasket__metadata--expanded")},serializeData:function(){return _.extend({MATERIAL_TYPE:c.Course.AssignmentBasket.Material.TYPE},a.View.prototype.serializeData.call(this))},toggleMaterialLimitReachedMessage:function(){this.getUI("material").toggleClass("assignmentBasket__material--limitReached",this.model.materialLimitReached())},onRender:function(){this.toggleMaterialLimitReachedMessage()}}),h=a.View.extend({tagName:"li",template:"course/components/assignment_basket/assignment/material-template",
triggers:{"click [data-action=remove]":"remove"}}),k=a.CollectionView.extend({tagName:"ul",childView:h,childViewEventPrefix:"material"});c.Course.AssignmentBasket.Assignment=c.Component.extend({view:e,waitForDependencies:function(){var c=this;return a.store.get(f.TYPE.GROUPS,this.course).fetch().done(function(a){return c.groups=a})},viewOptions:function(){return _.extend({groups:this.groups},c.Component.prototype.viewOptions.call(this))},onCreate:function(a){this.listenTo(a,"render",this.showMetadata.bind(this));
this.listenTo(a,"attr:change",this.onAttributeChange.bind(this));this.listenTo(a,"setDates",this.onSetDates.bind(this));this.listenTo(a,"setStudents",this.onSetStudents.bind(this))},getLens:function(){return this.course.lenses().findWhere({name:this.model.get("lens_name")})},showMetadata:function(){this.metadata=new d({model:this.model,lens:this.getLens()});this.listenTo(this.metadata,"preview",this.onPreview.bind(this));this.listenTo(this.metadata,"material",this.onMaterial.bind(this));this.listenTo(this.metadata,
"remove",this.onRemove.bind(this));this.listenTo(this.metadata,"render",this.onMetadataRender.bind(this));this.listenTo(this.metadata,"attr:change",this.onAttributeChange.bind(this));this.getView().showChildView("metadata",this.metadata)},showMaterialList:function(a,c){c=new k({collection:c});this.listenTo(c,"material:remove",this.onMaterialRemove.bind(this));this.metadata.showChildView(a,c)},onMetadataRender:function(){this.showMaterialList("resourcesAdded",this.model.getResources());this.showMaterialList("supportAdded",
this.model.getSupport())},onSetDates:function(){this.trigger("assignment:setDates",this.model)},onSetStudents:function(){this.trigger("assignment:setStudents",this.model)},onPreview:function(){this.trigger("assignment:preview",this.model)},onMaterial:function(a,c){this.trigger("assignment:material",this.model,$(c.currentTarget).data("type"))},onRemove:function(){this.pool.removeDraft(this.model)},onMaterialRemove:function(a){a.model.collection.remove(a.model);this.pool.enqueue()},onAttributeChange:function(a,
c){a=$(c.currentTarget);this.model.set(a.attr("name"),a.val());this.pool.enqueue()},show:function(a){this.page=a;c.Component.prototype.show.call(this,a.getRegion("body"))}})})(Osp,Osp.Components,Osp.Store);
(function(a,c,f){var e=a.View.extend({template:"course/components/assignment_basket/main/body-template",className:"sidepanel__body",attributes:{tabindex:"0"},regions:{list:{el:".assignmentBasket__list",replaceElement:!0},success:{el:".assignmentBasket__success",replaceElement:!0}},ui:{setDatesButton:"[data-action=setDates]",setStudentsButton:"[data-action=setStudents]",removeAllButton:"[data-action=removeAll]",assignmentsCounter:"[data-counter=assignments]"},triggers:{"click @ui.removeAllButton":"removeAll",
"click @ui.setDatesButton":"setDates","click @ui.setStudentsButton":"setStudents"},modelEvents:{"change:count":"update"},onRender:function(){this.update()},update:function(){this.updateAssignmentsCounter();this.toggleEmptyClass()},updateAssignmentsCounter:function(){var a=_.template("{{ count }} {{ label }}"),c=1===this.model.get("count")?"assignment":"assignments";this.getUI("assignmentsCounter").text(a({label:c,count:this.model.get("count")}))},toggleEmptyClass:function(){this.$el.toggleClass("assignmentBasket--empty",
!this.model.get("count"))}}),d=a.View.extend({tagName:"li",className:"assignmentBasket__item",template:"course/components/assignment_basket/main/item-template",initialize:function(a){this.groups=a.groups},templateContext:function(){var c=this.model;return{statusText:function(){var d=c.getStatus();return d===a.DraftAssignment.STATUS.NO_DATES?"Set dates":d===a.DraftAssignment.STATUS.NO_STUDENTS?"Set students":d===a.DraftAssignment.STATUS.INCOMPLETE?"Set dates and students":"Ready"}}},ui:{removeButton:"[data-action=remove]",
settingsButon:"[data-action=settings]",previewButon:"[data-action=preview]"},modelEvents:{change:"render"},triggers:{"click @ui.removeButton":"remove","click @ui.settingsButon":"settings","click @ui.previewButon":"preview"},onRender:function(){this.$el.toggleClass("assignmentBasket__item--incomplete",!this.model.isComplete());this.$el.toggleClass("assignmentBasket__item--complete",this.model.isComplete())},serializeData:function(){return _.extend({groups:this.model.getGroupNames(),students_count:this.model.getStudentsCount()},
a.View.prototype.serializeData.call(this))}}),h=c.Course.AssignmentBasket.Empty.extend({tagName:"li"}),k=a.CollectionView.extend({tagName:"ol",className:"assignmentBasket__list",childView:d,childViewEventPrefix:"assignment",emptyView:h,initialize:function(a){this.groups=a.groups},childViewOptions:function(){return{groups:this.groups}}}),l=a.View.extend({className:"sidepanel__footer",template:"course/components/assignment_basket/main/footer-template",templateContext:function(){var a=this.model;return{isEmpty:function(){return!a.get("count")},
isValidForAssign:function(){return a.isValidForAssign()},statusMessage:function(){var c=a.validForAssignCount();return 0===c?I18n.t("ui.assignment_basket.main.not_ready.zero"):1===c?I18n.t("ui.assignment_basket.main.not_ready.one"):I18n.t("ui.assignment_basket.main.not_ready.several",{count:c})}}},ui:{assignAllButton:"[data-action=assignAll]"},modelEvents:{"change:valid_for_assign change:valid_count":"render"},triggers:{"click @ui.assignAllButton":"assignAll"},toggleAssignAll:function(a){var c=a?
"Assign":"Assigning";this.getUI("assignAllButton").text(c).prop("disabled",!a)}});c.Course.AssignmentBasket.Main=c.Component.extend({view:e,waitForDependencies:function(){var c=this;return a.store.get(f.TYPE.GROUPS,this.model.course()).fetch().done(function(a){return c.groups=a})},show:function(a){this.page=a;a.$(".sidepanel__body").addClass("loading");c.Component.prototype.show.call(this,a.getRegion("body"))},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,
"removeAll",this.onRemoveAll.bind(this));this.listenTo(a,"setDates",this.onSetDates.bind(this));this.listenTo(a,"setStudents",this.onSetStudents.bind(this));this.listenTo(this.model,"assign:fail",this.enableAssignAll.bind(this));this.listenTo(this.model,"assign:done",this.onAssignmentDone.bind(this))},onRender:function(){this.showList();this.showFooter()},showList:function(){var a=new k({collection:this.model.draftAssignments(),groups:this.groups});this.listenTo(a,"assignment:remove",this.onRemoveAssignment.bind(this));
this.listenTo(a,"assignment:settings",this.onOpenSettings.bind(this));this.listenTo(a,"assignment:preview",this.onPreview.bind(this));this.getView().showChildView("list",a)},showFooter:function(){this.footer=new l({model:this.model});this.listenTo(this.footer,"assignAll",this.assignAll.bind(this));this.page.showChildView("footer",this.footer)},onAssignmentDone:function(a){this.getView().$el.removeClass("loading");var c=this.model.get("count");this.model.clear();this.getView().getRegion("list").empty();
this.showSuccessView(c,a)},showSuccessView:function(a,d){this.getView().showChildView("success",new c.Course.AssignmentBasket.Success({course:this.model.course(),assignmentsCount:a,close:this.options.close,assignmentStatus:d}))},onRemoveAll:function(){(new a.AlertDialog({title:"Remove all?",message:"Remove all assignments from your basket?",submitText:"Remove",submitCallback:this.remove.bind(this),showCancel:!0})).render()},onSetDates:function(){this.trigger("setDates",this.model)},onSetStudents:function(){this.trigger("setStudents",
this.model)},onRemoveAssignment:function(a){this.model.removeDraft(a.model)},onOpenSettings:function(a){this.trigger("assignment:settings",a.model)},onPreview:function(a){this.trigger("assignment:preview",a.model)},remove:function(){this.model.destroy()},enqueue:function(){this.model.enqueue()},assignAll:function(){this.footer.toggleAssignAll(!1);this.getView().$el.addClass("loading");this.trigger("assign")},enableAssignAll:function(){this.getView().$el.removeClass("loading");this.footer.toggleAssignAll(!0)}})})(Osp,
Osp.Components,Osp.Store);
(function(a,c){var f={RESOURCES:"resources",PLANNING:"planning",SUPPORT:"assignments"},e=a.PaginatedContents.extend({setAssignment:function(a){this._assignment&&this.stopListening(this._assignment);this._assignment=a;this.listenTo(a,"change:material:limit",this.onChangeLimit.bind(this))},getAssignment:function(){return this._assignment},onChangeLimit:function(){_(this.models).each(function(a){a.trigger("change:limit",this.getAssignment().materialLimitReached())}.bind(this))}}),d=a.View.extend({template:"course/components/assignment_basket/material/annex-template",
className:"sidepanel__annex",ui:{node:".queryTitle",pagination:".queryResults"},collectionEvents:{"refresh reset sync":"renderPaginationResults"},setStructure:function(a){this.getUI("node").text(a?a.get("name"):"All resources")},renderPaginationResults:function(){var a=this.collection.pageInfo();0<this.collection.totalRecords?this.getUI("pagination").text(I18n.t("ui.pagination.showing",{start:a.startRecord,end:a.endRecord,total:this.collection.totalRecords})):this.getUI("pagination").empty()},onRender:function(){this.renderPaginationResults()}}),
h=a.View.extend({template:"course/components/assignment_basket/material/body-template",className:"sidepanel__body",attributes:{tabindex:"0"},regions:{list:".assignmentBasket__materialList"}}),k=a.View.extend({template:"course/components/assignment_basket/material/footer-template",className:"sidepanel__footer",triggers:{"click [data-action=structures]":"structures"}});c.Course.AssignmentBasket.Material=c.Component.extend({view:h,show:function(a){this.page=a;this.updateTitle();c.Component.prototype.show.call(this,
a.getRegion("body"))},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){this.showAnnex();this.showList();this.showFooter()},showAnnex:function(){this.annex=new d({collection:this.getContents()});this.structure&&this.annex.setStructure(this.structure);this.page.showChildView("annex",this.annex)},showList:function(){var a=new c.List.Material({collection:this.getContents(),paginationType:"compact"});this.listenTo(a,"item:toggle",this.onItemToggle.bind(this));
this.listenTo(a,"goTo:top",this.goToTop.bind(this));a.show(this.getView().getRegion("list"))},goToTop:function(){this.getView().$el.closest(".sidepanel__body").animate({scrollTop:0},500)},showFooter:function(){var a=new k;this.listenTo(a,"structures",this.onBrowse.bind(this));this.page.showChildView("footer",a)},addMaterial:function(a){this.type===f.SUPPORT?this.target.addSupport(a):this.target.addResource(a);a.trigger("added")},removeMaterial:function(a){this.type===f.SUPPORT?this.target.removeSupport(a):
this.target.removeResource(a);a.trigger("removed")},onItemToggle:function(a){this.target.materialAdded(a)?this.removeMaterial(a):this.addMaterial(a);this.pool.enqueue()},onBrowse:function(){this.trigger("structures",this.structure)},updateStructure:function(c){(this.structure=c instanceof a.Model?c:this.structures.getRecursive(c))&&this.structure.isRoot()&&(this.structure=null);this.getContents().setStructure(this.structure);this.annex.setStructure(this.structure)},getTitle:function(){return this.type===
f.RESOURCES?"Resource material":this.type===f.PLANNING?"Lesson material":"Support material"},updateTitle:function(){this.page&&this.page.model.set("title",this.getTitle())},getLens:function(){return this.course.lenses().findWhere({type:this.type})},setContentType:function(c){this.type=c;this.getContents().setLens(this.getLens());this.getContents().setUsedAs(c===f.SUPPORT?a.Content.SUPPORT:null);this.updateTitle()},setTarget:function(a){this.target=a;this.updateStructure(a.get("structure_id"));this.getContents().setAssignment(a);
this.fetch()},setStructure:function(a){this.updateStructure(a);this.fetch()},fetch:function(){this.getContents().resetCurrentPage();return this.getContents().fetch({reset:!0})},getContents:function(){if(this.contents)return this.contents;this.contents=new e(null,{course:this.course});this.contents.perPage=40;return this.contents}},{TYPE:f})})(Osp,Osp.Components);
(function(a,c,f){var e=a.View.extend({template:"course/components/assignment_basket/set_dates/annex-template",className:"sidepanel__annex",modelEvents:{change:"render"},templateContext:{isEmpty:function(){return _.isEmpty(this.end_date)}}}),d=a.View.extend({template:"course/components/assignment_basket/set_dates/body-template",className:"sidepanel__body",attributes:{tabindex:"0"},ui:{picker:".assignmentBasket__picker",nextButton:".assignmentBasket__pickerButton--next"},triggers:{"click @ui.nextButton":"next"},
scrollToTop:function(){this.$el.scrollTop(0)}}),h=a.View.extend({template:"course/components/assignment_basket/set_dates/footer-template",className:"sidepanel__footer",templateContext:{applyToAll:function(){return"all"===this.mode}},triggers:{"click [data-action=apply]":"apply"},initialize:function(a){this.mode=a.mode},serializeData:function(){return{mode:this.mode}}}),k=a.Model.extend({defaults:{start_date:null,end_date:null},reset:function(){this.set(this.defaults)}});c.Course.AssignmentBasket.SetDates=
c.Component.extend({view:d,initialize:function(){this.model=new k;c.Component.prototype.initialize.apply(this,arguments)},pickerOptions:function(){return{element:this.getView().getUI("picker").get(0),minDays:2,minDate:f().startOf("day").toDate(),inlineMode:!0,singleMode:!1,numberOfMonths:6,showTooltip:!1,onSelect:this.onSelectDate.bind(this)}},showAnnex:function(){this.annex=new e({model:this.model});this.page.showChildView("annex",this.annex)},showFooter:function(){var a=new h({mode:this.getMode()});
a.on("apply",this.onApply.bind(this));this.page.showChildView("footer",a)},setNumberOfMonths:function(){var a=6,c=this.picker.getEndDate(),d=f().startOf("month");c>d&&(c=Math.ceil(f(c).endOf("month").diff(d,"months",!0)),c>a&&(a=c));this.picker.setOptions({numberOfMonths:a});this.picker.gotoDate(d)},setTarget:function(a){this.target=a;this.picker.clearSelection();this.setPeriod();this.setNumberOfMonths();this.setTitle();this.emptyFooter();this.getView().scrollToTop()},createPicker:function(){this.picker=
window.picker=new Litepicker(this.pickerOptions())},next:function(){this.picker.setOptions({numberOfMonths:this.picker.options.numberOfMonths+1});this.picker.gotoDate(new Date)},setPeriod:function(){"single"===this.getMode()&&this.target.get("end_date")?(this.model.set({start_date:this.target.get("start_date"),end_date:this.target.get("end_date")}),this.picker.setOptions({startDate:f(this.target.get("start_date"),"DD/MM/YYYY").toDate(),endDate:f(this.target.get("end_date"),"DD/MM/YYYY").toDate()})):
this.model.reset()},setTitle:function(){this.page.model.set({title:this.getTitle()})},getTitle:function(){return"all"===this.getMode()?"Set dates for all":"Set dates"},getMode:function(){return this.target instanceof a.DraftAssignment?"single":"all"},emptyFooter:function(){this.page.getRegion("footer").empty()},onSelectDate:function(a,c){this.model.set({start_date:f(a).format("DD/MM/YYYY"),end_date:f(c).format("DD/MM/YYYY")});this.showFooter()},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));
this.listenTo(a,"next",this.next.bind(this))},onRender:function(){this.createPicker();this.showAnnex()},onApply:function(){var a={start_date:this.model.get("start_date"),end_date:this.model.get("end_date")};this.target.set(a);"all"===this.getMode()&&this.pool.setForAllDrafts(a);this.pool.enqueue();this.trigger("back")},onDestroy:function(){this.picker.destroy()},show:function(a){this.page=a;a.showChildView("body",this.getView())}})})(Osp,Osp.Components,moment);
(function(a,c){var f=a.View.extend({template:"course/components/assignment_basket/set_students/annex-template",className:"sidepanel__annex",ui:{tab:".navigationTabs__button",studentsCounter:"[data-counter=students]"},events:{"click @ui.tab":"onTabClick"},activateTab:function(a){a||(a=this.getUI("tab").first());this.$(".navigationTabs__item--active").removeClass("navigationTabs__item--active");a.parent().addClass("navigationTabs__item--active");this.trigger("show:panel",a.attr("href"))},onTabClick:function(a){a.preventDefault();
this.activateTab($(a.currentTarget))},updateUsersCounter:function(a){this.getUI("studentsCounter").toggleClass("badge--muted",!a).text(a)}}),e=a.View.extend({template:"course/components/assignment_basket/set_students/body-template",className:"sidepanel__body",attributes:{tabindex:"0"},ui:{selectAllToggle:"input[data-action=selectAll]",selectAllLabel:"label.selectAllLabel"},triggers:{"click @ui.selectAllToggle":{event:"selectAll",preventDefault:!1}},regions:{groups:"#groups",students:"#studentsList"},
showTab:function(a){this.$(".tabPanel--active").removeClass("tabPanel--active");this.$(a).addClass("tabPanel--active")},showSelectAllToggle:function(a){this.$(".selectAll").toggleClass("hidden",!a)},updateSelectAllToggle:function(a,c){var d=!a&&!!c;this.getUI("selectAllLabel").toggleClass("checkbox--partial",d);this.getUI("selectAllToggle").prop("checked",a);a=c+" "+I18n.t("ui.assign.selected");this.getUI("selectAllLabel").find("span").text(a)}}),d=a.View.extend({template:"course/components/assignment_basket/set_students/footer-template",
className:"sidepanel__footer",triggers:{"click [data-action=apply]":"apply"},templateContext:{applyToAll:function(){return"all"===this.mode}},initialize:function(a){this.mode=a.mode},serializeData:function(){return{mode:this.mode}}});c.Course.AssignmentBasket.SetStudents=c.Groups.Multiple.extend({view:e,onCreate:function(a){var d=this;this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"selectAll",this.onAllSelectionToggle.bind(this));this.listenTo(this.page.model,"activate",function(){return d.resetScroll()});
c.Groups.Multiple.prototype.onCreate.apply(this,arguments)},resetScroll:function(){this.$el().scrollTop(0)},onRender:function(){this.showAnnex()},showAnnex:function(){var a=this,c=this.getView();this.annex=new f;this.listenTo(this.annex,"show:panel",function(d){a.resetScroll();c.showTab(d)});this.page.showChildView("annex",this.annex)},showFooter:function(){var a=new d({mode:this.getMode()});a.on("apply",this.onApply.bind(this));this.page.showChildView("footer",a)},onStudentsChange:function(){this.updateUsersCounter();
this.updateSelectAll()},toggleFooter:function(){this.isValidSelection()?this.showFooter():this.emptyFooter()},onAllSelectionToggle:function(a,c){this.students.setForAll({selected:$(c.currentTarget).is(":checked")})},setTarget:function(a){this.target=a;this.setTitle();this.emptyFooter();a="all"===this.getMode()?[]:this.target.getGroupIds();var c="all"===this.getMode()?[]:this.target.getStudentIds();this.preselect(a||[],c||[]);this.annex.activateTab()},setTitle:function(){this.page.model.set({title:this.getTitle()})},
getTitle:function(){return"all"===this.getMode()?"Set students for all":"Set students"},getMode:function(){return this.target instanceof a.DraftAssignment?"single":"all"},emptyFooter:function(){this.page.getRegion("footer").empty()},updateUsersCounter:function(){this.annex.updateUsersCounter(this.selectedStudents().length)},updateSelectAll:function(){this.getView().updateSelectAllToggle(this.students.areAll("selected"),this.students.allThatAre("selected").length);this.getView().showSelectAllToggle(this.groups.areAny("selected"))},
onApply:function(){var a={group_ids:this.groupIds(),student_ids:this.studentIds()};this.target.set(a);"all"===this.getMode()&&this.pool.setForAllDrafts(a);this.pool.enqueue();this.trigger("back")},onSelectGroup:function(a){c.Groups.Multiple.prototype.onSelectGroup.apply(this,arguments);this.toggleFooter();this.updateSelectAll()},onSelectStudent:function(a){c.Groups.Multiple.prototype.onSelectStudent.apply(this,arguments);this.toggleFooter();this.updateSelectAll()},isValidSelection:function(){return this.selectedStudents().length&&
this.selectedGroups().length},show:function(a){this.page=a;c.Groups.Multiple.prototype.show.call(this,a.getRegion("body"))}})})(Osp,Osp.Components);(function(a){a.Course.AssignmentBasket.Settings=a.Course.AssignmentBasket.Assignment.extend({onRemove:function(){a.Course.AssignmentBasket.Assignment.prototype.onRemove.call(this);this.trigger("goTo:main")}})})(Osp.Components);
(function(a,c){var f=a.View.extend({className:"sidepanel__body assignmentBasket--empty",attributes:{tabindex:"0"},template:_.template('<div class="assignmentBasket__message"></div>'),regions:{message:{el:".assignmentBasket__message",replaceElement:!0}},initialize:function(a){this.message=new c.Course.AssignmentBasket.Success(a)},onRender:function(){this.showChildView("message",this.message)}}),e=c.Course.AssignmentBasket.Empty.extend({template:"course/components/assignment_basket/single_main/body_empty-template",
className:"sidepanel__body",attributes:{tabindex:"0"},regions:{wrapper:{el:".sidepanel__wrapper",replaceElement:!0}},onRender:function(){this.showChildView("wrapper",new c.Course.AssignmentBasket.Empty)}}),d=a.View.extend({className:"sidepanel__footer",template:"course/components/assignment_basket/single_main/footer-template",templateContext:function(){var c=this.model;return{isValidForAssign:function(){return c.isValidForAssign()},statusMessage:function(){var d=a.DraftAssignment.STATUS,e=c.getStatus();
return e===d.INCOMPLETE?I18n.t("ui.assignment_basket.single_main.not_ready.incomplete"):e===d.NO_DATES?I18n.t("ui.assignment_basket.single_main.not_ready.no_dates"):e===d.NO_STUDENTS?I18n.t("ui.assignment_basket.single_main.not_ready.no_students"):""}}},ui:{assignButton:"[data-action=assign]"},triggers:{"click @ui.assignButton":"assign"},modelEvents:{change:"render"},toggleAssign:function(a){var c=a?"Assign":"Assigning";this.getUI("assignButton").text(c).prop("disabled",!a)}});c.Course.AssignmentBasket.SingleMain=
c.Course.AssignmentBasket.Assignment.extend({onCreate:function(a){c.Course.AssignmentBasket.Assignment.prototype.onCreate.apply(this,arguments);this.listenTo(a,"render",this.showFooter.bind(this));this.listenTo(this.pool,"assign:done",this.onAssignmentDone.bind(this));this.listenTo(this.pool,"assign:fail",this.enableAssign.bind(this))},onRemove:function(){c.Course.AssignmentBasket.Assignment.prototype.onRemove.call(this);this.empty()},showFooter:function(){this.footer=new d({model:this.model});this.listenTo(this.footer,
"assign",this.assign.bind(this));this.page.showChildView("footer",this.footer)},onAssignmentDone:function(a){this.getView().$el.removeClass("loading");this.pool.clear();this.page.showChildView("body",new f({course:this.course,assignmentsCount:1,close:this.options.close,assignmentStatus:a}));this.page.removeRegion("footer")},empty:function(){this.page.showChildView("body",new e);this.page.removeRegion("footer")},assign:function(){this.footer.toggleAssign(!1);this.getView().$el.addClass("loading");
this.trigger("assign",this.model)},enableAssign:function(){this.getView().$el.removeClass("loading");this.footer.toggleAssign(!0)},show:function(a){a.$(".sidepanel__body").addClass("loading");c.Course.AssignmentBasket.Assignment.prototype.show.apply(this,arguments)}})})(Osp,Osp.Components);
(function(a,c){a=a.View.extend({template:"course/components/assignment_basket/structures/body-template",className:"sidepanel__body",attributes:{tabindex:"0"},regions:{structures:".structures__tree"}});c.Course.AssignmentBasket.Structures=c.Component.extend({view:a,show:function(a){this.page=a;c.Component.prototype.show.call(this,a.getRegion("body"))},onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this))},onRender:function(){this.structures=new c.Structures({course:this.course,collection:this.collection});
this.propagateEvent(this.structures,"node:view");this.structures.show(this.getRegion("structures"))},setTarget:function(a){this.structures.activate(a||this.structures.collection.first())}})})(Osp,Osp.Components,Osp.Store);
(function(a,c){a=a.View.extend({template:"course/components/teacher_markbook_panel/overview/layout-template",ui:{due:".sidepanel__markbook__overview__due",dueChanged:".message[data-event=dueChanged]",dueValue:".sidepanel__markbook__overview__due .value",dueInput:".sidepanel__markbook__overview__due .editBlock input"},triggers:{"click [data-action=open]":"open","input @ui.dueInput":"change:due","click [data-action=editDue]":"edit:due","click [data-action=saveDue]":"save:due","click [data-action=cancelDue]":"cancel:due",
'click [data-action="open:support"]':"open:support"},templateContext:{assignedTo:function(){var a=this.students.length;a=1<a?a+" "+I18n.t("ui.assignments.students"):a+" "+I18n.t("ui.assignments.student");var c=_(this.groups).pluck("name").join(", ");return a+" ("+c+")"},dueDate:function(){return moment(this.due).format("DD/MM/YY")},startDate:function(){return this.start?moment(this.start).format("DD/MM/YY"):"-"},testName:function(){return this.test_contents[0].name},showTestActivity:function(){return!!this.test_contents[0].activity_type},
testActivity:function(){return this.test_contents[0].activity_type},showTestExtension:function(){return!!this.test_contents[0].file_ext},testExtension:function(){return this.test_contents[0].file_ext},testDescription:function(){return this.test_contents[0].description},showDescription:function(){return!!this.description},hasPoints:function(){return!this.no_mark&&this.points},hasSupportContents:function(){return 0<this.support_contents.length}},isDueEditOn:function(){return"edit"==this.getUI("due").attr("data-mode")},
restoreDue:function(){this.getUI("dueInput").val(this.getUI("dueValue").text())},copyValue:function(){this.getUI("dueValue").text(this.getUI("dueInput").val())},toggleDueEdit:function(a){var c=this.getUI("due");a||(a="read"==c.attr("data-mode")?"edit":"read");c.attr("data-mode",a);this.isDueEditOn()||this.restoreDue()},dueIsDirty:function(a){var c=this.getUI("due");a?c.attr("data-dirty","on"):c.removeAttr("data-dirty")},dueIsSaved:function(a){var c=this.getUI("due");a?c.attr("data-saved","on"):c.removeAttr("data-saved")},
showDueChangedMessage:function(){var a=this.getUI("dueChanged").addClass("message--visible");return new Promise(function(c){_.delay(function(){a.removeClass("message--visible");c()},3E3)})}});c.Course.TeacherMarkbookPanel.Overview=c.Component.extend({view:a,propagate:"open",onCreate:function(a){var c=this;this.listenTo(a,"open:support",function(a,e){return c.trigger("open:support",$(e.currentTarget).data("index"))});this.listenTo(a,"edit:due",function(){return a.toggleDueEdit()});this.listenTo(a,
"cancel:due",function(){return a.toggleDueEdit()});this.listenTo(a,"save:due",function(){return c.onSaveDue()});this.listenTo(a,"change:due",function(){return a.dueIsDirty(c.dueIsValid())})},dueIsValid:function(){var a=moment(this.getView().getUI("dueInput").val(),"DD/MM/YY");return a.isValid()&&a>=moment().startOf("day")},onSaveDue:function(){var a=this.getView();this.saveDue().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return a.dueIsDirty(!1),
a.dueIsSaved(!0),c.yield(a.showDueChangedMessage(),2);a.copyValue();a.dueIsSaved(!1);a.toggleDueEdit();c.jumpToEnd()})})},getDue:function(){var a=this.getView().getUI("dueInput").val();return moment(a,"DD/MM/YY").format("DD/MM/YYYY")},saveDue:function(){return $.ajax({url:"/api/courses/"+this.getCourse().id+"/assignments/"+this.model.id,type:"PUT",data:{assignment:{due:this.getDue()}}})}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({className:"teacherReports__studentList",template:"course/components/teacher_reports/student_list_panel-template",ui:{count:".teacherReports__studentList__count span"},regions:{list:{el:".teacherReports__studentList__list",replaceElement:!0},sorter:{el:".teacherReports__studentList__sorter",replaceElement:!0}},collectionEvents:{sync:"updateCount"},templateContext:function(){var a=this.collection;return{count:function(){return a.length}}},updateCount:function(){this.getUI("count").text(this.collection.length)}}),
e=a.View.extend({tagName:"li",template:_.template("{{ last_name }}, {{ first_name }}")}),d=a.CollectionView.extend({tagName:"ul",childView:e,className:"teacherReports__studentList__list",collectionEvents:{sort:"render"}});c.Course.TeacherReports.StudentListComponent=c.Component.extend({view:f,onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()})},onRender:function(){this.showSorter();this.showList()},sort:function(a){var c=function(a){return a.get("last_name")+
" "+a.get("first_name")};this.collection.comparator=function(d,e){d=c(d);e=c(e);if(d==e)return 0;e=d<e?-1:1;return"asc"==a.direction?e:-e};this.collection.sort()},getSortBy:function(){var c=this,d=(new a.Builders.StudentListSorter).build();this.listenTo(d,"change:selected",function(){return c.sort(d.getSort())});return d},showSorter:function(){(new c.Form.Field({format:c.Form.ListFormat.DROPDOWN,model:this.getSortBy(),className:"dropdown dropdown--filter"})).show(this.getRegion("sorter"))},showList:function(){this.showChildView("list",
new d({collection:this.collection}))}});c.Course.TeacherReports.StudentListPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new c.Course.TeacherReports.StudentListComponent({collection:this.collection})},viewOptions:function(){return _.extend({className:"sidepanel",title:I18n.t("ui.teacher_reports.student_list.title")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a){var c=Osp.Collection.extend({sortDirection:"asc",sortColumn:"name",url:function(){return"/api/v2/courses/"+Osp.currentCourse.id+"/student_reports/knowledge?"+this.getQueryString()},params:function(){return{parent:this.parent||"",sort:this.sortColumn||"",order:this.sortDirection||""}},getStats:function(){return this._stats?this._stats:this._stats=new f},setParent:function(a){this.parent=a;return this},parse:function(a){this.getStats().set(a.meta.stats);return Osp.Collection.prototype.parseJsonAPI.apply(this,
arguments)}}),f=Osp.Model.extend({defaults:{developing:{value:0,percentage:0},secure:{value:0,percentage:0},extending:{value:0,percentage:0},questions:0},empty:function(){var a=this.get("developing"),c=this.get("secure"),d=this.get("extending");return 0==a.percentage&&0==c.percentage&&0==d.percentage}}),e=Osp.View.extend({tagName:"table",template:"course/components/student_reports/knowledge/table-template",ui:{level:"th:first-child"},regions:{body:{el:"tbody",replaceElement:!0}},onRender:function(){var a=
this,c=new k({collection:this.collection});this.listenTo(c,"view:node",function(c){return a.trigger("view:node",c)});this.showChildView("body",c)},setLevel:function(a){this.getUI("level").text(a)}}),d=Osp.View.extend({triggers:{"click [data-action=view]":"view"},templateContext:function(){return{hasData:function(){return this.developing||this.secure||this.extending},getWidth:function(a){return"width: calc("+this[a]+"% - 2px)"},isLastLevel:function(){return"CurriculumStrandSubTheme"===this.type}}}}),
h=d.extend({tagName:"tr",template:"course/components/student_reports/knowledge/table_row-template"}),k=Osp.CollectionView.extend({tagName:"tbody",childView:h,childViewTriggers:{view:"view:node"}});d=d.extend({template:"course/components/student_reports/knowledge/list_row-template"});var l=Osp.CollectionView.extend({childView:d,childViewTriggers:{view:"view:node"}}),m=Osp.View.extend({className:"knowledgeReport__stats studentReports__stats",template:"course/components/student_reports/knowledge/stats-template",
modelEvents:{change:"render"},templateContext:{hasData:function(){return this.developing.percentage||this.secure.percentage||this.extending.percentage},getWidth:function(a){return"width: calc("+this[a].percentage+"% - 2px)"}}});d=Osp.View.extend({className:"knowledgeReport",template:"course/components/student_reports/knowledge/layout-template",ui:{level:".mobile__level"},regions:{info:".knowledgeReport__info",stats:{el:".knowledgeReport__stats",replaceElement:!0},report:".knowledgeReport__report"},
setLevel:function(a){this.getUI("level").text(a)}});a.Course.StudentReports.Knowledge=a.Component.extend({view:d,toggleLoading:function(a){var c=this.$el().find(".knowledgeReport__body");a?c.addClass("loading"):c.removeClass("loading")},onCreate:function(a){var c=this;this.setMode();this.listenTo(a,"render",function(){return c.onRender()});this.listenTo(this.mode,"change",function(){c.showReport();c.setLevel()});this.listenTo(this.getData(),"sync",function(){return c.setLevel()});$(window).on("resize.student_knowledge",
function(){return c.setMode()})},onDestroy:function(){$(window).off("resize.student_knowledge")},setMode:function(){var a=window.matchMedia("(max-width: 1023px)").matches;return this.mode?this.mode.set({mobile:a}):this.mode=new Osp.Model({mobile:a})},getData:function(){this.data||(this.data=new c);return this.data},fetch:function(){var a=this;this.toggleLoading(!0);this.getData().fetch().done(function(){return setTimeout(function(){return a.toggleLoading(!1)},50)})},onRender:function(){this.showInfo();
this.showStats();this.showReport();this.fetch()},onViewNode:function(a){this.getData().setParent(a.id);this.fetch()},setLevel:function(){var a=this.getData().first().get("type");a=Osp.currentCourse.get("curriculum").labels.type[a];this.getView().setLevel(a);_.isFunction(this.report.setLevel)&&this.report.setLevel(a)},showInfo:function(){var c=this,d={name:Osp.currentCourse.get("curriculum").labels.root};this.breadcrumbs=new a.Breadcrubms({root:d,className:"knowledgeReport__breadcrumbs"});this.listenTo(this.breadcrumbs,
"view:node",function(a){return c.onViewNode(a)});this.breadcrumbs.show(this.getRegion("info"))},showStats:function(){this.getRegion("stats").show(new m({model:this.getData().getStats()}))},getTable:function(){return new e({collection:this.getData()})},getList:function(){return new l({collection:this.getData()})},showReport:function(){var a=this;this.report=this.mode.get("mobile")?this.getList():this.getTable();this.listenTo(this.report,"view:node",function(c){c=c.model.pick("id","name");a.breadcrumbs.add(c);
a.onViewNode(c)});this.getRegion("report").show(this.report)}})})(Osp.Components);
(function(a,c){var f=a.View.extend({template:"course/components/teacher_reports/assignment_panel-template",className:"sidepanel__body",attributes:{tabindex:"0"},regions:{summary:{el:".summary",replaceElement:!0},report:{el:".reportTable",replaceElement:!0},keyMapButton:{el:".keyMapButton",replaceElement:!0},keyMap:{el:".keyMap",replaceElement:!0}},ui:{showLess:'[data-action="show:less"]',showMore:'[data-action="show:more"]',infoPanel:".labeledPanel--collapsible"},events:{"click @ui.showMore":"toggleInfo",
"click @ui.showLess":"toggleInfo"},triggers:{'click [data-action="export"]':"export",'click [data-action="open:test"]':"open:test",'click [data-action="open:support"]':"open:support","click [data-action=openKeyMap]":"keyMapOpen"},toggleInfo:function(){this.getUI("showMore").toggleClass("hidden");this.getUI("showLess").toggleClass("hidden");this.getUI("infoPanel").toggleClass("labeledPanel--collapsed")},templateContext:{isNotSmart:function(){return!this.smart},showSubject:function(){return this.smart&&
!!this.subject},showCurriculum:function(){return this.smart&&!_.isEmpty(this.curriculum.titles)},startDate:function(){return this.start?moment(this.start).format("D/MM/YYYY"):"-"},dueDate:function(){return moment(this.due).format("D/MM/YYYY")},showAverageMark:function(){return this.smart&&!_(this.average.mark).isNull()&&!this.no_mark},averageMark:function(){return this.average.mark+"/"+this.points},averageMarkPercent:function(){return Math.floor(this.average.mark/this.points*100)+"%"},showSummary:function(){return!_(this.stats).isNull()}},
serializeData:function(){var c=(new a.CurriculumService(this.model)).serialized;return _.extend(a.View.prototype.serializeData.call(this),{curriculum:c})}}),e=a.DialogLayout.extend({template:"course/components/teacher_reports/file_uploads-template",triggers:{"click [data-action=open]":"open"},serializeData:function(){return{contents:this.model.get("student_contents")}}}),d=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(a,"export",this.onExport.bind(this));
this.listenTo(a,"keyMapOpen",this.showKeyMap.bind(this));this.listenTo(a,"open:test",this.onOpenTest.bind(this));this.listenTo(a,"open:support",this.onOpenSupportContent.bind(this))},onRender:function(){this.showSummary();this.showTable()},showTable:function(){var a=this,d=new (this.model.get("smart")?c.ScrollableTable.GroupedColumns:c.ScrollableTable)({collection:this.report});this.listenTo(d,"sort",this.onSort.bind(this));this.listenTo(d,"view:student",function(c){return a.trigger("view:student",
c)});this.listenTo(d,"open:question",this.openQuestion.bind(this));this.listenTo(d,"open:student_contents",this.openStudentContents.bind(this));this.listenTo(d,"keyMapOpen",this.showKeyMap.bind(this));d.show(this.getRegion("report"))},showSummary:function(){var a=this;if(this.model.get("smart")){var d=this.report.source.stats();d.empty()||(d=new c.Course.TeacherReports.DSESummary({model:d}),this.listenTo(d,"view:by_dse",function(c,d){return a.showStudents($(d.currentTarget).data("dse"))}),d.show(this.getRegion("summary")))}},
showKeyMap:function(){var a="NA \u0421 NC TM NAP DEV SEC EXT CONF NS NCONF".split(" "),d=["\u0421","NC","TM","NA","NAP"];a=this.model.get("smart")?a:d;(new c.Course.KeyMap({keys:a})).show(this.getRegion("keyMap")).toggle()},showStudents:function(a){this.trigger("view:students:by_dse",a)},open:function(c){(new a.ContentLauncherService(c)).launch()},onExport:function(){window.open(this.collection.exportUrl())},onOpenTest:function(){this.open(this.model.get("test_content"))},onOpenSupportContent:function(a,
c){a=$(c.currentTarget).data("index");this.open(this.model.get("support_contents")[a])},onSort:function(a,c,d){this.collection.sortColumn=d;this.collection.sortDirection=c;this.collection.prepare();this.collection.fetch({reset:!0})},openStudentContents:function(c,d){var f=this.collection.get(d.id);c=new e({model:f});this.listenTo(c,"open",function(c,d){c=$(d.currentTarget).data("index");c=f.get("student_contents")[c];(new a.ContentLauncherService(c)).launch()});c.render()},openQuestion:function(c,
d){c=this.model.get("test_content");(new a.ContentLauncherService(Object.assign({student_assignment_id:d.id},c))).launchPage(d.index)},show:function(a){this.page=a;c.Component.prototype.show.call(this,a.getRegion("body"))}}),h=c.ScrollableTable.Row.extend({template:"course/components/teacher_reports/student_cell-template",behaviors:[a.Behaviors.Tooltip]}),k=a.View.extend({tagName:"th",className:"scrollableTable__cell scrollableTable__cell--noBorder",template:"common/components/scrollable_table/key_map/header_cell-template",
events:{"click button":"keyMapCallback"},keyMapCallback:function(){this.trigger("keyMapOpen",{open:function(a){return open}})}}),l=c.Course.TeacherReports.StudentListComponent.extend({viewOptions:function(){return _.extend({className:"sidepanel__body teacherReports__studentList"},c.Course.TeacherReports.StudentListComponent.prototype.viewOptions.call(this))},show:function(a){this.page=a;c.Component.prototype.show.call(this,a.getRegion("body"))}}),m=Mn.Object.extend({initialize:function(a){this.mergeOptions(a,
_.keys(a))},buildMain:function(){return{id:"main",title:this.model.get("name"),icon:this.model.get("smart"),active:!0,component:this.component.getMain()}},buildStudents:function(){return{id:"students",title:"Student list",active:!1,component:this.component.getStudents()}},build:function(){return new a.Collection([this.buildMain(),this.buildStudents()])}}),n=a.Collection.extend({parse:a.Collection.prototype.parseJsonAPI,initialize:function(c,d){a.Collection.prototype.initialize.apply(this,arguments);
this._group=d.group;this._assignment=d.assignment},url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/assignment/"+this._assignment.id+"/students_by_dse/"+this._dse+"?"+this.getQueryString()},params:function(){return{group_id:this._group?this._group.id:""}},setDse:function(a){this._dse=a}});c.Course.TeacherReports.AssignmentPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.model=this.collection.assignment();this.students=
new n([],{assignment:this.model,group:this.collection.group()});this.builder=new m({component:this,model:this.model});this.pages=this.builder.build()},getMain:function(){var a=this,c=new d({model:this.model,collection:this.collection,report:this.buildReportTable()});this.propagateEvent(c,"view:student");this.listenTo(c,"view:students:by_dse",function(c){return a.viewStudentsBy(c)});return c},buildReportTable:function(){return(new (this.model.get("smart")?a.Builders.SmartAssignmentReportTable:a.Builders.AssignmentReportTable)(this.collection,
{studentCellView:h,headerKeyMapCell:k})).build()},viewStudentsBy:function(a){this.goTo("students");this.students.setDse(a);this.students.fetch()},getStudents:function(){return new l({collection:this.students})},viewOptions:function(){return _.extend({className:"sidepanel sidepanel--full sidepanel__teacherReports__assignment"},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a){var c=Osp.View.extend({className:"chartWrapper",template:"course/components/teacher_reports/dse_summary/layout-template",regions:{legend:{el:".chart__legend",replaceElement:!0}},templateContext:{cssVars:function(){var a=0<this.developing.percentage?this.developing.percentage:1,c=0<this.secure.percentage?this.secure.percentage:1,d={"width-developing":a,"width-secure":c,"width-extending":0<this.extending.percentage?this.extending.percentage:1,"width-extending-offset":a+c,"dse-developingBar":0<
this.developing.percentage?"var(--dse-developing)":"transparent","dse-secureBar":0<this.secure.percentage?"var(--dse-secure)":"transparent","dse-extendingBar":0<this.extending.percentage?"var(--dse-extending)":"transparent"};return Object.keys(d).reduce(function(a,c){return a+" --"+c+": "+d[c]+";"},"")}},triggers:{'click [data-action="view:by_dse"]':"view:by_dse"}}),f=Osp.View.extend({template:"course/components/teacher_reports/dse_summary/legend_item-template",className:function(){return"chart__legendContainer chart__legendContainer--"+
this.model.get("dse")},templateContext:{label:function(){return I18n.t("ui.smart."+this.dse)},showValue:function(){return this.extended},valueClass:function(){return 0==this.value?"chart__valueContainer":"chart__valueContainer chart__valueContainer--active"},showValueLink:function(){return 0<this.value}}}),e=Osp.CollectionView.extend({className:"chart__legend",childView:f}),d=Osp.View.extend({template:"course/components/teacher_reports/dse_summary/empty-template"});a.Course.TeacherReports.DSESummary=
a.Component.extend({view:c,propagate:"view:by_dse",onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.showLegend()})},legend:function(){var a=this.model,c=function(c){return{dse:c,extended:a.get("extended"),value:a.get(c).value,percentage:a.get(c).percentage}};return new Osp.Collection([c("developing"),c("secure"),c("extending")])},showLegend:function(){var a=new e({collection:this.legend()});a=this.model.empty()?new d:a;this.showChildView("legend",a)}})})(Osp.Components);
(function(a,c){var f=c.Course.TeacherReports.Report.extend({sortDirection:"asc",sortColumn:"student.name",url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/group_assignments/"+this.group.id},urlParams:{start_date:function(){return moment(this.period.get("start"),"DD/MM/YY").format("DD/MM/YYYY")},end_date:function(){return moment(this.period.get("end"),"DD/MM/YY").format("DD/MM/YYYY")},assigned_by:function(){return this.assignedBy||"me"},sort_by_assignment_id:function(){return this.sortByAssignment||
""},mode:function(){return this.mode||"mark"},skey:function(){return this.getStartKey()||""}},assignments:function(){return this._assignments||(this._assignments=new a.Collection)},parse:function(a){var c=a.students.meta&&a.students.meta.start_key;c&&this.addStartKey(c);this.assignments().reset(this.parseJsonAPI(a.assignments));this.setSource(a.source);this.setSelfStudyAverage(a.self_study_average);return this.parseJsonAPI(a.students)},setGroup:function(a){this.group=a},getGroup:function(){return this.group},
isSmart:function(){return a.currentCourse.get("smart")},setPeriod:function(a){this.period=a},setAssignedBy:function(a){this.assignedBy=a},setSortByAssignment:function(a){this.sortByAssignment=a},isSortedByAssignment:function(a,c){return this.sortColumn!=c?!1:this.sortByAssignment==a},isSortedBy:function(a){return this.sortColumn==a},setSelfStudyAverage:function(a){this._selfStudyAverage=a},selfStudyAverage:function(){return this._selfStudyAverage||0}}),e=c.Course.TeacherReports.Report.extend({sortDirection:"asc",
sortColumn:"student.name",url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/assignment/"+this._assigmentId},urlParams:{group_id:function(){return this._group.id},assignment_id:function(){return this._assigmentId},mode:function(){return this.mode||"mark"},skey:function(){return this.getStartKey()||""}},initialize:function(a,d){c.Course.TeacherReports.Report.prototype.initialize.apply(this,arguments);this._group=d.group;this._assigmentId=d.assigmentId},group:function(){return this._group},
assignment:function(){return this._assignment||(this._assignment=new a.Model)},stats:function(){return this._stats||(this._stats=new c.Course.TeacherReports.Stats)},parse:function(a){var c=a.student_assignments.meta&&a.student_assignments.meta.start_key;c&&this.addStartKey(c);c=this.assignment();c.set(c.parseJsonAPI(a.assignment));this.stats().set(c.get("stats"));this.setSource(a.source);return this.parseJsonAPI(a.student_assignments)}}),d=a.Components.ScrollableTable.HeaderCell.extend({template:"course/components/teacher_reports/student_header_cell-template",
className:"scrollableTable__cell scrollableTable__cell--fixedWidth",regions:{marksToggle:{el:".marksToggle",replaceElement:!0},keyMap:{el:".keyMap",replaceElement:!0}},triggers:{"click [data-action=openKeyMap]":"keyMapOpen"},onRender:function(){this.showChildView("marksToggle",new c.Course.TeacherReports.MarksToggle);this.showChildView("keyMap",new c.Course.TeacherReports.KeyMapButton)}}),h=c.ScrollableTable.Row.extend({template:"course/components/teacher_reports/student_cell-template",behaviors:[a.Behaviors.Tooltip]}),
k=a.View.extend({template:"course/components/teacher_reports/empty-template"}),l=a.View.extend({template:"course/components/teacher_reports/empty-template",className:"loading"});c.Course.TeacherReports.GroupStrategy=Mn.Object.extend({initialize:function(a){this.component=a.component;this.panelRegion=a.panelRegion;this.loading=!0;this.keyMapRegion=a.keyMapRegion},getData:function(){return this._data||(this._data=new f)},toggleLoading:function(a){this.loading=a;this.trigger("loading",a)},isLoading:function(){return this.loading},
isSelfStudy:function(){return a.currentCourse.get("self_study")},getTableData:function(){return(new a.Builders.AssignmentsReportTable(this.getData(),{studentHeaderView:d,studentCellView:h,loadingHandler:this.toggleLoading.bind(this)})).build()},onSortReport:function(a,c,d){a=a&&"assignment"==a.type?a.id:null;this.getData().prepare();this.getData().setSortByAssignment(a);this.getData().sortColumn=d;this.getData().sortDirection=c;this.getData().fetch({reset:!0})},onViewAssignmentReport:function(a){var c=
this,d=new e([],{group:this.getData().getGroup(),assigmentId:a.id});d.setMode(this.component.getMode());d.fetch().done(function(){return c.showAssignmentPanel(d)})},showAssignmentPanel:function(a){var d=this,e=new c.Course.TeacherReports.AssignmentPanel({collection:a});this.listenTo(e,"view:student",function(a){e.toggle();d.onViewStudentReport(a)});e.show(this.panelRegion).toggle()},onViewStudentReport:function(a){this.trigger("view:student",a.id)},onKeyMapOpen:function(){var a=this.getData().isSmart(),
d="NA \u0421 NC TM NAP DEV SEC EXT CONF NS NCONF".split(" "),e=["\u0421","NC","TM","NA","NAP"];(new c.Course.KeyMap({keys:a?d:e})).show(this.keyMapRegion).toggle()},tableClassName:function(){return this.isSelfStudy()?"section__body teacherReports--selfStudy":"section__body"},show:function(a){this.table=new c.ScrollableTable({className:this.tableClassName(),emptyView:k,collection:this.getTableData(),isLoading:this.isLoading.bind(this),loaderView:l});this.listenTo(this.table,"sort",this.onSortReport.bind(this));
this.listenTo(this.table,"view:student",this.onViewStudentReport.bind(this));this.listenTo(this.table,"view:assignment",this.onViewAssignmentReport.bind(this));this.listenTo(this.table,"keyMapOpen",this.onKeyMapOpen.bind(this));this.table.show(a)}})})(Osp,Osp.Components);
(function(a){var c=Osp.Collection.extend({sortDirection:"asc",sortColumn:"name",initialize:function(){Osp.Collection.prototype.initialize.apply(this,arguments);this._stats=new a.Course.TeacherReports.Stats},url:function(){return"/api/v2/courses/"+Osp.currentCourse.id+"/teacher_reports/knowledge?"+this.getQueryString()},params:function(){return{parent:this.parent||"",sort:this.sortColumn||"",order:this.sortDirection||"",group_id:this.group?this.group.id:"",student_id:this.student?this.student.id:""}},
getStats:function(){return this._stats},getStudentsByDse:function(a){return new f([],{dse:a,group:this.group,parent:this.parent})},setGroup:function(a){this.group=a;return this},setStudent:function(a){this.student=a;return this},setParent:function(a){this.parent=a;return this},updateStats:function(a){var c=this._stats;c.set({extended:!this.student});c.set(a)},isSortedByColumn:function(a){return this.sortColumn==a},parse:function(a){this.updateStats(a.meta.stats);return Osp.Collection.prototype.parseJsonAPI.apply(this,
arguments)}}),f=Osp.Collection.extend({parse:Osp.Collection.prototype.parseJsonAPI,initialize:function(a,c){Osp.Collection.prototype.initialize.apply(this,arguments);this.dse=c.dse;this.group=c.group;this.parent=c.parent},url:function(){return"/api/v2/courses/"+Osp.currentCourse.id+"/teacher_reports/knowledge/students_by_dse/"+this.dse+"?"+this.getQueryString()},params:function(){return{parent:this.parent||"",group_id:this.group?this.group.id:""}}}),e=Osp.View.extend({template:"course/components/teacher_reports/knowledge/layout-template",
regions:{info:{el:".knowledgeReport__info",replaceElement:!0},stats:{el:".knowledgeReport__stats",replaceElement:!0},table:".knowledgeReport__table",misconceptions:".knowledgeReport__misconceptions"}}),d=Osp.View.extend({className:"knowledgeReport__info",template:"course/components/teacher_reports/knowledge/info-template",triggers:{'click [data-action="view:node"]':"view:node"},modelEvents:{change:"render"},behaviors:[Osp.Behaviors.Tooltip]}),h=Osp.View.extend({className:"knowledgeReport__stats",
template:"course/components/teacher_reports/knowledge/stats-template",regions:{summary:{el:".summary",replaceElement:!0}},modelEvents:{change:"render"}}),k=Osp.View.extend({template:"course/components/teacher_reports/knowledge/empty-template"}),l=a.ScrollableTable.Row.extend({template:"course/components/teacher_reports/knowledge/row-template",behaviors:[Osp.Behaviors.Tooltip]}),m=Osp.PaginatedCollection.extend({parse:Osp.PaginatedCollection.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+
Osp.currentCourse.id+"/teacher_reports/misconceptions?"+this.getQueryString()},initialize:function(){Osp.PaginatedCollection.prototype.initialize.apply(this,arguments);this.perPage=3},params:function(){return{group_id:this.group?this.group.id:"",student_id:this.student?this.student.id:"",curriculum_id:this.curriculum?this.curriculum.id:""}},isStudent:function(){return!!this.student},getGroup:function(){return this.group},setGroup:function(a){this.group=a;return this},setStudent:function(a){this.student=
a;return this},setCurriculum:function(a){this.curriculum=a;return this}});a.Course.TeacherReports.Knowledge=a.Component.extend({view:e,initialize:function(){a.Component.prototype.initialize.apply(this,arguments);this.info=new Osp.Model({questions:0,breadcrubms:[{name:this.breadcrubmsRoot()}]})},toggleLoading:function(a){var c=this.$el().find(".knowledgeReport__body");a?c.addClass("loading"):c.removeClass("loading")},breadcrubmsRoot:function(){return Osp.currentCourse.get("curriculum").labels.root},
updateBreadCrumb:function(a){var c=this.info.get("breadcrubms"),d=c.findIndex(function(c){return c.id==a.id});c=-1!=d?c.slice(0,d+1):c.concat({id:a.id,name:a.name});this.info.set({breadcrubms:c})},onCreate:function(a){var c=this;this.listenTo(this.getMisconceptions(),"sync",function(){return c.toggleMisconceptions()});this.listenTo(a,"render",this.onRender.bind(this))},getData:function(){this.data||(this.data=(new c).setGroup(this.group),this.student&&this.data.setStudent(this.student));return this.data},
getMisconceptions:function(){this.misconceptions||(this.misconceptions=(new m).setGroup(this.group),this.student&&this.misconceptions.setStudent(this.student));return this.misconceptions},getTableData:function(){return(new Osp.Builders.KnowledgeReportTable(this.getData(),{rowView:l})).build()},fetch:function(){var a=this;this.toggleLoading(!0);$.when(this.getData().fetch(),this.getMisconceptions().resetCurrentPage().fetch({reset:!0})).done(function(){return setTimeout(function(){return a.toggleLoading(!1)},
50)})},viewGroup:function(a){this.group=a;this.student=null;this.getData().setGroup(a).setStudent(null);this.getMisconceptions().setGroup(a).setStudent(null);this.fetch()},viewStudent:function(a,c){c&&(this.group=c);this.student=a;this.getData().setGroup(c).setStudent(a);this.getMisconceptions().setGroup(c).setStudent(a);this.fetch()},onRender:function(){this.showInfo();this.showTable();this.showStats();this.showMisconceptions();this.fetch()},onSortReport:function(a,c,d){this.getData().sortColumn=
d;this.getData().sortDirection=c;this.getData().fetch()},onViewNode:function(a){this.updateBreadCrumb(a);this.getData().setParent(a.id);this.getMisconceptions().setCurriculum(a);this.fetch()},toggleMisconceptions:function(){this.getRegion("misconceptions").$el.toggleClass("knowledgeReport__misconceptions--empty",this.getMisconceptions().isEmpty())},showStudentsByDsePanel:function(c){var d=this.getData().getStudentsByDse(c);d.fetch().done(function(){return(new a.Course.TeacherReports.StudentListPanel({collection:d})).show().toggle()})},
showInfo:function(){var a=this,c=new d({model:this.info});this.listenTo(c,"view:node",function(c,d){return a.onViewNode({id:$(d.currentTarget).data("id")||null})});this.getRegion("info").show(c)},showStats:function(){var a=this,c=new h({model:this.getData().getStats()});this.listenTo(c,"render",function(){return a.showSummary(c.getRegion("summary"))});this.getRegion("stats").show(c)},showMisconceptions:function(){(new a.List.Misconceptions({collection:this.getMisconceptions()})).show(this.getRegion("misconceptions"))},
showSummary:function(c){var d=this,e=new a.Course.TeacherReports.DSESummary({model:this.getData().getStats()});this.listenTo(e,"view:by_dse",function(a,c){return d.showStudentsByDsePanel($(c.currentTarget).data("dse"))});e.show(c)},showTable:function(){var c=new a.ScrollableTable({emptyView:k,collection:this.getTableData()});this.listenTo(c,"sort",this.onSortReport.bind(this));this.listenTo(c,"view:node",this.onViewNode.bind(this));c.show(this.getRegion("table"));return this}})})(Osp.Components);
(function(a,c,f){var e=a.View.extend({className:"teacherReports__misconception-student-list",template:"course/components/teacher_reports/misconception/student_list_panel-template",ui:{count:".teacherReports__misconception-student-list__count span"},regions:{list:{el:".teacherReports__misconception-student-list__list",replaceElement:!0},sorter:{el:".teacherReports__misconception-student-list__sorter",replaceElement:!0}},collectionEvents:{sync:"updateCount"},templateContext:function(){var a=this.collection;
return{count:function(){return a.length}}},updateCount:function(){this.getUI("count").text(this.collection.length)}}),d=a.View.extend({tagName:"li",template:"course/components/teacher_reports/misconception/student_list_item-template",templateContext:{lastSelected:function(){return f(this.last_selected).format("D/M/YY")}}}),h=a.CollectionView.extend({tagName:"ul",childView:d,className:"teacherReports__misconception-student-list__list",collectionEvents:{sort:"render"}}),k=c.Component.extend({view:e,
waitForDependencies:function(){return this.collection.fetch()},onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()})},onRender:function(){this.showSorter();this.showList()},sortByName:function(a){var c=function(a){return a.get("last_name")+" "+a.get("first_name")};this.collection.comparator=function(d,e){d=c(d);e=c(e);if(d==e)return 0;e=d<e?-1:1;return"asc"==a.direction?e:-e}},sortByTimesSelected:function(a){this.collection.comparator=function(c,d){c=c.get("times_selected");
d=d.get("times_selected");if(c===d)return 0;d=c<d?-1:1;return"asc"===a.direction?d:-d}},sortByLastSelected:function(a){this.collection.comparator=function(c,d){c=moment(c.get("last_selected"),"YYYY/MM/DD");d=moment(d.get("last_selected"),"YYYY/MM/DD");c=c.valueOf();d=d.valueOf();if(c===d)return 0;d=c<d?-1:1;return"asc"===a.direction?d:-d}},sort:function(a){switch(a.attribute){case "name":this.sortByName(a);break;case "times":this.sortByTimesSelected(a);break;case "last":this.sortByLastSelected(a);
break;default:this.sortByName(a)}this.collection.sort()},getSortBy:function(){var c=this,d=(new a.Builders.MisconceptionStudentListSorter).build();this.listenTo(d,"change:selected",function(){return c.sort(d.getSort())});return d},showSorter:function(){(new c.Form.Field({format:c.Form.ListFormat.DROPDOWN,model:this.getSortBy(),className:"dropdown dropdown--filter"})).show(this.getRegion("sorter"))},showList:function(){this.showChildView("list",new h({collection:this.collection}))}});c.Course.TeacherReports.MisconceptionStudentsPanel=
c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new k({collection:this.collection})},viewOptions:function(){return _.extend({className:"sidepanel",title:I18n.t("ui.teacher_reports.student_list.title")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components,moment);
(function(a,c){a=a.View.extend({template:"course/components/teacher_reports/reactivate_panel-template",templateContext:{submittedAt:function(){return moment(this.submitted_at).format("ddd Do MMMM YYYY")},markText:function(){var a=parseInt(this.mark),c=parseInt(this.points);return a+"/"+c+" ("+Math.round(a/c*100)+"%)"}}});var f=c.Component.extend({view:a});c.Course.TeacherReports.ReactivatePanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component||
(this.component=new f({model:this.model}))},viewOptions:function(){return _.extend({className:"sidepanel teacherReports__reactivatePanel",title:this.model.get("name")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({template:"course/components/teacher_reports/student_assignment_panel-template",triggers:{'click [data-action="open:test"]':"open:test",'click [data-action="open:test:review"]':"open:test:review",'click [data-action="open:student_content"]':"open:student_content",'click [data-action="open:support"]':"open:support"},templateContext:{isSelfStudy:function(){return"self_study"==this.mode},startDate:function(){var a=this.assignment.start;return a?moment(a).format("ddd Do MMMM YYYY"):
"-"},dueDate:function(){return moment(this.assignment.due).format("ddd Do MMMM YYYY")},submittedAt:function(){var a=this.submitted_at;return a?moment(a).format("ddd Do MMMM YYYY"):"-"},isCompleted:function(){return _([a.Markbook.DONE,a.Markbook.MARKED]).contains(this.status)},showStudentContents:function(){return!this.detailed_score},showReviewAnswers:function(){return!!this.detailed_score},hasStudentContents:function(){return!_(this.student_contents).isEmpty()},hasSupportContents:function(){return!_(this.assignment.support_contents).isEmpty()},
markText:function(){if(this.assignment.no_mark)return"No mark available";if(this.status==a.Markbook.DONE)return"To mark";var c=parseInt(this.mark);if(!this.assignment.points)return c;var e=parseInt(this.assignment.points);return c+"/"+e+" ("+Math.round(c/e*100)+"%)"},markClassName:function(){return this.status==a.Markbook.DONE?"badge labeledPanel__markedText":""}}}),e=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"open:test",this.onOpenTest.bind(this));this.listenTo(a,"open:test:review",
this.onOpenTestReview.bind(this));this.listenTo(a,"open:student_content",this.onOpenStudentContent.bind(this));this.listenTo(a,"open:support",this.onOpenSupportContent.bind(this))},assignment:function(){return this.model.get("assignment")},open:function(c){(new a.ContentLauncherService(c)).launch()},onOpenTest:function(){this.open(this.assignment().test_content)},onOpenTestReview:function(){this.open(Object.assign({student_assignment_id:this.model.id},this.assignment().test_content))},onOpenSupportContent:function(a,
c){a=$(c.currentTarget).data("index");this.open(this.assignment().support_contents[a])},onOpenStudentContent:function(a,c){a=$(c.currentTarget).data("index");this.open(this.model.get("student_contents")[a])}});c.Course.TeacherReports.StudentAssignmentPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component||(this.component=new e({model:this.model}))},isSmart:function(){var a=this.model.get("assignment");return a&&a.smart},panelClassName:function(){return"sidepanel "+
(this.isSmart()?"sidepanel--smart":"")+" teacherReports__studentAssignmentPanel"},viewOptions:function(){return _.extend({className:this.panelClassName(),title:this.model.get("assignment").name},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=c.Course.TeacherReports.Report.extend({url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/student_assignments/"+this.student.id},urlParams:{group_id:function(){return this.group.id},assigned_by:function(){return this.assignedBy||"me"},start_date:function(){return moment(this.period.get("start"),"DD/MM/YY").format("DD/MM/YYYY")},end_date:function(){return moment(this.period.get("end"),"DD/MM/YY").format("DD/MM/YYYY")},mode:function(){return this.mode||
"mark"},skey:function(){return this.getStartKey()||""}},setStudent:function(a){this.student=a},setGroup:function(a){this.group=a},getGroup:function(){return this.group},setPeriod:function(a){this.period=a},setAssignedBy:function(a){this.assignedBy=a},parse:function(a){var c=a.student_assignments.meta&&a.student_assignments.meta.start_key;c&&this.addStartKey(c);this.setSource(a.source);return this.parseJsonAPI(a.student_assignments)}}),e=a.View.extend({template:"course/components/teacher_reports/student_report_layout-template",
className:"section__body",regions:{marksToggle:{el:".teacherReports__marksToggle",replaceElement:!0},table:{el:".teacherReports__studentReport",replaceElement:!0},map:{el:".teacherReports__keyMap",replaceElement:!0}},events:{"click [data-action=openKeyMap]":"onKeyMapOpen"},onKeyMapOpen:function(){this.trigger("keyMapOpen")}}),d=a.View.extend({template:"course/components/teacher_reports/empty-template"}),h=a.Model.extend({parse:function(c){this.type=c.data&&c.data.type;return a.Model.prototype.parseJsonAPI.call(this,
c)},url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/teacher_reports/student_assignments/view/"+this.id},isReactivate:function(){return"reactivate_task"==this.type}}),k=c.ScrollableTable.Row.extend({template:"course/components/teacher_reports/student_cell-template",behaviors:[a.Behaviors.Tooltip]});c.Course.TeacherReports.StudentStrategy=Mn.Object.extend({initialize:function(a){this.component=a},getData:function(){return this._data||(this._data=new f)},isSmart:function(){return a.currentCourse.get("smart")},
getTableData:function(){return(new a.Builders.StudentAssignmentsReportTable(this.getData(),{studentCellView:k})).build()},onSortReport:function(a,c,d){a=a&&a.sort||d;this.getData().prepare();this.getData().sortColumn=a;this.getData().sortDirection=c;this.getData().fetch({reset:!0})},onViewTask:function(a){var d=new h({id:a.id});d.fetch().done(function(){var a=d.isReactivate()?"ReactivatePanel":"StudentAssignmentPanel";(new c.Course.TeacherReports[a]({model:d})).show().toggle()})},onKeyMapOpen:function(){var a=
"NA \u0421 NC TM NAP DEV SEC EXT CONF NS NCONF".split(" "),d=["\u0421","NC","TM","NA","NAP"];a=this.isSmart()?a:d;(new c.Course.KeyMap({keys:a})).show().toggle()},show:function(a){this.layout=new e;this.listenTo(this.layout,"render",this.onRenderLayout.bind(this));this.listenTo(this.layout,"keyMapOpen",this.onKeyMapOpen.bind(this));a.show(this.layout)},onRenderLayout:function(){var a=this;this.layout.listenTo(this.getData(),"sync",function(){return a.handleSync()});var e=new c.ScrollableTable({emptyView:d,
collection:this.getTableData(),className:"teacherReports__studentReport"});this.listenTo(e,"sort",this.onSortReport.bind(this));this.listenTo(e,"view:student_assignment",this.onViewTask.bind(this));e.show(this.layout.getRegion("table"))},handleSync:function(){this.showMarksToggle();this.showKeyMapButton()},showKeyMapButton:function(){this.getData().isEmpty()?this.layout.getRegion("map").empty():this.layout.showChildView("map",new c.Course.TeacherReports.KeyMapButton({className:"keyMap__wrapper teacherReports__keyMap__studentReport"}))},
showMarksToggle:function(){this.getData().isEmpty()?this.layout.getRegion("marksToggle").empty():this.layout.showChildView("marksToggle",new c.Course.TeacherReports.MarksToggle({className:"marksToggle__wrapper teacherReports__marksToggle__studentReport"}))}})})(Osp,Osp.Components);
(function(a){a.Course.TeacherReports.Tasks=Mn.Object.extend({initialize:function(a){this.mergeOptions(a,_.keys(a));this.setStrategy();this.attachToEvents()},attachToEvents:function(){var a=this,f=_.debounce(this.applyFiltersAndFetch.bind(this),50);this.listenTo(this.period,"change",f);this.listenTo(this.filters,"change:selected",f);this.listenTo(this.groupStrategy,"loading",function(c){return a.trigger("loading",c)})},setStrategy:function(){this.strategy=this.student?this.getStudentStrategy():this.getGroupStrategy()},
toggleStrategy:function(){this.setStrategy();this.show()},getGroupStrategy:function(){var c=this;if(this.groupStrategy)return this.groupStrategy;this.groupStrategy=new a.Course.TeacherReports.GroupStrategy({component:this,panelRegion:this.panelRegion});this.listenTo(this.groupStrategy,"view:student",this.onViewStudentReport.bind(this));this.listenTo(this.groupStrategy,"loading",function(a){return c.trigger("loading",a)});return this.groupStrategy},getStudentStrategy:function(){return this.studentStrategy||
(this.studentStrategy=new a.Course.TeacherReports.StudentStrategy(this))},getData:function(){return this.strategy.getData()},applyFiltersAndFetch:function(){var a=this.getData();a.setGroup(this.group);this.student&&a.setStudent(this.student);a.setPeriod(this.period);a.setAssignedBy(this.filters.findWhere({name:"assigned_by"}).get("selected"));return a.fetch()},getMode:function(){return this.component.getMode()},export:function(){var a=this.getData();window.open(a.exportUrl())},viewGroup:function(a){this.group=
a;this.student=null;this.toggleStrategy()},viewStudent:function(a,f){f&&(this.group=f);this.student=a;this.toggleStrategy()},onViewStudentReport:function(a){var c=this.group.getUsers().find(function(c){return a==c.id});this.trigger("select:student",c,this.group);this.viewStudent(c)},show:function(a){a&&(this.region=a);this.strategy.show(this.region);this.applyFiltersAndFetch();return this}})})(Osp.Components);
(function(a,c){var f=a.View.extend({template:"course/components/student_reports/stats-template",templateContext:{showSmartFeatures:function(){return this.smart||!1},showSelfStudyFeature:function(){return a.currentCourse.get("self_study")}}});c.Course.StudentReports.Stats=c.Component.extend({view:f,waitForDependencies:function(){return this.model.fetch()}})})(Osp,Osp.Components);
(function(a,c){var f=a.View.extend({getTemplate:function(){return"course/components/student_reports/"+(this.model.isReactivate()?"reactivate_":"")+"task_panel-template"},ui:{showLess:'[data-action="show:less"]',showMore:'[data-action="show:more"]',infoPanel:".labeledPanel--collapsible"},events:{"click @ui.showMore":"toggleInfo","click @ui.showLess":"toggleInfo"},toggleInfo:function(){this.getUI("showMore").toggleClass("hidden");this.getUI("showLess").toggleClass("hidden");this.getUI("infoPanel").toggleClass("labeledPanel--collapsed")},
triggers:{'click [data-action="open:question"]':"open:question",'click [data-action="open:student_content"]':"open:student_content"},templateContext:{assignedBy:function(){return"self_study"==this.mode?"Me":this.assigned_by},submittedAt:function(){var a=this.submitted_at;return a?moment(a).format("D/M/YY"):"-"},hasSubject:function(){return!!this.subject},hasCurriculum:function(){return!_.isEmpty(this.curriculum.titles)},hasQuestions:function(){return!_(this.questions).isEmpty()},showSupport:function(){return"self_study"!=
this.mode},hasSupportContents:function(){return!_(this.student_contents).isEmpty()},isMarkAwaiting:function(){return"done"==this.status},markText:function(){if(this.no_mark)return"n/a";if("todo"==this.status)return"\u2718";var a=parseInt(this.mark),c=parseInt(this.points);return a+"/"+c+" ("+this.percentage_mark+"%)"},questionMarkText:function(a){var c=a.percentage_mark;return a.mark+"/"+a.points+" ("+(c?c:0)+"%)"},dseClassName:function(){switch(this.dse){case "developing":return"badge--yellow";case "secure":return"badge--green";
case "extending":return"badge--purple";default:return"badge--info"}},subjectText:function(){return this.subject?this.subject:null},getItemType:function(){var a=this.item_type;"smart_task"==a&&this.content_type&&(a=this.content_type);"other"==a&&"interactive"==this.content_type&&(a=this.content_type);return a?a.titleize():null},isLevelUp:function(){return"level_up"===this.item_type},isCompleted:function(){return _(["done","marked"]).contains(this.status)}},serializeData:function(){var c=(new a.CurriculumService(this.model)).serialized;
return _.extend(a.View.prototype.serializeData.call(this),{curriculum:c})}}),e=c.Component.extend({view:f,onCreate:function(a){this.listenTo(a,"open:question",this.onOpenQuestion.bind(this));this.listenTo(a,"open:student_content",this.onOpenStudentContent.bind(this))},assignment:function(){return this.model.get("assignment")},open:function(c){(new a.ContentLauncherService(c)).launch()},openAssignmentQuestion:function(c){var d=this.model.id.split("-")[1];d=Object.assign({student_assignment_id:d},this.model.get("test"));
return(new a.ContentLauncherService(d)).launchPage(c)},openLevelUpQuestion:function(c){var d=this.model.get("questions")[c];c=_(this.model.get("tests")).find(function(a){return a.id==d.test.id});(new a.LevelUpManager(this.model)).openTest(c,d.test.index)},onOpenQuestion:function(a,c){a=$(c.currentTarget).data("index");"level_up"==this.model.get("item_type")?this.openLevelUpQuestion(a):this.openAssignmentQuestion(a)},onOpenStudentContent:function(a,c){a=$(c.currentTarget).data("index");this.open(this.model.get("student_contents")[a])}}),
d=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+this._course.id+"/student_reports/tasks/"+this.id},initialize:function(c,d){d=void 0===d?{}:d;a.Model.prototype.initialize.apply(this,arguments);this._course=d.course||a.currentCourse},course:function(){return this._course},type:function(){return this.get("item_type").toLowerCase()},isSmart:function(){return"smart_task"==this.type()},isReactivate:function(){return"reactivate"==this.type()},isLevelUp:function(){return"level_up"==
this.type()}});c.Course.StudentReports.TaskPanel=c.SidePanel.extend({waitForDependencies:function(){return this.model.fetch()},initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.destroyOnClose=!0;this.model=new d({id:this.id},{course:this.course});this.component||(this.component=new e({model:this.model}))},panelClassName:function(){return"sidepanel "+(this.model.isSmart()?"sidepanel--smart":"")+" studentReports__taskPanel"},viewOptions:function(){return _.extend({className:this.panelClassName(),
title:this.model.get("task")},c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=c.Course.TeacherReports.Report.extend({sortDirection:"desc",sortColumn:"submitted_at",url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/student_reports/tasks"},urlParams:{period:function(){return this.period}},setPeriod:function(a){this.period=a},parse:a.PaginatedCollection.prototype.parseJsonAPI}),e=a.View.extend({template:"course/components/student_reports/tasks_layout-template",className:"section__body loading",regions:{stats:{el:".studentReports__stats",replaceElement:!0},
table:{el:".studentReports__tasksReport",replaceElement:!0}}}),d=a.View.extend({template:"course/components/student_reports/empty-template"}),h=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,defaults:{smart:!1},url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/student_reports/statistics"}}),k=c.ScrollableTable.Row.extend({template:"course/components/student_reports/student_cell-template",behaviors:[a.Behaviors.Tooltip]});c.Course.StudentReports.Tasks=c.Component.extend({view:e,onCreate:function(a){var c=
this;this.loading=!0;this.listenTo(a,"render",this.onRender.bind(this));this.listenTo(this.filter,"change:selected",this.applyFilterAndFetch.bind(this));this.listenTo(a,"loading",function(a){return c.toggleLoading.bind(c,a)})},state:function(){return a.currentCourse.state()},getData:function(){return this._data||(this._data=new f)},toggleLoading:function(a){this.loading=a;!1===a&&this.$(".studentReports__tasksReport").removeClass("loading")},getTableData:function(){return(new a.Builders.StudentReportsTasksReportTable(this.getData(),
{smart:this.isSmart(),studentCellView:k,loadingHandler:this.toggleLoading.bind(this)})).build()},getSelectedPeriod:function(){return this.filter.get("selected")||this.filter.get("defaultOption")},isSmart:function(){return a.currentCourse.get("smart")},applyFilterAndFetch:function(){this.getData().setPeriod(this.getSelectedPeriod());this.getData().fetch()},onSortReport:function(a,c,d){a=a&&a.sort||d;this.getData().prepare();this.getData().sortColumn=a;this.getData().sortDirection=c;this.getData().fetch({reset:!0})},
showTask:function(a){(new c.Course.StudentReports.TaskPanel({id:a})).open()},showTaskFromState:function(){this.state().has("assignment")&&(this.showTask(this.getTaskIdFromState()),this.state().unset("assignment"))},getTaskIdFromState:function(){return"student_assignment-"+this.state().get("assignment").get("student_assignment_id")},isLoading:function(){return this.loading},showTable:function(){var a=this,e=new c.ScrollableTable({emptyView:d,collection:this.getTableData(),isLoading:this.isLoading.bind(this),
className:"studentReports__tasksReport loading"});this.listenTo(e,"sort",this.onSortReport.bind(this));this.listenTo(e,"view:task",function(c){return a.showTask(c.id)});e.show(this.getRegion("table"))},showStats:function(){var a=new h({smart:this.isSmart()});(new c.Course.StudentReports.Stats({className:"studentReports__stats",model:a})).show(this.getRegion("stats"))},onRender:function(){this.showTable();this.showStats();this.showTaskFromState();this.applyFilterAndFetch();this.$el().removeClass("loading")}})})(Osp,
Osp.Components);
(function(a,c){c.Prototypes=c.Prototypes||{};a=a.View.extend({template:"common/components/prototypes/smart_results_panel-template",events:{'click [data-action="toggleMarks"]':"toggleMarks"},toggleMarks:function(){this.$('[data-action="toggleMarks"] span').toggle();this.$(".marks-details").toggle()},setProgressLevel:function(a){var c=this;_.times(a,function(a){return c.$('[data-progress="'+(a+1)+'"]').addClass("result-progress__bullet-item--filled")})}});var f=c.Component.extend({view:a,setProgressLevel:function(){var a=
1;"extend"==this.type&&(a=2);"reflect"==this.type&&(a=3);this.getView().setProgressLevel(a)},onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.setProgressLevel()})}});c.Prototypes.SmartResultsPanel=c.SidePanel.extend({initialize:function(){c.SidePanel.prototype.initialize.apply(this,arguments);this.component=new f({type:this.type})},viewOptions:function(){return _.extend({title:"",className:"sidepanel sidepanel--np sidepanel--full smartResultsPanel",attributes:{"data-type":this.type}},
c.SidePanel.prototype.viewOptions.call(this))}})})(Osp,Osp.Components);
(function(a,c){var f=c.Form,e=f.List.extend({getSearchTerm:function(){return{}},getSort:function(){if(this.has("selected"))return{attribute:_(this.get("selected").split(" ")).first(),direction:_(this.get("selected").split(" ")).last()}}});c=function(a){var c=Marionette.Object.call(this)||this;a&&c.listenTo(a,"destroy",function(){return c.destroy()});return c};$jscomp.inherits(c,Marionette.Object);c.prototype.getCourseState=function(a){return this.state.get(this.getCanonicalName(a))};c.prototype.setCourseState=
function(a){this.state.set(this.getCanonicalName(a),a.get("selected"))};c.prototype.loadCourseState=function(a){var c=this.getCourseState(a);void 0!==c&&a.set({selected:c},{silent:!0})};c.prototype.getCanonicalName=function(a){var c=a.get("name");return(a.get("namespace")||"filters")+":"+c};c.prototype.buildReset=function(){return new f.Reset({label:I18n.t("ui.search.reset.title")})};c.prototype.buildSortBy=function(a){return new e(Object.assign({name:"sort_by",label:I18n.t("ui.search.sort_by.title")},
a))};c.prototype.buildFilters=function(){var c=this,e=new a.Collection(Array.from(arguments));e.each(function(a){return c.loadCourseState(a)});this.listenTo(e,"change:selected",this.setCourseState.bind(this));return e};$jscomp.global.Object.defineProperties(c.prototype,{course:{configurable:!0,enumerable:!0,get:function(){return a.currentCourse}},state:{configurable:!0,enumerable:!0,get:function(){return this.course.state()}}});a.Builders=a.Builders||{};a.Builders.Filters=c})(Osp,Osp.Components);
(function(a,c){var f={NOT_SUBMITTED:"\u2718",FINISHED:"\u2714",AWAITING:"\u2014",NOT_ASSIGNED:"&#10187;",NOT_APPLICABLE:"n/a"},e=["developing","secure","extending"],d={MARK:_.template('<span class="mark mark__plain">{{ mark }}/{{ points }}</span><span class="mark mark__percentage">{{ percentage }}%</span>'),DSE:_.template('<span aria-label="{{ dseBand }} band" class="scrollableTable__cell-overlay scrollableTable__cell-overlay--dse-{{ dseBand }}"><img src="/images/icon_DSE-{{ dseBand }}.svg" /></span>')},
h=function(c){return a.Collection.apply(this,arguments)||this};$jscomp.inherits(h,a.Collection);h.prototype.initialize=function(c,d){a.Collection.prototype.initialize.apply(this,arguments);this.data=d.data};h.prototype.getHeader=function(){return this._header};h.prototype.getSource=function(){return this.data};$jscomp.global.Object.defineProperties(h.prototype,{header:{configurable:!0,enumerable:!0,set:function(a){this._header=a},get:function(){return this._header}},source:{configurable:!0,enumerable:!0,
get:function(){return this.data}}});var k=function(a,d){d=void 0===d?{}:d;var e=c.Object.call(this)||this;e.data=a;e.mergeOptions(d,_.keys(d));e.table=new h([],{data:a});e.listenTo(e.data,"sync",function(){return e.build()});return e};$jscomp.inherits(k,c.Object);k.prototype.buildHeader=function(){throw"Not implemented";};k.prototype.buildRows=function(){throw"Not implemented";};k.prototype.getSortableColumn=function(a){var c=a.field,d=a.name||c.humanize();return Object.assign({name:d,sortColumn:c,
sortDirection:this.data.isSortedByColumn(c)?this.data.sortDirection:null},a)};k.prototype.addHeaderItem=function(c){var d=this,e=c.columns.map(function(a){return _(a).isString()?{name:a}:_(a.field).isUndefined()?a:d.getSortableColumn(a)});this.header.add(new a.Model(Object.assign({},c,{columns:e})))};k.prototype.isNotSubmitted=function(c){return _([a.Markbook.TODO,a.Markbook.SAVED]).contains(c.get("status"))};k.prototype.getMarkCellValue=function(a,c,e){return c?d.MARK({mark:parseInt(a),points:c,
percentage:e}):a};k.prototype.getMarkOrStatus=function(c,d){d=void 0===d?!1:d;var e=c.get("status");if(this.isNotSubmitted(c))return f.NOT_SUBMITTED;if(d&&e==a.Markbook.MARKED)return f.FINISHED;if(e==a.Markbook.DONE)return f.AWAITING;if(e==a.Markbook.MARKED)return this.getMarkCellValue(c.get("mark"),c.get("points"),c.get("percentage_mark"))};k.prototype.getDate=function(a,c){c=void 0===c?f.NOT_SUBMITTED:c;return a?moment(a).format("DD/MM/YY"):c};k.prototype.getDseValue=function(a){a=_(a).isNumber()?
e[a]:a;return e.includes(a)?d.DSE({dseBand:a}):f.NOT_SUBMITTED};k.prototype.build=function(){this.header.reset();this.buildHeader();this.table.header=this.header;this.buildRows();return this.table};$jscomp.global.Object.defineProperties(k.prototype,{header:{configurable:!0,enumerable:!0,get:function(){return this._header?this._header:this._header=new a.Collection}}});$jscomp.global.Object.defineProperties(k,{SYMBOL:{configurable:!0,enumerable:!0,get:function(){return f}}});a.Builders=a.Builders||
{};a.Builders.ReportTable=k})(Osp,Marionette);(function(a,c,f){a.Builders=a.Builders||{};a.Builders.AssignedByFilter=f.Object.extend({build:function(){return new c.Form.List({name:"assigned_by",label:I18n.t("ui.assignments.assigned_by"),defaultOption:"me",format:c.Form.ListFormat.DROPDOWN,options:[{label:I18n.t("ui.assignments.me"),value:"me"},{label:I18n.t("ui.assignments.all_teachers"),value:"all"}]})}})})(Osp,Osp.Components,Marionette);
(function(a,c){a.Builders=a.Builders||{};var f=a.Collection.extend({initialize:function(c,d){a.Collection.prototype.initialize.apply(this,arguments);this.data=d.data},setHeader:function(a){this._header=a},getHeader:function(){return this._header},getSource:function(){return this.data}});a.Builders.AssignmentReportTable=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;this.data=a;this.assignment=a.assignment();this.table=new f([],{data:a});this.studentCellView=c.studentCellView||null;this.headerKeyMapCell=
c.headerKeyMapCell||null;this.listenTo(this.data,"sync",this.build.bind(this))},getStudentHeader:function(){return new a.Model({columns:[{name:"Student name",sortColumn:"student.name",sortDirection:this.data.isSortedByColumn("student.name")?this.data.sortDirection:null}],keyMap:!0})},getCompletedHeader:function(){return new a.Model({columns:[{name:"Completed",sortColumn:"submitted_at",sortDirection:this.data.isSortedByColumn("submitted_at")?this.data.sortDirection:null}]})},getStatusHeader:function(){return new a.Model({columns:[{name:"Status",
sortColumn:"status",sortDirection:this.data.isSortedByColumn("status")?this.data.sortDirection:null}]})},getLevelUpHeader:function(){return new a.Model({columns:[{name:"Level Up"}]})},getDSEHeader:function(){return new a.Model({columns:[{name:"DSE"}]})},getMarkHeader:function(){return new a.Model({columns:[{name:"Mark",sortColumn:"mark",sortDirection:this.data.isSortedByColumn("mark")?this.data.sortDirection:null}]})},getFileUploadHeader:function(){return new a.Model({columns:[{name:"File upload"}]})},
getQuestionsHeaders:function(){return _.times(this.numberOfQuestions(),function(c){return new a.Model({mini:!0,dashed:!0,columns:[{name:"Q"+(c+1)}]})})},numberOfQuestions:function(){var a=this.assignment.get("average");return _(a.questions).isEmpty()?0:a.questions.length},anyFileUpload:function(){return this.data.find(function(a){return _(a.get("student_contents")).any()})},buildHeader:function(){var c=this.assignment.get("no_mark"),d=new a.Collection;d.add(this.getStudentHeader());d.add(this.getCompletedHeader());
d.add(c?this.getStatusHeader():this.getMarkHeader());this.assignment.get("smart")&&(d.add(this.getLevelUpHeader()),d.add(this.getDSEHeader()));this.anyFileUpload()&&d.add(this.getFileUploadHeader());d.add(this.getQuestionsHeaders());this.table.setHeader(d);return d},getStudentAssignmentData:function(a){var c=[];c.push(this.getCompleted(a));c.push(this.getAssignmentMarkOrStatus(a));this.assignment.get("smart")&&(c.push(this.getLevelUpCellValue(a)),c.push(this.getDseCellValue(a)));this.anyFileUpload()&&
c.push(this.getFileUpload(a));return[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(this.getQuestions(a)))},getCompleted:function(a){return a.get("submitted_at")?moment(a.get("submitted_at")).format("DD/MM/YY"):"\u2718"},isNotSubmitted:function(c){return _([a.Markbook.TODO,a.Markbook.SAVED]).contains(c.get("status"))},noLevelUps:function(a){return!a.get("intervention_level_up")&&!a.get("extension_level_up")},anyLevelUpDone:function(a){var c=a.get("intervention_level_up");a=a.get("extension_level_up");
return c&&"done"==c.status||a&&"done"==a.status?!0:!1},getLevelUpCellValue:function(a){return!a||this.noLevelUps(a)?"&#10187;":this.anyLevelUpDone(a)?"\u2714":"\u2718"},getDseCellValue:function(a){if(!a)return"&#10187;";a=a.get?a.get("final_dse")||a.get("dse"):a.dse;return["developing","secure","extending"].includes(a)?'<span aria-label="'+a+' band" class="scrollableTable__cell-overlay scrollableTable__cell-overlay--dse-'+a+'"><img src="/images/icon_DSE-'+a+'.svg" /></span>':"&#10187;"},getFileUpload:function(a){if(this.isNotSubmitted(a))return"None added";
var c=a.id,e=a.get("delivery_type");a=a.get("student_contents").length;return"manual"==e?"Given by hand":"upload"==e?'<a href="#" data-action="open" data-event="open:student_contents" data-id="'+c+'">'+a+" file"+(1<a?"s":"")+"</a>":"None added"},getMarkCellValue:function(a,c,f){return c?'<span class="mark mark__plain">'+parseInt(a)+"/"+c+'</span><span class="mark mark__percentage">'+f+"%</span>":a},getAssignmentMarkOrStatus:function(c){var d=this.assignment.get("no_mark"),e=c.get("status");if(this.isNotSubmitted(c))return"\u2718";
if(d&&e==a.Markbook.MARKED)return"\u2714";if(e==a.Markbook.DONE)return"\u2014";if(e==a.Markbook.MARKED)return this.getMarkCellValue(c.get("mark"),c.get("points"),c.get("percentage_mark"))},getQuestions:function(a){var c=this;if(!this.numberOfQuestions())return[];var e=[],f=a.id;e=a.get("detailed_score");e=this.isNotSubmitted(a)?_.times(this.numberOfQuestions(),function(){return"\u2718"}):e.map(function(a,d){var e=a.mark,h=a.points;a=a.percentage_mark;if(!h)return"n/a";if(!_.isNumber(e))return"\u2014";
e=c.getMarkCellValue(e,h,a);return'<a href="#" data-action="open" data-event="open:question" data-index="'+d+'" data-id="'+f+'">'+e+"</a>"});return e.map(function(a){return{value:a,mini:!0,dashed:!0}})},getAssignmentAverageMarkOrStatus:function(){var a=this.assignment.get("points"),c=this.assignment.get("no_mark"),f=this.assignment.get("average");return c?f.marked?"\u2714":"\u2718":f.mark?this.getMarkCellValue(f.mark,a,f.percentage_mark):"&#10187;"},getAverageForQuestions:function(){var a=this,c=
this.assignment.get("average"),f=_.times(this.numberOfQuestions(),function(){return""});_(c.questions).isEmpty()||(f=c.questions.map(function(c){return _(c.points).isNull()?"n/a":_(c.mark).isNull()?"&#10187;":a.getMarkCellValue(c.mark,c.points,c.percentage_mark)}));return f.map(function(a){return{value:a,mini:!0,dashed:!0}})},getAssignmentAverageData:function(){var a=[];a.push("n/a");a.push(this.getAssignmentAverageMarkOrStatus());this.assignment.get("smart")&&(a.push("n/a"),a.push(this.getDseCellValue(this.assignment.get("average"))));
this.anyFileUpload()&&a.push("n/a");return[].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(this.getAverageForQuestions()))},buildAverageRow:function(){return new a.Model({highlighted:!0,header:"Class average",cells:this.getAssignmentAverageData()})},buildRow:function(c){var d=c.get("student");return(new a.Model({view:this.studentCellView,event:"view:student",meta:{id:d.id,type:"student"},header:d.last_name+", "+d.first_name})).set({cells:this.getStudentAssignmentData(c)})},buildRows:function(){var a=
this,c=this.data.map(function(c){return a.buildRow(c)});this.table.reset(_(c).isEmpty()?[]:[this.buildAverageRow()].concat($jscomp.arrayFromIterable(c)))},build:function(){this.buildHeader();this.buildRows();return this.table}})})(Osp,Marionette);
(function(a,c,f){c=c.Form;a.Builders=a.Builders||{};var e=c.List.extend({getSearchTerm:function(){return{}},getSort:function(){if(this.has("selected"))return{attribute:_(this.get("selected").split("_")).first(),direction:_(this.get("selected").split("_")).last()}}});a.Builders.AssignmentsFilters=f.Object.extend({buildSortBy:function(){return new e({name:"sort_by",label:I18n.t("ui.search.sort_by.title"),defaultOption:"due_asc",options:[{label:I18n.t("ui.search.sort_by.asc"),value:"name_asc"},{label:I18n.t("ui.search.sort_by.desc"),
value:"name_desc"},{label:I18n.t("ui.search.sort_by.due_date"),value:"due_asc"}]})},build:function(){return new a.Collection([this.buildSortBy()])}})})(Osp,Osp.Components,Marionette);
(function(a,c){a.Builders=a.Builders||{};var f=a.Builders.ReportTable.SYMBOL,e=a.Collection.extend({initialize:function(c,e){a.Collection.prototype.initialize.apply(this,arguments);this.data=e.data},setHeader:function(a){this._header=a},getHeader:function(){return this._header},getSource:function(){return this.data}});a.Builders.AssignmentsReportTable=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;this.data=a;this.table=new e([],{data:a});this.studentHeaderView=c.studentHeaderView||null;
this.studentCellView=c.studentCellView||null;this.listenTo(this.data,"sync",this.onSync.bind(this));this.listenTo(this.data,"sync",this.build.bind(this));this.listenTo(this.data,"request",this.onRequest.bind(this));this.loadingHandler=c.loadingHandler||null},onRequest:function(){this.loadingHandler&&this.loadingHandler(!0)},onSync:function(){this.loadingHandler&&this.loadingHandler(!1)},isSelfStudy:function(){return a.currentCourse.get("self_study")},getColumnSortDirection:function(a,c){return(c=
void 0===c?null:c)?this.data.isSortedByAssignment(c,a)?this.data.sortDirection:null:this.data.isSortedBy(a)?this.data.sortDirection:null},assignmentHeader:function(c){var d=new a.Model({event:"view:assignment",caption:c.get("name"),meta:{id:c.id,type:"assignment",smart:c.get("smart")},columns:[{name:c.get("no_mark")?"Status":"Mark",defaultsortDirection:"desc",sortColumn:"assignment.mark",sortDirection:this.getColumnSortDirection("assignment.mark",c.id)}]});c.get("smart")&&d.get("columns").push({name:"Level Up",
defaultsortDirection:"desc",sortColumn:"assignment.level_up_status",sortDirection:this.getColumnSortDirection("assignment.level_up_status",c.id)},{name:"DSE"});return d},selfStudyHeader:function(){return new a.Model({caption:"Tasks completed<br>independently",columns:[{name:"Total",sortColumn:"self_study_count",sortDirection:this.getColumnSortDirection("self_study_count")}]})},getAssignmentsHeaders:function(){var a=this,c=this.data.assignments().map(function(c){return a.assignmentHeader(c)});return this.isSelfStudy()?
[this.selfStudyHeader()].concat($jscomp.arrayFromIterable(c)):c},buildHeader:function(){var c=new a.Collection;c.add(new a.Model({view:this.studentHeaderView,meta:{sort:"student.name"},columns:[{name:"Student name",sortColumn:"student.name",sortDirection:this.data.isSortedByColumn("student.name")?this.data.sortDirection:null}]}));c.add(this.getAssignmentsHeaders());this.table.setHeader(c);return c},findStudentAssignment:function(a,c){return _(a.get("student_assignments")).findWhere({assignment_id:c.id})},
getMarkCellValue:function(a,c,e){return c?'<span class="mark mark__plain">'+parseInt(a)+"/"+c+'</span><span class="mark mark__percentage">'+e+"%</span>":a},getAssignmentMarkOrStatus:function(c,e){c=this.findStudentAssignment(c,e);if(!c)return"&#10187;";if(_([a.Markbook.TODO,a.Markbook.SAVED]).contains(c.status))return"\u2718";if(e.get("no_mark")&&c.status==a.Markbook.MARKED)return"\u2714";if(c.status==a.Markbook.DONE)return"\u2014";if(c.status==a.Markbook.MARKED)return this.getMarkCellValue(c.mark,
e.get("points"),c.percentage_mark)},noLevelUps:function(a){return!a.intervention_level_up&&!a.extension_level_up},anyLevelUpDone:function(a){var c=a.intervention_level_up;a=a.extension_level_up;return c&&"done"==c.status||a&&"done"==a.status?!0:!1},getLevelUpCellValue:function(a){return!a||this.noLevelUps(a)?"&#10187;":this.anyLevelUpDone(a)?"\u2714":"\u2718"},getDseCellValue:function(a){if(!a)return"&#10187;";a=a.final_dse||a.dse;return["developing","secure","extending"].includes(a)?'<span aria-label="'+
a+' band" class="scrollableTable__cell-overlay scrollableTable__cell-overlay--dse-'+a+'"><img src="/images/icon_DSE-'+a+'.svg" /></span>':"&#10187;"},getAssignmentsData:function(a){var c=this,d=_.flatten(this.data.assignments().map(function(d){var e=[{value:c.getAssignmentMarkOrStatus(a,d),dashed:d.get("smart")}];d.get("smart")&&(d=c.findStudentAssignment(a,d),e.push({value:c.getLevelUpCellValue(d),dashed:!0}),e.push(c.getDseCellValue(d)));return e}));return this.isSelfStudy()?[a.get("self_study_count")||
0].concat($jscomp.arrayFromIterable(d)):d},getAssignmentsAverageData:function(){var a=this,c=this.data.assignments().map(function(c){var d=[];var e=c.get("average");e=c.get("no_mark")?e.marked?f.FINISHED:f.NOT_SUBMITTED:_(e.mark).isNumber()?a.getMarkCellValue(e.mark,c.get("points"),e.percentage_mark):f.NOT_ASSIGNED;d.push({value:e,dashed:c.get("smart")});c.get("smart")&&(d.push({dashed:!0,value:f.NOT_APPLICABLE,className:"scrollableTable__cell--notApplicable"}),d.push({value:f.NOT_APPLICABLE,className:"scrollableTable__cell--notApplicable"}));
return d});return this.isSelfStudy()?[this.getSelfStudyAverage()].concat($jscomp.arrayFromIterable(c)):c},getSelfStudyAverage:function(){return this.data.selfStudyAverage()},buildAverageRow:function(){return new a.Model({highlighted:!0,header:"Class average",cells:_.flatten(this.getAssignmentsAverageData())})},buildRow:function(c){return(new a.Model({view:this.studentCellView,event:"view:student",meta:{id:c.id,type:"student"},header:c.get("last_name")+", "+c.get("first_name")})).set({cells:this.getAssignmentsData(c)})},
buildRows:function(){var a=this,c=this.data.map(function(c){return a.buildRow(c)});this.table.reset(_(c).isEmpty()?[]:[this.buildAverageRow()].concat($jscomp.arrayFromIterable(c)))},build:function(){this.buildHeader();this.buildRows();return this.table}})})(Osp,Marionette);
(function(a,c,f){var e=c.Form;a.Builders=a.Builders||{};var d=e.List.extend({getSearchTerm:function(){return{}},getSort:function(){if(this.has("selected"))return"default"===this.get("selected")?{attribute:"",direction:""}:{attribute:_(this.get("selected").split("_")).first(),direction:_(this.get("selected").split("_")).last()}},reset:function(){}}),h=e.List.extend({getSearchTerm:function(){var a={};_(this.get("selected")).contains("new")&&_.extend(a,{new_contents:!0});_(this.get("selected")).contains("updated")&&
_.extend(a,{updated_contents:!0});return a}});a.Builders.ContentsFilters=f.Object.extend({initialize:function(a){this.lens=a.lens;this.defaults=a.defaults||{}},getDefault:function(a){return this.defaults[a]||null},getDefaultForMultiple:function(a){return(a=this.getDefault(a))?_.isArray()?a:[a]:[]},buildSortBy:function(){return new d({name:"sort_by",label:I18n.t("ui.search.sort_by.title"),defaultOption:"default",options:[{label:I18n.t("ui.search.sort_by.default"),value:"default"},{label:I18n.t("ui.search.sort_by.asc"),
value:"name_asc"},{label:I18n.t("ui.search.sort_by.desc"),value:"name_desc"}]})},addAllOption:function(a){a.unshift({label:I18n.t("ui.search.all"),value:""})},getFormats:function(){var a=function(a){return a.name.toLowerCase()},c=this.lens&&this.lens.isPlanning()?gon.planningTerms.concat(gon.formats):gon.formats;return _.chain(c).sortBy(a).uniq(!0,a).pluck("name").value()},getTypeOptions:function(){var a=_(this.getFormats()).map(function(a){return{label:a.capitalize(),value:a}});this.addAllOption(a);
return a},buildType:function(){return new e.List({name:"type",label:I18n.t("ui.search.criteria.format"),defaultOption:"",highlight:!0,options:this.getTypeOptions()})},buildLatest:function(){return new h({name:"latest",label:I18n.t("ui.search.criteria.latest.title"),format:e.ListFormat.ACCORDION_MULTIPLE,highlight:!0,multiple:!0,selected:this.getDefaultForMultiple("latest"),options:[{label:I18n.t("ui.search.criteria.latest.new"),value:"new"},{label:I18n.t("ui.search.criteria.latest.updated"),value:"updated"}]})},
buildSource:function(){var c=[{label:I18n.t("ui.search.criteria.source.oup"),value:"oup"}];a.profile.isTeacher()&&c.push({label:I18n.t("ui.search.criteria.source.you"),value:String(a.profile.id)});c.push({label:I18n.t("ui.search.criteria.source.other"),value:"other"});this.addAllOption(c);return new e.List({name:"source",label:I18n.t("ui.search.criteria.source.title"),defaultOption:"",highlight:!0,options:c})},buildReset:function(){return new e.Reset({label:I18n.t("ui.search.reset.title")})},buildUsedAs:function(){var c=
[{label:I18n.t("ui.search.advanced_search.package"),value:String(a.Content.TEST_PACKAGE)},{label:I18n.t("ui.search.advanced_search.support"),value:String(a.Content.SUPPORT)},{label:I18n.t("ui.search.advanced_search.test"),value:String(a.Content.TEST)}];this.addAllOption(c);return new e.List({name:"used_as",label:I18n.t("ui.search.criteria.used_as"),defaultOption:"",highlight:!0,options:c})},build:function(){return new a.Collection(_([this.buildSortBy(),this.buildReset(),this.buildType(),this.lens&&
this.lens.isAssignment()?this.buildUsedAs():null,a.profile.isTeacher?this.buildLatest():null,this.buildSource()]).compact())}})})(Osp,Osp.Components,Marionette);
(function(a,c){a.Builders=a.Builders||{};var f=a.Collection.extend({initialize:function(c,d){a.Collection.prototype.initialize.apply(this,arguments);this.data=d.data},setHeader:function(a){this._header=a},getHeader:function(){return this._header},getSource:function(){return this.data}});a.Builders.KnowledgeReportTable=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;this.data=a;this.rowView=c.rowView||null;this.table=new f([],{data:a});this.loadingHandler=c.loadingHandler||null;this.listenTo(this.data,
"sync",this.onSync.bind(this));this.listenTo(this.data,"sync",this.build.bind(this));this.listenTo(this.data,"request",this.onRequest.bind(this))},onRequest:function(){this.loadingHandler&&this.loadingHandler(!0)},onSync:function(){this.loadingHandler&&this.loadingHandler(!1)},getLabelBy:function(c){return a.currentCourse.get("curriculum").labels.type[c]},getNameHeader:function(){var c=this.data.models[0]&&this.data.models[0].get("type");return new a.Model({columns:[{name:this.getLabelBy(c)||"Tag",
sortColumn:"name",sortDirection:this.data.isSortedByColumn("name")?this.data.sortDirection:null}]})},getDevelopingHeader:function(){return new a.Model({dashed:!0,columns:[{name:"Developing",sortColumn:"developing",sortDirection:this.data.isSortedByColumn("developing")?this.data.sortDirection:null}]})},getSecureHeader:function(){return new a.Model({dashed:!0,columns:[{name:"Secure",sortColumn:"secure",sortDirection:this.data.isSortedByColumn("secure")?this.data.sortDirection:null}]})},getExtendingHeader:function(){return new a.Model({columns:[{name:"Extending",
sortColumn:"extending",sortDirection:this.data.isSortedByColumn("extending")?this.data.sortDirection:null}]})},getQuestionsHeader:function(){return new a.Model({columns:[{name:"Questions answered",sortColumn:"questions",sortDirection:this.data.isSortedByColumn("questions")?this.data.sortDirection:null}]})},buildHeader:function(){var c=new a.Collection;c.add(this.getNameHeader());c.add(this.getDevelopingHeader());c.add(this.getSecureHeader());c.add(this.getExtendingHeader());c.add(this.getQuestionsHeader());
this.table.setHeader(c);return c},getDeveloping:function(a){return{dashed:!0,value:a.get("developing")+"%"}},getSecure:function(a){return{dashed:!0,value:a.get("secure")+"%"}},getExtending:function(a){return a.get("extending")+"%"},hasData:function(a){return a.get("developing")||a.get("secure")||a.get("extending")},noDataAvailable:function(){return{colspan:3,value:"No data available",className:"scrollableTable__cell--noData"}},getNodeData:function(a){var c=[];this.hasData(a)?(c.push(this.getDeveloping(a)),
c.push(this.getSecure(a)),c.push(this.getExtending(a))):c.push(this.noDataAvailable());c.push(a.get("questions"));return c},buildRow:function(c){var d=null;"CurriculumStrandSubTheme"!=c.get("type")&&(d="view:node");return(new a.Model({event:d,meta:{id:c.get("id"),name:c.get("name")},header:c.get("name"),view:this.rowView})).set({cells:this.getNodeData(c)})},buildRows:function(){var a=this;this.table.reset(this.data.map(function(c){return a.buildRow(c)}))},build:function(){this.buildHeader();this.buildRows();
return this.table}})})(Osp,Marionette);
(function(a,c,f){var e=c.Form;a.Builders=a.Builders||{};var d=e.List.extend({getSearchTerm:function(){return{}},getSort:function(){if(this.has("selected"))return{attribute:_(this.get("selected").split(" ")).first(),direction:_(this.get("selected").split(" ")).last()}}});a.Builders.LevelUpsFilters=f.Object.extend({buildSortBy:function(){return new d({name:"sort_by",label:I18n.t("ui.search.sort_by.title"),defaultOption:"created desc",options:[{label:I18n.t("ui.search.sort_by.newest_to_oldest"),value:"created desc"},
{label:I18n.t("ui.search.sort_by.oldest_to_newest"),value:"created asc"}]})},buildReset:function(){return new e.Reset({label:I18n.t("ui.search.reset.title")})},getDSEOptions:function(){return[{label:I18n.t("ui.search.all"),value:""},{label:I18n.t("ui.next_steps.level_ups.filters.dse.secure"),value:"secure"},{label:I18n.t("ui.next_steps.level_ups.filters.dse.extend"),value:"extend"}]},buildDSE:function(){return new e.List({name:"dse",label:I18n.t("ui.next_steps.level_ups.filters.dse.title"),defaultOption:"",
highlight:!0,options:this.getDSEOptions()})},build:function(){return new a.Collection([this.buildSortBy(),this.buildReset(),this.buildDSE()])}})})(Osp,Osp.Components,Marionette);
(function(a,c){var f=c.Form,e=c.Form.ListFormat.ACCORDION.extend({className:"accordion hidden--l"});c=function(c){return a.Builders.Filters.apply(this,arguments)||this};$jscomp.inherits(c,a.Builders.Filters);c.prototype.buildSortBy=function(){return a.Builders.Filters.prototype.buildSortBy.call(this,{defaultOption:"due desc",options:[{label:I18n.t("ui.search.sort_by.due_desc"),value:"due desc"},{label:I18n.t("ui.search.sort_by.due_asc"),value:"due asc"},{label:I18n.t("ui.search.sort_by.name_asc"),
value:"name asc"},{label:I18n.t("ui.search.sort_by.name_desc"),value:"name desc"},{label:I18n.t("ui.search.sort_by.assigned_by_asc"),value:"assigned_by asc"},{label:I18n.t("ui.search.sort_by.assigned_by_desc"),value:"assigned_by desc"}]})};c.prototype.buildAssignedBy=function(){return new f.List({name:"assigned_by",format:e,label:I18n.t("ui.assignments.assigned_by"),defaultOption:"me",options:[{label:I18n.t("ui.assignments.me"),value:"me"},{label:I18n.t("ui.assignments.all_teachers"),value:"all"}]})};
c.prototype.buildStatus=function(){return new f.List({name:"status",label:I18n.t("ui.search.criteria.status"),defaultOption:"",highlight:!0,options:[{label:I18n.t("ui.search.all"),value:""},{label:I18n.t("ui.search.criteria.assignment_status.to_mark"),value:"to_mark"},{label:I18n.t("ui.search.criteria.assignment_status.not_submitted"),value:"not_submitted"},{label:I18n.t("ui.search.criteria.assignment_status.marked"),value:"marked"}]})};c.prototype.build=function(){return this.buildFilters(this.buildSortBy(),
this.buildReset(),this.buildAssignedBy(),this.buildStatus())};a.Builders.MarkbookFilters=c})(Osp,Osp.Components);
(function(a,c){c=function(c){return a.Builders.Filters.apply(this,arguments)||this};$jscomp.inherits(c,a.Builders.Filters);c.prototype.buildSortBy=function(){return a.Builders.Filters.prototype.buildSortBy.call(this,{defaultOption:"name asc",label:I18n.t("ui.teacher_reports.student_list.sorter.title"),options:[{label:I18n.t("ui.teacher_reports.student_list.sorter.name_asc"),value:"name asc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.name_desc"),value:"name desc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.times_desc"),
value:"times desc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.times_asc"),value:"times asc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.last_desc"),value:"last desc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.last_asc"),value:"last asc"}]})};c.prototype.build=function(){return this.buildSortBy()};a.Builders.MisconceptionStudentListSorter=c})(Osp,Osp.Components);
(function(a,c){var f=a.Builders.ReportTable.SYMBOL,e={CONFIDENCE:_.template('<svg><use xlink:href="#svg__icon-confidence-rating_{{ feedback }}"></use></svg>')};c=function(c,d){c=a.Builders.ReportTable.call(this,c,d)||this;c.headerKeyMapCell=d.headerKeyMapCell||null;return c};$jscomp.inherits(c,a.Builders.ReportTable);c.prototype.getDse=function(a){return this.getDseValue(a.get("dse"))};c.prototype.getFinalDse=function(a){var c=a.get("intervention_level_up")||{},d=a.get("extension_level_up")||{};return"done"==
c.status||"done"==d.status?this.getDseValue(a.get("final_dse")):_(c.status).isUndefined()&&_(d.status).isUndefined()?f.NOT_ASSIGNED:f.NOT_SUBMITTED};c.prototype.buildHeader=function(){this.addHeaderItem({label:"Key",view:this.headerKeyMapCell,columns:[{name:"Student name",field:"student.name"}],keyMap:!0});this.addHeaderItem({label:"Start task",border:!1,columns:[{name:"Completed",field:"submitted_at"}]});this.addHeaderItem({columns:[{field:"mark",group:"mark"}].concat($jscomp.arrayFromIterable(this.questionsHeaders)),
border:!1,collapsible:this.hasQuestions,group:"mark",status:"collapsed"});this.addHeaderItem({columns:["DSE"]});this.addHeaderItem({label:"Next Steps",border:!1,columns:[{name:"Level Up: Secure",dashed:!0,className:"scrollableTable__cell--levelUp"},{name:"Level Up: Extend",className:"scrollableTable__cell--levelUp"}]});this.addHeaderItem({columns:["DSE"],border:!1});this.hasFeedback&&this.addHeaderItem({columns:["Confidence"]})};c.prototype.getQuestions=function(a){var c=this;if(!this.numberOfQuestions)return[];
var d=[],e=a.id;d=a.get("detailed_score");d=this.isNotSubmitted(a)?_.times(this.numberOfQuestions,function(){return"\u2718"}):d.map(function(a,d){var h=a.mark,k=a.points;a=a.percentage_mark;if(!k)return f.NOT_APPLICABLE;if(!_.isNumber(h))return"\u2014";h=c.getMarkCellValue(h,k,a);return'<a href="#" data-action="open" data-event="open:question" data-index="'+d+'" data-id="'+e+'">'+h+"</a>"});return d.map(function(a,d){return{value:a,mini:!0,dashed:d+1<c.numberOfQuestions,group:"mark",status:"collapsed"}})};
c.prototype.getLevelUpCell=function(a){return a?"done"!=a.status?f.NOT_SUBMITTED:this.getMarkCellValue(a.mark,a.points,a.percentage_mark):f.NOT_ASSIGNED};c.prototype.getFeedback=function(a){return(a=a instanceof Backbone.Model?a.get("feedback"):a.feedback)?{value:e.CONFIDENCE({feedback:a}),className:"scrollableTable__cell--confidence"}:f.NOT_SUBMITTED};c.prototype.getStudentAssignmentCells=function(a){var c=[this.getDate(a.get("submitted_at")),{value:this.getMarkOrStatus(a),group:"mark",field:"mark"}].concat($jscomp.arrayFromIterable(this.getQuestions(a)),
[this.getDse(a),{value:this.getLevelUpCell(a.get("intervention_level_up")),dashed:!0},this.getLevelUpCell(a.get("extension_level_up")),this.getFinalDse(a)]);this.hasFeedback&&c.push(this.getFeedback(a));return c};c.prototype.buildRow=function(c){var d=c.get("student");return(new a.Model({event:"view:student",meta:{id:d.id,type:"student"},header:d.last_name+", "+d.first_name})).set({cells:this.getStudentAssignmentCells(c)})};c.prototype.buildRows=function(){var a=this,c=this.data.map(function(c){return a.buildRow(c)});
this.table.reset([this.average.row].concat($jscomp.arrayFromIterable(c)))};$jscomp.global.Object.defineProperties(c.prototype,{assignment:{configurable:!0,enumerable:!0,get:function(){return this.data.assignment()}},average:{configurable:!0,enumerable:!0,get:function(){return this._average?this._average:this._average=new d(this)}},numberOfQuestions:{configurable:!0,enumerable:!0,get:function(){return this.average.numberOfQuestions}},hasFeedback:{configurable:!0,enumerable:!0,get:function(){return this.assignment.get("has_feedback")}},
questionsHeaders:{configurable:!0,enumerable:!0,get:function(){var a=this;return _.times(this.numberOfQuestions,function(c){return{mini:!0,dashed:c+1<a.numberOfQuestions,group:"mark",status:"collapsed",name:"Q"+(c+1)}})}},hasQuestions:{configurable:!0,enumerable:!0,get:function(){return 0<this.numberOfQuestions}}});var d=function(a){this.builder=a;this.assignment=a.assignment};d.prototype.getMarkCellValue=function(){return this.builder.getMarkCellValue.apply(this.builder,arguments)};d.prototype.getDseValue=
function(){return this.builder.getDseValue.apply(this.builder,arguments)};d.prototype.getFeedback=function(){return this.builder.getFeedback.apply(this.builder,arguments)};$jscomp.global.Object.defineProperties(d.prototype,{average:{configurable:!0,enumerable:!0,get:function(){return this.assignment.get("average")||{}}},points:{configurable:!0,enumerable:!0,get:function(){return this.assignment.get("points")}},hasFeedback:{configurable:!0,enumerable:!0,get:function(){return this.assignment.get("has_feedback")}},
markOrStatus:{configurable:!0,enumerable:!0,get:function(){return _(this.average.mark).isNumber()?this.getMarkCellValue(this.average.mark,this.points,this.average.percentage_mark):f.NOT_ASSIGNED}},questions:{configurable:!0,enumerable:!0,get:function(){return this.average.questions||[]}},numberOfQuestions:{configurable:!0,enumerable:!0,get:function(){return this.questions.length}},questionCells:{configurable:!0,enumerable:!0,get:function(){var a=this,c=_.times(this.numberOfQuestions,function(){return""});
_(this.questions).isEmpty()||(c=this.questions.map(function(c){return _(c.points).isNull()?f.NOT_APPLICABLE:_(c.mark).isNull()?f.NOT_ASSIGNED:a.getMarkCellValue(c.mark,c.points,c.percentage_mark)}));return c.map(function(c,d){return{value:c,mini:!0,dashed:d+1<a.numberOfQuestions,group:"mark",status:"collapsed"}})}},cells:{configurable:!0,enumerable:!0,get:function(){var a=[f.NOT_APPLICABLE,{value:this.markOrStatus,field:"mark",group:"mark"}].concat($jscomp.arrayFromIterable(this.questionCells),[f.NOT_APPLICABLE,
{value:f.NOT_APPLICABLE,dashed:!0},f.NOT_APPLICABLE,f.NOT_APPLICABLE]);this.hasFeedback&&a.push(f.NOT_APPLICABLE);return a}},row:{configurable:!0,enumerable:!0,get:function(){return new a.Model({highlighted:!0,header:"Class average",cells:this.cells})}}});a.Builders.SmartAssignmentReportTable=c})(Osp,Marionette);
(function(a,c){a.Builders=a.Builders||{};var f=a.Builders.ReportTable.SYMBOL,e=a.Collection.extend({initialize:function(c,e){a.Collection.prototype.initialize.apply(this,arguments);this.data=e.data},setHeader:function(a){this._header=a},getHeader:function(){return this._header},getSource:function(){return this.data}});a.Builders.StudentAssignmentsReportTable=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;this.data=a;this.table=new e([],{data:a});this.studentCellView=c.studentCellView;
this.listenTo(this.data,"sync",this.build.bind(this))},isSmartCourse:function(){return a.currentCourse.get("smart")},getTaskHeader:function(){return new a.Model({columns:[{name:"Task",sortColumn:"assignment.name",sortDirection:this.data.isSortedByColumn("assignment.name")?this.data.sortDirection:null}]})},getCompletedHeader:function(){return new a.Model({columns:[{name:"Completed",sortColumn:"submitted_at",sortDirection:this.data.isSortedByColumn("submitted_at")?this.data.sortDirection:null}]})},
getStatusHeader:function(){return new a.Model({columns:[{name:"Status",sortColumn:"status",sortDirection:this.data.isSortedByColumn("status")?this.data.sortDirection:null}]})},getMarkHeader:function(){return new a.Model({columns:[{name:"Mark",sortColumn:"mark",sortDirection:this.data.isSortedByColumn("mark")?this.data.sortDirection:null}]})},getLevelUpHeader:function(){return new a.Model({columns:[{name:"Level Up"}]})},getDSEHeader:function(){return new a.Model({columns:[{name:"DSE"}]})},getAssignedByHeader:function(){return new a.Model({columns:[{name:"Assigned by",
sortColumn:"assignment.assigned_by",sortDirection:this.data.isSortedByColumn("assignment.assigned_by")?this.data.sortDirection:null}]})},getDueDateHeader:function(){return new a.Model({columns:[{name:"Due date",sortColumn:"assignment.due",sortDirection:this.data.isSortedByColumn("assignment.due")?this.data.sortDirection:null}]})},buildHeader:function(){var c=new a.Collection;c.add(this.getTaskHeader());c.add(this.getStatusHeader());c.add(this.getMarkHeader());this.isSmartCourse()&&(c.add(this.getLevelUpHeader()),
c.add(this.getDSEHeader()));c.add(this.getAssignedByHeader());c.add(this.getDueDateHeader());c.add(this.getCompletedHeader());this.table.setHeader(c);return c},getStudentAssignmentData:function(a){var c=[];c.push(this.getStatus(a));c.push(this.getMark(a));this.isSmartCourse()&&(c.push(this.getLevelUpCellValue(a)),c.push(this.getDseCellValue(a)));c.push(this.getAssignedBy(a));c.push(this.getDueDate(a));c.push(this.getCompleted(a));return c},getStatus:function(c){c=c.get("status");if(_([a.Markbook.TODO,
a.Markbook.SAVED]).contains(c))return"\u2718";if(_([a.Markbook.DONE,a.Markbook.MARKED]).contains(c))return"\u2714";if(!c)return"n/a"},getMarkCellValue:function(a,c){var d=parseInt(a),e=parseInt(c);return c?'<span class="mark mark__plain">'+d+"/"+e+'</span><span class="mark mark__percentage">'+Math.round(d/e*100)+"%</span>":a},getMark:function(c){var d=c.get("assignment");if(d&&d.no_mark)return"n/a";d=c.get("status");return _([a.Markbook.TODO,a.Markbook.SAVED]).contains(d)?"\u2718":d==a.Markbook.DONE?
"\u2014":this.getMarkCellValue(c.get("mark"),c.get("points"))},noLevelUps:function(a){return!a.get("intervention_level_up")&&!a.get("extension_level_up")},anyLevelUpDone:function(a){var c=a.get("intervention_level_up");a=a.get("extension_level_up");return c&&"done"==c.status||a&&"done"==a.status?!0:!1},getLevelUpCellValue:function(a){return a?a.get("assignment")&&a.get("assignment").smart?this.noLevelUps(a)?"&#10187;":this.anyLevelUpDone(a)?"\u2714":"\u2718":"n/a":"&#10187;"},getDseCellValue:function(a){if(!a)return"&#10187;";
if(!a.get("assignment")||!a.get("assignment").smart)return"n/a";a=a.get("final_dse")||a.get("dse");return["developing","secure","extending"].includes(a)?'<span aria-label="'+a+' band" class="scrollableTable__cell-overlay scrollableTable__cell-overlay--dse-'+a+'"><img src="/images/icon_DSE-'+a+'.svg" /></span>':"n/a"},getAssignedBy:function(a){var c=a.get("assignment");return c&&c.assigned_by||a.get("assigned_by")},getCompleted:function(a){return a.get("submitted_at")?moment(a.get("submitted_at")).format("DD/MM/YY"):
"\u2718"},isSelfStudy:function(a){var c=a.get("assignment");return c&&c.self_study?!0:(a=this.getAssignedBy(a))&&"student"==a.toLowerCase()},getDueDate:function(a){if(this.isSelfStudy(a))return f.NOT_APPLICABLE;var c=a.get("assignment");return(a=c&&c.due||a.get("due"))?moment(a).format("DD/MM/YY"):f.NOT_APPLICABLE},buildRow:function(c){var d=c.get("assignment"),e=d?d.name:c.get("name");return(new a.Model({view:this.studentCellView,event:"view:student_assignment",meta:{id:c.id,type:"student_assignment",
smart:d&&d.smart?!0:!1},badge:d&&d.smart?{type:"smart",text:"SMART"}:null,header:e})).set({cells:this.getStudentAssignmentData(c)})},buildRows:function(){var a=this;this.table.reset(this.data.map(function(c){return a.buildRow(c)}))},build:function(){this.buildHeader();this.buildRows();return this.table}})})(Osp,Marionette);
(function(a,c){c=function(c){return a.Builders.Filters.apply(this,arguments)||this};$jscomp.inherits(c,a.Builders.Filters);c.prototype.buildSortBy=function(){return a.Builders.Filters.prototype.buildSortBy.call(this,{defaultOption:"name asc",label:I18n.t("ui.teacher_reports.student_list.sorter.title"),options:[{label:I18n.t("ui.teacher_reports.student_list.sorter.name_asc"),value:"name asc"},{label:I18n.t("ui.teacher_reports.student_list.sorter.name_desc"),value:"name desc"}]})};c.prototype.build=
function(){return this.buildSortBy()};a.Builders.StudentListSorter=c})(Osp,Osp.Components);
(function(a,c,f){a.Builders=a.Builders||{};a.Builders.StudentReportsPeriodFilter=f.Object.extend({build:function(){return new c.Form.List({name:"period",label:I18n.t("ui.student_reports.period_filter.label"),defaultOption:"year",format:c.Form.ListFormat.DROPDOWN,options:[{label:I18n.t("ui.student_reports.period_filter.this_year"),value:"year"},{label:I18n.t("ui.student_reports.period_filter.this_month"),value:"month"},{label:I18n.t("ui.student_reports.period_filter.this_week"),value:"week"}]})}})})(Osp,
Osp.Components,Marionette);
(function(a,c){a.Builders=a.Builders||{};var f=a.Collection.extend({initialize:function(c,d){a.Collection.prototype.initialize.apply(this,arguments);this.data=d.data},setHeader:function(a){this._header=a},getHeader:function(){return this._header},getSource:function(){return this.data}});a.Builders.StudentReportsTasksReportTable=c.Object.extend({initialize:function(a,c){c=void 0===c?{}:c;this.data=a;this.table=new f([],{data:a});this.smart=c.smart||!1;this.studentCellView=c.studentCellView||null;this.listenTo(this.data,
"sync",this.build.bind(this));this.listenTo(this.data,"sync",this.onSync.bind(this));this.listenTo(this.data,"request",this.onRequest.bind(this));this.loadingHandler=c.loadingHandler||null},onRequest:function(){this.loadingHandler&&this.loadingHandler(!0)},onSync:function(){this.loadingHandler&&this.loadingHandler(!1)},getTaskHeader:function(){return new a.Model({columns:[{name:"Task",sortColumn:"task",sortDirection:this.data.isSortedByColumn("task")?this.data.sortDirection:null}]})},getCompletedHeader:function(){return new a.Model({columns:[{name:"Completed",
sortColumn:"submitted_at",sortDirection:this.data.isSortedByColumn("submitted_at")?this.data.sortDirection:null}]})},getMarkHeader:function(){return new a.Model({dashed:!0,columns:[{name:"Mark",sortColumn:"mark",sortDirection:this.data.isSortedByColumn("mark")?this.data.sortDirection:null}]})},getPercentageMarkHeader:function(){return new a.Model({columns:[{name:"%",sortColumn:"percentage_mark",sortDirection:this.data.isSortedByColumn("percentage_mark")?this.data.sortDirection:null}]})},getDseHeader:function(){return new a.Model({columns:[{name:"DSE band",
sortColumn:"dse",sortDirection:this.data.isSortedByColumn("dse")?this.data.sortDirection:null}]})},getItemTypeHeader:function(){return new a.Model({columns:[{name:"Content type"}]})},getAssignedByHeader:function(){return new a.Model({columns:[{name:"Assigned by",sortColumn:"assigned_by",sortDirection:this.data.isSortedByColumn("assigned_by")?this.data.sortDirection:null}]})},buildHeader:function(){var c=new a.Collection;c.add(this.getTaskHeader());c.add(this.getCompletedHeader());c.add(this.getMarkHeader());
c.add(this.getPercentageMarkHeader());this.smart&&c.add(this.getDseHeader());c.add(this.getItemTypeHeader());c.add(this.getAssignedByHeader());this.table.setHeader(c);return c},getItemData:function(a){var c={mini:!0,dashed:!0,value:this.getMark(a)},e={mini:!0,value:this.getMark(a,!0)},f=[];f.push(this.getCompleted(a));f.push(c);f.push(e);this.smart&&f.push(this.getDse(a));f.push(this.getItemType(a));f.push(this.getAssignedBy(a));return f},getMarkCellValue:function(a,c){var d=parseInt(a),e=parseInt(c);
return c?d+"/"+e:a},getMark:function(a,c){c=void 0===c?!1:c;if(a.get("no_mark"))return"n/a";var d=a.get("status");return"todo"==d?"\u2718":"done"==d?"<i>Awaiting</i>":c?a.get("percentage_mark")+"%":this.getMarkCellValue(a.get("mark"),a.get("points"))},getDse:function(a){return(a=a.get("dse"))?{className:"scrollableTable__cell--dseDisplay",value:'<div class="dseBlock dseBlock--'+a+'"></div>'+a.humanize()}:"n/a"},getItemType:function(a){var c=a.get("item_type");a=a.get("content_type");"smart_task"==
c&&a&&(c=a);"other"==c&&"interactive"==a&&(c=a);return c?c.titleize():null},getAssignedBy:function(a){var c=a.get("mode"),e=a.get("item_type");return"level_up"!=e&&"reactivate"!=e&&e?"self_study"==c?"Me":a.get("assigned_by"):"Kerboodle"},getCompleted:function(a){return a.get("submitted_at")?moment(a.get("submitted_at")).format("D/M/YY"):"\u2718"},getTaskName:function(a){var c=a.get("item_type");return"level_up"==c?"Level Up: "+this.getLevelUpType(a)+" - "+a.get("task"):"smart_task"==c?""+a.get("task"):
a.get("task")},getLevelUpType:function(a){if("InterventionLevelUp"==a.get("level_up_type"))return"Secure";if("ExtensionLevelUp"==a.get("level_up_type"))return"Extend"},buildRow:function(c){var d=c.get("item_type");return(new a.Model({view:this.studentCellView,event:"view:task",meta:{id:c.id,type:c.get("item_type")},badge:"smart_task"==d?{type:"smart",text:"SMART"}:null,header:this.getTaskName(c)})).set({cells:this.getItemData(c)})},buildRows:function(){var a=this;this.table.reset(this.data.map(function(c){return a.buildRow(c)}))},
build:function(){this.buildHeader();this.buildRows();return this.table}})})(Osp,Marionette);
(function(a,c){var f=c.Form;c=function(c){return a.Builders.Filters.apply(this,arguments)||this};$jscomp.inherits(c,a.Builders.Filters);c.prototype.buildAssignedBy=function(){return new f.List({name:"assigned_by",label:I18n.t("ui.assignments.assigned_by"),defaultOption:"me",highlight:!0,options:[{label:I18n.t("ui.assignments.me"),value:"me"},{label:I18n.t("ui.assignments.all_teachers"),value:"all"}]})};c.prototype.build=function(){return this.buildFilters(this.buildReset(),this.buildAssignedBy())};
a.Builders.TeacherReportsFilters=c})(Osp,Osp.Components);
(function(a,c,f){a.Controllers=a.Controllers||{};a.Controllers.OupLens=f.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region},addBodyClass:function(){$("body").addClass("body--composed")},removeBodyClass:function(){$("body").removeClass("body--composed")},show:function(){this.addBodyClass();var a=new c.OupLens({model:this.lens});this.listenTo(a,"destroy",this.removeBodyClass);a.show(this.region)}})})(Osp,Osp.Components,Marionette);
Osp.GlobalApp=function(){var a={},c=Backbone.Radio.channel("global:public");a.showFirstLens=function(){a.Lens.showFirstLens()};a.showLens=function(c,d){c=decodeURIComponent(c);a.Lens.showLens(c,d);_.hideSpinnerAndRestoreOpacity()};a.showLensAndFilter=function(c,d,f){c=decodeURIComponent(c);a.Lens.showLensAndFilter(courseId,c,d,f)};a.showNoAccess=function(){Osp.vent.trigger("course:share_content:error")};a.onFirstLensReady=function(a){Osp.lenses.onReset(function(c){0<c.length&&(Osp.currentCourse=null,
a.call(this,c.first()))})};a.onLensReady=function(a,c){Osp.lenses.onReset(function(d){d=d.firstWith({name:a});if(null==d)throw Error("Lens with name "+a+" not found");Osp.currentCourse=null;c.call(this,d)})};a.onFirstFilterReady=function(c,d){a.onLensReady(c,function(a){a.filters().onReset(function(c){0<c.length&&d.call(this,a,c.first())})})};a.onFilterReady=function(c,d,f){a.onLensReady(c,function(a){a.filters().onReset(function(c){c=c.firstWith({name:decodeURIComponent(d)});if(null==c)throw Error("Filter with name "+
d+" not found");f.call(this,a,c)})})};var f=function(a){this.lenses=a.lenses;this.replyToRequests()};_(f.prototype).extend({hasAccessToLens:function(a){var c=$.Deferred();this.lenses.onReset(function(d){d.firstWith({type:a})?c.resolve():c.reject()});return c.promise()},replyToRequests:function(){c.reply("lenses:has_access_to",this.hasAccessToLens,this)}});Osp.app.on("before:start",function(a,c){Osp.lenses=new Osp.Lenses;new f({lenses:Osp.lenses});Osp.institution={id:c.institutionId,groups:new Osp.Groups(null,
{institution_id:c.institutionId}),users:new Osp.Users(null,{institution_id:c.institutionId})};Osp.institutionId=c.institutionId;Osp.lenses.reset(c.globalLenses)});return a}();
Osp.GlobalApp.Lens=function(){var a={},c=Backbone.Radio.channel("global.lens"),f=Osp.LensView.extend({template:"global/lens/lens-template",serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);this.model.isGlobal()&&this.model.isUsers()&&(a.name="School Users");return a},onClickLens:function(a){a.preventDefault();a.stopPropagation();this.model.isAvailable()&&Osp.vent.trigger("global:lens:show",this.model.get("name"))}}),e=Osp.LensesView.extend({childView:f}),d=Osp.View.extend({template:"global/lens/title-template",
regions:{buttons:"#buttons",search:"#search",book:"#book"}}),h=Osp.View.extend({template:"global/lens/layout-template",regions:{banner:"#banner",lenses:"#lenses",title:"#title",content:"#content"}}),k=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.reply()};_(k.prototype).extend({show:function(){this._initializeLayout();this.region.show(this.layout)},reply:function(){c.reply({"title:close":this.closeTitle,"title:search:show":this.showTitleSearch,"title:buttons:show":this.showTitleButtons,
"title:book:close":this.closeTitleBook,"content:show":this.showContent},this)},closeTitle:function(){this.layout.detachChildView("title")},showTitleSearch:function(a){this.titleLayout.showChildView("search",a)},showTitleButtons:function(a){this.titleLayout.showChildView("buttons",a)},closeTitleBook:function(){this.titleLayout.detachChildView("book")},showContent:function(a){this.layout.showChildView("content",a)},_initializeLayout:function(){this.layout=new h({model:this.lens});this.layout.on("render",
function(){this._showTitle();this._showLenses();this._showContent()},this)},_lensController:function(){return a[this.lens.get("type").camelize()].Controller},_lensLayout:function(){return a[this.lens.get("type").camelize()].Layout},_lensHasController:function(){return!_.isUndefined(this._lensController())},_lensIsActive:function(){return this.lens.isActive()},_initLensController:function(){(new (this._lensController())({lens:this.lens,title:this.layout.getRegion("title"),region:this.layout.getRegion("content")})).show()},
_initLensLayout:function(){var a=this._lensLayout();this.showChildView("content",new a({model:this.lens}))},_showContent:function(){this._lensIsActive()&&(this._lensHasController()?this._initLensController():this._initLensLayout())},_showTitle:function(){this.titleLayout=new d({model:this.lens});this.layout.showChildView("title",this.titleLayout)},_showLenses:function(){this.layout.can("show","home/lenses")&&this.layout.showChildView("lenses",new e({collection:this.lens.collection}))}});var l=function(a){(new k({region:Osp.root.getRegion("body"),
lens:a})).show()};a.showFirstLens=function(c){Osp.GlobalApp.onFirstLensReady(function(c){a.showLens(c.get("name"))})};a.showLens=function(c,d){Osp.GlobalApp.onLensReady(c,function(e){e.isHome()?(e.activate(),l(e)):(e=e.filters().first()?e.filters().first().get("name"):null,a.showLensAndFilter(c,e,d))})};a.showLensAndFilter=function(a,c,d){Osp.GlobalApp.onLensReady(a,function(a){a.activate();c&&a.filters().firstWith({name:c});Osp.state.setState("filter",decodeURIComponent(c));void 0!==d&&Osp.state.setState("page",
d);l(a)})};return a}();
Osp.GlobalApp.Lens.Home=function(){var a={},c=Backbone.Radio.channel("global.lens"),f=null,e=null,d=Osp.View.extend({template:"global/home/status-template",className:"grid grid--maxWidth",triggers:{"click .invite":"invite:click"},helpersForMessage:{invite:function(a){return'<a href="#" class="invite">'+a+"</a>"}},initialize:function(a){a=a||{};this.administrator=a.administrator;this.administratorTemplates=a.administratorTemplates;this.students=a.students;this.studentsTemplates=a.studentsTemplates;
this.listenTo(this.administrator,"change",this.render.bind(this));this.listenTo(this.students,"change",this.render.bind(this))},serializeData:function(){return _(Osp.View.prototype.serializeData.call(this)).extend({administrator:this._serializeModelWithTemplates(this.administrator,this.administratorTemplates),students:this._serializeModelWithTemplates(this.students,this.studentsTemplates)})},_serializeModelWithTemplates:function(a,c){a=a.toJSON();_(a).extend({statusClass:this._statusClassFor(a.status),
message:this._getMessageFor(a,a.status,c)});return a},_statusClassFor:function(a){return"statusCol--"+(a||"off")},_getMessageFor:function(a,c,d){return c?_.template(d[c])(_({}).extend(a,this.helpersForMessage)):"&nbsp;"}}),h=Osp.View.extend({template:"global/home/favourites-empty-template",tagName:"li",className:"helpCard helpCard--fixedHeight",triggers:{'click a[data-action="showAvailableCourses"]':"manage:toggle"}}),k=Osp.View.extend({template:"global/home/course-template",tagName:"li",className:"card link-card",
triggers:{"click .favouriteToggle":"favourite:change"},events:{click:"onClick","focus .card__link":"onFocusCard","focusout .card__link":"onFocusOutCard"},modelEvents:{change:"render"},templateContext:function(){return{getCourseLink:function(){return"courses/"+this.id},getUniqueIdentifier:function(){return"name_"+this.id}}},onClick:function(a){a.preventDefault();this.isFavouriteItem(a.target)||Osp.Routing.showRoute(this.getUrl(a.target))},onKeypress:function(a){if(13===(a.keyCode||a.which))this.onClick(a)},
onFocusCard:function(){this.$el.css("box-shadow","0px 0px 0px 1px #fff, 0px 0px 0px 2px #000")},onFocusOutCard:function(){this.$el.css("box-shadow","none")},isFavouriteItem:function(a){return $(a).hasClass("favourite")},getUrl:function(a){return $(a).is("a")?$(a).attr("href"):this._extractUrl()},serializeData:function(){return _.extend({},Osp.View.prototype.serializeData.call(this),{url:this._extractUrl()})},_extractUrl:function(){return"courses/"+this.model.id},onRender:function(){this.model.get("hidden")?
this.$el.hide():this.$el.show()}});k=Osp.CollectionView.extend({childView:k,tagName:"ol",className:"cardGrid",collectionEvents:{sort:"render"},getViewForModel:function(a){return this.children.findByModel(a)},getViewsForModels:function(a){return _(a).map(function(a){return this.getViewForModel(a)},this)}});var l=k.extend({emptyView:h}),m=k.extend({}),n=Osp.View.extend({template:"global/home/layout-template",templateContext:{isManagingActive:function(){return Osp.profile.getProperty("library_managing",
!0)},showActivateProductButton:function(){return(new Osp.TokenAccessService).isTokenAccessUser()}},ui:{filtersToggler:".filtersToggle",libraryToggler:".manageLibraryToggle input",library:".library",addBookBtn:".add-book-btn"},regions:{status:".library__status",favourites:".library__favourites .section__body",courses:".library__courses .section__body",filters:".filters",activateProductPanel:".activateProductPanel__container"},triggers:{"click @ui.libraryToggler":{event:"manage:toggle",preventDefault:!1},
"click @ui.filtersToggler":"filters:toggle","click @ui.addBookBtn":"addBook"},events:{"keydown @ui.libraryToggler":"onKeyDown"},toggleFavouritesStyle:function(a){var c=this.$(".library__favourites"),d=this.$(".library__status");Osp.profile.getProperty("library_managing",!0);c.toggleClass("library__favourites--empty",a);this.$().ready(function(){var a=Osp.profile.isTeacher()?d.outerHeight():0;c.css("--status-height",a+"px")})},onKeyDown:function(a){"Enter"===a.code&&a.target.click()}}),q=Mn.Object.extend({initialize:function(a){this.courses=
a},buildSortBy:function(){return new Osp.Model({name:"sort_by",label:I18n.t("ui.homepage.filters.sort_by"),defaultOption:"name_asc",options:[{label:I18n.t("ui.homepage.filters.name_asc"),value:"name_asc"},{label:I18n.t("ui.homepage.filters.name_desc"),value:"name_desc"}]})},buildSubjectOptions:function(){var a=_.chain(this.courses.pluck("subject")).uniq().compact().sortBy(function(a){return a.toLowerCase()}).value();a=_(a).map(function(a){return{label:a,value:a}});a.unshift({label:I18n.t("ui.homepage.filters.all"),
value:"all"});return a},buildSubject:function(){var a={name:"subject",label:I18n.t("ui.homepage.filters.subject"),defaultOption:"all",options:this.buildSubjectOptions()};return this.subject=new Osp.Model(a)},rebuildSubject:function(){this.subject.set("options",this.buildSubjectOptions())},build:function(){return new Osp.Collection([this.buildSortBy(),this.buildSubject()])}});a.Controller=function(){var a,h=function(a){a=a||{};this.region=a.region;this.mgr=Osp.coursesManager};_(h.prototype).extend({show:function(){this.mode=
this._getScreenMode();this.layout=(new n).on("render",_.bind(function(){this._showTitle();this._showStatus();this._showFavourites();this._showNonFavourites();this._showFilters();Backbone.Radio.channel("root").trigger("title:change")},this));this.layout.once("render",function(){$("body").addClass("body--home body--navigationDisabled")}.bind(this));this._attachHandlers();this.region.show(this.layout);this.mgr.fetch().done(this._onCoursesFetched.bind(this))},_attachHandlers:function(){var a=this,c=this._onWindowResize.bind(this);
this.layout.on("manage:toggle",this._toggleManage.bind(this));this.layout.on("filters:toggle",this._toggleFilters.bind(this));this.layout.on("addBook",function(){return a._onActivateProduct()});window.addEventListener("resize",c);this.layout.on("destroy",function(){$("body").removeClass("body--home body--navigationDisabled");window.removeEventListener("resize",c)});var d=this.mgr.getFavouriteCoursesCollection();this.layout.listenTo(d,"all",function(){this.layout.toggleFavouritesStyle(d.isEmpty())}.bind(this))},
_getScreenMode:function(){return 1024>$(window).outerWidth()?"mobile":"desktop"},_showTitle:function(){c.request("title:close")},_showStatus:function(){if(Osp.profile.isTeacher()&&!Osp.profile.get("self_study")){var a=new d({students:this._getStudentsStatus(),administrator:this._getAdministratorStatus(),studentsTemplates:gon.studentsStatusTemplates,administratorTemplates:gon.administratorStatusTemplates});a.on("invite:click",function(){Osp.CourseApp.Lens.Users.Invitations.showAdminDialog()},this);
this.layout.showChildView("status",a);this._fetchStatus()}},_showFavourites:function(){var a=this.mgr.getNonFavouriteCoursesCollection(),c=this.mgr.getFavouriteCoursesCollection(),d=this.mgr.getFavouriteCoursesManager(),e=new l({collection:c});e.on("childview:manage:toggle",this._toggleManage.bind(this));e.on("childview:favourite:change",function(e){e=e.model;e.get("purchased")&&(d.unmark(e,{noSpinner:!0}),e.unmarkAsFavourite(),e=c.nonFavourites(),c.remove(e),a.add(e))},this);this.layout.showChildView("favourites",
e)},_showNonFavourites:function(){var a=this.mgr.getNonFavouriteCoursesCollection(),c=this.mgr.getFavouriteCoursesCollection(),d=this.mgr.getFavouriteCoursesManager(),e=new m({collection:a});e.on("childview:favourite:change",function(e){e=e.model;e.get("purchased")&&(d.mark(e,{noSpinner:!0}),e.markAsFavourite(),e=a.favourites(),a.remove(e),c.add(e))},this);this.layout.showChildView("courses",e)},_getFiltersBuilder:function(){e||(e=new q(this.mgr.getNonFavouriteCoursesCollection()));return e},_getFilters:function(){f||
(f=this._getFiltersBuilder().build(),f.findWhere({name:"sort_by"}).on("change:selected",this._onChangeSortBy.bind(this)),f.findWhere({name:"subject"}).on("change:selected",this._onChangeSubject.bind(this)));return f},_rebuildSubjectFilter:function(){this._getFiltersBuilder().rebuildSubject()},_showMobileFilters:function(){var a=new Osp.Components.ListFilters({filters:this._getFilters(),format:Osp.Components.ListFilters.Format.ACCORDION});this.sidePanel=new Osp.Components.SidePanel({title:I18n.t("ui.homepage.filters.title"),
component:a,className:"sidepanel sidepanel--filters"});this.sidePanel.show(this.layout.getRegion("filters"))},_showDesktopFilters:function(){(new Osp.Components.ListFilters({className:"header__filters",filters:this._getFilters()})).show(this.layout.getRegion("filters"))},_showFilters:function(){"mobile"===this.mode?this._showMobileFilters():this._showDesktopFilters()},_showCourse:function(a){a.get("purchased")?Osp.vent.trigger("course:show",_("%d%s").sprintf(a.get("id"),a.get("first_available_lens_uri"))):
this._showUnpurchasedDialog(a)},_showUnpurchasedDialog:function(a){(new Osp.UnpurchasedDialog(_(a.attributes).extend({showCancel:!0}))).render()},_fetchStatus:function(a){return this._getInstitutionStatus().fetch({reset:!0})},_getStudentsStatus:function(){return this._getInstitutionStatus().students},_getAdministratorStatus:function(){return this._getInstitutionStatus().administrator},_getInstitutionStatus:function(){return a||(a=new Osp.InstitutionStatus)},_toggleManage:function(){this.layout.getUI("library").toggleClass("library--managing");
Osp.profile.saveProperty("library_managing",this.layout.getUI("libraryToggler").is(":checked"));var a=this.mgr.getFavouriteCoursesCollection().isEmpty();this.layout.toggleFavouritesStyle(a)},_toggleFilters:function(){this.sidePanel.toggle()},_onActivateProduct:function(){var a=new Osp.Components.ActivateProduct({className:"sidepanel activateProductPanel"});a.show(this.layout.getRegion("activateProductPanel"));_.delay(function(){return a.toggle()},50)},_onWindowResize:function(){this._getScreenMode()!==
this.mode&&(this.mode=this._getScreenMode(),this._showFilters())},_onChangeSortBy:function(a,c){a=(c||a.get("defaultOption")).split("_");this.mgr.sortNonFavouriteBy(a[0],a[1])},_onChangeSubject:function(a,c){var d=c||a.get("defaultOption");this.mgr.getNonFavouriteCoursesCollection().each(function(a){a.set("hidden","all"!==d&&a.get("subject")!==d)})},_onCoursesFetched:function(){this._rebuildSubjectFilter()}});return h}();return a}();
Osp.GlobalApp.Lens.Markbook=function(){var a={},c=Backbone.Radio.channel("global.lens"),f=Osp.View.extend({template:"global/markbook/main-template"});a.Layout=Osp.View.extend({template:"global/markbook/layout-template",regions:{main:"#main"},onRender:function(){this.showChildView("main",new f({model:this.model}))}});a.showMarkbook=function(e){Osp.GlobalApp.onLensReady(e,function(d){c.request("content:show",new a.Layout({model:d}))})};return a}();
Osp.GlobalApp.Lens.Users=function(){var a={},c=Backbone.Radio.channel("global.lens"),f=Backbone.Radio.channel("global.lens.users"),e=Osp.View.extend({template:"global/users/layout-template",regions:{tree:"#tree",list:"#list"}});a.Controller=function(){var d=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.reply()};_(d.prototype).extend({show:function(){this.layout=new e({model:this.lens});this.layout.on("render",_.bind(function(){this._showTitle();this._showTree();this._changeHtmlTitle()},
this));this.region.show(this.layout)},reply:function(){f.reply({"list:show":this.showList},this)},showList:function(a){this.layout.showChildView("list",a)},_canShowButtons:function(){return this.layout.can("show","users/buttons")},_showTree:function(){this.layout.showChildView("tree",new a.Tree.Layout({lens:this.lens}))},_initButtonsView:function(){return new Osp.ButtonsLayout({buttons:Osp.Buttons.createCollection(Osp.config.buttons.global.users),lens:this.lens})},_initSearchView:function(){return new Osp.SearchView({lens:this.lens})},
_showTitle:function(){this._canShowButtons()&&c.request("title:buttons:show",this._initButtonsView());c.request("title:search:show",this._initSearchView());c.request("title:book:close")},_changeHtmlTitle:function(){Backbone.Radio.channel("root").trigger("title:change","School Users")}});return d}();a.showFirstFilter=function(c){a.List.showFirstFilter(c)};a.showFilter=function(c,e,f){a.List.showFilter(c,e,f)};a.showGroup=function(c,e,f){a.List.showGroup(c,e,f)};a.showSearch=function(c,e){a.List.showSearch(c,
e)};return a}();"use strict";
Osp.GlobalApp.Lens.Users.Delete=function(){return{showDialog:function(a){(new Osp.AlertDialog({title:I18n.t("ui.delete.user.destroy.title"),message:I18n.t("ui.delete.user.destroy.warning"),submitCallback:function(){$.ajax("/api/institutions/"+Osp.institution.id+"/users/destroy_all",{type:"DELETE",data:{user_ids:_(a).map(function(a){return a.id})}}).done(function(){Osp.state.getLens().filters().refreshRelatedCollections();Osp.institution.groups.refreshRelatedCollections();Osp.vent.trigger("search:refresh")})},
className:"confirm-dialog",showCancel:!0})).render()}}}();
Osp.GlobalApp.Lens.Users.Manage=function(){var a={};a.Controller=function(){var c=function(){};_(c.prototype).extend({showDialog:function(a){a[0].isTeacher()?this._showTeacherDialog(a):this._showStudentDialog(a)},_showTeacherDialog:function(a){this._getTeacherController().showDialog(a)},_showStudentDialog:function(c){a.Student.showDialog(c)},_getTeacherController:function(){return this._teacherController||(this._teacherController=new a.Teacher.Controller)}});return c}();return a}();
Osp.GlobalApp.Lens.Users.Manage.Teacher=function(){var a={},c=function(){var a=function(a){a=a||{};this.courses=a.courses;this.selections=a.selections;this.pairs=a.pairs.indexByPairedCourseId()};_(a.prototype).extend(Backbone.Events,{select:function(a){this.selections.add(a);this.selections.add(this._findPairedCourseFor(a));this.trigger("change")},unselect:function(a){this.selections.remove(a);this.selections.remove(this._findPairedCourseFor(a));this.trigger("change")},reset:function(a){this.selections.reset(a);
this.trigger("reset")},contains:function(a){return!!this.selections.get(a.get("id"))},_findPairedCourseFor:function(a){return(a=this.pairs[a.get("parent_id")])&&this._findPairInCourses(a)},_findPairInCourses:function(a){return this.courses.find(function(c){return c.get("parent_id")===a.get("id")})}});return a}(),f={createFromPairedCourses:function(a,c){var d=[];a=_(a).toArray();for(c=c.indexByPairedCourseId();!_(a).isEmpty();){var e=a.shift();d.push(e);if(e=c[e.get("parent_id")])if(e=this._findPairInCourses(e,
a))a.splice(_(a).indexOf(e),1),d.push(e)}return d},_findPairInCourses:function(a,c){return _(c).find(function(c){return c.get("parent_id")===a.get("id")})}},e=Osp.View.extend({tagName:"li",template:"global/users/manage/teacher/course-template",events:{"change input[type=checkbox]":"onChangeCourse"},initialize:function(a){this.selected=this.options.selected;this.listenTo(this.selected,"change",this.render.bind(this));this.listenTo(this.selected,"reset",this.render.bind(this))},serializeData:function(){return _(Osp.View.prototype.serializeData.call(this)).extend({checked:this._isSelected()})},
onChangeCourse:function(a){$(a.target).is(":checked")?this.selected.select(this.model):this.selected.unselect(this.model)},_isSelected:function(){return!!this.selected.contains(this.model)}}),d=Osp.CollectionView.extend({tagName:"ul",className:"nav inline-list",initialize:function(a){a=a||{};this.selected=a.selected},childView:e,buildChildView:function(a,c){return new c({model:a,selected:this.selected})}}),h=Osp.FormView.extend({rawErrorFor:["email"],template:"global/users/manage/teacher/form-template",
initialize:function(){Osp.FormView.prototype.initialize.apply(this,arguments);this.listenTo(Osp.vent,"global:users:manage:submit",this.onClickSubmit.bind(this))},onClickSubmit:function(){this.trigger("save");Osp.FormView.prototype.onClickSubmit.apply(this,arguments)},onSaveSuccess:function(){this.trigger("save:success")}}),k=Osp.DialogLayout.extend({template:"global/users/manage/teacher/layout-template",templateContext:function(){return{canShowCourses:_.bind(function(){return!this.model.isNew()},
this)}},events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),regions:{form:"#teacher-form",courses:"#teacher-courses-content"},onClickSubmit:function(a){Osp.vent.trigger("global:users:manage:submit",a)}});a.Controller=function(){var a=function(){};_(a.prototype).extend({showDialog:function(a){var c=this._editOrInitializeTeacher(a).clone();this.dialog=new k({className:"manage-teacher-dialog",resizable:!1,model:c});this.dialog.on("render",_.bind(function(){this._showForm(c);
this._showCourses(c)},this));this.dialog.render()},_showForm:function(a){var c=new h({model:a});c.on("save",_.bind(function(){var c=this._getSelectionsCollection();a.set("client_course_ids",c.pluck("id"))},this));c.on("save:success",function(){Osp.state.getLens().filters().refreshRelatedCollections();$(".manage-teacher-dialog").modal("hide");Osp.vent.trigger("search:refresh")});this.dialog.showChildView("form",c)},_showCourses:function(a){var c=this._getCoursesCollection();this._fetchSelectedCoursesForTeacher(a).then(_.bind(function(a){this.dialog.showChildView("courses",
new d({selected:a,collection:c}));this._populateCoursesCollection()},this))},_populateCoursesCollection:function(){this._getCoursesCollection().reset(f.createFromPairedCourses(Osp.courses,Osp.pairedCourses))},_fetchSelectedCoursesForTeacher:function(a){var d=new $.Deferred,e=Osp.pairedCourses,f=Osp.courses,h=this._getSelectionsCollection();a.pCourses().then(function(a){var k=new c({pairs:e,courses:f,selections:h});k.reset(a.toArray());d.resolve(k)});return d.promise()},_editOrInitializeTeacher:function(a){return a?
a[0]:this._buildNewTeacher()},_buildNewTeacher:function(){return new Osp.User({type:"Teacher"})},_getCoursesCollection:function(){return this._coursesCollection||(this._coursesCollection=new Osp.Collection(Osp.courses.models))},_getSelectionsCollection:function(){return this._selectedCollections||(this._selectedCollections=new Osp.Collection)}});return a}();return a}();"use strict";
Osp.GlobalApp.Lens.Users.Manage.Student=function(){var a=Backbone.Radio.channel("global:users:manage:student"),c=Osp.FormView.extend({rawErrorFor:["reset_password","email"],template:"global/users/manage/student/form-template",templateContext:_.extend({showPasswordResetOption:function(){return!this.isNew&&this.managed}},Backbone.Marionette.View.prototype.templateContext),events:_.extend({"click input[name=reset_password]":"onClickResetPassword"},Osp.FormView.prototype.events),onClickResetPassword:function(c){$(c.currentTarget).is(":checked")&&
a.request("password:reset")},serializeData:function(){return _.extend({isNew:this.model.isNew()},Osp.FormView.prototype.serializeData.call(this))}}),f=Osp.DialogLayout.extend({template:"global/users/manage/student/layout-template",events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),regions:{form:"#user-fields",groups:"#groups-tree-content"},onClickSubmit:function(c){c.preventDefault();a.request("save")},displayGroupsError:function(a){this.$("#groups-tree").append("<div class='control-group error'><ul class='help-block'><li>"+
a+"</li></ul></div>").find("#groups-tree-content").addClass("error")},clearError:function(){this.$("#groups-tree-content").removeClass("error")}}),e=function(){var a=function(a){this.context=a};_.extend(a.prototype,{onChangeActive:function(){this.isActivated()?this.activate():this.deactivate()},isActivated:function(){return this.context.model.get(this.context._activeAttr)},activate:function(){this.changeCheckbox(!0);this.changeParent(!0)},deactivate:function(){this.changeCheckbox(!1);!this.anySiblingActive()&&
this.changeParent(!1);this.deactivateChilds()},deactivateChilds:function(){this.context.collection&&this.context.collection.each(function(a){a.set(this.context._activeAttr,!1)},this)},changeParent:function(a){this.parent()&&this.parent().set(this.context._activeAttr,a)},changeCheckbox:function(a){this.context.$(this.context.checkboxSelector).prop("checked",a)},anySiblingActive:function(){return this.context.model.collection&&this.context.model.collection.areAny(this.context._activeAttr)},parent:function(){return this.context.model.collection.parent()}});
return{Observer:_.inherits(Osp.CheckboxSelectionObserver,{onChangeActive:function(){this.manager&&this.manager.onChangeActive()}}),View:Osp.TreeCheckboxView.extend({onRender:function(){Osp.TreeCheckboxView.prototype.onRender.apply(this);this.$(this.checkboxSelector).prop("checked",this._checked);this.manager=new a(this)}})}}(),d=function(a){this.cloneOrInitializeStudent(a?_(a).first():null);_.bindAll(this,"onLayoutAndGroupsReady","passwordReset","save","success","fail")};_.extend(d.prototype,{cloneOrInitializeStudent:function(a){return a?
(this.original=a,this.student=a.clone()):this.student=new Osp.User({type:"Student"})},show:function(){$.when(this.layoutFactory().render(),this.initializeAndFetchGroups()).done(this.onLayoutAndGroupsReady);this.complyWithCommands()},complyWithCommands:function(){a.reply({"password:reset":this.passwordReset,save:this.save},this)},layoutFactory:function(){return this.layout=new f({className:"manage-student-dialog big",resizable:!1,student:this.student})},formFactory:function(){return this.form=new c({model:this.student})},
groupsTreeFactory:function(){return new Osp.TreeRootView({childView:e.View,collection:this.groups,checked_ids:this.student.get("group_ids"),lens:Osp.state.getLens(),observer:e.Observer,activeAttr:"activeUserDialog",checkboxName:"user[group_ids][]"})},initializeAndFetchGroups:function(){this.groups=new Osp.Groups(null,{institution_id:gon.institutionId});return this.groups.fetch()},onLayoutAndGroupsReady:function(){this.layout.showChildView("form",this.formFactory());this.layout.showChildView("groups",
this.groupsTreeFactory())},passwordReset:function(){(new Osp.AlertDialog({title:I18n.t("ui.users.reset_password.title"),message:I18n.t("ui.users.reset_password.message_edit"),submitText:I18n.t("ui.users.reset_password.reset")})).render()},getCheckedGroups:function(){var a=[],c=function(d){d.each(function(d){d.get("activeUserDialog")&&a.push(d.id);d.children()&&c(d.children())})};c(this.groups);return a},save:function(){this.layout.clearError();this.form.clearErrors();this.student.set("global_group_ids",
this.getCheckedGroups());this.student.save().done(this.success).fail(this.fail)},success:function(){Osp.institution.groups.refreshRelatedCollections();Osp.state.getLens().filters().refreshRelatedCollections();this.original&&this.original.set(this.student.toJSON());this.layout.hideModal();Osp.vent.trigger("search:refresh")},fail:function(a){a=JSON.parse(a.responseText);_(a).has("global_groups")&&this.layout.displayGroupsError(a.global_groups);this.form.displayErrors(a,void 0,this.student)}});return{showDialog:function(a){(new d(a)).show()}}}();
"use strict";
Osp.GlobalApp.Lens.Users.Tree=function(){var a={};a.Layout=Osp.View.extend({template:"global/users/tree/layout-template",regions:{filters:"#filters",groups:"#groups"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens},onRender:function(){var a=this._lens,f=a.get("name"),e=a.filters();Osp.institution.groups.fetch({reset:!0});var d=null;Osp.state.hasState("filter")&&(d=Osp.state.getFilter().get("name"));var h=null;Osp.state.hasState("group")&&(h=Osp.state.getGroup().id);
this.showChildView("groups",new Osp.TreeRootView({collection:Osp.institution.groups,lens:a,observer:Osp.NavigationObserver}));this.showChildView("filters",new Osp.FiltersView({collection:e,lens:a}));null!=h?Osp.vent.trigger("global:users:node:show",null,f,h):Osp.vent.trigger("global:users:filter:show",null,f,d)}});return a}();
Osp.GlobalApp.Lens.Users.List=function(){var a={},c=Backbone.Radio.channel("global.lens.users");a.HeadView=Osp.TableHeadView.extend({template:"global/users/list/head-template"});a.ContentView=Osp.ListContentView.extend({template:"global/users/list/item-template"});a.FootView=Osp.FootView.extend({template:"common/users_lens_no_contents-template",serializeData:function(){return{message:I18n.t("ui.common.users_lens_nocontents")}}});a.NumberedPaginationView=Osp.NumberedPaginationView.extend({perPageOptions:[20,
50,100,"all"]});a.UsersView=Osp.ListView.extend({headView:a.HeadView,footView:a.FootView,childView:a.ContentView,collectionEvents:_.extend({request:"onRequest","all:error":"onAllRequestError"},Osp.ListView.prototype.collectionEvents),removeError:function(){this.$(".timeout-error").length&&(this.$(".timeout-error").remove(),this.render())},onRequest:function(){this.removeError()},onAllRequestError:function(){$("<div>").addClass("alert alert-error timeout-error").text(I18n.t("ui.users.errors.timeout")).prepend('<button class="close">&times;</button>').prependTo(this.$el).find("button.close").click(_.bind(this.removeError,
this))}});a.Layout=Osp.View.extend({template:"global/users/list/layout-template",events:{"click .info-icon":"onClickInfo"},regions:{actions:"#actions",users:"#users",pagination:".pagination-wrapper"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens;this._users=a.users},onClickInfo:function(a){a.preventDefault();a.stopPropagation();(new Osp.InfoIconAutoDialog({icon:this.$(".info-icon"),header:I18n.t("ui.users.info.admin.header"),text_markup:I18n.t("ui.users.info.admin.message")})).render()},
schoolAllowsRedeemAccessCodesByUser:function(){return"by_user"==Osp.profile.get("school").allow_redeem_access_codes},onRender:function(){var c=this._users,d=this._lens;d.get("name");var f=Osp.profile.get("type"),k=new Osp.Actions(null,{targets:c,lens:d});k.reset(Osp.config.actions[f].users);this.schoolAllowsRedeemAccessCodesByUser()&&(k.models=k.filter(function(a){return a.get("selfStudy")}));this.showChildView("actions",new Osp.ActionsView({collection:k}));this.showChildView("users",new a.UsersView({lens:d,
collection:c}));this.showChildView("pagination",new a.NumberedPaginationView({lens:d,collection:c}))}});var f=function(e,d){c.request("list:show",new a.Layout({lens:e,users:d}))};a.showFirstFilter=function(c){Osp.GlobalApp.onFirstFilterReady(c,function(c,e){a.showFilter(c.get("name"),e.get("name"))})};a.showFilter=function(a,c,h){Osp.GlobalApp.onFilterReady(a,c,function(a,d){f(a,d.users(c,h))})};a.showGroup=function(a,c,h){a=Osp.institution.groups.getRecursive(c);a.expandAndActivate();f(Osp.state.getLens(),
a.paginatedUsers())};a.showSearch=function(a,c){f(c,a)};return a}();
Osp.GlobalApp.Lens.Settings=function(){var a=Backbone.Radio.channel("settings"),c=Osp.View.extend({template:"global/settings/title-template"}),f=Osp.View.extend({template:"global/settings/layout-template",modelEvents:{change:"render"},events:{"click .download":"onDownloadClick","click .upload":"onUploadClick","click .remove":"onRemoveClick","click .time_zone":"onTimeZoneClick"},templateContext:_.extend({hasLogo:function(){return this.logo},timeZone:function(){return this.time_zone_name?_.template("(UTC {{offset}}) {{name}}")({offset:this.time_zone_offset,
name:this.time_zone_name}):I18n.t("ui.settings.time_zone.default")}},Backbone.Marionette.View.prototype.templateContext),onDownloadClick:function(a){a.preventDefault();window.open($(a.target).attr("href"))},onUploadClick:function(c){c.preventDefault();a.request("upload_logo",this.model)},onRemoveClick:function(c){c.preventDefault();a.request("remove_logo")},onTimeZoneClick:function(c){c.preventDefault();a.request("time_zone")}}),e=function(c){this.model=Osp.client;this.lens=c.lens;this.region=c.region;
this.title=c.title;a.reply({remove_logo:this.removeLogoConfirm,time_zone:this.editTimeZone},this)};_(e.prototype).extend({show:function(){this.showTitle();this.showLayout();this.changeHtmlTitle()},showTitle:function(){this.title.show(new c({model:this.lens}))},showLayout:function(){this.region.show(new f({model:this.model}))},removeLogoConfirm:function(){(new Osp.AlertDialog({title:I18n.t("ui.settings.remove_logo.title"),message:I18n.t("ui.settings.remove_logo.message"),className:"confirmation-dialog",
resizable:!1,submitCallback:_.bind(this.removeLogo,this)})).render()},removeLogo:function(){this.clone().save({logo:null})},editTimeZone:function(){a.request("time_zone:show",this.clone())},clone:function(){return this.model.clone().on("sync",this.copyWhenCloneSaveDone,this)},copyWhenCloneSaveDone:function(a){this.model.set(a.toJSON());a.off("sync",this.copyWhenCloneSaveDone,this)},changeHtmlTitle:function(){Backbone.Radio.channel("root").trigger("title:change","Settings")}});Osp.app.on("before:start",
function(a,c){Osp.client=new Osp.Client(c.client)});return{Controller:e}}();
!function(){var a=Backbone.Radio.channel("settings"),c=Osp.FormView.extend({template:"global/settings/dialog/upload/form-template",events:{"click button#browse-files:not(.disabled)":"onClickBrowseFiles"},initialize:function(a){Osp.FormView.prototype.initialize.apply(this,arguments);this.uploadFile=null;this.listenTo(Osp.vent,"settings:upload:form:submit",this.onClickSubmit.bind(this))},onClickBrowseFiles:function(a){this.$el.find("input:file").trigger("click");return!1},onClickSubmit:function(a){a.preventDefault();
a.stopPropagation();this._isSubmitDisabled()||(this._disableSubmit(),this.clearErrors(),this._addCsrfTokenToForm(),this.uploadFile.submit())},onRender:function(){Osp.FormView.prototype.onRender.call(this);this._initUpload()},_initUpload:function(){var c=this;this.$("form").fileupload({url:"/api/clients/update_logo",type:"POST",fileInput:this.$("input[type=file]"),replaceFileInput:!1,dataType:"json",add:function(a,d){a=[];c._removeFileErrors();c._maxSizeExceeded(d)&&a.push(I18n.t("ui.upload.errors.max_size"));
c._isForbiddenFormat(d)&&a.push(I18n.t("ui.upload.errors.content"));if(0<a.length)c._showFileErrors(a),c._disableSubmit(),c.uploadFile=null;else return c.uploadFile=d,c._enableSubmit(),!1},progress:function(a,c){$(".progress.hide").removeClass("hide");$(".progress .bar").css("width",parseInt(c.loaded/c.total*100,10)+"%")},fail:function(a,d){$(".progress").addClass("hide");$("input#upload-file-btn").removeClass("disabled");c.displayErrors(JSON.parse(d.jqXHR.responseText));return!1},done:function(c,
d){a.request("upload_logo:complete",d.result);return!1}})},_addCsrfTokenToForm:function(){var a=$('meta[name="csrf-token"]').attr("content");this.$("form").append($('<input type="hidden" name="authenticity_token" value="'+a+'">'))},_isSubmitDisabled:function(){return $("input[type=submit]").hasClass("disabled")},_disableSubmit:function(){$("input[type=submit]").addClass("disabled")},_enableSubmit:function(){$("input[type=submit]").removeClass("disabled")},_isForbiddenFormat:function(a){a=a.files[0].name.split(".").pop().toLowerCase();
return"image"!=gon.formatFormats[a]},_maxSizeExceeded:function(a){return 5E6<(a&&a.files[0].size||0)},_removeFileErrors:function(){this.$("#upload-file").removeClass("error");this.$("#upload-file").children(".controls").children("ul.help-block").remove()},_showFileErrors:function(a){var c=$("<ul class='help-block'></ul>");this.$("#upload-file").children(".controls").append(c);_(a).each(function(a){c.append("<li>"+a+"</li>")});this.$("#upload-file").addClass("error");this.$("input[name=file_name]").val("")}}),
f=Osp.DialogLayout.extend({template:"global/settings/dialog/upload/layout-template",className:"big upload-dialog modal fade",regions:{form:"#upload-form"},events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),onRender:function(){this.$("input[type=submit]").addClass("disabled");Osp.DialogLayout.prototype.onRender.apply(this,arguments);this.showChildView("form",new c)},onClickSubmit:function(a){Osp.vent.trigger("settings:upload:form:submit",a)}}),e=function(){a.reply({upload_logo:this.show,
"upload_logo:complete":this.complete},this)};_(e.prototype).extend({show:function(a){this.model=a;this.layout=new f({model:a});this.layout.render()},complete:function(a){this.model.set(a);this.layout.hideModal()}});Osp.app.on("before:start",function(){new e})}();
!function(){var a=Backbone.Radio.channel("settings"),c={groupTmpl:_.template('<optgroup label="UTC {{offset}}">{[group]}</optgroup>'),tmpl:_.template('<option value="{{name}}" {{ selected ? "selected" : "" }}>{{name}}</option>'),groupTimeZonesByOffset:function(){if(this.grouped)return this.grouped;this.grouped={};_(gon.timeZones).each(function(a){!this.grouped[a.offset]&&(this.grouped[a.offset]=[]);this.grouped[a.offset].push(a)},this);return this.grouped},groupHtml:function(a){return _.reduce(a,
function(a,c){return a+this.tmpl({name:c.name,selected:this.selected===c.name})},"",this)},renderGroup:function(a,c){return this.groupTmpl({offset:a,group:this.groupHtml(c)})},render:function(a){this.selected=a;return _.reduce(this.groupTimeZonesByOffset(),function(a,c,d){return a+this.renderGroup(d,c)},"",this)}},f=Osp.FormView.extend({template:"global/settings/dialog/time_zone/form-template",templateContext:_.extend({timeZones:function(){return c.render(this.time_zone_name)}},Backbone.Marionette.View.prototype.templateContext)}),
e=Osp.DialogLayout.extend({template:"global/settings/dialog/time_zone/layout-template",regions:{form:"#time_zone-form"},events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);this.showChildView("form",new f({model:this.model}))},onClickSubmit:function(c){c.preventDefault();a.request("time_zone:save")}}),d=function(){a.reply({"time_zone:show":this.show,"time_zone:save":this.save},
this)};_(d.prototype).extend({show:function(a){this.model=a;this.layout=new e({model:a});this.layout.render()},save:function(){this.model.save().done(_.bind(this.onSaveDone,this))},onSaveDone:function(){this.layout.hideModal()}});Osp.app.on("before:start",function(){new d})}();"use strict";
Osp.GlobalApp.Lens.Users.CSV=function(){var a=Osp.DialogLayout.extend({template:"global/users/csv-template",templateContext:_.extend({message:function(){var a={email:Osp.profile.get("email")};return gon.csvImportBodyMessage?I18n.interpolate(gon.csvImportBodyMessage,a):I18n.t("ui.users.csv.import.body",a)}},Backbone.Marionette.View.prototype.templateContext),events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),initialize:function(){Osp.DialogLayout.prototype.initialize.apply(this,
arguments);this.fileImported=!1;this.fileData=null},onClickSubmit:function(a){a.preventDefault();a.stopPropagation();this._submitIsDisabled()||(this._disableSubmit(),this.fileImported?this.hideModal():(this._addCsrfTokenToForm(),this.fileData.submit()))},onDomRefresh:function(){Osp.DialogLayout.prototype.onDomRefresh.call(this);this._initializeFileUpload()},_addCsrfTokenToForm:function(){var a=$('meta[name="csrf-token"]').attr("content");this.$("form").append($('<input type="hidden" name="authenticity_token" value="'+
a+'">'))},_addFile:function(a,c){this.fileData=c;this._enableSubmit()},_cancelImport:function(a,c){this.fileImported=!1;this._showErrorMessage('<p class="help-block">'+I18n.t("ui.users.csv.import.generic_error")+"</p>");this._enableSubmit();return!1},_disableSubmit:function(){this.$("input[type=submit]").addClass("disabled")},_enableSubmit:function(){this.$("input[type=submit]").removeClass("disabled")},_initializeFileUpload:function(){this.$("form").fileupload({url:"/api/users/upload_csv",type:"POST",
fileInput:this.$("input[type=file]"),replaceFileInput:!1,add:_.bind(this._addFile,this),done:_.bind(this._uploadSuccess,this),fail:_.bind(this._cancelImport,this),always:_.bind(this._hideSpinner,this)})},_showDoneMessage:function(){this.$(".modal-body").html(I18n.t("ui.users.csv.import.imported_message",{email:Osp.profile.get("email")}));this.$("a.cancel").remove();this.$("input[type=submit]").val(I18n.t("ui.common.ok"));this.$("input[type=submit]").removeClass("disabled")},_showErrorMessage:function(a){this.$("#upload-file").children(".controls").append(a);
this.$("#upload-file").addClass("error")},_submitIsDisabled:function(){return this.$("input[type=submit]").hasClass("disabled")},_uploadSuccess:function(a,c){this.fileImported=!0;this._showDoneMessage();return!1},_hideSpinner:function(){_.hideSpinnerAndRestoreOpacity()}}),c=Osp.DialogLayout.extend({template:"global/users/csv_template-template",templateContext:_.extend({message:function(){return gon.csvTemplateBodyMessage?gon.csvTemplateBodyMessage:I18n.t("ui.users.csv.template.body")}},Backbone.Marionette.View.prototype.templateContext),
events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),onClickSubmit:function(a){a.preventDefault();a.stopPropagation();window.open("/templates/CSV_Template.csv");this.hideModal()}}),f=function(a){return _.isNull(a)?"":a.id},e=function(a){return _.isNull(a)?"":a.get("name")};return{importFile:function(){(new a({className:"csv-dialog",until_footer:10})).render()},downloadCvsTemplate:function(){(new c({className:"csv-dialog",until_footer:10})).render()},exportUsers:function(a,
c,k){window.open("/api/institutions/"+a.id+"/users/search.csv?parent="+f(c)+"&filter="+e(k))}}}();"use strict";
Osp.GlobalApp.Lens.Users.Archive=function(){return{archiveUsers:function(a,c){var f=new Osp.AlertDialog({title:I18n.t("ui.users.archive.success.title"),message:I18n.t("ui.users.archive.success.message"),className:"archive-success-dialog",showCancel:!1});(new Osp.AlertDialog({title:I18n.t("ui.users.archive.confirmation.title"),message:I18n.t("ui.users.archive.confirmation.message"),submitCallback:function(){$.ajax("/api/institutions/"+a+"/users/archive",{type:"POST",data:{user_ids:_(c).map(function(a){return a.id})}}).done(function(){f.render();
Osp.state.getLens().filters().refreshRelatedCollections();Osp.institution.groups.refreshRelatedCollections();Osp.vent.trigger("search:refresh")})},className:"archive-confirmation-dialog",showCancel:!0})).render()},unarchiveUsers:function(a,c){var f=new Osp.AlertDialog({title:I18n.t("ui.users.unarchive.success.title"),message:I18n.t("ui.users.unarchive.success.message"),className:"unarchive-success-dialog",showCancel:!1});(new Osp.AlertDialog({title:I18n.t("ui.users.unarchive.confirmation.title"),
message:I18n.t("ui.users.unarchive.confirmation.message"),submitCallback:function(){$.ajax("/api/institutions/"+a+"/users/unarchive",{type:"POST",data:{user_ids:_(c).map(function(a){return a.id})}}).done(function(){f.render();Osp.state.getLens().filters().refreshRelatedCollections();Osp.institution.groups.refreshRelatedCollections();Osp.vent.trigger("search:refresh")})},className:"unarchive-confirmation-dialog",showCancel:!0})).render()}}}();"use strict";
Osp.GlobalApp.Lens.Users.ResetPasswords=function(){return{showDialog:function(a,c){(new Osp.AlertDialog({title:I18n.t("ui.users.reset_passwords.confirmation.title"),message:I18n.t("ui.users.reset_passwords.confirmation.message"),submitCallback:function(){$.ajax("/api/institutions/"+Osp.institution.id+"/users/reset_passwords",{type:"POST",data:{user_ids:_(c).map(function(a){return a.id})}}).done(function(){Osp.state.getLens().filters().refreshRelatedCollections();Osp.institution.groups.refreshRelatedCollections()})},
className:"confirm-dialog",showCancel:!0})).render()}}}();
Osp.CourseApp=function(){var a={showFirstLens:function(c){a.isCourseAvailableDecorator(c,function(){a.Lens.showFirstLens(c)})},showLens:function(c,e,d){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);_.hideSpinnerAndRestoreOpacity();a.Lens.showLens(c,e,d)})},showLensAndSearch:function(c,e,d){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);_.hideSpinnerAndRestoreOpacity();a.Lens.showLensAndSearch(c,e,d)})},showLensAndNode:function(c,
e,d,h){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);a.Lens.showLensAndNode(c,e,d,h)})},showLensAndFilter:function(c,e,d,h){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);a.Lens.showLensAndFilter(c,e,d,h)})},showLensSearchWithFilter:function(c,e,d,h,k){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);a.Lens.showLensSearchWithFilter(c,e,d,h,k)})},showLensAndFilterAndContent:function(c,e,d,h,k){a.isCourseAvailableDecorator(c,
function(){e=decodeURIComponent(e);a.setLensId(c,e);a.Lens.showLensAndFilterAndContent(c,e,d,h,k)})},showLensAndContent:function(c,e,d){a.isCourseAvailableDecorator(c,function(){a.Lens.showLensAndContent(c,decodeURIComponent(e),d)})},showLensSection:function(c,e,d){a.isCourseAvailableDecorator(c,function(){a.Lens.showLensSection(c,decodeURIComponent(e),d)})},redirectToNewUIRoute:function(a,c,d,h,k){a="/courses/"+a+"/modules/"+c+"/content/"+k;c=(new URL(window.location.href)).search;0<c.length&&(a+=
c);Osp.Routing.showRoute(a)},redirectToContent:function(a,c,d,h){Osp.Routing.showRoute("/courses/"+a+"/modules/"+c+"/content/"+h)},showLensAndNodeAndContent:function(c,e,d,h,k){a.isCourseAvailableDecorator(c,function(){e=decodeURIComponent(e);a.setLensId(c,e);a.Lens.showLensAndNodeAndContent(c,e,d,h,k)})},isCourseAvailableDecorator:function(c,e){a.isCourseAvailable(c).done(e).fail(function(){Osp.vent.trigger("course:share_content:error")})},setLensId:function(c,e){a.currentLensId=c+"_"+e},isCurrentLensId:function(c,
e){return c+"_"+e==a.currentLensId},onCoursesReady:function(a){Osp.store.get(Osp.Store.TYPE.COURSES).ready().then(a)},isCourseAvailable:function(c){var e=$.Deferred();a.onCoursesReady(function(a){a=a.get(c);_.isEmpty(a)?e.reject():e.resolve(a)});return e.promise()},onCourseReady:function(c,e){a.onCoursesReady(function(a){a=a.get(c);if(null==a)throw Error("Course with id "+c+" not found");null!==Osp.state.getCourse()&&a.cid!=Osp.state.getCourse().cid&&Osp.state.reset(a);Osp.state.setCourse(a);e.call(this,
a)})},onFirstLensReady:function(c,e){a.onCourseReady(c,function(a){a.lenses().onReset(function(c){0<c.length&&e.call(this,a,c.first())})})}},c=function(a){this.course=a};c.prototype.notFound=function(a){"markbook"==a.toLowerCase()?this.redirectToStudentReports():this.redirectToFirstLens()};c.prototype.redirect=function(a){Osp.vent.trigger("course:lens:show",this.course.id,a.get("name"))};c.prototype.redirectToFirstLens=function(){this.redirect(this.lenses.first())};c.prototype.redirectToStudentReports=
function(){this.studentReports||this.redirectToFirstLens();this.redirect(this.studentReports)};$jscomp.global.Object.defineProperties(c.prototype,{lenses:{configurable:!0,enumerable:!0,get:function(){return this.course.lenses()}},studentReports:{configurable:!0,enumerable:!0,get:function(){return this.lenses.firstWith({type:"student_reports"})}}});a.onLensReady=function(f,e,d){a.onCourseReady(f,function(a){a.lenses().onReset(function(f){var h=decodeURIComponent(e).toLowerCase();f=f.find(function(a){return a.get("name").toLowerCase()===
h});if(!f)return(new c(a)).notFound(e);d.call(this,a,f)})})};a.onFirstFilterReady=function(c,e,d){a.onLensReady(c,e,function(a,c){c.filters().onReset(function(e){0<e.length&&d.call(this,a,c,e.first())})})};a.onFilterReady=function(c,e,d,h){a.onLensReady(c,e,function(a,c){c.filters().onReset(function(e){e=e.firstWith({name:decodeURIComponent(d)});if(null==e)throw Error("Filter with name "+d+" not found");h.call(this,a,c,e)})})};a.onStructureReady=function(c,e,d,h){a.onLensReady(c,e,function(a,c){a.structures().onReset(function(e){e=
e.getRecursive(d);if(null==e)throw Error("Structure with id "+d+" not found");h.call(this,a,c,e)})})};a.onGroupReady=function(c,e,d,h){a.onLensReady(c,e,function(a,c){a.groups().onReset(function(e){e=e.getRecursive(d);if(null==e)throw Error("Group with id "+d+" not found");h.call(this,a,c,e)})})};a.onUserReady=function(c,e,d,h){a.onLensReady(c,e,function(a,c){a.users().onReset(function(e){e=e.get(d);if(null==e)throw Error("user with id "+d+" not found");h.call(this,a,c,e)})})};a.onUsersReady=function(c,
e,d){a.onLensReady(c,e,function(a,c){a.users().onReset(function(e){d.call(this,a,c,e)})})};Osp.app.on("before:start",function(a,c){Osp.pairedCourses=new Osp.PairedCourses});return a}();
(function(a){var c={create:function(a,c){var d=[];for(a=a.toArray();!_(a).isEmpty();){var e=a.shift();e=new f(_(e.attributes).extend({favourite:this._isFavourite(e,c)}));d.push(e)}return d},_isFavourite:function(a,c){return _(c).contains(a.get("id"))}},f=a.Model.extend({defaults:{favourite:!1,purchased:!0},hasStats:function(){return!_(this.get("stats")).isEmpty()},markAsFavourite:function(){this.set("favourite",!0)},unmarkAsFavourite:function(){this.set("favourite",!1)}}),e=a.Collection.extend({model:f,
markAsFavourite:function(a){this.each(function(c){c.get("purchased")&&(_(a).contains(c.get("id"))?c.markAsFavourite():c.unmarkAsFavourite())})},favourites:function(){return this.where({favourite:!0})},nonFavourites:function(){return this.where({favourite:!1})}}),d=function(){var d,f,l,m,n=!1,q=function(){this._initEventHandlers()};_(q.prototype).extend({_initEventHandlers:function(){a.courses.on("reset",this.onCoursesReset.bind(this));this.getFavouriteCoursesManager().on("reset",this.onFavouritesReset,
this)},onCoursesReset:function(){this.populateCourses();this.populateFavourites();this.populateNonFavourites()},onFavouritesReset:function(a){this.getCoursesCollection().markAsFavourite(a);this.populateFavourites();this.populateNonFavourites()},populateCourses:function(){var d=this.getCoursesCollection(),e=this.getFavouriteCoursesManager();d.reset(c.create(a.courses,e.favouriteIds));d.markAsFavourite(e.favouriteIds)},populateFavourites:function(){this.getFavouriteCoursesCollection().reset(this.getCoursesCollection().favourites())},
populateNonFavourites:function(){this.getNonFavouriteCoursesCollection().reset(this.getCoursesCollection().nonFavourites())},getCoursesCollection:function(){return d||(d=new e)},getFavouriteCoursesCollection:function(){return f||(f=new e)},getNonFavouriteCoursesCollection:function(){return l||(l=new e([],{comparator:this.getComparatorFor("name")}))},getComparatorFor:function(a,c){return function(d,e){return d.get(a).toLowerCase()>e.get(a).toLowerCase()?"desc"===c?-1:1:d.get(a).toLowerCase()<e.get(a).toLowerCase()?
"desc"===c?1:-1:0}},sortNonFavouriteBy:function(a,c){var d=this.getNonFavouriteCoursesCollection();d.comparator=this.getComparatorFor(a,c);d.sort()},getFavouriteCoursesManager:function(){return m||(m=new a.FavouriteCourses)},fetch:function(){return n?$.Deferred().resolve().promise():this.fetchFavourites().done(function(){n=!0})},fetchFavourites:function(){return this.getFavouriteCoursesManager().fetch({reset:!0})}});return q}();a.app.on("before:start",function(){a.coursesManager=new d;a.coursesManager.populateCourses()})})(Osp);
Osp.CourseApp.Dialog=function(){return{}}();"use strict";
Osp.CourseApp.Dialog.Create=function(){var a=_.extend({},Osp.CreateDialog);a.StructureButton=a.Button.extend({view:function(){return"rename"===this.get("action")?a.RenameStructureButtonView:a.Button.prototype.view.call(this)}});a.GroupButton=a.Button.extend({isEnabled:function(a){return a?a.get("permissions")[this.get("action")]:"add"===this.get("action")}});a.SubgroupButton=a.Button.extend({isEnabled:function(a){return a&&a.get("permissions")[this.get("action")]}});a.GroupCodeButton=a.Button.extend({isEnabled:function(a){return"add"===
this.get("action")||a&&this._nodeHasPermissions(a)&&this._nodeIsAccesibleViaGroupCode(a)},_nodeHasPermissions:function(a){return a.get("permissions")[this.get("action")]},_nodeIsAccesibleViaGroupCode:function(a){return a.isAccesibleViaGroupCode()}});a.StructureButtonCollectionParams={actions:[["rename","pencil"],["add","add"],["remove","trash"]],buttonModel:a.StructureButton};a.GroupButtonCollectionParams={actions:[["add","add"],["edit","pencil"],["remove","trash"]],buttonModel:a.GroupButton};a.SubgroupButtonCollectionParams=
{i18nPrefix:"ui.courses.users.create.subgroups",actions:[["add","add"],["edit","pencil"],["remove","trash"]],buttonModel:a.SubgroupButton};a.GroupCodeButtonCollectionParams={i18nPrefix:"ui.courses.users.create.group_code",actions:[["add","add"],["edit","pencil"],["remove","trash"]],buttonModel:a.GroupCodeButton};a.RenameStructureButtonView=a.ButtonView.extend({template:"course/dialog/create/rename_structure_button-template",initialize:function(){this.listenTo(Osp.vent,"course:selection:node:deselect",
this.setInputStatus.bind(this));this.listenTo(Osp.vent,"course:selection:node:removed",this.setInputStatus.bind(this))},setInputStatus:function(a){this.$("input[type=text]").val(a&&a.get("name"));this.$("input[type=submit]").toggleClass("disabled",!this.model.get("enabled"))}});a.StructureLayout=a.Layout.extend({events:_.extend({"click .rename":"onClickRename","keypress input":"onKeypressed"},a.Layout.prototype.events),onClickAdd:function(c){var f=$(c.currentTarget),e=null,d=null,h=this._nodes;c.stopPropagation();
c.preventDefault();f.hasClass("disabled")||(Osp.FormView.prototype.clearErrors.call(this),this.model&&(e=this.model,d=e.id||e.cid,h=e.children(),h.parent()||(h._parent=e)),c=new h.model({name:"New",lookable_name:"New",parent_id:d,course:h.course(),leaf:!0,available:!0,permissions:{add:!0,rename:!0,remove:!0}}),h.add(c),e&&(e.set("leaf",!1),e.set("activeCreateDialog_expanded",!0),e.set(a.activeAttr,!1)),this.model=c,c.set(a.activeAttr,!0),this.$('input[type="text"]').focus(),Osp.vent.trigger("course:selection:node:select",
this._lens.course().get("id"),this._lens.get("name"),this.model),this._actions.push(new Osp.replayable.AddAction(c,this._actions)))},onClickRename:function(a){var c=$(a.target);a.stopPropagation();a.preventDefault();c.hasClass("disabled")||(Osp.FormView.prototype.clearErrors.call(this),this._renameNode())},onClickSave:function(){this.model&&this.model.get("name")!=this.$("input[name=name]").val()&&this._renameNode();a.Layout.prototype.onClickSave.apply(this,arguments)},onKeypressed:function(a){13==
a.which&&(a.stopPropagation(),a.preventDefault(),this.$(".rename").click())},onNodeSelected:function(){a.Layout.prototype.onNodeSelected.apply(this,arguments);this._setInput(this.model)},_renameNode:function(){this.model.set("name",this.$("input[name=name]").val(),{error:_.bind(function(a,f){this._showErrors(f)},this)})&&this._actions.push(new Osp.replayable.UpdateAction(this.model,this._actions))},_setInput:function(a){this.$("input[type=text]").val(a&&a.get("name"));this.$("input[type=text]").prop("disabled",
!(a&&a.get("permissions").rename))}});a.Group={};a.GroupLayout=a.Layout.extend({events:_.extend({"click .edit":"onClickEdit"},a.Layout.prototype.events),getAddLayoutModel:function(){return a.Group.Layout},onClickAdd:function(a){a.stopPropagation();a.preventDefault();$(a.target).hasClass("disabled")||(new (this.getAddLayoutModel())({className:"group-create-dialog legacy",until_footer:10})).getNewNode(this.model).done(_.bind(this._addNewNodeToTree,this))},onClickEdit:function(a){a.stopPropagation();
a.preventDefault();$(a.target).hasClass("disabled")||(new (this.getAddLayoutModel())({className:"group-create-dialog legacy",until_footer:10})).editNode(this.model).done(_.bind(this._updateNode,this))},_addNewNodeToTree:function(c){(this.model?this.model.children():this._nodes).add(c);this.model&&(this.model.set("leaf",!1),this.model.set("activeCreateDialog_expanded",!0),this.model.set(a.activeAttr,!1));c.set(a.activeAttr,!0);this.model=c;c.set("user_ids",c.users().map(function(a){return a.id}));
this._actions.push(new Osp.replayable.AddAction(c,this._actions));this._setButtons()},_updateNode:function(a){a.set("user_ids",_(a.getUsers().allThatAre("checkedCreate")).pluck("id"));this._actions.push(new Osp.replayable.UpdateAction(a,this._actions));this._setButtons()}});a.Group.Layout=Osp.GroupManagementDialog.extend({help:function(){return this._isCreatingAnAccesibleViaGroupCode()?I18n.t("ui.create.course_group.info"):""},editNode:function(a){this._mode="edit";this._parent=a.parent();this._setModel(a);
this.render();return this._deferred.promise()},getNewNode:function(a){var c=this._parent&&this._parent.course()||this._course;this._mode="create";this._parent=a;this._setModel(Osp.CourseGroup.newWithGroupCodeIfTopLevel({name:"",parent_id:this._parent&&(this._parent.id||this._parent.cid)||null,course:c,course_id:c.id,leaf:!0,permissions:{add:!0,edit:!0,remove:!0}}));this.render();return this._deferred.promise()},hasToShowStudentList:function(){return!this._isCreatingAnAccesibleViaGroupCode()},fetchGroupStudents:function(){if(this._isAccesibleViaGroupCode()&&
this._usersWereFetched()){var a=$.Deferred();a.resolve(this.model.users().allThatAre("checkedCreate"));return a.promise()}return Osp.GroupManagementDialog.prototype.fetchGroupStudents.call(this)},fetchAvailableStudents:function(){if(!this._isAccesibleViaGroupCode())return Osp.GroupManagementDialog.prototype.fetchAvailableStudents.call(this);if(this._usersWereFetched()){var a=$.Deferred();a.resolve(this.model.users());return a.promise()}return this.model.pUsers().done(function(a){a.markAsFetched()})},
updateGroupStudentList:function(){if(!this._isAccesibleViaGroupCode())return Osp.GroupManagementDialog.prototype.updateGroupStudentList.call(this);this._deferred.resolve(this.model)},_isModeCreate:function(){return"create"===this._mode},_isAccesibleViaGroupCode:function(){return this.model.isAccesibleViaGroupCode()},_isCreatingAnAccesibleViaGroupCode:function(){return this._isAccesibleViaGroupCode()&&this._isModeCreate()},_usersWereFetched:function(){return this.model._users.wasFetched()}});a.AddGlobalToCourseLayout=
Osp.DialogLayout.extend({template:"course/dialog/create/add_global_to_course_layout-template",regions:{tree:"#create-node-tree"},events:_.extend({"click input[type=submit]":"onClickSave","click .cancel":"onClickCancel"},Osp.DialogLayout.prototype.events),initialize:function(){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._addedGroupIds=[]},onClickSave:function(a){var c=this;a.stopPropagation();a.preventDefault();if(!$(a.target).hasClass("disabled")){$(a.target).addClass("disabled");
var e=_(this.$("input[type=checkbox]")).filter(function(a){return!0===$(a).prop("checked")});var d=_(e).map(function(a){return 1*$(a).val()});e=_(d).filter(function(a){return!_(c._addedGroupIds).include(a)});var h=_(this._addedGroupIds).filter(function(a){return!_(d).include(a)});$.post("/api/courses/"+Osp.state.getCourse().id+"/groups/add_groups_to_course",{groups_to_add:e,groups_to_remove:h}).done(function(){Osp.vent.trigger("course:dialog:user_management:global_groups_changed");c.hideModal()}).fail(function(){$(a.target).removeClass("disabled")})}},
onRender:function(){var a,f=this;Osp.DialogLayout.prototype.onRender.call(this);$.get("/api/courses/"+Osp.state.getCourse().id+"/groups/available_groups").done(function(c){a=new Osp.Groups(c);f._addedGroupIds=_(a.mapRecursive(e)).compact();f.showChildView("tree",new Osp.TreeRootView({childView:Osp.TreeCheckboxView,collection:a,checked_ids:f._addedGroupIds,lens:Osp.state.getLens(),observer:Osp.GroupSelectionCheckedObserver,activeAttr:"activeCreateDialog",checkboxName:"group_ids[]"}))});var e=function(a){return a.relatedCourseGlobalGroup()?
a.id:null}}});a.showDialog=function(c){a.Layout.factory(c).render()};a.showAddGlobalToCourseDialog=function(c){(new a.AddGlobalToCourseLayout({className:"group-create-dialog legacy",until_footer:10})).render()};return a}();"use strict";
Osp.GlobalApp.Create=function(){var a=_.extend({},Osp.CreateDialog);a.GlobalGroupButton=a.Button.extend({isEnabled:function(a){return this._isReordering()?this._isReorderAction():a?!0:this._isCommonAction()},_isCommonAction:function(){return _(["add","reorder"]).contains(this.get("action"))},_isReorderAction:function(){return"reorder"===this.get("action")},_isReordering:function(){var a=this.collection.get("reorder");return a&&a.get("active")}});a.GroupButtonCollectionParams={actions:[["add","add"],
["edit","pencil"],["remove","trash"],["reorder","random"]],buttonModel:a.GlobalGroupButton};a.GlobalGroup={};a.GlobalGroupLayout=Osp.CourseApp.Dialog.Create.GroupLayout.extend({events:_.extend({"click .reorder":"onClickReorder"},Osp.CourseApp.Dialog.Create.GroupLayout.prototype.events),createGroupLayout:a.GlobalGroup.Layout,initialize:function(){Osp.CourseApp.Dialog.Create.GroupLayout.prototype.initialize.apply(this,arguments);this.listenTo(Osp.vent,"global:selection:node:select",this.onNodeSelected.bind(this))},
getAddLayoutModel:function(){return a.GlobalGroup.Layout},onClickReorder:function(a){a.preventDefault();this.reorderingCommand().toggle();this._setButtons()},reorderingCommand:function(){return this._reordering||(this._reordering=new c(this))},onNodeSelected:function(a){this._nodes.include(a)?this.model=a:this.model=this._nodes.getRecursive(a.id);this._setButtons();Osp.FormView.prototype.clearErrors.call(this)},$groupsTree:function(){return this.getChildView("tree").$el}});a.GlobalGroup.Layout=Osp.GroupManagementDialog.extend({template:"common/dialogs/group/global/group_management_layout-template",
templateContext:function(){return _.extend({selectAllMessage:_.bind(function(){var a=this.model.get("parent")||this.model.get("parent_id");return I18n.t("ui.create.globalGroup.select_all."+(a?"subgroup":"root"))},this)},Osp.GroupManagementDialog.prototype.templateContext.call(this))},editNode:function(a){this._mode="edit";this._parent=a.parent();this._setModel(a);this.render();return this._deferred.promise()},getNewNode:function(a){this._mode="create";this._parent=a;this._setModel(new Osp.Group({name:"",
parent_id:this._parent&&(this._parent.id||this._parent.cid)||null,institution_id:Osp.institution.id,type:"GlobalGroup",leaf:!0}));this.render();return this._deferred.promise()},hasToShowStudentList:function(){return!0}});var c=function(){var a=function(a){this.$tree=a.$groupsTree().closest("div");this.$saveButton=a.$("input[type=submit]");this._button=a._buttons.get("reorder");this._actions=a._actions;this._groups={}};_(a.prototype).extend({init:function(){this._initSortable();this._toggleButton();
this._toggleSaveButton()},end:function(){this._destroySortable();this._toggleButton();this._addActions();this._toggleSaveButton()},toggle:function(){this.isReordering()?this.end():this.init()},isReordering:function(){return this.$tree&&this.$tree.hasClass("reordering")},_initSortable:function(){this.$tree.addClass("reordering").find("ul").sortable({items:">li[data-id]",stop:_.bind(this._onStopSorting,this)})},_destroySortable:function(){this.$tree.removeClass("reordering").find("ul").sortable("destroy")},
_onStopSorting:function(a,c){this._groups[this._getSubtreeRootId(c.item)]=this._getGroupsForElement(c.item)},_getSubtreeRootId:function(a){return a.parent().closest("li",this.$tree).data("id")||0},_getGroupsForElement:function(a){return a.closest("ul",this.$tree).find(">li").map(function(){return $(this).data("id")}).get()},_i18nButtonLabel:function(){return I18n.t(_("ui.create.globalGroup.%s.button").sprintf(this.isReordering()?"end_reorder":"reorder"))},_toggleButton:function(){this._button.set({label:this._i18nButtonLabel(),
active:this.isReordering()})},_toggleSaveButton:function(){this.$saveButton.toggleClass("disabled")},_addActions:function(){var a=this._actions;_(this._groups).each(function(c){a.push(new Osp.replayable.Action(new Osp.ReorderGlobalGroups({groups:c})))})}});return a}();a.showDialog=function(c){a.Layout.factory(c).render()};return a}();
Osp.CourseApp.Dialog.Print=function(){var a={};a.Content=Osp.View.extend({behaviors:[Osp.Behaviors.Math],tagName:"tr",className:"item",getTemplate:function(){return"course/"+this.getOption("lens").get("type")+"/list/print-template"},onRender:function(){var a=this.$(".description");Osp.state.get().hideDescriptions?a.hide():a.show()}});a.PrintListView=Osp.CollectionView.extend({tagName:"tbody",childView:a.Content,childViewOptions:function(){return{lens:this.getOption("lens")}}});a.PrintTableView=Osp.View.extend({className:"items",
regions:{body:{el:"tbody",replaceElement:!0}},getTemplate:function(){return"course/"+this.getOption("lens").get("type")+"/list/print_layout-template"}});a.Layout=Osp.DialogLayout.extend({template:"common/print_dialog-template",regions:{contents:"#print-contents"},events:_.extend({"click input[type=submit]":"onClickPrint","click .cancel":"onClickCancel"},Osp.DialogLayout.prototype.events),onClickPrint:function(a){a.preventDefault();a.stopPropagation();a=$("<iframe id='print' width='0' height='0'></iframe>").appendTo("body")[0];
a=a.contentWindow||a.contentDocument;a.document&&(a=a.document);a.write("<html><head>");a.write("<style type='text/css'>table { max-width: 100%;background-color: transparent;border-collapse: collapse;border-spacing: 0;}.table {width: 100%;margin-bottom: 18px;}.table th,.table td {padding: 8px;line-height: 18px;text-align: left;vertical-align: top;border-top: 1px solid #dddddd;}.table th {font-weight: bold;}.table thead th {vertical-align: bottom;}table .span1 {float: none;width: 44px;margin-left: 0;}table .span2 {float: none;width: 124px;margin-left: 0;}table .span3 {float: none;width: 204px;margin-left: 0;}table .span4 {float: none;width: 284px;margin-left: 0;}table .span5 {float: none;width: 364px;margin-left: 0;}table .span6 {float: none;width: 444px;margin-left: 0;}table .span7 {float: none;width: 524px;margin-left: 0;}table .span8 {float: none;width: 604px;margin-left: 0;}table .span9 {float: none;width: 684px;margin-left: 0;}table .span10 {float: none;width: 764px;margin-left: 0;}");
a.write("</style></head><body onload='this.focus(); this.print();'>");a.write($(".printable .modal-body").html()+"</body></html>");a.close()},onClickCancel:function(a){a.stopPropagation();a.preventDefault();this.hideModal()},onDestroy:function(){$("#print").remove()}});a.showDialog=function(c,f){var e=c.get("currentState"),d=e.structure;e=e.filter;var h=null,k=null,l=null;null!=e||null!=d?(null!=e?h=f.filters().getRecursiveBy("name",e):null!=d&&(k=c.structures().getRecursiveBy("id",d)),l=new Osp.Contents(null,
{course:c,lens:f,filter:h,structure:k})):l=new Osp.Contents(null,{course:c,lens:f});l.fetch({success:function(){var c=new a.PrintTableView({lens:f}),d=new a.PrintListView({lens:f,collection:l}),e=new a.Layout({className:"big printable"});e.on("render",function(){e.showChildView("contents",c)});c.on("render",function(){c.showChildView("body",d)});e.render()}})};return a}();"use strict";
Osp.CourseApp.Dialog.ExportUsers=function(){var a={};a.TreeGroupsObserver=function(){return _.inherits(Osp.Observer,{bindEvents:function(){},onChange:function(a){this.$el.toggleClass("active",this.model.get("active"))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();c(this.model);this.model.set("active",!0);Osp.vent.trigger("course:dialog:export_users:group:selected",this.model)}})}();a.ExportUsersLayout=Osp.DialogLayout.extend({template:"course/dialog/export/export_users_layout-template",
regions:{tree:"#create-node-tree"},events:_.extend({'click button[data-action="submit"]':"onClickSave"},Osp.DialogLayout.prototype.events),initialize:function(){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this.listenTo(Osp.vent,"course:dialog:export_users:group:selected",this.onGroupSelected.bind(this))},onClickSave:function(a){a.stopPropagation();a.preventDefault();this.isSubmitdisabled()||(this.disableSubmit(),this.downloadCsv(),this.hideModal())},onGroupSelected:function(){this.$("input[type=submit]").removeClass("disabled")},
getSelectedGroup:function(){return this.collection.getRecursiveBy("active",!0)},disableSubmit:function(){this.$("input[type=submit]").addClass("disabled")},isSubmitdisabled:function(){return this.$("input[type=submit]").hasClass("disabled")},downloadCsv:function(){window.open("/api/institutions/"+Osp.institutionId+"/users/search.csv?parent="+this.getSelectedGroup().id)},loadGroups:function(){var c=Osp.state.getState("lens");this.collection=c.course().groups().cloneRecursive();this.showChildView("tree",
new Osp.TreeRootView({lens:c,collection:this.collection,observer:a.TreeGroupsObserver}))},onRender:function(){Osp.DialogLayout.prototype.onRender.call(this);this.disableSubmit();this.loadGroups()}});var c=function(a){for(;a.parent();)a=a.parent();a.collection.eachRecursive(function(a){a.set("active",!1)})};a.showDialog=function(){(new a.ExportUsersLayout({className:"group-create-dialog legacy",until_footer:10})).render()};return a}();"use strict";
Osp.CourseApp.Dialog.ShareContentError=function(){return{onConfirm:function(){Osp.Routing.showRoute("/")},onRender:function(){this.dialog.$el.on("hidden",_.bind(this.onConfirm,this))},showDialog:function(){this.dialog=new Osp.AlertDialog({title:I18n.t("ui.common.share_content.error_dialog.title"),message:I18n.t("ui.common.share_content.error_dialog.message"),submitText:I18n.t("ui.common.share_content.error_dialog.button"),submitCallback:_.bind(this.onConfirm,this),className:"share-content-error-dialog"});
this.dialog.render();this.onRender()}}}();Osp.CourseApp.Dialog.AssessmentAssistance=function(){return{showDialog:function(){(new Osp.DismissibleDialog({title:I18n.t("ui.assign.dialog.assistance.bulk_assign.title"),message:I18n.t("ui.assign.dialog.assistance.bulk_assign.message"),className:"bulk-assign-assistance-dialog assistance-dialog",property:"assessment_assistance_discard"})).render()}}}();
Osp.CourseApp.Dialog.AddToPoolAssistance=function(){return{showDialog:function(){(new Osp.DismissibleDialog({title:I18n.t("ui.assign.dialog.assistance.add_to_pool.title"),message:I18n.t("ui.assign.dialog.assistance.add_to_pool.message"),className:"add-to-pool-assistance-dialog assistance-dialog",property:"add_to_pool_assistance_discard"})).render()}}}();
Osp.CourseApp.Dialog.AssignmentPoolAssistance=function(){return{showDialog:function(){(new Osp.DismissibleDialog({title:I18n.t("ui.assign.dialog.assistance.assignment_pool.title"),message:I18n.t("ui.assign.dialog.assistance.assignment_pool.message"),className:"add-to-pool-assistance-dialog assistance-dialog",property:"assignment_pool_assistance_discard"})).render()}}}();
Osp.CourseApp.Lens=function(){var a={},c=Backbone.Radio.channel("course.lens"),f=Osp.View.extend({template:"course/lens/banner-template"}),e={home:{icon:"book"},planning:{icon:"lessons"},resources:{icon:"resources"},assignments:{icon:"assessments"},markbook:{icon:"markbook",legacy:!0},teacher_reports:{icon:"reports"},student_reports:{icon:"reports"},next_steps:{icon:"nextsteps"},users:{icon:"class",legacy:!0},iwb:{icon:"iwb",legacy:!0}},d=Osp.LensView.extend({template:"course/lens/lens-template",
templateContext:_.extend({label:function(){return this.name},icon:function(){return e[this.type]?e[this.type].icon:this.type}},Osp.LensView.prototype.templateContext),activate:function(){this.model.refreshMarkbookCollections();this.model!=Osp.state.getLens()?Osp.vent.trigger("course:lens:show",this.model.course().id,this.model.get("name")):c.trigger("refresh",this.model)},onClickLens:function(a){a.preventDefault();a.stopPropagation();this.model.get("available")?this.activate():(new Osp.UnpurchasedDialogLenses({purchase_url:this.model.get("purchase_url"),
purchase_link_text:this.model.get("purchase_link_text"),purchase_popup_title:this.model.get("purchase_popup_title"),purchase_instruction_text:this.model.get("purchase_instruction_text"),showCancel:!0})).render()}}),h=d.extend({template:"course/lens/lensMenuItem-template",templateContext:_.extend({isActive:function(){return this.active}},d.prototype.templateContext)}),k=Osp.LensesView.extend({tagName:"ul",className:"dropdown dropdown__menu",childView:h}),l=Osp.LensesView.extend({childView:d}),m=Osp.View.extend({template:"course/lens/layout-template",
regions:{banner:".pageHeader__logo",lenses:".pageHeader__tabsNavigation",more:".pageHeader__morePanel",moreDesktopDropdown:".pageHeader__moreDesktopDropdown",content:".pageMain",title:".legacyTitle"},ui:{toggleMoreLens:"[data-action=toggleMoreLens]"},triggers:{"click @ui.toggleMoreLens":"toggleMoreLens","mouseover @ui.toggleMoreLens":"toggleMoreLensOver","mouseleave @ui.toggleMoreLens":"toggleMoreLensLeave"},toggleMoreLens:function(){this.getRegion("more").$el.toggleClass("pageHeader__morePanel--enabled")},
toggleDesktopDropdown:function(a){this.getRegion("moreDesktopDropdown").$el.toggleClass("dropdown--enabled",a)},toggleMoreVisibility:function(a){this.$(".pageHeader__tabsMore").toggleClass("hidden",!a)},onRender:function(){var a=_.template("--product-color: {{ color }}; --product-color-hs: {{ hs }}; --product-color-l: {{ l }};");if(this.model.getColor()){var c=Osp.HexService.toHSL(this.model.getColor()),d=c.h+","+c.s+"%";this.$el.attr("style",a({color:this.model.getColor(),hs:d,l:c.l+"%"})).toggleClass("lightTheme",
this.model.isDark())}}});a.Controller=function(){var d=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.filterName=a.filterName;this.contentIds=a.contentIds;this.sectionId=a.sectionId;this.desktopMediaQuery=window.matchMedia("(min-width: 1024px)");this.toggleMoreLensTimeout=null;this.reply()};_(d.prototype).extend({show:function(){this._initializeLayout();this.layout.on("render",function(){this._setLensClassToBody();this._changeHtmlTitle()},this);this.layout.on("destroy",function(){this._removeLensClassFromBody();
$(window).off("resize.moreLens")},this);this.region.show(this.layout);this._renderShowMoreLens();this._notifyLensTracking();$(window).on("resize.moreLens",this._renderShowMoreLens.bind(this))},reply:function(){c.reply({"title:book:show":this.showTitleBook,"content:region":this.getContentRegion,"title:region":this.getTitleRegion},this)},getContentRegion:function(){return this.layout.getRegion("content")},getTitleRegion:function(){return this.layout.getRegion("title")},showTitleBook:function(c){this.titleLayout.showChildView("book",
new a.Title.BookView({model:c}))},isLegacy:function(){return e[this.lens.get("type")].legacy},_initializeLayout:function(){this.layout=new m({model:this._getCourse()});this.layout.on("render",function(){this.isLegacy()&&this._showTitle();this._getCourse().attributes.token_course||this._showLenses();this._showBanner();this._showContent()},this);this.layout.on("toggleMoreLens",this.onToggleMoreLens.bind(this));this.layout.on("toggleMoreLensOver",this.onToggleMoreLensOver.bind(this));this.layout.on("toggleMoreLensLeave",
this.onToggleMoreLensLeave.bind(this))},onToggleMoreLens:function(a){this.isMobile()&&this.layout.toggleMoreLens()},onToggleMoreLensOver:function(){this.isMobile()||(clearTimeout(this.toggleMoreLensTimeout),this.layout.toggleDesktopDropdown(!0))},onToggleMoreLensLeave:function(){this.isMobile()||(this.toggleMoreLensTimeout=setTimeout(function(){this.layout.toggleDesktopDropdown(!1)}.bind(this),600))},_section:function(){var a=this,c=this.lens.get("sections");try{return c.find(function(c){return c.url==
a.sectionId})||c.first}catch(z){return null}},_showContent:function(){var a=this._getContentControllerClass();if(this.lens.isActive()){var c={region:this.layout.getRegion("content"),lens:this.lens,lenses:this._getLenses(),filterName:this.filterName,contentIds:this.contentIds,section:this._section()};c.titleButtonsRegion=this.titleLayout&&this.titleLayout.getRegion("buttons");c.titleSearchRegion=this.titleLayout&&this.titleLayout.getRegion("search");c.titleBookRegion=this.titleLayout&&this.titleLayout.getRegion("book");
(new a(c)).show()}},_showBanner:function(){var a=new f({model:this._getCourse()});this.layout.showChildView("banner",a)},_showTitle:function(){this.titleLayout=new (this._getTitleLayoutClass())({model:this.lens});this.layout.showChildView("title",this.titleLayout)},_showLenses:function(){this.lensesView=new l({collection:this._getLenses()});this.layout.showChildView("lenses",this.lensesView)},isMobile:function(){return!this.desktopMediaQuery.matches},_addExtraLenses:function(a){var c=this.isMobile(),
d=c?"more":"moreDesktopDropdown";a=new (c?l:k)({collection:a});this.layout.showChildView(d,a)},_setLensClassToBody:function(){var a=_.sprintf("%s-lens",_.slugify(this.lens.get("type")));this._removeLensClassFromBody();$("body").addClass(a)},_removeLensClassFromBody:function(){_(document.body.className.split(" ")).each(function(a){a.match(/(\w|-)+-lens$/)&&$("body").removeClass(a)})},_notifyLensTracking:function(){Osp.Tracking.getChannel().request("notify","course",{lens_id:this.lens.id})},_getLensTypeClass:function(){return this.lens.get("type").camelize()},
_getContentControllerClass:function(){return a[this._getLensTypeClass()].Controller},_getTitleLayoutClass:function(){return a[this._getLensTypeClass()].TitleLayout||a.Title.Layout},_getLenses:function(){return this.lens.collection},_getCourse:function(){return this.lens.course()},_changeHtmlTitle:function(){var a=this._getCourse().attributes.name,c=this.lens.attributes.name;Backbone.Radio.channel("root").trigger("title:change",a,c)},_shouldRenderShowMoreLens:function(){var a=$(".pageHeader__tabs").width(),
c=$(".navigationTabs__item").toArray().reduce(function(a,c){return $(c).outerWidth(!0)+a},0);return a<c},_renderShowMoreLens:function(){var a=$(".pageHeader__tabs").width();this._shouldRenderShowMoreLens()?(a=this._calculateIfExtraLenses(a),this._toggleShowMoreButton(a.show,a.collection)):this._toggleShowMoreButton(!1)},_calculateIfExtraLenses:function(a){var c=0,d=this.isMobile()?70:50,e=!1,f=this.lensesView.children.length-1,h=this.lens.collection.clone();this.lensesView.children.each(function(k,
m){var l=k.$el.removeClass("navigationTabs__item--hidden").outerWidth(!0),n=c+l;!e&&n<=a&&(m===f||n+d<=a)?(c+=l,h.remove(k.model)):(k.$el.addClass("navigationTabs__item--hidden"),e=!0)});return{show:e,collection:h}},_toggleShowMoreButton:function(a,c){this.layout.toggleMoreVisibility(a);a&&this._addExtraLenses(c)}});return d}();var n=function(c,d,e,f){(new a.Controller({region:Osp.root.getRegion("body"),lens:c,filterName:d,contentIds:e,sectionId:f})).show()},q=function(a){return Osp.config.defaultFilters[Osp.profile.get("type")][a.get("type")]||
a.filters().first()&&a.filters().first().get("name")},t=function(a){if(a.isGroupable())return Osp.state.getGroup();var c=Osp.state.getStructure();if(!c)return null;if(c.isActiveForRecursive(a))return c;Osp.state.setStructure(null);return null};a.showFirstLens=function(c){Osp.CourseApp.onFirstLensReady(c,function(c,d){Osp.CourseApp.setLensId(c.id,d.get("name"));a.showLens(c.id,d.get("name"))})};a.showLens=function(c,d,e){Osp.CourseApp.onLensReady(c,d,function(f,h){h.isHome()||h.isDigitalBook()?(h.activate(),
n(h)):t(h)&&!h.isStudentAssignment()?a.showLensAndNode(c,d,t(h).id,e):(f=Osp.config.defaultSearch[Osp.profile.get("type")][h.get("type")])?a.showLensAndSearch(c,d,f):a.showLensAndFilter(c,d,q(h),e)})};a.showLensAndSearch=function(a,c,d){var e=y(d);Osp.CourseApp.onLensReady(a,c,function(a,c){var d;c.activate();Osp.state.setSearchTerms(e);var f=c.filters().first();_.isEmpty(f)||(d=f.get("name"));a.setStateValue("filter",d);n(c)})};a.showLensAndContent=function(a,c,d){Osp.CourseApp.onLensReady(a,c,function(a,
c){c.activate();n(c,null,d.split(","))})};a.showLensSection=function(a,c,d){Osp.CourseApp.onLensReady(a,c,function(a,c){c.activate();n(c,null,null,d)})};a.showLensAndNode=function(a,c,d,e){Osp.CourseApp.onLensReady(a,c,function(a,c){c.activate();a.setStateValue(c.isGroupable()?"group":"structure",d);void 0!==e&&a.setStateValue("page",e);n(c)})};a.showLensAndFilter=function(a,c,d,e){Osp.CourseApp.onLensReady(a,c,function(a,c){c.activate();a.setStateValue("filter",decodeURIComponent(d));void 0!==e&&
a.setStateValue("page",e);n(c,d)})};a.showLensSearchWithFilter=function(a,c,d,e,f){Osp.CourseApp.onLensReady(a,c,function(a,c){c.activate();a.setStateValue("filter",decodeURIComponent(d));void 0!==f&&a.setStateValue("page",f);var h=y(e);Osp.state.setSearchTerms(h);a.setStateValue("filter",d);n(c,d)})};a.showLensAndNodeAndContent=function(c,d,e,f,h){Osp.CourseApp.onLensReady(c,d,function(k,m){k.setStateValue("content",h.split(","));a.showLensAndNode(c,d,e,f)})};a.showLensAndFilterAndContent=function(c,
d,e,f,h){Osp.CourseApp.onLensReady(c,d,function(k,m){k.setStateValue("content",h.split(","));a.showLensAndFilter(c,d,e,f)})};var y=function(a){return a.split("+").reduce(function(a,c){var d=c.split(":");if(2===d.length){c=d[0];d=decodeURIComponent(d[1]);switch(d){case "true":d=!0;break;case "false":d=!1}a[c]=d}return a},{})};return a}();
Osp.CourseApp.Lens.ContentsListManager=function(a){return Mn.Object.extend({initialize:function(){this.fetched=[];this.current=null},set:function(a){this.current=a;this.add(a)},search:function(){this.current.resetCurrentPage();this.current.fetch();this.clear().add(this.current)},add:function(a){this.fetched.push(a);this.fetched=_.uniq(this.fetched);return a},clear:function(){_.invoke(this.fetched,"planFetch");this.fetched=[];return this}})}(Osp);
(function(a,c){var f=Mn.Object.extend({initialize:function(a,c){this._structure=a;this._lens=c;this._contents=a.currentContents(c)},courseId:function(){return c.state.getCourse()&&c.state.getCourse().id},isDefined:function(){return this._structure.has("has_contents")&&!a.isUndefined(this._structure.get("has_contents")[this._lens.id])},setAttribute:function(c){!this._structure.has("has_contents")&&this._structure.set("has_contents",{});this._structure.get("has_contents")[this._lens.id]=a(c).isUndefined()?
!!this._contents.size():c},getAttribute:function(){return this._structure.has("has_contents")&&this._structure.get("has_contents")[this._lens.id]},fetch:function(e){return c.PaginatedContents.prototype.fetch.call(this._contents,a.extend(e,{silent:!0})).done(this.onFetchDone.bind(this))},decorate:function(){this._contents.fetch=this.fetch.bind(this)},wasEmptySearch:function(){return this._contents.isSearching()&&!this._contents.size()},triggerResetEvent:function(){this._contents.trigger("reset",this._contents)},
onFetchDone:function(){if(this.isDefined())return this.triggerResetEvent();this.wasEmptySearch()?this.checkIfHasContentsFor().always(this.triggerResetEvent.bind(this)):(this.setAttribute(),this.triggerResetEvent())},checkIfHasContentsFor:function(){return $.get("/api/structures/"+this._structure.id+"/has_contents?course_id="+this.courseId()+"&course_lens_id="+this._lens.id).done(this.setAttribute.bind(this))}});Backbone.Radio.channel("structures").reply("contents:decorate",function(a,c){(new f(a,
c)).decorate()})})(_,Osp);
Osp.CourseApp.Lens.Title=function(){var a={};a.Layout=Osp.View.extend({template:"course/lens/title-template",regions:{buttons:"#buttons",search:"#search",book:"#book"}});a.BookView=Osp.View.extend({className:"book",template:"course/lens/book-template",events:{"click .prev":"onClickPrevious","click .next":"onClickNext","click .show":"onBookClick"},onClickPrevious:function(a){a.preventDefault();this.model.previous()},onClickNext:function(a){a.preventDefault();this.model.next()},onBookClick:function(a){a.preventDefault();
this.model.showDigitalBook($(a.target))}});return a}();
Osp.CourseApp.Lens.Home=function(a,c){var f=function(a){this.options=a};f.prototype.show=function(){var a=this;$(document).scrollTop(0);this.store.fetch().done(function(c){return a.buildController(c).show()})};f.prototype.buildController=function(e){var d=c.extend({},this.options,{homepage:e,course:this.course});e=e.get("type").replace("CourseHomepage","");return new a.CourseApp.Lens.Home[e](d)};$jscomp.global.Object.defineProperties(f.prototype,{lens:{configurable:!0,enumerable:!0,get:function(){return this.options.lens}},
course:{configurable:!0,enumerable:!0,get:function(){return this.lens.course()}},store:{configurable:!0,enumerable:!0,get:function(){return a.store.get(a.Store.TYPE.COURSE_HOMEPAGE,this.course)}}});return{Controller:f}}(Osp,_);
Osp.CourseApp.Lens.Home.Common=function(a){var c=function(){var a=function(a){this.cache={};this.prefix=a||""};_(a.prototype).extend({get:function(a){return this.cache[this._cacheKey(a)]},set:function(a,c){this.cache[this._cacheKey(a)]=c},setPrefix:function(a){this.prefix=a},_cacheKey:function(a){return _.sprintf("%s-%s",this.prefix,a)}});return a}();return{LensView:a.View.extend({template:"course/home/common/lens-template",tagName:"li",triggers:{click:"lens:open"},attributes:function(){return{class:this._getClassNames()}},
serializeData:function(){return _.extend(a.View.prototype.serializeData.call(this),{lens_icon_color:this.model.course().get("lens_icon_color"),description:this.model.get("description")||""})},_getClassNames:function(){var a=["new-lens"];this.model.isAvailable()||a.push("unpurchased");return a.join(" ")}}),Cache:c}}(Osp);
Osp.CourseApp.Lens.Home.Legacy=function(a,c){var f={},e=a.View.extend({template:"course/home/legacy/layout-template",regions:{main:"#main",sidebar:"#sidebar"}});f.Controller=function(){var a=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.course=a.course};_(a.prototype).extend({show:function(){this.layout=new e({model:this.lens});this.layout.on("render",_.bind(function(){this._showMain();this._showSidebar()},this));this.region.show(this.layout)},_showMain:function(){this.layout.showChildView("main",
new c.Legacy.Main.Layout({model:this.course}))},_showSidebar:function(){(new c.Legacy.Sidebar.Controller({course:this.course,region:this.layout.getRegion("sidebar")})).show()}});return a}();return f}(Osp,Osp.CourseApp.Lens.Home);
Osp.CourseApp.Lens.Home.Legacy.Main=function(){var a={};a.HeadLayout=Osp.View.extend({template:"course/home/legacy/main/head-template"});a.HeadStaticLayout=Osp.View.extend({template:"course/home/legacy/main/head_static-template"});a.TabRowView=Osp.View.extend({template:"course/home/legacy/main/tabrow-template",className:"tab-row"});a.TabRowsView=Osp.CollectionView.extend({childView:a.TabRowView,onRender:function(){this.$el.find(".tab-row:first").addClass("active")},buildChildView:function(a,f){return new f({model:a,
lens:this._lens,id:"list_"+a.get("id")})}});a.TabContentView=Osp.View.extend({behaviors:[Osp.Behaviors.Math],template:"course/home/legacy/main/tabcontent-template",className:"holder_tab",events:{"click h3 a":"onClickTitle"},onClickTitle:function(a){a.preventDefault();a.stopPropagation();this.model.showContent(this.$el)},onRender:function(){var a=this,f=new Image;this.$("img").imagesLoaded(function(c,d,h){0!=h.length&&a.$("img").attr("src","/images/no_thumb.png");f.src=a.$("img").attr("src");c=$("#tabcontentholder_1").width()-
f.width-15;a.$(".span7").css({width:c})})}});a.TabContentsView=Osp.CollectionView.extend({childView:a.TabContentView,onRender:function(){this.$el.find(".holder_tab:first").addClass("active")},buildChildView:function(a,f){return new f({model:a,lens:this._lens,id:"content_"+a.get("id")})}});a.Layout=Osp.View.extend({template:"course/home/legacy/main/layout-template",regions:{head:"#head"},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this),f={course:this.model.get("id"),homepage:this.model.get("homepage")};
return _(f).extend(a)},events:{"click .tab-row":"onClickAction","click .tab-row a":"onClickAction"},onClickAction:function(a){var c=a.target||a.srcElement;"A"==c.tagName?(a=c.parentElement.parentElement.parentElement.id,c="#"+c.parentElement.id):(a=c.parentElement.parentElement.id,c="#"+c.id);$("#"+a+" .tab-row").removeClass("active");$(c).addClass("active");a="#tabcontentholder_"+a.split("_")[1]+" .holder_tab";$(a).removeClass("active");a="#content_"+c.split("_")[1];$(a).addClass("active")},onRender:function(){var c=
this.model,f=c.attributes.homepage;c=null!=f?1==f.published?new a.HeadLayout({model:c}):new a.HeadStaticLayout({model:c}):new a.HeadStaticLayout({model:c});this.showChildView("head",c)}});return a}();
Osp.CourseApp.Lens.Home.Legacy.Sidebar=function(a){var c={},f=a.View.extend({template:"course/home/legacy/sidebar/markbook_stats-template",events:{"click ul.stats a":"onClickMarkbookFilter"},onClickMarkbookFilter:function(a){var c=$(a.currentTarget).attr("href").replace(/^\/app\/(.*)$/,"$1");a.preventDefault();a.stopPropagation();this.trigger("markbook:click",c)},serializeData:function(){if(a.currentCourse.hasAssignmentAndMarkbookLensAvailable())return _.extend(a.View.prototype.serializeData.apply(this,
arguments),{markbookLensName:a.currentCourse.lenses().firstWith({type:"markbook"}).get("name"),assignmentsLensName:a.currentCourse.lenses().firstWith({type:"assignments"}).get("name")})}}),e=a.View.extend({template:"course/home/legacy/sidebar/interesting_sites-template"}),d=a.FormView.extend({prependFieldNameOnError:!1,tagName:"form",template:"course/home/legacy/sidebar/group_code_form-template",initialize:function(c){a.FormView.prototype.initialize.apply(this,arguments);this._dialog=c.dialog},onSaveSuccess:function(c,
d,e){a.courses.fetch();this._dialog.hideModal()}}),h=a.DialogLayout.extend({template:"course/home/legacy/sidebar/group_code_dialog-template",events:_.extend({"click input[type=submit]":"onClickSubmit"},a.DialogLayout.prototype.events),regions:{form:"#group-code-form"},initialize:function(){a.DialogLayout.prototype.initialize.apply(this,arguments);this._formView=new d({dialog:this,model:new a.GroupCode})},onRender:function(){this.showChildView("form",this._formView);a.DialogLayout.prototype.onRender.apply(this,
arguments)},onClickSubmit:function(a){this._formView.onClickSubmit(a)}}),k=a.View.extend({template:"course/home/legacy/sidebar/layout-template",className:"sidebar-alt2",regions:{markbookStats:"#markbook-stats",interestingSites:"#interesting-sites"},triggers:{"click #group-code-button":"group-code:click"},serializeData:function(){return _(a.View.prototype.serializeData.call(this)).extend({showGroupCodeButton:this._canShowGroupCode(),showTwitterWidget:!_.isNull(this.model.get("homepage").twitter_feed),
twitterWidget:this.model.get("homepage").twitter_feed})},_canShowGroupCode:function(){return this.can("show","home/group_code")}});c.Controller=function(){var c=function(a){a=a||{};this.region=a.region;this.course=a.course};_(c.prototype).extend({show:function(){this._initializeTwitter();this.layout=new k({model:this.course});this.layout.on("render",_.bind(function(){this._showMarkbookStats();this._showInterestingSites()},this));this.layout.on("group-code:click",_.bind(function(){this._showGroupCodeDialog()},
this));this.region.show(this.layout)},_showMarkbookStats:function(){if(this.course.hasAssignmentAndMarkbookLensAvailable()){var c=new f({model:this._getMarkbookStats()});c.on("markbook:click",_.bind(function(c){a.Routing.showRoute(c)},this));this.layout.showChildView("markbookStats",c);this._fetchMarkbookStats().then(function(){c.render()})}},_showInterestingSites:function(){this.layout.showChildView("interestingSites",new e({model:this.course}))},_showGroupCodeDialog:function(){(new h({className:"group-code-dialog",
min_width:380})).render()},_fetchMarkbookStats:function(){return this._getMarkbookStats().fetch()},_getMarkbookStats:function(){return this.markbookStats||(this.markbookStats=new a.MarkbookStats({course:this.course}))},_initializeTwitter:function(){$("#twitter-wjs").length&&$("#twitter-wjs").remove();var a=document.getElementsByTagName("script")[0],c=/^http:/.test(document.location)?"http":"https",d=document.createElement("script");d.id="twitter-wjs";d.src=c+"://platform.twitter.com/widgets.js";a.parentNode.insertBefore(d,
a)}});return c}();return c}(Osp);
Osp.CourseApp.Lens.Home.Teacher=function(a,c){var f=a.View.extend({template:"course/home/teacher/main-template",className:"home-body-main-wrapper",templateContext:{formatDate:function(a){return(a=moment(a,"YYYY-MM-DD"))&&a.isValid()?a.toDate().toLocaleFormat(I18n.t("ui.date.long")):""},hasOptionalMessage:function(){return!(!this.optional_header||!this.optional_body)},optionalMessageStyle:function(){return this.main_color?"border-color:"+this.main_color:""},optionalMessageHeaderStyle:function(){return this.main_color?"background-color:"+
this.main_color:""},optionalMessageColorStyle:function(){return this.optional_body_color?"color: "+this.optional_body_color:""},optionalIconStyle:function(){return this.optional_icon_max_width?"max-width: "+this.optional_icon_max_width+"px;":""},optionalIconBeforeBody:function(){return this.optional_icon_url&&"after"!=this.optional_icon_position?'<img src="'+this.optional_icon_url+'" style="'+this.optionalIconStyle()+'" />':""},optionalIconAfterBody:function(){return this.optional_icon_url&&"after"==
this.optional_icon_position?'<img src="'+this.optional_icon_url+'" style="'+this.optionalIconStyle()+'" />':""}},initialize:function(a){this.course=a.course},serializeData:function(){return _.extend(a.View.prototype.serializeData.call(this),{main_color:this.course.getColor()})}}),e=a.View.extend({template:"course/home/teacher/subscription-template",tagName:"tr"}),d=a.CollectionView.extend({tagName:"tbody",childView:e}),h=a.View.extend({className:"home-body-sidebar-wrapper",template:"course/home/teacher/subscriptions-template",
regions:{body:{el:"tbody",replaceElement:!0}}}),k=a.View.extend({template:"course/home/teacher/emergency-template",className:"home-wrapper emergency-area-wrapper",triggers:{"click .emergency-area-close":"emergency:close"}}),l=a.View.extend({template:"course/home/teacher/assignments-template",className:"grid grid--maxWidth",modelEvents:{sync:"render"},triggers:{"click a":"goToMarkbook"},templateContext:{muted:function(a){return this[a]?"":"badge--muted"}}}),m=a.View.extend({className:"home__body home__body--teacher",
template:"course/home/teacher/layout-template",regions:{digitalBooks:".home__books",assignments:".home__assignments",updates:".home__updates",emergency:".home__emergency",main:".home__courseCustom",subscriptions:".home__subscriptions"},templateContext:{showAcknowledgements:function(){return!!this.acknowledgements_url}},hide:function(a){this.getRegion(a).$el.toggleClass("hidden",!0)}});return function(){var e=new c.Common.Cache,q=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.course=
a.course;this.homepage=a.homepage};_(q.prototype).extend({show:function(){this._setCachePrefix();this.layout=new m({model:this.homepage});this.layout.on("render",_.bind(function(){this._showAssignments();this._showCourseUpdates();this._showMain();this._showSubscriptions();this._showEmergency()},this));this.region.show(this.layout);this._fetch()},_showDigitalBooks:function(){(new a.Components.DigitalBooks({books:this._getDigitalBooks()})).show(this.layout.getRegion("digitalBooks"))},_showAssignments:function(){if(this.course.hasMarkbookAvailable()){var c=
new l({model:this._getStats()});c.on("goToMarkbook",function(c,d){c=this.lens.collection.findWhere({type:"markbook"});d=$(d.target).data("filter");a.vent.trigger("course:lens:filter:search:show",this.lens.course().get("id"),c.get("name"),d,{search:{assigned_by:"me"}})},this);this.layout.showChildView("assignments",c)}},_showMain:function(){this.layout.showChildView("main",new f({model:this.homepage,course:this.lens.course()}))},_showCourseUpdates:function(){(new a.Components.CourseUpdates({collection:this._getCourseUpdates()})).show(this.layout.getRegion("updates"))},
_showSubscriptions:function(){var a=new h;a.on("render",function(){a.showChildView("body",new d({collection:this._getSubscriptions()}))},this);this.layout.showChildView("subscriptions",a)},_showEmergency:function(){if(this.homepage.get("emergency_message_active")){var a=new k({model:this.homepage});a.on("emergency:close",function(){this.layout.hide("emergency")},this);this.layout.showChildView("emergency",a)}},_fetch:function(){return $.when(this._fetchDigitalBooks(),this._fetchCourseUpdates(),this._fetchStats(),
this._fetchSubscriptions())},_fetchDigitalBooks:function(){return this._getDigitalBooks().fetch().done(function(){this._getDigitalBooks().isEmpty()||this._showDigitalBooks()}.bind(this))},_fetchStats:function(){var a=this._getStats();a.set(e.get("stats")||{});var c=this._showAssignments.bind(this);return a.fetch().then(function(d){e.set("stats",a.parse(d));c()})},_fetchCourseUpdates:function(){return this._getCourseUpdates().fetch()},_fetchSubscriptions:function(){var a=this._getSubscriptions();a.reset(e.get("subscriptions")||
[]);return a.fetch().then(function(a){e.set("subscriptions",a)})},_getDigitalBooks:function(){return this._digitalBooks||(this._digitalBooks=new a.Digibooks(null,{course:this.course}))},_getStats:function(){return this._stats||(this._stats=new a.MarkbookStats({course:this.course}))},_getCourseUpdates:function(){return this._courseUpdates||(this._courseUpdates=new a.CourseUpdates(null,{course:this.course}))},_getSubscriptions:function(){return this._subscriptions||(this._subscriptions=new a.Subscriptions(null,
{courseId:this.course.id}))},_setCachePrefix:function(){e.setPrefix(_.sprintf("course-%d",this.course.id))}});return q}()}(Osp,Osp.CourseApp.Lens.Home);
Osp.CourseApp.Lens.Home.SmartTeacher=function(a,c,f){var e=a.View.extend({template:"course/home/smart_teacher/layout-template",className:function(){return this.model.get("show_background_image")?"home--smart-teacher home--branding loading":"home--smart-teacher loading"},regions:{books:".home__books",assignmentsStats:{el:".home__assignmentsStats",replaceElement:!0},reports:{el:".home__reports",replaceElement:!0},courseUpdates:".home__updates"},templateContext:{showGettingStarted:function(){return!!this.getting_started_header},
showAcknowledgements:function(){return!!this.acknowledgements_url}},triggers:{'click [data-action="open:subscriptions"]':"open:subscriptions",'click [data-action="open:getting_started"]':"open:getting_started"}}),d=a.View.extend({className:"home__gettingStarted",template:_.template("{[ getting_started_body ]}")}),h=c.Component.extend({view:d}),k=a.View.extend({className:"home__assignmentsStats home__widget__body",template:"course/home/smart_teacher/assignments_stats-template",triggers:{"click [data-action=open]":"open"},
templateContext:{muted:function(a){return this[a]?"":"badge--muted"}}}),l=a.View.extend({className:"home__reports",template:"course/home/smart_teacher/reports-template",templateContext:{showNextSteps:function(){return _(this.next_steps_completed).isNumber()}}});d=c.CourseUpdates.Layout.extend({template:"course/home/smart_teacher/course_updates_layout-template"});var m=c.CourseUpdates.extend({view:d}),n=c.Component.extend({view:e,fetch:function(){return $.when(this.booksStore().fetch(),this.dataStore().invalidate().fetch())},
refresh:function(){var a=this;this.$el().addClass("loading");return this.dataStore().invalidate().fetch().done(function(){return a.$el().removeClass("loading")})},gettingStartedPresent:function(){return!!this.model.get("getting_started_header")},visited:function(){this._visited||(this._visited=new a.VisitedCoursesService);return this._visited},firstTimeFlow:function(){this.visited().alreadyVisited||(this.gettingStartedPresent()&&this.gettingStartedPanel().toggle(),this.visited().storeVisit())},dataStore:function(){return this.getStore(f.TYPE.COURSE_HOMEPAGE_DATA_FOR_TEACHER)},
booksStore:function(){return this.getStore(f.TYPE.DIGITAL_BOOKS)},isSmart:function(){return this.model.get("smart")},onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()});this.listenTo(a,"open:subscriptions",function(){return c.subscriptionsPanel().delayToggle()});this.listenTo(a,"open:getting_started",function(){return c.gettingStartedPanel().delayToggle()})},onRender:function(){var a=this;this.fetch().then(function(){a.showDigitalBooks();a.showCourseUpdates();
a.showAssignmentsStats();a.showReports();a.$el().removeClass("loading");a.firstTimeFlow()})},showDigitalBooks:function(){var a=this.booksStore().get();a.isEmpty()||(new c.DigitalBooks({books:a})).show(this.getRegion("books"))},showAssignmentsStats:function(){var a=this,c=this.dataStore().assignmentsStats();c=new k({model:c});this.listenTo(c,"open",function(){return a.openMarkbook()});this.showChildView("assignmentsStats",c)},showCourseUpdates:function(){var a=this.dataStore().courseUpdates();(new m({collection:a})).show(this.getRegion("courseUpdates"))},
showReports:function(){var a=this.dataStore().reports();a=new l({model:a});this.showChildView("reports",a)},subscriptionsPanel:function(){return(new c.Course.SubscriptionsPanel({course:this.course,destroyOnClose:!0})).show()},gettingStartedPanel:function(){var a=this.model.get("getting_started_header"),d=new h({model:this.model});return(new c.SidePanel({title:a,component:d,destroyOnClose:!0})).show()},markbook:function(){return this.lens.collection.findWhere({type:"markbook"})},openMarkbook:function(){var c=
this.markbook();a.vent.trigger("course:lens:show",this.course.id,c.get("name"))}});e=function(a){this.lens=a.lens;this.region=a.region;this.course=a.course;this.homepage=a.homepage};e.prototype.show=function(){this.component.show(this.region)};$jscomp.global.Object.defineProperties(e.prototype,{component:{configurable:!0,enumerable:!0,get:function(){return this._component?this._component:this._component=new n({lens:this.lens,course:this.course,model:this.homepage})}}});return e}(Osp,Osp.Components,
Osp.Store);
Osp.CourseApp.Lens.Home.Teacher.Lenses=function(a,c){var f=c.Common.LensView.extend({template:"course/home/teacher/lens-template",triggers:_.extend({"click .label-new-content":"lens:new-content:open"},c.Common.LensView.prototype.triggers),initialize:function(a){c.Common.LensView.prototype.initialize.apply(this,arguments);this.stats=a.stats;this.listenTo(this.stats,"change",this.render.bind(this))},serializeData:function(){return _.extend(c.Common.LensView.prototype.serializeData.call(this),{hasNewContents:this._hasNewContents(),
hasUpdatedContents:this._hasUpdatedContents(),newContentsLabel:this._getNewContentsLabel(),updatedContentsLabel:this._getUpdatedContentsLabel()})},_hasNewContents:function(){return!_.isEmpty(this._getNewContentsLabel())},_hasUpdatedContents:function(){return!_.isEmpty(this._getUpdatedContentsLabel())},_getNewContentsLabel:function(){return this.model.get("has_new_contents")?I18n.t("ui.browser.new_content"):null},_getUpdatedContentsLabel:function(){return this.model.get("has_updated_contents")?I18n.t("ui.browser.updated_content"):
null}}),e=f.extend({template:"course/home/teacher/lens-markbook-template",serializeData:function(){return _.extend(f.prototype.serializeData.call(this),{hasTag:this._hasTag(),tag:this._getTag()})},_hasTag:function(){return!_.isEmpty(this._getTag())},_getTag:function(){var a=this.stats.get("manual_marking"),c;0<a&&(c=I18n.t("ui.courses.lenses.home.lenses.manual_marking",{count:a}));return c}}),d=a.CollectionView.extend({className:"unstyled",tagName:"ul",childView:f,initialize:function(c){a.CollectionView.prototype.initialize.apply(this,
arguments);this.stats=c.stats},buildChildView:function(a,c){return new (a.isMarkbook()?e:c)({model:a,stats:this.stats})}});return{Controller:function(){var c=function(a){a=a||{};this.region=a.region;this.lenses=a.lenses;this.stats=a.stats};_(c.prototype).extend(Backbone.Events,{show:function(){this.lensesView=new d({collection:this._getFilteredLenses(),stats:this._getStats()});this._initEventHandlers();this.lensesView.on("childview:lens:open",function(a){a=a.model;a.isAvailable()?this.trigger("lens:open",
a):this._showUnpurchasedDialog(a)},this);this.lensesView.on("childview:lens:new-content:open",function(a){a=a.model;a.isAvailable()?this.trigger("lens:open",a,{filter:"new_content"}):this._showUnpurchasedDialog(a)},this);this.lensesView.on("childview:lens:updated-content:open",function(a){a=a.model;a.isAvailable()?this.trigger("lens:open",a,{filter:"updated_content"}):this._showUnpurchasedDialog(a)},this);this.region.show(this.lensesView);this._populateFilteredLenses()},onLensesReset:function(){this._populateFilteredLenses()},
_initEventHandlers:function(){this.lensesView.listenTo(this.lenses,"reset",this.onLensesReset.bind(this))},_populateFilteredLenses:function(){this._getFilteredLenses().reset(this.lenses.reject(function(a){return a.isHome()}))},_showUnpurchasedDialog:function(c){(new a.UnpurchasedDialogLenses({purchase_url:c.get("purchase_url"),purchase_link_text:c.get("purchase_link_text"),purchase_popup_title:c.get("purchase_popup_title"),purchase_instruction_text:c.get("purchase_instruction_text"),showCancel:!0})).render()},
_getStats:function(){return this.stats},_getFilteredLenses:function(){return this._filteredLenses||(this._filteredLenses=new a.Lenses)}});return c}()}}(Osp,Osp.CourseApp.Lens.Home);
Osp.CourseApp.Lens.Home.Student=function(a,c){var f=a.View.extend({template:"course/home/student/assignments-template",className:"grid grid--maxWidth",modelEvents:{sync:"render"},triggers:{"click a":"goToLens"},templateContext:{muted:function(a){return this[a]?"":"badge--muted"}}}),e=a.View.extend({template:"course/home/student/welcome-template",templateContext:{showTourButton:function(){return!!this.tour_url}}}),d=a.View.extend({template:"course/home/student/groups-template",triggers:{"click button":"group-code:click"}}),
h=a.View.extend({template:"course/home/student/layout-template",regions:{books:".home__books",assignments:".home__assignments",welcome:".home__welcome",groups:".home__groups"}});return function(){var k=new c.Common.Cache,l=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.course=a.course;this.homepage=a.homepage};_(l.prototype).extend({show:function(){this._setCachePrefix();this._isSelfStudy=a.profile.get("self_study");this.layout=new h({model:this.lens});this.layout.on("render",_.bind(function(){this._showAssignments();
this._showWelcome();this._showTeachingGroups();this._showTeachingGroupSidePanel()},this));this.region.show(this.layout);this._fetch()},_showDigitalBooks:function(){(new a.Components.DigitalBooks({books:this._getDigitalBooks()})).show(this.layout.getRegion("books"))},_showAssignments:function(){if(this.course.hasAssignmentAndMarkbookLensAvailable()&&!this._isSelfStudy){var c=new f({model:this._getStats()});c.on("goToLens",function(c,d){c=$(d.target).data("filter");d=$(d.target).data("lens");d=this.lens.collection.findWhere({type:d});
a.vent.trigger("course:lens:filter:show",this.lens.course().get("id"),d.get("name"),c)},this);this.layout.showChildView("assignments",c)}},_showWelcome:function(){this.layout.showChildView("welcome",new e({model:this.homepage}))},_showTeachingGroupSidePanel:function(){this.teachingGroupPanel=new a.Components.SidePanel({title:I18n.t("ui.courses.lenses.home.teaching_groups.join_group_form_title"),component:new a.Components.Course.JoinTeachingGroupForm});this.teachingGroupPanel.component.on("save",function(){a.courses.fetch({reset:!0,
noSpinner:!0})});this.teachingGroupPanel.show(this.layout)},getTeachingGroupSidePanel:function(){return this.teachingGroupPanel},_showTeachingGroups:function(){if(!this._isSelfStudy){var a=(new d({model:this.homepage})).on("group-code:click",function(){this.getTeachingGroupSidePanel().toggle()},this);this.layout.showChildView("groups",a)}},_openLens:function(c){a.vent.trigger("course:lens:show",this.course.id,c.get("name"))},_fetch:function(){return $.when(this._fetchDigitalBooks(),this._fetchStats())},
_fetchDigitalBooks:function(){return this._getDigitalBooks().fetch().done(function(){this._getDigitalBooks().isEmpty()||this._showDigitalBooks()}.bind(this))},_fetchStats:function(){var a=this._getStats();a.set(k.get("stats")||{});var c=this._showAssignments.bind(this);return a.fetch({noSpinner:!0}).then(function(d){d=a.parse(d);k.set("stats",d);c()})},_getStats:function(){return this.stats||(this.stats=new a.MarkbookStats({course:this.course}))},_getDigitalBooks:function(){return this._digitalBooks||
(this._digitalBooks=new a.Digibooks(null,{course:this.course}))},_setCachePrefix:function(){k.setPrefix(_.sprintf("course-%d",this.course.id))}});return l}()}(Osp,Osp.CourseApp.Lens.Home);
Osp.CourseApp.Lens.Home.SmartStudent=function(a,c,f){var e=a.View.extend({template:"course/home/smart_student/layout-template",className:function(){return this.model.get("show_background_image")?"home--smart-student home--branding loading":"home--smart-student loading"},regions:{books:".home__books",reports:{el:".home__reports",replaceElement:!0},nextSteps:{el:".home__nextSteps",replaceElement:!0},assignments:{el:".home__assignments",replaceElement:!0}},templateContext:{showGettingStarted:function(){return!!this.getting_started_header},
showAcknowledgements:function(){return!!this.acknowledgements_url},widgetColumnClassname:function(){return this.showNextSteps()?"home__widget--smart":"home__widget--non-smart"},showNextSteps:function(){return this.smart}},triggers:{'click [data-action="open:join_group"]':"open:join_group",'click [data-action="open:getting_started"]':"open:getting_started"}}),d=a.Model.extend({parse:a.Model.prototype.parseJsonAPI,url:function(){return"/api/v2/courses/"+a.currentCourse.id+"/level_ups/"+this.id}}),h=
a.View.extend({className:"home__reports",template:"course/home/smart_student/reports-template",modelEvents:{change:"render"}}),k=a.View.extend({className:"home__gettingStarted",template:_.template("{[ getting_started_body ]}")}),l=c.Component.extend({view:k}),m=c.Component.extend({view:e,fetch:function(){return $.when(this.booksStore().fetch(),this.dataStore().invalidate().fetch())},refresh:function(){var a=this;this.$el().addClass("loading");return this.dataStore().invalidate().fetch().done(function(){return a.$el().removeClass("loading")})},
fetchCourses:function(){a.courses.fetch({reset:!0,noSpinner:!0})},gettingStartedPresent:function(){return!!this.model.get("getting_started_header")},visited:function(){this._visited||(this._visited=new a.VisitedCoursesService);return this._visited},firstTimeFlow:function(){this.visited().alreadyVisited||(this.gettingStartedPresent()&&this.gettingStartedPanel().toggle(),this.visited().storeVisit())},dataStore:function(){return this.getStore(f.TYPE.COURSE_HOMEPAGE_DATA_FOR_STUDENT)},booksStore:function(){return this.getStore(f.TYPE.DIGITAL_BOOKS)},
assignments:function(){return this.dataStore().get().assignments()},isSmart:function(){return this.model.get("smart")},nextSteps:function(){return this.dataStore().get().nextSteps()},reactivateTask:function(){return this.nextSteps().reactivateTask()},channels:function(){return[Backbone.Radio.channel("level_ups"),Backbone.Radio.channel("reactivates"),Backbone.Radio.channel("student_assignments")]},onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()});this.listenTo(a,
"open:join_group",function(){return c.joinGroupPanel().delayToggle()});this.listenTo(a,"open:getting_started",function(){return c.gettingStartedPanel().delayToggle()});this.channels().forEach(function(a){return c.listenTo(a,"submitted",function(){return c.refresh()})})},onRender:function(){var a=this;this.fetch().then(function(){a.showDigitalBooks();a.isSmart()&&a.showReports();a.showAssignments();a.model.get("smart")&&a.showNextSteps();a.$el().removeClass("loading");a.firstTimeFlow()})},showDigitalBooks:function(){var a=
this.booksStore().get();a.isEmpty()||(new c.DigitalBooks({books:a})).show(this.getRegion("books"))},showReports:function(){var a=new h({model:this.dataStore().get()});this.showChildView("reports",a)},showAssignments:function(){var a=this,d=(new c.Course.AssignmentsWidget({collection:this.assignments()})).show(this.getRegion("assignments"));this.listenTo(d,"open:due_today",function(){return a.open("assignments","due_today")});this.listenTo(d,"open:due_this_week",function(){return a.open("assignments",
"due_this_week")});this.listenTo(d,"open:assignments",function(){return a.open("assignments")});this.listenTo(d,"open:assignment",function(c){return a.openAssignment(c)})},showNextSteps:function(){var a=this,d=(new c.Course.NextStepsWidget({collection:this.nextSteps()})).show(this.getRegion("nextSteps"));this.listenTo(d,"open:next_steps",function(){return a.open("next_steps")});this.listenTo(d,"open:next_step",function(c){return a.openNextStep(c)})},joinGroupPanel:function(){var a=this,d=this.model.get("join_group_body");
d=new c.Course.JoinTeachingGroupForm({instructions:d});var e=this.model.get("join_group_header")||I18n.t("ui.courses.lenses.home.teaching_groups.join_group_form_title");d=(new c.SidePanel({title:e,component:d,destroyOnClose:!0})).show();this.listenTo(d,"save",function(){return a.fetchCourses()});return d},gettingStartedPanel:function(){var a=this.model.get("getting_started_header"),d=new l({model:this.model});return(new c.SidePanel({title:a,component:d,destroyOnClose:!0})).show()},openAssignment:function(d){d=
new a.Assignment({id:d.get("assignment_id"),student_assignment_id:d.id},{course:this.course});(new c.Course.StudentAssignment.Panel({model:d})).show().toggle()},openNextStep:function(a){"reactivate"==a.get("item_type")?this.startReactivate():this.startLevelUp(a.id)},startLevelUp:function(c){var e=this,f=new d({id:c});f.fetch().done(function(){var c=new a.LevelUpManager(f);c.launch();e.listenTo(c,"submitted",function(){return e.onceLevelUpSubmitted(f)})})},startReactivate:function(){var c=new a.ReactivateManager(this.course.id);
c.task=this.reactivateTask();c.start()},onceLevelUpSubmitted:function(a){(new c.Course.StudentAssignmentResultsPanel({model:a})).show().toggle()},open:function(c,d){d=void 0===d?null:d;(c=this.lens.collection.findWhere({type:c}))&&(d?a.vent.trigger("course:lens:filter:show",this.course.id,c.get("name"),d):a.vent.trigger("course:lens:show",this.course.id,c.get("name")))}});e=function(a){this.lens=a.lens;this.region=a.region;this.course=a.course;this.homepage=a.homepage};e.prototype.show=function(){this.component.show(this.region)};
$jscomp.global.Object.defineProperties(e.prototype,{component:{configurable:!0,enumerable:!0,get:function(){return this._component?this._component:this._component=new m({lens:this.lens,course:this.course,model:this.homepage})}}});return e}(Osp,Osp.Components,Osp.Store);
Osp.CourseApp.Lens.Home.Token=function(a,c,f){a=a.View.extend({className:"loading",template:"course/home/token/layout-template",regions:{books:".home__books"},templateContext:function(){return{showAcknowledgements:function(){return!!this.acknowledgements_url}}}});var e=c.Component.extend({view:a,fetch:function(){return this.booksStore().fetch()},booksStore:function(){return this.getStore(f.TYPE.DIGITAL_BOOKS)},onCreate:function(a){var c=this;this.listenTo(a,"render",function(){return c.onRender()})},
onRender:function(){var a=this;this.fetch().then(function(){a.showDigitalBooks();a.$el().removeClass("loading")})},showDigitalBooks:function(){var a=this.booksStore().get();a.isEmpty()||(new c.DigitalBooks({books:a})).show(this.getRegion("books"))}});a=function(a){this.lens=a.lens;this.region=a.region;this.course=a.course;this.homepage=a.homepage};a.prototype.show=function(){this.component.show(this.region)};$jscomp.global.Object.defineProperties(a.prototype,{component:{configurable:!0,enumerable:!0,
get:function(){return this._component?this._component:this._component=new e({lens:this.lens,course:this.course,model:this.homepage})}}});return a}(Osp,Osp.Components,Osp.Store);
Osp.CourseApp.Lens.Resources=function(a,c,f){var e={resources:{favourites:"favourites",myContents:"my_resources"},assignments:{favourites:"favourites",myContents:"my_assignments"},planning:{favourites:"favourites",myContents:"my_plans"}},d=a.View.extend({template:"course/resources/layout-template",tagName:"section",className:"resources",templateContext:{showAssignmnetBasket:function(){return a.profile.isTeacher()},showMyContent:function(){return a.profile.isTeacher()},myContentsLabel:function(){return I18n.t("ui.my_content."+
this.type)}},ui:{favouritesButton:"[data-action=favourites]",myContentButton:"[data-action=myContents]",assignmentBasket:"[data-action=assignmentBasket]",assignmentsCounter:"[data-counter=assignments]",resourcesTree:"[data-action=toggleResourcesTree]",assignmentMessage:"[data-event=assignmentAdded]",favouriteAddedMessage:"[data-event=favouriteAdded]",favouriteRemovedMessage:"[data-event=favouriteRemoved]"},triggers:{"click @ui.favouritesButton":"favourites","click @ui.myContentButton":"myContents",
"click @ui.assignmentBasket":"assignmentBasket","click @ui.resourcesTree":"toggleResourcesTree"},regions:{structures:".structures",contents:".section__body",header:{el:".section__header",replaceElement:!0}},activateLensFilter:function(a){this.$(".sidepanel").addClass("sidepanel--footerActive");this.$(".sidepanel__footerItem--active").removeClass("sidepanel__footerItem--active");this.$("[data-action="+a+"]").parent().addClass("sidepanel__footerItem--active")},deactivateLensFilters:function(){this.$(".sidepanel").removeClass("sidepanel--footerActive");
this.$(".sidepanel__footerItem--active").removeClass("sidepanel__footerItem--active")},updateAssignmentsCounter:function(a){this.getUI("assignmentsCounter").toggleClass("hidden",!a).text(a)},showTimedMessage:function(a){a.addClass("message--visible");_.delay(function(){a.removeClass("message--visible")},3E3)},showAssignmentsAddedMessage:function(){this.showTimedMessage(this.getUI("assignmentMessage"))},getFavouriteMessageFor:function(a){return a.get("starred")?this.getUI("favouriteAddedMessage"):
this.getUI("favouriteRemovedMessage")},getFavouriteTextMessage:function(a){return a.get("starred")?"Added to favourites":"Removed from favourites"},showFavouriteChangedMessage:function(a){var c=this.getFavouriteMessageFor(a);this.showTimedMessage(c);if(!c.find("p").length){a=this.getFavouriteTextMessage(a);var d=$("<p>").text(a);setTimeout(function(){return c.append(d)},50);setTimeout(function(){return d.remove()},3E3)}}}),h=Mn.Object.extend({initialize:function(a){this.contents=a.getContents();this.contentIds=
a.contentIds},singleContent:function(){return 1===this.contentIds.length},showContent:function(){this.singleContent()&&this.contents.first().showContent()},onFetched:function(){this.contentIds&&(this.showContent(),this.contents.setContentIds(this.contentIds=null))},fetch:function(){this.contents.resetCurrentPage();this.contentIds&&this.contents.setContentIds(this.contentIds);this.contents.fetch({reset:!0}).done(this.onFetched.bind(this))}});return{Controller:Mn.Object.extend({initialize:function(c){c=
c||{};this.region=c.region;this.lens=c.lens;this.course=a.currentCourse;this.contentIds=c.contentIds;this.fetchManager=new h(this)},show:function(){this.layout=new d({model:this.lens,collection:this.getContents()});this.listenTo(this.layout,"render",this.onRender.bind(this));this.listenTo(this.layout,"favourites",this.loadLensFilter.bind(this,"favourites"));this.listenTo(this.layout,"toggleResourcesTree",this.toggleResourcesTree.bind(this,"toggleResourcesTree"));this.listenTo(this.layout,"destroy",
this.destroy.bind(this));this.listenToTeacherEvents();this.region.show(this.layout)},onRender:function(){this.setComposedClassToBody();this.showStructures();this.showHeader();this.showContents();this.setSearchTerms();this.setCurrentStructure();this.fetch();a.profile.isTeacher()&&this.updateAssignmentsCounter();1023>=$(window).width()&&this.attachSidepanelListener()},listenToTeacherEvents:function(){if(a.profile.isTeacher()){var c=this.getAssignmentPool();a.vent.on("change:myContents",this.fetch.bind(this));
this.listenTo(c,"drafts:add",this.onDraftAdded.bind(this));this.listenTo(c,"drafts:remove",this.onDraftRemoved.bind(this));this.listenTo(c,"drafts:empty",this.onAllDraftsRemoved.bind(this));this.listenTo(c,"drafts:create",this.onDraftsCreated.bind(this));this.listenTo(c,"change:count",this.updateAssignmentsCounter.bind(this));this.listenTo(this.layout,"myContents",this.loadLensFilter.bind(this,"myContents"));this.listenTo(this.layout,"assignmentBasket",this.showAssignmentBasket.bind(this))}},showStructures:function(){this.structures=
new c.Structures({course:this.course,lens:this.lens});this.listenTo(this.structures,"node:view",this.onStructureView.bind(this));this.structures.show(this.layout.getRegion("structures"))},showHeader:function(){var d={lens:this.lens,filters:this.getFilters(),collection:this.getContents()};a.profile.isTeacher()&&_(d).extend({pool:this.getAssignmentPool()});this.header=new c.Course.ContentLensHeader(d);this.listenTo(this.header,"assignNow",this.onAssignNow.bind(this));this.listenTo(this.header,"assignLater",
this.addToAssignmentBasket.bind(this));this.listenTo(this.header,"search",this.onSearch.bind(this));this.header.show(this.layout.getRegion("header"))},showContents:function(){var a=this,d=new c.List.Contents({collection:this.getContents()});this.listenTo(d,"selection:change",this.toggleHeader.bind(this));this.listenTo(d,"node:activate",this.onStructureActivate.bind(this));this.listenTo(d,"goTo:top",this.goToTop.bind(this));this.listenTo(this.getContents(),"sync",function(){return a.toggleStatusPresenter()});
d.show(this.layout.getRegion("contents"))},toggleStatusPresenter:function(){var a=this.layout.$el.find(".hide-when-not-empty").hide();0===this.getContents().length&&setTimeout(function(){return a.show()},250)},showAssignmentBasket:function(){this.getAssignmentBasket().toggle()},getAssignmentBasket:function(){if(this.basket)return this.basket;this.basket=new c.Course.AssignmentBasket({className:"sidepanel assignmentBasket",model:this.getAssignmentPool()});this.basket.show(this.layout);return this.basket},
toggleInBasketMessage:function(a,c){this.getContents().filter(function(c){return _.contains(a,c.id)}).forEach(function(a){a.trigger("added_to_basket",c)})},onDraftAdded:function(a){this.toggleInBasketMessage([a],!0)},getContentInBasket:function(){return a.currentCourse.assignmentPool().get("draft_assignments")},onDraftRemoved:function(a){1===_.countBy(this.getContentInBasket(),function(a){return a.test_id})[a]&&this.toggleInBasketMessage([a],!1)},onAllDraftsRemoved:function(a){this.toggleInBasketMessage(a,
!1)},onDraftsCreated:function(){this.layout.showAssignmentsAddedMessage()},fetch:function(){return this.fetchManager.fetch()},setComposedClassToBody:function(){$("body").addClass("body--composed")},getSearchTerms:function(){var a=this.getFilters().reduce(function(a,c){return _(a).extend(c.getSearchTerm())},{});return _(a).extend({query:this.query||""})},setSearchTerms:function(){this.getContents().resetSearch();this.getContents().setSearchTerms(this.getSearchTerms())},onFiltering:function(a){"sort_by"===
a.get("name")?this.getContents().setSort(a.getSort()):this.setSearchTerms();this.fetch()},onSearch:function(a){this.query=a;this.setSearchTerms();this.fetch()},onStructureView:function(a){this.layout.deactivateLensFilters();this.getContents().setFilter(null);this.getContents().setStructure(a.isRoot()?null:a);this.fetch();this.closeResourcesTree();this.goToTop()},onStructureActivate:function(a){this.onStructureView(this.structures.activateBy(a))},onDestroy:function(){$("body").removeClass("body--composed body--noScroll")},
onSync:function(){this.layout.$el.toggleClass("resources--empty",this.getContents().isEmpty())},onToggleFavourite:function(a){this.layout.showFavouriteChangedMessage(a);this.getContents().isFavouriteFilterActive()&&(a=this.getContents().information,a.startRecord==a.endRecord&&this.getContents().resetCurrentPage(),this.getContents().fetch({reset:!0}))},addToAssignmentBasket:function(){try{return this.getAssignmentPool().createDrafts(this.getSelectedContents(),this.getStructure(),this.lens),this.getContents().setForAll({checked:!1}),
this.toggleHeader(),!0}catch(k){return k===a.AssignmentPool.LIMIT_EXCEEDED&&this.showLimitExceededMessage(),!1}},onAssignNow:function(){this.addToAssignmentBasket()&&this.getAssignmentBasket().toggle()},showLimitExceededMessage:function(){var c=_.template('<p><a href="{{ link }}" class="link">{{\u00a0label }}</a></p>');(new a.AlertDialog({title:"Assignment basket full",message:"You can only have 40 assignments in your basket. You can\u2019t add your current selection to the basket."+c({link:"https://support.kerboodle.com/teacher-support/assessment-and-markbook/assigning-work-with-assignment-basket",
label:I18n.t("ui.assignment_basket.need_help")})})).render()},updateAssignmentsCounter:function(){this.layout.updateAssignmentsCounter(this.getAssignmentPool().get("count"))},attachSidepanelListener:function(){new a.FocusManagerService(this.layout,".sidepanel--lenabled")},toggleResourcesTree:function(){var a=this.layout.$el.find(".sidepanel--lenabled");$("body").toggleClass("body--noScroll");a.toggleClass("sidepanel--enabled");this.layout.$el.find(".moreRoot--enabled").removeClass("moreRoot--enabled");
a.hasClass("sidepanel--enabled")?(a=a.find("#browse\\ sidepanel-focusable")[0])&&a.focus({focusVisible:!1}):(a=this.layout.$el.find("#browseResourcesButton")[0])&&a.focus({focusVisible:!1})},openResourcesTree:function(){$("body").addClass("body--noScroll");this.layout.$el.find(".sidepanel--lenabled").addClass("sidepanel--enabled");this.layout.$el.find(".moreRoot--enabled").removeClass("moreRoot--enabled")},closeResourcesTree:function(){$("body").removeClass("body--noScroll");this.layout.$el.find(".sidepanel--lenabled").removeClass("sidepanel--enabled")},
toggleHeader:function(){this.header.toggle()},goToTop:function(){this.layout.$(".section__body").animate({scrollTop:0},500)},setCurrentStructure:function(){try{var a=this.getStructure();this.getContents().setStructure(a.isRoot()?null:a)}catch(l){}},getSelectedContents:function(){return this.getContents().allThatAre("checked")},getContents:function(){if(this.contents)return this.contents;this.contents=new a.PaginatedContents(null,{course:this.course,lens:this.lens});this.contents.perPage=40;this.listenTo(this.contents,
"sync reset",this.onSync.bind(this));this.listenTo(this.contents,"change:starred",this.onToggleFavourite.bind(this));return this.contents},getAssignmentPool:function(){return this.pool?this.pool:this.pool=this.course.assignmentPool()},getStructure:function(){return this.structures.getActive()},getLensFilter:function(a){return this.lens.filters().findWhere({name:e[this.lens.get("type")][a]})},loadLensFilter:function(a){this.layout.activateLensFilter(a);this.getContents().setFilter(this.getLensFilter(a));
this.getContents().setStructure(null);this.fetch();this.closeResourcesTree();this.goToTop()},getFilters:function(){if(this.filters)return this.filters;this.filters=(new f.ContentsFilters({lens:this.lens,defaults:_.extend({},a.state.getSearch())})).build();a.state.resetSearch();this.listenTo(this.filters,"change:selected",_.debounce(this.onFiltering.bind(this),50));return this.filters}})}}(Osp,Osp.Components,Osp.Builders);
Osp.CourseApp.Lens.Resources.Search=function(a){var c=a.AdvancedSearchView.extend({template:"course/resources/search-template",templateContext:function(){return{title:this.title||I18n.t("ui.search.advanced"),formatNameFor:function(a){a=this._getIndexedFormatsByName()[a];return I18n.t("ui.formats."+a.key,{defaultValue:a.name})}.bind(this),sourceNameFor:function(a){switch(a){case "oup":a="Oxford";break;case "other":a="School Resources";break;default:a="My Resources"}return a}.bind(this)}},initialize:function(c){a.AdvancedSearchView.prototype.initialize.apply(this,
arguments);this.userId=c.userId;this.formats=c.formats;this.title=c.title},serializeData:function(){return _.extend(a.AdvancedSearchView.prototype.serializeData.apply(this,arguments),{hasNewContents:this.lens.get("has_new_contents"),hasUpdatedContents:this.lens.get("has_updated_contents"),formats:this.formats,userId:this.userId})},extractSearchFromControls:function(){var a=this.$("input[name=query]"),c=this.$("#search-box .type"),d=this.$("#search-box .source"),h=this.$("#search-box .new_contents"),
k=this.$("#search-box .updated_contents"),l={};_.isEmpty(a.val())||(l.query=a.val());c.length&&(l.type=c.data("value"));d.length&&(l.source=d.data("value"));h.length&&(l.new_contents=h.data("value"));k.length&&(l.updated_contents=k.data("value"));return l},_getIndexedFormatsByName:function(){return this._indexedFormatsByName||(this._indexedFormatsByName=this.formats.reduce(function(a,c){a[c.name]=c;return a},{}))}});return{Controller:function(){var f=function(c){c=c||{};this.region=c.region;this.lens=
c.lens;this.title=c.title;this.formats=c.formats||gon.formats;this.userId=c.userId||a.profile.get("id")};_(f.prototype).extend(Backbone.Events,{show:function(a){this.searchView=new c({model:a,lens:this.lens,formats:this.formats,userId:this.userId,title:this.title});this.searchView.on("search",function(a){this.trigger("search",a)},this);this.region.show(this.searchView)},focus:function(){this.searchView.focus()}});return f}()}}(Osp);
Osp.CourseApp.Lens.Resources.List=function(a){var c={};c.ContentsView=a.ListView.extend({headView:a.TableHeadView,footView:a.CourseLensFootView,childView:a.ListContentView});var f=a.View.extend({template:"course/resources/list/layout-template",regions:{actionsZone:"#actions",optionsZone:"#options",contentsZone:"#contents",previewZone:"#preview",paginationZone:".pagination-wrapper"}});c.Controller=function(){var e=function(c){c=c||{};this.region=c.region;this.titleBookRegion=c.titleBookRegion;this.manager=
new a.CourseApp.Lens.ContentsListManager};_(e.prototype).extend({showFirstFilter:function(c,e){a.CourseApp.onFirstFilterReady(c,e,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},showFilter:function(c,e,f,l){a.CourseApp.onFilterReady(c,e,f,_.bind(function(a,c,d){a=d.contents(f,l);this._show(a,c)},this))},showStructure:function(c,e,f,l){a.CourseApp.onStructureReady(c,e,f,_.bind(function(c,d,e){e.expandAndActivate();c=e.contents(d,l);this._show(c,d);this._courseHasPageRangeNavigator()&&
this.titleBookRegion.show(new a.CourseApp.Lens.Title.BookView({model:new a.Book({structure:e})}))},this))},search:function(){this.manager.search()},_show:function(a,c){this.manager.set(a);this.layout=new f;this.layout.on("render",function(){this._showPagination(a,c);this._showActions(a,c);this._showOptions(a,c);this._showContents(a,c);this._showPreview(c)},this);this.region.show(this.layout)},_showPagination:function(c,e){this.layout.showChildView("paginationZone",new a.NumberedPaginationView({collection:c,
lens:e}))},_showActions:function(c,e){c=new a.Actions(null,{targets:c,course:e.course(),lens:e});c.reset(a.config.actions[this._getProfileType()].resources);c=new a.ActionsView({collection:c});this.layout.showChildView("actionsZone",c)},_showOptions:function(c,e){this.layout.showChildView("optionsZone",new a.ListOptionsView({lens:e,collection:c}))},_showContents:function(a,e){this.layout.showChildView("contentsZone",new c.ContentsView({lens:e,collection:a}))},_showPreview:function(c){this.layout.showChildView("previewZone",
new a.ContentPreviewView({lens:c}))},_courseHasPageRangeNavigator:function(){return a.currentCourse.get("has_page_range_navigator")},_getProfileType:function(){return a.profile.get("type")}});return e}();return c}(Osp);"use strict";
Osp.CourseApp.Lens.Resources.Panel=function(){var a={},c,f,e,d;a.TreeLayout=Osp.View.extend({template:"course/resources/panel/tree-template",regions:{filtersLayout:"#filters-panel",structuresLayout:"#structures-panel"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._course=a&&a.course||null;this._structure=a&&a.structure||null},onRender:function(){var a=this._course.id,c=this._course.structures();this.showChildView("filtersLayout",new Osp.FiltersView({collection:d,
lens:e}));this.showChildView("structuresLayout",new Osp.TreeRootView({collection:c,lens:e,observer:Osp.NavigationObserver,activeAttr:"activeBrowserPanel"}));c=e.get("name");if(this._structure)Osp.vent.trigger("course:resources:panel:node:show",a,c,this._structure);else{var f=d.first().get("name");Osp.vent.trigger("course:resources:panel:filter:show",a,c,f)}}});a.DigitalBookTreeLayout=a.TreeLayout.extend({initialize:function(c){a.TreeLayout.prototype.initialize.apply(this,arguments);this._digitalBookId=
c&&c.digitalBookId||null;this._page=c&&c.page||"0"},onRender:function(){var a=this;this.showChildView("filtersLayout",new Osp.FiltersView({collection:d,lens:e}));this._course.pStructures().done(function(c){var f=a._course.id,h=e.get("name"),k=parseInt(a._digitalBookId),m=parseInt(a._page),l=null;_.isNull(k)||(l=c.getFirstDeepestStructureByDigibookPage(k,m));"0"==a._page||_.isNull(l)?(k=d.first().get("name"),Osp.vent.trigger("course:resources:panel:filter:show",f,h,k)):(Osp.vent.trigger("course:resources:panel:node:show",
f,h,l.id),l.expandAndActivate(),l.set("activeBrowserPanel",!0));a.showChildView("structuresLayout",new Osp.TreeRootView({collection:c,lens:e,observer:Osp.NavigationObserver,activeAttr:"activeBrowserPanel"}))})}});a.OptionsView=Osp.View.extend({className:"options-panel",template:"course/resources/panel/options-template"});a.HeadListView=Osp.TableHeadView.extend({template:"course/resources/panel/head-template"});a.ContentListView=Osp.ListContentView.extend({template:"course/resources/panel/item-template",
initialize:function(a){Osp.ListContentView.prototype.initialize.apply(this,arguments);this._insideIframe=a&&a.insideIframe||null},onClickName:function(a){this._insideIframe?(a.preventDefault(),a.stopPropagation(),this.model.showContent(this.$el,window.parent)):Osp.ListContentView.prototype.onClickName.apply(this,arguments)}});var h=Osp.TableRows.extend({insideIframe:!1,childViewOptions:function(){return{lens:e,insideIframe:this.insideIframe}}}),k=h.extend({insideIframe:!0});a.ContentsView=Osp.ListView.extend({template:"course/resources/panel/table-template",
initialize:function(a){Osp.ListView.prototype.initialize.apply(this,arguments);this.rowsView=a&&a.insideIframe&&k||h},headView:a.HeadListView,childView:a.ContentListView,paginationView:Osp.SimplePaginationView});var l=Mn.Object.extend({initialize:function(a,c){this.view=a;this.selected=new Osp.Collection(c||[])},bindListeners:function(){this.listenTo(this.collection,"sync",this.onSync.bind(this));this.listenTo(this.collection,"change:checked",this.select.bind(this));this.listenTo(this.view,"destroy",
this.onDestroy.bind(this))},setCollection:function(a){this.collection&&this.stopListening();this.collection=a;this.bindListeners()},onDestroy:function(){this.stopListening()},onSync:function(){this.collection.each(this.checkIfSelected,this)},checkIfSelected:function(a){this.selected.get(a)&&a.set("checked",!0)},select:function(a){a.get("checked")?this.selected.add(a):this.selected.remove(a)},get:function(){return this.selected.models.slice(0)}});a.ListLayout=Osp.View.extend({getTemplate:function(){return this._digitalBook?
"course/resources/panel/list-digital-book-template":"course/resources/panel/list-template"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._contents=a&&a.contents||null;this._digitalBook=a&&a.digitalBook||null;this._external=a&&a.external||null;this._selection=a&&a.selection||null;this._selection.setCollection(this._contents);this.listenTo(this._contents,"change",this.enableAddButton.bind(this));this.listenTo(this._contents,"change:starred",this.onContentStarred.bind(this))},
regions:{contentLayout:"#contents-panel"},onRender:function(){this.showChildView("contentLayout",new a.ContentsView({collection:this._contents,insideIframe:this._external}))},getSelectedContents:function(){return this._selection.get()},enableAddButton:function(){var a=this.$el.parents(".resources-panel").find("input[type=submit]");0<this.getSelectedContents().length?a.removeClass("disabled"):a.addClass("disabled")},onContentStarred:function(){d.refreshRelatedCollections()}});a.Layout=Osp.DialogLayout.extend({className:"resources-panel",
template:"course/resources/panel/layout-template",regions:{treePanelLayout:"#tree-panel",listPanelLayout:"#list-panel"},events:_.extend({"click input[type=submit]":"onClickSubmit"},Osp.DialogLayout.prototype.events),templateContext:function(){var a=this._title;return _.extend({title:function(){return a||I18n.t("ui.browser.panel.title")}},Osp.DialogLayout.prototype.templateContext)},initialize:function(h){Osp.DialogLayout.prototype.initialize.apply(this,arguments);h=h||{};this._course=h.course;this._structure=
h.structure;this._callback=h.callback;this._title=h.title;this.selection=new l(this,h.selected);e=(new Osp.Lenses(h&&h.resourceLens||this._course.get("resources_panel_source_lens"),{course:this._course})).first();e.hasPageRangeNavigator=function(){return!1};e.set("type","resources:panel",{silent:!0});d=e._filters;c=Osp.state.getFilter();f=Osp.state.getStructure();this._course.refreshStructuresCollection();this.listenTo(Osp.vent,"course:resources:panel:filter:show",function(c,d,e){null==e?a.showFirstFilter(c,
d):a.showFilter(c,d,e,this)}.bind(this));this.listenTo(Osp.vent,"course:resources:panel:node:show",function(c,d,e){a.showStructure(c,d,e,this)}.bind(this))},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);this.showChildView("treePanelLayout",new a.TreeLayout({lens:e,course:this._course,structure:this._structure}))},selectedContents:function(){return this.getChildView("listPanelLayout").getSelectedContents()},onClickSubmit:function(a){$(a.target).hasClass("disabled")||
this._callback(this.selectedContents())},restoreOldFilterAndStructure:function(){Osp.state.setFilter(c);Osp.state.setStructure(f)},markContentsAsUnfetched:function(){this._course.structures().eachRecursive(function(a){_.isUndefined(a.currentContents(e))||a.currentContents(e).planFetch()})},onDestroy:function(){e._filters.refreshRelatedCollections();this.markContentsAsUnfetched();this.restoreOldFilterAndStructure();this._course.restoreSearchTerms()}});a.ExternalLayout=a.Layout.extend({external:!0,
className:"resources-panel external",template:"course/resources/panel/external-template",initialize:function(c){a.Layout.prototype.initialize.apply(this,arguments);Osp.state.setLens(e)},onRender:function(){this.showChildView("treePanelLayout",new a.TreeLayout({lens:e,course:this._course}))},setBodyModalHeight:function(a){var c=this.$(".modal-header"),d=this.$(".modal-footer"),e=0;d.length?(this.$(".modal-body").height(a-c.outerHeight()-d.outerHeight()-parseInt(this.$(".modal-body").css("padding-top"))-
parseInt(this.$(".modal-body").css("padding-top"))),e=d.position().top):this.$(".modal-body").height(a-c.outerHeight()-parseInt(this.$(".modal-body").css("padding-top"))-parseInt(this.$(".modal-body").css("padding-top")));_.each(this.$(".dialog-fix, .height-fix"),function(a){var c=$(a).position().top,d=parseInt(this.$(a).css("padding-top")),f=parseInt(this.$(a).css("padding-bottom"));this.$(a).height(e-c-this._until_footer-d-f+10)},this)},onClickSubmit:function(a){a=$(a.target);if(!a.hasClass("disabled")){var c=
this.getChildView("listPanelLayout").getSelectedContents();a.trigger("resources:added",[c])}}});a.DigitalBookExternalLayout=a.ExternalLayout.extend({digitalBook:!0,external:!0,className:"resources-panel digital-book-panel",initialize:function(c){a.ExternalLayout.prototype.initialize.apply(this,arguments);this._digitalBookId=c&&c.digitalBookId||null;this._page=c&&c.page||null},onRender:function(){this.showChildView("treePanelLayout",new a.DigitalBookTreeLayout({lens:e,course:this._course,digitalBookId:this._digitalBookId,
page:this._page}))}});a.showFirstFilter=function(c,e,f){c=d.first().get("name");a.showFilter(c,f)};a.showFilter=function(c,e,f,h){c=d.where({name:f})[0].contents(f);h.showChildView("listPanelLayout",new a.ListLayout({contents:c,digitalBook:h.digitalBook,external:h.external,selection:h.selection}))};a.showStructure=function(c,d,f,h){Osp.state.getCourse().pStructures().done(function(c){c=c.getRecursive(f).contents(e);h.showChildView("listPanelLayout",new a.ListLayout({contents:c,digitalBook:h.digitalBook,
external:h.external,selection:h.selection}))})};return a}();
Osp.CourseApp.Lens.Resources.Panel.Digibook=function(a,c,f,e,d){var h=a.Model.extend({defaults:{query:"",type:"",source:"",new_contents:null,updated_contents:null}}),k=a.Model.extend({initialize:function(c,d){e.mergeOptions(this,d,["structures","lens","filters"]);a.Model.prototype.initialize.apply(this,arguments)},search:function(){return $.when(new a.PaginatedCollection([]))}}),l=k.extend({search:function(c){return $.when(c&&c.contents(this.lens)||new a.PaginatedContents([]))}}),m=k.extend({search:function(c){return $.when(c&&
c.contents(this.lens)||new a.PaginatedContents([]))}}),n=k.extend({search:function(){var a=this.filters.findWhere({name:"favourites"});return $.when(a.contents())}}),q=k.extend({search:function(){var a=this.filters.findWhere({name:"my_resources"});return $.when(a.contents())}}),t=e.Object.extend({initialize:function(a){this.mergeOptions(a,["buttons"])},activate:function(a){d(this.buttons).invoke("set",{active:!1});a.set({active:!0})},getActive:function(){return d(this.buttons).find(function(a){return a.get("active")})}}),
y=e.Object.extend({initialize:function(){this.fetched=[]},add:function(a){this.fetched.push(a);this.fetched=d.uniq(this.fetched);return a},clear:function(){d.invoke(this.fetched,"planFetch");this.fetched=[];return this}}),v=a.View.extend({template:"course/resources/panel/digibook/layout-template",className:"c_digital_book_resources_panel",ui:{tree:".tree",list:".list"},regions:{filter:".filter",tree:"@ui.tree",list:".list",toolbar:".toolbar"},showTree:function(){this.getUI("tree").show();this.getUI("list").addClass("with-tree")},
hideTree:function(){this.getUI("tree").hide();this.getUI("list").removeClass("with-tree")}});return{Controller:e.Object.extend({initialize:function(a){d.defaults(a,{page:1});this.mergeOptions(a,["region","digitalBookId","course","page","mode"]);this.currentContents=null;this.fetched=new y},show:function(a){a=a||{};this.page=a.page||this.page;this.mode=a.mode||this.mode;this.layout=new v;this.layout.on("render",function(){var a=this._getContents();this._showSearch();this._showToolbar();this._showStructures();
this._refreshTreeVisibility();a&&this._showList(a)},this);this.region.show(this.layout);this._fetchStructures().then(this._fetchContentsFromToolbarAction.bind(this)).then(function(a){this._setContents(a);this._showList(a)}.bind(this))},changePage:function(a){this.page=a;this._reactToChangePageEvent()&&this._fetchContentsFromToolbarAction().then(function(a){this._setContents(a);this._showList(a)}.bind(this))},_showList:function(a){var c=this._getLens(),d=this._getFilters();a=new f.Digibook.List.Component({region:this.layout.getRegion("list"),
lens:c,contents:a});a.on("content:open",function(a,c){a.showContent(c.$el,window.parent)},this);a.on("content:favourite:toggle",function(){d.refreshRelatedCollections()},this);a.show()},_showStructures:function(){var c=this._getLens();this.structuresComponent=new a.Components.LegacyTree({region:this.layout.getRegion("tree"),nodes:this._getStructures(),scroll:!0,$scrollable:this._$getScrollArea()});this.structuresComponent.on("node:select",function(a){var d=a.contents(c);this._getActiveToolbarButton().set("structure",
a);this.structuresComponent.select(a);this.fetched.add(d);this._setContents(d);this._showList(d)},this);this.structuresComponent.on("destroy",function(){this.structuresComponent.deselect()},this);this.structuresComponent.show()},_showSearch:function(){var d=this._getLens(),e=new c.Search.Controller({region:this.layout.getRegion("filter"),lens:d,title:I18n.t("ui.browser.panel.digibook.search.title")});e.on("search",function(c){var f=this._getContents();this.fetched.clear().add(f);a.state.setLens(d);
a.state.resetSearch();a.state.setSearchTerms(c);e.show(new h(c));e.focus();f.resetCurrentPage();f.fetch({reset:!0})},this);e.show(new h(a.state.getSearch()))},_showToolbar:function(){var a=new f.Digibook.Toolbar.Component({region:this.layout.getRegion("toolbar"),buttons:this._getToolbarButtons()});a.on("select",function(a){var c=this._getToolbarButtonsManager(),d=this._getAuthorApiResourcePanelManager();c.activate(a);d.setCurrentViewMode(a.get("type"));this._refreshTreeVisibility();this._fetchContentsFromToolbarAction().then(function(a){this._setContents(a);
this._showList(a)}.bind(this))},this);a.show()},_refreshTreeVisibility:function(){this._getToolbarButtonsManager().getActive().get("showTree")?(this.layout.showTree(),this._refreshTreeSelection(),window.parent.authorAPI.resourcePanelMode("detailed")):(this.layout.hideTree(),window.parent.authorAPI.resourcePanelMode("simple"))},_refreshTreeSelection:function(){var a=this._getActiveNode();a?this.structuresComponent.select(a):this.structuresComponent.deselect()},_fetchStructures:function(){return this._promiseStructures||
(this._promiseStructures=function(a){return a.fetch({reset:!0}).then(function(){return a})}(this._getStructures()))},_getActiveNode:function(){var a=this._getActiveToolbarButton();if(!a.get("showTree"))return this._getStructureByPage();var c=a.get("structure");c=c||this._getStructureByPage();a.set("structure",c);return c},_getStructureByPage:function(){return this._getStructures().getFirstDeepestStructureByDigibookPage(this.digitalBookId,this.page)},_reactToChangePageEvent:function(){return this._getActiveToolbarButton().get("reactToChangePageEvent")},
_fetchContentsFromToolbarAction:function(){return this._getActiveToolbarButton().search(this._getActiveNode()).then(d.bind(this.fetched.add,this.fetched))},_getActiveToolbarButton:function(){return this._getToolbarButtonsManager().getActive()},_$getScrollArea:function(){return this.layout.getUI("tree")},_setContents:function(a){this.currentContents=a},_getContents:function(){return this.currentContents},_getStructures:function(){return this._structures||(this._structures=new a.Structures(null,{course:this.course}))},
_getFilters:function(){return this._filters||(this._filters=this._getLens()._filters)},_getLens:function(){var c;(c=this._lens)||(c=this.course,c=(new a.Lenses(c.get("resources_panel_source_lens"),{course:c})).first(),c.set("type","resources:panel",{silent:!0}),c=this._lens=c);return c},_getToolbarButtonsManager:function(){return this._toolbarButtonsManager||(this._toolbarButtonsManager=new t({buttons:this._getToolbarButtons()}))},_getAuthorApiResourcePanelManager:function(){return window.parent.authorAPI.resourcePanelManager},
_getToolbarButtons:function(){return this._toolbarButtons||(this._toolbarButtons=function(){var a={structures:this._getStructures(),lens:this._getLens(),filters:this._getFilters()};a={thisSpread:new l({type:"this_spread",showTree:!1,reactToChangePageEvent:!0,digitalBookId:this.digitalBookId},a),all:new m({type:"all",showTree:!0,reactToChangePageEvent:!1,digitalBookId:this.digitalBookId},a),myFavourites:new n({type:"my_favourites",showTree:!1,reactToChangePageEvent:!1,digitalBookId:this.digitalBookId},
a),myResources:new q({type:"my_resources",showTree:!1,reactToChangePageEvent:!1,digitalBookId:this.digitalBookId},a)};var c=d(a).find(function(a){return a.get("type")===this.mode},this);c=c||a.thisSpread;c.set({active:!0},{silent:!0});return a}.call(this))}})}}(Osp,Osp.CourseApp.Lens.Resources,Osp.CourseApp.Lens.Resources.Panel,Marionette,_);
Osp.CourseApp.Lens.Resources.Panel.Digibook.Toolbar=function(a,c){var f=a.View.extend({template:"course/resources/panel/digibook/toolbar/button-template",className:function(){return["toolbar-button",_.str.sprintf("toolbar-button-%s",_.str.slugify(this.model.get("type")))].join(" ")},triggers:{"click a":"select"},modelEvents:{change:"render"},templateContext:function(){var a=this.model;return{iconClass:_.str.sprintf("icon-%s",_.str.slugify(a.get("type"))),title:I18n.t(_.str.sprintf("ui.browser.panel.digibook.toolbar.%s",
a.get("type")))}},onRender:function(){this.$el.toggleClass("active",!!this.model.get("active"))}}),e=a.View.extend({template:"course/resources/panel/digibook/toolbar/layout-template",regions:{buttonThisSpread:{el:".toolbar-button-this-spread",replaceElement:!0},buttonAll:{el:".toolbar-button-all",replaceElement:!0},buttonMyFavourites:{el:".toolbar-button-my-favourites",replaceElement:!0},buttonMyResources:{el:".toolbar-button-my-resources",replaceElement:!0}}});return{Component:c.Object.extend({initialize:function(a){this.mergeOptions(a,
["region","buttons"])},show:function(){this.toolbarView=new e;this.toolbarView.on("render",function(){this._showButtons()},this);this.toolbarView.on("childview:select",function(a){this.trigger("select",a.model)},this);this.toolbarView.on("destroy",function(){this.destroy()},this);this.region.show(this.toolbarView)},_showButtons:function(){_(this.buttons).each(function(a,c){c=_.str.sprintf("button%s",_.str.classify(c));a=new f({model:a});this.toolbarView.showChildView(c,a)},this)}})}}(Osp,Marionette);
Osp.CourseApp.Lens.Resources.Panel.Digibook.List=function(a,c){var f=a.TableHeadView.extend({template:"course/resources/panel/digibook/head-template"}),e=a.ListContentView.extend({template:"course/resources/panel/digibook/item-template",onClickName:function(a){a.preventDefault();a.stopPropagation();this.trigger("open",this)}}),d=a.ListView.extend({template:"course/resources/panel/digibook/list-template",headView:f,childView:e,paginationView:a.SimplePaginationView,childViewEventPrefix:"list"});return{Component:c.Object.extend({contentsEvents:{"change:starred":"onChangeStarred"},
initialize:function(a){this.mergeOptions(a,["region","lens","contents"]);this.bindEvents(this.contents,this.contentsEvents)},show:function(){var a=new d({lens:this.lens,collection:this.contents});a.on("list:row:open",function(a){this.trigger("content:open",a.model,a)},this);a.on("destroy",function(){this.destroy()},this);this.region.show(a)},destroy:function(){this.unbindEvents(this.contents,this.contentsEvents)},onChangeStarred:function(a){this.trigger("content:favourite:toggle",a)}})}}(Osp,Marionette);
Osp.CourseApp.Lens.Assignments=function(a,c,f){return{Controller:f.Object.extend({initialize:function(a){this.options=a},show:function(){(new (this.getRoleController())(this.options)).show()},getRoleController:function(){return a.profile.isStudent()?c.Assignments.Student.Controller:c.Resources.Controller.extend()}})}}(Osp,Osp.CourseApp.Lens,Marionette);
Osp.CourseApp.Lens.Assignments.Student=function(a,c,f,e){var d=a.View.extend({tagName:"section",className:"assignments",template:"course/assignments/student/layout-template",regions:{header:{el:".section__header",replaceElement:!0},assignments:".section__body",panel:".assignmentPanel"}}),h=c.Component.extend({view:d,onCreate:function(a){this.toggleClass(!0);this.listenTo(this.getLensFilters(),"change:active",this.onLensFilterActive.bind(this));this.listenTo(a,"render",this.onRender.bind(this))},getLensFilters:function(){return this.lens.filters()},
getFirstLensFilter:function(){var a=this.getLensFilters();return this.filterName?a.findWhere({name:this.filterName}):a.first()},activateFirstLensFilter:function(){var a=this.getFirstLensFilter();a.set({active:!0});this.onLensFilterActive(a)},onDestroy:function(){this.toggleClass(!1);this.getLensFilters().setForAll({active:!1})},toggleClass:function(a){$("body").toggleClass("body--composed",a)},showHeader:function(){var a=new c.Course.AssignmentsLensHeader({lens:this.lens,filters:this.getFilters()});
this.listenTo(a,"search",this.onSearch.bind(this));a.show(this.getRegion("header"))},showList:function(){var a=this,d=new c.List.Assignments({collection:this.getAssignments()});this.listenTo(d,"assignment:open",this.openAssignment.bind(this));this.listenTo(d,"goTo:top",this.goToTop.bind(this));this.listenTo(this.getAssignments(),"sync",function(){return a.toggleStatusPresenter()});d.show(this.getRegion("assignments"))},toggleStatusPresenter:function(){var a=this.$el().find(".hide-when-not-empty").hide();
0===this.getAssignments().length&&setTimeout(function(){return a.show()},250)},goToTop:function(){this.getView().$(".section__body").animate({scrollTop:0},500)},openAssignment:function(a){var d=this,e=a||this.assignment;a=new c.Course.StudentAssignment.Panel({model:e});a.show().toggle();this.listenTo(a,"submitted",function(){return d.fetch()});this.listenTo(a,"close",function(){return d.onClosePanel(e)})},ltiTestPresent:function(a){return _.some(a.get("test_contents"),function(a){return"lti"===a.launcher})},
onClosePanel:function(a){this.ltiTestPresent(a)&&this.fetch()},onRender:function(){var a=this;this.showHeader();this.showList();this.activateFirstLensFilter();this.assignment&&_.delay(function(){return a.openAssignment()},300)},onFiltering:function(a){"sort_by"===a.get("name")&&this.getAssignments().setSort(a.getSort());this.fetch()},onLensFilterActive:function(a){a.get("active")&&(this.getAssignments().setFilter(a),this.fetch())},onSearch:function(c){a.state.resetSearch();a.state.setSearchTerms({query:c});
this.fetch()},fetch:function(){this.getAssignments().resetCurrentPage();return this.getAssignments().fetch()},getAssignments:function(){return this._assignments||(this._assignments=new a.PaginatedAssignments(null,{lens:this.lens,course:this.lens.course()}))},getFilters:function(){if(this.filters)return this.filters;this.filters=(new f.AssignmentsFilters).build();this.listenTo(this.filters,"change:selected",_.debounce(this.onFiltering.bind(this),50));return this.filters}});return{Controller:e.Object.extend({initialize:function(a){this.region=
a.region;this.lens=a.lens;this.assignment=this.state().get("assignment");this.component=new h({lens:a.lens,assignment:this.assignment,filterName:a.filterName})},course:function(){return this.lens.course()},markbook:function(){return this.course().lenses().firstWith({type:"markbook"})},studentReports:function(){return this.course().lenses().firstWith({type:"student_reports"})},state:function(){return this.course().state()},redirectToMarkbook:function(){a.vent.trigger("course:lens:show",this.course().id,
this.markbook().get("name"))},redirectToStudentReports:function(){a.vent.trigger("course:lens:show",this.course().id,this.studentReports().get("name"),{student_assignment_id:this.assignment.get("student_assignment_id")})},fetchAssignment:function(){this.assignment.fetch().done(this.onceReady.bind(this))},onceReady:function(){this.assignment.isFinished()?this.studentReports()?this.redirectToStudentReports():redirectToMarkbook():this.showComponent()},show:function(){this.assignment?this.fetchAssignment():
this.showComponent()},showComponent:function(){this.state().unset("assignment");this.component.show(this.region)}})}}(Osp,Osp.Components,Osp.Builders,Marionette);
Osp.CourseApp.Lens.Assignments.Search=function(a){var c=a.AdvancedSearchView.extend({template:"course/assignments/search-template",templateContext:function(){return{formatNameFor:function(a){a=this._getIndexedFormatsByName()[a];return I18n.t("ui.formats."+a.key,{defaultValue:a.name})}.bind(this),sourceNameFor:function(a){switch(a){case "oup":a="Oxford";break;case "other":a=I18n.t("ui.search.advanced_search.school_content");break;default:a=I18n.t("ui.search.advanced_search.my_content")}return a}.bind(this),
usedAsNameFor:function(c){switch(c){case a.Content.SUPPORT:var e=I18n.t("ui.search.advanced_search.support");break;case a.Content.TEST:e=I18n.t("ui.search.advanced_search.test");break;case a.Content.TEST_PACKAGE:e=I18n.t("ui.search.advanced_search.package")}return e}.bind(this)}},initialize:function(c){a.AdvancedSearchView.prototype.initialize.apply(this,arguments);this.userId=c.userId;this.formats=c.formats},serializeData:function(){return _.extend(a.AdvancedSearchView.prototype.serializeData.apply(this,
arguments),{usedAsSupport:a.Content.SUPPORT,usedAsTest:a.Content.TEST,usedAsTestPackage:a.Content.TEST_PACKAGE,hasNewContents:this.lens.get("has_new_contents"),hasUpdatedContents:this.lens.get("has_updated_contents"),formats:this.formats,userId:this.userId})},extractSearchFromControls:function(){var a=this.$("input[name=query]"),c=this.$("#search-box .type"),d=this.$("#search-box .source"),h=this.$("#search-box .used_as"),k=this.$("#search-box .new_contents"),l=this.$("#search-box .updated_contents"),
m={};_.isEmpty(a.val())||(m.query=a.val());c.length&&(m.type=c.data("value"));d.length&&(m.source=d.data("value"));h.length&&(m.used_as=h.data("value"));k.length&&(m.new_contents=k.data("value"));l.length&&(m.updated_contents=l.data("value"));return m},_getIndexedFormatsByName:function(){return this._indexedFormatsByName||(this._indexedFormatsByName=this.formats.reduce(function(a,c){a[c.name]=c;return a},{}))}});return{Controller:function(){var f=function(c){c=c||{};this.region=c.region;this.lens=
c.lens;this.formats=c.formats||gon.formats;this.userId=c.userId||a.profile.get("id")};_(f.prototype).extend(Backbone.Events,{show:function(a){this.searchView=new c({model:a,lens:this.lens,formats:this.formats,userId:this.userId});this.searchView.on("search",function(a){this.trigger("search",a)},this);this.region.show(this.searchView)},focus:function(){this.searchView.focus()}});return f}()}}(Osp);
Osp.CourseApp.Lens.Assignments.List=function(a){var c={},f=a.ListContentView.extend({regions:{assignmentPoolControlZone:".assignment-pool-control"},renderPoolButton:function(){var c=new a.Components.AssignmentPool.ItemButton(a.currentCourse,this.model);this.listenTo(c,"render",this.applyHeightFix.bind(this));c.show(this.getRegion("assignmentPoolControlZone"))},applyHeightFix:function(){_.delay(function(){this.$(".assignment-pool-control").closest(".vertical-span-fix").heightFix("cell")}.bind(this),
50)},onRender:function(){a.ListContentView.prototype.onRender.apply(this);_.include([a.Content.TEST,a.Content.TEST_PACKAGE],this.model.get("used_as"))?this.renderPoolButton():this.applyHeightFix()}});c.ContentsView=a.ListView.extend({className:"assignments items",headView:a.TableHeadView,footView:a.CourseLensFootView,childView:f});var e=a.View.extend({template:"course/assignments/list/layout-template",regions:{actionsZone:"#actions",assignmentPoolZone:"#assignment_pool",optionsZone:"#options",contentsZone:"#contents",
previewZone:"#preview",paginationZone:".pagination-wrapper"}});c.Controller=function(){var d=function(c){c=c||{};this.region=c.region;this.titleBookRegion=c.titleBookRegion;this.manager=new a.CourseApp.Lens.ContentsListManager};_(d.prototype).extend({showFirstFilter:function(c,d){a.CourseApp.onFirstFilterReady(c,d,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},showFilter:function(c,d,e,f){a.CourseApp.onFilterReady(c,d,e,_.bind(function(a,c,d){a=d.contents(e,f);this._show(a,
c)},this))},showStructure:function(c,d,e,f){a.CourseApp.onStructureReady(c,d,e,_.bind(function(c,d,e){e.expandAndActivate();c=e.contents(d,f);this._show(c,d);this._courseHasPageRangeNavigator()&&a.profile.isTeacher()&&this.titleBookRegion.show(new a.CourseApp.Lens.Title.BookView({model:new a.Book({structure:e})}))},this))},search:function(){this.manager.search()},_show:function(a,c){this.manager.set(a);this.layout=new e;this.layout.on("render",function(){this._showPagination(a,c);this._showActions(a,
c);this._showAssignmentPool();this._showOptions(a,c);this._showContents(a,c);this._showPreview(c);this._showDialogAssessmentAssistance()},this);this.region.show(this.layout)},_showDialogAssessmentAssistance:function(c,d){a.profile.isTeacher()&&!a.profile.getProperty("assessment_assistance_discard")&&a.vent.trigger("course:dialog:assessment_assistance")},_showPagination:function(c,d){this.layout.showChildView("paginationZone",new a.NumberedPaginationView({collection:c,lens:d}))},_showActions:function(c,
d){c=new a.Actions(null,{targets:c,course:d.course(),lens:d});c.reset(a.config.actions[this._getProfileType()].assignments);c=new a.ActionsView({collection:c});this.layout.showChildView("actionsZone",c)},_showAssignmentPool:function(){(new a.Components.AssignmentPool.MainButton(a.currentCourse,a.state.getLens())).show(this.layout.getRegion("assignmentPoolZone"))},_showOptions:function(c,d){this.layout.showChildView("optionsZone",new a.ListOptionsView({lens:d,collection:c}))},_showContents:function(a,
d){this.layout.showChildView("contentsZone",new c.ContentsView({lens:d,collection:a}))},_showPreview:function(c){this.layout.showChildView("previewZone",new a.ContentPreviewView({lens:c}))},_courseHasPageRangeNavigator:function(){return a.currentCourse.get("has_page_range_navigator")},_getProfileType:function(){return a.profile.get("type")}});return d}();return c}(Osp);
Osp.CourseApp.Lens.Assignments.StudentsList=function(){var a={},c=Backbone.Radio.channel("course:lens:assignments");a.ContentView=Osp.ListContentView.extend({modelEvents:_.extend({"change:status":"modelStatusChanged"},Osp.ListContentView.prototype.modelEvents),modelStatusChanged:function(a,c){Osp.Markbook.isUnfinished(c)||$(this.el).remove()},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this),c={progress:this.model.get("student_status_val")==Osp.Markbook.SAVED?I18n.t("ui.assignments.started"):
""};return _(a).extend(c)},showAssignment:function(){Osp.vent.trigger("course:assignments:student:show",this.model,this.model.course())},onClickName:function(a){a.preventDefault();a.stopPropagation();this.showAssignment()},onSelect:function(){this.showAssignment()},onRender:function(){this.$el.toggleClass("checked",this.model.get("checked"));$(".header-fix").heightFix("header")}});a.ContentDetailView=a.ContentView.extend({template:"course/assignments/list/user-template"});a.HeadView=Osp.TableHeadView.extend({template:"course/assignments/list/user_head-template"});
var f=Osp.FootView.extend({template:"common/course_lens_no_contents-template",serializeData:function(){return{message:I18n.t("ui.assignments.no_assignments")}}});a.ContentsView=Osp.ListView.extend({className:"assignments items",headView:a.HeadView,childView:a.ContentDetailView,footView:f});var e=Osp.View.extend({template:"course/resources/list/layout-template",regions:{actions:"#actions",contents:"#contents",preview:"#preview",pagination:".pagination-wrapper"},initialize:function(a){Osp.View.prototype.initialize.apply(this,
arguments);this._lens=a.lens;this._assignments=a.assignments},onRender:function(){var c=this._assignments,e=this._lens,f=e.course();e.get("name");var l=Osp.profile.get("type");f=new Osp.Actions(null,{targets:c,course:f,lens:e});f.reset(Osp.config.actions[l].assignments);this.showChildView("actions",new Osp.ActionsView({collection:f}));this.showChildView("contents",new a.ContentsView({lens:e,collection:c}));this.showChildView("preview",new Osp.MarkbookPreviewView({lens:e}));this.showChildView("pagination",
new Osp.NumberedPaginationView({lens:e,collection:c}))}});a.Controller=function(){var a=function(a){a=a||{};this.region=a.region};_(a.prototype).extend({showFirstFilter:function(a,c){Osp.CourseApp.onFirstFilterReady(a,c,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},showFilter:function(a,c,d,e){Osp.CourseApp.onFilterReady(a,c,d,_.bind(function(a,c,d){var f=d.assignments(e);this._show(f,c);_.delay(this._showSelectedAssignment,300,a);Osp.vent.trigger("course:assignments:list:options:hide",
d)},this))},showSearch:function(a,c){this._show(a,c)},_show:function(a,c){a=new e({lens:c,assignments:a});this.region.show(a)},_showSelectedAssignment:function(a){Osp.state.getState("assignment")&&(c.request("show",Osp.state.getState("assignment"),a),Osp.state.resetState("assignment"))}});return a}();c.reply("show",function(a,c){var d=new Osp.Assignment({id:a.id},{course:c});d.fetch().done(function(){Osp.vent.trigger("course:assignments:student:show",d,c)})});return a}();"use strict";
Osp.CourseApp.Lens.Assignments.StudentAssignment=function(){var a,c,f={};f.ContentView=Osp.ContentView.extend({template:"course/assignments/student_assignment/content-template",events:{"click .name":"onClickName","click .btn.remove":"onClickDestroy"},initialize:function(a){Osp.ContentView.prototype.initialize.apply(this,arguments);this.assignment=a.assignment},onClickDestroy:function(a){this.model.destroy();return!1},serializeData:function(){return _.extend(Osp.ContentView.prototype.serializeData.call(this),
{finished:!Osp.Markbook.isUnfinished(this.assignment.get("status"))})}});f.ContentsView=Osp.ContentsView.extend({childView:f.ContentView,childViewOptions:function(){return{assignment:this.assignment}},initialize:function(a){Osp.ContentsView.prototype.initialize.apply(this,arguments);this.assignment=a.assignment},handingMessage:function(){if("manual"==this.assignment.get("delivery")||this.assignment.get("manual_handing"))return I18n.t("ui.assignments.delivery_type.manual");if("nothing"==this.assignment.get("delivery"))return I18n.t("ui.assignments.delivery_type.nothing")},
onRender:function(){Osp.profile.isTeacher()&&Osp.Markbook.isUnfinished(this.assignment.get("status"))?this.$el.append("<p>"+I18n.t("ui.markbook.awaiting_response")+"</p>"):Osp.Markbook.isGivingDigital(this.assignment)?this.collection.length||this.$el.append("<p>"+I18n.t("ui.assignments.no_files")+"</p>"):this.collection.length||this.$el.append("<p>"+this.handingMessage()+"</p>")}});f.MaterialView=Osp.ContentView.extend({className:"item",template:"course/assignments/student_assignment/material-template",
templateContext:function(){return{isDisabled:function(){return this._disabled}.bind(this)}},initialize:function(a){this._disabled=a.disabled||!1}});f.MaterialsView=Osp.ContentsView.extend({childView:f.MaterialView,onRender:function(){if(!this.collection.length){var a=I18n.t("ui.assignments.student_assignment.no_materials");this.$el.text(a)}}});f.FormView=Osp.View.extend({tagName:"div",events:{"change #manual_handing":"onChangeManualHanding"},getTemplate:function(){return Backbone.Marionette.getOption(this,
"template")||"course/assignments/student_assignment/form_"+Osp.profile.get("type")+"-template"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this._studentContents=new Osp.Contents(this.model.get("student_contents"),{course:this.model.course()});this.listenTo(this._studentContents,"add remove",this.checkRequired)},serializeData:function(){var a=Osp.View.prototype.serializeData.apply(this,arguments),c=this.model.get("status"),d=new Osp.Content(_(this.model.get("test_contents")).first());
return _(a).extend({model_id:this.model.get("id"),mark:this.model.get("mark"),activity_type:d.get("activity_type"),points:this.model.get("points"),teacher:this.model.get("teacher"),isPractice:2==this.model.get("mode"),isInteractive:this.model.isInteractive(),dueClass:this.model.isDue()?"due":"",workClass:Osp.Markbook.isFinished(c)||Osp.Markbook.isUnfinished(c)&&!this.model.isInteractive()?"span7":"",markClass:_.isNull(this.model.get("detailed_score"))?"without-detailed-score":"with-detailed-score",
showDueMessage:this.model.isDue()&&Osp.Markbook.isUnfinished(this.model.get("status"))})},onChangeManualHanding:function(){var a=$("#manual_handing").prop("checked");this.model.set({manual_handing:a},{silent:!0});this.checkRequired()},checkRequired:function(){this.model.isInteractive()||(this._studentContents.isEmpty()&&!this.model.get("manual_handing")?this.disableForm():this.enableForm())},disableForm:function(){a.$("#buttons-student-assignment a").addClass("disabled")},enableForm:function(){a.$("#buttons-student-assignment a").removeClass("disabled")},
onClickStudentButton:function(a){if(!$(a.target).hasClass("disabled")){var c=this,d="submit-content"==$(a.target).prop("id")?"submit":"save";this.disableForm();a.stopPropagation();a.preventDefault();this.model.save({student_action:d},{url:"/api/courses/"+this.model.course().get("id")+"/student_assignments/"+this.model.get("id"),wait:!0,success:function(){c.showSuccessMessage(d)}})}},onClickSubmit:function(a){var c=this;a.preventDefault();a.stopPropagation();if(_.isObject(this.model.get("detailed_score"))&&
0<$(".mark-input").length){var d=this.model.get("detailed_score");$(".mark-input").each(function(a,c){d[$(c).attr("data-screen")][1]=$(c).val()});this.model.set("detailed_score",d,{silent:!0})}m(this.model.get("mode"));if(this.can("write","assignments/form/mark")){var e=$(a.target);e.hasClass("disabled")||(e.addClass("disabled"),Osp.FormView.prototype.clearErrors.call(this),a=$("input","#mark-input").val(),this.model.set({mark:a},{silent:!0}),this.model.save(null,{wait:!0,success:$.proxy(function(a,
c){$(".student-assignment-layout").modal("hide");e.removeClass("disabled")},this),error:$.proxy(function(a,d){e.removeClass("disabled");Osp.FormView.prototype.displayErrors.call(c,JSON.parse(d.responseText))},this)}))}},onRender:function(){this.renderContentViews();2!=this.model.get("mode")&&this.renderStudentContentView();this.$("#upload-form form").fileupload({url:"/api/courses/"+this.model.course().get("id")+"/student_assignments",type:"POST",fileInput:this.$("#file_input"),formData:d,replaceFileInput:!1,
dataType:"json",add:e,progress:k,fail:n,done:h})},renderContentViews:function(){var a=new Osp.Contents(this.model.get("test_contents"));2!=this.model.get("mode")&&Osp.profile.isStudent()&&Osp.state.getLens().isAssignment()&&this.setStudentAssignmentId(a);a=new f.MaterialsView({collection:a,childViewOptions:{disabled:this.model.isDue()}});this.$("#test-content").append(a.render().el);a=new f.MaterialsView({collection:new Osp.Contents(this.model.get("support_contents"))});this.$("#support-content").append(a.render().el)},
renderStudentContentView:function(){var a=new f.ContentsView({collection:this._studentContents,assignment:this.model});this.$("#student-content").append(a.render().el)},setStudentAssignmentId:function(a){a.each(function(a){a.isInteractive()&&a.set({student_assignment_id:this.model.get("student_assignment_id")})},this)},showSuccessMessage:function(c){c=new Osp.AlertDialog({backdrop:!0,title:this.model.get("name"),message:I18n.t("ui.assignments."+c+"_message"),showSubmit:!1});a.hideModal();c.render()}});
f.ButtonsView=Osp.View.extend({template:"course/assignments/student_assignment/buttons-template",events:{"click .student-button":"onClickSubmit","click .teacher-button":"onClickTeacherSubmit"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this.model=a&&a.model||null},onClickTeacherSubmit:function(a){c.onClickSubmit(a)},onClickSubmit:function(a){c.onClickStudentButton(a)},serializeData:function(){var a=Osp.FormView.prototype.serializeData.apply(this,arguments);return _(a).extend({isPractice:2==
this.model.get("mode"),isInteractive:this.model.isInteractive()})}});f.StudentAssignmentLayout=Osp.DialogLayout.extend({template:"course/assignments/student_assignment/layout-template",regions:{form:"#student-assignment-form",buttons:"#buttons-student-assignment"},events:_.extend({"click .screen":"onClickScreen"},Osp.DialogLayout.prototype.events),initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this.model=a&&a.model||null;Osp.state.setStudentAssignment(this.model)},
onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);c=new f.FormView({model:this.model});this.showChildView("form",c);this.showChildView("buttons",new f.ButtonsView({model:this.model}));c.checkRequired()},getTestContent:function(){return new Osp.Content(_.extend({student_assignment_id:this.model.get("student_assignment_id")},this.model.get("test_contents")[0]))},getLauncher:function(){return new Osp.ContentLauncherService(this.getTestContent())},onClickScreen:function(a){a.preventDefault();
a.stopPropagation();this.getLauncher().launchPage($(a.target).attr("data-screen"))}});f.show=function(c,d){m(c.get("mode"));c.fetch({data:{student_assignment_id:c.get("student_assignment_id")},success:function(){a=new f.StudentAssignmentLayout({className:"student-assignment-layout big legacy",model:c,until_footer:230});a.render()}})};var e=function(a,d){c.$("#upload-file").removeClass("error");c.$("#upload-file").children(".controls").children("ul.help-block").remove();c.disableForm();d.submit()},
d=function(){return[{name:"student_assignment_id",value:c.model.get("student_assignment_id")},{name:"authenticity_token",value:$('meta[name="csrf-token"]').attr("content")}]},h=function(a,d){a=new c._studentContents.model({},{collection:c._studentContents});l();$("#student-content").find("p").remove();a.set(d.result);c._studentContents.add(a);c._studentContents.trigger("sort");c.enableForm()},k=function(c,d){a.$("#upload-form").addClass("hide");a.$("#student-content").find("p").addClass("hide");a.$(".progress.hide").removeClass("hide");
a.$(".progress .bar").css("width",parseInt(d.loaded/d.total*100,10)+"%")},l=function(){$("#upload-form").removeClass("hide");$(".progress").addClass("hide")},m=function(a){Osp.config.permissions.student.assignments.form.mark=2==a?"read,write":"read"},n=function(a,d){a=d.result;var e=$("<ul class='help-block'></ul>");$("#student-content").find("p").removeClass("hide");l();c.$("#upload-file").children(".controls").append(e);_(a).each(function(a,c){_(a).each(function(a){e.append("<li>"+c.humanize(!1)+
" "+a+"</li>")})});c.$("#upload-file").addClass("error");c.enableForm()};return f}();"use strict";
Osp.CourseApp.Lens.Assignments.Assign=function(){function a(a){var c=_(a.ancestors()).map(function(a){return a});return _(k).any(function(a){return _(c).include(a)})}function c(a){return a.rejectRecursive(function(a){return!0!==a.get("activeAssign")})}function f(c,d){var e=$.Deferred();if(_.isUndefined(d)||_.isNull(d))d=!0;d&&a(c)?e.resolve([]):(k.push(c),c.pUsers().done(function(a){e.resolve(a)}));return e.promise()}function e(a,e){function h(c){0<c.length&&a&&a.collection&&(d(_.difference(c.models,
a.collection.models),!0),a.collection.add(c.models))}_(c(e)).map(function(a){return f(a).done(h)})}function d(a,c){_(a).each(function(a){a.set("checkedAssign",c)})}function h(a,c){return _(a).reject(function(a){return _(c).any(function(c){return c.includeUserInSelfAndDescendants(a)})})}var k=[],l={};l.StudentView=Osp.View.extend({template:"course/assignments/assign/student-template",className:"controls item",tagName:"div",events:{"click a.select":"onClickSelect"},modelEvents:{"change:checkedAssign":"onChangeChecked render"},
initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this.model.set("checkedAssign",!0)},onClickSelect:function(a){a.stopPropagation();a.preventDefault();this.model.set("checkedAssign",!this.model.get("checkedAssign"))},onChangeChecked:function(){var a=this.model.get("checkedAssign");Osp.vent.trigger("course:assign:user:"+(a?"selected":"deselected"))}});l.NoStudentsView=Osp.View.extend({template:"course/assignments/assign/nostudent-template"});l.StudentsListView=Osp.CollectionView.extend({childView:l.StudentView,
emptyView:l.NoStudentsView});l.SelectDeselectAllRow=Osp.View.extend({template:"course/assignments/assign/select_deselect_all-template",events:{"change #selectDeselectStudents":"onSelectDeselectStudents"},constructor:function(a){this.onCollectionPropertyChange=this.onCollectionPropertyChange.bind(this);this.model=new Backbone.Model({allChecked:!0});this.collection=a.collection;this.listenTo(this.collection,"change:checkedAssign",_.debounce(this.onCollectionPropertyChange,50));this.listenTo(this.model,
"change",this.render);Osp.View.prototype.constructor.apply(this,arguments)},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);this.updateAllChecked()},onCollectionPropertyChange:function(){this.updateAllChecked()},onSelectDeselectStudents:function(){var a=this.model.get("allChecked");this.collection.forEach(function(c){c.set("checkedAssign",!a)});this.model.set("allChecked",!a)},updateAllChecked:function(){var a=!0;this.collection.forEach(function(c){c.get("checkedAssign")||
(a=!1)});this.model.get("allChecked")!=a&&this.model.set("allChecked",a)}});l.StudentsView=Osp.View.extend({template:"course/assignments/assign/assigment_list_container-template",regions:{assignmentListContainer:".assignmentList",selectDeselectAll:".selectDeselectAll"},collectionEvents:{add:"render",remove:"render"},onRender:function(){Osp.View.prototype.onRender.apply(this,arguments);this.options.collection&&this.options.collection.length&&this.showChildView("selectDeselectAll",new l.SelectDeselectAllRow(this.options));
this.showChildView("assignmentListContainer",new l.StudentsListView(this.options))}});l.AssignmentsLayout=Osp.View.extend({template:"course/assignments/assign/assignments_layout-template",regions:{assignments:"#assignments"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._tests=a&&a.tests||null},onRender:function(){this.showChildView("assignments",new Osp.ContentsView({collection:new Osp.Contents(this._tests)}))}});l.ResourceView=Osp.ContentView.extend({template:"course/assignments/assign/content-template"});
l.ResourcesLayout=Osp.View.extend({template:"course/assignments/assign/resources_layout-template",regions:{resources:"#resources"},events:{"click button":"onClick"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._materials=a&&a.materials||null;this._course=a&&a.course||null;this._lens=a&&a.lens||null},onClick:function(a){a.preventDefault();a=$(".assign-dialog").offset();var c=d="50%";if(null!==a){c=a.top+330;var d=a.left+350}this._course.saveAndResetSearchTerms();
(new Osp.CourseApp.Lens.Resources.Panel.Layout({course:this._course,draggable:!0,className:"resources-panel",until_footer:0,position:{top:c,left:d},callback:_.bind(this.onResourcesAdded,this)})).render()},onResourcesAdded:function(a){this._materials=this._materials.concat(a);this.getChildView("resources")&&this.getChildView("resources").collection.reset(this._materials);$(".resources-panel").modal("hide")},onRender:function(){this.showChildView("resources",new Osp.ContentsView({collection:new Osp.Contents(this._materials),
childView:l.ResourceView}))},serializeData:function(){return _.extend(Osp.View.prototype.serializeData.apply(this,arguments),{hasResourcesPanel:this._course.get("has_resources_panel")})}});l.Layout=Osp.DialogLayout.extend({behaviors:[Osp.Behaviors.Date],className:"assign-dialog-content",template:"course/assignments/assign/layout-template",regions:{assignmentsLayout:"#assignments-layout",resourcesLayout:"#resources-layout",groups:"#assign-groups",students:"#assign-students"},ui:{submitButton:"input[type=submit]"},
events:_.extend({"click input[type=submit]":"onSubmit","change select":"onChangeMode","click #groups-and-students li":"onChangeTab","keypress input":"onKeypressed"},Osp.DialogLayout.prototype.events),initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._targets=a&&a.targets||null;this._course=a&&a.course||null;this._groups=new Osp.Groups(null,{course:this._course});this._students=new Osp.Users(null,{course:this._course});this._lens=a&&a.lens||null;this._assignment=
null;if(1===this._targets.length&&_(this._targets).first().get("blueprint")){var c=_(this._targets).first().get("blueprint");this._assignment=new Osp.Assignment(c.assignment);this._targets=new Osp.Contents(c.contents);this._targets=this._targets.models}this._materials=_(this._targets).filter(function(a){return a.isUsedAsSupport()});this._tests=_(this._targets).filter(function(a){return a.isUsedAsTest()});this.model=this._assignment?this._assignment:new Backbone.Model({name:_(this._tests).first().get("name"),
description:"",start:"",due:""});this.listenTo(Osp.vent,"course:selection:node:select",this.onGroupSelected.bind(this));this.listenTo(Osp.vent,"course:selection:node:deselect",this.onGroupDeselected.bind(this));this.listenTo(Osp.vent,"course:assign:user:selected",this.onStudentSelected.bind(this));this.listenTo(Osp.vent,"course:assign:user:deselected",this.onStudentDeselected.bind(this))},onKeypressed:function(a){13==a.which&&(a.stopPropagation(),a.preventDefault(),this.onSubmit(a))},onChangeTab:function(a){a=
$(a.target).addBack().closest("a");a=$(a).attr("href");var c=$(a).siblings().height();$(a).find(".dialog-fix").height(c);"#students-pane"===a&&e(this.getChildView("students"),this._groups)},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);var a=this.$('select[name="assignment[mode]"]');this._assignment&&a.val(this._assignment.get("mode"));1<this._tests.length&&(this.disableModeSelect(),this.disableTitle());a.val()==Osp.Assignment.PRACTICE&&this.disableDue(!0);this.showChildView("assignmentsLayout",
new l.AssignmentsLayout({tests:this._tests}));this.showChildView("resourcesLayout",new l.ResourcesLayout({materials:this._materials,course:this._course,lens:this._lens,layout:this}));this.$("input[type=submit]").addClass("disabled");this.renderGroupStudentTabs()},onSubmit:function(a){var c=$(this.ui.submitButton),d=this,e=this.$("input[type=checkbox]:disabled");a.stopPropagation();a.preventDefault();c.hasClass("disabled")||(this.disableForm(c),e.prop("disabled",!1),async.forEach(this._tests,_.bind(this.createAssignment,
this),function(a){a?(d.enableForm(c,a),e.prop("disabled",!0)):d.showSuccessMessage("Success")}))},serializeData:function(){return _.extend(Osp.View.prototype.serializeData.apply(this,arguments),{enablePractice:!1})},createAssignment:function(d,e){var f="&assignment%5Bcontent_ids%5D%5B%5D="+d.get("id");1<this._tests.length&&this.setAssignmentTitle(d);$.ajax({url:"/api/courses/"+this._course.get("id")+"/assignments",context:this,type:"POST",data:this.$("form").serialize()+f+function(d){d=_(c(d)).reject(function(c){return _(k).include(c)||
a(c)});return"&"+_(d).map(function(a){return"assignment%5Bnon_loaded_groups_ids%5D%5B%5D="+a.id}).join("&")}(this._groups),success:function(a,c,d){e()},error:function(a,c,d){e(JSON.parse(a.responseText))}})},disableDue:function(a){this.$("input#assignment_due").prop("disabled",a)},disableModeSelect:function(){this.$("select").children("option[value="+Osp.Assignment.TEST+"]").remove()},disableForm:function(a){a.hasClass("disabled")||(a.addClass("disabled"),Osp.FormView.prototype.clearErrors.call(this),
this.clearGroupsAndStudentsErrors())},disableTitle:function(){var a=this.$('input[name="assignment[name]"]');a.prop("readonly",!0);a.val("")},enableAssignButton:function(){this.$("input[type=submit]").removeClass("disabled")},disableAssignButton:function(){this.$("input[type=submit]").addClass("disabled")},renderGroupsAndStudentsErrors:function(a){var c=_.bind(function(c){this.$("#groups-and-students").addClass("error");$("<div>").addClass("alert alert-error").html(a[c].join("<br>")).prependTo(this.$(".modal-body #general"))},
this);a&&a.students&&c("students");a&&a.groups&&c("groups")},clearGroupsAndStudentsErrors:function(){this.$("#groups-and-students").removeClass("error");this.$(".alert-error").remove()},enableForm:function(a,c){Osp.FormView.prototype.displayErrors.call(this,c,this.getFieldSelector,"assignment");this.renderGroupsAndStudentsErrors(c);a.removeClass("disabled")},getFieldSelector:function(a){var c='[name="';switch(a){case "groups":c+="assignment[group_ids][]";break;default:c+="assignment["+a+"]"}return c+
'"]'},onChangeMode:function(a){a=$(a.target).val()==Osp.Assignment.PRACTICE?!0:!1;this.disableDue(a)},onGroupSelected:function(a){this.enableAssignButton()},onGroupDeselected:function(a){!c(this._groups).length&&this.disableAssignButton();0!==a._users.length&&(a=h(a._users.models,_.intersection(k,c(this._groups))),d(a,!1),this.getChildView("students")&&this.getChildView("students").collection&&this.getChildView("students").collection.remove(a))},onStudentSelected:function(){this.enableAssignButton()},
onStudentDeselected:function(){this.anyStudentChecked()?this.enableAssignButton():this.disableAssignButton()},anyStudentChecked:function(){return this.getChildView("students").collection.areAny("checkedAssign")},renderGroupStudentTabs:function(){var a=this;this._groups.fetch().done(function(){a.showChildView("groups",new Osp.TreeRootView({collection:a._groups,lens:a._lens,observer:Osp.CheckboxSelectionObserver,activeAttr:"activeAssign",activateParentModel:!1,deactivateParentModel:!1,checkboxName:"assignment[group_ids][]"}))});
this.showChildView("students",new l.StudentsView({collection:new Osp.Users([])}))},setAssignmentTitle:function(a){$("input#assignment_name").val(a.get("name"))},showSuccessMessage:function(a){a=new Osp.AlertDialog({title:a,message:I18n.t("ui.assign.success")});this.hideModal();a.render()}});l.showDialog=function(a,c,d){a=new l.Layout({className:"big assign-dialog",targets:a,course:c,lens:d});k=[];a.render()};return l}();
Osp.CourseApp.Lens.Iwb=function(a,c){var f={},e=Backbone.Radio.channel("iwb"),d=a.Model.extend({defaults:{query:"",type:"",source:""}}),h=a.View.extend({template:"course/iwb/layout-template",className:"legacy",regions:{list:"#list"}});f.TitleLayout=a.CourseApp.Lens.Title.Layout.extend({template:"course/iwb/title-template"});f.Controller=function(){var c=function(a){a=a||{};this.titleButtonsRegion=a.titleButtonsRegion;this.titleSearchRegion=a.titleSearchRegion;this.titleBookRegion=a.titleBookRegion;
this.region=a.region;this.lens=a.lens};_(c.prototype).extend({show:function(){this.layout=new h({model:this.lens});this.layout.on("render",this._onLayoutRender.bind(this));this.region.show(this.layout);this._initEventHandlers()},_initEventHandlers:function(){this.layout.listenTo(a.vent,"course:iwb:copy",this.onCopy.bind(this));this.layout.listenTo(a.vent,"course:iwb:rename",this.onRename.bind(this));this.layout.listenTo(a.vent,"course:iwb:delete",this.onDelete.bind(this));this.layout.listenTo(e,"status:save",
this._loadItems.bind(this));this.layout.listenTo(e,"content:open",this.onContentOpen.bind(this))},onCopy:function(c){(new f.Dialog({title:I18n.t("ui.iwb.dialog.copy"),model:new a.IwbSavedStatus({name:versionedName(c[0]),description:c[0].get("description"),course_id:c[0].get("course_id"),copy_from:c[0].id})})).show().on("done",this._onDoneRenameOrCopy.bind(this,c[0]))},onRename:function(a){(new f.Dialog({title:I18n.t("ui.iwb.dialog.rename"),model:a[0].clone()})).show().on("done",this._onDoneRenameOrCopy.bind(this,
a[0]))},onDelete:function(c){(new a.AlertDialog({title:I18n.t("ui.iwb.delete.title"),message:I18n.t("ui.iwb.delete.message"),submitCallback:this.onDeleteConfirm.bind(this,c),showCancel:!0})).render()},onDeleteConfirm:function(a){_.each(a,function(a){a.set({checked:!1})});this._getItems().destroy(a)},onContentOpen:function(a){Backbone.Radio.channel("analytics").request("track:iwb",a.isMaster()?"master":"help",a.get("name"))},_onDoneRenameOrCopy:function(a){this._loadItems();a.set({checked:!1})},_onLayoutRender:function(){this._showTitle();
this._showList()},_getListController:function(){return this._listController||(this._listController=new f.List.Controller({region:this.layout.getRegion("list")}))},_getSearchController:function(){return this._searchController||(this._searchController=new f.Search.Controller({region:this.titleSearchRegion,lens:this.lens}))},_showTitle:function(){this._showTitleSearch();this.titleBookRegion.empty()},_showTitleSearch:function(){this._getSearchController().on("search",this._onSearch.bind(this)).show(new d(a.state.getSearch()))},
_onSearch:function(c){a.state.resetSearch();a.state.setSearchTerms(c);this._getSearchController().show(new d(c)).focus();this._getItems().resetCurrentPage();this._getItems().fetch()},_getItems:function(){return this.items||(this.items=new a.PaginatedIwbItems(null,{course:a.currentCourse,lens:this.lens}))},_loadItems:function(){this._getItems().fetch()},_showList:function(){this._loadItems();this._getListController().show(this._getItems(),this.lens)}});return c}();window.addEventListener("message",
function(a){if(a.origin===window.origin)try{"iwb:save"==a.data.event&&(e.trigger("status:save",a.data),"create"==a.data.type&&Backbone.Radio.channel("analytics").request("track:iwb","save",a.data.name))}catch(l){}},!1);return f}(Osp,Marionette);
Osp.CourseApp.Lens.Iwb.Dialog=function(a,c){var f=a.FormView.extend({template:"course/iwb/dialog/form-template",prependFieldNameOnError:!1}),e=a.DialogLayout.extend({className:"iwb",template:"course/iwb/dialog/layout-template",triggers:{"click [data-action=submit]":"submit"},ui:{button:"input[type=submit]"},regions:{form:".main"}});return c.Object.extend({initialize:function(a){this.model=a.model;this.title=a.title},show:function(){this.layout=new e({model:new a.Model({title:this.title})});this._initEventHandlers();
this.layout.render();return this},_initEventHandlers:function(){this.listenTo(this.layout,"render",this._onRender.bind(this));this.listenTo(this.layout,"submit",this._onSubmit.bind(this))},_onRender:function(){this.form=new f({model:this.model});this.layout.showChildView("form",this.form)},_onSubmit:function(){this.form.clearErrors();this.model.save().done(this._onDone.bind(this)).fail(this._onFail.bind(this))},_onDone:function(){this.layout.hideModal();this.trigger("done")},_onFail:function(a){this.form.displayErrors(JSON.parse(a.responseText),
function(){return"[name=name]"},this.model)}})}(Osp,Marionette);
Osp.CourseApp.Lens.Iwb.Search=function(a){var c=a.AdvancedSearchView.extend({template:"course/iwb/search-template",templateContext:function(){return{title:this.title||I18n.t("ui.search.advanced"),formatNameFor:function(a){a=this._getIndexedFormatsByName()[a];return I18n.t("ui.formats."+a.key,{defaultValue:a.name})}.bind(this),sourceNameFor:function(a){switch(a){case "oup":a="Oxford";break;case "other":a="School Files";break;default:a="My Files"}return a}.bind(this)}},initialize:function(c){a.AdvancedSearchView.prototype.initialize.apply(this,
arguments);this.formats=c.formats;this.title=c.title},serializeData:function(){return _.extend(a.AdvancedSearchView.prototype.serializeData.apply(this,arguments),{hasNewContents:this.lens.get("has_new_contents"),hasUpdatedContents:this.lens.get("has_updated_contents"),formats:this.formats})},extractSearchFromControls:function(){var a=this.$("input[name=query]"),c=this.$("#search-box .type"),d=this.$("#search-box .source"),h={};_.isEmpty(a.val())||(h.query=a.val());c.length&&(h.type=c.data("value"));
d.length&&(h.source=d.data("value"));return h},_getIndexedFormatsByName:function(){return this._indexedFormatsByName||(this._indexedFormatsByName=this.formats.reduce(function(a,c){a[c.name]=c;return a},{}))}});return{Controller:function(){var a=function(a){a=a||{};this.region=a.region;this.lens=a.lens;this.title=a.title;this.formats=a.formats||gon.formats};_(a.prototype).extend(Backbone.Events,{show:function(a){this.searchView=new c({model:a,lens:this.lens,formats:this.formats,title:this.title});
this.searchView.on("search",function(a){this.trigger("search",a)},this);this.region.show(this.searchView);return this},focus:function(){this.searchView.focus();return this}});return a}()}}(Osp);
Osp.CourseApp.Lens.Iwb.List=function(a){var c={},f=a.FootView.extend({template:"course/iwb/list/no_items-template",serializeData:function(){return{message:a.state.getState("lens").get("no_contents_found_message")||I18n.t("ui.browser.nocontents")}}}),e=a.TableHeadView.extend({serializeData:function(){return _.extend({},a.View.prototype.serializeData.call(this),{allSelected:this.collection.areAllChecked(),empty:0==this.collection.where({clazz:"IwbSavedStatus"}).length})}}),d=a.ListContentView.extend({template:"course/iwb/list/content-template",
className:function(){return"item master"+(this.isWithoutResources()?" without-resources":"")},templateContext:function(){var c=this.model;return _.extend({opensInNewTab:function(){return c.isMaster()}},a.ListContentView.prototype.templateContext)},onClickCheck:function(){},openContent:function(){Backbone.Radio.channel("iwb").trigger("content:open",this.model);a.ListContentView.prototype.openContent.call(this)},isWithoutResources:function(){return 0==this.model.collection.where({type:"IwbContentResource"}).length}}),
h=d.extend({className:function(){return"item resource"+(this.isLastResource()?" last":"")},isLastResource:function(){return _(this.model.collection.where({type:"IwbContentResource"})).last()==this.model}}),k=a.ListContentView.extend({template:"course/iwb/list/iwb_saved_status-template",templateContext:_.extend({modifiedDate:function(){return this.modified?this.formatDate(this.last_save_at,I18n.t("ui.iwb.modified")):""},createdDate:function(){return this.formatDate(this.first_save_at,I18n.t("ui.iwb.created"))},
formatDate:function(a,c){return a?"<span>"+c+" "+moment(a).format("DD MMMM YYYY")+"</span>":""}},a.ListContentView.prototype.templateContext),openContent:function(){this.model.markAsViewed();this.$el.addClass("visited");window.open(this.model.get("url"))},addVisitedClass:function(){!_.isUndefined($.cookie("iwbSavedStatusIds"))&&_.contains($.cookie("iwbSavedStatusIds").split(","),this.model.id.toString())&&this.$el.addClass("visited")}}),l=a.ListView.extend({headView:e,footView:f,childView:function(c){if(c instanceof
a.IwbSavedStatus)return k;if(c.isMaster())return d;if(c.isResource())return h}}),m=a.View.extend({template:"course/iwb/list/layout-template",regions:{actions:"#actions",items:"#items",pagination:".pagination-wrapper",quota:{el:"#quota",replaceElement:!0}}});c.Controller=function(){var d=function(a){a=a||{};this.region=a.region};_(d.prototype).extend({show:function(a,c){this.items=a;this.lens=c;this.layout=(new m).on("render",this._onLayoutRender.bind(this));this.region.show(this.layout)},_onLayoutRender:function(){this._showPagination();
this._showActions();this._showItems();this._showQuota()},_showPagination:function(){this.layout.showChildView("pagination",new a.NumberedPaginationView({collection:this.items,lens:this.lens}))},_showQuota:function(){(new c.Quota({items:this.items})).show(this.layout.getRegion("quota"))},_actions:function(){var c=new a.Actions(null,{targets:this.items,course:this.lens.course(),lens:this.lens});c.reset(a.config.actions[a.profile.get("type")].iwb);return c},_showActions:function(){this.layout.showChildView("actions",
new a.ActionsView({collection:this._actions(this.items,this.lens)}))},_showItems:function(){this.layout.showChildView("items",new l({lens:this.lens,collection:this.items}))}});return d}();return c}(Osp);
Osp.CourseApp.Lens.Iwb.List.Quota=function(a,c){var f=a.View.extend({className:"quota",template:"course/iwb/list/quota-template",modelEvents:{"change:message":"render"}});return c.Object.extend({initialize:function(a){this.items=a.items;this.quota=a.items.quota()},show:function(a){this.view=new f({model:this.quota,collection:this.items});this._initEventHandlers();a.show(this.view);this._start()},_initEventHandlers:function(){this.listenTo(this.view,"destroy",this._stop.bind(this));this.listenTo(this.quota,
"change",this._onChange.bind(this));this.listenTo(this.items,"sync",this._setPermissions.bind(this))},_start:function(){this.quota.startPolling()},_stop:function(){this.quota.stopPolling()},_onChange:function(){this._setMessage();this._setPermissions()},_setPermissions:function(){_(this.items.savedStatuses()).each(function(a){_.extend(a.get("permissions"),{copy:!this.quota.get("limit_reached")})}.bind(this));this.items.trigger("reset")},_setMessage:function(){this.quota.set("message",this._message())},
_message:function(){return this.quota.get("limit_reached")?this._limitReachedMessage():this.quota.get("close_to_limit")?this._closeToLimitMessage():""},_closeToLimitMessage:function(){return I18n.t("ui.iwb.quota.warning",this.quota.toJSON())},_limitReachedMessage:function(){return I18n.t("ui.iwb.quota.limit_reached",this.quota.toJSON())}})}(Osp,Marionette);Osp.CourseApp.Lens.Planning=function(a){return{Controller:a.CourseApp.Lens.Resources.Controller.extend()}}(Osp);
Osp.CourseApp.Lens.Planning.Search=function(a){var c=a.AdvancedSearchView.extend({template:"course/planning/search-template",templateContext:function(){return{formatIconFor:function(a){var c="";switch(a){case "Short term":c="icon-plan-short";break;case "Medium term":c="icon-plan-medium";break;case "Long term":c="icon-plan-long";break;case "Other":c="icon-plan-other"}return c}.bind(this),sourceNameFor:function(a){switch(a){case "oup":a=I18n.t("ui.search.planning.oxford");break;case "other":a=I18n.t("ui.search.planning.school_plans");
break;default:a=I18n.t("ui.search.planning.my_plans")}return a}.bind(this)}},initialize:function(c){a.AdvancedSearchView.prototype.initialize.apply(this,arguments);this.userId=c.userId;this.formats=c.formats},serializeData:function(){return _.extend(a.AdvancedSearchView.prototype.serializeData.apply(this,arguments),{hasNewContents:this.lens.get("has_new_contents"),hasUpdatedContents:this.lens.get("has_updated_contents"),formats:this.formats,userId:this.userId})},extractSearchFromControls:function(){var a=
this.$("input[name=query]"),c=this.$("#search-box .type"),d=this.$("#search-box .source"),h=this.$("#search-box .new_contents"),k=this.$("#search-box .updated_contents"),l={};_.isEmpty(a.val())||(l.query=a.val());c.length&&(l.type=c.data("value"));d.length&&(l.source=d.data("value"));h.length&&(l.new_contents=h.data("value"));k.length&&(l.updated_contents=k.data("value"));return l}});return{Controller:function(){var f=function(c){c=c||{};this.region=c.region;this.lens=c.lens;this.formats=c.formats||
gon.planningTerms;this.userId=c.userId||a.profile.get("id")};_(f.prototype).extend(Backbone.Events,{show:function(a){this.searchView=new c({model:a,lens:this.lens,formats:this.formats,userId:this.userId});this.searchView.on("search",function(a){this.trigger("search",a)},this);this.region.show(this.searchView)},focus:function(){this.searchView.focus()}});return f}()}}(Osp);
Osp.CourseApp.Lens.Planning.List=function(a){var c={};c.ContentView=a.ListContentView.extend({onClickName:function(a){a.preventDefault();a.stopPropagation();this.$el.addClass("visited");this.model.showContent(this.$el)}});c.HeadView=a.TableHeadView.extend({template:"course/resources/list/head-template"});c.ContentsView=a.ListView.extend({headView:c.HeadView,footView:a.CourseLensFootView,childView:c.ContentView});var f=a.View.extend({template:"course/resources/list/layout-template",regions:{actionsZone:"#actions",
optionsZone:"#options",contentsZone:"#contents",previewZone:"#preview",paginationZone:".pagination-wrapper"}});c.Controller=function(){var e=function(c){c=c||{};this.region=c.region;this.titleBookRegion=c.titleBookRegion;this.manager=new a.CourseApp.Lens.ContentsListManager};_(e.prototype).extend({showFirstFilter:function(c,e){a.CourseApp.onFirstFilterReady(c,e,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},showFilter:function(c,e,f,l){a.CourseApp.onFilterReady(c,
e,f,_.bind(function(a,c,d){a=d.contents(f,l);this._show(a,c)},this))},showStructure:function(c,e,f,l){a.CourseApp.onStructureReady(c,e,f,_.bind(function(c,d,e){e.expandAndActivate();c=e.contents(d,l);this._show(c,d);this._courseHasPageRangeNavigator()&&this.titleBookRegion.show(new a.CourseApp.Lens.Title.BookView({model:new a.Book({structure:e})}))},this))},search:function(){this.manager.search()},_show:function(a,c){this.manager.set(a);this.layout=new f;this.layout.on("render",function(){this._showPagination(a,
c);this._showActions(a,c);this._showOptions(a,c);this._showContents(a,c);this._showPreview(c)},this);this.region.show(this.layout)},_showPagination:function(c,e){this.layout.showChildView("paginationZone",new a.NumberedPaginationView({collection:c,lens:e}))},_showActions:function(c,e){c=new a.Actions(null,{targets:c,course:e.course(),lens:e});c.reset(a.config.actions[this._getProfileType()].planning);c=new a.ActionsView({collection:c});this.layout.showChildView("actionsZone",c)},_showOptions:function(c,
e){this.layout.showChildView("optionsZone",new a.ListOptionsView({lens:e,collection:c}))},_showContents:function(a,e){this.layout.showChildView("contentsZone",new c.ContentsView({lens:e,collection:a}))},_showPreview:function(c){this.layout.showChildView("previewZone",new a.ContentPreviewView({lens:c}))},_courseHasPageRangeNavigator:function(){return a.currentCourse.get("has_page_range_navigator")},_getProfileType:function(){return a.profile.get("type")}});return e}();return c}(Osp);
Osp.CourseApp.Lens.Markbook=function(){var a={},c=Osp.View.extend({template:"course/markbook/tabs-template",events:{"click a":"onClickTab","mouseenter #markbook-students-tab":"onMouseEnterTab","mouseleave #markbook-students-tab":"onMouseLeaveTab"},ui:{studentTab:"#markbook-students-tab"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens;this._course=this._lens.course();this.listenTo(Osp.vent,"course:markbook:node:show",this.activeStudentTab.bind(this));this.listenTo(Osp.vent,
"course:markbook:filter:show",this.disableStudentTab.bind(this))},disableStudentTab:function(){$(this.ui.studentTab).addClass("disabled");return!1},activeStudentTab:function(){$(this.ui.studentTab).removeClass("disabled");return!1},onClickTab:function(a){var c=$(a.currentTarget);a.preventDefault();a.stopPropagation();null!==Osp.state.getGroup()&&(c.tab("show"),"#markbook-groups"==c.attr("href")&&Osp.state.getGroup()&&(Osp.vent.trigger("search:clean"),Osp.vent.trigger("course:markbook:node:show",Osp.state.getCourse().id,
this._lens.get("name"),Osp.state.getGroup().id),Osp.state.setStudent(null)))},onMouseLeaveTab:function(a){$(a.currentTarget).tooltip("hide");$("div.tooltip.fade").remove()},onMouseEnterTab:function(a){null===Osp.state.getGroup()&&($(a.currentTarget).tooltip({title:I18n.t("ui.markbook.no_group_selected"),trigger:"manual"}),$(a.currentTarget).tooltip("show"));return!1},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);return _(a).extend({studentTabClass:null!==Osp.state.getGroup()?
"":"disabled"})}}),f=Osp.Model.extend({defaults:{query:"",assigned_by:""}}),e=Osp.View.extend({className:"legacy",template:"course/markbook/layout-template",regions:{tree:"#tree",list:"#list"}});a.Controller=function(){var d=function(a){a=a||{};this.titleButtonsRegion=a.titleButtonsRegion;this.titleSearchRegion=a.titleSearchRegion;this.titleBookRegion=a.titleBookRegion;this.region=a.region;this.lens=a.lens};_(d.prototype).extend({show:function(){if(Osp.profile.isTeacher()&&!this.lens.get("legacy"))return Backbone.Radio.channel("course.lens").request("title:region").empty(),
(new Osp.Components.Course.Markbook({model:this.lens})).show(this.region);this.layout=new e({model:this.lens});this._initEventHandlers();this.layout.on("render",_.bind(function(){this._showTitle();this._showTree()},this));Osp.state.setStudent(null);this.region.show(this.layout)},onCourseMarkbookFilterShow:function(a,c,d,e){Osp.CourseApp.isCurrentLensId(a,c)&&(_(d).isEmpty()?this._showFirstFilter(a,c):this._showFilter(a,c,d,e))},onCourseMarkbookNodeShow:function(a,c,d,e){this._showGroup(a,c,d,e)},
onCourseMarkbookUserShow:function(a,c,d){this._showUser(a,c,d)},onCourseMarkbookStudentEdit:function(a,c){Osp.CourseApp.Lens.Assignments.StudentAssignment.show(a,c)},onCourseMarkbookSearchShow:function(a,c,d){this._showMarkbookSearch(a,c,d)},onCourseMarbookReportStudent:function(a,c,d,e){Osp.CourseApp.Lens.Markbook.Reports.showStudentReport(Osp.state.getStudent(),e)},onCourseMarbookReportShow:function(a){Osp.CourseApp.Lens.Markbook.Reports.showGroupReport(Osp.state.getGroup(),a)},onCourseMarbookReportGroup:function(a){Osp.CourseApp.Lens.Markbook.Reports.showGroupReport(Osp.state.getGroup(),
a)},onCourseMarbookReportDiagnostic:function(a){Osp.CourseApp.Lens.Markbook.Reports.showDiagnosticReport(Osp.state.getGroup(),a)},_initEventHandlers:function(){this.layout.listenTo(Osp.vent,"course:markbook:filter:show",this.onCourseMarkbookFilterShow.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:node:show",this.onCourseMarkbookNodeShow.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:user:show",this.onCourseMarkbookUserShow.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:student:edit",
this.onCourseMarkbookStudentEdit.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:search:show",this.onCourseMarkbookSearchShow.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:report:student",this.onCourseMarbookReportStudent.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:report:group",this.onCourseMarbookReportGroup.bind(this));this.layout.listenTo(Osp.vent,"course:markbook:report:diagnostic",this.onCourseMarbookReportDiagnostic.bind(this))},_showFirstFilter:function(a,
c){this._getListController().showFirstFilter(a,c)},_showFilter:function(a,c,d,e){this._getListController().showFilter(a,c,d,e)},_showGroup:function(a,c,d,e){this._getListController().showGroup(a,c,d,e)},_showUser:function(a,c,d,e){this._getListController().showUser(a,c,d,e)},_showMarkbookSearch:function(a,c,d){this._getListController().showSearch(a,c,d)},_getListController:function(){return this._listController||(this._listController=new a.List.Controller({region:this.layout.getRegion("list"),regionTreeGroupName:this._getTreeGroupNameRegion(),
regionTreeUsers:this._getTreeUsersRegion()}))},_showTitle:function(){this.titleButtonsRegion.show(new c({lens:this.lens}));this._showTitleSearch();this.titleBookRegion.empty()},_showTitleSearch:function(){var c=new a.Search.Controller({region:this.titleSearchRegion,lens:this.lens});c.on("search",function(a){Osp.state.resetSearch();Osp.state.setSearchTerms(a);c.show(new f(a));c.focus();this._search()},this);c.show(new f(Osp.state.getSearch()))},_search:function(){return this._getListController().search()},
_showTree:function(){this.treeController=new a.Tree.Controller({region:this.layout.getRegion("tree"),lens:this.lens});this.treeController.show()},_getTreeGroupNameRegion:function(){return this.treeController.getGroupNameRegion()},_getTreeUsersRegion:function(){return this.treeController.getUsersRegion()}});return d}();return a}();"use strict";
Osp.CourseApp.Lens.Markbook.GroupAssignments=function(){var a={},c,f;a.StudentView=Osp.View.extend({className:"item row-fluid",tagName:"div",events:{"click .select":"onClickSelect"},modelEvents:{change:"render"},initialize:function(){Osp.View.prototype.initialize.apply(this,arguments);var a=this.model.get("student_assignment_status");this.template="course/markbook/group_assignment/"+(a==Osp.Markbook.MARKED||a==Osp.Markbook.DONE||f?"student":"student_incomplete")+"-template";this.model.set("iconClass",
a==Osp.Markbook.MARKED?"icon-ok":"");this._markbook=new Osp.Markbook({id:this.options.assignment.get("id"),student_assignment_id:this.model.get("student_assignment_id"),_course:this.options.course})},onClickSelect:function(a){a.preventDefault();a.stopPropagation();this.model.collection.setForAllBut(this.model,{active:!1});this.model.set({active:!0});this.trigger("select",this._markbook,this.model)},onRender:function(){this.$el.parents(".items").find(".item").removeClass("active");this.model.get("active")&&
this.$el.addClass("active");this.model.get("student_assignment_status")==Osp.Markbook.MARKED&&this.$("a").addClass("marked")}});a.StudentsView=Osp.CollectionView.extend({childView:a.StudentView,childViewEventPrefix:"student",initialize:function(){Osp.CollectionView.prototype.initialize.apply(this,arguments);this._assignment=this.options.assignment;this._course=this.options.course},buildChildView:function(a,c){return new c({model:a,assignment:this._assignment,course:this._course})},onRender:function(){var a=
this.children.find(function(a){return 0<a.$("a.select").length});a&&(a.model.set("active",!0),Osp.vent.trigger("course:markbook:firstStudent:view",a._markbook,a.model))}});a.ResourceView=Osp.View.extend({template:"course/markbook/group_assignment/content-template",events:{"click .name":"onClickContent"},onClickContent:function(a){a.preventDefault();a.stopPropagation();this.model.showContent()}});a.ResourcesView=Osp.CollectionView.extend({childView:a.ResourceView});a.StudentAssignmentLayout=Osp.View.extend({template:"course/markbook/group_assignment/student_assignment-template",
regions:{studentContent:"#student-content"},templateContext:_.extend({showHandingMessage:function(){return _(["manual","nothing"]).contains(this.delivery)||this.manual_handing},handingMessage:function(){if("manual"==this.delivery||this.manual_handing)return I18n.t("ui.assignments.delivery_type.manual");if("nothing"==this.delivery)return I18n.t("ui.assignments.delivery_type.nothing")}},Osp.View.prototype.templateContext),events:{"click .screen":"onClickScreen"},ui:{mark:"input[name=mark]",screenMark:".mark-input"},
triggers:{"change @ui.mark":"mark:change","change @ui.screenMark":"mark:screen:change"},modelEvents:{change:"render"},getTestContent:function(){return new Osp.Content(_.extend({student_assignment_id:this.model.get("student_assignment_id")},this.model.get("test_contents")[0]))},getLauncher:function(){return new Osp.ContentLauncherService(this.getTestContent())},onClickScreen:function(a){a.preventDefault();a.stopPropagation();this.getLauncher().launchPage($(a.target).attr("data-screen"))},onRender:function(){this.showChildView("studentContent",
new Osp.ContentsView({collection:new Osp.Contents(this.model.get("student_contents"))}))}});var e=Mn.Object.extend({initialize:function(a){this.region=a;this.items={}},show:function(c,e){this.set(c,e).done(function(){this.view=new a.StudentAssignmentLayout({model:this.current.markbook});this.listenTo(this.view,"mark:change",this.onMarkChange.bind(this));this.listenTo(this.view,"mark:screen:change",this.onMarkScreenChange.bind(this));this.listenTo(this.view,"destroy",this.unbindEvents.bind(this));
this.region.show(this.view)}.bind(this))},onMarkChange:function(a,c){this.current.data={mark:$(c.currentTarget).val()};this.trigger("item:change")},onMarkScreenChange:function(a,c){a=$(c.currentTarget);c=this.current.markbook.get("detailed_score");c[a.attr("data-screen")][1]=a.val();this.current.data={detailed_score:c};this.trigger("item:change")},select:function(a,c){this.set(a,c).done(function(){this.view.model=this.current.markbook;this.view.render()}.bind(this))},set:function(a,c){this.items[c.id]||
(this.items[c.id]={markbook:a.clone(),student:c});this.current&&this.current.data&&this.current.markbook.set(this.current.data);this.current=this.items[c.id];return this.current.markbook.get("name")?$.Deferred().resolve().promise():this.current.markbook.fetch()},itemsToSave:function(){return _.chain(this.items).keys().reduce(function(a,c){this.items[c].data&&a.push(this.items[c]);return a},[],this).value()},save:function(){var a=this.itemsToSave();if(_(a).isEmpty())return $.Deferred().resolve().promise();
var c=_(a).map(function(a){return _.extend({student_assignment_id:a.markbook.get("student_assignment_id")},a.data)});return $.ajax({type:"POST",url:"/api/markbooks/mark_assignments",data:JSON.stringify({marks:c}),contentType:"application/json"}).done(this.onItemsSaved.bind(this,a))},onItemsSaved:function(a){_(a).each(function(a){a.student.set({iconClass:"icon-ok",student_assignment_status:Osp.Markbook.MARKED})})}});a.Layout=Osp.ParentDialogLayout.extend({template:"course/markbook/group_assignment/layout-template",
regions:{students:"#students",assignment:"#student-assignment"},events:_.extend({"click button#withdraw":"onClickWithdraw","click button#save":"onClickSave"},Osp.ParentDialogLayout.prototype.events),initialize:function(){Osp.ParentDialogLayout.prototype.initialize.apply(this,arguments);this.model.set("assigned_to",this.model.assignedTo());var a=this.model.isDue()?"due":"";this.model.set("dueClass",a);this._course=this.options.course;this._contentAssignment=new Osp.Content(_(this.model.get("test_contents")).first());
this._supportMaterial=_(this.model.get("contents")).reject(function(a){return a.used_as==Osp.Content.TEST||this._contentAssignment.id===a.id}.bind(this));this.model.set("format",this._contentAssignment.get("format"));this.model.set("testName",this._contentAssignment.get("name"));this.model.set("activity_type",this._contentAssignment.get("activity_type"));this.listenTo(Osp.vent,"course:markbook:firstStudent:view",this.showAssignmentLayout.bind(this));this._needsListUpdate=!1},onClickWithdraw:function(a){this._needsListUpdate=
!0;a.preventDefault();a.stopPropagation();var c=$(a.target);if(!c.hasClass("disabled")){c.addClass("disabled");var d=this._course,e=this.model,f=new Osp.AlertDialog({title:I18n.t("ui.assignments.withdraw"),message:I18n.t("ui.markbook.withdraw_confirm.message"),className:"confirm-dialog",submitText:I18n.t("ui.markbook.withdraw_confirm.button"),submitCallback:function(){$.ajax({url:"/api/courses/"+d.get("id")+"/assignments/"+e.get("id"),type:"DELETE",success:function(a,c,d){$(".useritem_"+e.get("id")).parents(".item").remove();
$(".group-assignment").modal("hide")},error:function(a,d,e){$(".confirm-dialog").modal("hide");c.removeClass("disabled")}})}});f.onDestroy=function(){_.isFunction(Osp.AlertDialog.prototype.onDestroy)&&Osp.AlertDialog.prototype.onDestroy.apply(f);c.removeClass("disabled")};f.render()}},onChangeDueDate:function(a,e){a=formatJsonDate(JSON.parse(a).due,I18n.t("ui.date.long"));this.$(".edit").text(a).addClass("not-editing");c!=a&&(c=a,this.$(".due").removeClass("due"),f=!1,this.getChildView("students").render())},
onDestroy:function(){this._needsListUpdate&&Osp.state.getLens().refreshMarkbookCollections()},onRender:function(){Osp.ParentDialogLayout.prototype.onRender.apply(this,arguments);c=formatJsonDate(this.model.get("due"),I18n.t("ui.date.long"));f=this.model.isDue();var d=new Osp.Users(this.model.get("students"));d.comparator=function(a){return[a.get("last_name"),a.get("first_name"),a.get("name")].join("").toLowerCase()};d.sort();d=new a.StudentsView({collection:d,assignment:this.model,course:this._course});
this.listenTo(d,"student:select",this.assignments().select.bind(this.assignments()));this.showChildView("students",d);this.$(".edit").editable("/api/courses/"+this._course.get("id")+"/assignments/"+this.model.get("id"),{indicator:I18n.t("ui.common.saving"),tooltip:I18n.t("ui.common.edit_tooltip"),method:"PUT",datepicker:!0,name:"assignment[due]",submit:I18n.t("ui.common.abbr_submit"),cancel:I18n.t("ui.common.cancel"),onblur:"ignore",width:80,cssclass:"form-horizontal",callback:_.bind(this.onChangeDueDate,
this),onedit:function(a,c){$(c).removeClass("not-editing");this.dirty()}.bind(this),onreset:function(a,c){$(c).addClass("not-editing")}});d=new Osp.ContentView({model:this._contentAssignment});this.$("#test-content").append(d.render().el);d=new Osp.ContentsView({collection:new Osp.Contents(this._supportMaterial)});this.$("#support-material").append(d.render().el)},onClickSave:function(a){this._needsListUpdate=!0;a.preventDefault();a=$(a.target);a.hasClass("disabled")||(a.addClass("disabled"),this.assignments().save().done(this.hideModal.bind(this)))},
assignments:function(){this._assignments||(this._assignments=new e(this.getRegion("assignment")),this.listenTo(this._assignments,"item:change",this.dirty.bind(this)));return this._assignments},showAssignmentLayout:function(a,c){this.assignments().show(a,c)}});a.showDialog=function(c,e){(new a.Layout({model:c,course:e,className:"big group-assignment legacy",min_width:720,unsaved:{message:I18n.t("ui.markbook.unsaved.message"),submitText:I18n.t("ui.markbook.unsaved.submit")}})).render()};Osp.vent.on("course:markbook:group:edit",
function(c,e){a.showDialog(c,e)});return a}();
Osp.CourseApp.Lens.Markbook.Tree=function(){var a={};a.UserView=Osp.View.extend({tagName:"li",template:"course/markbook/tree/users/user-template",events:{"click a.select":"onClickSelect"},modelEvents:{change:"onChange"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._lens=a.lens;this._group=a.group;this.listenTo(Osp.vent,"course:markbook:node:show",this.onModelShown.bind(this));this.listenTo(Osp.vent,"course:markbook:user:show",this.onModelShown.bind(this));this.listenTo(Osp.vent,
"course:markbook:search",this.onSearchShown.bind(this))},onChange:function(a){this.$el.toggleClass("active",this.model.get("active"))},onClickSelect:function(a){a.stopPropagation();a.preventDefault();a=this.model;Osp.state.setStudent(new Osp.Student(a.toJSON()));Osp.vent.trigger("course:markbook:user:show",a.course().get("id"),this._lens.get("name"),a.get("id"))},onModelShown:function(a,c,d){this.model.set({active:this.model.id===d})},onSearchShown:function(){this.model.set({active:!1})},onRender:function(){this.$el.toggleClass("active",
this.model.get("active"))}});a.UsersView=Osp.CollectionView.extend({childView:a.UserView,tagName:"ul",className:"nav nav-list",initialize:function(a){Osp.ListView.prototype.initialize.apply(this,arguments);this._lens=a.lens;this._group=a.group},buildChildView:function(a,c){return new c({model:a,lens:this._lens,group:this._group})}});a.EmptyUsersView=Backbone.View.extend({});a.SelectedGroupView=Osp.View.extend({template:"course/markbook/tree/users/group-template",initialize:function(a){Osp.View.prototype.initialize.apply(this,
arguments);this.model=a.group}});var c=Osp.View.extend({template:"course/markbook/tree/groups/layout-template",regions:{filters:"#filters",groups:"#groups",users:"#users",group_name:"#group-name"}});a.Controller=function(){var f=function(a){a=a||{};this.region=a.region;this.lens=a.lens};_(f.prototype).extend({show:function(){this.layout=new c;this.region.show(this.layout);this._canShowFilters()&&this._showFilters();Osp.profile.isTeacher()?(this._canShowGroups()&&this._showGroups(),this._canShowUsers()&&
this._showUsers(),this._canShowGroupName()&&this._showGroupName()):(this._closeGroups(),this._closeUsers(),this._closeGroupName());this._triggerFilterShow()},getUsersRegion:function(){return this.layout.getRegion("users")},getGroupNameRegion:function(){return this.layout.getRegion("group_name")},_showFilters:function(){this.layout.showChildView("filters",new Osp.FiltersView({collection:this._getFilters(),lens:this.lens}))},_showGroups:function(){this.layout.showChildView("groups",new Osp.TreeRootView({collection:this._getGroups(),
lens:this.lens,observer:Osp.NavigationObserver}))},_showUsers:function(){this.layout.showChildView("users",new a.EmptyUsersView)},_showGroupName:function(){this.layout.showChildView("group_name",new a.SelectedGroupView({group:null}))},_closeGroups:function(){this.layout.getRegion("groups").empty()},_closeUsers:function(){this.layout.getRegion("users").empty()},_closeGroupName:function(){this.layout.getRegion("group_name").empty()},_triggerFilterShow:function(){Osp.vent.trigger("course:markbook:filter:show",
this._getCourseId(),this._getLensName(),this._getFilterName())},_getLensName:function(){return this.lens.get("name")},_getCourseId:function(){return this._getCourse().id},_getFilterName:function(){return this._getFilter().get("name")},_getFilter:function(){return this.lens.filters().first()},_getGroups:function(){return this._getCourse().groups()},_getFilters:function(){return this.lens.filters()},_getCourse:function(){return this.lens.course()},_canShowFilters:function(){return Osp.can("show","markbook/filters")},
_canShowUsers:function(){return Osp.can("show","markbook/users")},_canShowGroups:function(){return Osp.can("show","markbook/groups")},_canShowGroupName:function(){return Osp.can("show","markbook/group_name")}});return f}();return a}();
Osp.CourseApp.Lens.Markbook.Search=function(a){var c=a.AdvancedSearchView.extend({template:"course/markbook/search-template",templateContext:function(){return{nameFor:function(a){return I18n.t("ui.search.advanced_search."+("me"==a?"my_markbooks":"all_markbooks"))}.bind(this),showOptions:function(){return a.profile.isTeacher()}}},extractSearchFromControls:function(){var a=this.$("input[name=query]"),c=this.$("#search-box .assigned_by"),d={};_.isEmpty(a.val())||(d.query=a.val());c.length&&(d.assigned_by=
c.data("value"));return d}});return{Controller:function(){var a=function(a){a=a||{};this.region=a.region;this.lens=a.lens};_(a.prototype).extend(Backbone.Events,{show:function(a){this.searchView=(new c({model:a,lens:this.lens})).on("search",function(a){this.trigger("search",a)},this);this.region.show(this.searchView)},focus:function(){this.searchView.focus()}});return a}()}}(Osp);
Osp.CourseApp.Lens.Markbook.List=function(){var a={},c=Backbone.Radio.channel("course:lens:markbook");a.MarkbookView=Osp.ListContentView.extend({events:_.extend({"click .mark-button":"onClickName"},Osp.ListContentView.prototype.events),onClickName:function(a){a.preventDefault();a.stopPropagation();Osp.profile.isStudent()?h(this.model):Osp.vent.trigger("course:markbook:"+this.type()+":edit",this.model,this.model.course())},type:function(){return this.model.get("student_assignment_id")?"student":"group"}});
a.MarkbookDetailView=a.MarkbookView.extend({template:"course/markbook/list/item-template",serializeData:function(){var c=a.MarkbookView.prototype.serializeData.call(this),d={allTodo:this.model.allHasStatus(Osp.Markbook.TODO),allDone:this.model.allHasStatus(Osp.Markbook.DONE),anyDone:1==this.model.get("manual_marking")&&this.model.oneHasStatus(Osp.Markbook.DONE),allMarked:this.model.allHasStatus(Osp.Markbook.MARKED)};return _(c).extend(d)}});a.MarkbookUserDetailView=a.MarkbookDetailView.extend({template:"course/markbook/list/user/item-template",
modelEvents:_.extend({"change:mark":"modelMarkChanged"},a.MarkbookDetailView.prototype.modelEvents),modelMarkChanged:function(a,c){a.collection.fetch()},serializeData:function(){var c=a.MarkbookView.prototype.serializeData.call(this),d={student_status_val:this.model.get("student_status_val")};return _(c).extend(d)}});a.MarkbookStudentDetailView=a.MarkbookUserDetailView.extend({template:"course/markbook/list/student/item-template"});a.HeadUserView=Osp.TableHeadView.extend({template:"course/markbook/list/user/head-template"});
a.HeadStudentView=a.HeadUserView.extend({});var f=Osp.FootView.extend({template:"common/course_lens_no_contents-template",serializeData:function(){return{message:I18n.t("ui.markbook.no_items.teacher")}}}),e=Osp.FootView.extend({template:"common/course_lens_no_contents-template",serializeData:function(){return{message:I18n.t("ui.markbook.no_items.student")}}});a.MarkbooksView=Osp.ListView.extend({className:"items group-markbooks",headView:Osp.TableHeadView,childView:a.MarkbookDetailView,footView:f});
a.MarkbooksUserView=Osp.ListView.extend({className:"items student-markbooks",headView:a.HeadUserView,childView:a.MarkbookUserDetailView,footView:f});a.MarkbooksStudentView=Osp.ListView.extend({className:"items student-markbooks",headView:a.HeadStudentView,childView:a.MarkbookStudentDetailView,footView:e});a.PreviewView=Osp.MarkbookPreviewView.extend({template:"course/markbook/list/preview_general-template"});var d=Osp.View.extend({template:"course/markbook/list/layout-template",events:{"click .info-icon":"onShowDiagnosticReportInfo"},
regions:{actionsZone:"#actions",markbookZone:"#markbooks",previewZone:"#preview",paginationZone:".pagination-wrapper"},onShowDiagnosticReportInfo:function(a){a.preventDefault();a.stopPropagation();(new Osp.InfoIconAutoDialog({icon:this.$(".info-icon"),header:I18n.t("ui.markbook.dialog_report_info.title"),text_markup:"<p>"+I18n.t("ui.markbook.dialog_report_info.student_report")+"<p><p>"+I18n.t("ui.markbook.dialog_report_info.group_report")+"<p><p>"+I18n.t("ui.markbook.dialog_report_info.diagnostic_report")+
"<p>"})).render()}});a.Controller=function(){var e=function(a){a=a||{};this.region=a.region;this.regionTreeGroupName=a.regionTreeGroupName;this.regionTreeUsers=a.regionTreeUsers;this.manager=new Osp.CourseApp.Lens.ContentsListManager};_(e.prototype).extend({showFirstFilter:function(a,c){Osp.CourseApp.onFirstFilterReady(a,c,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},showFilter:function(a,c,d,e){Osp.CourseApp.onFilterReady(a,c,d,_.bind(function(a,c,d){d=d.markbooks(e);
this._show(d,c);_.delay(this._showSelectedMarkbook,300,a)},this))},showGroup:function(a,c,d,e){Osp.CourseApp.onGroupReady(a,c,d,_.bind(function(a,c,d){d.expandAndActivate();a=d.markbooks(e);this._show(a,c);a=new Osp.CourseApp.Lens.Markbook.Tree.SelectedGroupView({group:d});c=new Osp.CourseApp.Lens.Markbook.Tree.UsersView({collection:d.users(),group:d,lens:c});this.regionTreeGroupName.show(a);this.regionTreeUsers.show(c)},this))},showUser:function(a,c,d,e){Osp.CourseApp.onUserReady(a,c,d,_.bind(function(a,
c,d){a=d.markbooks(e);this._show(a,c,!0)},this))},search:function(){this.manager.search()},showSearch:function(a,c){this._show(a,c,!_.isUndefined(a._user))},_show:function(a,c,e){this.manager.set(a);this.layout=new d;this.layout.on("render",function(){this._showPagination(a,c);this._showActions(a,c);this._showMarkbook(a,c,e);this._showPreview(c)},this);this._setLensSortCriteria(c,_(a).pick("sortColumn","sortDirection"));this.region.show(this.layout)},_showPagination:function(a,c){this.layout.showChildView("paginationZone",
new Osp.NumberedPaginationView({collection:a,lens:c}))},_showActions:function(a,c){a=new Osp.Actions(null,{targets:a,course:c.course(),lens:c});a.reset(Osp.config.actions[this._getProfileType()].markbook);a=new Osp.ActionsView({collection:a});this.layout.showChildView("actionsZone",a)},_showMarkbook:function(c,d,e){this._profileIsStudent()?this._showMarkbookType(c,d,a.MarkbooksStudentView):e?this._showMarkbookType(c,d,a.MarkbooksUserView):this._showMarkbookType(c,d,a.MarkbooksView)},_showMarkbookType:function(a,
c,d){this.layout.showChildView("markbookZone",new d({lens:c,collection:a}))},_showPreview:function(c){this.layout.showChildView("previewZone",new a.PreviewView({lens:c}))},_getProfileType:function(){return Osp.profile.get("type")},_profileIsStudent:function(){return Osp.profile.isStudent()},_setLensSortCriteria:function(a,c){c=c||{};a.setSortColumn(c.sortColumn);a.setSortDirection(c.sortDirection)},_showSelectedMarkbook:function(a){var d=a.state();d.has("assignment")&&(c.request("show",d.get("assignment"),
a),d.unset("assignment"))}});return e}();var h=function(a){a=new Osp.Components.Course.MarkbookPanel({model:a,course:a.course()});a.show();a.toggle()};c.reply("show",function(a,c){var d=new Osp.Markbook(_.extend({_course:c},{id:a.id,student_assignment_id:a.get("student_assignment_id")}));d.fetch().done(function(){Osp.profile.isStudent()?h(d):Osp.vent.trigger("course:markbook:student:edit",d,c)})});return a}();"use strict";
Osp.CourseApp.Lens.Markbook.Reports=function(){function a(a){var c="icon icon-delegate-assignment";switch(parseInt(a,10)){case Osp.GroupAssignment.status.pendingOfMarking:c="icon icon-check-assignment";break;case Osp.GroupAssignment.status.allMarked:c="icon icon-marked-assignment"}this.$("i").addClass(c)}function c(){var a=this.$(".title"),c=a.children("a"),d=c.text();c.remove();a.text(d)}function f(a){this.$(".mark").hide();this.$(".status-message").text(a);this.$(".status-message").removeClass("hide").show()}
function e(a){function c(a,c){var d=parseInt(a[1],10);a=parseInt(a[2],10);switch(d){case 0:var e="failed-screen";break;case a:e="completed-screen";break;default:e="partial-screen"}return'<td class="'+e+'"><a class="screen-score" href="#" data-bookmark="'+c+'">'+d+"/"+a+"</a></td>"}for(var d=0;d<a.length;d++)this.$(".detailed-score tr.detailed-score-headers").append("<td>"+(d+1)+"</td>"),this.$(".detailed-score tr.detailed-score-values").append(c(a[d],d))}function d(a,c){var d=new Osp.Contents(a.get("test_contents"));
c=c?c:0;d.each(function(d){d.set({student_assignment_id:a.id,bookmark:c});d.showContent()})}function h(a,c,d){c=_(c).map(function(a){return a.id});return a.getAssignments(c,void 0,d)}function k(){this.assignments.any(function(a){return a.studentAssignments.any(function(a){return a.get("confidence_level")})})&&this.$("#confidence-key").show()}var l={},m,n=Osp.View.extend({template:"course/markbook/reports/student_header-template"}),q=Osp.View.extend({template:"course/markbook/reports/student_line-template",
templateContext:function(){var a=this.model.get("no_mark"),c=this.model.get("status")===v;return{showNa:a&&c}},events:{"click .title a":"onClickAssignmentTitle"},onClickAssignmentTitle:function(a){a.preventDefault();a.stopPropagation();a=new Osp.Contents(this.model.get("student_contents"));0<a.size()?a.each(function(a){a.showContent()}):this.model.isInteractive()&&d(this.model)},onRender:function(){var a=new Osp.Contents(this.model.get("student_contents"));Osp.View.prototype.onRender.call(this);var d=
this.model.get("status"),e="icon icon-delegate-assignment";switch(parseInt(d,10)){case Osp.StudentAssignment.status.done:e="icon icon-check-assignment";break;case Osp.StudentAssignment.status.marked:e="icon icon-marked-assignment"}this.$("i").addClass(e);this.model.isUnfinished()?(f.call(this,I18n.t("ui.markbook.reports.student.status.incomplete")),c.call(this)):this.model.isUnmarked()?(f.call(this,I18n.t("ui.markbook.reports.student.status.unmarked")),c.call(this)):this.model.get("manual_handing")?
c.call(this):0!==a.size()||this.model.isInteractive()||c.call(this)},serializeData:function(){return _(Osp.View.prototype.serializeData.call(this)).extend({message:""})}}),t=Osp.CollectionView.extend({childView:q,initialize:function(){_.bindAll(this,"cellHeightFix");$(window).on("resize",this.cellHeightFix)},sortByColumn:function(a){var c=$(a.target).data("sortable-attribute");a.preventDefault();a.stopPropagation();this.collection.sortByAttr(c)},onRender:function(){this.cellHeightFix()},onDestroy:function(){$(window).off("resize",
this.cellHeightFix)},cellHeightFix:function(){_.delay(function(){this.$(".noisy:visible").heightFix("cell")}.bind(this),200)}}),y=Osp.View.extend({template:"course/markbook/reports/group_header-template"}),v=4,x=q.extend({template:"course/markbook/reports/group_student_line-template",templateContext:function(){var a=this.options.isNoMarks,c=this.model.get("status")===v;return{showNa:a&&c}}}),w=Osp.CollectionView.extend({childView:x,childViewOptions:function(){return{isNoMarks:this.options.isNoMarks}}});
q=Osp.View.extend({initialize:function(a){Osp.View.prototype.initialize.apply(this,a);this.markbooks=a.markbooks;this.isNoMarks=this.isNoMarks()},template:"course/markbook/reports/group_line-template",templateContext:function(){return{isNoMarks:this.isNoMarks}},isNoMarks:function(){return this.markbooks.find(_.bind(function(a){return this.model.get("id")===a.get("id")},this)).get("no_mark")},StudentsView:w,onRender:function(){Osp.View.prototype.onRender.call(this);this.$el.on("shown hidden",function(a){a.stopPropagation()});
a.call(this,this.model.status());var c=new this.StudentsView({collection:this.model.studentAssignments,isNoMarks:this.isNoMarks});this.$(".accordion-body").append(c.render().el)},serializeData:function(){return _.extend(Osp.View.prototype.serializeData.apply(this,arguments),{cid:this.cid})}});var z=Osp.CollectionView.extend({childView:q,childViewOptions:function(){return{markbooks:this.options.markbooks}},sortByColumn:function(a){var c=$(a.target).data("sortable-attribute");a.preventDefault();a.stopPropagation();
this.collection.sortByAttr(c)}}),u=x.extend({template:"course/markbook/reports/diagnostic_student_line-template",events:_.extend({"click .screen-score":"onClickScreenScore"},x.prototype.events),onClickScreenScore:function(a){var c=$(a.target).data("bookmark");a.preventDefault();d(this.model,c)},onRender:function(){x.prototype.onRender.apply(this,arguments);this.model.isMarked()&&null!==this.model.get("detailed_score")&&e.call(this,this.model.get("detailed_score"));if(this.model.get("confidence_level")){var a=
this.model.get("confidence_level");this.$(".confidence-level").append('<div class="confidence-level-booble '+a[0]+'">'+a[1]+"</div>")}return this}});w=w.extend({childView:u});q=q.extend({StudentsView:w});var A=z.extend({childView:q,childViewOptions:function(){return{markbooks:this.options.markbooks}}}),C=Osp.DialogLayout.extend({template:"course/markbook/reports/layout-template",events:_.extend({"click .sortable":"sortByColumn"},Osp.DialogLayout.prototype.events),regions:{assignmentsList:"#report-body",
header:"#report-header"},initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);if(_.isUndefined(a.headerView)||_.isNull(a.headerView))throw"Missing required param headerView";if(_.isUndefined(a.collectionView)||_.isNull(a.collectionView))throw"Missing required param collectionView";this.title=a.title||"No title given";this.headerView=a.headerView;this.collectionView=a.collectionView;this.assignments=a.assignments||null;this.markbooks=a.markbooks||null},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,
arguments);var a=this.collectionView===A?"diagnostic":"group",c=new this.headerView,d=this;c.onRender=function(){Osp.TableHeadView.setSortingIcons.call(this,d.assignments.sortColumn,d.assignments.sortDirection);return this};this.showChildView("header",c);this.showChildView("assignmentsList",new this.collectionView({collection:this.assignments,markbooks:this.markbooks}));"diagnostic"===a&&k.call(this);this.$("#export-report").attr("href",this.assignments.url("csv",a));this.$("#print-report").attr("href",
this.assignments.url("pdf",a));return this},serializeData:function(){return _(Osp.DialogLayout.prototype.serializeData.call(this)).extend({reportTitle:this.title})},sortByColumn:function(a){this.getChildView("assignmentsList").sortByColumn(a);this.$("#export-report").attr("href",this.assignments.url("csv"));this.$("#print-report").attr("href",this.assignments.url("pdf"));Osp.TableHeadView.setSortingIcons.call(this,this.assignments.sortColumn,this.assignments.sortDirection)}});l.showDiagnosticReport=
function(a,c){var d=Osp.state.getLens();h(a,c,{sortColumn:d.sortColumn(),sortDirection:d.sortDirection()}).done(function(){var c=a.assignments();m=new C({className:"markbook-report large diagnostic-report legacy",title:I18n.t("ui.markbook.reports.diagnostic.title_js",{name:a.get("name")}),headerView:y,collectionView:A,model:a,markbooks:a._markbooks,assignments:c});m.render()})};l.showGroupReport=function(a,c){var d=Osp.state.getLens();h(a,c,{sortColumn:d.sortColumn(),sortDirection:d.sortDirection()}).done(function(){var c=
a.assignments();m=new C({className:"markbook-report large group-report legacy",title:I18n.t("ui.markbook.reports.group.title_js",{name:a.get("name")}),headerView:y,collectionView:z,model:a,markbooks:a._markbooks,assignments:c});m.render()})};l.showStudentReport=function(a,c){var d=Osp.state.getCourse(),e=Osp.state.getLens();a.getCourseAssignments(d,void 0,{sortColumn:e.sortColumn(),sortDirection:e.sortDirection()}).done(function(){var f=a.courseAssignments(d,{sortColumn:e.sortColumn(),sortDirection:e.sortDirection()});
m=new C({className:"markbook-report large student-report legacy",title:I18n.t("ui.markbook.reports.student.title_js",{name:a.get("display_name")}),headerView:n,collectionView:t,model:a,markbooks:c,assignments:f});m.render()})};return l}();
Osp.CourseApp.Lens.Digibook=function(){var a={};a.Book=Osp.View.extend({className:"digibook",events:{"click .digibook-link":"onClickLink"},getTemplate:function(){return Osp.profile.isTeacher()?"course/digibook/teacher_digibook-template":"course/digibook/student_digibook-template"},render:function(){Osp.View.prototype.render.apply(this,arguments);this.model.isPublished()?this.$el.addClass("published"):this.$el.addClass("unpublished");this.model.purchased(Osp.profile.get("type"))?this.$el.addClass("purchased"):
this.$el.addClass("unpurchased")},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);return _(a).extend({course_name:Osp.currentCourse.get("name"),purchasedToTeachers:this.model.purchased(Osp.profile.get("type")),link:this.model.purchased(Osp.profile.get("type"))?this.model.getLink():this.model.get("purchase_link")})},onClickLink:function(a){a.preventDefault();a.stopPropagation();a=$(a.target);_.isUndefined(a.data("profile"))&&(a=a.parent());this.model.showDigitalBook(a)}});
a.Position=Osp.View.extend({template:"course/digibook/positions-template",className:"carousel-active-position",initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._digibooks=a&&a.digital_books},serializeData:function(){var a=Osp.View.prototype.serializeData.call(this);return _(a).extend({items_length:this._digibooks.length})}});a.Library=Osp.CollectionView.extend({className:"carousel-inner",childView:a.Book,attachHtml:function(a,c){var d=this.collection.models.indexOf(c.model);
0!=d&&0!=d%3||a.$el.append("<div class='item "+(0==d?"active":"")+"'></div>");a.$(".item").last().append(c.$el)}});a.NoBooks=Osp.View.extend({template:"course/digibook/no_books-template"});var c=Osp.View.extend({template:"course/digibook/layout-template",regions:{digibooks:"#digibooks",positions:"#digibooks-carousel-item-positions"},events:{slid:"onSlid"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this._digibooks=new Osp.Digibooks({course:this.model.course()});this.listenTo(this._digibooks,
"reset",this.onDigibooksReset.bind(this))},onDigibooksReset:function(){0<this._digibooks.length?(this.$("#digibooks").show(),this.showChildView("digibooks",new a.Library({collection:this._digibooks})),3<this._digibooks.length&&(this.$("#digibooks-carousel-controls").show(),this.showChildView("positions",new a.Position({digital_books:this._digibooks})))):this.showChildView("digibooks",new a.NoBooks({}))},onAttach:function(){this._digibooks.fetch({reset:!0})},onSlid:function(a){a=this.$(".carousel").find(".active");
a=a.parent().children().index(a);a=this.$(".cap_cell").eq(a);var c=this.$(".cap_table").find(".active");$(c).removeClass("active").addClass("nonactive");$(a).removeClass("nonactive").addClass("active")}});a.Controller=function(){var a=function(a){a=a||{};this.titleButtonsRegion=a.titleButtonsRegion;this.titleSearchRegion=a.titleSearchRegion;this.titleBookRegion=a.titleBookRegion;this.region=a.region;this.lens=a.lens};_(a.prototype).extend({show:function(){this.layout=new c({model:this.lens});this.layout.on("render",
_.bind(function(){this._showTitle()},this));this.region.show(this.layout)},_showTitle:function(){this.titleButtonsRegion.empty();this.titleSearchRegion.empty();this.titleBookRegion.empty()}});return a}();return a}();
Osp.CourseApp.Lens.Users=function(){var a={},c=null,f=function(){var a=new $.Deferred;_.isNull(c)?Osp.Course.getAdminStatus().done(function(d){c=d;a.resolve(d)}):a.resolve(c);return a.promise()};a.TitleLayout=Osp.CourseApp.Lens.Title.Layout.extend({template:"course/users/title-template"});var e=Osp.View.extend({className:"legacy",template:"course/users/layout-template",regions:{tree:"#tree",list:"#list"}});a.Controller=function(){var d=function(a){a=a||{};this.titleButtonsRegion=a.titleButtonsRegion;
this.titleSearchRegion=a.titleSearchRegion;this.titleBookRegion=a.titleBookRegion;this.region=a.region;this.lens=a.lens};_(d.prototype).extend({show:function(){this.layout=new e({model:this.lens});this._initEventHandlers();this.layout.on("render",_.bind(function(){this._showTree();this._showTitle()},this));this.region.show(this.layout)},onLayoutRender:function(){f().done(_.bind(function(a){this.lens.adminStatus=c;this.lens.isActive()&&!$(".modal-backdrop").length&&this._showAdminDialog()},this))},
onCourseUsersFilterShow:function(a,c,d,e){Osp.CourseApp.isCurrentLensId(a,c)&&(_(d).isEmpty()?this._showFirstFilter(a,c):this._showFilter(a,c,d,e))},onCourseUsersNodeShow:function(a,c,d,e){this._showGroup(a,c,d,e)},onCourseUsersSearchShow:function(a,c){this._showUsersSearch(a,c)},onCourseUsersInvite:function(a,c){Osp.CourseApp.Lens.Users.Invitations.showTeacherDialog()},onCourseDialogUserManagement:function(){a.Management.showDialog(this.lens)},setAdminStatus:function(a){c=a;this.lens.adminStatus=
a},_initEventHandlers:function(){this.layout.on("render",this.onLayoutRender,this);this.layout.listenTo(Osp.vent,"users:set_admin_status",this.setAdminStatus.bind(this));this.layout.listenTo(Osp.vent,"course:users:filter:show",this.onCourseUsersFilterShow.bind(this));this.layout.listenTo(Osp.vent,"course:users:node:show",this.onCourseUsersNodeShow.bind(this));this.layout.listenTo(Osp.vent,"course:users:search:show",this.onCourseUsersSearchShow.bind(this));this.layout.listenTo(Osp.vent,"course:users:invite",
this.onCourseUsersInvite.bind(this));this.layout.listenTo(Osp.vent,"course:dialog:user_management",this.onCourseDialogUserManagement.bind(this))},_showFirstFilter:function(a,c){this._getListController().showFirstFilter(a,c)},_showFilter:function(a,c,d,e){this._getListController().showFilter(a,c,d,e)},_showGroup:function(a,c,d,e){this._getListController().showGroup(a,c,d,e)},_showUsersSearch:function(a,c){this._getListController().showSearch(a,c)},_getListController:function(){return this._listController||
(this._listController=new a.List.Controller({region:this.layout.getRegion("list")}))},_showTitle:function(){this._showTitleButtons();this._showTitleSearch();this.titleBookRegion.empty()},_showTree:function(){this.treeController=new a.Tree.Controller({region:this.layout.getRegion("tree"),lens:this.lens});this.treeController.show()},_showTitleButtons:function(){this._canShowButtons()&&this.titleButtonsRegion.show(new Osp.ButtonsLayout({buttons:Osp.Buttons.createCollection(Osp.config.buttons.course.users),
lens:this.lens,className:"user-management-buttons"}))},_showTitleSearch:function(){this.titleSearchRegion.show(new Osp.SearchView({lens:this.lens}))},_showAdminDialog:function(){if(!Osp.Course.withAdmin(c)){var d;Osp.Course.noAdminInvitations(c)&&(d=new a.Invitations.Layout({className:"admin-invitation-dialog",resizable:!1,to_be_admin:!0}));Osp.Course.waitingAdminConfirmation(c)&&(d=new Osp.AlertDialog({title:I18n.t("ui.users.invitations.admins.invited.title"),message:I18n.t("ui.users.invitations.admins.invited.text"),
resizable:!1,className:"school-administrator-dialog"}));d.render()}},_canShowButtons:function(){return this.layout.can("show","users/buttons")}});return d}();return a}();
Osp.CourseApp.Lens.Users.Tree=function(a){var c={},f=a.View.extend({template:"course/users/tree/layout-template",regions:{filters:"#filters",groups:"#groups"}});c.Controller=function(){var c=function(a){a=a||{};this.region=a.region;this.lens=a.lens};_(c.prototype).extend({show:function(){this.layout=new f({});this.region.show(this.layout);this._showFilters();this._showGroups();this._triggerFilterShow()},_showFilters:function(){this.layout.showChildView("filters",new a.FiltersView({collection:this._getFilters(),
lens:this.lens}))},_showGroups:function(){this.layout.showChildView("groups",new a.TreeRootView({collection:this._getGroups(),lens:this.lens,observer:a.NavigationObserver}))},_triggerFilterShow:function(){a.vent.trigger("course:users:filter:show",this._getCourseId(),this._getLensName(),this._getFilterName())},_getLensName:function(){return this.lens.get("name")},_getCourseId:function(){return this._getCourse().id},_getFilterName:function(){return this._getFilter().get("name")},_getFilter:function(){return this.lens.filters().first()},
_getGroups:function(){return this._getCourse().groups()},_getFilters:function(){return this.lens.filters()},_getCourse:function(){return this.lens.course()}});return c}();return c}(Osp);
Osp.CourseApp.Lens.Users.List=function(a){var c={};c.FootView=a.FootView.extend({template:"common/users_lens_no_contents-template",serializeData:function(){return{message:gon.courseNoUsersFoundMessage||I18n.t("ui.common.users_lens_nocontents")}}});var f=a.ListView.extend({headView:a.TableHeadView,footView:c.FootView,childView:a.ListContentView}),e=a.View.extend({template:"course/users/list/layout-template",events:{"click .info-icon":"onClickInfo"},regions:{alertsZone:".alerts",actionsZone:"#actions",
usersZone:"#users",previewZone:"#preview",paginationZone:".pagination-wrapper"},onClickInfo:function(c){c.preventDefault();c.stopPropagation();(new a.InfoIconAutoDialog({icon:this.$(".info-icon"),text_markup:I18n.t("ui.users.info.teacher.message")})).render()}});c.Controller=function(){var d=function(a){a=a||{};this.region=a.region};_(d.prototype).extend({showFirstFilter:function(c,d){a.CourseApp.onFirstFilterReady(c,d,_.bind(function(a,c,d){this.showFilter(a.id,c.get("name"),d.get("name"))},this))},
showFilter:function(c,d,e,f){a.CourseApp.onFilterReady(c,d,e,_.bind(function(a,c,d){a=d.users(e,f);this._show(a,c)},this))},showGroup:function(c,d,e,f){a.CourseApp.onGroupReady(c,d,e,_.bind(function(a,c,d){d.expandAndActivate();var e=d.paginatedUsers();this._show(e,c);this._startPolling({course:a,group:d,callbackOnRefresh:function(){return $.when(e.fetch(),d.fetch())}})},this))},showSearch:function(a,c){this._show(a,c)},_show:function(a,c){this.layout=new e({lens:c,users:a});this.layout.on("render",
_.bind(function(){this._showPagination(a,c);this._showActions(a,c);this._showUsers(a,c);this._showPreview(c)},this));this.region.show(this.layout)},_showPagination:function(c,d){this.layout.showChildView("paginationZone",new a.NumberedPaginationView({collection:c,lens:d}))},_startPolling:function(c){c=c||{};var d=c.group,e=c.callbackOnRefresh;this.groupPolling=new a.GroupPolling({course:c.course,group:d});this.groupPolling.on("changed",_.bind(function(a){this._showAlert(a,d,e)},this));this.layout.on("destroy",
_.bind(function(){this.groupPolling.stopChecking()},this));this.groupPolling.checkPeriodically(a.config.groupPollingCheckingPeriod)},_showAlert:function(d,e,f){d=_({}).extend(d,{group:e});d=new c.Alerts.Alert(d);d.on("list:refresh",_.bind(function(){this.groupPolling.stopChecking();f.apply(this,arguments).done(_.bind(function(){this.groupPolling.checkPeriodically(a.config.groupPollingCheckingPeriod)},this))},this));this.layout.showChildView("alertsZone",d)},_showActions:function(c,d){c=new a.Actions(null,
{targets:c,course:d.course(),lens:d});c.reset(a.config.actions[this._getProfileType()].users);c=new a.ActionsView({collection:c});this.layout.showChildView("actionsZone",c)},_showUsers:function(a,c){this.layout.showChildView("usersZone",new f({lens:c,collection:a}))},_showPreview:function(c){this.layout.showChildView("previewZone",new a.UserPreviewView({lens:c}))},_getProfileType:function(){return a.profile.get("type")}});return d}();return c}(Osp);
Osp.CourseApp.Lens.Users.List.Alerts=function(a){return{Alert:a.View.extend({template:"course/users/list/alert-template",className:"alert fade in",events:{"click .refresh":"onClickRefresh"},templateContext:function(){return{message:_.bind(function(){return this._groupOrCourseMessage()},this)}},initialize:function(c){c=c||{};this._group=c.group;this._usersAdded=c.usersAdded;a.View.prototype.initialize.apply(this,arguments)},onClickRefresh:function(a){a.preventDefault();a.stopPropagation();this.trigger("list:refresh");
this.destroy()},_groupOrCourseMessage:function(){return this._group?this._groupMessage():this._courseMessage()},_groupMessage:function(){var a=this._usersAdded?"message_group":"message_group_empty";a=_("ui.courses.users.list.alerts.%s").sprintf(a);return I18n.t(a,{count:this._usersAdded,group_name:this._group.get("name")})},_courseMessage:function(){return I18n.t("ui.courses.users.list.alerts.message_course",{count:this._usersAdded})}})}}(Osp);
Osp.CourseApp.Lens.Users.Invitations=function(){var a={};a.FormView=Osp.FormView.extend({template:"course/users/invitations/form-template",initialize:function(){Osp.FormView.prototype.initialize.apply(this,arguments);this.listenTo(Osp.vent,"invitation:form:submit",this.onClickSubmit.bind(this))},onSaveSuccess:function(a,f,e){a=f.adminInvitation()?new Osp.AlertDialog({title:I18n.t("ui.users.invitations.admins.title"),message:I18n.t("ui.users.invitations.admins.confirmation.message"),className:"confirmation-dialog",
resizable:!1,onHide:function(){Osp.vent.trigger("users:set_admin_status",Osp.Invitation.waitingAdminConfirmation)}}):new Osp.AlertDialog({title:I18n.t("ui.users.invitations.teachers.title"),message:I18n.t("ui.users.invitations.teachers.confirmation.message"),className:"confirmation-dialog",resizable:!1});Osp.vent.trigger("course:invitation:dialog:hide");a.render()},displayErrors:function(a,f,e){if(!_.isEmpty(a)){var c=a.base;if(!_.isUndefined(c)&&c.length){var h=$("<div class='control-group error'><ul class='help-block'></ul>").prependTo(this.$el);
_(c).each(function(a){h.find(".help-block").append("<li>"+a+"</li>")})}Osp.FormView.prototype.displayErrors.apply(this,arguments);if(1==a.email.length){c=$("input[name=email]").siblings(".help-block").find("li");var k=c.text().slice(6);c.text(k)}}}});a.Layout=Osp.DialogLayout.extend({getTemplate:function(){return this._admin_invitation?"course/users/invitations/layout_admin-template":"course/users/invitations/layout_teacher-template"},initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,
arguments);this._admin_invitation=a&&a.to_be_admin||!1;this._invitation=new Osp.Invitation({to_be_admin:this._admin_invitation},{course:Osp.currentCourse});this.listenTo(Osp.vent,"course:invitation:dialog:hide",this.hideModal.bind(this))},regions:{form:"#invitation-form"},events:_.extend({"click [data-action=invite]":"onClickSubmit"},Osp.DialogLayout.prototype.events),onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);this.showChildView("form",new a.FormView({model:this._invitation}))},
onClickSubmit:function(a){Osp.vent.trigger("invitation:form:submit",a)}});a.showAdminDialog=function(){(new a.Layout({className:"admin-invitation-dialog",resizable:!1,to_be_admin:!0})).render()};a.showTeacherDialog=function(){(new a.Layout({className:"teacher-invitation-dialog",to_be_admin:!1,resizable:!1})).render()};return a}();
Osp.CourseApp.Lens.Users.Management=function(a,c){var f=Backbone.Radio.channel("users:management"),e=c.View.extend({events:{"click button":"onClick"},onClick:function(a){a.preventDefault();this.isDisabled($(a.currentTarget).data("action"))||f.request("action:"+($(a.currentTarget).data("action")||"activate"))},disable:function(a){this.toggle(a,!1)},enable:function(a){this.toggle(a,!0)},toggle:function(a,c){this.$(this.getSelector(a)).prop("disabled",!c)},getSelector:function(a){return"button"+(a?"."+
a:"")},isDisabled:function(a){return this.$(this.getSelector(a)).prop("disabled")},onRender:function(){this.disable()}}),d=e.extend({template:"course/users/user_management/subgroup-template"}),h=e.extend({template:"course/users/user_management/group-code-template",onRender:function(){}}),k=c.View.extend({template:"course/users/user_management/global-group-template",events:{"click a":"onClick"},onClick:function(a){a.preventDefault();a.stopPropagation();f.request("action:global-groups:manage")}}),l=
e.extend({template:"course/users/user_management/actions-template"}),m=c.LegacyTreeView.extend({template:"course/users/user_management/tree-template",templateContext:function(){return a.extend({name:function(){var a=this.lookable_name;this.group_code&&(a+=" (<strong>"+this.group_code+"</strong>)");return a}},c.LegacyTreeView.prototype.templateContext.apply(this))}}),n=function(a){var c={CourseGlobalGroup:function(a){return"group-icon-global"},CourseGroup:function(a){return a.onFirstLevel()?"group-icon-group-code":
"group-icon-subgroup"}}[a.get("type")];return c&&c(a)||""},q=function(a){this.nodes=a.course().groups().cloneRecursive();this.lens=a};a.extend(q.prototype,Backbone.Events,{show:function(a){this.view=this.nodesView();this.actions=this.actionsView();a.showChildView("nodes",this.view);a.showChildView("actions",this.actions);this.bindEvents();this.setSelectedNode(this.view)},bindEvents:function(){this.view.listenTo(c.vent,"course:selection:node:select",this.onNodeSelected.bind(this));this.view.listenTo(c.vent,
"course:selection:node:deselect",this.onNodeDeselected.bind(this))},activate:function(){this.deactivate();this.current.set({active:!0})},deactivate:function(){var a=this.nodes.getRecursiveBy("active",!0);a&&a.set({active:!1})},onNodeSelected:function(c,d,e){this.current=a.isObject(e)?e:this.nodes.getRecursive(e);this.activate();this.change()},onNodeDeselected:function(){this.current=null;this.deactivate();this.change()},getNode:function(){return this.current},getNodes:function(){return this.nodes},
nodesView:function(){return new c.TreeRootView({childView:m,collection:this.nodes,lens:this.lens,observer:c.SelectionObserver,hide_unavailable:!0,icon:n})},actionsView:function(){return new l},setSelectedNode:function(a){c.state.getNode()&&this.select()},scrollToNode:function(a,c){c=this.view.$('[data-id="'+c.get("id")+'"]');a.animate({scrollTop:c.offset().top-a.offset().top})},addNodeToTree:function(a,c){c?c.children().add(a):this.nodes.add(a);c&&c.set({leaf:!1,expanded:!0,active:!1});a.set({active:!0});
this.select(a)},refreshParent:function(a){void 0!=a&&0==a.children().length&&a.set({leaf:!0})},select:function(a){c.vent.trigger("course:selection:node:select",this.lens.course().get("id"),this.lens.get("name"),a||c.state.getNode().id)},change:function(){this.trigger("node:change",this.getNode())}});var t=c.ParentDialogLayout.extend({template:"course/users/user_management/layout-template",events:a.extend({"click #nodes":"onClick","click [data-action=done]":"onClickDone"},c.ParentDialogLayout.prototype.events),
regions:{globalGroup:"#global-group",groupCode:"#group-code",subgroup:"#subgroup",nodes:"#nodes",actions:"#actions"},initialize:function(a){c.ParentDialogLayout.prototype.initialize.apply(this,arguments);this.nodesManager=a.nodesManager;this.listenTo(this.nodesManager,"node:change",this.onNodeChange.bind(this))},onClick:function(){c.vent.trigger("course:selection:node:deselect")},onClickDone:function(a){a.stopPropagation();a.preventDefault();this.hideModal()},onRender:function(){c.ParentDialogLayout.prototype.onRender.apply(this,
arguments);this.showSections();this.nodesManager.show(this)},isEditableType:function(a){return this._isCourseGroup(a)},isDeletableType:function(a){return this._isCourseGroup(a)},shouldEnableSubgroup:function(c){return!a.isNull(c)},shouldEnableEdit:function(a){return this.isEditableType(a)&&a.get("permissions").edit},shouldEnableDelete:function(a){return this.isDeletableType(a)&&a.get("permissions").remove},onNodeChange:function(a){this.getChildView("subgroup")[this.shouldEnableSubgroup(a)?"enable":
"disable"]();this.getChildView("actions")[this.shouldEnableEdit(a)?"enable":"disable"]("edit");this.getChildView("actions")[this.shouldEnableDelete(a)?"enable":"disable"]("delete")},showSections:function(){this.showChildView("globalGroup",new k);this.showChildView("groupCode",new h);this.showChildView("subgroup",new d)},scrollToNode:function(a){this.nodesManager.scrollToNode(this.getChildView("nodes").$el,a)},_isCourseGroup:function(c){return!a.isNull(c)&&a(["CourseGroup"]).contains(c.get("type"))}}),
y=function(){var d=function(a){this.nodesManager=new q(a);this.lens=a};a(d.prototype).extend({show:function(){this.layout=new t({className:"big users-management legacy",nodesManager:this.nodesManager,onHide:a.bind(this.onHide,this),unsaved:{message:I18n.t("ui.courses.users.management.unsaved.message"),submitText:I18n.t("ui.courses.users.management.unsaved.submit")}});this.layout.on("destroy",a.bind(function(){this.unbindActions()},this));this.layout.render();this.bindActions()},bindActions:function(){f.reply({"action:subgroup:create":this.onCreateSubgroup,
"action:codegroup:create":this.onCreateCodegroup,"action:edit":this.onEdit,"action:delete":this.onDelete,"action:global-groups:manage":this.onManageGlobalGroups},this)},unbindActions:function(){f.stopReplying(["action:subgroup:create","action:codegroup:create","action:edit","action:delete","action:global-groups:manage"],this)},createGroup:function(a){var d=c.CourseGroup.newWithGroupCodeIfTopLevel({parent_id:a?a.id:null,course_id:c.state.getState("course").id,leaf:!0,permissions:{add:!0,edit:!0,remove:!0}});
d.collection=a?a.children():this.nodesManager.getNodes();return d},onHide:function(){this.lens.course().groups().fetch({reset:!0})},onCreateSubgroup:function(){var c=this.nodesManager.getNode();f.request("subgroup:create",this.createGroup(c),c).done(a.bind(this._addNodeToTree,this))},onCreateCodegroup:function(){f.request("codegroup:create",this.createGroup()).done(a.bind(this._addNodeToTree,this))},onEdit:function(){var a=this.nodesManager.getNode();this._editRequest(a).done(function(c){a.set(c.attributes);
c=a.getUsers();c.reset();c.planFetch();f.trigger("group:changed",a)})},onDelete:function(){var d=this.nodesManager.getNode();(new c.AlertDialog({title:I18n.t("ui.courses.users.management.alerts.delete_group.title"),message:I18n.t("ui.courses.users.management.alerts.delete_group.body",{name:d.get("name")}),submitCallback:a.bind(this._deleteGroup,this,d),className:"confirm-dialog",showCancel:!0})).render()},onManageGlobalGroups:function(){f.request("global_groups:manage").then(a.bind(function(d){c.state.getState("course").groups().fetch().then(a.bind(function(){this._refreshCurrentGroup();
this.nodesManager.refresh()},this))},this))},_editRequest:function(a){var c=a.clone();c.collection=a.collection;return a.isAccesibleViaGroupCode()?f.request("codegroup:create",c):f.request("subgroup:create",c,a.collection.parent())},_addNodeToTree:function(a,c){this.nodesManager.addNodeToTree(a,c);this.layout.scrollToNode(a);f.trigger("group:added",a)},_deleteGroup:function(a){var d=c.state.getState("group"),e=a.parent(),h=a.id;a.destroy();this.nodesManager.refreshParent(e);f.trigger("group:deleted");
c.vent.trigger("course:selection:node:deselect");c.vent.trigger("course:selection:node:removed");d&&h===d.id&&this._refreshCurrentGroup()},_refreshCurrentGroup:function(){var a=c.state.getState("lens"),d=c.state.getState("course"),e=a.filters().first();c.state.setState("group",null);c.state.setState("filter",e);c.vent.trigger("course:"+a.get("type")+":filter:show",d.id,a.get("name"),e.get("name"),1)}});return d}();return{showDialog:function(a){(new y(a)).show()}}}(_,Osp);
Osp.CourseApp.Lens.Users.Management.Subgroup=function(a,c){function f(c){var d=new c.constructor,e=function(c){c=a.chain(c.split("")).map(function(a){return(new RegExp(/[a-z0-9 ]/i)).test(a)?a:"\\"+a}).value().join("");return new RegExp(c,"i")},f=function(a,c){var d=e(c);return a.filter(function(a){return d.test(a.get("first_name"))||d.test(a.get("last_name"))||!1})};d.refresh=function(){var a=d._query?f(c,d._query):c.models;d.reset(a)};d.search=function(a){a!==d._query&&(d._query=a||null,d.refresh())};
d.getQuery=function(){return d._query||null};c.on("reset add remove",d.refresh);d.refresh();return d}var e=Backbone.Radio.channel("users:management"),d=c.FormDialogLayout.extend({prependFieldNameOnError:!0,template:"course/users/user_management/subgroup/layout-template",regions:{form:"#form",parentStudents:"#parent-students",students:"#students",actions:"#actions"},templateContext:{title:function(){return I18n.t("ui.courses.users.management.subgroup.dialog.title."+(this.is_new?"create":"edit"))}},
events:a.extend({"click .save":"onSave","change input[name=name]":"onNameChange"},c.FormDialogLayout.prototype.events),initialize:function(a){c.FormDialogLayout.prototype.initialize.apply(this,arguments);this.parent=a.parent},serializeData:function(){return a.extend({parent_name:this.parent.get("name"),is_new:this.model.isNew()},c.FormDialogLayout.prototype.serializeData.apply(this,arguments))},onNameChange:function(){this.model.set({name:$.sanitize(this.$("input[name=name]").val())},{silent:!0});
this.dirty()},onSave:function(){this.trigger("save")},onClickCancel:function(){c.FormDialogLayout.prototype.onClickCancel.apply(this,arguments);this.trigger("cancel")},showErrors:function(a){c.FormView.prototype.displayErrors.call(this,a,null,this.model)},clearErrors:function(){c.FormView.prototype.clearErrors.call(this)},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(a){this.$(".save").prop("disabled",!a)}}),h=c.View.extend({template:"course/users/user_management/subgroup/students/student-template",
events:{"change input":"onCheck"},modelEvents:{change:"render"},onCheck:function(a){this.trigger("select",this.model,$(a.currentTarget).is(":checked"))}}),k=c.CollectionView.extend({childView:h,childViewTriggers:{select:"select:student"}}),l=c.View.extend({template:"course/users/user_management/subgroup/students/layout-template",events:{"keyup input[name=filter]":"onFilter","change input[name=select_all]":"onSelectAll"},regions:{records:".records"},childViewTriggers:{"select:student":"select:student"},
collectionEvents:{add:"updateSelectAll",remove:"updateSelectAll",reset:"updateSelectAll"},onRender:function(){var a=new k({collection:this.collection});this.showChildView("records",a)},areAllChecked:function(){return this.collection.length&&this.collection.areAll("checked")},onSelectAll:function(a){this.trigger("select:all",this.collection,$(a.currentTarget).is(":checked"))},onFilter:function(){this.trigger("filter",this.collection,this.$("input[name=filter]").val())},updateSelectAll:function(){this.$("input[name=select_all]").prop("checked",
this.areAllChecked())},serializeData:function(){return a.extend({checked:this.areAllChecked()},c.View.prototype.serializeData.apply(this,arguments))},updateCount:function(a){this.$(".count label").text(a)}}),m=c.View.extend({template:"course/users/user_management/subgroup/actions-template",events:{"click a":"onClick"},onClick:function(a){a.preventDefault();this.trigger(a.currentTarget.className,a.currentTarget)}}),n=function(a,c){var d=function(a){return a.get("last_name")+", "+a.get("first_name")};
return d(a)<d(c)?-1:1},q=function(){var c=function(a,c){this.group=a;this.parent=c};a(c.prototype).extend({show:function(){this.df=$.Deferred();this.layout=new d({className:"big users-management subgroup legacy",model:this.group,parent:this.parent});$("#spinner").show();this.preload().done(this.render.bind(this));return this.df.promise()},render:function(){this.layout.on("render",this.renderStudents,this).on("save",this.save,this).on("cancel",this.cancel,this).render();$("#spinner").hide()},renderStudents:function(){this.layout.showChildView("parentStudents",
this.initParentStudents());this.layout.showChildView("students",this.initStudents());this.layout.showChildView("actions",this.initActions());this.removeChildStudentsFromParent()},preload:function(){var a=function(a){return a.wasFetched()||a.group().isNew()?$.Deferred().resolve().promise():a.fetch({reset:!0})};this.parentStudents=this.cloneUsers(this.parent);this.students=this.cloneUsers(this.group);return $.when(a(this.parentStudents),a(this.students))},save:function(){var a;this.layout.clearErrors();
var c=this.group.set({user_ids:this.students.pluck("id")},{silent:!0});this.layout.disable();(a=c.save())?a.done(this.onDone.bind(this)).fail(this.onError.bind(this)).always(this.layout.enable.bind(this.layout)):this.layout.showErrors(c.validationError)},cancel:function(){this.df.reject()},onDone:function(){this.layout.hideModal();this.df.resolve(this.group,this.parent)},onError:function(a){this.layout.showErrors(JSON.parse(a.responseText))},cloneUsers:function(a){a=a.getUsers();var c=a.clone();a.wasFetched()&&
c.markAsFetched();return c},initStudentsLayout:function(a){var c=f(a);c.comparator=n;var d=new l({collection:c});d.on("select:student",function(a,c){a.set("checked",c);d.updateSelectAll()}).on("select:all",function(a,c){a.setForAll({checked:c})}).on("filter",function(a,c){a.search(c)}).on("render",function(){d.updateCount(a.length)});a.on("reset",this.removeChildStudentsFromParent,this).on("add remove reset",function(){d.updateCount(a.length)},this);return d},initParentStudents:function(){return this.parentStudentsView=
this.initStudentsLayout(this.parentStudents)},initStudents:function(){return this.studentsView=this.initStudentsLayout(this.students)},initActions:function(){this.actionsView=new m;this.actionsView.on("add",this.onAdd,this).on("remove",this.onRemove,this);return this.actionsView},removeChildStudentsFromParent:function(){this.students.length&&this.parentStudents.remove(this.students.models)},move:function(a,c,d){d=d||a.where({checked:!0});a.remove(d,{silent:!0});c.add(this.deselectStudents(d),{silent:!0});
a.trigger("reset");c.trigger("reset")},onAdd:function(){this.layout.dirty();this.move(this.parentStudents,this.students)},onRemove:function(){this.layout.dirty();this.move(this.students,this.parentStudents)},deselectStudents:function(c){a(c).invoke("set",{checked:!1});return c}});return c}();e.reply("subgroup:create",function(a,c){return(new q(a,c)).show()})}(_,Osp);
(function(a,c){var f=Backbone.Radio.channel("users:management"),e=c.FormDialogLayout.extend({prependFieldNameOnError:!0,rawErrorFor:["group_code"],template:"course/users/user_management/codegroup/layout-template",regions:{students:"#students"},templateContext:{title:function(){return I18n.t("ui.courses.users.management.codegroup.dialog.title."+(this.is_new?"create":"edit"))}},events:a.extend({"click .save":"onSave","change input[type=text]":"onChange"},c.FormDialogLayout.prototype.events),onChange:function(a){a=
$(a.currentTarget);this.dirty();this.model.set(a.attr("name"),$.sanitize(a.val()),{silent:!0})},onSave:function(a){this.trigger("save")},serializeData:function(){return a.extend({is_new:this.model.isNew()},c.FormDialogLayout.prototype.serializeData.apply(this,arguments))},onClickCancel:function(){c.FormDialogLayout.prototype.onClickCancel.apply(this,arguments);this.trigger("cancel")},showErrors:function(a){c.FormView.prototype.displayErrors.call(this,a,null,this.model)},clearErrors:function(){c.FormView.prototype.clearErrors.call(this)}}),
d=c.View.extend({template:"course/users/user_management/codegroup/students/student-template",events:{"change input":"onCheck"},modelEvents:{change:"render"},onCheck:function(a){this.trigger("select",this.model,$(a.currentTarget).is(":checked"))}}),h=c.CollectionView.extend({childView:d}),k=c.View.extend({template:"course/users/user_management/codegroup/students/empty-template"}),l=c.View.extend({template:"course/users/user_management/codegroup/students/layout-template",events:{"change input[name=select_all]":"onSelectAll"},
regions:{records:".records"},onRender:function(){var a=new h({collection:this.collection});this.showChildView("records",a);this.listenTo(a,"childview:select",this.onSelect.bind(this))},onSelect:function(a,c){this.trigger("select",a,c)},onSelectAll:function(a){this.trigger("select_all",$(a.currentTarget).is(":checked"))},updateSelectAll:function(){this.$("input[name=select_all]").prop("checked",this.collection.areAll("checked"))},serializeData:function(){return a.extend({checked:this.collection.areAll("checked")},
c.View.prototype.serializeData.apply(this,arguments))}});d={show:function(a){this.df=$.Deferred();this.group=a;this.layout=new e({className:"big users-management codegroup legacy",model:a});this.layout.on("render",this.renderStudents,this).on("save",this.save,this).on("cancel",this.cancel,this);this.layout.render();return this.df.promise()},renderStudents:function(){this.group.isNew()||this.fetchAndShowUsers()},fetchAndShowUsers:function(){var c=this.group.getUsers();c.markAsFetched();c.fetch().done(a.bind(this.showStudentsLayout,
this))},showStudentsLayout:function(){this.layout.showChildView("students",this.initStudents())},save:function(){var a;this.layout.clearErrors();var c=this.setUsersAndGetGroup();(a=c.save())?a.done(this.onDone.bind(this)).fail(this.onError.bind(this)):this.layout.showErrors(c.validationError)},setUsersAndGetGroup:function(){this.students&&this.group.set({user_ids:a(this.students.allThatAre("checked")).pluck("id")},{silent:!0});return this.group},cancel:function(){this.df.reject()},onDone:function(){this.layout.hideModal();
this.df.resolve(this.group)},onError:function(a){this.layout.showErrors(JSON.parse(a.responseText))},groupHasStudents:function(){return this.group.getUsers().length},cloneUsers:function(a){var c=a.users(),d=c.clone();c.on("reset",function(){d.reset(c.models)},this);return d},initStudentsLayout:function(a){return(new l({collection:a})).on("select",this.onStudentSelect,this).on("select_all",this.onSelectAllStudents,this)},initStudents:function(){if(!this.groupHasStudents())return new k;this.students=
this.cloneUsers(this.group);this.selectAllStudents();this.students.on("reset",this.selectAllStudents,this);return this.studentsView=this.initStudentsLayout(this.students)},selectAllStudents:function(){this.students.length&&this.students.setForAll({checked:!0})},onStudentSelect:function(a,c){a.set("checked",c);this.studentsView.updateSelectAll()},onSelectAllStudents:function(a){this.students.setForAll({checked:a})}};f.reply("codegroup:create",a.bind(d.show,d))})(_,Osp);
Osp.CourseApp.Lens.Users.Management.GlobalGroups=function(a,c){var f=Backbone.Radio.channel("users:management"),e=c.DialogLayout.extend({className:"legacy",template:"course/users/user_management/global_groups/layout-template",regions:{tree:"#create-node-tree"},events:a.extend({"click [data-action=save]":"onClickSave","click [data-action=cancel]":"onClickCancel"},c.DialogLayout.prototype.events),initialize:function(a){c.DialogLayout.prototype.initialize.apply(this,arguments);this.addedGroupIds=a.addedGroupIds},
groupsToRemove:function(){var c=this._checkedGroupIds();return a(this.addedGroupIds).filter(function(d){return!a(c).include(d)})},groupsToAdd:function(){var c=this._checkedGroupIds();return a(c).filter(function(c){return!a(this.addedGroupIds).include(c)},this)},enableButton:function(){this.$("[data-action=save]").prop("disabled",!1)},disableButton:function(){this.$("[data-action=save]").prop("disabled",!0)},onClickSave:function(a){a.stopPropagation();a.preventDefault();this.trigger("save")},_checkedGroupIds:function(){var c=
this._checkedGroups();return a(c).map(function(a){return 1*$(a).val()})},_checkedGroups:function(){return a(this.$("input[type=checkbox]")).filter(function(a){return!0===$(a).prop("checked")})}}),d=function(){var d=function(a){this.course=a.course;this.lens=a.lens;this.addedGroupIds=[]};a(d.prototype).extend({show:function(){var c=$.Deferred();this.layout=new e({addedGroupIds:this.addedGroupIds});this.layout.on("render",a.bind(function(){this._fetchGroups().then(a.bind(function(a){this._refreshAddedGroupIdsFromGroups(a);
this._showTree(a)},this))},this));this.layout.on("save",a.bind(function(){var d=this.layout.groupsToAdd(),e=this.layout.groupsToRemove();this.layout.disableButton();this._updateGlobalGroups(d,e).done(a.bind(function(){c.resolve({added:d,removed:e});a(d).isEmpty()||f.trigger("group:added",d);a(e).isEmpty()||f.trigger("group:deleted",e);this.layout.hideModal()},this)).always(a.bind(function(){this.layout.enableButton()},this))},this));this.layout.on("destroy",function(){c.reject()});this.layout.render();
return c.promise()},_showTree:function(a){this.layout.showChildView("tree",new c.TreeRootView({childView:c.TreeCheckboxView,collection:a,checked_ids:this.addedGroupIds,lens:this.lens,observer:c.GroupSelectionCheckedObserver,activeAttr:"activeCreateDialog",checkboxName:"group_ids[]"}))},_updateGlobalGroups:function(a,c){return $.post("/api/courses/"+this.course.id+"/groups/add_groups_to_course",{groups_to_add:a,groups_to_remove:c})},_refreshAddedGroupIdsFromGroups:function(c){c=a(c.mapRecursive(function(a){return a.relatedCourseGlobalGroup()?
a.id:null})).compact();this.addedGroupIds.splice.apply(this.addedGroupIds,[0,this.addedGroupIds.length].concat(c))},_fetchGroups:function(){return $.get("/api/courses/"+this.course.id+"/groups/available_groups").then(function(a){return new c.Groups(a)})}});return d}();f.reply("global_groups:manage",function(){return(new d({course:c.state.getCourse(),lens:c.state.getLens()})).show()})}(_,Osp);
Osp.CourseApp.Lens.TeacherReports=function(a){return{Controller:Mn.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region;this.section=a.section},getSection:function(){return this.section||_(this.lens.get("sections")).first()},show:function(){(new a.Course.TeacherReports({model:this.lens,section:this.getSection()})).show(this.region)}})}}(Osp.Components);
Osp.CourseApp.Lens.StudentReports=function(a){return{Controller:Mn.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region;this.section=a.section},getFirstSection:function(){return _(this.lens.get("sections")).first()},show:function(){(new a.Course.StudentReports({model:this.lens,section:this.section||this.getFirstSection()})).show(this.region)}})}}(Osp.Components);
Osp.CourseApp.Lens.NextSteps=function(a){return{Controller:Mn.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region;this.state=this.lens.course().state()},show:function(){var c=this.lens,f=this.state.get("next_step");(new a.Course.NextSteps({model:c,itemToLaunch:f})).show(this.region);this.state.unset("next_step")}})}}(Osp.Components);
(function(){var a=Osp.View.extend({className:"head",template:"notifications/head-template",collectionEvents:{reset:"render",sync:"render"},onRender:function(){0==this.collection.length?this.$el.addClass("empty"):this.$el.removeClass("empty")}}),c=Osp.FootView.extend({template:"notifications/foot-template"}),f=Osp.View.extend({behaviors:[Osp.Behaviors.FuzzyTime],className:"notification",template:"notifications/notification-template",ui:{assignment:".assignment-notification"},triggers:{"click .archive":"archive",
"click .accordion-toggle":{event:"toggle",stopPropagation:!1,preventDefault:!0},"click @ui.assignment":"assignment"},initialize:function(a){Osp.View.prototype.initialize.apply(this,arguments);this.$el.on("shown",this.onShown.bind(this));this.$el.on("hidden",this.onHidden.bind(this));this.$el.on("shown hidden show hide",function(a){a.stopPropagation()})},onShown:function(a){this.trigger("shown",this.$el);this.updateTabIndex()},onHidden:function(){this.updateTabIndex()},onRender:function(){this.updateRead();
this.updateTabIndex()},updateRead:function(){this.$el.toggleClass("read",this.model.get("read"))},updateTabIndex:function(){this.$(".accordion-inner a").each(function(a,c){$(c).attr("tabindex",$(c).closest(".accordion-body").hasClass("in")?"0":"-1")})}}),e=Osp.ListView.extend({template:"notifications/list-template",className:"notifications",headView:a,footView:c,childView:f}),d=Osp.NumberedPaginationView.extend({perPageOptions:[20,40]}),h=Osp.DialogLayout.extend({template:"notifications/layout-template",
className:"large notifications-layout",focusTrap:!0,triggers:{"click .nav-tabs a":"tab:show","click .nav-tabs a.archived-tab":"tab:show:archived"},regions:{notifications:"#notifications",notificationsPagination:"#notifications-pagination",archived:"#archived",archivedPagination:"#archived-pagination"}}),k=function(a,c){this.$link=a;this.notification=c;this.course=Osp.courses.get(a.data("course-id"))};_(k.prototype).extend({show:function(){this.course.pLenses().done(this.onLensesReady.bind(this))},
type:function(){return this.$link.data("link-type")},isLensActive:function(){return Osp.state.getLens().id==this.lens.id},showAssignment:function(){Backbone.Radio.channel("course:lens:"+this.type()).request("show",this.assignment,this.course)},goToLens:function(){Osp.state.setState("assignment",this.assignment);Osp.vent.trigger("course:lens:show",this.course.id,this.lens.get("name"))},onLensesReady:function(a){this.lens=a.firstWith({type:this.type()});this.assignment={id:this.notification.get("assignment_id"),
student_assignment_id:this.$link.data("student-assignment-id")};this.isLensActive()?this.showAssignment():this.goToLens()}});var l=function(){this.notifications=new Osp.Notifications;this.archived=(new Osp.Notifications).toggleArchived()};_(l.prototype).extend({show:function(){this.layout=(new h).on("render",this.onRender.bind(this)).on("tab:show",this.onTabShow.bind(this)).once("tab:show:archived",this.onFirstTimeArchivedTabShow.bind(this));this.layout.render()},onRender:function(){this.layout.listenTo(this.layout,
"resize",this.setHeight.bind(this));this.layout.listenTo(this.layout,"resize",this.setHeadListWidth.bind(this));_.delay(this.setHeight.bind(this),300);this.notifications.fetch().done(this.showNotifications.bind(this,"notifications",this.notifications))},setHeight:function(){var a=this.layout.$(".modal-body"),c=a.height()-a.find(".nav-tabs").height();a.find(".tab-content").innerHeight(c-2);this.setListHeight()},fetchArchived:function(){return this.archived.fetch().done(this.archived.markAsFetched.bind(this.archived))},
onTabShow:function(a,c){$(c.currentTarget).tab("show");this.setHeadListWidth();this.setListHeight()},onArchivedTabShow:function(){this.archived.wasFetched()||this.fetchArchived()},onFirstTimeArchivedTabShow:function(){this.fetchArchived().done(this.showNotifications.bind(this,"archived",this.archived));this.layout.on("tab:show:archived",this.onArchivedTabShow.bind(this))},showNotifications:function(a,c){var f=new e({collection:c});this.layout.listenTo(f,"childview:row:archive",this.archive.bind(this));
this.layout.listenTo(f,"childview:row:toggle",this.read.bind(this));this.layout.listenTo(f,"childview:row:assignment",this.showAssignment.bind(this));this.layout.listenTo(f,"childview:row:shown",this.onNotificationShown.bind(this));this.layout.listenTo(f,"rows:render",this.onNotificationsRender.bind(this,a));this.layout.showChildView(a,f);this.layout.showChildView(a+"Pagination",new d({collection:c}))},onNotificationArchived:function(){this.notifications.fetch().done(this.setHeadListWidth.bind(this));
this.archived.planFetch()},onNotificationShown:function(a){var c=a.closest(".body-wrapper"),d=c.innerHeight(),e=a.offset().top-c.offset().top;a=e+a.outerHeight();var f=0;a>d&&(f=a-d);0>e&&(f=e);f>d&&(f=e);f&&c.animate({scrollTop:c.scrollTop()+f},300)},onNotificationsRender:function(){_.delay(this.setListHeight.bind(this),50);_.delay(this.setHeadListWidth.bind(this),50)},setListHeight:function(){var a=this.layout.$(".tab-content"),c=this.layout.$(".tab-pane.active");c=a.height()-c.find(".pagination-wrapper").height()-
c.find(".head-wrapper").height();a.find(".body-wrapper").height(c)},setHeadListWidth:function(){var a=this.layout.$(".tab-pane.active");a.find(".head-wrapper .head").width(a.find(".body-wrapper div:first").width())},archive:function(a){a.model.save({read:!0,archived:!0}).done(this.onNotificationArchived.bind(this))},read:function(a){a.model.get("read")||(a.model.save({read:!0}).done(function(){Osp.notificationsCount.fetch()}),a.updateRead())},showAssignment:function(a){(new k(a.ui.assignment,a.model)).show();
this.layout.hideModal()}});Osp.vent.on("notifications:show",function(){(new l).show()})})();Osp.ProfileApp=function(a){var c={showProfile:function(){c.Profile.showProfile()}};a.app.on("before:start",function(c,e){a.profile=new a.Profile(e.profile)});return c}(Osp);
Osp.ProfileApp.Profile=function(){var a=Osp.FormView.extend({rawErrorFor:["email"],tagName:"div",template:"profile/form-template",initialize:function(){Osp.FormView.prototype.initialize.apply(this,arguments);this.listenTo(Osp.vent,"profile:form:submit",this.onClickSubmit.bind(this))},serializeData:function(){var a=Osp.FormView.prototype.serializeData.apply(this,arguments),c={courses:null==Osp.courses?"":Osp.courses.pluck("name").join(", ")};return _(c).extend(a)},onSaveSuccess:function(a,c,f){this.trigger("saved");
Osp.profile=this.model},displayErrors:function(a,c,f){_.isString(a)?this.displayTextError(a):Osp.FormView.prototype.displayErrors.apply(this,arguments)},displayTextError:function(a){$("<div>").addClass("alert alert-error").html(a).prependTo(this.$el);this.trigger("error:text")},clearErrors:function(){Osp.FormView.prototype.clearErrors.apply(this,arguments);$(".alert-error").remove()}}),c=Osp.DialogLayout.extend({template:"profile/layout-template",regions:{form:"#profile-form"},events:_.extend({"click input[type=submit]":"onClickSubmit",
mousedown:"onBringToFront","mousedown .resize-handler":"onResize"},Osp.DialogLayout.prototype.events),onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);var c=new a({model:Osp.profile.clone()});this.showChildView("form",c);this.listenTo(c,"saved",this.hideModal.bind(this));this.listenTo(c,"error:text",this.showTextError.bind(this))},showTextError:function(){this.$(".modal-body").scrollTop(0)},onClickSubmit:function(a){Osp.vent.trigger("profile:form:submit",a)},serializeData:function(){var a=
Osp.FormView.prototype.serializeData.apply(this,arguments),c={must_change_password:Osp.profile.get("must_change_password")};return _(c).extend(a)}}),f={init:function(){Osp.profile.get("must_change_password")&&this.userMustChangePassword()},routing:function(){return Backbone.Radio.channel("routing:public")},global:function(){return Backbone.Radio.channel("global:public")},userMustChangePassword:function(){this.redirect=$.Deferred();this.routing().request("redirect:set",this.redirect.promise());this.global().request("lenses:has_access_to",
"my_profile").done(_.bind(this.redirectToLens,this)).fail(_.bind(this.showModal,this))},redirectToLens:function(){this.redirect.resolve("modules/my_profile")},showModal:function(){this.redirect.reject();Osp.ProfileApp.showProfile()}};Osp.app.on("start",function(){f.init()});return{showProfile:function(){(new c({backdrop:Osp.profile.get("must_change_password")?"static":!0,className:"profile-dialog"})).render()}}}();
(function(){var a=Backbone.Radio.channel("global:public"),c=function(){Osp.vent.trigger("global:lens:show","my_profile")},f=function(){Osp.ProfileApp.showProfile()};Osp.vent.on("profile:show",function(){a.request("lenses:has_access_to","my_profile").done(c).fail(f)})})();
Osp.GlobalApp.Lens.MyProfile=function(){var a=Backbone.Radio.channel("my_profile:navigation"),c=Osp.View.extend({template:"global/my_profile/title-template",initialize:function(a){this.profile=a.profile},serializeData:function(){return{name:this.model.get("name").humanize(),profile_name:this.profile.get("display_name")}}});return{Controller:Mn.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region;this.title=a.title;this.profile=Osp.profile.clone()},show:function(){a.request("start",
this.profile.get("must_change_password"));$("body").addClass("body--composed body--shortFooter");this.showTitle();this.showComponent();this.changeHtmlTitle()},showTitle:function(){this.title.show(new c({model:this.lens,profile:this.profile}))},showComponent:function(){var a=(new (Osp.Components.MyProfile[this.profile.get("type").capitalize()])({model:this.profile})).show(this.region);this.listenTo(a,"destroy",function(){$("body").removeClass("body--composed body--shortFooter")})},changeHtmlTitle:function(){Backbone.Radio.channel("root").trigger("title:change",
"My profile")}})}}();
(function(){var a=Backbone.Radio.channel("my_profile:navigation"),c=Backbone.Radio.channel("my_profile:public"),f=Backbone.Radio.channel("routing:public"),e=Backbone.Radio.channel("header:public"),d={start:function(){this.route=null;f.request("stop");f.on("navigate",this.onNavigate,this)},finish:function(){f.off("navigate",this.onNavigate,this);f.request("restart");this.route?f.request("navigate",this.route):f.request("back")},onNavigate:function(c){this.route=c;a.request("cancel")}},h=_.extend({},
d,{start:function(){d.start.apply(this);e.request("logout:disable");e.on("logout:try",this.onLogoutTry,this)},finish:function(){d.finish.apply(this);e.request("logout:enable");e.off("logout:try",this.onLogoutTry,this)},onNavigate:function(){a.request("incomplete")},onLogoutTry:function(){a.request("incomplete",!0)}}),k=function(){this.complyWithCommands();_.bindAll(this,"exit")};_(k.prototype).extend({complyWithCommands:function(){a.reply({start:this.start,finish:this.finish,cancel:this.cancel,incomplete:this.incomplete},
this)},start:function(a){this.strategy=a?h:d;this.strategy.start()},finish:function(){this.strategy.finish()},exit:function(){c.request("exit")},logout:function(){e.request("logout:enable logout")},incomplete:function(a){this.showIncompleteDialog(a?{showSubmit:!0,submitText:I18n.t("ui.common.logout"),submitCallback:this.logout}:{})},cancel:function(){c.request("profile:has_changed")?this.showConfirmDialog():this.exit()},showConfirmDialog:function(){(new Osp.AlertDialog({title:I18n.t("ui.my_profile.errors.cancelChanges"),
message:I18n.t("ui.my_profile.errors.unsaved"),className:"confirm-dialog",showCancel:!0,submitCallback:this.exit,resizable:!1})).render()},showIncompleteDialog:function(a){(new Osp.AlertDialog(_.extend({title:I18n.t("ui.my_profile.errors.completeSetUp"),message:I18n.t("ui.my_profile.errors.incomplete"),className:"confirm-dialog",showCancel:!0,cancelText:I18n.t("ui.my_profile.errors.ok"),showSubmit:!1,resizable:!1},a))).render()}});Osp.app.on("before:start",function(){new k})})();
(function(){Backbone.Radio.channel("my_profile:subjects:private");var a=Backbone.Radio.channel("my_profile:public"),c=Osp.View.extend({tagName:"li",template:"global/my_profile/subjects/item-template",events:{"click input:checkbox":"onClickCheckbox"},modelEvents:{change:"render"},onClickCheckbox:function(){this.model.set("checked",this.$("input:checkbox").is(":checked"))},onRender:function(){this.$el.addClass(this.model.get("name"))}}),f=Osp.CollectionView.extend({tagName:"ul",className:"myprofile__subjectsList",
childView:c}),e=function(){this.replyToRequests()};_(e.prototype).extend({subjectsFactory:function(a){var c=new Osp.Subjects(gon.subjects);c.setChecked(a);return c},renderSubjects:function(a,c){c=this.subjectsFactory(c);this.observeSubjectsForChanges(c);a.show(new f({collection:c}));return c},observeSubjectsForChanges:function(a){var c=function(){a.chain().filter(function(a){return"no-subject"!==a.get("name")}).invoke("set",{checked:!1})};a.on("change:checked",function(d,e){"no-subject"===d.get("name")?
e&&c():e&&(d=a.firstWith({name:"no-subject"}),d.get("checked")&&d.set({checked:!1}))},this)},replyToRequests:function(){a.reply("render:subjects",this.renderSubjects,this)}});Osp.app.on("before:start",function(){new e})})();
(function(){var a=Backbone.Radio.channel("my_profile:update:private"),c=Backbone.Radio.channel("my_profile:public"),f=Osp.DialogLayout.extend({template:"global/my_profile/update/dialog-template",regions:{subjects:"#subjects-form"},events:_.extend({"click input[type=submit]":"onClickSubmit","click [data-action=remind]":"onClickRemind"},Osp.DialogLayout.prototype.events),templateContext:{title:function(){return gon.subjectsModalTitle||I18n.t("ui.my_profile.update_dialog.title")},instructions:function(){return gon.subjectsModalInstructions||
I18n.t("ui.my_profile.update_dialog.description")},help:function(){return gon.subjectsModalHelp||I18n.t("ui.my_profile.update_dialog.help")}},initialize:function(){Osp.DialogLayout.prototype.initialize.apply(this,arguments);a.reply({"dialog:close":this.hideModal,"subjects:show_error":this.showSubjectsError},this);a.on("clear_errors",this.clearErrors,this)},onClickSubmit:function(c){c.preventDefault();c=$(c.target);c.prop("disabled")||(c.prop("disabled",!0),a.request("save"))},onClickRemind:function(c){c.preventDefault();
c=$(c.target);c.hasClass("disabled")||(c.addClass("disabled"),a.request("remind"))},onRender:function(){Osp.DialogLayout.prototype.onRender.apply(this,arguments);a.request("render:subjects",this.getRegion("subjects"))},showSubjectsError:function(){this.$("input[type=submit]").prop("disabled",!1);$("<p/>").addClass("error").text(I18n.t("ui.my_profile.update_dialog.error")).insertAfter(this.$("p.description"))},clearErrors:function(){this.$("p.error").remove()}}),e=function(){this.profile=Osp.profile.clone();
this.complyWithCommands();_.bindAll(this,"copy","exit")};_(e.prototype).extend({save:function(){var c=this.subjects.getCheckedIds();a.trigger("clear_errors");if(_.isEmpty(c))return a.request("subjects:show_error");this.profile.set("subject_ids",c);this.profile.save().done(this.copy).done(this.exit)},remind:function(){a.trigger("clear_errors");$.post("/api/profiles/remind").done(this.exit)},copy:function(){Osp.profile=this.profile},exit:function(){a.request("dialog:close");a.reset();this.showMarketingDialogIfNeeded()},
renderSubjects:function(a){this.subjects=c.request("render:subjects",a)},complyWithCommands:function(){a.reply({save:this.save,remind:this.remind,"render:subjects":this.renderSubjects},this)},isTeacher:function(){return"teacher"===this.profile.get("type")},isMyProfileLanding:function(){return this.profile.get("must_change_password")||-1!=Backbone.history.getFragment().indexOf("my_profile")},mustShowSubjectsDialog:function(){return this.profile.get("force_profile_update")&&!this.isMyProfileLanding()},
mustShowMarketingDialog:function(){return this.isTeacher()&&!this.profile.getProperty("profile_marketing_discard")&&!this.isMyProfileLanding()},mustShowChangePasswordDialog:function(){return this.profile.isTeacher()&&!this.profile.getProperty("change_password_discard")&&!this.profile.get("must_change_password")},show:function(){if(!Osp.state.getState("embedded"))if(this.mustShowChangePasswordDialog())c.request("change_password:show").on("exit",this.showNextDialog.bind(this));else this.showNextDialog()},
showNextDialog:function(){this.mustShowSubjectsDialog()?this.showSubjectsDialog():this.showMarketingDialogIfNeeded()},showSubjectsDialog:function(){(new f({backdrop:"static",className:"update-profile-dialog my_profile",resizable:!1})).render()},showMarketingDialogIfNeeded:function(){this.mustShowMarketingDialog()&&c.request("marketing:show")}});Backbone.history.once("route",function(){(new e).show()})})();
(function(){var a=Backbone.Radio.channel("my_profile:public"),c=Osp.DialogLayout.extend({template:"global/my_profile/marketing/dialog-template",ui:{accept_marketing:"input[name=accept_marketing]",accept_tips:"input[name=accept_tips]"},triggers:{"click @ui.accept_marketing":{event:"change:accept_marketing",preventDefault:!1},"click @ui.accept_tips":{event:"change:accept_tips",preventDefault:!1},"click input[type=submit]":"save"},serializeData:function(){return _.extend({},Osp.DialogLayout.prototype.serializeData.call(this),
{accept_tips:this.model.getProperty("accept_tips")})}}),f=function(){this.profile=Osp.profile.clone()};_(f.prototype).extend({save:function(){this.profile.setProperty("profile_marketing_discard",!0);this.profile.save({form:"marketing"}).done(this.copy.bind(this));this.dialog.hideModal()},onChangeAcceptMarketing:function(a,c){this.profile.set({accept_marketing:$(c.currentTarget).is(":checked")})},onChangeAcceptTips:function(a,c){$(c.currentTarget).is(":checked")?this.profile.setProperty("accept_tips",
!0):this.profile.unsetProperty("accept_tips")},copy:function(){Osp.profile=this.profile},show:function(){this.dialog=(new c({backdrop:"static",className:"update-profile-dialog marketing-dialog my_profile",resizable:!1,model:this.profile})).on("save",this.save,this).on("change:accept_marketing",this.onChangeAcceptMarketing,this).on("change:accept_tips",this.onChangeAcceptTips,this).render()}});Osp.app.on("before:start",function(){a.reply("marketing:show",function(){(new f).show()})})})();
(function(){var a=Backbone.Radio.channel("my_profile:public"),c=Osp.FormView.extend({template:"global/my_profile/change_password/form-template"}),f=Osp.DialogLayout.extend({template:"global/my_profile/change_password/dialog-template",triggers:{"click input[type=submit]":"save","click [data-action=remind]":"remind"},regions:{form:"form"}}),e=Mn.Object.extend({initialize:function(){this.model=new Osp.ProfileChangePassword},save:function(){this.form.clearErrors();this.model.save().done(this.exit.bind(this)).fail(this.onSaveFail.bind(this))},
onRender:function(){this.form=new c({model:this.model});this.dialog.showChildView("form",this.form)},exit:function(){this.dialog.hideModal();this.trigger("exit")},onSaveFail:function(a){this.form.displayErrors(JSON.parse(a.responseText),null,this.model)},show:function(){this.dialog=(new f({backdrop:"static",className:"update-profile-dialog change-password-dialog my_profile",resizable:!1,model:this.model})).on("save",this.save,this).on("remind",this.exit,this).on("render",this.onRender,this);this.dialog.render();
return this}});Osp.app.on("before:start",function(){a.reply("change_password:show",function(){return(new e).show()})})})();
Osp.GlobalApp.Lens.Prototypes=function(){var a=Osp.Components.Prototypes,c={levelUpSecure:function(){return(new a.SmartResultsPanel({type:"secure"})).show().toggle()},levelUpExtend:function(){return(new a.SmartResultsPanel({type:"extend"})).show().toggle()},levelUpReflect:function(){return(new a.SmartResultsPanel({type:"reflect"})).show().toggle()}},f=Osp.View.extend({template:"global/prototypes/title-template"}),e=Osp.View.extend({template:"global/prototypes/layout-template",triggers:{"click [data-action]":"open"}});
return{Controller:Mn.Object.extend({initialize:function(a){this.region=a.region;this.title=a.title},showTitle:function(){this.title.show(new f)},notImplemented:function(){(new Osp.AlertDialog({title:"Not implemented",message:"This component prototype has not been implemented."})).render()},open:function(a,e){a=$(e.currentTarget).data("action");(a=c[a])?a():this.notImplemented()},show:function(){this.showTitle();var a=new e;this.listenTo(a,"open",this.open.bind(this));this.region.show(a)}})}}();
Osp.GlobalApp.Lens.Notifications=function(){var a=Osp.View.extend({template:"global/notifications/title-template"});return{Controller:Mn.Object.extend({initialize:function(a){this.lens=a.lens;this.region=a.region;this.title=a.title},show:function(){this.showTitle();this.showComponent();this.changeHtmlTitle()},showTitle:function(){this.title.show(new a)},showComponent:function(){(new Osp.Components.Notifications).show(this.region)},changeHtmlTitle:function(){Backbone.Radio.channel("root").trigger("title:change",
"Notifications")}})}}();
Osp.InteractivePlayer=function(a){var c={},f=[988,679];c.view=Osp.DialogLayout.extend({initialize:function(a){Osp.DialogLayout.prototype.initialize.apply(this,arguments);this._remote=a&&a.remote||null;_.bindAll(this,"onWindowResize","startup");$(window).on("resize",this.onWindowResize)},onDomRefresh:function(){Osp.DialogLayout.prototype.onDomRefresh.apply(this,arguments);this.$el.removeClass("fade");this.$("iframe").attr("src",this._remote);this.checkIframeLoad()},checkIframeLoad:function(){this.showLoader();this.$("iframe").on("load",
this.startup)},startup:function(){this.$("iframe").contents().find("body").css({overflow:"hidden"});this.removeLoader();this.$el.hide();this.resize().$el.fadeIn();Backbone.Radio.channel("analytics").request("track:videos",this)},removeModal:function(){!this._removed&&(this._removed=!0)&&Osp.DialogLayout.prototype.removeModal.call(this)},getWrapper:function(){return $(".modal-backdrop").last()},getWidth:function(){return f[0]},getHeight:function(){return f[1]},getLeft:function(){return parseInt(_.max([0,
($(this._context).width()-this.getWidth())/2]))},getTop:function(){return parseInt(_.max([0,($(this._context).height()-this.getHeight())/2]))},removeLoader:function(){this.getWrapper().find(".loader").remove()},showLoader:function(){!this.getWrapper().find(".loader").length&&this.getWrapper().append("<div class='loader'></div>")},onWindowResize:function(){this.resize()},onDestroy:function(){$(window).off("resize",this.onWindowResize)},resize:function(){this.$el.find("iframe").addBack().css({height:this.getHeight(),
width:this.getWidth()});return this.reposition()},reposition:function(){var a=this.getTop()+this.$el.height()/2,c=this.getLeft()+this.$el.width()/2;this.$el.css({top:a+"px",left:c+"px",margin:0});return this}});var e=a.Object.extend({initialize:function(a){this.view=a;_.bindAll(this,"finish","receive")},showSubmittedMessage:function(){(new Osp.AlertDialog({title:I18n.t("ui.assignments.submitted.title"),message:gon.submittedAssignmentMessage||I18n.t("ui.assignments.submitted.description")})).render()},
isSubmittedMessage:function(a){return"response"===a.type&&a.data&&a.data.submitted},start:function(){window.addEventListener("message",this.receive);this.view.on("destroy",this.finish)},finish:function(){window.removeEventListener("message",this.receive)},receive:function(a){this.isSubmittedMessage(a.data)&&(this.showSubmittedMessage(),this.view.model.trigger("submitted"))}});c.showPlayer=function(a,f,k){var d=function(){f=f||"";var c=a.get("student_assignment_id")||"";return a.get("interactive_link")+
"?student_assignment_id="+c+"&bookmark="+f};c.player=new c.view({template:"common/dialogs/interactive-template",model:a,external:k,resizable:!1,className:"interactive-dialog",position:{top:"-100%"},onHide:function(){var a=Osp.state.getStudentAssignment();_.isNull(a)||_.isUndefined(a)||a.fetch()},remote:d});k=990>=$(window).width()?!1:!a.get("new_window")||"no"==a.get("new_window");k?((new e(c.player)).start(),c.player.render()):window.open(d())};return c}(Marionette);
(function(a,c){function f(d){if(d.origin===a.origin||d.origin===this.mainWindow.origin)try{var e=d.data.split(":");if("ping"==e[0])c("iframe.interactive")[0].contentWindow.postMessage("authorAPIPing:"+e[1],a.origin);else{var f=authorAPI[e[0]](e[1],e[2]);"get"==e[0]&&c("iframe.interactive")[0].contentWindow.postMessage("authorAPIGet:"+e[1]+":"+f,a.origin)}}catch(w){}}var e={bind:function(a,c){this._callbacks=this._callbacks||{};a.split(" ").forEach(function(a){this._callbacks[a]=this._callbacks[a]||
[];this._callbacks[a].push(c)},this);return this},trigger:function(){var a=Array.prototype.slice.call(arguments);var c=a.shift();(c=this._callbacks&&this._callbacks[c])&&c.forEach(function(c){c.apply(this,a)},this)},unbind:function(a,c){if(0===arguments.length)return this._callbacks={},this;if(!a)return this;for(var d in a.split(" ")){var e=this._callbacks&&this._callbacks[d];e&&(c?e.forEach(function(a,e){if(a===c){var f=f.slice();f.splice(e,1);this._callbacks[d]=f}},this):delete this._callbacks[d])}return this}},
d=function(){var a=function(a){this.url=a;this.dfd=null};a.prototype={check:function(){if(this.dfd)return this.dfd.promise();this.dfd=c.Deferred();c.get(this.url).then(function(){this.dfd.resolve(!0);this.dfd=null}.bind(this)).fail(function(a){this.dfd.resolve(!(401===a.status||403===a.status));this.dfd=null}.bind(this));return this.dfd.promise()}};return a}(),h=function(){var a=function(a,c,d){this.next=this.current=null;this.authToken=a;this.apiUrl=c;this.observer=d};a.prototype={enqueue:function(a){this.next=
this._buildAjaxFunctionFromData(a);this.current||this._processNext()},hasPending:function(){return!!this.current},_buildAjaxFunctionFromData:function(a){return c.proxy(function(){c.ajax(this.apiUrl,{type:"PUT",data:{authenticity_token:this.authToken,data:JSON.stringify(a),_method:"PUT"}}).done(c.proxy(this._processNext,this)).done(c.proxy(this._notifyObserver,this)).fail(c.proxy(this._onFail,this))},this)},_retry:function(){this.next?this._processNext():this.current()},_processNext:function(){this.current=
this.next;this.next=null;this.current&&this.current()},_notifyObserver:function(a){this.observer.update({type:"response",data:a})},_onFail:function(a){this.observer.update({type:"error",response:a.responseText});setTimeout(c.proxy(this._retry,this),2E3)}};return a}(),k=function(){var d=function(a){this.authToken=a.authToken;this.apiUrl=a.apiUrl;this.observer=new l(this,a.mainWindow);this.queues={}};d.prototype={process:function(a,c){(this.queues[a]||(this.queues[a]=new h(this.authToken,this.apiUrl,
this.observer))).enqueue(c);this.busy()},hasPending:function(){for(var a in this.queues)if(this.queues.hasOwnProperty(a)&&this.queues[a].hasPending())return!0;return!1},update:function(){this.hasPending()||this.idle()},busy:function(){c(a).off("beforeunload").on("beforeunload",function(){return"There are pending requests. If you close the window, you may lose data."})},idle:function(){c(a).off("beforeunload")}};return d}(),l=function(){var a=function(a,c){this.main=c;this.observer=a};a.prototype=
{update:function(a){this.main&&this.main.postMessage(a,"*");this.observer&&this.observer.update(a)}};return a}(),m=function(){var a=function(a){this.api=a;this.currentViewMode=null;a.ready().then(function(a){a.getBook().addEventListener("open_page",this.trigger.bind(this,"open_page"))}.bind(this))};_(a.prototype).extend(e,{setCurrentViewMode:function(a){this.currentViewMode=a},getCurrentViewMode:function(){return this.currentViewMode}});return a}(),n=function(a){var c=this;a.ready().then(function(a){return a.getBook().addEventListener("open_external_hotspot",
function(a){return c.open(a)})})};n.prototype.open=function(c){c=this.url(c);this.isMobile()?a.open(c):this.openInIframe(c)};n.prototype.close=function(){this.backdrop&&this.backdrop.remove();this.iframe&&this.iframe.remove();this.backdrop=this.iframe=null};n.prototype.isMobile=function(){return 988>=c(a).width()};n.prototype.openInIframe=function(a){var d=this,e=c("iframe#interaction").contents().find("body");this.backdrop=this.$backdrop().appendTo(e).click(function(){return d.close()});var f=this.iframe=
this.$iframe(a);f.css("visibility","hidden").appendTo(e).on("load",function(){return f.css("visibility","visible")})};n.prototype.url=function(a){return"/interactives/"+a};n.prototype.$iframe=function(a){return c("<iframe></iframe>").attr("src",a).css(this.iframeStyle()).attr({frameborder:0,scrolling:"no",allowfullscreen:!0})};n.prototype.iframeStyle=function(){return{top:"50%",left:"50%",zIndex:1050,width:"988px",height:"679px",position:"fixed",marginLeft:"-494px",marginTop:"-339.5px"}};n.prototype.$backdrop=
function(){return c("<div></div>").css(this.backdropStyle())};n.prototype.backdropStyle=function(){return{top:0,left:0,right:0,bottom:0,zIndex:1040,opacity:.7,position:"fixed",backgroundColor:"#000"}};var q=function(){var a=function(a){this.api=a};_(a.prototype).extend({set:function(a){this.data=a;this.api.initialized().then(function(a){a=a.getBook();a.register&&a.register("has-resources",this.hasResources.bind(this))}.bind(this))},hasResources:function(a){for(var c in this.data){var d=this.data[c];
if(a.page>=d.start&&a.page<=d.end)return!0}return!1}});return a}(),t=function(){var e=function(a){this.values={};this.tainted=!1;this.dfdEngineInitialized=c.Deferred();this.dfdEngineReady=c.Deferred();this.mainWindow=a;this.ajaxManager=new k({mainWindow:a});this.sessionStatus=new d("/api/profile.json");this.resourcePanelManager=new m(this);this.taggingManager=new q(this);this.hotspotManager=new n(this)};e.prototype={initializeValues:function(a){this.values=a},setEngine:function(a){var c=this;this.engine=
a;a.addEventListener("lo:submit",function(){return c.onLOSubmit()});a.addEventListener("interaction:start",function(){return c.onInteractionStart()},this,{once:!0});this.dfdEngineInitialized.resolve(a);a.ready().then(function(){this.dfdEngineReady.resolve(a)}.bind(this))},initialized:function(){return this.dfdEngineInitialized.promise()},ready:function(){return this.dfdEngineReady.promise()},setScreenIdGetterForDigitalBooks:function(){try{var a=JSON.parse(this.values.data).interaction&&"interaction"||
"interaction_0";this.getScreenIdFor=function(){return a}}catch(x){}},setTagging:function(a){this.taggingManager.set(a)},isResourcesPanelEnabled:function(){return!!this.values.show_resources_panel},resourcePanelMode:function(a){this.ready().then(function(c){c.getBook().resourcePanelMode(a)})},resourcesUrl:function(c){c=c||{};this.sessionStatus.check().then(function(c){c||(a.top.location.href="/users/login?user_return_to="+a.top.location.href)});return this._resourcesUrl||(this._resourcesUrl=function(){var d=
c.page-c.offset+1,e,f,h,k=this.resourcePanelManager.getCurrentViewMode();(e=/courses\/(\d+)/.exec(a.location.href))&&(f=e[1]);(e=/(\d+).html/.exec(a.location.href))&&(h=e[1]);d="/app/courses/"+f+"/digital_books/"+h+"/page/"+d;k&&(d=d+"/mode/"+k);return d}.call(this))},set:function(a,c){"object"==typeof console&&"function"==typeof console.log&&console.log("set key:"+a+" value:"+c);if(this.values[a]!=c){var d={};this.values[a]=d[a]=c;"undefined"!=typeof this.values.api_url&&(this.ajaxManager.authToken=
this.values.authenticity_token,this.ajaxManager.apiUrl=this.values.api_url,this.ajaxManager.process(a,d))}},get:function(a){"object"==typeof console&&"function"==typeof console.log&&console.log("get key:"+a+" value:"+this.values[a]);return this.values[a]},closeModal:function(a){var d=a.find(".interactive-dialog");d.length||(d=a.find("iframe.hotspot.modal-content").parent());d.fadeOut(function(){c(this).remove()})},closeHotspot:function(){this.hotspotManager.close()},finish:function(d){d=c(a.parent.document);
if(this.ajaxManager.hasPending())return setTimeout(this.finish.bind(this),500),!1;if(top==a)a.close();else if(_.isUndefined(top.Osp))this.closeModal(d),d.find(".modal-backdrop").remove();else try{top.Osp.InteractivePlayer.player.hideModal(),top.Osp.InteractivePlayer.player.removeModal()}catch(x){top.Backbone.Radio.channel("learning_object").request("finish")}this.mainWindow&&this.mainWindow.postMessage({type:"lo:finish"},a.origin)},notifyAnswers:function(){var c=this;try{this.engine.getLO().getUserAnswers().then(function(d){return c.mainWindow.postMessage({type:"lo:answers",
data:d},a.origin)})}catch(x){}},onLOSubmit:function(){if(this.mainWindow){var c=this.values.score,d=this.values.api_url;this.notifyAnswers();this.mainWindow.postMessage({type:"lo:submit",data:{score:c,useAPI:!!d}},a.origin)}},onInteractionStart:function(){this.mainWindow&&this.mainWindow.postMessage({type:"interaction:start"},a.origin)}};return e}();a.authorAPI=new t(top);"undefined"!=typeof a.attachEvent&&a.attachEvent("onmessage",f);"undefined"!=typeof a.addEventListener&&a.addEventListener("message",
f,!1)})(window,jQuery);(function(a,c){a.hideEbookFrame=function(){c("#lti-iframe-container").hide();c("#body").show();c("#header").show();c("#lti-iframe").attr("src","about:blank");a.history.pushState({},"",document.location.pathname)}})(window,jQuery);
Osp.Header=function(){var a=Backbone.Radio.channel("header:public"),c=Osp.View.extend({onClickLink:function(a){a.preventDefault();a=$(a.target).attr("href").replace(/^\/app\/(.*)$/,"$1");Osp.Routing.showRoute(a)}}),f=Osp.View.extend({template:"header/profile-template",className:"dropdown dropdown--one",templateContext:{nameInitials:function(){return _(this.display_name.split(" ")).map(function(a){return a.charAt(0).toUpperCase()}).join("")},showActivateProductButton:function(){return(new Osp.TokenAccessService).isTokenAccessUser()}},
modelEvents:{change:"render"},ui:{toggler:".dropdown__toggle",profile:'a[data-action="profile"]',logout:'a[data-action="signout"]',finish:'a[data-action="finish"]',activateProduct:"a[data-action=activateProduct]"},events:{"click @ui.toggler":"onToggle","mouseover @ui.toggler":"onToggleOver","mouseleave @ui.toggler":"onToggleLeave","click @ui.profile":"onClickProfile","click @ui.logout":"onClickLogout","click @ui.finish":"onClickFinish","click @ui.activateProduct":"onActivateProduct"},onToggle:function(a){a.preventDefault();
this.$el.toggleClass("dropdown--enabled")},closeDelay:0,onToggleOver:function(){clearTimeout(this.closeDelay);this.$el.addClass("dropdown--enabled")},onToggleLeave:function(){this.closeDelay=setTimeout(function(){this.$el.removeClass("dropdown--enabled")}.bind(this),600)},closeSelectedDropdownItem:function(){this.$el.hasClass("dropdown--one")&&(this.$el.removeClass("dropdown--enable").addClass("dropdown--oneSelected"),setTimeout(function(){this.$el.removeClass("dropdown--oneSelected")}.bind(this),
300))},onClickLogout:function(c){c.preventDefault();this.closeSelectedDropdownItem();a.request("logout",c.target)},onClickFinish:function(a){this.closeSelectedDropdownItem()},onClickProfile:function(a){this.closeSelectedDropdownItem();Osp.vent.trigger("profile:show")},onActivateProduct:function(a){a.preventDefault();this.closeSelectedDropdownItem();this.trigger("activateProduct")}}),e=Osp.View.extend({tagName:"span",template:"header/notifications-template",ui:{button:"a"},modelEvents:{change:"render"},
events:{"click @ui.button":"onClickButton"},onClickButton:function(a){a.preventDefault();Osp.vent.trigger("global:lens:show","notifications")}}),d=c.extend({template:"header/layout-template",regions:{profile:"#nav-profile",notifications:"#nav-notifications",activateProductPanel:".activateProductPanel__container"},events:{"click .brand a":"onClickLink","click #nav-help a":"onClickHelp"},onClickHelp:function(a){a.preventDefault();a=_.isUndefined(Osp.currentCourse)||_.isNull(Osp.currentCourse)?"course_home":
Osp.currentCourse.defaults.currentState.lens;window.open("/app/help/"+a,"help")},onClickNotifications:function(a){a.preventDefault();Osp.vent.trigger("notifications:show")}}),h=function(){var c=function(a){a=a||{};this.region=a.region;this.allowLogout=!0;this._complyWithCommands()};_(c.prototype).extend({show:function(){this.layout=new d;this.layout.on("render",_.bind(function(){this._showProfile();this._showNotifications()},this));this.region.show(this.layout)},_showProfile:function(){this.profile=
new f({model:Osp.profile});this.layout.showChildView("profile",this.profile);this.profile.on("activateProduct",this._showActivateProductPanel.bind(this))},_showActivateProductPanel:function(){var a=new Osp.Components.ActivateProduct({className:"sidepanel activateProductPanel"});a.show(this.layout.getRegion("activateProductPanel"));_.delay(a.toggle.bind(a),50)},_showNotifications:function(){this.layout.showChildView("notifications",new e({model:Osp.notificationsCount}))},_getLogoutLink:function(){return this.profile.getUI("logout")},
_logout:function(c){a.trigger("logout:try");this.allowLogout&&this._handleMethod($(c||this._getLogoutLink()).data("method","delete"))},_handleMethod:function(a){var c=a.attr("href"),d=a.data("method");a=a.attr("target");var e=$("meta[name=csrf-token]").attr("content"),f=$("meta[name=csrf-param]").attr("content");c=$('<form method="post" action="'+c+'"></form>');d='<input name="_method" value="'+d+'" type="hidden" />';void 0!==f&&void 0!==e&&(d+='<input name="'+f+'" value="'+e+'" type="hidden" />');
a&&c.attr("target",a);c.hide().append(d).appendTo("body");c.submit()},_enableLogout:function(){this.allowLogout=!0},_disableLogout:function(){this.allowLogout=!1},_complyWithCommands:function(){a.reply({logout:this._logout,"logout:enable":this._enableLogout,"logout:disable":this._disableLogout},this)}});return c}();Osp.app.on("start",function(a,c){(new h({region:Osp.root.getRegion("header")})).show()});return{}}();
Osp.GlobalApp.Routing=function(){var a={};a.Router=Osp.AppRouter.extend({appRoutes:{"":"showFirstLens",no_access:"showNoAccess",modules:"showFirstLens","modules/:lensName":"showLens","modules/:lensName/filter/:filterName":"showLensAndFilter","modules/:lensName/filter/:filterName/page/:pageId":"showLensAndFilter"}});Osp.vent.on("global:lens:show",function(a){null!=a?Osp.Routing.showRoute("modules/"+a):Osp.Routing.showRoute("modules")});Osp.vent.on("global:users:filter:show",function(a,f,e,d){null==
e?Osp.GlobalApp.Lens.Users.showFirstFilter(f):Osp.GlobalApp.Lens.Users.showFilter(f,e,d)});Osp.vent.on("global:users:node:show",function(a,f,e,d){Osp.GlobalApp.Lens.Users.showGroup(f,e,d)});Osp.vent.on("global:users:search:show",function(a,f){Osp.GlobalApp.Lens.Users.showSearch(a,f)});Osp.vent.on("global:users:delete",function(a){Osp.GlobalApp.Lens.Users.Delete.showDialog(a)});Osp.vent.on("global:users:edit",function(a){(new Osp.GlobalApp.Lens.Users.Manage.Controller).showDialog(a)});Osp.vent.on("global:users:new:teacher",
function(){(new Osp.GlobalApp.Lens.Users.Manage.Teacher.Controller).showDialog()});Osp.vent.on("global:users:new:student",function(){Osp.GlobalApp.Lens.Users.Manage.Student.showDialog()});Osp.vent.on("global:users:csvtemplate",function(){Osp.GlobalApp.Lens.Users.CSV.downloadCvsTemplate()});Osp.vent.on("global:users:csvimport",function(){Osp.GlobalApp.Lens.Users.CSV.importFile()});Osp.vent.on("global:users:csvexport",function(){Osp.GlobalApp.Lens.Users.CSV.exportUsers(Osp.institution,Osp.state.getGroup(),
Osp.state.getFilter())});Osp.vent.on("global:users:archive",function(a){Osp.GlobalApp.Lens.Users.Archive.archiveUsers(Osp.institution.id,a)});Osp.vent.on("global:users:unarchive",function(a){Osp.GlobalApp.Lens.Users.Archive.unarchiveUsers(Osp.institution.id,a)});Osp.vent.on("global:users:reset_passwords",function(a){Osp.GlobalApp.Lens.Users.ResetPasswords.showDialog(Osp.institution.id,a)});Osp.app.on("before:start",function(){a.router=new a.Router({controller:Osp.GlobalApp})});return a}();
Osp.CourseApp.Routing=function(){var a={};a.Router=Osp.AppRouter.extend({appRoutes:{"courses/:courseId":"showFirstLens","courses/:courseId/modules":"showFirstLens","courses/:courseId/modules/:lensName":"showLens","courses/:courseId/modules/:lensName/page/:pageId":"showLens","courses/:courseId/modules/:lensName/search/:search":"showLensAndSearch","courses/:courseId/modules/:lensName/filter/:filterName/search/:search":"showLensSearchWithFilter","courses/:courseId/modules/:lensName/node/:nodeId":"showLensAndNode",
"courses/:courseId/modules/:lensName/node/:nodeId/page/:pageId":"showLensAndNode","courses/:courseId/modules/:lensName/filter/:filterName":"showLensAndFilter","courses/:courseId/modules/:lensName/content/:contentId":"showLensAndContent","courses/:courseId/modules/:lensName/s/:sectionId":"showLensSection","courses/:courseId/modules/:lensName/filter/:filterName/page/:pageId/content/:contentId":"redirectToNewUIRoute","courses/:courseId/modules/:lensName/node/:nodeId/page/:pageId/content/:contentId":"redirectToNewUIRoute",
"courses/:courseId/modules/:lensName/page/:pageId/content/:contentId":"redirectToContent"}});Osp.vent.on("courses:dropdown:show",function(){Osp.CourseApp.showDropdown()});Osp.vent.on("course:show",function(a){Osp.Routing.showRoute("courses/"+a)});Osp.vent.on("course:lens:show",function(a,f,e){a=_.sprintf("courses/%s/modules",a);f&&(a=_.sprintf("%s/%s",a,f));e&&e.search&&(a=_.sprintf("%s/search/%s",a,_(e.search||{}).map(function(a,c){return[c,encodeURIComponent(a)].join(":")}).join("+")));Osp.Routing.showRoute(a)});
Osp.vent.on("course:lens:filter:show",function(a,f,e){a=_.sprintf("courses/%s/modules/%s/filter/%s",a,f,e);Osp.Routing.showRoute(a)});Osp.vent.on("course:lens:filter:search:show",function(a,f,e,d){var c="courses/:courseId/modules/:lensName/filter/:filterName/search/:search";void 0!=a&&(c=c.replace(":courseId",a));f&&(c=c.replace(":lensName",f));e&&(c=c=c.replace(":filterName",e));d&&d.search&&(c=c=c.replace(":search",_(d.search||{}).map(function(a,c){return[c,encodeURIComponent(a)].join(":")}).join("+")));
Osp.Routing.showRoute(c)});Osp.vent.on("course:dialog:create",function(a){Osp.CourseApp.Dialog.Create.showDialog(a)});Osp.vent.on("course:dialog:copy",function(a,f,e){Osp.CourseApp.Dialog.Copy.showDialog(a,f,e)});Osp.vent.on("course:dialog:move",function(a,f,e){Osp.CourseApp.Dialog.Move.showDialog(a,f,e)});Osp.vent.on("course:dialog:delete",function(a,f,e){Osp.CourseApp.Dialog.Delete.showDialog(a,f,e)});Osp.vent.on("course:dialog:print",function(a,f,e){Osp.CourseApp.Dialog.Print.showDialog(f,e)});
Osp.vent.on("course:dialog:create:add_global_groups",function(){Osp.CourseApp.Dialog.Create.showAddGlobalToCourseDialog()});Osp.vent.on("course:dialog:export_users",function(){Osp.CourseApp.Dialog.ExportUsers.showDialog()});Osp.vent.on("course:share_content:error",function(){Osp.CourseApp.Dialog.ShareContentError.showDialog()});Osp.vent.on("course:dialog:assessment_assistance",function(){Osp.CourseApp.Dialog.AssessmentAssistance.showDialog()});Osp.vent.on("course:dialog:assignment_pool_assistance",
function(a,f,e){Osp.CourseApp.Dialog.AssignmentPoolAssistance.showDialog()});Osp.vent.on("course:dialog:add_to_pool_assistance",function(){Osp.CourseApp.Dialog.AddToPoolAssistance.showDialog()});Osp.app.on("before:start",function(){a.router=new a.Router({controller:Osp.CourseApp})});return a}();Osp.CourseApp.Share={};
(function(a){var c=a.Object.extend({initialize:function(){this.strategy=this.withStudentAccess=this.contentIds=this.lens=this.course=this.selection=null},attach:function(){Osp.vent.on("course:share",this.onShare.bind(this))},getEncodedLensName:function(){return encodeURIComponent(this.lens.get("name"))},getUrl:function(){return gon.rootUrl+"app/courses/"+this.course.id+"/modules/"+this.getEncodedLensName()+"/content/"+this.getContentIds()},showSharePanel:function(){var a={shareType:this.getShareType(),
shareStrategy:this.strategy,resourcesNamesList:this.nonAccessibleContents().map(function(a){return a.toJSON().name}),withStudentAccess:this.withStudentAccess,onShareConfirmation:this.onShareConfirmation.bind(this)};(new Osp.Components.Course.SharePanel(a)).showPanel(this.layout)},onShareConfirmation:function(a){Backbone.Radio.channel("analytics").request("track:shareContentClick");(new Osp.CourseApp.Share[this.strategy]).share(this.getUrl());this.makeVisibleAndShare(a)},onShare:function(a,c,d){this.selection=
c.allThatAre("checked");this.withStudentAccess=this.allWithStudentAccess();this.contentIds=this.getContentIds();this.course=d.course();this.lens=d;this.collection=c;this.strategy=a;this.showSharePanel()},allWithStudentAccess:function(){var a=this.selection;_.isEmpty(this.selection)&&(a=this.collection.models);return _(a).every(function(a){return a.get("student_access")})},nonAccessibleContents:function(){return _(this.selection).filter(function(a){return!a.get("student_access")})},getContentIds:function(){return _(this.selection).map(function(a){return a.get("id")})},
refresh:function(){this.collection.fetch()},getShareType:function(){if(1===this.selection.length)return"single";if(1<this.selection.length)return"multiple";if(0===this.selection.length)return"list"},makeVisibleAndShare:function(a){a&&$.post("/api/courses/"+Osp.state.getCourse().id+"/contents/set_student_access",{content_ids:this.getContentIds()}).done(this.refresh.bind(this))}});Osp.app.on("before:start",function(){(new c).attach()})})(Marionette);
Osp.CourseApp.Share.CopyLinkToClipboard=function(a){return a.Object.extend({isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1<navigator.appVersion.indexOf("Trident/")},copyToClipboardForIE:function(a){window.clipboardData.setData("Text",a)},copyToClipboard:function(a){try{this.isIE()?this.copyToClipboardForIE(a):navigator.clipboard.writeText(a)}catch(f){console.error("Unabled to paste url to clipboard",f)}},share:function(a){this.copyToClipboard(a)}})}(Marionette);
Osp.CourseApp.Share.GoogleClassroom=function(a){return a.Object.extend({share:function(a){open("https://classroom.google.com/u/0/share?url="+a,"Google Classroom","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no")}})}(Marionette);
Osp.CourseApp.Share.MSTeams=function(a,c){return a.Object.extend({getButton:function(){var a=c.template('<span class="teams-share-button button--hidden" data-href="{{ url }}"></span>');return $(a({url:this.url})).appendTo("body")},share:function(a){this.url=a;a=this.getButton();shareToMicrosoftTeams.renderButtons();a.find("a").click();a.remove()}})}(Marionette,_);
(function(a,c,f){c.SharePanel=c.SharePanel||{};var e=a.Model.extend({defaults:{makeVisibleForAllStudents:!1}});a=a.View.extend({initialize:function(a){this.withStudentAccess=a.options.withStudentAccess;this.shareStrategy=a.options.shareStrategy;this.shareType=a.options.shareType;this.resourcesNamesList=a.options.resourcesNamesList},prependFieldNameOnError:!1,className:"sidepanel__WIP",tagName:"div",template:"course/resources/share-panel-template",templateContext:function(){return{message:this.getMessage(),
successMessage:this.getSuccessMessage(),shareButtonLabel:this.getShareButtonLabel(),resourcesNamesList:this.getResourcesNamesList(),withStudentAccess:this.withStudentAccess}},triggers:{'click button[data-action="share"]':"share",'click button[data-action="cancel"]':"cancel",'click input[type="checkbox"]':{event:"toggle",preventDefault:!1}},getMessage:function(){return I18n.t("ui.share.common.panel."+this.shareType+"."+(this.withStudentAccess?this.shareStrategy+".with_student_access.message":"message"))},
getShareButtonLabel:function(){return I18n.t("ui.share.common.panel."+this.shareType+("."+this.shareStrategy+".share"))},getSuccessMessage:function(){return I18n.t("ui.share.common.panel."+this.shareType+"."+(this.shareStrategy+".with_student_access.success"))},getResourcesNamesList:function(){return!this.resourcesNamesList||1>=this.resourcesNamesList.length&&"single"===this.shareType?[]:this.resourcesNamesList},toogleShareLinkPanelMessage:function(){this.$el.find(".message--popup").addClass("message--visible")}});
c.Course.SharePanel=c.Component.extend({view:a,initialize:function(a){c.Component.prototype.initialize.apply(this,a);this.model=new e},viewOptions:function(){return _.extend({options:this.options},c.Component.prototype.viewOptions.call(this))},onCreate:function(a){this.listenTo(a,"toggle",this.onToogleMakeVisibleForAllStudents.bind(this));this.listenTo(a,"cancel",this.onCancel.bind(this));this.listenTo(a,"share",this.onShare.bind(this))},onToogleMakeVisibleForAllStudents:function(){this.model.set("makeVisibleForAllStudents",
!this.model.get("makeVisibleForAllStudents"))},onShare:function(){var a=this.model.get("makeVisibleForAllStudents");this.options.onShareConfirmation(a);this.getView().toogleShareLinkPanelMessage();this.getPanel().delayClose()},onCancel:function(){this.toggle()},getPanel:function(){this.panel||(this.panel=new c.SidePanel({title:I18n.t("ui.share.common.panel."+this.options.shareType+".title"),component:this}));return this.panel},toggle:function(){this.getPanel().toggle()},showPanel:function(a){this.getPanel().show(a);
this.toggle()}})})(Osp,Osp.Components,Marionette);
(function(a,c,f){var e=c.Radio.channel("routing:public"),d=a.app;d.on("start",function(){c.history&&(c.history.on("route",function(){e.request("store",c.history.getFragment())}),c.history.start({pushState:!0,root:"/app/"}),"app"===c.history.fragment&&a.Routing.showRoute(""))});f(function(){var c=a.store.get(a.Store.TYPE.COURSES),e=a.store.get(a.Store.TYPE.SETTINGS);a.courses=c.get();f.when(c.fetch(),e.fetch()).done(function(){d.start(window.gon=e.toJSON())});(new a.BookSubscriptionChecker).validateDownloadedDigitalBooks()})})(Osp,
Backbone,$);
(function(a,c,f){var e=function(){};e.prototype.log=function(a,c){if(this.enabled)return a={log:Object.assign({log_type:a},c)},fetch("/api/v2/logs",{method:"POST",headers:this.headers,body:JSON.stringify(a)})};$jscomp.global.Object.defineProperties(e.prototype,{enabled:{configurable:!0,enumerable:!0,get:function(){return f.isUndefined(this._enabled)?this._enabled=this.settings.get("logging_enabled")||!1:this._enabled}},settings:{configurable:!0,enumerable:!0,get:function(){return a.store.get(a.Store.TYPE.SETTINGS).get()}},token:{configurable:!0,
enumerable:!0,get:function(){return c('meta[name="csrf-token"]').attr("content")}},headers:{configurable:!0,enumerable:!0,get:function(){return{"Content-Type":"application/json","X-CSRF-Token":this.token}}}});a.Logger=e;a.logger=new e})(Osp,$,_);
(function(a){var c=function(){this._time=0};c.prototype.start=function(){this._start=this.now;return this};c.prototype.stop=function(){if(!this._start||this._time)return this;this._time=Math.ceil(this.elapsed/1E3);return this};$jscomp.global.Object.defineProperties(c.prototype,{time:{configurable:!0,enumerable:!0,get:function(){return this._time}},elapsed:{configurable:!0,enumerable:!0,get:function(){return this._start?this.now-this._start:0}},now:{configurable:!0,enumerable:!0,get:function(){return performance.now()}}});
a.Profiler=c})(Osp);
!function(a,c,f,e){var d=function(a,c){this.init(a,c)};d.prototype={constructor:d,init:function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.heightFix.defaults,d)},cell:function(){var a=this.$element,c=a.parents(".item").find(".reference").innerHeight(),d=a.height();c-=d;0<c&&a.css({"padding-top":Math.round(c/2)+c%2,"padding-bottom":Math.round(c/2)})},previewFooterMargin:function(){var c=this.$element,d=c.outerHeight(),e=c.find(".preview-body").outerHeight();c=c.find(".preview-footer").outerHeight();d=
d-e-c;0<d&&a(".preview-footer").css({"margin-top":d})},header:function(){if(a("#contents .header-fix").width()!==a("#contents .body .item").width()){var c=a("#contents .body").width()-15;a("#contents .header-fix").css("width",c+"px")}},fix:function(){var d=this.$element,e=d.outerHeight()-d.height(),f=d.offset().top;e=a(c).height()-e-f-this.options.margin;d.css({"overflow-y":"auto",height:e});d.width()>=d[0].scrollWidth&&d.siblings(".head").width(d[0].scrollWidth)}};a.fn.heightFix=function(c){var e=
Array.prototype.slice.call(arguments,1);return this.each(function(){var f=a(this),h=f.data("heightFix"),k="object"==typeof c&&c;h||f.data("heightFix",h=new d(this,k));"string"==typeof c&&h[c].apply(h,e)})};a.fn.heightFix.Constructor=d;a.fn.heightFix.defaults={margin:0}}(jQuery,window,document);
(function(){window.JST=window.JST||{};window.JST["common/alert_dialog"]=_.template('<div class="modal-header">\n  <h3>{{ title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body" id="group-assignments">\n  <div class="row-fluid" role="alert" aria-atomic="true" aria-live="assertive">\n    <p>{[ message ]}</p>\n  </div>\n</div>\n\n<div class="modal-footer">\n  {% if (showCancel) { %}\n  <button role="button" class="button {{ showSubmit ? \'button--secondary\' : \'button--primary\' }}" data-action="cancel">{{ cancelText }}</button>\n  {% } %}\n  {% if (showSubmit) { %}\n  <button role="button" class="button button--primary" data-action="submit">{{ submitText }}</button>\n  {% } %}\n</div>\n');window.JST["common/buttons/button"]=
_.template('<button class="btn" id="{{ cssId }}">\n  {% if(hasIcon) { %}<i class="icon-white icon-{{ iconType }}"></i> {% } %}\n  {{ I18n.t(label) }}\n</button>\n');window.JST["common/buttons/dropdown-button"]=_.template('<button class="btn" data-target="#" data-toggle="dropdown" id="{{ cssId }}">\n  {% if(hasIcon) { %}<i class="icon-white icon-{{ iconType }}"></i> {% } %}\n  {{ I18n.t(label) }}\n</button>\n');window.JST["common/buttons/dropdown-option"]=_.template('  <a id="{{ cssId }}" href="#">\n    {{ I18n.t(label) }}\n  </a>\n');
window.JST["common/buttons/layout"]=_.template('<div class="btn-group"></div>\n');window.JST["common/components/activate-product"]=_.template('<div class="sidepanel__body">\n\n  <label class="form__headingLabel">{{ I18n.t(\'ui.homepage.activate_product.instructions\') }}</label>\n  <input name="code" class="form__input form__input--fullWidth uppercase" type="text" aria-label="Group code">\n    \n  <div class="flex flex--alignCenter flex--spaceBetween mb--4x">\n    <a href="{{ getHelpLink() }}" target="_blank">Need help?</a>\n    <button role="button" data-action="continue" disabled="true" class="button button--primary">\n      {{ I18n.t(\'ui.homepage.activate_product.continue_button_label\') }}\n    </button>\n  </div>\n\n  <div class="helpCard helpCard--light helpCard--success hidden">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      <div class="helpCard__state helpCard__status--on">\n        <p>{{ I18n.t(\'ui.homepage.activate_product.success\') }}</p>\n      </div>\n    </div>\n  </div>\n\n  <div class="helpCard helpCard--light helpCard--error hidden">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-warning-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      <p>{{ I18n.t(\'ui.homepage.activate_product.error\') }}</p>\n    </div>\n  </div>\n</div>\n');
window.JST["common/components/activate_product/confirm/body"]=_.template('<p><strong>{{ token }}</strong></p>\n<p>{{ I18n.t(\'ui.homepage.activate_product.code_content\') }}</p>\n\n<ol class="cardGrid mb--4x">\n  {% _(products).each(function(product) { %}\n  <li class="card card--heightAuto">\n    <div class="card__cover">\n      <img src="{{ product.thumbnail_url }}" alt="{{ product.name }}">\n    </div>\n    <div class="card__info">\n      <h3>{{ product.name }}</h3>\n      <p class="card__highlighted">{{ I18n.t(\'ui.homepage.activate_product.access\', { time: time(product.subscription.extend) }) }}</p>\n    </div>\n    {% if (product.subscription.current) { %}\n    <div class="card__footNote">\n      <p>{[ I18n.t(\'ui.homepage.activate_product.already_with_access\', { current_time: time(product.subscription.current), extend_time: time(product.subscription.extend) }) ]}</p>\n    </div>\n    {% } %}\n  </li>\n  {% }) %}\n</ol>\n\n<div class="helpCard helpCard--light helpCard--success hidden">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    <div class="helpCard__state helpCard__status--on">\n      <p>{{ I18n.t(\'ui.homepage.activate_product.success\') }}</p>\n    </div>\n  </div>\n</div>\n\n<div class="helpCard helpCard--light helpCard--error hidden">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    <p>{{ I18n.t(\'ui.homepage.activate_product.error\') }}</p>\n  </div>\n</div>\n\n<a href="{{ getHelpLink() }}" target="_blank">{{ I18n.t(\'ui.common.need_help\') }}</a>\n');
window.JST["common/components/activate_product/confirm/footer"]=_.template('<div class="sidepanel__footerActions">  \n  <button role="button" class="button button--secondary" data-action="cancel">Cancel</button>\n  <button role="button" class="button button--primary" data-action="activate">Add book</button>\n</div>');window.JST["common/components/activate_product/main/body"]=_.template('<label class="form__headingLabel">{{ I18n.t(\'ui.homepage.activate_product.instructions\') }}</label>\n<input name="code" class="form__input form__input--fullWidth uppercase" type="text" aria-label="Group code">\n  \n<div class="flex flex--alignCenter flex--spaceBetween mb--4x">\n  <a href="{{ getHelpLink() }}" target="_blank">Need help?</a>\n  <button role="button" data-action="continue" disabled="true" class="button button--primary">\n    {{ I18n.t(\'ui.homepage.activate_product.continue_button_label\') }}\n  </button>\n</div>\n\n<div class="helpCard helpCard--light helpCard--error hidden">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    <p>{{ I18n.t(\'ui.homepage.activate_product.error\') }}</p>\n  </div>\n</div>\n');
window.JST["common/components/assignment_pool/buttons"]=_.template('<a href="#" class="btn-link cancel">{{ I18n.t(\'ui.common.cancel\') }}</a>\n<a href="#" class="btn btn-primary assign {{ isEnabled() ? \'\' : \'disabled\' }}" title="{{ title() }}">\n  {{ I18n.t(\'ui.actions.assign\') }}\n  <span class="sr-only" role="alert" aria-disabled="true" aria-atomic="true" aria-live="assertive">{{ sr() }}</span>\n</a>');window.JST["common/components/assignment_pool/common"]=_.template('<form class="form-horizontal">\n\t<div class="row-fluid">\n    <div class="span3">\n      <span class="help">{{ I18n.t(\'ui.assignments.assignment_pool.set_dates\') }}:</span>\n    </div>\n    <div class="span2">\n      <div class="date default">\n        <label for="assignment_pool_start">{{ I18n.t(\'ui.assignments.assignment_pool.start\') }}</label>\n        <div class="input-append">\n          <input type="text" role="datepick" data-date="start" id="assignment_pool_start" value="{{ start_date }}" placeholder="dd/mm/yyyy" name="start_date" autocomplete="off"><span class="add-on"><i class="fas fa-calendar-alt"></i></span>\n        </div>\n      </div>\n    </div>\n    <div class="span2">\n      <div class="date default">\n        <label for="assignment_pool_end">{{ I18n.t(\'ui.assignments.assignment_pool.end\') }}</label>\n        <div class="input-append">\n          <input type="text" role="datepick" data-date="end" id="assignment_pool_end" value="{{ end_date }}" placeholder="dd/mm/yyyy" name="end_date" autocomplete="off"><span class="add-on"><i class="fas fa-calendar-alt"></i></span>\n        </div>\n      </div>\n    </div>\n    <div class="span5">\n      <a href="#" class="remove pull-right">{{ I18n.t(\'ui.assignments.assignment_pool.remove_all\') }}</a>\n    </div>\n\t</div>\n</form>');
window.JST["common/components/assignment_pool/draft_assignment"]=_.template('<form class="form-horizontal draft-assignment {{ expanded ? \'expanded\' : \'\' }}">\n  <div class="row-fluid">\n    <a class="toggler" href="#">\n      <span class="sr-only">{{ expanded ? \'condense\' : \'expand\' }} assignment</span>\n      <span><i class="fas {{ expanded ? \'fa-angle-down\' : \'fa-angle-down-to-right\' }}"></i></span>\n    </a>\n    <div class="body">\n      <div class="row-fluid">\n        <div class="span1">\n          <a class="remove" href="#" title="{{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.remove\') }}">\n            <span class="sr-only">{{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.remove\') }}</span>\n            <i class="fas fa-trash-alt"></i>\n          </a>\n          <i class="icon icon-{{ test_format }}"></i>\n        </div>\n        <div class="span7">\n          <h3>{{ test_name }}</h3>\n          <p>{{ test_description }}</p>\n        </div>\n        <div class="span4">\n          <div class="date">\n            <label for="draft_assignment_start_date_{{ id }}">{{ I18n.t(\'ui.assignments.assignment_pool.start\') }}</label>\n            <div class="input-append">\n              <input type="text" role="datepick" data-date="start" id="draft_assignment_start_date_{{ id }}" value="{{ start_date }}" placeholder="dd/mm/yyyy" name="start_date" autocomplete="off"><span class="add-on"><i class="fas fa-calendar-alt"></i></span>\n            </div>                \n          </div>\n          <div class="date">\n            <label for="draft_assignment_end_date_{{ id }}">{{ I18n.t(\'ui.assignments.assignment_pool.end\') }}</label>            \n            <div class="input-append">\n              <input type="text" role="datepick" data-date="end" id="draft_assignment_end_date_{{ id }}" value="{{ end_date }}" placeholder="dd/mm/yyyy" name="end_date" autocomplete="off"><span class="add-on"><i class="fas fa-calendar-alt"></i></span>\n            </div>            \n          </div>\n        </div>\n      </div>\n      <div class="secondary">\n        <div class="row-fluid title">\n          <div class="span1"></div>\n          <div class="span2">\n            <label>{{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.title\') }}</label>\n          </div>\n          <div class="span9">\n            <input type="text" class="input-block-level" value="{{ title }}" name="title" maxlength="{{gon.limits.assignment.name}}">\n          </div>\n        </div>\n        <div class="row-fluid instructions">\n          <div class="span1"></div>\n          <div class="span2">\n            <label>{{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.instructions\') }}</label>\n          </div>\n          <div class="span9">\n            <textarea class="input-block-level" name="instructions" maxlength="{{gon.limits.assignment.description}}">{{ instructions }}</textarea>\n          </div>\n        </div> \n        <div class="row-fluid materials">\n          <div class="span1">&nbsp;</div>\n          <div class="span11">\n            <div class="row-fluid">\n              <div class="span6 resources">\n                <a href="#" class="add">+ {{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.add_resources\') }}</a>\n                <div class="items"></div>\n              </div>\n              <div class="span6 support">\n                <a href="#" class="add">+ {{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.add_support\') }}</a>\n                <div class="items"></div>\n              </div>\n            </div>   \n          </div>\n        </div>           \n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["common/components/assignment_pool/draft_assignment_content"]=_.template('<div class="row-fluid content">\n  <div class="span1">\n    <a class="remove" href="#"><i class="fas fa-trash-alt"></i><span class="sr-only">{{ I18n.t(\'ui.assignments.assignment_pool.draft_assignment.remove_material\') }}</span></a>\n  </div>\n  <div class="span11">\n    {{ name }}\n  </div>        \n</div>');window.JST["common/components/assignment_pool/item-button"]=_.template("<a href=\"#\" class=\"btn {{ !isAdded() ? 'btn-primary' : 'added' }} {{ isEnabled() ? '' : 'disabled' }}\" title=\"{{ title() }}\">{{ text() }}</a>\n");
window.JST["common/components/assignment_pool/layout"]=_.template('<div class="assignment_pool main height-fix">\n  <div id="common"></div>\n  <div class="row-fluid">\n    <div id="student-groups" class="span3"></div>\n    <div id="assignments" class="span9"></div>\n  </div>\n  <div class="footer pull-right" id="buttons"></div>\n</div>');window.JST["common/components/assignment_pool/main-button"]=_.template('<span class="assignment-pool-wrapper">\n  <a href="#" class="btn pull-left assignment_pool {{ isEnabled() ? \'\' : \'disabled\' }}" title="{{ title() }}">\n    {{ I18n.t(\'ui.assignments.assignment_pool.title\') }}{% if(isEnabled()) { %}\n    <span class="count">{{ count }}</span>{% } %}\n    <div class="sr-only" role="alert" aria-atomic="true" aria-live="assertive">{{ title() }}</div>\n  </a>\n</span>\n<a href="#" class="info-icon">\n  <span class="hide-text">{{ I18n.t(\'ui.assignments.assignment_pool.itag\') }}</span>\n</a>');
window.JST["common/components/assignment_pool/title"]=_.template('<div class="title assignment_pool">\n  <h1>\n    {{ I18n.t(\'ui.assignments.assignment_pool.title\') }}\n    <a href="#" class="info-icon">\n      <span class="hide-text">{{ I18n.t(\'ui.assignments.assignment_pool.itag\') }}</span>\n    </a>    \n  </h1>\n</div>');window.JST["common/components/breadcrumbs/layout"]=_.template('{% breadcrumbs.forEach((node, index) => { %}\n\n  {% if (index != 0) { %}\n  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><text data-name="\u276f" transform="translate(6 17)" style="fill:#575757;font-size:16px;font-family:ZapfDingbatsITC,\'.Apple Symbols Fallback\'"><tspan x="0" y="0">\u276f</tspan></text><path data-name="Rectangle 3053" style="fill:none" d="M0 0h20v20H0z"/></svg>\n  {% } %}\n\n  {% if (index == breadcrumbs.length - 1) { %}\n  <p class="breadcrumbs__current-location">{{ node.name }}</p>\n  {% } else { %}\n  <a href="#" data-tooltip="{{ node.name }}" data-action="view:node" data-index="{{ index }}">\n    <span>{{ node.name }}</span>\n  </a>\n  {% } %}\n  \n{% }) %}\n');
window.JST["common/components/calendar/layout"]=_.template('<button role="button" class="button calendar__pickerButton calendar__pickerButton--previous" aria-label="Previous months">\n  <svg viewBox="0 0 1 1" class="icon">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n\n<div class="sidepanel__wrapper">\n  <div class="calendar__picker"></div>\n</div>\n\n<button role="button" class="button calendar__pickerButton calendar__pickerButton--next hidden" aria-label="Next months">\n  <svg viewBox="0 0 1 1" class="icon">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n');
window.JST["common/components/calendar_panel/annex"]=_.template('<div class="sidepanel__wrapper">\n  {% if (isEmpty()) { %}\n  <div class="helpCard">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      Tap a date below to set your start date then again to set your end date.\n    </div>\n  </div>\n  {% } else { %}\n  <div class="calendar__date">\n    <div>\n      Start date\n      <strong>{{ start }}</strong>\n    </div>\n    <div>\n      End date\n      <strong>{{ end }}</strong>\n    </div>\n  </div>\n  {% } %}\n\n  <ol class="calendar__calendarWeekdays">\n    <li>Mo</li>\n    <li>Tu</li>\n    <li>We</li>\n    <li>Th</li>\n    <li>Fr</li>\n    <li>Sa</li>\n    <li>Su</li>\n  </ol>\n</div>');
window.JST["common/components/course_updates/layout"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{ I18n.t(\'ui.course_updates.title\') }}</h4>\n  <button type="button" class="button button--icon button--close">\n    <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n    <span class="a11y-hide">{{ I18n.t(\'ui.common.close\') }}</span>\n  </button>\n</div>\n<div class="section__body"></div>');
window.JST["common/components/course_updates/update"]=_.template('<p>{[ message() ]}</p>\n<ul class="updatesList__options">\n  {% if(showMore()) { %}\n  <li>\n    <a role="button" class="button--more" {[ moreLinkAttrs() ]}>{{ I18n.t(\'ui.course_updates.more\') }}</a>\n  </li>\n  {% } %}\n  <li>\n    <a role="button" class="button--dismiss" data-action="dismiss" href="#">{{ I18n.t(\'ui.course_updates.dismiss\') }}</a>\n  </li>\n</ul>');window.JST["common/components/dates_filter/button"]=_.template('<svg viewBox="0 0 1 1">\n  <use xlink:href="#svg__streamline-calendar"></use>\n</svg>  \n<span class="dates hidden visible--l">{{ start }} - {{ end }}</span>');
window.JST["common/components/digital_books/dropdown"]=_.template('<ul role="menu" class="dropdown__menu custom-transform">\n  <li role="menuitem">\n    <button class="dropdown__item dropdown__delete-button">\n      Remove download\n    </button>\n    {% if (offlineStatus === \'update\') { %}\n        <button class="dropdown__item dropdown__update-button">\n            Update download\n        </button>\n    {% } %}\n  </li>\n</ul>\n');window.JST["common/components/digital_books/layout"]=_.template('<div class="carousel">\n  <div class="carousel__content"></div>\n  <div class="carousel__controls">\n    <button type="button" class="button button--circular button--ghostHover carousel__pagination carousel__pagination--previous" disabled="disabled">\n      <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n      <span class="a11y-hide">Previous</span>\n    </button>\n\n    <div class="carousel__center">\n      <div class="carousel__dots"></div>\n      <a href="#" role="button" class="button carousel__expand">\n        <span class="button__state button__state--idle">See all</span>\n        <span class="button__state button__state--enabled">See less</span>\n      </a>\n    </div>\n\n    <button type="button" class="button button--circular button--ghostHover carousel__pagination carousel__pagination--next">\n      <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n      <span class="a11y-hide">Next</span>\n    </button>\n  </div>\n</div>\n');
window.JST["common/components/digital_books/pages"]=_.template('{% _.times(pages, function(n) { %}\n  <button role="button" class="button carousel__dot {{ current === n + 1 ? \'carousel__dot--current\' : \'\' }}" data-page="{{n + 1}}" aria-label="{{n}}"></button>\n{% }) %}\n');window.JST["common/components/digital_books/student_book"]=_.template('<div class="card__cover">\n  <img src="{{ image_src }}" alt="{{ name }}" title="{{ name }}" >\n</div>\n\n<div class="card__info">\n  <div>\n    <h3>{{ name }}</h3>\n  </div>\n</div>\n\n{% if (shouldRenderOfflinePart()) { %}\n<div class="card__download" style="{{ hideOrShowIcon(offlineStatus, \'\') }}"  data-tooltip="Download" data-tooltip-placement="top-start" data-tooltip-forceShow="true">\n  <svg class="icon">\n    <use xlink:href="#svg__downloader"></use>\n  </svg>\n</div>\n\n<div class="card__download-overlay">\n  <div class="card__prompt-wrapper">\n    <div class="card__download-overlay-icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Download book?</p>\n      <p>This book will only be available on Kerboodle when you\'re offline.</p>\n\n      <div class="card__prompt-buttons-wrapper">\n        <button class="download">Download</button>\n        <button class="download-cancel">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="card__download-overlay-in-progress">\n  <div class="card__download-in-progress-wrapper">\n    <div class="card__download-spinner"></div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Book downloading</p>\n      <p>Do not close Kerboodle while download is in progress.</p>\n    </div>\n  </div>\n</div>\n\n<div class="dropdown card__dropdown" style="{{ hideOrShowIcon(offlineStatus, [\'downloaded\', \'update\']) }}">\n  <button class="card__download_remover dropdown__toggle" aria-haspopup="listbox" aria-expanded="false" aria-label="User downloaded book management widget">\n    <svg class="icon card__manage-download-without-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'downloaded\') }}">\n      <use xlink:href="#svg__downloader_remover"></use>\n    </svg>\n    <svg class="icon card__manage-download-with-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'update\') }}">\n      <use xlink:href="#svg__downloader_update"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="card__remove-overlay">\n  <div class="card__prompt-wrapper">\n    <div class="card__remove-overlay-icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Remove download?</p>\n      <p>This will remove your downloaded book</p>\n\n      <div class="card__prompt-buttons-wrapper">\n        <button class="remove">Remove</button>\n        <button class="remove-cancel">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="card__update-overlay-in-progress">\n  <div class="card__update-in-progress-wrapper">\n    <div class="card__update-spinner"></div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Book updating</p>\n      <p>Do not close Kerboodle while updating is in progress.</p>\n    </div>\n  </div>\n</div>\n{% } %}\n\n');
window.JST["common/components/digital_books/teacher_book"]=_.template('<div class="card__cover">\n  <img src="{{ image_src }}" alt="{{ name }}" title="{{ name }}" >\n</div>\n\n<div class="card__info">\n  <div>\n    {% if (is_new) { %}\n    <span class="badge">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n  \n    {% if (is_updated) { %}\n    <span class="badge">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n\n    <h3>{{ name }}</h3>\n  </div>\n\n  <ul>\n    {% if (available.teacher) { %}\n    <li class=\'card__role\'>\n      <span class="mr">{{ I18n.t(\'ui.profile.teacher\') }}</span>\n\n      {% if (purchased.teacher) { %}\n      <svg class="icon icon--smallest" aria-label="{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}" tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n        <use xlink:href="#svg__tick"></use>\n      </svg>\n      {% } else { %}\n      <a href="{{ purchase_url.teacher }}" class="button button--pill buy" target="_blank" rel="extenal" data-profile="teacher">\n        {{I18n.t(\'ui.courses.lenses.home.subscriptions.buy\')}}\n      </a>\n      {% } %}\n    </li>\n    {% } %}\n\n    {% if (available.student) { %}\n    <li class=\'card__role\'>\n      <span class="mr">{{ I18n.t(\'ui.profile.student\') }}</span>\n\n      {% if (purchased.student) { %}\n      <svg class="icon icon--smallest" aria-label="{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}" tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n        <use xlink:href="#svg__tick"></use>\n      </svg>\n      {% } else { %}\n      <a href="{{ purchase_url.student }}" class="button button--pill buy" target="_blank" rel="extenal" data-profile="student">\n        {{I18n.t(\'ui.courses.lenses.home.subscriptions.buy\')}}\n      </a>\n      {% } %}\n    </li>\n    {% } %}\n  </ul>\n</div>\n\n{% if (shouldRenderOfflinePart()) { %}\n<div class="card__download" style="{{ hideOrShowIcon(offlineStatus, \'\') }}"  data-tooltip="Download" data-tooltip-placement="top-start" data-tooltip-forceShow="true">\n  <svg class="icon">\n    <use xlink:href="#svg__downloader"></use>\n  </svg>\n</div>\n\n<div class="card__download-overlay">\n  <div class="card__prompt-wrapper">\n    <div class="card__download-overlay-icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Download book?</p>\n      <p>This book will only be available on Kerboodle when you\'re offline.</p>\n\n      <div class="card__prompt-buttons-wrapper">\n        <button class="download">Download</button>\n        <button class="download-cancel">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="card__download-overlay-in-progress">\n  <div class="card__download-in-progress-wrapper">\n    <div class="card__download-spinner"></div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Book downloading</p>\n      <p>Do not close Kerboodle while download is in progress.</p>\n    </div>\n  </div>\n</div>\n\n<div class="dropdown card__dropdown" style="{{ hideOrShowIcon(offlineStatus, [\'downloaded\', \'update\']) }}">\n  <button class="card__download_remover dropdown__toggle" aria-haspopup="listbox" aria-expanded="false" aria-label="User downloaded book management widget">\n    <svg class="icon card__manage-download-without-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'downloaded\') }}">\n      <use xlink:href="#svg__downloader_remover"></use>\n    </svg>\n    <svg class="icon card__manage-download-with-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'update\') }}">\n      <use xlink:href="#svg__downloader_update"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="card__remove-overlay">\n  <div class="card__prompt-wrapper">\n    <div class="card__remove-overlay-icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Remove download?</p>\n      <p>This will remove your downloaded book</p>\n\n      <div class="card__prompt-buttons-wrapper">\n        <button class="remove">Remove</button>\n        <button class="remove-cancel">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="card__update-overlay-in-progress">\n  <div class="card__update-in-progress-wrapper">\n    <div class="card__update-spinner"></div>\n\n    <div class="card__prompt-text-wrapper">\n      <p>Book updating</p>\n      <p>Do not close Kerboodle while updating is in progress.</p>\n    </div>\n  </div>\n</div>\n{% } %}\n');
window.JST["common/components/digital_books/token_book"]=_.template('<div class="card__cover">\n    <img src="{{ image_src }}" alt="{{ name }}" title="{{ name }}" >\n  </div>\n  \n  <div class="card__info">\n    <div>\n      {% if (is_new) { %}\n      <span class="badge">{{ I18n.t(\'ui.browser.new\') }}</span>\n      {% } %}\n    \n      {% if (is_updated) { %}\n      <span class="badge">{{ I18n.t(\'ui.browser.updated\') }}</span>\n      {% } %}\n  \n      <h3>{{ name }}</h3>\n    </div>\n  </div>\n\n  {% if (shouldRenderOfflinePart()) { %}\n  <div class="card__download" style="{{ hideOrShowIcon(offlineStatus, \'\') }}"  data-tooltip="Download" data-tooltip-placement="top-start" data-tooltip-forceShow="true">\n    <svg class="icon">\n      <use xlink:href="#svg__downloader"></use>\n    </svg>\n  </div>\n  \n  <div class="card__download-overlay">\n    <div class="card__prompt-wrapper">\n      <div class="card__download-overlay-icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n  \n      <div class="card__prompt-text-wrapper">\n        <p>Download book?</p>\n        <p>This book will only be available on Kerboodle when you\'re offline.</p>\n  \n        <div class="card__prompt-buttons-wrapper">\n          <button class="download">Download</button>\n          <button class="download-cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <div class="card__download-overlay-in-progress">\n    <div class="card__download-in-progress-wrapper">\n      <div class="card__download-spinner"></div>\n  \n      <div class="card__prompt-text-wrapper">\n        <p>Book downloading</p>\n        <p>Do not close Kerboodle while download is in progress.</p>\n      </div>\n    </div>\n  </div>\n  \n  <div class="dropdown card__dropdown" style="{{ hideOrShowIcon(offlineStatus, [\'downloaded\', \'update\']) }}">\n    <button class="card__download_remover dropdown__toggle" aria-haspopup="listbox" aria-expanded="false" aria-label="User downloaded book management widget">\n      <svg class="icon card__manage-download-without-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'downloaded\') }}">\n        <use xlink:href="#svg__downloader_remover"></use>\n      </svg>\n      <svg class="icon card__manage-download-with-update" viewBox="0 0 40 40" style="{{ hideOrShowIcon(offlineStatus, \'update\') }}">\n        <use xlink:href="#svg__downloader_update"></use>\n      </svg>\n    </button>\n  </div>\n  \n  <div class="card__remove-overlay">\n    <div class="card__prompt-wrapper">\n      <div class="card__remove-overlay-icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n  \n      <div class="card__prompt-text-wrapper">\n        <p>Remove download?</p>\n        <p>This will remove your downloaded book</p>\n  \n        <div class="card__prompt-buttons-wrapper">\n          <button class="remove">Remove</button>\n          <button class="remove-cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <div class="card__update-overlay-in-progress">\n    <div class="card__update-in-progress-wrapper">\n      <div class="card__update-spinner"></div>\n  \n      <div class="card__prompt-text-wrapper">\n        <p>Book updating</p>\n        <p>Do not close Kerboodle while updating is in progress.</p>\n      </div>\n    </div>\n  </div>\n  {% } %}\n  ');
window.JST["common/components/filters_toggler"]=_.template('{% if (showLabel()) { %}\n<span class="button__label desktop_only_label">Sort and Filter</span>\n{% } %}\n<svg viewBox="0 0 1 1">\n  <use xlink:href="#svg__streamline-filter"></use>\n</svg>\n');window.JST["common/components/form/accordion_list"]=_.template('<fieldset>\n  <legend>\n    <button role="button" class="accordion__toggle" aria-expanded="false" aria-controls="{{ getUniqueIdentifier() }}">\n      <span class="button__label">{{ label }}</span>\n      <svg viewBox="0 0 1 1" class="accordion__caret">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n    </button>\n  </legend>\n  <div class="accordion__content" id="{{ getUniqueIdentifier() }}">\n    {% _(options).each(function(option) { %}\n    <div>\n      <label class="radiobutton">\n        <input type="radio" name="{{ name }}" value="{{ option.value }}"  {{ isSelected(option) ? \'checked\' : \'\' }} >\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n          <use xlink:href="#svg__button_radio_unselected"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n          <use xlink:href="#svg__button_radio_selected"></use>\n        </svg>\n        <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n          <use xlink:href="#button_radio_selected-focus"></use>\n        </svg>\n        <span class="radiobutton__label">{{ option.label }}</span>\n      </label>\n    </div>\n    {% }) %}\n  </div>\n</fieldset>');
window.JST["common/components/form/accordion_list_multiple"]=_.template('<button role="button" class="accordion__toggle">\n  <span class="button__label">{{ label }}</span>\n  <svg viewBox="0 0 1 1" class="accordion__caret">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n<div class="accordion__content">\n  <ul>\n    {% _(options).each(function(option) { %}\n    <li>\n      <label class="checkbox">\n        <input type="checkbox" name="{{ name }}" value="{{ option.value }}"  {{ isSelected(option) ? \'checked\' : \'\' }} >\n        <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n          <use xlink:href="#svg__checkbox-unchecked"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n          <use xlink:href="#svg__checkbox-checked"></use>\n        </svg>\n        <span class="checkbox__label">{{ option.label }}</span>\n      </label>\n    </li>\n    {% }) %}\n  </ul>\n</div>\n');
window.JST["common/components/form/dropdown_list"]=_.template('<button type="button" class="dropdown__toggle">\n  {{ label }}: <span class="selected">{{ selected.label }}</span>\n  <svg viewBox="0 0 1 1" class="caret">\n    <use xlink:href="#svg__chevron-thick-right"></use>\n  </svg>\n</button>\n<ul role="menu" class="dropdown__menu">\n  {% _(options).each(function(option) { %}\n  <li role="menuitem">\n    <label>\n      <input type="radio" name="{{ name }}" value="{{ option.value }}" {{ isSelected(option) ? \'checked\' : \'\' }} />\n      <span class="dropdown__item">{{ option.label }}</span>\n    </label>\n  </li>\n  {% }) %}\n</ul>');
window.JST["common/components/form/query"]=_.template('<label>{{ label }}</label>\n\n<div class="inputGroup">\n  <input type="text" class="form__input" placeholder="Keywords">\n  <button type="button" class="button button--primary">\n    Search\n  </button>\n</div>');window.JST["common/components/form/reset"]=_.template("<label>{{ label }}</label>\n<a href=\"#\">{{ I18n.t('ui.search.reset.action') }}</a>");window.JST["common/components/groups/layout"]=_.template('<ul class="navigationTabs">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <a href="#groups" class="navigationTabs__button">\n      {{ I18n.t(\'ui.assignments.groups\') }}\n    </a>\n  </li>\n  <li class="navigationTabs__item">\n    <a href="#students" class="navigationTabs__button">\n      {{ I18n.t(\'ui.assignments.students\') }}\n      <span class="badge badge--muted" data-counter="students">0</span>\n    </a>\n  </li>\n</ul>\n\n<div class="tabPanel tabPanel--active" id="groups"></div>\n<div class="tabPanel" id="students"></div>\n');
window.JST["common/components/groups/multiple/group"]=_.template('<label class="checkbox">\n  <input type="checkbox" {{ selected ? \'checked\' : \'\' }}>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n    <use xlink:href="#svg__checkbox-unchecked"></use>\n  </svg>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n    <use xlink:href="#svg__checkbox-checked"></use>\n  </svg>\n  <span class="checkbox__label">{{ name }}</span>\n</label>\n\n<ul class="children"></ul>\n');
window.JST["common/components/groups/multiple/student"]=_.template('<label class="checkbox">\n  <input type="checkbox" {{ selected ? \'checked\' : \'\' }}>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n    <use xlink:href="#svg__checkbox-unchecked"></use>\n  </svg>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n    <use xlink:href="#svg__checkbox-checked"></use>\n  </svg>\n  <span class="checkbox__label">{{ last_name }}, {{ first_name }}</span>\n</label>\n');
window.JST["common/components/groups/no_students"]=_.template('<div class="helpCard__icon">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-information"></use>\n  </svg>\n</div>\n<div class="helpCard__content">\n  {{ I18n.t(\'ui.assignments.nostudents\') }}\n</div>');window.JST["common/components/groups/single/group"]=_.template('<div class="container">\n  <label class="radiobutton">\n    <input type="radio" name="group" value="{{ id }}" {{ selected ? \'checked\' : \'\' }}>\n    <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n      <use xlink:href="#svg__button_radio_unselected"></use>\n    </svg>\n    <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n      <use xlink:href="#svg__button_radio_selected"></use>\n    </svg>\n    <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n      <use xlink:href="#button_radio_selected-focus"></use>\n    </svg>\n    <span class="radiobutton__label">{{ name }}</span>\n  </label>\n  <button role="button" class="button button--primary viewButton ml--auto {{ selected ? \'viewButton--active\' : \'\' }}" data-action="view">{{ I18n.t(\'ui.common.view\') }}</button>  \n</div>\n<ul class="children"></ul>\n');
window.JST["common/components/groups/single/student"]=_.template('<div class="container">\n  <label class="radiobutton">\n    <input type="radio" name="student" value="{{ id }}" {{ selected ? \'checked\' : \'\' }}>\n    <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n      <use xlink:href="#svg__button_radio_unselected"></use>\n    </svg>\n    <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n      <use xlink:href="#svg__button_radio_selected"></use>\n    </svg>\n    <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n      <use xlink:href="#button_radio_selected-focus"></use>\n    </svg>\n    <span class="radiobutton__label">{{ last_name }}, {{ first_name }}</span>\n  </label>\n  <button role="button" class="button button--primary viewButton ml--auto" data-action="view">{{ I18n.t(\'ui.common.view\') }}</button>\n</div>\n');
window.JST["common/components/lens_filter"]=_.template('<button type="button" class="navigationTabs__button">\n  <span>{{ name }}</span>\n</button>');window.JST["common/components/list/assignments/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No assignments found.</h2>\n  <p>You have no assignments to complete at the moment.</p>\n</div>\n');window.JST["common/components/list/assignments/item"]=
_.template('<h3 id="{{ getAssessmentId() }}">\n  {% if (smart) { %}\n    <span class="label badge badge--smart">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__icon_small_smart"></use>\n      </svg>\n    </span>\n    {{ name }}\n    <span class="a11y-hide">with Next Steps</span>\n  {% } else { %}\n    {{ name }}\n  {% } %}\n</h3>\n{% if (showMarksAvailable()) { %}\n  <p class="flex flex--alignCenter" id="{{ getMarksId() }}" aria-hidden="true">\n    <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n      <use xlink:href="#svg__streamline-marks"></use>\n    </svg>\n    {{ points }} {{ I18n.t(\'ui.assignments.marks\') }}\n  </p>\n{% } %}\n{% if (showNoMarks()) { %}\n  <p class="flex flex--alignCenter" id="{{ getMarksId() }}" aria-hidden="true">\n    <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n      <use xlink:href="#svg__streamline-marks"></use>\n    </svg>\n    {{ I18n.t(\'ui.assignments.no_marks\') }}\n  </p>\n{% } %}\n<p id="{{ getAssignedById() }}" aria-hidden="true">{{ I18n.t(\'ui.assignments.assigned_by\') }}: {{ assigned_by }}</p>\n<div class="row">\n  <div class="col">\n    <div class="badgeList">\n      <span class="badge badge--muted" id="{{ getStatusId() }}" aria-hidden="true">{{ status() }}</span>\n    </div>\n  </div>\n  <div class="col">\n    <p class="ml--auto" id="{{ getDueDateId() }}" aria-hidden="true">Due date: {{ dueDate() }}</p>\n  </div>\n</div>\n');
window.JST["common/components/list/contents/empty"]=_.template('<div class="infoCard  mv--4x mh--2x" aria-hidden="true">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>{{ I18n.t(\'ui.common.noresources.title\') }}</h2>\n  <p>{[ message ]}</p>\n</div>\n');window.JST["common/components/list/contents/item"]=_.template('<div class="row">\n  <div class="flex flex--alignCenter flex--spaceBetween flex--grow mv--4x mh--2x resources__title">\n\n      <div class="col">\n        <a data-action="open" role="button" class="underline bold fitContent" href="#">\n          {% if (smart) { %}\n            <span class="label badge badge--smart">\n              <svg viewBox="0 0 1 1" aria-hidden="true">\n                <use xlink:href="#svg__icon_small_smart"></use>\n              </svg>\n            </span>\n          {% } %}\n          {[ lookable_name ]}\n          {% if(smart) { %}\n            <span class="a11y-hide">with Next Steps</span>\n          {% } %}\n        </a>\n\n        <div class="badgeList">\n          {% if (activity_type) { %}\n          <span class="badge badge--meta">{{ activity_type }}</span>\n          {% } %}\n          {% if (file_ext) { %}\n          <span class="badge badge--meta">{{ file_ext }}</span>\n          {% } %}\n        </div>\n      </div>\n\n      <div class="col col--auto fullHeight">\n        <button role="button" class="accordion__toggle noPadding" aria-label="{[ lookable_name ]} more information" aria-expanded="false" aria-controls="{{ getId() }}">\n          <svg viewBox="0 0 1 1" class="accordion__caret">\n            <use xlink:href="#svg__chevron-right"></use>\n          </svg>\n        </button>\n      </div>\n  </div>\n</div>\n\n<div class="accordion__content" id="{{ getId() }}">\n  <p class="mh--2x">{[ lookable_description ]}</p>\n\n  <div class="row">\n    <div class="col">\n      <ul class="resources__linksList unstyledList">\n        <li>\n          <label class="checkbox resources__favourite">\n            <input type="checkbox" {{ starred ? \'checked\' : \'\' }}>\n            <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected" aria-hidden="true">\n              <use xlink:href="#svg__streamline-favourite"></use>\n            </svg>\n            <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected" aria-hidden="true">\n              <use xlink:href="#svg__streamline-unfavourite"></use>\n            </svg>\n            <span class="checkbox__label checkbox__icon--unselected">{{ I18n.t(\'ui.homepage.add_favourite\') }}</span>\n            <span class="checkbox__label checkbox__icon--selected">{{ I18n.t(\'ui.homepage.remove_favourite\')}}</span>\n          </label>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n</div>\n');
window.JST["common/components/list/contents/teacher_item"]=_.template('<div class="row">\n  <div class="col col--small">\n    <label class="checkbox resources__selection">\n      <input type="checkbox" {{ checked ? \'checked\' : \'\' }}>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n        <use xlink:href="#svg__checkbox-unchecked"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n        <use xlink:href="#svg__checkbox-checked"></use>\n      </svg>\n    </label>\n\n    <label class="checkbox resources__favourite">\n      <input type="checkbox" {{ starred ? \'checked\' : \'\' }}>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected" aria-hidden="true">\n        <use xlink:href="#svg__streamline-favourite"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected" aria-hidden="true">\n        <use xlink:href="#svg__streamline-unfavourite"></use>\n      </svg>\n    </label>\n  </div>\n  <div class="flex flex--alignCenter flex--spaceBetween flex--grow mv--4x mh--2x resources__title">\n      <div class="col">\n          <div class="resources__status {{ isInBasket() ? \'\' : \'hidden\' }}">\n            <svg viewBox="0 0 1 1" class="icon icon--small">\n              <use xlink:href="#svg__icon_indicator_exclamation"></use>\n            </svg>\n            Resource in basket\n          </div>\n\n        {% if (showLabels()) { %}\n        <div class="badgeList">\n          {% if (showNewLabel()) { %}\n          <span class="badge">{{ I18n.t(\'ui.browser.new\') }}</span>\n          {% } %}\n          {% if (showUpdatedLabel()) { %}\n            <span class="badge">{{ I18n.t(\'ui.browser.updated\') }}</span>\n          {% } %}\n        </div>\n        {% } %}\n\n        <a data-action="open" role="button" class="underline bold fitContent" href="#">{% if(smart) { %}\n          <span class="label badge badge--smart">\n             <svg viewBox="0 0 1 1" aria-hidden="true">\n               <use xlink:href="#svg__icon_small_smart"></use>\n             </svg>\n          </span>\n          {% } %}{[ lookable_name ]}\n          \n          {% if(smart) { %}\n            <span class="a11y-hide">with Next Steps</span>\n          {% } %}\n        </a>\n\n        <div class="badgeList">\n          {% if (activity_type) { %}\n          <span class="badge badge--meta">{{ activity_type }}</span>\n          {% } %}\n          {% if (file_ext) { %}\n          <span class="badge badge--meta">{{ file_ext }}</span>\n          {% } %}\n        </div>\n      </div>\n\n      <div class="col col--auto fullHeight">\n        <button role="button" class="accordion__toggle noPadding" aria-label="{[ lookable_name ]} more information"\n          aria-expanded="false" aria-controls="{{ getId() }}">\n          <svg viewBox="0 0 1 1" class="accordion__caret">\n            <use xlink:href="#svg__chevron-right"></use>\n          </svg>\n        </button>\n      </div>\n\n  </div>\n</div>\n\n<div class="accordion__content" id="{{ getId() }}">\n  <p>{[ lookable_description ]}</p>\n\n  <div class="row">\n    <div class="col">\n      <ul class="resources__linksList unstyledList">\n        {% if (showMarksAvailable()) { %}\n          <li>\n            <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n              <use xlink:href="#svg__streamline-marks"></use>\n            </svg>\n            {{ points }} {{ I18n.t(\'ui.assignments.marks\') }}\n          </li>\n        {% } %}\n        {% if (showNoMarks()) { %}\n          <li>\n            <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n              <use xlink:href="#svg__streamline-marks"></use>\n            </svg>\n            {{ I18n.t(\'ui.assignments.no_marks\') }}\n          </li>\n        {% } %}\n        {% if (showVisibility()) { %}\n        <li>\n          <a role="button" href="#" class="button__visibility {{ student_access ? \'button--enabled\' : null }}">\n            <span class="button__state button__state--idle">\n              <svg viewBox="0 0 1 1" class="icon icon--default">\n                <use xlink:href="#svg__streamline-access-locked"></use>\n              </svg>\n              Hidden from all students\n            </span>\n            <span class="button__state button__state--enabled">\n              <svg viewBox="0 0 1 1" class="icon icon--default">\n                <use xlink:href="#svg__streamline-access"></use>\n              </svg>\n              Visible to all students\n            </span>\n          </a>\n        </li>\n        {% } %}\n        {% if (showBook()) { %}\n        <li>\n          <a href="{{ bookUrl() }}" target="_blank">\n            <svg viewBox="0 0 1 1" class="icon icon--default">\n              <use xlink:href="#svg__streamline-book"></use>\n            </svg>\n            {{ bookRange() }}\n          </a>\n        </li>\n        {% } %}\n        {% if (showLocation()) { %}\n        <li class="resources__linkItemGrid">\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-browse"></use>\n          </svg>\n          <div class="resources__locationsWrapper">\n          {% _(location).each(function(node, index) { %}\n            <a href="#" class="resources__location" data-id="{{ node.id }}">\n              {{ node.name }}\n            </a>\n          {% }) %}\n          </div>\n        </li>\n        {% } %}\n        <li>\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-information-bold"></use>\n          </svg>\n          Created by {{ source }}\n        </li>\n      </ul>\n    </div>\n    {% if (showImage()) { %}\n    <div class="col col--auto resources__thumbnail">\n      <img src="{{ thumbnail_url }}">\n    </div>\n    {% } %}\n  </div>\n\n</div>\n');
window.JST["common/components/list/layout"]=_.template('<div class="content__header">  \n  <div class="queryTitle"></div>\n  <div class="flex flex--alignCenter flex--spaceBetween fullWidth" role="status">\n    <div class="selection"></div>\n    <span class="queryResults"></span>\n  </div>\n</div>\n<div class="content__body"></div>\n<div class="content__footer"></div>\n');window.JST["common/components/list/level_ups/empty"]=_.template('<div class="helpCard helpCard--light">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    <div class="helpCard__state helpCard__status--on">\n      <p>{{ I18n.t(\'ui.next_steps.level_ups.no_items\') }}</p>\n    </div>\n  </div>\n</div>');
window.JST["common/components/list/level_ups/item"]=_.template('<div class="splitItem">\n  <div class="splitItem__content">\n    <div class="displayGrid">\n      <div class="displayGrid__label">\n        <span class="badge badge--rectangular {{ badgeClass() }}">{{ typeLabel() }}</span>\n      </div>\n      <div class="displayGrid__value"></div>\n      <div class="displayGrid__label">\n        Start task:\n      </div>\n      <div class="displayGrid__value">\n        {{ test }}\n      </div>\n      <div class="displayGrid__label">\n        {{ curriculumLabel() }}:\n      </div>\n      <div class="displayGrid__value">\n        {{ curriculumText() }}\n      </div>\n      <div class="displayGrid__label">\n        Available since:\n      </div>\n      <div class="displayGrid__value">\n        {{ createdAtDate() }}\n        (<time datetime="{{ created }}">{{ created }}</time>)\n      </div>\n    </div>\n  </div>\n  <div class="splitItem__controls">\n    <button role="button" class="button button--primary" data-action="open">Start</button>\n  </div>\n</div>\n');
window.JST["common/components/list/level_ups/layout"]=_.template('<div class="content__wrapper">\n  <div class="content__header">\n    <span class="queryResults"></span>\n    <div class="filters"></div>\n  </div>\n\n  \x3c!-- Level ups --\x3e\n  <div class="tabbed-box tabbed-box--blue">\n    <div class="tabbed-box__header">\n      <div class="tabbed-box__tab">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__level-up-small"></use>\n        </svg>\n        Level ups\n      </div>\n    </div>\n    <div class="tabbed-box__body">\n      <div class="tabbed-box__content tabbed-box__content--padded">\n        <div class="listCaptionMessage">\n          <p>Level up quizzes help you become secure or progress to the next level in topics you\'ve been studying.</p>\n        </div>\n        <div class="content__body"></div>\n      </div>\n    </div>\n  </div>\n  <div class="content__footer"></div>\n</div>\n');
window.JST["common/components/list/markbook/assignment"]=_.template('<div class="assignment__header">\n  <h3>\n    {% if (smart) { %}\n    <span class="label badge badge--smart">\n       <svg viewBox="0 0 1 1">\n         <use xlink:href="#svg__icon_small_smart"></use>\n       </svg>\n      </span>\n    {% } %}\n    {{ name }}\n  </h3>\n  {% if (showArchive()) { %}\n  <div class="buttonWithFeedback archiveAction hidden visible--l">\n    <button role="button" class="button button--secondary" data-action="archive">{{ I18n.t(\'ui.assignments.archive\') }}</button>\n    <div class="message message--inline" data-event="archived">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      {{ I18n.t(\'ui.markbook.archived\') }}\n    </div>\n  </div>\n  {% } %}\n</div>\n\n<div class="assignment__properties">\n  <div class="assignment__properties__item assignment__assignedBy">\n    <span>{{ I18n.t(\'ui.assignments.assigned_by\') }}:</span><span>{{ assigned_by }}</span>\n  </div>\n  <div class="assignment__properties__item assignment__assignedTo">\n    <span>{{ I18n.t(\'ui.assignments.assigned_to\') }}:</span><span>{{ studentsCount() }} ({{ groupsList() }})</span>\n  </div>\n</div>\n\n<div class="assignment__secondaryContainer">\n  <div class="assignment__properties">\n    <div class="assignment__properties__item assignment__due">\n      <span>{{ I18n.t(\'ui.assignments.available_until\') }}:</span><span>{{ dueDate() }}</span>\n    </div>\n  </div>\n\n  <div class="assignment__counters">\n    {% if(showToMarkCounter()) { %}\n    <div class="assignment__counters__item">\n      <span>{{ I18n.t(\'ui.assignments.status.to_mark\') }}</span><span class="badge {{ toMarkCount() ? \'\' : \'badge--muted\' }}">{{ toMarkCount() }}</span>\n    </div>\n    {% } %}\n    <div class="assignment__counters__item">\n      <span>{{ I18n.t(\'ui.assignments.status.not_submitted\') }}</span><span class="badge badge--muted">{{ notSubmittedCount() }}</span>\n    </div>\n    <div class="assignment__counters__item">\n      <span>{{ markedLabel() }}</span><span class="badge badge--muted">{{ markedCount() }}</span>\n    </div>\n  </div>\n</div>\n\n{% if (showArchive()) { %}\n<div class="buttonWithFeedback archiveAction hidden--l">\n  <button role="button" class="button button--secondary" data-action="archive">{{ I18n.t(\'ui.assignments.archive\') }}</button>\n  <div class="message message--inline" data-event="archived">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done-small"></use>\n    </svg>\n    {{ I18n.t(\'ui.markbook.archived\') }}\n  </div>\n</div>\n{% } %}\n');
window.JST["common/components/list/markbook/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No assignments found.</h2>\n  <p>There are no assignments at the moment.</p>\n</div>\n');window.JST["common/components/list/markbook/layout"]=_.template('<div class="content__header">\n  <ul class="navigationTabs">\n    <li class="navigationTabs__item navigationTabs__item--active">\n      <button type="button" class="navigationTabs__button" data-event="load:current">\n        <span>{{ I18n.t(\'ui.assignments.current\') }}</span>\n      </button>\n    </li>\n    <li class="navigationTabs__item">\n      <button type="button" class="navigationTabs__button" data-event="load:archived">\n        <span>{{ I18n.t(\'ui.assignments.archived\') }}</span>\n      </button>\n    </li>\n  </ul>\n  <span class="queryResults hidden visible--l"></span>\n  <a class="hidden visible--l" href="#" role="button" data-action="archive_all">{{ I18n.t(\'ui.assignments.archive_all\') }}</a>\n  <div class="mobileContainer hidden--l">\n    <span class="queryResults"></span>\n    <a href="#" role="button" data-action="archive_all">{{ I18n.t(\'ui.assignments.archive_all\') }}</a>  \n  </div>\n</div>\n<div class="content__body"></div>\n<div class="content__footer"></div>\n');
window.JST["common/components/list/markbook/student_assignment"]=_.template('<span class="badge {{ isAwaitingMarks() ? \'\' : \'badge--muted\' }}">{{ statusText() }}</span>\n<h3 class="studentAssignmentHeader">{% if (smart) { %}\n  <span class="label badge badge--smart">\n       <svg viewBox="0 0 1 1">\n         <use xlink:href="#svg__icon_small_smart"></use>\n       </svg>\n      </span>\n  {% } %}{{ name }}</h3>\n<div class="propertiesList">\n  <div class="assignment__properties">\n    <div class="assignment__properties__item assignment__assignedBy">\n      <span>{{ I18n.t(\'ui.assignments.assigned_by\') }}:</span><span>{{ assigned_by }}</span>\n    </div>\n    {% if (isSubmitted()) { %}\n      <div class="assignment__properties__item assignment__submittedAt">\n        <span>{{ I18n.t(\'ui.assignments.submitted_at\') }}:</span><span>{{ submittedAt() }}</span>\n      </div>\n    {% } else { %}\n      <div class="assignment__properties__item assignment__due">\n        <span>{{ I18n.t(\'ui.assignments.due\') }}:</span><span>{{ dueDate() }}</span>\n      </div>\n    {% } %}\n    {% if (showMark()) { %}\n      <div class="assignment__properties__item assignment__mark">\n        <span>{{ I18n.t(\'ui.assignments.mark\') }}:</span><span>{{ markText() }}</span>\n        {% if (hasPendingQuestions()) { %}\n          <span class="pending">({{ pendingQuestionsCount() }} {{ I18n.t(\'ui.assignments.pending_questions\') }})</span>\n        {% } %}\n      </div>\n    {% } %}\n  </div>\n</div>\n');
window.JST["common/components/list/material/item"]=_.template('<div class="row">\n  <div class="col">\n    <button role="button" class="accordion__toggle">\n      <div class="col">\n        {[ lookable_name ]}\n\n        <div class="badgeList">\n          {% if (activity_type) { %}\n          <span class="badge badge--meta">{{ activity_type }}</span>\n          {% } %}\n          {% if (file_ext) { %}\n          <span class="badge badge--meta">{{ file_ext }}</span>\n          {% } %}\n        </div>\n      </div>\n\n      <div class="col col--auto">\n        <svg viewBox="0 0 1 1" class="accordion__caret">\n          <use xlink:href="#svg__chevron-right"></use>\n        </svg>\n      </div>\n    </button>\n  </div>\n</div>\n\n<div class="accordion__content">\n  <p>{[ lookable_description ]}</p>\n  <div class="accordion__actions">\n    <button role="button" class="button button--secondary" data-action="manage">\n      <span class="button__state button__state--idle">Add</span>\n      <span class="button__state button__state--enabled">Remove</span>\n    </button>\n    <button role="button" class="button button--secondary" data-action="open">Preview</button>\n\n    <div class="message message--popup" data-event="materialAdded">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      Added to assignment\n    </div>\n\n    <div class="message message--popup" data-event="materialRemoved">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      Removed from assignment\n    </div>\n  </div>\n  <div class="helpCard assignmentBasket__material__limitReached__message">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      Support material limit of 5 resources reached.\n    </div>\n  </div>\n</div>\n');
window.JST["common/components/list/misconceptions/group"]=_.template('<button class="misconception__link">\n  <svg viewBox="0 0 20 20" aria-hidden="true">\n    <use xlink:href="#svg_student_counter"></use>\n  </svg>\n  <p class="misconception__student-count">{{ students_count }}</p>\n</button>\n<div class="misconception__text-wrapper">\n  <p class="misconception__description">\n    {{ description }}\n  </p>\n  <button class="misconception__text-toggle">See more</button>\n</div>\n');window.JST["common/components/list/misconceptions/student"]=
_.template('<div class="misconception__row">\n  <label>Misconception:</label>\n  <div class="misconception__text-wrapper">\n    <p class="misconception__description">\n      {{ description }}\n    </p>\n    <button class="misconception__text-toggle">See more</button>\n  </div>\n</div>\n<div class="misconception__row">\n  <label>Number:</label>\n  <p>{{ times_selected }}</p>\n</div>\n<div class="misconception__row">\n  <label>Last selected:</label>\n  <p>{{ lastSelected() }}</p>\n</div>');window.JST["common/components/list/notifications/empty"]=
_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>{{ I18n.t(\'ui.notifications.nonotifications\') }}</h2>\n</div>\n');window.JST["common/components/list/notifications/item"]=_.template('<div class="row">\n  <div class="col">\n    <button role="button" class="accordion__toggle" aria-expanded="false" aria-controls="{{ getUniqueIdentifier() }}">\n      <div class="col">\n        {% if (!read) { %}\n        <div class="badgeList">\n          <span class="badge" data-badge="unread">{{ I18n.t(\'ui.notifications.unread\') }}</span>\n        </div>\n        {% } %}\n\n        <span>{[ subject ]}</span>\n\n        <div class="badgeList">\n          <span class="badge badge--meta">{{ sender || I18n.t(\'ui.notifications.nosender\') }}</span>\n          <time class="badge badge--meta" datetime="{{ sent }}">{{ sent }}</time>\n        </div>\n      </div>\n\n      <div class="col col--auto">\n        <svg viewBox="0 0 1 1" class="accordion__caret">\n          <use xlink:href="#svg__chevron-right"></use>\n        </svg>\n      </div>\n    </button>\n  </div>\n</div>\n\n<div class="accordion__content" id="{{ getUniqueIdentifier() }}">\n  {[ body ]}\n\n  <div class="accordion__actions">\n    {% if (!!assignment_id) { %}\n    <button role="button" class="button button--primary" data-action="open"\n      aria-labelledby="open {{ getTitleId() }} {{ getNextStepsIfExists() }}">{{ I18n.t(\'ui.notifications.open\') }}</button>\n    {% } %}\n    {% if (!archived) { %}\n    <button role="button" class="button button--secondary" data-action="archive"\n      aria-labelledby="archive {{ getTitleId() }} {{ getNextStepsIfExists() }}">{{ I18n.t(\'ui.notifications.archive\')\n      }}</button>\n    {% } %}\n  </div>\n</div>\n');
window.JST["common/components/list/pagination"]=_.template('{% if(totalRecords > 0) {  %}\n<span class="a11y-hide" id="jump_page">Jump to page</span>\n<ul class="pagination">\n  <li>\n    <button aria-label="Previous page" role="button" class="button pagination__arrow pagination__arrow--previous" {% if(!showPreviousButton()) { %} disabled="disabled" {% } %} tabindex="{{prev ? \'0\' : \'-1\'}}" data-action="previousPage">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n    </button>\n  </li>\n  {% _(getPageItems()).each(function(label, index) { %}\n    <li>\n      {% if(isInputNumberType(label, index)) { %}\n        <input\n          class="button {{getPageItemClass(label, index)}}"\n          type="number"\n          inputmode="numeric"\n          data-action="{{ label == currentPage ? \'inputPage\' : \'goToPage\' }}"\n          value="{{label}}"\n          min="1"\n          max="{{ totalPages }}"\n          aria-label="Page {{ currentPage }}"\n          aria-describedby="valid_input"\n        />\n        {% if(totalPages > 1) { %}\n          <span id="valid_input" class="a11y-hide">Enter a page number between 1 and {{ totalPages }}.</span>\n        {% } %}\n      {% } else if (isPaginationSeparator(label, index)) { %}\n        <span class="pagination__separator">{{ label }}</span>\n      {% } else if (isCompactMode()) { %}\n        <span\n          class="button {{getPageItemClass(label, index)}}"\n          data-action="{{ label == currentPage ? \'inputPage\' : \'goToPage\' }}"\n          aria-describedby="jump_page p{{ label }}"\n        ><span id="p{{ label }}">{{ label }}</span></span>\n      {% } else { %}\n        <button\n          class="button {{getPageItemClass(label, index)}}"\n          type="button"\n          data-action="{{ label == currentPage ? \'inputPage\' : \'goToPage\' }}"\n          aria-describedby="jump_page p{{ label }}"\n        ><span id="p{{ label }}">{{ label }}</span></button>\n      {% } %}\n    </li>\n  {% }) %}\n  <li>\n    <button aria-label="Next page" role="button" class="button pagination__arrow pagination__arrow--next" {% if(!showNextButton()) { %} disabled="disabled" {% } %} tabindex="{{next ? \'0\' : \'-1\'}}" data-action="nextPage">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n    </button>\n  </li>\n</ul>\n\n  {% if(showBackToTopButton()) {  %}\n    <button role="button" class="button button--secondary button--goToTop" data-action="goToTop">\n        <span class="{{ showGoToTopButtonLabel() ? \'button__label\' :  \'a11y-hide\'}}">Back to top</span>\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-back"></use>\n      </svg>\n    </button>\n  {% } %}\n{% } %}');
window.JST["common/components/list/resources/item"]=_.template('<div class="row">\n  <div class="col">\n    <button role="button" class="accordion__toggle">\n      <div class="col">\n        {[ lookable_name ]}\n\n        <div class="badgeList">\n          {% if (activity_type) { %}\n          <span class="badge badge--meta">{{ activity_type }}</span>\n          {% } %}\n          {% if (file_ext) { %}\n          <span class="badge badge--meta">{{ file_ext }}</span>\n          {% } %}\n        </div>\n      </div>\n\n      <div class="col col--auto">\n        <svg viewBox="0 0 1 1" class="accordion__caret">\n          <use xlink:href="#svg__chevron-right"></use>\n        </svg>\n      </div>\n    </button>\n  </div>\n</div>\n\n<div class="accordion__content">\n  <p>{[ lookable_description ]}</p>\n  <div class="accordion__actions">\n    <button role="button" class="button button--secondary" data-action="open">Open</button>\n  </div>\n</div>\n');
window.JST["common/components/list/selection"]=_.template('<input type="checkbox" name="select_all" {{ checked ? \'checked\' : \'\' }}>\n<svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n  <use xlink:href="#svg__checkbox-unchecked"></use>\n</svg>\n<svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n  <use xlink:href="#svg__checkbox-checked"></use>\n</svg>\n<svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--partial">\n  <use xlink:href="#svg__checkbox-partial"></use>\n</svg>\n<span class="checkbox__label">{{ count }} selected</span>\n');
window.JST["common/components/list/student_assignments/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No assignments found.</h2>\n  <p>No assignments left on this category.</p>\n</div>\n');window.JST["common/components/list/student_assignments/multiple_marks_item"]=_.template('<div class="row">\n  <div class="flex flex--alignCenter flex--spaceBetween flex--grow mh--2x resources__title">\n    \n      <div class="col">\n        <div class="info">\n          <div>\n            <span class="student">{{ student.first_name }} {{ student.last_name }}</span>\n            {% if (group) { %}\n            <span class="group">{{ group.name }}</span>\n            {% } %}  \n          </div>\n          <div class="submittedAt">\n            {{ I18n.t(\'ui.teacher_markbook_panel.submitted\') }}: {{ submittedAt() }}\n          </div>\n        </div>\n        <div class="globalScore">\n          {{ I18n.t(\'ui.teacher_markbook_panel.mark\') }}: <strong class="mark">{{ mark }}</strong> \n          {% if (points) { %}\n          / <strong>{{ points }}</strong>\n          {% } %}\n          {% if (hasPendingQuestions()) { %}\n          <span class="pending">({{ pendingQuestionsCount() }} {{ I18n.t(\'ui.teacher_markbook_panel.pending_questions\') }})</span>\n          {% } %}\n        </div>\n      </div>\n      \n      <div class="col col--auto fullHeight">\n        <button role="button" class="accordion__toggle noPadding">\n          <svg viewBox="0 0 1 1" class="accordion__caret">\n            <use xlink:href="#svg__chevron-right"></use>\n          </svg>\n        </button>\n      </div>\n  </div>\n</div>\n\n<div class="accordion__content score">\n  <div class="row">\n    {% detailed_score.forEach((score, index) => { %}\n    <div class="col--6">\n      <a href="#screen_{{ index }}" data-action="open:screen" data-id="{{ index }}">Question {{ index + 1 }}</a>\n      {% if (score.points) { %}\n        {% if(score.automarked) { %}\n          {{ score.mark }}\n        {% } else { %}\n          <input type="number" value="{{ score.mark || \'\' }}" class="form__input" data-id="{{ index }}" min="0" max="{{ score.points }}">\n        {% } %}\n        / {{ score.points }}\n      {% } else { %}\n        n/a\n      {% } %}\n    </div>\n    {% }) %}\n  </div>\n\n  <div class="actions">\n    <button class="button button--primary ml--auto" data-action="submit">{{ submitText() }}</button>\n    <button class="button button--secondary" data-action="cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <div class="message message--popup">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      <span class="message__label">{{ submittedText() }}</span>\n    </div>\n  </div>\n</div>');
window.JST["common/components/list/student_assignments/not_submitted_item"]=_.template('<div class="row">\n  <div class="flex flex--alignCenter flex--spaceBetween flex--grow mh--2x resources__title">\n    \n      <div class="col">\n        <div class="info">\n          <div>\n            <span class="student">{{ student.first_name }} {{ student.last_name }}</span>\n            {% if (group) { %}\n            <span class="group">{{ group.name }}</span>\n            {% } %}  \n          </div>\n        </div>\n      </div>\n      \n  </div>\n</div>\n');
window.JST["common/components/list/student_assignments/single_mark_item"]=_.template('<div class="row">\n  <div class="flex flex--alignCenter flex--spaceBetween flex--grow mh--2x resources__title">\n    \n      <div class="col">\n        <div class="info">\n          <div>\n            <span class="student">{{ student.first_name }} {{ student.last_name }}</span>\n            {% if (group) { %}\n            <span class="group">{{ group.name }}</span>\n            {% } %}\n          </div>\n          <div class="submittedAt">\n            {{ I18n.t(\'ui.teacher_markbook_panel.submitted\') }}: {{ submittedAt() }}\n          </div>\n        </div>\n        <table>\n          {% if (showMark()) { %}\n          <tr class="globalScore">\n            <td>{{ I18n.t(\'ui.teacher_markbook_panel.marks\') }}:</td>\n            <td>\n              <input type="number" value="{{ mark }}" class="form__input">\n              {% if (points) { %}\n              / <strong>{{ points }}</strong>\n              {% } %}\n            </td>\n          </tr>\n          {% } %}          \n          {% if (showDelivery()) { %}\n          <tr class="delivery">\n            <td>{{ I18n.t(\'ui.teacher_markbook_panel.submission_type\') }}:</td>\n            <td>{{ deliveryText() }}</td>\n          </tr>\n          {% } %}\n          {% if (showStudentContents()) { %}\n          <tr class="studentContents">\n            <td>{{ I18n.t(\'ui.teacher_markbook_panel.uploaded_files\') }}:</td>\n            <td>\n              {% student_contents.forEach((content, index) => { %}\n              <a href="#{{ content.id }}" class="link" data-index="{{ index }}"  data-action="open:student_content">{{ content.name }}</a>\n              {% }) %}\n            </td>\n          </tr>\n          {% } %}\n        </table>\n      </div>\n  </div>\n</div>\n<div class="actions">\n  <button class="button button--primary ml--auto" data-action="submit">{{ submitText() }}</button>\n  <button class="button button--secondary" data-action="cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n  <div class="message message--popup">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done-small"></use>\n    </svg>\n    <span class="message__label">{{ submittedText() }}</span>\n  </div>\n</div>');
window.JST["common/components/list_filters/accordion_filter"]=_.template('<fieldset>\n  <legend>\n    <button role="button" class="accordion__toggle" aria-expanded="false" aria-controls="{{ getUniqueIdentifier() }}">\n      <span class="button__label">{{ label }}</span>\n      <svg viewBox="0 0 1 1" class="accordion__caret">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n    </button>\n  </legend>\n  <div class="accordion__content" id="{{ getUniqueIdentifier() }}">\n    {% _(options).each(function(option) { %}\n    <div>\n      <label class="radiobutton">\n        <input type="radio" name="{{ name }}" value="{{ option.value }}"  {{ isSelected(option) ? \'checked\' : \'\' }} >\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n          <use xlink:href="#svg__button_radio_unselected"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n          <use xlink:href="#svg__button_radio_selected"></use>\n        </svg>\n        <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n          <use xlink:href="#button_radio_selected-focus"></use>\n        </svg>\n        <span class="radiobutton__label">{{ option.label }}</span>\n      </label>\n    </div>\n    {% }) %}\n  </div>\n</fieldset>\n');
window.JST["common/components/list_filters/dropdown_filter"]=_.template('<button type="button" class="dropdown__toggle">\n  {{ label }}: <span class="selected">{{ selected.label }}</span>\n  <svg viewBox="0 0 1 1" class="caret">\n    <use xlink:href="#svg__chevron-thick-right"></use>\n  </svg>\n</button>\n<ul role="menu" class="dropdown__menu">\n  {% _(options).each(function(option) { %}\n  <li role="menuitem">\n    <label>\n      <input type="radio" name="{{ name }}" value="{{ option.value }}" {{ isSelected(option) ? \'checked\' : \'\' }} />\n      <span class="dropdown__item">{{ option.label }}</span>\n    </label>\n  </li>\n  {% }) %}\n</ul>');
window.JST["common/components/notifications/layout"]=_.template('<section class="notifications">\n  <div class="section__wrapper">\n    <div class="section__header section__header--withPageHeader">\n      <div class="pageHeader__tabs">\n        <ul class="navigationTabs navigationTabs--primary">\n          <li class="navigationTabs__item navigationTabs__item--active">\n            <button type="button" class="navigationTabs__button" data-panel="#notificationsCurrent" data-event="current">\n              <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n                <use xlink:href="#svg__notifications-current"></use>\n              </svg>\n              <span role="heading" aria-level="3">{{ I18n.t(\'ui.notifications.current\') }}</span>\n            </button>\n          </li>\n          <li class="navigationTabs__item">\n            <button type="button" class="navigationTabs__button" data-panel="#notificationsArchive" data-event="archive">\n              <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n                <use xlink:href="#svg__notifications-archive"></use>\n              </svg>\n              <span role="heading" aria-level="3">{{ I18n.t(\'ui.notifications.archive\') }}</span>\n            </button>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="section__body">\n      <div id="notificationsCurrent" class="tabPanel tabPanel--active"></div>\n      <div id="notificationsArchive" class="tabPanel"></div>\n    </div>\n  </div>\n\n  <span aria-hidden="true" class="a11y-hide" id="open">Open</span>\n  <span aria-hidden="true" class="a11y-hide" id="archive">Archive</span>\n  <span aria-hidden="true" class="a11y-hide" id="nextSteps">with Next Steps</span>\n</section>\n');
window.JST["common/components/oup_lens/layout"]=_.template("<iframe></iframe>\n");window.JST["common/components/oup_lens/placeholder"]=_.template("<div>Embed View Placeholder <small>({{name}})</small></div>\n");window.JST["common/components/pagination/layout"]=_.template('{% if(totalRecords > 0) {  %}\n  {% if(showCounter()) {  %}\n  <span class="pagination__counter">\n    {{startRecord}} - {{endRecord}} of {{totalRecords}}\n  </span>\n  {% } %}\n\n  <ul class="pagination">\n    <li>\n      <button aria-label="previous page" role="button" class="button pagination__arrow pagination__arrow--previous" {% if(!showPreviousButton()) { %} disabled="disabled" {% } %} tabindex="{{prev ? \'0\' : \'-1\'}}" data-action="previousPage">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__chevron-right"></use>\n        </svg>\n      </button>\n    </li>\n    {% if (showCompactModePageItems()) { %}\n      <li>\n        <input aria-valuenow="{{ currentPage }}"\n          aria-label="jump to page"\n          role="jump_to_page"\n          class="button pagination__input"\n          min="1"\n          max="{{ totalPages }}"\n          type="number"\n          data-action="inputPage"\n          value="{{ currentPage }}"\n          inputmode="numeric"\n          aria-describedby="input-info">\n          <span id="input-info" class="a11y-hide">\n            Enter a number between 1 and {{ totalPages }} or use the up/down arrow keys.\n          </span>\n      </li>\n      <li>/</li>\n      <li>{{ totalPages }}</li>\n    {% } %}\n    {% if (showExtendedModePageItems()) { %}\n      {% _(getPageItems()).each(function(label, index) { %}\n        <li>\n          <input\n            aria-label="jump to page"\n            role="jump_to_page"\n            class="button {{getPageItemClass(label, index)}}"\n            type="{{getPageItemType(label, index)}}"\n            data-action="{{ label == currentPage ? \'inputPage\' : \'goToPage\' }}"\n            value="{{label}}"\n            inputmode="numeric"\n            aria-describedby="input-extended-info"\n          />\n          <span id="input-extended-info" class="a11y-hide">\n            Enter a number between 1 and {{ totalPages }} or use the up/down arrow keys.\n        </span>\n        </li>\n      {% }) %}\n    {% } %}\n    <li>\n      <button aria-label="next page" role="button" class="button pagination__arrow pagination__arrow--next" {% if(!showNextButton()) { %} disabled="disabled" {% } %} tabindex="{{next ? \'0\' : \'-1\'}}" data-action="nextPage">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__chevron-right"></use>\n        </svg>\n      </button>\n    </li>\n  </ul>\n\n  {% if(showBackToTopButton()) {  %}\n  <button role="button" class="button button--secondary button--goToTop" data-action="goToTop">\n    {% if (showGoToTopButtonLabel()) {  %}\n      <span class="button__label">Back to top</span>\n    {% } %}\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-back"></use>\n    </svg>\n  </button>\n  {% } %}\n{% } %}');
window.JST["common/components/prototypes/smart_introduction_panel"]=_.template("-- public/js-templates/common/components/prototypes/smart_introduction_panel.html.html --");window.JST["common/components/prototypes/smart_results_panel"]=_.template('<div class="split-panel">\n  <div class="split-panel__half">\n    <div class="assessment-details">\n      <h2 class="assessment-details__heading">\n        B2, Chapter 1 checkpoint assessment complete!\n      </h2>\n      <div class="assessment-details__body">\n        <p><strong>Results</strong></p>\n        <div class="assessment-details__data">\n          <label>Mark</label>\n          <div class="assessment-details__mark">\n            <span class="assessment-details__markPercentage">4/8 (50%)</span>\n            <a href="#" class="link" data-action="toggleMarks">\n              <span data-actionType="show">Show marks</span>\n              <span data-actionType="hide">Hide marks</span>\n            </a>\n          </div>\n          \x3c!-- Visible when marks are expanded --\x3e\n          <div class="marks-details">\n            <a href="#" class="link">Q1</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q2</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q3</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q4</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q5</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q6</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q7</a> 1/2 (50%)\n          </div>\n          <div class="marks-details">\n            <a href="#" class="link">Q8</a> 1/2 (50%)\n          </div>\n          \x3c!-- /Visible when marks are expanded --\x3e\n\n          <label>Sub-theme(s):</label>\n          <div>\n            <span>Cells, Reproduction</span>\n          </div>\n          <label>Your understanding is:</label>\n          <div>\n            <span class="badge badge--rectangular badge--yellow"\n              >Developing</span\n            >\n            \x3c!-- <span class="badge badge--rectangular badge--green">Secure</span> --\x3e\n            \x3c!-- <span class="badge badge--rectangular badge--purple">Extending</span> --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n    \x3c!-- OSC-256 should be hidden for april release as there will be no rewards until September --\x3e\n    \x3c!-- <div class="assessment-total">\n      <p><strong>Points earned</strong></p>\n      <div class="points-badge">\n        <img class="points-badge__icon" src="/images/icon_points.svg" />\n        <span class="points-badge__display">15</span>\n      </div>\n    </div> --\x3e\n  </div>\n  <div class="split-panel__half split-panel__half--grey">\n    <div class="assessment-details">\n      <h2 class="assessment-details__heading">Your next step</h2>\n      <p class="assessment-details__message">\n        Keep going! There are some areas you don\'t understand. Find out more\n        and try some extra questions.\n      </p>\n\n      \x3c!-- Level up: Secure --\x3e\n      <div class="tabbed-box tabbed-box--green" data-content="secure">\n        <div class="tabbed-box__header">\n          <div class="tabbed-box__tab">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__level-up-small"></use>\n            </svg>\n            Level up: Secure\n          </div>\n        </div>\n        <div class="tabbed-box__body">\n          <div class="tabbed-box__data">\n            <div class="tabbed-box__content">\n              <p>Sub-theme(s): Cells</p>\n            </div>\n            <div class="tabbed-box__buttons">\n              <button class="button button--primary">Start</button>\n              <button class="button button--secondary">Try later</button>\n            </div>\n          </div>\n          <div class="tabbed-box__media">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__level-up-illustration"></use>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Level up: Extend --\x3e\n      <div class="tabbed-box tabbed-box--purple" data-content="extend">\n        <div class="tabbed-box__header">\n          <div class="tabbed-box__tab">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__level-up-small"></use>\n            </svg>\n            Level up: Extend\n          </div>\n        </div>\n        <div class="tabbed-box__body">\n          <div class="tabbed-box__data">\n            <div class="tabbed-box__content">\n              <p>Sub-theme(s): Cells</p>\n            </div>\n            <div class="tabbed-box__buttons">\n              <button class="button button--primary">Start</button>\n              <button class="button button--secondary">Try later</button>\n            </div>\n          </div>\n          <div class="tabbed-box__media">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__level-up-illustration"></use>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Reactivate --\x3e\n      <div class="tabbed-box tabbed-box--blue" data-content="reactivate">\n        <div class="tabbed-box__header">\n          <div class="tabbed-box__tab">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__reactivate-small"></use>\n            </svg>\n            Reactivate\n          </div>\n        </div>\n        <div class="tabbed-box__body">\n          <div class="tabbed-box__data">\n            <div class="tabbed-box__content">\n              <p>What do you remember? Boost your memory strength now.</p>\n            </div>\n            <div class="tabbed-box__buttons">\n              <button class="button button--primary">Start</button>\n              <button class="button button--secondary">Try later</button>\n            </div>\n          </div>\n          <div class="tabbed-box__media">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__reactivate-illustration"></use>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Reflect --\x3e\n      <div class="tabbed-box tabbed-box--blue" data-content="reflect">\n        <div class="tabbed-box__header">\n          <div class="tabbed-box__tab">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__reflect-small"></use>\n            </svg>\n            Reflect\n          </div>\n        </div>\n        <div class="tabbed-box__body">\n          <div class="tabbed-box__data">\n            <div class="tabbed-box__content">\n              <p>A task for reflecting on how you\'ve done.</p>\n            </div>\n            <div class="tabbed-box__buttons">\n              <button class="button button--primary">Start</button>\n            </div>\n          </div>\n          <div class="tabbed-box__media">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__reflect-illustration"></use>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Test Empty --\x3e\n      <div class="tabbed-box tabbed-box--blue hidden" data-content="empty">\n        <div class="tabbed-box__header">\n          <div class="tabbed-box__tab">\n            Empty test tab with no illustration\n          </div>\n        </div>\n        <div class="tabbed-box__body">\n          <div class="tabbed-box__data tabbed-box__data--horizontal">\n            <div class="tabbed-box__content">\n              <p>What do you remember? Boost your memory strength now.</p>\n            </div>\n            <div class="tabbed-box__buttons">\n              <button class="button button--primary">Start</button>\n              <button class="button button--secondary">Try later</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="progress-list-wrapper">\n        <div class="result-progress">\n          <ul class="result-progress__bullet-list">\n            \x3c!-- In order to mark the progress item as filled use \'result-progress__bullet-item--filled\' --\x3e\n            <li class="result-progress__bullet-item result-progress__bullet-item--filled" data-progress="1">\n              <svg\n                viewBox="0 0 1 1"\n                class="result-progress__bullet-checkmark"\n              >\n                <use xlink:href="#svg__journey-check"></use>\n              </svg>\n              <span></span>\n            </li>\n            <li class="result-progress__bullet-item" data-progress="2">\n              <svg\n                viewBox="0 0 1 1"\n                class="result-progress__bullet-checkmark"\n              >\n                <use xlink:href="#svg__journey-check"></use>\n              </svg>\n              <span></span>\n            </li>\n            <li class="result-progress__bullet-item" data-progress="3">\n              <svg\n                viewBox="0 0 1 1"\n                class="result-progress__bullet-checkmark"\n              >\n                <use xlink:href="#svg__journey-check"></use>\n              </svg>\n              <span></span>\n            </li>\n          </ul>\n          <ul class="result-progress__list">\n            <li class="result-progress__item">\n              <img src="/images/illus_small_task.svg" alt="small task" />\n              <span>Start task</span>\n            </li>\n            <li class="result-progress__item">\n              <svg viewBox="0 0 1 1">\n                <use xlink:href="#svg__level-ups-small-illustration"></use>\n              </svg>\n              <span>Level Ups</span>\n            </li>\n            <li class="result-progress__item">\n              <svg viewBox="0 0 1 1">\n                <use xlink:href="#svg__reflect-small-illustration"></use>\n              </svg>\n              <span>Reflect</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n');
window.JST["common/components/scrollable_table/grouped_columns/header_column_cell"]=_.template('<div id="{{ formatAriaLabelName(name) }}" class="scrollableTable__cellHeading {{ sortableClassName() }}" >\n  {{ name }}\n  {% if (showSorting()) { %}\n  <button aria-labelledby="{{ formatAriaLabelName(name) }}" class="{{ sortClassName() }}" data-action="sort" data-sort-column="{{ sortColumn }}"></button>\n  {% } %}\n</div>\n');window.JST["common/components/scrollable_table/grouped_columns/header_label_cell"]=
_.template('{% if (showLabel()) { %}\n<span class="scrollableTable__label">{{ label }}</span>\n{% } %}\n{% if (isCollapsible()) { %}\n<button aria-label="toggle columns" role="button" class="button" tabindex="0" data-action="toggle">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n{% } %}\n\n');window.JST["common/components/scrollable_table/grouped_columns/row"]=_.template('<th class="scrollableTable__cell">\n  {% if (hasPlainHeader()) { %}\n    {% if (hasBadge()) { %}\n      <span class="label badge badge--{{ badge.type }}">\n        {% if (badge.type == \'smart\') { %}\n          <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n        {% } else { %}\n          {{ badge.text }}\n        {% } %}\n      </span>\n   {% } %}\n\n    {{ header }}\n  {% } else { %}\n    <a href="#" data-tooltip="{{ header }}" data-action="open" data-event="{{ event }}">\n      {% if (hasBadge()) { %}\n      <span class="label badge badge--{{ badge.type }}">\n        {% if (badge.type == \'smart\') { %}\n          <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n        {% } else { %}\n          {{ badge.text }}\n        {% } %}\n      </span>\n    {% } %}\n      <span>\n        {{ header }}\n      </span>\n    </a>\n  {% } %}\n</th>\n{% cells.forEach(cell => { %}\n<td class="scrollableTable__cell scrollableTable__cell--alignCenter {[ extraClass(cell) ]}" {[ dataAttributes(cell) ]}>{[ value(cell) ]}</td>\n{% }) %}\n');
window.JST["common/components/scrollable_table/header_cell"]=_.template('{% if (showCaption()) { %}\n<div class="scrollableTable__captionLink">\n  {% if (isLinkable()) { %}\n  <a href="#" data-action="open">\n    {% if (showSmart()) { %}\n      <span class="label badge badge--smart">\n       <svg viewBox="0 0 1 1">\n         <use xlink:href="#svg__icon_small_smart"></use>\n       </svg>\n      </span>\n    {% } %}\n    <span class="scrollableTable__captionText">{[ caption ]}</span>\n  </a>\n  {% } else { %}\n  <span class="scrollableTable__captionText">{[ caption ]}</span>\n  {% } %}\n</div>\n{% } %}\n<div class="{{ columnsClassName() }}">\n  {% columns.forEach(column => { %}\n  <div id="{{ formatAriaLabelName(column.name) }}" class="scrollableTable__cellHeading {{ sortableClassName(column.sortColumn) }}" >\n    {{ column.name }}\n    {% if (column.sortColumn) { %}\n    <button type="button" class="sort-{{column.name}} {{ sortClassName(column.sortColumn) }}" aria-labelledby="{{ formatAriaLabelName(column.name) }}" data-action="sort" data-sort-column="{{ column.sortColumn }}"></button>\n    {% } %}\n  </div>\n  {% }) %}\n</div>\n');
window.JST["common/components/scrollable_table/key_map/header_cell"]=_.template('<button aria-label="Open Key Map" class="reportTable__keyMap-button" data-action="open">\n  <div class="img__wrapper">\n    <img src="/images/icon_information.svg"/>\n  </div>\n  <span>{{ label }}</span>\n</button>\n');window.JST["common/components/scrollable_table/key_map/item"]=_.template('<div class="keyMap__item">\n  <div class="item__img-wrapper">\n    {% if (isImg()) %}\n      <img src="{{ getImg() }}"/>\n    {% else %}\n      <span>{{ getImg() }}</span>\n    {% %}\n  </div>\n  <div class="item_meaning-wrapper">\n    <span class="item_meaning">{{ getKey() }}</span>\n  </div>\n</div>\n');
window.JST["common/components/scrollable_table/key_map/layout"]=_.template('<div class="keyMap__content-wrapper keyMap">\n  <section class="keyMap__content">\n    <header class="keyMap__header">\n      <div>{{ getSymbolHeader() }}</div>\n      <div>{{ getMeaningHeader() }}</div>\n    </header>\n    <div class="keyMap__body"></div>\n  </section>\n</div>\n');window.JST["common/components/scrollable_table/layout"]=_.template('<div class="scrollableTable__container"></div>\n<div class="scrollableTable__footer"></div>');
window.JST["common/components/scrollable_table/row"]=_.template('<th class="scrollableTable__cell">\n  {% if (hasPlainHeader()) { %}\n    {% if (hasBadge()) { %}\n      <span class="label badge badge--{{ badge.type }}">\n        {% if (badge.type == \'smart\') { %}\n          <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n        {% } else { %}\n          {{ badge.text }}\n        {% } %}\n      </span>\n   {% } %}\n\n    {{ header }}\n  {% } else { %}\n    <a href="#" data-tooltip="{{ header }}" data-action="open" data-event="{{ event }}">\n      {% if (hasBadge()) { %}\n      <span class="label badge badge--{{ badge.type }}">\n        {% if (badge.type == \'smart\') { %}\n          <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n        {% } else { %}\n          {{ badge.text }}\n        {% } %}\n      </span>\n    {% } %}\n    {{ header }}\n  </a>\n  {% } %}\n</th>\n{% cells.forEach(cell => { %}\n<td class="scrollableTable__cell scrollableTable__cell--alignCenter {[ extraClass(cell) ]}" {[ colspan(cell) ]}>{[ value(cell) ]}</td>\n{% }) %}\n');
window.JST["common/components/scrollable_table/table"]=_.template('<div class="scrollableTable__wrapper">\n  <table class="scrollableTable__table scrollableTable__table--striped scrollableTable__table--bordered {{ tableExtraClass() }}">\n    <thead></thead>\n    <tbody></tbody>\n  </table>\n</div>\n');window.JST["common/components/search"]=_.template('<div class="inputWithButton">\n  <input type="search" class="form__input" placeholder="{{ placeholder }}" aria-label="{{ placeholder }}">\n  <button type="button" class="button button--icon" aria-label="Clear {{ placeholder }}" data-action="clear">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n<button type="button" class="button button--primary button--icon" aria-label="Search" data-action="search">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-search"></use>\n  </svg>\n</button>\n');
window.JST["common/components/side_panel/header"]=_.template('<h1>{{ title }}</h1>\n<button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-close"></use>\n  </svg>\n </button>');window.JST["common/components/side_panel/layout"]=_.template('<header class="sidepanel__header">\n  <h1 id="sidepanel-focusable" tabindex="-1">\n    <span class="label badge badge--smart">\n      <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n    </span>\n    {{ title }}\n  </h1>\n  <button type="button" id="sidepanel-close-button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</header>\n<div class="sidepanel__annex"></div>\n<div class="sidepanel__body"></div>\n<div class="sidepanel__footer"></div>');
window.JST["common/components/side_panel/page"]=_.template('<header class="sidepanel__header">\n  <button type="button" class="button button--icon" aria-label="{{ I18n.t(\'ui.common.back\') }}"\n          data-action="back">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-back"></use>\n    </svg>\n  </button>\n  <div class="header__content-wrapper">\n    {% if (isIcon()) %}\n    <div class="label badge badge--smart svgSmart--wrapper">\n      <svg viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n    </div>\n    {% %}\n    <h1>{{ title }}</h1>\n  </div>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</header>\n<div class="sidepanel__annex"></div>\n<div class="sidepanel__body"></div>\n<div class="sidepanel__footer"></div>\n');
window.JST["common/components/tree-node"]=_.template('<div class="tree__content">\n  <svg viewBox="0 0 1 1" class="tree__caret" aria-hidden="true">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n\n  <div class="hidden visible--l">\n    <button id="{{ isRootStructure() ? \'allRes\' : \'\'}}" role="button" class="tree__toggle tree__toggle--desktop button">{[ name ]}</button> \x3c!-- Use this selector (tree__toggle--desktop) to open this tree branch & update the resources list --\x3e\n  </div>\n\n  <div class="hidden--l">\n    <h4 id="{{ getUniqueIdentifier() }}">{[ name ]}</h4>\n    <span id="view" class="a11y-hide" aria-hidden="true">View</span>\n    <button role="button" class="tree__toggle tree__toggle--mobile button">{[ name ]}</button> \x3c!-- Use this selector (tree__toggle--mobile) to open this tree branch --\x3e\n    <button role="button" class="button button--secondary" aria-labelledby="view {{ getUniqueIdentifier() }}">View</button> \x3c!-- Use this selector (button--secondary) to update the resources list --\x3e\n  </div>\n</div>\n\n<ul class="tree tree--inner"></ul>\n');
window.JST["common/components/user_preview/form"]=_.template('<div class="row-fluid">\n  <div class="span6">\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/first_name">\n      <label class="control-label" for="first_name">{{ I18n.t(\'ui.users.first_name\') }}</label>\n      <div class="controls">\n        {% if (can(\'write\', \'users/preview/first_name\')) { %}\n        <input class="input-xxlarge" name="first_name" id="first_name" type="text" maxlength="{{gon.limits.user.first_name}}" />\n        {% } else { %}\n        <span id="first_name"></span>\n        {% } %}\n      </div>\n    </div>\n\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/last_name">\n      <label class="control-label" for="last_name">{{ I18n.t(\'ui.users.last_name\') }}</label>\n      <div class="controls">\n        {% if (can(\'write\', \'users/preview/last_name\')) { %}\n        <input class="input-xxlarge" name="last_name" id="last_name" type="text" maxlength="{{gon.limits.user.last_name}}" />\n        {% } else { %}\n        <span id="last_name"></span>\n        {% } %}\n      </div>\n    </div>\n\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/email">\n      <label class="control-label" for="email">{{ I18n.t(\'ui.users.email\') }}</label>\n      <div class="controls">\n        {% if (can(\'write\', \'users/preview/email\')) { %}\n        <input class="input-xxlarge" name="email" id="email" type="text" maxlength="{{gon.limits.user.email}}" />\n        {% } else { %}\n        <span id="email"></span>\n        {% } %}\n      </div>\n    </div>\n\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/username">\n      <label class="control-label" for="username">{{ I18n.t(\'ui.users.username\') }}</label>\n      <div class="controls">\n        {% if (can(\'write\', \'users/preview/username\')) { %}\n        <input class="input-xxlarge" name="username" id="username" type="text" maxlength="{{gon.limits.user.username}}" />\n        {% } else { %}\n        <span id="username"></span>\n        {% } %}\n      </div>\n    </div>\n\n    {% if(canShowUserid()) { %}\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/userid">\n      <label class="control-label" for="userid">{{ I18n.t(\'ui.users.userid\') }}</label>\n      <div class="controls">\n        {% if (can(\'write\', \'users/preview/userid\')) { %}\n        <input class="input-xxlarge" name="userid" id="userid" type="text" maxlength="{{gon.limits.user.userid}}" />\n        {% } else { %}\n        <span id="userid"></span>\n        {% } %}\n      </div>\n    </div>\n    {% } %}\n  </div> \x3c!-- .span6 --\x3e\n  <div class="span6">\n    <div class="control-group online-help-block" data-restricted data-action="write" data-permissions="users/preview/password/{{ type.toLowerCase() }}">\n      <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="reset_password" id="reset_password" type="checkbox" />\n      </div>\n    </div>\n\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/courses">\n      <label class="control-label">{{ I18n.t(\'ui.users.courses\') }}</label>\n      <div class="controls courses-list">\n        {{ coursesList() }}\n      </div>\n    </div>\n\n    {% if(canShowGroups()) { %}\n    <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/groups">\n      <label class="control-label">{{ I18n.t(\'ui.users.groups\') }}</label>\n      <div class="controls">\n        {{ groupsList() }}\n      </div>\n    </div>\n    {% } %}\n  </div> \x3c!-- .span6 --\x3e      \n</div> \x3c!-- .row-fluid --\x3e\n');
window.JST["common/components/user_preview/layout"]=_.template('<form class="form-vertical modal-form row-fluid preview-component">\n  <div class="modal-header">\n    <h3>{{ name }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n  \n  <div class="modal-body">\n    <div id="form"></div>\n  </div>\n\n  <div class="modal-footer" data-restricted data-action="show" data-permissions="users/preview/save">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n  </div>\n</form>\n');
window.JST["common/content"]=_.template('<span class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</span>\n<span class="span11">\n  <a class="name math-formula">{[ name ]}</a>\n</span>\n');window.JST["common/course_lens_no_contents"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {[ message ]}\n  </span>\n</div>\n');window.JST["common/create/button"]=_.template("<button class=\"btn {{ action }} {{ (enabled) ? 'enabled' : 'disabled' }} {{ active && 'active' }}\">\n  <i class=\"icon-{{ iconclass }}\"></i>\n  {{ label }}\n</button>\n<p class=\"help-block\">\n  {[ description ]}\n</p>");
window.JST["common/create/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.\' + i18nKey + \'.title\' ) }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n{% if (i18nKey == \'structure\') { %}\n  <div class="modal-help"><p class="help-block">{{ I18n.t(\'ui.create.\' + i18nKey + \'.help\') }}</p></div>\n{% } %}\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <div id="create-node-tree" class="sidebar-modal span5 dialog-fix">\n    </div>\n    \x3c!-- Form --\x3e\n    <div id="create-node-fields" class="main span7">\n      <form class="form-small">\n        \x3c!-- Buttons --\x3e\n        <div id="create-node-buttons" class="row-fluid"></div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n  </div>\n</div>\n');
window.JST["common/dialog"]=_.template('<div class="modal-header">\n  <a class="close" href="#" data-dismiss="modal">\u00d7</a>\n  <h3>Dialog</h3>\n</div>\n<div class="modal-body">\n  <div class="row-fluid">\n    <p>Please, create your own template</p>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid"></div>\n</div>');window.JST["common/dialogs/continue_anyway"]=_.template('<div class="modal-header">\n  <h3>{[ I18n.t(\'ui.common.desktop_only_title\') ]}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body" id="group-assignments">\n  <div class="row-fluid">\n    <p>{[ I18n.t(\'ui.common.desktop_only_message\') ]}</p>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{[ I18n.t(\'ui.common.cancel\') ]}</a>\n    <input type=\'submit\' class="btn btn-primary" value="{[ I18n.t(\'ui.common.continue_anyway\') ]}" />\n  </div>\n</div>\n');
window.JST["common/dialogs/group/global/group_management_layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.course_group.\' + mode) }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    {[ helpMessageIfAvailable() ]}\n    \x3c!-- Form --\x3e\n    <div id="create-node-fields" class="main span12">\n      <form class="form-small">\n        <div class="control-group">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.create.group.name\') }}</label>\n          <div class="controls">\n            <input name="name" type="text" maxlength="{{gon.limits.group.name}}" value="{{ name }}" autofocus />\n          </div>\n        </div>\n        <div class="control-group header-button">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.create.group.parent\') }}</label>\n          <div class="controls">\n            <input type="text" name="" value="{{ parentName }}" readonly />\n            <input type="hidden" name="parent_id" value="{{ parentId }}" />\n          </div>\n        </div>\n        {% if (hasToShowStudentList) { %}\n          <p>{{ I18n.t(\'ui.create.group.add.directions\')}}</p>\n          <div class="select-all">\n            <input type="checkbox" id="select-all-students" disabled>\n            <label for="select-all-students">{[ selectAllMessage() ]}</label>\n          </div>\n          <div id="students" class="main modal-node-tree items dialog-fix span12"></div>\n        {% } %}\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.abbr_submit\') }}" />\n  </div>\n</div>\n');
window.JST["common/dialogs/group/group_management_layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.course_group.\' + mode) }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>  \n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    {[ helpMessageIfAvailable() ]}\n    \x3c!-- Form --\x3e\n    <div id="create-node-fields" class="main span12">\n      <form class="form-small">\n        <div class="control-group">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.create.group.name\') }}</label>\n          <div class="controls">\n            <input name="name" type="text" maxlength="{{gon.limits.group.name}}" value="{{ name }}" autofocus />\n          </div>\n        </div>\n        <div class="control-group header-button">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.create.group.parent\') }}</label>\n          <div class="controls">\n            <input type="text" name="" value="{{ parentName }}" readonly />\n            <input type="hidden" name="parent_id" value="{{ parentId }}" />\n          </div>\n        </div>\n        {% if (hasToShowStudentList) { %}\n          <p>{{ I18n.t(\'ui.create.group.add.directions\')}}</p>\n          <div class="select-all">\n            <input type="checkbox" id="select-all-students" disabled>\n            <label for="select-all-students">Select all</label>\n          </div>\n          <div id="students" class="main modal-node-tree items dialog-fix span12"></div>\n        {% } %}\n      </form>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid">\n    <div class="span12">\n      <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n      <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.abbr_submit\') }}" />\n    </div>\n  </div>\n</div>\n');
window.JST["common/dialogs/info_icon_dialog"]=_.template('<div class="modal-wrapper">\n  <div class="modal-body" id="group-assignments">\n    <div class="row-fluid">\n      <div class="info-tooltip-content">\n        {% if(hasHeader) { %}\n          <p>\n            <strong>{{ header }}</strong>\n          </p>\n        {% } %}\n\n        {[ text_markup ]}\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <div class="row-fluid">\n      <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.close\') }}</a>\n    </div>\n  </div>\n</div>\n');
window.JST["common/dialogs/interactive"]=_.template('<iframe allowtransparency="true" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>');window.JST["common/dialogs/preview/users/no_students"]=_.template('<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">\u00d7</a>\n    <h3 id="name"></h3>\n  </div>\n  \n  <form class="form-vertical">\n\n    <div class="preview-fix">\n\n      <div class="preview-body">\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/first_name">\n          <label class="control-label" for="first_name">{{ I18n.t(\'ui.users.first_name\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/first_name\')) { %}\n            <input class="input-xxlarge" name="first_name" id="first_name" type="text" maxlength="{{gon.limits.user.first_name}}" />\n            {% } else { %}\n            <span id="first_name"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/last_name">\n          <label class="control-label" for="last_name">{{ I18n.t(\'ui.users.last_name\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/last_name\')) { %}\n            <input class="input-xxlarge" name="last_name" id="last_name" type="text" maxlength="{{gon.limits.user.last_name}}" />\n            {% } else { %}\n            <span id="last_name"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/email">\n          <label class="control-label" for="email">{{ I18n.t(\'ui.users.email\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/email\')) { %}\n            <input class="input-xxlarge" name="email" id="email" type="text" maxlength="{{gon.limits.user.email}}" />\n            {% } else { %}\n            <span id="email"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/username">\n          <label class="control-label" for="username">{{ I18n.t(\'ui.users.username\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/username\')) { %}\n            <input class="input-xxlarge" name="username" id="username" type="text" maxlength="{{gon.limits.user.username}}" />\n            {% } else { %}\n            <span id="username"></span>\n            {% } %}\n          </div>\n        </div>\n\n        {% if (!isNew && isTeacher && Osp.profile.isAdministrator() ) { %}\n        <div class="control-group online-help-block" data-restricted data-action="write" data-permissions="users/preview/password/teacher">\n          <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n          <div class="controls">\n            <input class="input-xlarge" name="reset_password" id="reset_password" type="checkbox" />\n          </div>\n        </div>\n        {% } %}\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/courses">\n          <label class="control-label" for="courseNames">{{ I18n.t(\'ui.users.courses\') }}</label>\n          <div class="controls">\n            <span>{{courseNames}}</span>\n          </div>\n        </div>\n\n\n      </div>\n\n      <div class="preview-footer" data-restricted data-action="show" data-permissions="users/preview/save">\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n      </div>\n      \n    </div>\n  </form>\n');
window.JST["common/dialogs/preview/users/students"]=_.template('<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">\u00d7</a>\n    <h3 id="name"></h3>\n  </div>\n  \n  <form class="form-vertical">\n\n    <div class="preview-fix">\n\n      <div class="preview-body">\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/first_name">\n          <label class="control-label" for="first_name">{{ I18n.t(\'ui.users.first_name\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/first_name\')) { %}\n            <input class="input-xxlarge" name="first_name" id="first_name" type="text" maxlength="{{gon.limits.user.first_name}}" />\n            {% } else { %}\n            <span id="first_name"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/last_name">\n          <label class="control-label" for="last_name">{{ I18n.t(\'ui.users.last_name\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/last_name\')) { %}\n            <input class="input-xxlarge" name="last_name" id="last_name" type="text" maxlength="{{gon.limits.user.last_name}}" />\n            {% } else { %}\n            <span id="last_name"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/email">\n          <label class="control-label" for="email">{{ I18n.t(\'ui.users.email\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/email\')) { %}\n            <input class="input-xxlarge" name="email" id="email" type="text" maxlength="{{gon.limits.user.email}}" />\n            {% } else { %}\n            <span id="email"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/username">\n          <label class="control-label" for="username">{{ I18n.t(\'ui.users.username\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/username\')) { %}\n            <input class="input-xxlarge" name="username" id="username" type="text" maxlength="{{gon.limits.user.username}}" />\n            {% } else { %}\n            <span id="username"></span>\n            {% } %}\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/userid">\n          <label class="control-label" for="userid">{{ I18n.t(\'ui.users.userid\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'users/preview/userid\')) { %}\n            <input class="input-xxlarge" name="userid" id="userid" type="text" maxlength="{{gon.limits.user.userid}}" />\n            {% } else { %}\n            <span id="userid"></span>\n            {% } %}\n          </div>\n        </div>\n\n        {% if (!isNew) { %}\n        <div class="control-group online-help-block" data-restricted data-action="write" data-permissions="users/preview/password/{{ type.toLowerCase() }}">\n          <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n          <div class="controls">\n            <input class="input-xlarge" name="reset_password" id="reset_password" type="checkbox" />\n          </div>\n        </div>\n        {% } %}\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/courses">\n          <label class="control-label" for="courseNames">{{ I18n.t(\'ui.users.courses\') }}</label>\n          <div class="controls">\n            <span>{{courseNames}}</span>\n          </div>\n        </div>\n\n        <div class="control-group" data-restricted data-action="read" data-permissions="users/preview/groups">\n          <label class="control-label" for="groups">{{ I18n.t(\'ui.users.groups\') }}</label>\n          <div class="controls">\n            <span>{{groupNames}}</span>\n          </div>\n        </div>\n\n      </div>\n\n      <div class="preview-footer" data-restricted data-action="show" data-permissions="users/preview/save">\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n      </div>\n\n    </div>\n  </form>\n');
window.JST["common/filter"]=_.template('<a href="#">\n  <i class="icon-{{ name }}"></i>\n  <span>{{ I18n.t(\'ui.filters.\' + name) }}</span>\n</a>\n');window.JST["common/image_dialog"]=_.template('<div class="modal-header">\n  <h3>{{ title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body"></div>\n');
window.JST["common/image_viewer"]=_.template('<a href="{{ url }}"></a>');window.JST["common/list/action"]=_.template("{[ I18n.t('ui.actions.' + name) ]}");window.JST["common/list/student"]=_.template('<a href="#" class="select" title="{{ name }}">\n  <input type="checkbox" name="group[student_ids][]" value="{{ id }}" {{ checkedCreate ? \'checked="checked"\' : \'\' }} >\n  <span>{{ last_name }}, {{ first_name }}</span>\n</a>');window.JST["common/list/table"]=_.template('<div class="head-wrapper"></div>\n<div class="height-fix" tabindex="-1">\n  <div class="body-wrapper"></div>\n</div>');
window.JST["common/no_contents"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {{ I18n.t(\'ui.common.nocontents\') }}\n  </span>\n</div>\n');window.JST["common/no_file_content"]=_.template("<span>{{ I18n.t('ui.assignments.no_file_uploaded') }}</span>");window.JST["common/numbered_pagination"]=_.template('{% if(totalRecords > 0) {  %} \n  <div class="pagination">\n    <p>{[ I18n.t(\'ui.pagination.displaying.long\', {start: startRecord, end: endRecord, total: totalRecords}) ]}</p>\n    <ul class="btn-group">\n      <li>\n        <a aria-label="previous page" href="#" class="btn prev{% if(!prev) { %} disabled {% } %}" tabindex="{{prev ? \'0\' : \'-1\'}}">\u00ab</a>\n      </li>\n\n      {% _(pageItems()).each(function(label) { %}\n        <li>\n          <a href="#" class="{{pageClass(label, \'btn go-to\')}}">{{label}}</a>\n        </li>\n      {% }) %}\n\n      <li>\n        <a aria-label="next page"href="#" class="btn next{% if(!next) { %} disabled {% } %}" tabindex="{{next ? \'0\' : \'-1\'}}">\u00bb</a>\n      </li>\n    </ul>\n    <select class="btn">\n      {% _(perPageOptions).each(function(val) { %}\n        <option value="{{val}}" {{ perPage == val ? \'selected\' : \'\' }}>{{val}}</option>\n      {% }) %}\n    </select>\n    <span>{{I18n.t(\'ui.pagination.per_page\')}}</span>\n  </div>\n{% } %}');
window.JST["common/pagination"]=_.template("{% if (currentPage < totalPages) { %}\n  <div class='infinite-pagination pagination-centered'>\n    <a href=\"#\" class=\"btn long servernext\">{{ I18n.t('ui.pagination.show_more') }}</a>\n  </div>\n{% } %}");window.JST["common/print_dialog"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.common.print_title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div id="print-contents" class="row-fluid"></div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input type=\'submit\' class="btn btn-primary" value="{{ I18n.t(\'ui.common.print\') }}" />\n  </div>\n</div>\n');
window.JST["common/remote_dialog"]=_.template('<div class="modal-header">\n  <h3>{{ title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body"></div>\n\n<div class="modal-footer">\n  <div class="row-fluid"></div>\n</div>\n');window.JST["common/search"]=_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-options">\n      </div>\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{I18n.t(\'ui.search.resources.placeholder\')}}" value="{{query}}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n  <button type="submit" class="btn btn-advanced-search btn-default">{{I18n.t(\'ui.search.submit\')}}</button>\n\n  <div id="search-advanced-options" class="btn-group">\n    <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n      {{I18n.t(\'ui.search.advanced\')}}\n      <span class="caret"></span>\n    </a>\n    <div class="dropdown-menu">\n      <div class="container-fluid">\n        <div class="row-fluid" id="advanced-search-options"></div>\n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["common/simple_pagination"]=_.template('{% if(totalRecords > 0) {  %} \n  <div class="pagination-simple">\n    <span>{{I18n.t(\'ui.pagination.displaying.simple.title\')}}</span>\n    <a href="#" class="prev{% if(!prev) { %} disabled {% } %}">\u00ab</a>\n    <span>{[ I18n.t(\'ui.pagination.displaying.simple.pages\', {start: startRecord, end: endRecord, total: totalRecords}) ]}</span>\n    <a href="#" class="next{% if(!next) { %} disabled {% } %}">\u00bb</a>\n  </div>\n{% } %}');window.JST["common/success_dialog"]=
_.template('<div class="modal-header">\n  <h3>{{ title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body" id="group-assignments">\n  <div class="row-fluid">\n    {[ message ]}\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid"></div>\n</div>\n');
window.JST["common/table"]=_.template('<div class="head-wrapper"></div>\n<div class="body-wrapper"></div>\n<div class="pagination-wrapper"></div>');window.JST["common/tree"]=_.template('<div class="controls">\n  {% if (leaf) { %}\n    <span class="toggle">\n      <i class="tree-icon-{{ icon() }}"></i>\n    </span>\n  {% } else { %}\n    <a href="#" class="toggle">\n      <i class="tree-icon-{{ icon() }}"></i>\n    </a>\n  {% } %}\n  {% if (checkboxName) { %}\n    <input type="checkbox" name="{{ checkboxName }}" value="{{ id }}" />\n  {% } %}\n  <a href="#" class="select {{ unpurchasedClassIfNotAvailable() }}" title="{{ title() }}">\n    {% if (nodeTypeIcon){ %} \n      <i class="{{ nodeTypeIcon }}"></i> \n    {% } %}\n    <span class="math-formula">{[ lookable_name ]}</span>\n  </a>\n</div>\n<ul class="nav nav-list children"></ul>\n');
window.JST["common/tree_layout"]=_.template('<div id="structures"></div>\n\n<div id="filters"></div>\n');window.JST["common/users_lens_no_contents"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {[ message ]}\n  </span>\n</div>\n');window.JST["course/assignments/assign/assigment_list_container"]=_.template('<div id="assignmentListContainer" class="items">\n  <div class="selectDeselectAll controls item"></div>\n  <div class="assignmentList"></div>\n</div>');window.JST["course/assignments/assign/assignments_layout"]=
_.template('<h4>{{ I18n.t(\'ui.assignments.test_material\') }}</h4>\n<div id="assignments" class="items"></div>');window.JST["course/assignments/assign/content"]=_.template('<span class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</span>\n<span class="span11">\n  <a class="name math-formula">{[ name ]}</a>\n</span>\n<input type="hidden" name="assignment[content_ids][]" value="{{ id }}" />\n');window.JST["course/assignments/assign/layout"]=_.template('<form class="form-horizontal form-big row-fluid" id="assign-form">\n  <div class="modal-header">\n    <h3>{{ I18n.t(\'ui.assign.title\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="modal-body">\n\n    \x3c!-- Left content --\x3e\n    <div id="general" class="row-fluid span7">\n\n      <div class="control-group">\n        <label class="control-label" for="assignment_name">\n          {{ I18n.t(\'ui.assign.description.title\')  }}\n        </label>\n        <div class="controls">\n          <input name="assignment[name]" id="assignment_name" type="text" value="{{ name }}" maxlength="{{gon.limits.assignment.name}}" />\n        </div>\n      </div>\n\n      <div class="control-group">\n        <label class="control-label" for="assignment_description">{{ I18n.t(\'ui.assignments.instructions\') }}</label>\n        <div class="controls">\n          <textarea id="assignment_description" name="assignment[description]" rows="3" maxlength="{{gon.limits.assignment.description}}">{{ description }}</textarea>\n        </div>\n      </div>\n\n      \x3c!-- Assignment Mode --\x3e\n      \x3c!-- Uncomment when Practice assignments are enabled again --\x3e\n      \x3c!--\n      <div class="control-group">\n        <label class="control-label" for="assignment_mode">{{ I18n.t(\'ui.assign.info.mode.label\')  }}</label>\n        <div class="controls">\n          <select name="assignment[mode]">\n            <option value="1">{{ I18n.t(\'ui.assign.info.mode.test\') }}</option>\n            {% if (enablePractice) { %}\n              <option value="2">{{ I18n.t(\'ui.assign.info.mode.practice\')  }}</option>\n            {% } %}\n          </select>\n        </div>\n      </div>\n      --\x3e\n\n      \x3c!-- Assignment availability dates --\x3e\n      <div class=\'row-fluid\' id="assign-dates">\n        <div class=\'control-group span6\'>\n          <label class=\'control-label\' for="assignment_start">{{ I18n.t(\'ui.assign.info.start\') }}</label>\n          <div class="controls">\n            <input type="text" class="datepick" id="assignment_start" value="{{ serverDate(start,\'\') }}" placeholder="{{ I18n.t(\'ui.date.placeholder\') }}" name="assignment[start]" />\n          </div>\n        </div>\n        <div class=\'control-group span6\'>\n          <label class=\'control-label\' for=\'assignment_due\'>{{ I18n.t(\'ui.assign.info.due\') }}</label>\n          <div class="controls">\n            <input type="text" class="datepick" id="assignment_due" name="assignment[due]" value="{{ serverDate(due,\'\') }}" placeholder="{{ I18n.t(\'ui.date.placeholder\') }}"/>\n          </div>\n        </div>\n      </div>\n\n      <div id="content-assignment" class="row-fluid">\n        <div class=\'list-wrapper dialog-fix\'>\n          \x3c!-- Content assignments area --\x3e\n          <div id="assignments-layout">\n            \x3c!-- <div class="loader"></div> --\x3e\n          </div>\n          <hr/>\n          <div id="resources-layout">\n            \x3c!-- <div class="loader"></div> --\x3e\n          </div>\n        </div>\n      </div>\n\n    </div>\x3c!-- END Left content --\x3e\n\n\n\n    \x3c!-- Groups and students --\x3e\n    <div id="groups-and-students" class="span5">\n      <ul class="nav nav-tabs">\n        <li class="active">\n          <a href="#groups-pane" data-toggle="tab">\n            <span>{{ I18n.t(\'ui.assignments.groups\') }}</span>\n          </a>\n        </li>\n        <li>\n          <a href="#students-pane" data-toggle="tab">\n            <span>{{ I18n.t(\'ui.assignments.students\') }}</span>\n          </a>\n        </li>\n      </ul>\n      <div class="tab-content">\n        \x3c!-- Assigned to --\x3e\n        <div class="tab-pane active" id="groups-pane">\n          <div class="control-group">\n            <div class="controls">\n              <div id="assign-groups" class="main modal-node-tree dialog-fix">\n                <div class="loader"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="tab-pane" id="students-pane">\n          <div class="control-group">\n            <div class="controls">\n              <div id="assign-students" class="main modal-node-tree items dialog-fix">\n                <div class="loader"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <div class="row-fluid">\n      <div class="span12">\n        <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.assign.submit\') }}" />\n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["course/assignments/assign/nostudent"]=_.template("<span>{{ I18n.t('ui.assignments.nostudents') }}</span>");window.JST["course/assignments/assign/resources_layout"]=_.template('{% if (hasResourcesPanel) { %}\n  <button class="btn">{{ I18n.t(\'ui.assign.resources.button\') }}</button>\n{% } %}\n\n<h4>{{ I18n.t(\'ui.assign.resources.title\') }}</h4>\n<div id="resources" class="items">\n  \x3c!-- <div class="loader"></div> --\x3e\n</div>');window.JST["course/assignments/assign/select_deselect_all"]=
_.template('<div class="items allSelectionCont">\n  <span>Select/Deselect All</span>\n  <input type="checkbox" name="assignment_all" id="selectDeselectStudents" value="all" {{ allChecked ? \'checked="checked"\' : \'\' }} >\n</div>');window.JST["course/assignments/assign/student"]=_.template('<a href="#" class="select" title="{{ name }}">\n  <input type="checkbox" name="assignment[student_ids][]" value="{{ id }}" {{ checkedAssign ? \'checked="checked"\' : \'\' }} >\n  <span>{{ last_name }}, {{ first_name }}</span>\n</a>');
window.JST["course/assignments/list/head"]=_.template('<div class="row-fluid header-fix">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n    <span>\n      &nbsp;\n    </span>\n    <span>\n      &nbsp;\n    </span>\n  </span>\n  <span id="name-sort" class="header span5 sortable" data-sortable-attribute=\'name\'>\n    {{ I18n.t(\'ui.browser.name\') }}\n  </span>\n  <span id="resource-sort" class="header span2 center-align sortable" data-sortable-attribute=\'used_as\'>\n    {{ I18n.t(\'ui.assignments.resource\') }}\n  </span>  \n  <span id="activity_type-sort" class="header span2 sortable" data-sortable-attribute="activity_type">\n    {{ I18n.t(\'ui.assignments.activity_type\') }}\n  </span>\n  <span id="source" class="header span2 sortable" data-sortable-attribute=\'sortable_source\'>\n    {{ I18n.t(\'ui.browser.source\') }}\n  </span>\n</div>\n');
window.JST["course/assignments/list/item"]=_.template('<div class="row-fluid contentitem_{{id}}">\n  <div class="icons span1">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <a href="#" class="star" aria-label="{{ favouritesLabel() }}">\n      <i class="icon-{{ !starred ? \'star-empty\' : \'star-full\' }}"></i>\n      <span class="sr-only">{{ favouritesLabel() }}</span>\n    </a>\n    <span class="format">\n      {% if(_.include([Osp.Content.SUPPORT, Osp.Content.TEST], used_as)) { %}\n        <i class="icon icon-{{ format }}"></i>\n      {% } else { %}\n        <i class="icon icon-package-assignment"></i>\n      {% } %}\n    </span>\n  </div>\n  <div class="reference span5">\n    <a href="#" class="name math-formula">\n      {{ name }}\n    </a>\n    {% if (is_new) { %}\n      <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n    {% if (is_updated) { %}\n      <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n    <div class="description">\n      <span class=\'math-formula\'>{[ lookable_description ]}</span>\n    </div>\n  </div>\n  <div class="span2 type-column vertical-span-fix">\n    <i>{{ used_as_string }}</i>\n    <div class="assignment-pool-control"></div>\n  </div>\n  <div class="span2 vertical-span-fix">\n    {{ preventBlank(activity_type) }}\n  </div>\n  <div class="span2 vertical-span-fix">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/assignments/list/layout"]=_.template('<div class="holder">\n  <div class="pagination-wrapper upper with-options"></div>\n  <div id="options" class="upper">\n    \x3c!--div class="loader"></div--\x3e\n  </div>  \n\n  <div class="clear">\n    <div id="actions" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n    <div id="assignment_pool"></div>\n  </div>\n\n  <div class="holder">\n  \n    <div id="contents">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n    <div id="preview">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n\n  </div>\n</div>\n');
window.JST["course/assignments/list/options"]=_.template('{% if (can(\'show\', \'resources/details\') && totalRecords > 0) { %}\n  {% if (hideDescriptions) { %}\n  <input type="checkbox" id="toggle_description" class="check" checked="checked" />\n  {% } else { %}\n  <input type="checkbox" id="toggle_description" class="check" />\n  {% } %}\n  <label for="toggle_description" class="check_holder">{{ I18n.t(\'ui.common.descriptions-hide\') }}</label>\n{% } %}');window.JST["course/assignments/list/preview"]=
_.template('<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">&nbsp;</a>\n    <h3 class="math-formula">{[ lookable_name ]}</h3>\n  </div>\n\n\n{% if (may_edit) { %}\n  <form class="form-vertical">\n{% } %}\n\n  <div class="preview-fix">\n    <div class="preview-body">\n\n      <div id="preview_image">\n        <div class="loader"></div>\n        <img id="thumbnail" src="/images/no_thumb.png" style="display:none"/>\n      </div>\n\n      {% if (url) { %}\n      <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/url">\n        <label class="control-label" for="url">{{ I18n.t(\'ui.upload.form.url\') }}</label>\n        <div class="controls">\n          <textarea class="input-xxlarge" name="url"></textarea>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (may_edit && !usedAsBlueprint) { %}\n        <div class="control-group" data-restricted data-action="write" data-permissions="assignments/preview/name">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.browser.name\') }}</label>\n          <div class="controls">\n            <textarea class="input-xxlarge" name="name" maxlength="{{gon.limits.content.name}}"></textarea>\n          </div>\n        </div>\n      {% } %}\n\n\n      {% if (can(\'read\', \'assignments/preview/description\') && !usedAsBlueprint) { %}\n        {% if (description && description.length > 0) { %}\n          <div class="control-group">\n            <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n              <div class="controls">\n              {% if (can(\'write\', \'assignments/preview/description\') && may_edit) { %}\n                <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n              {% } else { %}\n                <span class="math-formula">{[ lookable_description ]}</span>\n              {% } %}\n              </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="write" data-permissions="assignments/preview/description">\n            <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      {% if (location && location.length > 0 && isTeacherContent) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/location">\n        <label class="control-label" for="location">{{ I18n.t(\'ui.browser.location\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ location ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'assignments/preview/activity_type\')) { %}\n        {% if (activity_type && activity_type.length > 0) { %}\n          <div class="control-group">\n            <label class="control-label" for="activity_type">{{ I18n.t(\'ui.assignments.activity_type\') }}</label>\n            <div class="controls">\n              {% if (can(\'write\', \'assignments/preview/activity_type\') && may_edit) { %}\n              <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n              {% } else { %}\n              \t<span class="math-formula">{[ activity_type ]}</span>\n              {% } %}\n              </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="write" data-permissions="assignments/preview/activity_type">\n            <label class="control-label" for="activity_type">{{ I18n.t(\'ui.assignments.activity_type\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n\n\n      {% if (format && format.length > 0 && !usedAsBlueprint) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/format">\n        <label class="control-label" for="format">{{ I18n.t(\'ui.browser.format\') }}</label>\n        <div class="item">\n          <div class="icons">\n            <div class="format controls">\n              <i class="icon icon-{{ format }}"></i><span>&nbsp;{{format}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (test_name && test_name.length > 0 && usedAsBlueprint) { %}\n        <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/test_name">\n          <label class="control-label" for="test_name">{{ I18n.t(\'ui.assignments.used_as.1\') }}</label>\n          <div class="controls">\n            <span>{{test_name}}</span>\n          </div>\n        </div>\n      {% } %}\n\n      {% if (contents && contents.length > 0 && usedAsBlueprint) { %}\n        <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/contents">\n          <label class="control-label" for="contents">{{ I18n.t(\'ui.assignments.support_material\') }}</label>\n          <div class="controls">\n            <span>{{contents}}</span>\n          </div>\n        </div>\n      {% } %}\n\n      {% if (source && source.length > 0) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/source">\n        <label class="control-label" for="source">{{ I18n.t(\'ui.browser.source\') }}</label>\n        <div class="controls">\n          <span>{{source}}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'assignments/preview/keywords\') ) { %}\n        <div class="control-group" {% if (may_edit) { %} data-restricted data-action="write" data-permissions="assignments/preview/keywords"{% } %}>\n          <label class="control-label" for="keywords">{{ I18n.t(\'ui.browser.keywords\') }}</label>\n          <div class="controls">\n            {% if (can(\'write\', \'assignments/preview/keywords\') && may_edit) { %}\n            <textarea class="input-xxlarge" name="keywords" maxlength="{{gon.limits.content.keywords}}"></textarea>\n            {% } else { %}\n              <span class="math-formula">{[ keywords ]}</span>\n            {% } %}\n          </div>\n        </div>\n      {% } %}\n\n      {% if (file_ext && file_ext.length > 0) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="assignments/preview/file_ext">\n        <label class="control-label" for="file_ext">{{ I18n.t(\'ui.browser.file_ext\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ file_ext ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'assignments/preview/used_as\')) { %}\n        <div class="control-group">\n          <label class="control-label" for="used_as">{{ I18n.t(\'ui.assignments.function\') }}</label>\n          <div class="controls">\n          {% if (can(\'write\', \'assignments/preview/used_as\') && may_edit) { %}\n            <select id="used_as" name="used_as">\n              <option value="0">Support</option>\n              <option value="1">Test</option>\n            </select>\n          {% } else { %}\n          \t<span class="math-formula">{[ used_as_string ]}</span>\n          {% } %}\n          </div>\n        </div>\n      {% } %}\n\n      <div id="points_field" class="control-group" data-restricted data-action=\'read\' data-permissions=\'assignments/preview/points\' style=\'display: {{ usedAsTest ? \'block\' : \'none\'}};\'>\n        <label class="control-label" for="points">{{ I18n.t(\'ui.upload.form.points\') }}</label>\n        <div class="controls">\n          {% if (can(\'write\', \'assignments/preview/used_as\') && may_edit) { %}\n            <input name="points" id="points" type="number" min="0" class="row-fluid" />\n          {% } else { %}\n            <span class="math-formula">{[ points ]}</span>\n          {% } %}\n        </div>\n      </div>\n\n    </div>\n\n    <div class="preview-footer">\n      {% if (may_edit) { %}\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n      </form>\n      {% } %}\n    </div>\n  </div>\n</div>\n');
window.JST["course/assignments/list/print"]=_.template('<td class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</td>\n<td class="reference span5">\n  <span class="name math-formula">\n      {[ name ]}\n  </span>\n  <div class="description">\n    <span class=\'math-formula\'>{[ lookable_description ]}</span>\n  </div>\n</td>\n<td class="span2">\n  <i>{{ used_as_string }}</i>\n</td>\n<td class="span2">\n  {{ activity_type }}\n</td>\n<td class="span2">\n  {{ source }}\n</td>\n');
window.JST["course/assignments/list/print_layout"]=_.template("<table class='table'>\n  <thead>\n    <th class=\"icons span1\"></th>\n    <th class=\"header span5\">{{ I18n.t('ui.browser.name') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.assignments.resource') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.assignments.activity_type') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.browser.source') }}</th>\n  </thead>\n  <tbody></tbody>\n</table>");window.JST["course/assignments/list/user"]=
_.template('<div class="row-fluid useritem_{{id}}">\n  <div class="icons span1">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <span class="format">\n      <i class="icon icon-delegate-assignment"></i>\n    </span>\n  </div>\n  <div class="reference span7">\n    <a href="#" class="name math-formula">{[ name ]}</a>\n  </div>\n  \x3c!-- Uncomment when implemented --\x3e\n  \x3c!-- <div class="span2 center-align">\n    {% if (num_messages == 0) { %}\n     -\n    {% }else{ %}\n      <font class="orange">{{ num_messages }}</font>\n    {% } %}\n  </div> --\x3e\n  <div class="span2 center-align vertical-span-fix {% if (due < today) { %} passed {% } %}">\n    {{ humanizeDate(due) }}\n  </div>\n  <div class="span2 center-align progress_holder last-column">\n    <div>\n      {{ progress }}\n    </div>\n  </div>\n</div>\n');
window.JST["course/assignments/list/user_head"]=_.template('<div class="row-fluid">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n  </span>\n  <span class="header span7 sortable" id="name-sort" data-sortable-attribute="name">\n    {{ I18n.t(\'ui.markbook.title\') }}\n  </span>\n  \x3c!-- Uncomment when implemented --\x3e\n  \x3c!-- <span class="header span2 center-align">\n    {{ I18n.t(\'ui.markbook.messages\') }}\n  </span> --\x3e\n  <span class="header span2 center-align sortable" id="due-sort" data-sortable-attribute="due">\n    {{ I18n.t(\'ui.markbook.due_date\') }}\n  </span>\n  <span class="header span2 score-info center-align last-column">\n    {{ I18n.t(\'ui.markbook.progress\') }}\n  </span>\n</div>\n');
window.JST["course/assignments/list/user_options"]=_.template('<div class="btn-group">\n  <div class=\'btn dropdown-toggle\'>\n    \x3c!--input type="checkbox" id="practice_only" class="check" />\n    <label for="practice_only" class="check_holder">{{ I18n.t(\'ui.assignments.show_practice_only\') }}</label--\x3e\n  </div>\n</div>');window.JST["course/assignments/search"]=_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-options">\n        {% if (!_.isBlank(type)) { %}\n          <div class="type" data-value="{{type}}" data-term="type">\n            {{formatNameFor(type)}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(source)) { %}\n          <div class="source" data-value="{{source}}" data-term="source">\n            {{sourceNameFor(source)}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(used_as)) { %}\n          <div class="used_as" data-value="{{used_as}}" data-term="used_as">\n            {{usedAsNameFor(used_as)}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(new_contents)) { %}\n          <div class="new_contents" data-value="{{new_contents}}" data-term="new_contents">\n            {{I18n.t(\'ui.browser.new_content\')}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(updated_contents)) { %}\n          <div class="updated_contents" data-value="{{updated_contents}}" data-term="updated_contents">\n            {{I18n.t(\'ui.browser.updated_content\')}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n      </div>\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" value="{{query}}" class="advanced-search-query" placeholder="{{I18n.t(\'ui.search.assignments.placeholder\')}}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n\n  <button type="submit" class="btn btn-advanced-search btn-default">{{I18n.t(\'ui.search.submit\')}}</button>\n\n  <div id="search-advanced-options" class="btn-group">\n    <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n      {{I18n.t(\'ui.search.advanced\')}}\n      <span class="caret"></span>\n    </a>\n    <div class="dropdown-menu">\n      <div class="container-fluid">\n        <div class="row-fluid" id="advanced-search-options">\n          <div class="span6" id="search-type">\n            <dl>\n              <dt>{{ I18n.t(\'ui.search.type\') }}</dt>\n              {% _(formats).each(function (item) { %}\n                <dd>\n                  <span class="format">\n                    <i class="icon icon-{{item.name}}"></i>\n                  </span>\n                  <a href="#" data-value="{{item.name}}" data-term=\'type\'>{{formatNameFor(item.name)}}</a>\n                </dd>\n              {% }) %}\n            </dl>\n          </div>\n          <div class="span6" id="search-source">\n            <dl>\n              <dt>{{ I18n.t(\'ui.search.source\') }}</dt>\n              <dd><a href="#" data-value="oup" data-term=\'source\'>{{sourceNameFor(\'oup\')}}</a></dd>\n              <dd><a href="#" data-value="other" data-term=\'source\'>{{sourceNameFor(\'other\')}}</a></dd>\n              <dd><a href="#" data-value="{{userId}}" data-term=\'source\'>{{sourceNameFor(userId)}}</a></dd>\n            </dl>\n          </div>\n          <div class="span6">\n            <dl id="search-used-as">\n              <dd>\n              <a href="#" data-value="{{usedAsSupport}}" data-term=\'used_as\'>{{usedAsNameFor(usedAsSupport)}}</a>\n              </dd>\n              <dd>\n              <a href="#" data-value="{{usedAsTest}}" data-term=\'used_as\'>{{usedAsNameFor(usedAsTest)}}</a>\n              </dd>\n              <dd>\n              <a href="#" data-value="{{usedAsTestPackage}}" data-term=\'used_as\'>{{usedAsNameFor(usedAsTestPackage)}}</a>\n              </dd>\n            </dl>\n\n            <a href="#" data-value="true" data-term="new_contents" class="new-contents-anchor">\n              <span class="format">\n                <i class="icon icon-document"></i>\n              </span>\n              {{I18n.t(\'ui.browser.new_content\')}}\n            </a>\n\n            <a href="#" data-value="true" data-term="updated_contents" class="updated-contents-anchor">\n              <span class="format">\n                <i class="icon icon-document"></i>\n              </span>\n              {{I18n.t(\'ui.browser.updated_content\')}}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["course/assignments/student/header"]=_.template('<div class="assignments__lensFilters"></div>\n\n<div class="assignments__search"></div>\n\n<div class="assignments__filters"></div>\n\n');window.JST["course/assignments/student/layout"]=_.template('<div class="section__wrapper">\n  <div class="section__header"></div>\n  <div class="section__body"></div>\n</div>\n<div class="assignmentPanel"></div>\n<div role="status" class="a11y-hide">\n  <p class="hide-when-not-empty">No assignments found. You have no assignments to complete at the moment.</p>\n</div>');
window.JST["course/assignments/student_assignment/buttons"]=_.template('\x3c!-- TODO Bad smell: duplicated code. refactor status checkings --\x3e\n{% if(Osp.Markbook.isUnfinished(status) && can(\'write\', \'assignments/form/content_student\') && !isPractice && !is_due && !isInteractive) { %}\n\n  <a id="save-content" href="#" class="button button--primary student-button">{{ I18n.t(\'ui.common.save_and_close\') }}</a>\n  <a id="submit-content" href="#" class="button button--primary student-button">{{ I18n.t(\'ui.assignments.submit\') }}</a>\n\n{% } else if(can(\'write\', \'assignments/form/mark\') && (!Osp.Markbook.isUnfinished(status) || is_due)) { %}\n  <a href="#" class="button button--primary teacher-button">{{ I18n.t(\'ui.common.submit\') }}</a>\n{% } %}');
window.JST["course/assignments/student_assignment/content"]=_.template('<span class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</span>\n<span class="span7">\n  <a class="name">{[ name ]}</a>\n</span>\n{% if(!finished) { %}\n<span class="span4">\n  <button class="btn remove">\n    <i class="icon-trash"></i>\n    {{ I18n.t("ui.actions.delete") }}\n  </button>\n</span>\n{% } %}\n');window.JST["course/assignments/student_assignment/form"]=_.template('<form class="form-horizontal form-big row-fluid standard-controls" {% if(Osp.Markbook.isUnfinished(status) && can(\'write\', \'assignments/form/content_student\')) { %} method="POST" enctype="multipart/form-data" action="/student_assignments"{% } %}>\n  <div id="general" class="span7">\n    <div class=\'list-wrapper\'>\n      <h3>{{ I18n.t(\'ui.assignments.assignment_info\') }}</h3>\n      <div id="assignment-info">\n        <div id="descriptor-and-teacher" class=\'span7\'>\n          <div class="control-group">\n            <label class="control-label">{{ I18n.t(\'ui.assignments.activity_type\') }}:</label>\n            <div class="controls">{{ activity_type }}</div>\n          </div>\n          <div class="control-group">\n            <label class="control-label">{{ I18n.t(\'ui.assignments.assigned_by\') }}:</label>\n            <div class="controls">\n              {{ teacher }}\n            </div>\n          </div>\n        </div>\n        <div id="dates" class=\'span5\'>\n          <div class="control-group">\n            <label class="control-label">{{ I18n.t(\'ui.assignments.available_from\') }}:</label>\n            <div class="controls">{{ humanizeDate(start) }}</div>\n          </div>\n          <div class="control-group">\n            <label class="control-label">{{ I18n.t(\'ui.assignments.available_until\') }}:</label>\n            <div class="controls {{ dueClass }}">{{ humanizeDate(due) }}</div>\n          </div>\n        </div>\n        <div id="instructions" class="control-group">\n          <label class=\'control-label\'>{{ I18n.t(\'ui.assignments.instructions\') }}:</label>\n          <div class="controls">\n            {% if (description) { %}\n              {{ description }}\n            {% } else { %}\n              Not available\n            {% } %}\n          </div>\n        </div>\n      </div>\n      <hr>\n      <div id="content-assignment" class="row-fluid">\n        <div>\n          <h4>{{ I18n.t(\'ui.assignments.test_material\') }}</h4>\n          <div id="test-content" class="contentDialogList"></div>\n        </div>\n        <hr>\n        <div>\n          <h4>{{ I18n.t(\'ui.assignments.support_material\') }}</h4>\n          <div class="contentDialogList" id="support-content"></div>\n        </div>\n      </div>\x3c!-- #content-assignment --\x3e\n\n    </div>\n  </div>\x3c!-- #general --\x3e\n\n  <div id="student-info" class="span5">\n    <div id="student-files-box" class=\'list-wrapper\'>\n      <div id="upload-header" class="row-fluid">\n        <div class="span8">\n          {% if (Osp.profile.isStudent() ){ %}\n            <h3>{{ I18n.t(\'ui.assignments.your_files\') }}</h3>\n          {% } else { %}\n            <h3>{{ I18n.t(\'ui.assignments.student_files\') }}</h3>\n          {% } %}\n        </div>\n        <div class="span4">\n          {% if(Osp.Markbook.isUnfinished(status) && can(\'write\', \'assignments/form/content_student\') && !isPractice && !is_due){ %}\n            <span class="btn pull-right" id="upload-file">{{ I18n.t(\'ui.actions.upload\') }}</span>\n            <input id="file_input" type="file" name="content_file" class="hide" />\n            <input name="retained_content_file" type="hidden" id="retained_content_file" />\n          {% } %}\n        </div>\n      </div>\n      \n      <div class="progress progress-success progress-striped row-fluid hide">\n        <div class="bar"></div>\n      </div>\n      \n      <div id="student-content"></div>\n    </div>\x3c!-- student files --\x3e\n\n    <div id="assignment-manually-box" class=\'list-wrapper\'>\n      {% if (Osp.profile.isStudent() && Osp.Markbook.isUnfinished(status)) {\n        if (isInteractive) { %}\n          <p>{{ I18n.t(\'ui.assignments.digital_handing_label\') }}</p>\n        {% } else { %}\n          <input id="manual_handing" type="checkbox" name="manual_handing" class="check" />\n          <label for="manual_handing" class=\'check_holder\'>{{ I18n.t(\'ui.assignments.manual_handing_label\') }}</label>\n        {% } %}\n      {% } else { %}\n        <p>{{ I18n.t(\'ui.assignments.handing_mode.\' + handingModeStr) }}</p>\n      {% } %}\n    </div>\n\n    <div id="student-mark" class=\'list-wrapper\'>\n      <h3>{{ I18n.t(\'ui.assignments.mark\') }}</h3>\n      \n      {% if ( Osp.profile.isStudent() ){ %}\n        <div class="control-group">\n          <div class="controls">\n            {% if(Osp.Markbook.isUnfinished(status)) { %}\n              <p>{{ I18n.t(\'ui.assignments.unfinished_task\') }}</p>\n              \x3c!-- TODO I think this never get executed, is redundant --\x3e\n            {% } else if (can(\'write\', \'assignments/form/mark\') && (!Osp.Markbook.isUnfinished(status) || is_due)) { %}\n              <input type="number" min="0" max="{{ points }}" required pattern="^d+$" name="mark" class="mark"/> / {{ points }}\n            {% } else if (status == Osp.Markbook.DONE) { %}\n              <p>{{ I18n.t(\'ui.markbook.awaiting_marks\') }}</p>\n            {% } else if (!Osp.Markbook.isUnfinished(status)) { %}\n              <span class="mark">{{ mark }} / {{ points }}\n                <span class="percentage">{{ percentage }}%</span>\n              </span>\n              {% for(var n=0;n < detailed_score.length;n++){ \n                var score = detailed_score[n] %}\n                  <div class="control-group">\n                    <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> {{ I18n.t(\'ui.markbook.marked_as.\'+score[0]) }}: {{score[1]}} / {{ score[2] }}</label>\n                  </div>\n              {% } %}\n            {% } %}            \n          </div>\n        </div>\n      {% } else { %}\n        {% if ( status == Osp.Markbook.MARKED || status == Osp.Markbook.DONE ) { %}\n            <form class="form-horizontal modal-form">\n              <div id="mark-input" class="control-group">\n                <div class="controls">\n                  {% if (_.isNull(detailed_score)){ %}\n                    <input type="number" min="0" max="{{ points }}" required pattern="^d+$" name="mark" /> / {{ points }}\n                  {% } else { %}\n                    {% for(var n=0;n < detailed_score.length;n++){ \n                      var score = detailed_score[n] %}\n                      <br/>\n                      <div class="control-group">\n                        {% if (score[0] == \'auto\' || score[0] == \'a\'){ %}\n                          <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> <span class="red">automarked</span>:</label>\n                          <div class="controls">\n                            <input name="mark_{{n}}" disabled="true" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                          </div>\n                        {% } else { %}\n                          <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> mark:</label>\n                          <div class="controls">\n                            <input name="mark_{{n}}" class="mark-input" data-screen="{{n}}" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                          </div>\n                        {% } %}\n                      </div>\n                    {% } %}\n                  {% } %}\n                </div>\n              </div>\n\x3c!--           <input type="submit" id="mark-submit" class="btn btn-primary" value="{{ I18n.t(\'ui.assignments.submit_marks\') }}" /> --\x3e            \n            </form>\n        {% } else if (Osp.Markbook.isUnfinished(status)) { %}\n          <div class="control-group">\n            <div class="controls">\n              <p>{{ I18n.t(\'ui.markbook.awaiting_response\') }}</p>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n    </div>\n\n  </div>\x3c!-- #student-info --\x3e\n\n</form>');
window.JST["course/assignments/student_assignment/form_student"]=_.template('{% if (showDueMessage) { %}\n<div id="due-message" class="row-fluid">\n  <p>{{ I18n.t(\'ui.assignments.student_assignment.due_message\') }}</p>\n</div>\n{% } %}\n\n<div id="general">\n  <div class=\'list-wrapper\'>\n    <div id="assignment-info" class="span7">\n      <h3>{{ I18n.t(\'ui.assignments.assignment_info\') }}</h3>\n      <div id="descriptor-and-teacher" class=\'span7\'>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.activity_type\') }}:</label>\n          <div class="controls">{{ activity_type }}</div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.assigned_by\') }}:</label>\n          <div class="controls">\n            {{ teacher }}\n          </div>\n        </div>\n      </div>\n      <div id="dates" class=\'span5\'>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.available_from\') }}:</label>\n          <div class="controls">{{ humanizeDate(start) }}</div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.available_until\') }}:</label>\n          <div class="controls {{ dueClass }}">{{ humanizeDate(due) }}</div>\n        </div>\n      </div>\n      <div id="instructions" class="control-group">\n        <label class=\'control-label\'>{{ I18n.t(\'ui.assignments.instructions\') }}:</label>\n        <div class="controls">\n          {% if (description) { %}\n            {{ description }}\n          {% } else { %}\n            Not available\n          {% } %}\n        </div>\n      </div>\n    </div>\n    \n    <div id="content-assignment">\n      <div>\n        <h4>{{ I18n.t(\'ui.assignments.test_material\') }}</h4>\n        <div id="test-content" class="contentDialogList"></div>\n      </div>\n      <hr>\n      <div>\n        <h4>{{ I18n.t(\'ui.assignments.support_material\') }}</h4>\n        <div class="contentDialogList" id="support-content"></div>\n      </div>\n    </div>\x3c!-- #content-assignment --\x3e\n\n  </div>\n</div>\x3c!-- #general --\x3e\n\n\n<div id="student-info">\n  <div id="student-files-box" class="dialog-fix {{ workClass }} list-wrapper">\n    <h3>{{ I18n.t(\'ui.assignments.your_files\') }}</h3>\n\n    {% if(Osp.Markbook.isUnfinished(status) && !isPractice && !is_due && !isInteractive ){ %}\n      <div id="upload-form" data-restricted data-action="write" data-permissions="assignments/form/content_student">\n        <form class="form-horizontal form-big row-fluid" method="POST" enctype="multipart/form-data">\n          <div class="control-group" id="upload-file">\n            <div class="controls" id="upload-controls">\n              <span class="btn pull-right" id="upload-file">{{ I18n.t(\'ui.actions.upload\') }}</span>\n              <input id="file_input" class="file-hidden" type="file" name="content_file" />\n            </div>\n          </div>\n        </form>\n        <input type="submit" class="hide" />\n      </div>\n      \n      <div class="progress progress-success progress-striped row-fluid hide">\n        <div class="bar"></div>\n      </div>\n    {% } %}\n    \n    <div id="student-content"></div>\n\n  </div>\x3c!-- student files --\x3e\n  \n    \n  {% if ( Osp.Markbook.isUnfinished(status) ) { %}\n      {% if (!isInteractive) { %}\n        <div id="manual-handing" class="dialog-fix span5 list-wrapper">\n          <form class="form-horizontal form-big row-fluid" {% if(can(\'write\', \'assignments/form/content_student\')) { %} method="POST" action="/student_assignments"{% } %}>\n            <input type="hidden" name="student_assignment_id" value="{{ student_assignment_id }}"/>\n            <input id="manual_handing" type="checkbox" name="manual_handing" class="check" {% if (manual_handing) { %}checked{% } %} />\n            <label for="manual_handing" class=\'check_holder\'>{{ I18n.t(\'ui.assignments.manual_handing_label\') }}</label>\n            <input type="submit" class="hide" />\n          </form>\n        </div>\n      {% } %}        \n  {% } else { %}\n    <div id="student-mark" class=\'dialog-fix list-wrapper span5 {{ markClass }}\'>\n      <h3>{{ I18n.t(\'ui.assignments.mark\') }}</h3>\n      {% if (status == Osp.Markbook.DONE) { %}\n        <p>{{ I18n.t(\'ui.markbook.awaiting_marks\') }}</p>\n      {% } else { %}\n        <div class="mark">\n        {% if (no_mark) { %}\n        <span>{{ I18n.t(\'ui.assignments.no_marks\') }}</span>\n        {% } else { %}\n          <span>{{ mark }} / {{ points }}\n            <span class="percentage">{{ percentage }}%</span>\n          </span>\n        {% } %}\n        </div>\n\n        {% if (!_.isNull(detailed_score)){ %}\n          {% for(var n=0;n < detailed_score.length;n++){ \n            var score = detailed_score[n] %}\n              <div class="control-group">\n                <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> {{ I18n.t(\'ui.markbook.marked_as.\'+score[0]) }}: {{ score[1] }} / {{ score[2] }}</label>\n              </div>\n          {% } %}            \n        {% } %}\n\n      {% } %}\n    </div>\n  {% } %}\n\n\n</div>\x3c!-- #student-info --\x3e');
window.JST["course/assignments/student_assignment/form_teacher"]=_.template('<div id="general">\n  <div class=\'list-wrapper\'>\n    <div id="assignment-info" class="span7">\n      <h3>{{ I18n.t(\'ui.assignments.assignment_info\') }}</h3>\n      <div id="descriptor-and-teacher" class=\'span7\'>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.activity_type\') }}:</label>\n          <div class="controls">{{ activity_type }}</div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.assigned_by\') }}:</label>\n          <div class="controls">\n            {{ teacher }}\n          </div>\n        </div>\n      </div>\n      <div id="dates" class=\'span5\'>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.available_from\') }}:</label>\n          <div class="controls">{{ humanizeDate(start) }}</div>\n        </div>\n        <div class="control-group">\n          <label class="control-label">{{ I18n.t(\'ui.assignments.available_until\') }}:</label>\n          <div class="controls {{ dueClass }}">{{ humanizeDate(due) }}</div>\n        </div>\n      </div>\n      <div id="instructions" class="control-group">\n        <label class=\'control-label\'>{{ I18n.t(\'ui.assignments.instructions\') }}:</label>\n        <div class="controls">\n          {% if (description) { %}\n            {{ description }}\n          {% } else { %}\n            Not available\n          {% } %}\n        </div>\n      </div>\n    </div>\n\n    <div id="content-assignment">\n      <div>\n        <h4>{{ I18n.t(\'ui.assignments.test_material\') }}</h4>\n        <div id="test-content" class="contentDialogList"></div>\n      </div>\n      <hr>\n      <div>\n        <h4>{{ I18n.t(\'ui.assignments.support_material\') }}</h4>\n        <div class="contentDialogList" id="support-content"></div>\n      </div>\n    </div>\x3c!-- #content-assignment --\x3e\n\n  </div>\n</div>\x3c!-- #general --\x3e\n\n\n<div id="student-info">\n  <div id="student-files-box" class="dialog-fix {{ workClass }} list-wrapper">\n    <h3>{{ I18n.t(\'ui.assignments.student_files\') }}</h3>\n    <div id="student-content"></div>\n  </div>\x3c!-- student files --\x3e\n\n  {% if ( Osp.Markbook.isFinished(status) ) { %}\n    <div id="student-mark" class=\'list-wrapper span5 dialog-fix {{ markClass }}\'>\n      <h3>{{ I18n.t(\'ui.assignments.mark\') }}</h3>\n      \n      {% if (!_.isNull(detailed_score)){ %}\n        <div class="mark">\n          <span>{{ mark }} / {{ points }}</span>\n          <span class="percentage">{{ percentage }}%</span>\n        </div>\n      {% } %}\n\n      <form class="modal-form">\n        <div id="mark-input">\n          \n          {% if (_.isNull(detailed_score)){ %}\n            <div class="control-group">\n              <div id="input-mark" class="controls">\n                {% if (no_mark) { %}\n                <span>{{ I18n.t(\'ui.assignments.no_marks\') }}</span>\n                {% } else { %}\n                <input type="number" min="0" max="{{ points }}" required pattern="^d+$" value="{{ mark }}" name="mark" /> / {{ points }}\n                {% } %}\n              </div>\n            </div>\n          {% } else { %}\n              {% for(var n=0;n < detailed_score.length;n++){ \n                var score = detailed_score[n] %}\n                <div class="control-group">\n                  {% if (score[0] == \'auto\' || score[0] == \'a\'){ %}\n                    <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> <span class="red">automarked</span>:</label>\n                    <div class="controls">\n                      <input name="mark_{{n + 1}}" disabled="true" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                    </div>\n                  {% } else { %}\n                    <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> mark:</label>\n                    <div class="controls">\n                      <input name="mark_{{n + 1}}" class="mark-input" data-screen="{{n}}" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                    </div>\n                  {% } %}\n                </div>\n              {% } %}\n          {% } %}\n        </div>\n      </form>\n    </div>\n  {% } %}\n\n</div>\x3c!-- #student-info --\x3e');
window.JST["course/assignments/student_assignment/layout"]=_.template('<div class="modal-header">\n  <h3>{{ name }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>    \n</div>\n<div class="modal-body">\n  <div class="form-horizontal form-big row-fluid">\n    <div id="student-assignment-form"></div>\n  </div>\n</div>\n<div class="modal-footer">\n  <div id="buttons-student-assignment" class=\'row-fluid\'></div>\n</div>');
window.JST["course/assignments/student_assignment/material"]=_.template('<span class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</span>\n<span class="span11">\n  {% if(isDisabled()) { %}\n    {[ name ]}\n  {% } else { %}\n    <a class="name math-formula">{[ name ]}</a>\n  {% } %}\n</span>\n');window.JST["course/components/assignment_basket/assignment/body"]=_.template('<div class="sidepanel__wrapper">\n  <h4>Assignment title</h4>\n  <div class="assignmentBasket__itemHeader">\n    <div class="assignmentBasket__title">\n      <span>{{ title }}</span>\n      <input type="text" class="form__input form__input--fullWidth" name="title" value="{{ title }}">\n    </div>\n    <a href="#" role="button" data-action="editTitle" class="link">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-edit"></use>\n      </svg>\n      <span class="a11y-hide">Edit</span>\n    </a>\n  </div>\n\n  <div class="assignmentBasket__meta">\n    {% if (test_format) { %}\n    <span class="badge badge--meta">{{ test_format }}</span>\n    {% } %}\n    {% if (test_ext) { %}\n    <span class="badge badge--meta">{{ test_ext }}</span>\n    {% } %}\n  </div>\n\n  <ul class="assignmentBasket__shortcuts">\n    <li>\n      {% if (end_date) { %}\n      <a href="#" role="button" class="link" data-action="setDates">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-calendar"></use>\n        </svg>\n        Dates\n      </a>\n\n      <div class="assignmentBasket__date">\n        <div>\n          Start date\n          <strong>{{ start_date }}</strong>\n        </div>\n        <div>\n          End date\n          <strong>{{ end_date }}</strong>\n        </div>\n      </div>\n\n      {% } else { %}\n\n      <a href="#" role="button" class="link" data-action="setDates">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-calendar"></use>\n        </svg>\n        Set dates\n      </a>\n      {% } %}\n    </li>\n    <li>\n      {% if (!_(groups).isEmpty()) { %}\n      <div class="flex flex--alignCenter">\n        <a href="#" role="button" class="link" data-action="setStudents">\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-class"></use>\n          </svg>\n          Students\n        </a>\n        <span class="badge">{{ students_count }}</span>\n      </div>\n      <p>{{ groups.join(\', \') }}</p>\n\n      {% } else { %}\n\n      <a href="#" role="button" class="link" data-action="setStudents">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-class"></use>\n        </svg>\n        Set students\n      </a>\n      {% } %}\n    </li>\n  </ul>\n\n  <div class="metadata"></div>\n</div>\n');
window.JST["course/components/assignment_basket/assignment/material"]=_.template('<a href="#" role="button" data-action="remove" class="link">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-remove-bin"></use>\n  </svg>\n  <span class="a11y-hide">Remove</span>\n</a>\n{{ name }}\n');window.JST["course/components/assignment_basket/assignment/metadata"]=_.template('<div class="assignmentBasket__metadataActions">\n  <button class="button button--secondary" data-action="preview">Preview</button>\n  <button class="button button--primary" data-action="toggleMetadata">\n    <span class="button__state button__state--idle">See more</span>\n    <span class="button__state button__state--enabled">See less</span>\n  </button>\n  <button class="link ml--auto" data-action="remove">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-remove-bin"></use>\n    </svg>\n    <span class="a11y-hide">Remove</span>\n  </button>\n</div>\n\n<div class="assignmentBasket__metadataContent">\n  <h4 class="section__subtitle">Module</h4>\n  <p>{{ lens_name }}</p>\n\n  <h4 class="section__subtitle">Resource title</h4>\n  <p>{{ test_name }}</p>\n\n  <h4 class="section__subtitle">Description</h4>\n  <p>{{ test_description }}</p>\n  \n  {% if (showMarksAvailable()) { %}\n    <h4 class="section__subtitle">Marks available</h4>\n    <p>{{ test_points }}</p>\n  {% } %}\n\n  {% if (showNoMarks()) { %}\n    <h4 class="section__subtitle">Marks available</h4>\n    <p>{{ I18n.t(\'ui.assignments.no_marks\') }}</p>\n    <div class="helpCard mb--4x">\n      <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n      <div class="helpCard__content">\n        <p>{{ I18n.t(\'ui.assignment_basket.no_marks_info\') }}</p>\n      </div>\n    </div>\n  {% } %}\n\n  <div class="form__group">\n    <label class="form__headingLabel">Instructions</label>\n    <textarea name="instructions" class="form__input form__input--fullWidth">{{ instructions }}</textarea>\n  </div>\n\n  <div class="assignmentBasket__material">\n    <h4 class="section__subtitle">Support material</h4>\n    <div class="assignmentBasket__materialAdded">\n      <ul class="material__resources"></ul>\n      <ul class="material__support"></ul>\n    </div>\n    <ul class="assignmentBasket__shortcuts">\n      <li>\n        <a href="#" role="button" class="link" data-action="material" data-type="{{ MATERIAL_TYPE.RESOURCES }}">\n          Add resource material\n        </a>\n      </li>\n      {% if (showSupportMaterial()) { %}\n      <li>\n        <a href="#" role="button" class="link" data-action="material" data-type="{{ MATERIAL_TYPE.SUPPORT }}">\n          Add support material\n        </a>\n      </li>\n      {% } else { %}\n      <li>\n        <a href="#" role="button" class="link" data-action="material" data-type="{{ MATERIAL_TYPE.PLANNING }}">\n          Add lesson material\n        </a>\n      </li>\n      {% } %}\n    </ul>\n    <div class="helpCard assignmentBasket__material__limitReached__message">\n      <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n      <div class="helpCard__content">\n        Support material limit of 5 resources reached.\n      </div>\n    </div>\n  </div>\n</div>');
window.JST["course/components/assignment_basket/empty"]=_.template('<div class="helpCard">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    {{ I18n.t(\'ui.assignment_basket.empty\') }}\n    <a\n      href="https://support.kerboodle.com/teacher-support/assessment-and-markbook/assigning-work-with-assignment-basket"\n      class="link"\n    >\n      {{ I18n.t(\'ui.assignment_basket.need_help\') }}\n    </a>\n  </div>\n</div>\n');
window.JST["course/components/assignment_basket/main/body"]=_.template('<ul class="assignmentBasket__shortcuts assignmentBasket__shortcuts--highlighted">\n  <li>\n    <a href="#" role="button" class="link" data-action="setDates">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-calendar"></use>\n      </svg>\n      Set dates for all\n    </a>\n  </li>\n  <li>\n    <a href="#" role="button" class="link" data-action="setStudents">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-class"></use>\n      </svg>\n      Set students for all\n    </a>\n  </li>\n</ul>\n\n<div class="assignmentBasket__selection">\n  <strong data-counter="assignments"></strong>\n  <a href="#" role="button" class="link" data-action="removeAll">Remove all</a>\n</div>\n\n<ol class="assignmentBasket__list"></ol>\n<div class="assignmentBasket__success"></div>\n');
window.JST["course/components/assignment_basket/main/footer"]=_.template('{% if (!isEmpty()) { %}\n<div class="sidepanel__footerActions sidepanel__footerActions--fullWidth">\n  <button role="button" class="button button--primary" data-action="assignAll" {% if (!isValidForAssign()) { %}disabled=disabled{% } %}>Assign all</button>\n</div>\n<div class="message {% if (!isValidForAssign()) { %}message--visible{% } %}">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n  <span class="message__label">{[ statusMessage() ]}</span>\n</div>\n{% } %}\n');
window.JST["course/components/assignment_basket/main/item"]=_.template('<div class="assignmentBasket__itemHeader">\n  <div class="assignmentBasket__status assignmentBasket__status--incomplete">\n    <svg viewBox="0 0 1 1" class="icon icon--small">\n      <use xlink:href="#svg__icon_indicator_exclamation"></use>\n    </svg>\n    {{ statusText() }}\n  </div>\n  <div class="assignmentBasket__status assignmentBasket__status--complete">\n    <svg viewBox="0 0 1 1" class="icon icon--small">\n      <use xlink:href="#svg__icon_indicator_tick"></use>\n    </svg>\n    Ready\n  </div>\n  <a href="#" role="button" data-action="remove" class="link">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-remove-bin"></use>\n    </svg>\n    <span class="a11y-hide">Remove</span>\n  </a>\n</div>\n\n<h4>{{ title }}</h4>\n<div class="assignmentBasket__meta">\n  {% if (test_format) { %}\n  <span class="badge badge--meta">{{ test_format }}</span>\n  {% } %}\n  {% if (test_ext) { %}\n  <span class="badge badge--meta">{{ test_ext }}</span>\n  {% } %}\n</div>\n\n<table class="assignmentBasket__settings">\n  <tbody>\n\t{% if (end_date) { %}\n    <tr>\n      <td>Dates:</td>\n      <td>\n        <strong>{{ start_date }} - {{ end_date }}</strong>\n      </td>\n    </tr>\n    {% } %}\n\t{% if (!_(groups).isEmpty()) { %}\n    <tr>\n      <td>Students:</td>\n      <td>\n        <strong>{{ students_count }}</strong>\n        <p>{{ groups.join(\', \') }}</p>\n      </td>\n    </tr>\n\t{% } %}\n  </tbody>\n</table>\n\n<div class="assignmentBasket__actions">\n  <button class="button button--secondary" data-action="settings">Settings</button>\n  <button class="button button--secondary" data-action="preview">Preview</button>\n</div>');
window.JST["course/components/assignment_basket/main/success"]=_.template('<div class="helpCard">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      {[I18n.t(\'ui.assignment_basket.assign.\' + assignmentStatus + \'.message\', { count: assignmentsCount, assignmentsLabel: assignmentsLabel })]}\n      <p><button class="button button--secondary" data-action="returnTo">Return to {{activeLensName}}</button></p>\n      <p><button class="button button--secondary" data-action="goToMarkbook">Go to Markbook</button></p>\n    </div>\n  </div>\n  ');
window.JST["course/components/assignment_basket/material/annex"]=_.template('<div class="sidepanel__wrapper sidepanel__wrapper--integrated">\n  <div class="queryTitle">All resources</div>\n  <span class="queryResults"></span>\n</div>\n');window.JST["course/components/assignment_basket/material/body"]=_.template('<div class="assignmentBasket__materialList"></div>');window.JST["course/components/assignment_basket/material/footer"]=_.template('<div class="sidepanel__footerActions">\n  <button role="button" class="button button--primary" data-action="structures">Browse</button>\n</div>');
window.JST["course/components/assignment_basket/set_dates/annex"]=_.template('<div class="sidepanel__wrapper">\n  {% if (isEmpty()) { %}\n  <div class="helpCard">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      Tap a date below to set your start date then again to set your end date.\n    </div>\n  </div>\n  {% } else { %}\n  <div class="assignmentBasket__date">\n    <div>\n      Start date\n      <strong>{{ start_date }}</strong>\n    </div>\n    <div>\n      End date\n      <strong>{{ end_date }}</strong>\n    </div>\n  </div>\n  {% } %}\n\n  <ol class="assignmentBasket__calendarWeekdays">\n    <li>Mo</li>\n    <li>Tu</li>\n    <li>We</li>\n    <li>Th</li>\n    <li>Fr</li>\n    <li>Sa</li>\n    <li>Su</li>\n  </ol>\n</div>');
window.JST["course/components/assignment_basket/set_dates/body"]=_.template('<button role="button" class="button assignmentBasket__pickerButton assignmentBasket__pickerButton--previous hidden" aria-label="Previous months">\n  <svg viewBox="0 0 1 1" class="icon">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n\n<div class="sidepanel__wrapper">\n  <div class="assignmentBasket__picker"></div>\n</div>\n\n<button role="button" class="button assignmentBasket__pickerButton assignmentBasket__pickerButton--next" aria-label="Next months">\n  <svg viewBox="0 0 1 1" class="icon">\n    <use xlink:href="#svg__chevron-right"></use>\n  </svg>\n</button>\n');
window.JST["course/components/assignment_basket/set_dates/footer"]=_.template('<div class="sidepanel__footerActions">\n  <button role="button" class="button button--primary" data-action="apply">\n    {% if (applyToAll()) { %}\n    Apply to basket\n    {% } else { %}\n    Apply to assignment\n    {% } %}\n  </button>\n  <button role="button" class="button button--secondary" data-action="back">Cancel</button>\n</div>');window.JST["course/components/assignment_basket/set_students/annex"]=_.template('<ul class="navigationTabs">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <a href="#groups" class="navigationTabs__button">{{ I18n.t(\'ui.assign.classes_groups\') }}</a>\n  </li>\n  <li class="navigationTabs__item">\n    <a href="#students" class="navigationTabs__button">\n      {{ I18n.t(\'ui.assignments.students\') }}\n      <span class="badge badge--muted" data-counter="students">0</span>\n    </a>\n  </li>\n</ul>');
window.JST["course/components/assignment_basket/set_students/body"]=_.template('<div class="tabPanel tabPanel--active" id="groups"></div>\n<div class="tabPanel tabPanel--noPadding" id="students">\n  <div class="selectAll hidden">\n    <label class="selectAllLabel checkbox ml--4x">\n      <input data-action="selectAll" type="checkbox">\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n        <use xlink:href="#svg__checkbox-unchecked"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n        <use xlink:href="#svg__checkbox-checked"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--partial">\n        <use xlink:href="#svg__checkbox-partial"></use>\n      </svg>\n      <span class="checkbox__label"></span>\n    </label>\n  </div>\n  <div class="mh--4x mt--2x mb--4x" id="studentsList"></div>\n</div>');
window.JST["course/components/assignment_basket/set_students/footer"]=_.template('<div class="sidepanel__footerActions">\n  <button role="button" class="button button--primary" data-action="apply">\n    {% if (applyToAll()) { %}\n    Apply to basket\n    {% } else { %}\n    Apply to assignment\n    {% } %}\n  </button>\n  <button role="button" class="button button--secondary" data-action="back">Cancel</button>\n</div>');window.JST["course/components/assignment_basket/single_main/body_empty"]=_.template('<div class="sidepanel__wrapper"></div>\n\n');
window.JST["course/components/assignment_basket/single_main/footer"]=_.template('<div class="sidepanel__footerActions sidepanel__footerActions--fullWidth">\n  <button role="button" class="button button--primary" data-action="assign" {% if (!isValidForAssign()) { %}disabled=disabled{% } %}>Assign</button>\n</div>\n<div class="message {% if (!isValidForAssign()) { %}message--visible{% } %}">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n  <span class="message__label">{[ statusMessage() ]}</span>\n</div>\n');
window.JST["course/components/assignment_basket/structures/body"]=_.template('<div class="structures__tree structures__tree--mobileMode"></div>');window.JST["course/components/assignments_widget/assignment"]=_.template('<h3 id="{{ getTitleId() }}">{{ name }}</h3>\n\n<div class="row">\n  <div class="col">\n    <p id="{{ getAssignedById() }}" aria-hidden="true">{{ I18n.t(\'ui.assignments.assigned_by\') }}: {{ assigned_by }}</p>\n  </div>\n  <div class="col">\n    <p class="ml--auto" id="{{ getDueDateId() }}" aria-hidden="true">Due: {{ dueDate() }}</p>\n  </div>\n</div>\n');
window.JST["course/components/assignments_widget/empty"]=_.template('<div class="helpCard">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    {{ I18n.t(\'ui.assignments.widget.empty\') }}\n  </div>\n</div>\n');window.JST["course/components/assignments_widget/layout"]=_.template('<div class="assignments-widget__header">\n  <h2 id="assignHead">{{ I18n.t(\'ui.assignments.stats.title\') }}</h2>\n  <div class="home__assignments__stats"></div>\n</div>\n<div class="assignments-widget__body">\n  <div class="home__assignments__items"></div>\n  <a href="#" class="widget__link hidden" data-action="open:assignments">See assignments</a>\n</div>\n');
window.JST["course/components/assignments_widget/stats"]=_.template('<li class="shortcuts__item">\n  <a href="{{ getTodayLink() }}" data-action="open:due_today" aria-labelledby="today dueToday assignHead"><span\n      id="today">{{ I18n.t(\'ui.assignments.stats.today\') }}</span></a>\n  <span class="badge {{ muted(\'due_today\') }}" id="dueToday">{{ due_today }}</span>\n</li>\n<li class="shortcuts__item">\n  <a href="{{ getThisWeekLink() }}" data-action="open:due_this_week" aria-labelledby="thisWeek dueWeek assignHead"><span\n      id="thisWeek">{{ I18n.t(\'ui.assignments.stats.this_week\') }}</span></a>\n  <span class="badge {{ muted(\'due_this_week\') }}" id="dueWeek">{{ due_this_week }}</span>\n</li>');
window.JST["course/components/content_lens_header/layout"]=_.template('<div class="main {% if (isMyContentsMode()) { %} main--resources {% } %}">\n  <div class="hidden--l mr--2x">\n    <button role="button" class="button button--primary" data-action="toggleResourcesTree" id="browseResourcesButton">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-browse"></use>\n      </svg>\n      <span class="button__label">Browse</span>\n    </button>\n    {% if (showAssignmnetBasket()) { %}\n      <button role="button" class="button button--secondary" data-action="assignmentBasket" aria-label="Assignment basket">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-assignments"></use>\n        </svg>\n        <span class="badge badge--muted" data-counter="assignments">0</span>\n      </button>\n    {% } %}\n  </div>\n\n  <div class="myContents__actions"></div>\n  <div class="myContents__more"></div>\n  <div class="search"></div>\n  <div class="filters"></div>\n</div>\n\n<div class="actions"></div>');
window.JST["course/components/content_lens_header/my_contents_actions"]=_.template('<button role="button" class="button button--secondary hidden visibleInline--xxs" data-action="upload">Upload</button>\n<button role="button" class="button button--secondary hidden visibleInline--xs" data-action="addLink">Add link</button>\n');window.JST["course/components/content_lens_header/my_contents_more"]=_.template('<button type="button" class="button button--icon hidden--xs" aria-label="More options" data-action="toggleMore">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-elipses"></use>\n  </svg>\n</button>\n<ul class="more__menu hidden--xs">\n  <li class="more__item more__item--caret">\n    <button type="button" class="button" aria-label="Close menu" data-action="toggleMore">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__chevron-right"></use>\n      </svg>\n    </button>\n  </li>\n  <li class="more__item hidden--xxs">\n    <button role="button" class="button" data-action="upload">Upload</button>\n  </li>\n  <li class="more__item">\n    <button role="button" class="button" data-action="addLink">Add link</button>\n  </li>\n</ul>\n');
window.JST["course/components/group_filter/layout"]=_.template('<button type="button">\n  <label>{{ I18n.t(\'ui.common.view\') }}:</label><span class="label badge badge--info"></span><span class="selected badge badge--info">{{ I18n.t(\'ui.common.all_groups\') }}</span>\n  <svg viewBox="0 0 1 1" class="caret">\n    <use xlink:href="#svg__chevron-thick-right"></use>\n  </svg>\n</button>');window.JST["course/components/groups_panel/annex"]=_.template('<ul class="navigationTabs">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <a href="#groups" class="navigationTabs__button" data-event="show:panel">{{ I18n.t(\'ui.common.group\') }}</a>\n  </li>\n  <li class="navigationTabs__item">\n    <a href="#students" class="navigationTabs__button" data-event="show:panel">{{ I18n.t(\'ui.common.student\') }}</a>\n  </li>\n</ul>');
window.JST["course/components/groups_panel/body"]=_.template('<div class="tabPanel tabPanel--active" id="groups"></div>\n<div class="tabPanel" id="students"></div>');window.JST["course/components/markbook/header"]=_.template('<div class="markbook__search"></div>\n<div class="markbook__groupFilter"></div>\n<div class="markbook__assignedByFilter"></div>\n<div class="markbook__filters"></div>\n');window.JST["course/components/markbook/layout"]=_.template('<div class="section__wrapper">\n  <div class="section__header"></div>\n  <div class="section__body"></div>\n</div>\n<div role="status" class="a11y-hide">\n  <p class="hide-when-not-empty">No assignments found. There are no assignments at the moment.</p>\n</div>');
window.JST["course/components/markbook_panel/body"]=_.template('<div class="student-assignment__info"></div>\n<div class="student-assignment__work"></div>');window.JST["course/components/markbook_panel/work"]=_.template('\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__title">{{ I18n.t(\'ui.assignments.student_assignment.your_work\') }}</div>\n  {% if (hasStudentContents()) { %}\n    <ul>\n      {% _(student_contents).each(function(student_content, n) { %}\n      <li class="student-assignment__support-contents__item">\n        <a href="#" class="link" data-action="open:student_content" data-item="{{n}}">{{ student_content.name }}</a>\n      </li>\n      {% }) %}\n    </ul> \n  {% } else { %}\n    <div><i>{{ yourWorkMessage() }}</i></div>\n  {% } %}\n</div>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__title">{{ I18n.t(\'ui.assignments.student_assignment.your_mark\') }}</div>\n  {% if (hasMark()) { %}\n    <div>{{ mark }} / {{ points }} <span class="percentage ml--2x">{{ percentage }}%</span></div>    \n  {% } else { %}\n    <div><i>{{ yourMarkMessage() }}</i></div>\n  {% } %}\n</div>\n\n{% if (hasDetailedScore()) { %}\n<div class="student-assignment__info__group">\n  <ul>\n    {% _(detailed_score).each(function(score, screen) { %}\n    <li class="student-assignment__support-contents__item">\n      <a href="#" class="link" data-action="open:screen" data-screen="{{screen}}">{{ I18n.t(\'ui.assignments.student_assignment.screen\') }} {{ screen + 1 }}</a>\n      {{ I18n.t(\'ui.markbook.marked_as.\' + score[0]) }}: {{ score[1] }} / {{ score[2] }}\n    </li>\n    {% }) %}\n  </ul> \n</div>\n{% } %}\n');
window.JST["course/components/next_steps/help_panel"]=_.template('<div class="list">\n  <div class="list__item">\n    <div class="illustration-display">\n      <svg viewBox="0 0 160 160">\n        <use xlink:href="#svg__level-up-illustration"></use>\n      </svg>\n      <div class="illustration-display__content">\n        <h2>Level Up</h2>\n        <p>\n          Level Up quizzes are built around how well you did in your last smart\n          task. They will help you progress in that topic.\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class="list__item">\n    <div class="illustration-display">\n      <svg viewBox="0 0 160 160">\n        <use xlink:href="#svg__icon-illus_reactivate"></use>\n      </svg>\n      <div class="illustration-display__content">\n        <h2>Reactivate</h2>\n        <p>Reactivate builds quizzes to test what you have learned and to help you keep it in your memory. Questions will be presented back to you over time. If you get a question right, you won\u2019t see the question for a bit. If you get the question wrong, you\u2019ll see it again sooner.</p>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="illustration-centered">\n  <svg viewBox="0 0 160 160">\n    <use xlink:href="#svg__onboarding-illustration"></use>\n  </svg>\n</div>\n');
window.JST["course/components/next_steps/layout"]=_.template('<div class="nextSteps__header">\n  <a class="help" href="#" data-action="help">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__icon-information"></use>\n    </svg>\n  </a>\n</div>\n\n<div class="nextSteps__reactivate"></div>\n<div class="levelUps"></div>\n<div class="nextSteps__results"></div>\n<div class="nextSteps__help"></div>\n');window.JST["course/components/next_steps/reactivate/empty"]=_.template('<div class="helpCard helpCard--light">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    <div class="helpCard__state helpCard__status--on">\n      <p>{{ I18n.t(\'ui.next_steps.reactivate.no_items\') }}</p>\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/next_steps/reactivate/layout"]=_.template('<div class="content__wrapper">\n  <div class="content__header"></div>\n\n  <div class="tabbed-box tabbed-box--blue">\n    <div class="tabbed-box__header">\n      <div class="tabbed-box__tab">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__icon-memory-strength"></use>\n        </svg>\n        {{ I18n.t(\'ui.next_steps.reactivate.title\') }}\n      </div>\n    </div>\n    <div class="tabbed-box__body">\n      <div class="tabbed-box__content tabbed-box__content--padded nextSteps__reactivate">\n      </div>\n    </div>\n  </div>\n\n  <div class="content__footer"></div>\n</div>\n');
window.JST["course/components/next_steps/reactivate/not-empty"]=_.template('<div class="splitItem">\n  <div class="splitItem__content splitItem__content--valign-center">\n    <p>{{ I18n.t(\'ui.next_steps.reactivate.description\') }}</p>\n  </div>\n  <div class="splitItem__controls">\n    <button role="button" class="button button--primary" data-action="open">{{ I18n.t(\'ui.next_steps.reactivate.start\') }}</button>\n  </div>\n</div>\n');window.JST["course/components/next_steps/reactivate_results_panel/body"]=
_.template('<div class="split-panel">\n  <div class="split-panel__half">\n    <div class="assessment-details">\n      <h2 class="assessment-details__heading">\n        {{ I18n.t(\'ui.next_steps.reactivate.results_panel.title\') }}\n      </h2>\n      <div class="assessment-details__body">\n        <p><strong>{{ I18n.t(\'ui.next_steps.reactivate.results_panel.results.title\') }}</strong></p>\n        <div class="assessment-details__data">\n          <label>{{ I18n.t(\'ui.next_steps.reactivate.results_panel.results.mark\') }}</label>\n          <div class="assessment-details__mark">\n            <span class="assessment-details__markPercentage">{{ mark }} / {{ points }} ({{ percentage_mark }}%)</span>\n            <a href="#" class="link" data-action="toggleMarks">\n              <span>{{ I18n.t(\'ui.next_steps.reactivate.results_panel.results.show_marks\') }}</span>\n              <span class="hidden">{{ I18n.t(\'ui.next_steps.reactivate.results_panel.results.hide_marks\') }}</span>\n            </a>\n          </div>\n\n          {% questions.forEach((question, index) => { %}\n          <div class="marks-details">\n            <a href="#" class="link" data-action="open" data-index="{{ index }}">Q{{ index + 1 }}</a> {{ markFor(question) }}\n          </div>\n          {% }) %}\n          {% if (oddNumberOfQuestions()) { %}\n          <div class="marks-details"></div>\n          {% } %}\n\n          <label>{{ I18n.t(\'ui.next_steps.reactivate.results_panel.results.memory_strength\') }}</label>\n          <div class="assessment-details__memoryStrength">\n            <span>({{ percentage_memory_strength }}%)</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nextStep split-panel__half split-panel__half--grey"></div>\n</div>\n');
window.JST["course/components/next_steps/reactivate_results_panel/next_step"]=_.template('<h2 class="assessment-details__heading">{{ I18n.t(\'ui.next_steps.reactivate.your_next_step_panel.title\') }}</h2>\n\n<p class="assessment-details__message">\n  {{ I18n.t(\'ui.next_steps.reactivate.your_next_step_panel.message\') }}\n</p>\n\n<div class="item">\n  <div class="tabbed-box tabbed-box--blue reactivate-box">\n    <div class="tabbed-box__header">\n      <div class="tabbed-box__tab">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__icon-memory-strength"></use>\n        </svg>\n        {{ I18n.t(\'ui.next_steps.reactivate.title\') }}\n      </div>\n    </div>\n\n    <div class="tabbed-box__body">\n      <div class="tabbed-box__data">\n        <div class="tabbed-box__content tabbed-box__content--no-pt">\n          <p>{{ I18n.t(\'ui.next_steps.reactivate.description\') }}</p>\n        </div>\n        <div class="tabbed-box__buttons">\n          <button class="button button--primary" data-action="start">{{ I18n.t(\'ui.next_steps.reactivate.start\') }}</button>\n          <button class="button button--secondary" data-action="close">{{ I18n.t(\'ui.next_steps.reactivate.try_later\') }}</button>\n        </div>\n      </div>\n      <div class="tabbed-box__media">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__level-up-illustration"></use>\n        </svg>\n      </div>\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/next_steps_widget/empty"]=_.template('<div class="helpCard">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">\n    {{ I18n.t(\'ui.next_steps.widget.empty\') }}\n  </div>\n</div>\n');window.JST["course/components/next_steps_widget/layout"]=_.template('<div class="nextSteps-widget__header">\n  <h2  class="nextSteps-widget__h2">Next Steps</h2>\n</div>\n\n<div class="nextSteps-widget__body">\n  <div class="home__nextSteps__items"></div>\n  <a href="#" class="widget__link hidden" data-action="open:next_steps">See Next Steps</a>\n</div>\n');
window.JST["course/components/next_steps_widget/level_up"]=_.template('<div class="tabbed-box tabbed-box--purple" data-content="extend">\n    <div class="tabbed-box__header">\n        <div class="{{ tabbedBoxClass() }} tabbed-box__tab tabbed-box__tab--level-up ">\n            <svg viewBox="0 0 1 1">\n                <use xlink:href="#svg__level-up-small"></use>\n            </svg>\n            {{ I18n.t(\'ui.next_steps.level_up.title\') }}: {{ typeLabel() }}\n        </div>\n    </div>\n</div>\n<div class="tabbed-box__body-level-up">\n    <div class="splitItem">\n        <div class="splitItem__content">\n            <div class="displayGrid">\n                <div class="displayGrid__label">\n                    {{ I18n.t(\'ui.next_steps.level_up.task\') }}:\n                </div>\n                <div class="displayGrid__value">\n                    {{ name }}\n                </div>\n                <div class="displayGrid__label">\n                    {{ curriculumLabel() }}:\n                </div>\n                <div class="displayGrid__value">\n                    {{ curriculumText() }}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="tabbed-box__img-level-up">\n        <svg viewBox="0 0 160 160">\n            <use xlink:href="#svg__level-up-illustration"></use>\n        </svg>\n    </div>\n</div>\n');
window.JST["course/components/next_steps_widget/reactivate"]=_.template('<div class="tabbed-box__header-reactivate">\n    <div class="tabbed-box__tab--reactivate tabbed-box__tab">\n        <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__reactivate-small"></use>\n        </svg>\n        <span>{{ I18n.t(\'ui.next_steps.reactivate.title\') }}</span>\n    </div>\n</div>\n<div class="tabbed-box__body-reactivate">\n    <p>{{ I18n.t(\'ui.next_steps.reactivate.description\') }}</p>\n    <div class="tabbed-box__img-reactivate">\n        <svg viewBox="0 0 160 160">\n            <use xlink:href="#svg__icon-illus_reactivate"></use>\n        </svg>\n    </div>\n</div>\n');
window.JST["course/components/resources_panel/browse/body"]=_.template('<div class="structures__tree structures__tree--mobileMode"></div>');window.JST["course/components/resources_panel/main/annex"]=_.template('<ul class="navigationTabs">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <a href="#page" class="navigationTabs__button" data-event="show:page">{{ I18n.t(\'ui.resources_panel.this_page\') }}</a>\n  </li>\n  <li class="navigationTabs__item">\n    <a href="#all" class="navigationTabs__button" data-event="show:all">{{ I18n.t(\'ui.resources_panel.all_resources\') }}</a>\n  </li>\n</ul>');
window.JST["course/components/resources_panel/main/body"]=_.template('\n<div class="resourcesPanel__location"></div>\n<div class="resourcesPanel__resourcesList"></div>');window.JST["course/components/resources_panel/main/footer"]=_.template('<div class="sidepanel__footerActions flex--alignCenter">\n  <button role="button" class="button button--primary" data-action="browse">Browse</button>\n  <div class="filtersToggle"></div>\n</div>');window.JST["course/components/resources_panel/main/location"]=
_.template('\n  <div class="queryTitle">{{ I18n.t(\'ui.resources_panel.all_resources\') }}</div>\n  <span class="queryResults"></span>');window.JST["course/components/sections_menu/option"]=_.template('<button type="button" class="navigationTabs__button">\n  <span>{{ name }}</span>\n</button>');window.JST["course/components/student_assignment/info-section"]=_.template('<h2>\n  {% if (smart()) { %}\n  <span class="label badge badge--smart">\n     <svg viewBox="0 0 1 1">\n       <use xlink:href="#svg__icon_small_smart"></use>\n     </svg>\n  </span>\n  {% } %}\n  {{name}}\n</h2>\n\n{% if (isDue()) { %}\n  <div class="student-assignment__info__group">\n    <div class="helpCard helpCard--error">\n      <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-warning-balloon"></use>\n        </svg>\n      </div>\n      <div class="helpCard__content">\n        {{ I18n.t(\'ui.assignments.student_assignment.due_message\') }}\n      </div>\n    </div>\n  </div>\n{% } %}\n\n{% if (!isDue()) { %}\n<div class="student-assignment__info__group">\n  <button role="button" class="button button--primary" data-action="open" {{ isDone() ? \'disabled\' : \'\' }}>{{ I18n.t(\'ui.notifications.open\') }}</button>\n</div>\n{% } %}\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.start_date\') }}:</span>\n    <span>{{ startDate }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.due_date\') }}:</span>\n    <span>{{ dueDate }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.markbook.status\') }}:</span>\n    <div>\n      <span class="badge badge--muted">{{ status() }}</span>\n    </div>\n  </div>\n</div>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.assigned_by\') }}:</span>\n    <span class="student-assignment__info__item__value">{{ teacher }}</span>\n  </div>\n  {% if (showMarksAvailable()) { %}\n    <div class="student-assignment__info__item">\n      <span>{{ I18n.t(\'ui.uploadPanel.common.marksAvailable\') }}:</span>\n      <span class="student-assignment__info__item__value">{{ points }}</span>\n    </div>\n  {% } %}\n  {% if (showNoMarks()) { %}\n    <div class="student-assignment__info__item">\n      <span>{{ I18n.t(\'ui.uploadPanel.common.marksAvailable\') }}:</span>\n      <span class="student-assignment__info__item__value">{{ I18n.t(\'ui.assignments.no_marks\') }}</span>\n    </div>\n  {% } %}\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.activity_type\') }}:</span>\n    <span class="student-assignment__info__item__value">{{ activity_type }}</span>\n  </div>\n    <div class="student-assignment__info__item">\n      <span>{{ I18n.t(\'ui.assignments.instructions\') }}:</span>\n      <div class="student-assignment__info__item__value">{[ getInstructions() ]}</div>\n    </div>\n</div>\n\n<div class="student-assignment__info__group">\n  <div>\n    <div class="student-assignment__info__title"><h3>{{ I18n.t(\'ui.assignments.support_material\') }}</h3></div>\n    {% if (!support_contents) { %}\n      <div><i>{{ I18n.t(\'ui.assignments.student_assignment.no_materials\') }} </i></div>\n    {% } else { %}\n    <ul>\n      {% _(support_contents).each(function(support_content, n) { %}\n        <li class="student-assignment__support-contents__item">\n          <a href="#" class="link" data-link="{{n}}">{{ support_content.name }}</a>\n        </li>\n      {% }) %}\n    </ul>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/components/student_assignment/layout"]=_.template('<div class="sidepanel__body student-assignment__panel">\n  <div class="student-assignment">\n    <div class="student-assignment__info {{ !showWorkSection() ? \'student-assignment__info--full\' : \'\' }}"></div>\n    {% if (showWorkSection()) { %}\n      <div class="student-assignment__work"></div>\n    {% } %}\n  </div>\n</div>\n<div class="sidepanel__footer student-assignment__footer">\n    <div class="sidepanel__footerActions hidden">\n      <button data-action="save" role="button" class="button button--secondary">\n        {{ I18n.t(\'ui.assignments.save_and_close\') }}\n      </button>\n      <button data-action="done" role="button" class="button button--primary">\n        {{ I18n.t(\'ui.assignments.done\') }}\n      </button>\n    </div>\n\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    <span class="message-text"></span>\n  </div>\n\n  <div class="message message--popup messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ I18n.t(\'ui.uploadPanel.common.error\') }}\n  </div>\n</div>\n');
window.JST["course/components/student_assignment/student-content"]=_.template('<a href="#" role="button" data-action="remove" class="link">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-remove-bin"></use>\n  </svg>\n  <span class="a11y-hide">Remove</span>\n</a>\n<a href="#" data-action="open" class="link">{{ name }}</a>\n');window.JST["course/components/student_assignment/work-section"]=_.template('<h1>{{ I18n.t(\'ui.assignments.your_assignment\') }}</h1>\n\n<div class="student-assignment__info__group">\n  <ul>    \n    <li>\n      <label class="radiobutton">\n        <input type="radio" name="delivery" value="{{ DELIVERY.NOTHING }}" {{ isSelected(DELIVERY.NOTHING) ? \'checked\' : \'\' }}>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n          <use xlink:href="#svg__button_radio_unselected"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n          <use xlink:href="#svg__button_radio_selected"></use>\n        </svg>\n        <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n          <use xlink:href="#button_radio_selected-focus"></use>\n        </svg>\n        <span class="radiobutton__label">{{ I18n.t(\'ui.assignments.delivery.nothing\') }}</span>\n      </label>\n    </li>\n    \n    <li>\n      <label class="radiobutton">\n        <input type="radio" name="delivery" value="{{ DELIVERY.MANUAL }}" {{ isSelected(DELIVERY.MANUAL) ? \'checked\' : \'\' }}>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n          <use xlink:href="#svg__button_radio_unselected"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n          <use xlink:href="#svg__button_radio_selected"></use>\n        </svg>\n        <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n          <use xlink:href="#button_radio_selected-focus"></use>\n        </svg>\n        <span class="radiobutton__label">{{ I18n.t(\'ui.assignments.delivery.manual\') }}</span>\n      </label>\n    </li>\n    \n    <li>\n      <label class="radiobutton">\n        <input type="radio" name="delivery" value="{{ DELIVERY.UPLOAD }}" {{ isSelected(DELIVERY.UPLOAD) ? \'checked\' : \'\' }}>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n          <use xlink:href="#svg__button_radio_unselected"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n          <use xlink:href="#svg__button_radio_selected"></use>\n        </svg>\n        <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n          <use xlink:href="#button_radio_selected-focus"></use>\n        </svg>\n        <span class="radiobutton__label">{{ I18n.t(\'ui.assignments.delivery.upload\') }}</span>\n      </label>\n    </li>\n  </ul>\n</div>\n\n<div class="student-assignment__upload-section {{ showUploadSection() ? \'\' : \'hidden\' }}">\n  <div class="student-assignment__info__group">\n    <div class="student-assignment__work__upload">\n      <input data-action="uploadFile" type="file" class="hidden" />\n      <button role="button" data-action="fileSelection" class="button button--primary">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-upload"></use>\n        </svg>\n        <span class="button__label">{{ I18n.t(\'ui.actions.upload\') }}</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="student-assignment__student-contents {{ showUploadSection() ? \'\' : \'hidden\' }}"></div>\n');
window.JST["course/components/student_assignment_info/layout"]=_.template('<h1>{{name}}</h1>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.start_date\') }}:</span>\n    <span>{{ startDate }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.due_date\') }}:</span>\n    <span>{{ dueDate }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.markbook.status\') }}:</span>\n    <div>\n      <span class="badge badge--muted">{{ status() }}</span>\n    </div>\n  </div>\n</div>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.assigned_by\') }}:</span>\n    <span class="student-assignment__info__item__value">{{ teacher }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.activity_type\') }}:</span>\n    <span class="student-assignment__info__item__value">{{ activity_type }}</span>\n  </div>\n  <div class="student-assignment__info__item">\n    <span>{{ I18n.t(\'ui.assignments.instructions\') }}:</span>\n    <div class="student-assignment__info__item__value">{[ getInstructions() ]}</div>\n  </div>\n</div>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__title"><h3>{{ I18n.t(\'ui.assignments.student_assignment.assignment_material\') }}</h3></div>\n  <a href="#" class="link" data-action="open:test">{{ test_content.name }}</a>\n</div>\n\n<div class="student-assignment__info__group">\n  <div class="student-assignment__info__title"><h3>{{ I18n.t(\'ui.assignments.support_material\') }}</h3></div>\n  {% if (!support_contents) { %}\n    <div><i>{{ I18n.t(\'ui.assignments.student_assignment.no_materials\') }} </i></div>\n  {% } else { %}\n  <ul>\n    {% _(support_contents).each(function(support_content, n) { %}\n      <li class="student-assignment__support-contents__item">\n        <a href="#" class="link" data-action="open:support" data-item="{{n}}">{{ support_content.name }}</a>\n      </li>\n    {% }) %}\n  </ul>\n  {% } %}\n</div>');
window.JST["course/components/student_assignment_results_panel/body"]=_.template('<div class="split-panel">\n  <div class="split-panel__half">\n    <div class="assessment-details">\n      <h2 class="assessment-details__heading">\n        {{ nameText() }} complete!\n      </h2>\n      <div class="assessment-details__body">\n        <p><strong>Results</strong></p>\n        <div class="assessment-details__data">\n          <label>Mark</label>\n          <div class="assessment-details__mark">\n            <span class="assessment-details__markPercentage">{{ mark }} / {{ points }} ({{ percentage_mark }}%)</span>\n            <a href="#" class="link" data-action="toggleMarks">\n              <span>Show marks</span>\n              <span class="hidden">Hide marks</span>\n            </a>\n          </div>\n\n          {% questions.forEach((question, index) => { %}\n          <div class="marks-details">\n            <a href="#" class="link" data-action="open" data-index="{{ index }}">Q{{ index + 1 }}</a> {{ markFor(question) }}\n          </div>\n          {% }) %}\n          {% if (oddNumberOfQuestions()) { %}\n          <div class="marks-details"></div>\n          {% } %}\n\n          <label>{{ curriculumLabel() }}:</label>\n          <div>\n            <span>{{ curriculumText() }}</span>\n          </div>\n          <label>Your understanding is:</label>\n          <div>\n            <span class="badge badge--rectangular {{ dseBadge() }}">\n              {{ dse }}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nextStep split-panel__half split-panel__half--grey"></div>\n</div>\n');
window.JST["course/components/student_assignment_results_panel/level_up"]=_.template('<div class="tabbed-box__header">\n  <div class="tabbed-box__tab">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__level-up-small"></use>\n    </svg>\n    {{ I18n.t(`ui.results.next_step.type.${type}`) }}\n  </div>\n</div>  \n<div class="tabbed-box__body">\n  <div class="tabbed-box__data">\n    {% if(isReady()) { %}\n    <div class="tabbed-box__content">\n      <p>{{ curriculumLabel() }}: {{ curriculumText() }}</p>\n    </div>\n    <div class="tabbed-box__buttons">\n      <button class="button button--primary" data-action="start">Start</button>\n      <button class="button button--secondary" data-action="close">Try later</button>\n    </div>\n    {% } else { %}\n    <div class="levelUp__loading">\n      <div class="levelUp__loading__spinner"></div>\n      <div class="levelUp__loading__message">\n        <p><strong>Wait for it!</strong></p>\n        <p>We\u2019re making a Level Up just for you\u2026</p>\n      </div>\n    </div>\n    {% } %}\n  </div>\n  <div class="tabbed-box__media">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__level-up-illustration"></use>\n    </svg>\n  </div>\n</div>\n');
window.JST["course/components/student_assignment_results_panel/next_step"]=_.template('<h2 class="assessment-details__heading">{{ I18n.t(`ui.results.next_step.title.${type}`) }}</h2>\n<p class="assessment-details__message">\n  {{ I18n.t(`ui.results.next_step.message.${type}`) }}\n</p>\n\n<div class="item"></div>\n\n<div class="progress-list-wrapper">\n  <div class="result-progress">\n    <ul class="result-progress__bullet-list">\n      <li class="result-progress__bullet-item result-progress__bullet-item--filled" data-progress="1">\n        <svg\n          viewBox="0 0 1 1"\n          class="result-progress__bullet-checkmark"\n        >\n          <use xlink:href="#svg__journey-check"></use>\n        </svg>\n        <span></span>\n      </li>\n      <li class="result-progress__bullet-item" data-progress="2">\n        <svg\n          viewBox="0 0 1 1"\n          class="result-progress__bullet-checkmark"\n        >\n          <use xlink:href="#svg__journey-check"></use>\n        </svg>\n        <span></span>\n      </li>\n      <li class="result-progress__bullet-item" data-progress="3">\n        <svg\n          viewBox="0 0 1 1"\n          class="result-progress__bullet-checkmark"\n        >\n          <use xlink:href="#svg__journey-check"></use>\n        </svg>\n        <span></span>\n      </li>\n    </ul>\n    <ul class="result-progress__list">\n      <li class="result-progress__item">\n        <img src="/images/illus_small_task.svg" alt="small task" />\n        <span>{{ I18n.t(\'ui.results.next_step.progress.task\') }}</span>\n      </li>\n      <li class="result-progress__item">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__level-ups-small-illustration"></use>\n        </svg>\n        <span>{{ I18n.t(\'ui.results.next_step.progress.level_ups\') }}</span>\n        {% if (oneMoreLevelUp()) { %}\n        <span class="result-progress__item__desc">{{ I18n.t(\'ui.results.next_step.progress.one_more_level_up\') }}</span>\n        {% } %}\n      </li>\n      <li class="result-progress__item">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__reflect-small-illustration"></use>\n        </svg>\n        <span>{{ I18n.t(\'ui.results.next_step.progress.reflect\') }}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n');
window.JST["course/components/student_assignment_results_panel/next_step_error"]=_.template('<div class="helpCard__icon">\n  <svg viewBox="0 0 1 1" aria-hidden="true">\n    <use xlink:href="#svg__streamline-warning-balloon"></use>\n  </svg>\n</div>\n<div class="helpCard__content">\n  <p class="title">Something went wrong</p>\n  <p>We\'re sorry, we cannot load your Level Up. If this keeps happening, tell your teacher.</p>\n</div>');window.JST["course/components/student_assignment_results_panel/reflect"]=
_.template('<div class="tabbed-box__header">\n  <div class="tabbed-box__tab">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__reflect-small"></use>\n    </svg>\n    Reflect\n  </div>\n</div>\n<div class="tabbed-box__body">\n  <div class="tabbed-box__data">\n    <div class="tabbed-box__content">\n      <p>A task for reflecting on how you\'ve done.</p>\n    </div>\n    <div class="tabbed-box__buttons">\n      <button class="button button--primary" data-action="start">Start</button>\n    </div>\n  </div>\n  <div class="tabbed-box__media">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__reflect-illustration"></use>\n    </svg>\n  </div>\n</div>');
window.JST["course/components/student_reports/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No reports found</h2>\n  <p>We\'re sorry, we didn\'t find any reports for this date range.</p>\n</div>\n');window.JST["course/components/student_reports/header"]=_.template('<div class="studentReports__sectionsMenu"></div>\n<div class="studentReports__periodFilter"></div>\n');
window.JST["course/components/student_reports/knowledge/layout"]=_.template('<div class="knowledgeReport__info"></div>\n<div class="knowledgeReport__background">\n  <div  class="content">\n    <div class="knowledgeReport__stats"></div>\n  </div>\n</div>\n<div class="content">\n  <div class="knowledgeReport__body loading">\n    <div>\n      <p class="mobile__level hidden--l"></p>\n      <div class="knowledgeReport__report"></div>\n    </div>\n  </div>\n</div>\n');window.JST["course/components/student_reports/knowledge/list_row"]=
_.template('<div class="mobile-row">\n  {% if (isLastLevel()) { %}\n  <p>{{ name }}</p>\n  {% } else { %}\n  <a class="link" href="#" data-action="view">{{ name }}</a>\n  {% } %}\n\n  {% if (hasData()) { %}\n  <section class="chart">\n    <div class="chart__legend">\n      <div>\n        <img src="/images/icon_DSE-developing.svg"\n          alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.developing\') }}" />\n        <span>{{ developing }}%</span>\n      </div>\n      <div>\n        <img src="/images/icon_DSE-secure.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.secure\') }}" />\n        <span>{{ secure }}%</span>\n      </div>\n      <div>\n        <img src="/images/icon_DSE-extending.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.extending\') }}" />\n        <span>{{ extending }}%</span>\n      </div>\n    </div>\n    <div class="chart__progressBar">\n      {% if (developing) { %}\n      <div class="chart__progressSegment chart__progressSegment--developing" style="{{getWidth(\'developing\')}}"></div>\n      {% } %}\n      {% if (secure) { %}\n      <div class="chart__progressSegment chart__progressSegment--secure" style="{{getWidth(\'secure\') }}"></div>\n      {% } %}\n      {% if (extending) { %}\n      <div class="chart__progressSegment chart__progressSegment--extending" style="{{getWidth(\'extending\')}}"></div>\n      {% } %}\n    </div>\n  </section>\n  {% } else { %}\n  <p class="no-data">No data available</p>\n  {% } %}\n\n  <p>Questions answered: {{ questions }}</p>\n</div>');
window.JST["course/components/student_reports/knowledge/stats"]=_.template('<div class="stats-wrapper">\n  <section class="dseGraph">\n    \x3c!-- TODO: implement the stats DSE graph --\x3e\n    {% if (hasData()) { %}\n      <p class="mobile-text">Developing, Secure or Extending band</p>\n      <section class="chart">\n        <div class="chart__legend">\n          <div>\n            <img src="/images/icon_DSE-developing.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.developing\') }}" />\n            <span>{{ developing.percentage }}%</span>\n          </div>\n          <div>\n            <img src="/images/icon_DSE-secure.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.secure\') }}" />\n            <span>{{ secure.percentage }}%</span>\n          </div>\n          <div>\n            <img src="/images/icon_DSE-extending.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.extending\') }}" />\n            <span>{{ extending.percentage }}%</span>\n          </div>\n        </div>\n\n        <div class="chart__progressBar">\n          {% if (developing.percentage) { %}\n            <div class="chart__progressSegment chart__progressSegment--developing" style="{{getWidth(\'developing\')}}"></div>\n          {% } %}\n          {% if (secure.percentage) { %}\n            <div class="chart__progressSegment chart__progressSegment--secure" style="{{getWidth(\'secure\') }}"></div>\n          {% } %}\n          {% if (extending.percentage) { %}\n            <div class="chart__progressSegment chart__progressSegment--extending" style="{{getWidth(\'extending\')}}"></div>\n          {% } %}\n        </div>\n      </section>\n    {% } else { %}\n      <div class="helpCard">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__streamline-information-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n          <p class="helpCard__title">No data available</p>\n          <p>Your report will show data when you complete Start tasks and Level Ups.</p>\n        </div>\n      </div>\n    {% } %}\n  </section>\n  <div class="report-stat-item">\n    <div class="lozenge">\n      <div class="lozenge__icon">\n        <img src="/images/icon_questions.svg" alt="{{ I18n.t(\'ui.student_reports.knowledge.questions_answered\') }}" />\n      </div>\n      <div class="lozenge__text">\n        {{ questions }}\n      </div>\n    </div>\n    <p class="report-stat-item__heading">{{ I18n.t(\'ui.student_reports.knowledge.questions_answered\') }}</p>\n  </div>\n</div>\n');
window.JST["course/components/student_reports/knowledge/table"]=_.template('<thead>\n  <tr>\n    <th></th>\n    <th>Developing, Secure or Extending band</th>\n    <th>Questions answered</th>\n  </tr>\n</thead>\n<tbody class="knowledgeReport__table"></tbody>');window.JST["course/components/student_reports/knowledge/table_row"]=_.template('<td>\n    {% if (isLastLevel()) { %}\n        <p>{{ name }}</p>\n    {% } else { %}\n        <a class="link" href="#" data-action="view">{{ name }}</a>\n    {% } %}\n</td>\n<td>\n    {% if (hasData()) { %}\n        <section class="chart">\n            <div class="chart__legend">\n                <div>\n                    <img src="/images/icon_DSE-developing.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.developing\') }}" />\n                    <span>{{ developing }}%</span>\n                </div>\n                <div>\n                    <img src="/images/icon_DSE-secure.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.secure\') }}" />\n                    <span>{{ secure }}%</span>\n                </div>\n                <div>\n                    <img src="/images/icon_DSE-extending.svg" alt="{{ I18n.t(\'ui.teacher_reports.key_map.symbols.extending\') }}" />\n                    <span>{{ extending }}%</span>\n                </div>\n            </div>\n            <div class="chart__progressBar">\n                {% if (developing) { %}\n                    <div class="chart__progressSegment chart__progressSegment--developing" style="{{getWidth(\'developing\')}}"></div>\n                {% } %}\n                {% if (secure) { %}\n                    <div class="chart__progressSegment chart__progressSegment--secure" style="{{getWidth(\'secure\') }}"></div>\n                {% } %}\n                {% if (extending) { %}\n                    <div class="chart__progressSegment chart__progressSegment--extending" style="{{getWidth(\'extending\')}}"></div>\n                {% } %}\n            </div>\n        </section>\n    {% } else { %}\n        <p class="no-data">No data available</p>\n    {% } %}\n</td>\n<td><p class="question-answered">{{ questions }}</p></td>');
window.JST["course/components/student_reports/layout"]=_.template('<div class="section__wrapper">\n  <div class="section__header"></div>\n  <div class="section__body"></div>\n</div>');window.JST["course/components/student_reports/reactivate_task_panel"]=_.template('<div class="taskPanelWrapper">\n  <div class="labeledPanel">\n    <h3>Results</h3>\n    <div class="labeledPanel__item">\n      <label>Completed:</label>\n      <span>{{ submittedAt() }}</span>\n    </div>\n    <div class="labeledPanel__item mb--4x">\n      <label>Mark:</label>\n        <div class="collapseButtons">\n          <span>{{ markText() }}</span>  \n        </div>\n    </div>\n  </div>\n</div>\n\n<div class="taskPanelWrapper noBottomBorder">\n  <div class="labeledPanel">\n    <h3>About</h3>\n    <div class="labeledPanel__item">\n      <label>Content type: </label>\n      <span>{{ getItemType() }}</span>\n    </div>\n    <div class="labeledPanel__item">\n      <label>Assigned by: </label>\n      <span>{{ assigned_by }}</span>\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/student_reports/stats"]=_.template('<div class="section__stats" style="background-color: var(--ui-background)">\n  <div class="reportStatsGrid">\n    <div class="reportStatsGrid__item">\n      <div class="report-stat-item">\n        <div class="lozenge">\n          <div class="lozenge__icon">\n            <img src="/images/report-stats/icon_assignments.svg" alt="assignments" />\n          </div>\n          <div class="lozenge__text">\n            {{ assignments_completed }}\n          </div>\n        </div>\n        <h2 class="report-stat-item__heading">{{ I18n.t(\'ui.student_reports.stats.assignments_completed\') }}</h2>\n      </div>\n    </div>\n    {% if (showSmartFeatures()) { %}\n    <div class="reportStatsGrid__item">\n      <div class="report-stat-item">\n        <div class="lozenge">\n          <div class="lozenge__icon">\n            <img src="/images/report-stats/icon_levelups.svg" alt="assignments" />\n          </div>\n          <div class="lozenge__text">\n            {{ level_ups_completed }}\n          </div>\n        </div>\n        <h2 class="report-stat-item__heading">{{ I18n.t(\'ui.student_reports.stats.level_ups_completed\') }}</h2>\n      </div>\n    </div>\n    <div class="reportStatsGrid__item">\n      <div class="report-stat-item">\n        <div class="lozenge">\n          <div class="lozenge__icon">\n            <img src="/images/report-stats/icon_reactivates.svg" alt="assignments" />\n          </div>\n          <div class="lozenge__text">\n            {{ reactivates_completed }}\n          </div>\n        </div>\n        <h2 class="report-stat-item__heading">{{ I18n.t(\'ui.student_reports.stats.reactivates_completed\') }}</h2>\n      </div>\n    </div>\n    {% } %}\n    {% if (showSelfStudyFeature()) { %}\n    <div class="reportStatsGrid__item">\n      <div class="report-stat-item">\n        <div class="lozenge">\n          <div class="lozenge__icon">\n            <img src="/images/report-stats/icon_selfstudy.svg" alt="assignments" />\n          </div>\n          <div class="lozenge__text">\n            {{ self_study_completed }}\n          </div>\n        </div>\n        <h2 class="report-stat-item__heading">{[ I18n.t(\'ui.student_reports.stats.self_study_completed\') ]}</h2>\n      </div>\n    </div>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/components/student_reports/student_cell"]=_.template('<th class="scrollableTable__cell">\n    {% if (hasPlainHeader()) { %}\n      {% if (hasBadge()) { %}\n      <span class="label badge badge--{{ badge.type }}">\n        {% if (badge.type == \'smart\') { %}\n          <svg aria-hidden="true" viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n        {% } else { %}\n          {{ badge.text }}\n        {% } %}\n      </span>\n      {% } %}\n      {{ header }}\n    {% } else { %}\n    <a href="#" data-tooltip="{{ header }}" data-action="open" data-event="{{ event }}">\n      <span role="text">\n        {% if (hasBadge()) { %}\n          <span class="label badge badge--{{ badge.type }}">\n            {% if (badge.type == \'smart\') { %}\n              <svg aria-hidden="true" viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n            {% } else { %}\n              {{ badge.text }}\n            {% } %}\n          </span>\n        {% } %}\n        {{ header }}\n        {% if (hasSmartBadge()) { %}\n            <span class="a11y-hide">{{ I18n.t(\'ui.student_reports.cell.next_steps\') }}</span>\n        {% } %}\n      </span>\n    </a>\n    {% } %}\n</th>\n{% cells.forEach(cell => { %}\n  <td class="scrollableTable__cell scrollableTable__cell--alignCenter {[ extraClass(cell) ]}">{[ value(cell) ]}</td>\n{% }) %}\n');
window.JST["course/components/student_reports/task_panel"]=_.template('{% if (isCompleted()) { %}\n  <div class="taskPanelWrapper">\n    <div class="labeledPanel">\n        <h3>Results</h3>\n        <div class="labeledPanel__item">\n          <label>Completed:</label>\n          <span>{{ submittedAt() }}</span>\n        </div>\n\n        <div>\n          <div class="labeledPanel__item">\n            <label>Mark:</label>\n              <div class="collapseButtons">\n                {% if (isMarkAwaiting()) { %}\n                  <span><i>Awaiting</i></span> \n                {% } else { %}\n                  <span>{{ markText() }}</span>  \n                {% } %}\n                <a href="#" data-action="show:more">Show marks</a>\n                <a href="#" class="hidden" data-action="show:less">Hide marks</a>\n              </div>\n          </div>\n          <div class=" labeledPanel labeledPanel--collapsible labeledPanel--collapsed">\n            {% if (hasQuestions()) { %}\n              <div class="labeledPanel__item mt--4x">\n                {% questions.forEach((question, index) => { %}\n                  <p>\n                    <a href="#" data-action="open:question" data-index="{{index}}">Q{{ index + 1 }}</a>\n                    <span>{{ questionMarkText(question) }} </span>\n                  </p>\n                {% }) %}\n              </div>\n            {% } else { %}\n              <span><em>None added</em></span>\n            {% } %}\n          </div>\n      </div>\n\n      <div class="labeledPanel__item">\n        <label>DSE band:</label>\n        <span>\n          {% if (dse) { %}\n            <span class="badge badge--rectangular {{ dseClassName() }}">\n              {{ dse }}\n            </span>\n          {% } else { %}\n            <span>n/a</span>\n          {% } %}\n        </span>\n      </div>\n\n    </div>\n  </div>\n\n  \x3c!-- <div class="taskPanelWrapper">\n    <div class="labeledPanel">\n      <h3>Points earned</h3>\n      <div class="points-badge mb--4x">\n        <img class="points-badge__icon" src="/images/icon_points.svg" />\n        <span class="points-badge__display">{{ points }}</span>\n      </div>\n    </div>\n  </div> --\x3e\n{% } %}\n\n<div class="taskPanelWrapper noBottomBorder">\n  <div class="labeledPanel">\n    <h3>About</h3>\n    {% if (hasSubject()) { %}\n    <div class="labeledPanel__item">\n      <label>Subject:</label>\n      <span>{{ subjectText() }}</span>\n    </div>\n    {% } %}\n    {% if (hasCurriculum()) { %}\n    <div class="labeledPanel__item">\n      <label>{{ curriculum.label }}:</label>\n      <span>{{ curriculum.titles }}</span>      \n    </div>\n    {% } %}\n    <div class="labeledPanel__item">\n      <label>Content type: </label>\n      <span>{{ getItemType() }}</span>\n    </div>\n\n    {% if (isLevelUp()) { %}\n      <div class="labeledPanel__item">\n        <label>Start task: </label>\n        <span>{{ trigger_task }}</span>\n      </div>\n      <div class="labeledPanel__item">\n        <label>Assigned by: </label>\n        <span>Kerboodle</span>\n      </div>\n    {% } else { %}\n      <div class="labeledPanel__item">\n        <label>Assigned by: </label>\n        <span>{{ assignedBy() }}</span>\n      </div>\n\n      <div class="labeledPanel__item">\n        <label>Resource title: </label>\n        <span>{{ task }}</span>\n      </div>\n\n      {% if (showSupport()) { %}\n      <div class="labeledPanel__item mb--4x">\n        <label>Support:</label>\n        {% if (hasSupportContents()) { %}\n          <div>\n            {% student_contents.forEach((content, index) => { %}\n              <a href="#" data-action="open:student_content" data-index="{{index}}">{{ content.name }}</a>\n            {% }) %}\n          </div>\n        {% } else { %}\n          <span><em>None added</em></span>\n        {% } %}\n      </div>\n      {% } %}\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/components/student_reports/tasks_layout"]=_.template('\x3c!-- This needs to cover the whole width of the screen, and the background-color must be dynamic --\x3e\n<div class="studentReports__stats"></div>\n<div class="studentReports__tasksReport"></div>');window.JST["course/components/subscriptions_panel/body"]=_.template('<table class="table">\n  <thead>\n    <tr>\n      <th class="table__cell">{{I18n.t(\'ui.courses.lenses.home.subscriptions.product\')}}</th>\n      <th class="table__cell table__cell--center">{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}</th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n');
window.JST["course/components/subscriptions_panel/subscription"]=_.template('<td class="table__cell">{{name}}</td>\n<td class="table__cell table__cell--center">\n  {% if (isSubscribed()) { %}\n  <svg class="icon icon--smallest" aria-label="{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}" tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n    <use xlink:href="#svg__tick"></use>\n  </svg>\n  {% } else { %}\n  <a href="{{url}}" target="_blank">{{I18n.t(\'ui.courses.lenses.home.subscriptions.buy\')}}</a>\n  {% } %}\n</td>\n');
window.JST["course/components/teacher_markbook_panel/body"]=_.template('<div class="sidepanel__markbook__menu"></div>\n<div class="sidepanel__markbook__overview sidepanel__markbook__content" data-id="overview"></div>\n<div class="sidepanel__markbook__to_mark sidepanel__markbook__content" data-id="to_mark"></div>\n<div class="sidepanel__markbook__not_submitted sidepanel__markbook__content" data-id="not_submitted"></div>\n<div class="sidepanel__markbook__marked sidepanel__markbook__content" data-id="marked"></div>');
window.JST["course/components/teacher_markbook_panel/footer"]=_.template('<ul class="navigationTabs sidepanel__markbook__footer__menu">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <button type="button" class="navigationTabs__button" data-event="overview">\n      <span>{{ I18n.t(\'ui.markbook.overview\') }}</span>\n    </button>\n  </li>\n  {% if (showToMarkSection()) { %}\n  <li class="navigationTabs__item">\n    <button type="button" class="navigationTabs__button" data-event="to_mark">\n      <span>{{ I18n.t(\'ui.markbook.to_mark\') }} <span class="badge {{ toMarkCount() ? \'\' : \'badge--muted\' }}">{{ toMarkCount() }}</span></span>\n    </button>\n  </li>\n  {% } else { %}\n  <li class="navigationTabs__item">\n    <button type="button" class="navigationTabs__button" data-event="not_submitted">\n      <span>{{ I18n.t(\'ui.markbook.not_submitted\') }} <span class="badge badge--muted">{{ notSubmittedCount() }}</span></span>\n    </button>\n  </li>\n  {% } %}\n  <li class="navigationTabs__item navigationTabs__item--disabled">\n    <button type="button" class="navigationTabs__button" data-event="more">\n      <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-elipses"></use>\n      </svg>\n    </button>\n  </li>\n</ul>\n<div class="sidepanel__markbook__footer__morePanel">\n  <ul class="navigationTabs">\n    {% if (showToMarkSection()) { %}\n    <li class="navigationTabs__item">\n      <button type="button" class="navigationTabs__button" data-event="not_submitted">\n        <span>{{ I18n.t(\'ui.markbook.not_submitted\') }} <span class="badge badge--muted">{{ notSubmittedCount() }}</span></span>\n      </button>\n    </li>\n    {% } %}\n    <li class="navigationTabs__item">\n      <button type="button" class="navigationTabs__button" data-event="marked">\n        <span>{{ markedLabel() }} <span class="badge badge--muted">{{ markedCount() }}</span></span>\n      </button>\n    </li>\n  </ul>\n</div>\n');
window.JST["course/components/teacher_markbook_panel/menu"]=_.template('<ul class="navigationTabs hidden visible--l">\n  <li class="navigationTabs__item navigationTabs__item--active">\n    <button type="button" class="navigationTabs__button" data-event="overview">\n      <span>{{ I18n.t(\'ui.markbook.overview\') }}</span>\n    </button>\n  </li>\n  {% if (showToMarkSection()) { %}\n  <li class="navigationTabs__item">\n    <button type="button" class="navigationTabs__button" data-event="to_mark">\n      <span>{{ I18n.t(\'ui.markbook.to_mark\') }} <span class="badge {{ toMarkCount() ? \'\' : \'badge--muted\' }}">{{ toMarkCount() }}</span></span>\n    </button>\n  </li>\n  {% } %}\n  <li class="navigationTabs__item">\n    <button type="button" class="navigationTabs__button" data-event="not_submitted">\n      <span>{{ I18n.t(\'ui.markbook.not_submitted\') }} <span class="badge badge--muted">{{ notSubmittedCount() }}</span></span>\n    </button>\n  </li>\n  <li class="navigationTabs__item">\n    <button type="button" class="navigationTabs__button" data-event="marked">\n      <span>{{ markedLabel() }} <span class="badge badge--muted">{{ markedCount() }}</span></span>\n    </button>\n  </li>\n</ul>\n<div class="sidepanel__markbook__menu__actions">\n  {% if (showArchive()) { %}\n  <div class="buttonWithFeedback">\n    <button role="button" class="button button--secondary" data-action="archive">{{ I18n.t(\'ui.assignments.archive\') }}</button>\n    <div class="message message--inline" data-event="archived">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      {{ I18n.t(\'ui.markbook.archived\') }}\n    </div>\n  </div>\n  {% } %}\n  {% if (showUnarchive()) { %}\n  <div class="buttonWithFeedback">\n    <button role="button" class="button button--secondary" data-action="unarchive">{{ I18n.t(\'ui.assignments.unarchive\') }}</button>\n    <div class="message message--inline" data-event="unarchived">\n      <svg viewBox="0 0 1 1" class="icon icon--default">\n        <use xlink:href="#svg__streamline-done-small"></use>\n      </svg>\n      {{ I18n.t(\'ui.markbook.unarchived\') }}\n    </div>\n  </div>\n  {% } %}\n  <button role="button" class="button button--secondary" data-action="withdraw">{{ I18n.t(\'ui.assignments.withdraw\') }}</button>\n</div>');
window.JST["course/components/teacher_markbook_panel/overview/layout"]=_.template('<div class="row sidepanel__markbook__overview__main">\n  <div class="col">\n    <div class="sidepanel__markbook__overview__item">\n      <span class="sidepanel__markbook__overview__item__label">{{ I18n.t(\'ui.assignments.start_date\') }}:</span>\n      {{ startDate() }}\n    </div>\n    <div class="sidepanel__markbook__overview__item">\n      <span class="sidepanel__markbook__overview__item__label">{{ I18n.t(\'ui.assignments.due_date\') }}:</span>\n      <div class="sidepanel__markbook__overview__due" data-mode="read">\n        <span class="value">{{ dueDate() }}</span>\n        <div class="editBlock">\n          <input type="text" class="form__input" name="due" value="{{ dueDate() }}">\n          <div class="buttons">\n            <button class="button button--primary" data-action="saveDue">{{ I18n.t(\'ui.common.save\') }}</button>\n            <button class="button button--secondary" data-action="cancelDue">{{ I18n.t(\'ui.common.cancel\') }}</button>\n          </div>\n          <div class="message" data-event="dueChanged">\n            <svg viewBox="0 0 1 1" class="icon icon--default">\n              <use xlink:href="#svg__streamline-done-small"></use>\n            </svg>\n            {{ I18n.t(\'ui.markbook.due_changed\') }}\n          </div>\n        </div>\n        <a href="#" role="button" data-action="editDue" class="link">\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-edit"></use>\n          </svg>\n          <span class="a11y-hide">Edit</span>\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class="col">\n    <div class="sidepanel__markbook__overview__item">\n      <span class="sidepanel__markbook__overview__item__label">{{ I18n.t(\'ui.markbook.assigned_by\') }}:</span>\n      {{ assigned_by }}\n    </div>\n    <div class="sidepanel__markbook__overview__item">\n      <span class="sidepanel__markbook__overview__item__label">{{ I18n.t(\'ui.markbook.assigned_to\') }}:</span>\n      {{ assignedTo() }}\n    </div>\n  </div>\n</div>\n<div class="row sidepanel__markbook__overview__secondary">\n  <div class="col">\n    <div class="sidepanel__markbook__overview__item">\n      <div class="sidepanel__markbook__overview__item__header">Resource title</div>\n      <a data-action="open" role="button" class="link underline" href="#">\n        {% if (smart) { %}\n          <span class="label badge badge--smart">\n           <svg viewBox="0 0 1 1">\n             <use xlink:href="#svg__icon_small_smart"></use>\n           </svg>\n          </span>\n        {% } %}\n        {[ testName() ]}\n      </a>\n\n      <div class="badgeList">\n        {% if (showTestActivity()) { %}\n        <span class="badge badge--meta">{{ testActivity() }}</span>\n        {% } %}\n        {% if (showTestExtension()) { %}\n        <span class="badge badge--meta">{{ testExtension() }}</span>\n        {% } %}\n      </div>\n    </div>\n    <div class="sidepanel__markbook__overview__item">\n      <div class="sidepanel__markbook__overview__item__header">{{ I18n.t(\'ui.assignments.description\') }}</div>\n      {{ testDescription() }}\n    </div>\n    {% if (showDescription()) { %}\n    <div class="sidepanel__markbook__overview__item">\n      <div class="sidepanel__markbook__overview__item__header">{{ I18n.t(\'ui.assignments.instructions\') }}</div>\n      {{ description }}\n    </div>\n    {% } %}\n  </div>\n  <div class="col">\n    <div class="sidepanel__markbook__overview__item">\n      <div class="sidepanel__markbook__overview__item__header">{{ I18n.t(\'ui.assignments.marks\') }}</div>\n      {{ hasPoints() ? points : I18n.t(\'ui.assignments.no_marks\') }}\n    </div>\n\n    <div class="sidepanel__markbook__overview__item">\n      <div class="sidepanel__markbook__overview__item__header">{{ I18n.t(\'ui.assignments.support_material\') }}</div>\n      {% if (hasSupportContents()) { %}\n      <ul>\n        {% support_contents.forEach((content, index) => { %}\n        <li>\n          <a href="#" class="link underline" data-action="open:support" data-index="{{index}}">{{ content.name }}</a>\n        </li>\n        {% }) %}\n      </ul>\n      {% } else { %}\n      {{ I18n.t(\'ui.assignments.student_assignment.no_materials\') }}\n      {% } %}\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/assignment_panel"]=_.template('<div>\n  <div class="assignmentPanelWrapper">\n    <div class="assignmentLabelPanelWrapper gappedContainer gappedContainer--inline gappedContainer--mb">\n      <div class="labeledPanel">\n        {% if (showSubject()) { %}\n        <div class="labeledPanel__item">\n          <label>{{ I18n.t(\'ui.teacher_reports.assignment_panel.subject\') }}:</label>\n          <span>{{ subject }}</span>\n        </div>\n        {% } %}\n        {% if (showCurriculum()) { %}\n        <div class="labeledPanel__item">\n          <label>{{ curriculum.label }}:</label>\n          <span>{{ curriculum.titles }}</span>\n        </div>\n        {% } %}\n        <div class="labeledPanel__item">\n          <label>{{ I18n.t(\'ui.teacher_reports.assignment_panel.assigned_by\') }}:</label>\n          <span>{{ assigned_by }}</span>\n        </div>\n        <div class="labeledPanel__item">\n          <label>{{ I18n.t(\'ui.teacher_reports.assignment_panel.start_date\') }}:</label>\n          <span>{{ startDate() }}</span>\n        </div>\n        <div class="labeledPanel__item">\n          <label>{{ I18n.t(\'ui.teacher_reports.assignment_panel.due_date\') }}:</label>\n          <span>{{ dueDate() }}</span>\n        </div>\n      </div>\n\n      <div class="buttonsWrapper">\n        <button class="button button--secondary" data-action="show:more">See more</button>\n        <button class="button button--secondary hidden" data-action="show:less" class="hidden">See less</button>\n        <button class="button button--secondary exportButton__mobile" data-action="export">Export CSV</button>\n      </div>\n\n      <div\n        class="\n          labeledPanel labeledPanel--collapsible labeledPanel--collapsed\n        "\n      >\n        <div class="labeledPanel__item">\n          <label>Resource title: </label>\n          <a href="#" data-action="open:test">{{ test_content.name }}</a>\n        </div>\n        <div class="labeledPanel__item">\n          <label> Instructions: </label>\n          {% if (description) { %}\n          <span>{{ description }}</span>\n          {% } else { %}\n          <em>None added</em>\n          {% } %}\n        </div>\n        <div class="labeledPanel__item">\n          <label>Support:</label>\n          {% if (_(support_contents).isEmpty()) { %}\n          <em>None added</em>\n          {% } else { %}\n          <div>\n            {% support_contents.forEach((content, index) => { %}\n            <a href="#" data-action="open:support" data-index="{{index}}">{{ content.name }}</a>\n            {% }) %}\n          </div>\n          {% } %}\n        </div>\n      </div>\n    </div>\n    <div class="dseSummary__mobileDivider"></div>\n    <div class="dseSummaryWrapper">\n      {% if (showAverageMark()) { %}\n      <div class="averageMarkContainer">\n        <p class="averageMark__heading">\n          {{ I18n.t(\'ui.teacher_reports.assignment_panel.average_mark\') }}\n        </p>\n        <span class="averageMark__labelColon">:</span>\n        <div class="averageMark__widgetWrapper">\n          <div class="DESReport__widget">\n            <p class="DESReport__widgetLabel">{{ averageMark() }}</p>\n            <p class="DESReport__widgetLabel average__percentsLabel">({{ averageMarkPercent() }})</p>\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (showSummary()) { %}\n      <div class="summaryContainer">\n        <p class="summary__heading">\n          {{ I18n.t(\'ui.teacher_reports.assignment_panel.dse_summary\') }}\n        </p>\n        <div class="summary"></div>\n      </div>\n      {% } %}\n    </div>\n    <div>\n      <button class="button button--secondary hidden visible--l" data-action="export">Export CSV</button>\n    </div>\n  </div>\n\n  <div>\n    {% if (isNotSmart()) { %}\n    <button aria-label="Open Key Map" class="reportTable__keyMap-button" data-action="openKeyMap">\n      <div class="img__wrapper">\n        <img src="/images/icon_information.svg"/>\n      </div>\n      <span>Key</span>\n    </button>\n    {% } %}\n  </div>\n  <div class="reportTable"></div>\n  <div class="keyMap"></div>\n</div>\n');
window.JST["course/components/teacher_reports/body"]=_.template('<div\n  class="scrollable-table scrollable-table--has-end-overflow"\n  style="display: block"\n>\n  <div class="scrollable-table__wrapper">\n    <table\n      class="\n        scrollable-table__table\n        scrollable-table__table--striped\n        scrollable-table__table--bordered\n        scrollable-table__table--with-floating-labels\n      "\n    >\n      <thead>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__pocket">\n              you can put some content here as well\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Student name\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="\n                  scrollable-table__circular-sort\n                  scrollable-table__circular-sort--asc\n                "\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Mark\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n          <th class="scrollable-table__cell">\n            <div class="scrollable-table__caption-link">\n              <a href="#" data-action="open"\n                >Assignment name with some long text that must go here</a\n              >\n            </div>\n            <div class="scrollable-table__cell-heading">\n              Status\n              <button\n                aria-label="sort-asc"\n                type="button"\n                class="scrollable-table__circular-sort-options"\n              ></button>\n            </div>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr class="scrollable-table__row scrollable-table__row--dark">\n          <th class="scrollable-table__cell">Class Average</th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/7\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Anna Prior</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Emerson Allman</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Gabriel Stebbing</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Joseph Mount</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Kiana Lord</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Olugbenga Adelekan</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Oscar Cash</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Student #8</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Student #9</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n        <tr class="scrollable-table__row">\n          <th class="scrollable-table__cell">\n            <a href="#">Student #10</a>\n          </th>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            7/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2014\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2718\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/9\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            6/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            8/8\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u27cb\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n          <td\n            class="scrollable-table__cell scrollable-table__cell--align-center"\n          >\n            \u2714\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/dse_summary/empty"]=_.template('<div class="helpCard">\n    <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n    </div>\n    <div class="helpCard__content">\n        <p class="helpCard__title">No data available</p>\n        <p>Assign start tasks to your students to generate data</p>\n    </div>\n</div>\n');window.JST["course/components/teacher_reports/dse_summary/layout"]=
_.template('<section class="chart" style="{{ cssVars() }}">\n  <div class="chart__legend"></div>\n\n  <div class="chart__progressBar">\n    <div class="chart__progressSegment chart__progressSegment--developing"></div>\n    <div class="chart__progressSegment chart__progressSegment--secure"></div>\n    <div class="chart__progressSegment chart__progressSegment--extending"></div>\n  </div>\n</section>\n');window.JST["course/components/teacher_reports/dse_summary/legend_item"]=_.template('<div class="chart__legendItem chart__legendItem--{{ dse }}">\n  <div class="chart__lineContainer">\n    <div class="chart__lineContainerDiagonal">\n      <div class="chart__line"></div>\n    </div>\n    <div class="chart__lineContainerVertical"></div>\n  </div>\n  <div class="chart__dataContainer">\n    <p class="chart__percentage">\n      <strong>{{ percentage }}%</strong>\n      {{ label() }}\n    </p>\n    {% if (showValue()) { %}\n    |\n    <div class="{{ valueClass() }}">\n      {% if (showValueLink()) { %}\n      <a class="chart__value" href="#" data-action="view:by_dse" data-dse="{{ dse }}">\n        <svg viewBox="0 0 20 20" class="chart__valueIcon">\n          <use xlink:href="#svg__icon-user"></use>\n        </svg>\n        {{ value }}\n      </a>\n      {% } else { %}\n      <svg viewBox="0 0 20 20" class="chart__valueIcon">\n        <use xlink:href="#svg__icon-user"></use>\n      </svg>\n      {{ value }}\n      {% } %}\n    </div>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No reports found</h2>\n  <p>We\'re sorry, we didn\'t find any reports for this group or date range.</p>\n</div>\n');window.JST["course/components/teacher_reports/file_uploads"]=_.template('<div class="modal-header">\n  <h3>Uploaded</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body teacherReports__fileUploads">\n  <div class="row-fluid" role="alert" aria-atomic="true" aria-live="assertive">\n    <ul>\n      {% contents.forEach((content, index) => { %}\n      <li>\n        <a href="#" data-action="open" data-index="{{ index }}" class="link">\n          <svg viewBox="0 0 40 40">\n            <use xlink:href="#svg__streamline-upload"></use>\n          </svg>\n          {{ content.name }}\n        </a>\n      </li>\n      {% }) %}\n    </ul>\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/header"]=_.template('<div>\n  <div class="teacherReports__sectionsMenu"></div>\n  <div class="teacherReports__groupFilter"></div>  \n</div>\n\n<div class="flex">\n  <div class="teacherReports__datesFilter"></div>\n  <div class="teacherReports__filters"></div>\n  {% if (showExport()) { %}\n    <button role="button" class="button button--secondary hidden visibleInline--l" data-action="export">\n      {{ I18n.t(\'ui.actions.csvexport\') }} \n    </button>\n\n    <button role="button" class="button button--icon hidden--l mr--4x" data-action="export">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__download"></use>\n      </svg>\n    </button>\n  {% } %}\n</div>\n\n');
window.JST["course/components/teacher_reports/key_map"]=_.template('<button aria-label="Open Key Map" class="reportTable__keyMap-button" data-action="openKeyMap">\n    <div class="img__wrapper">\n        <img src="/images/icon_information.svg"/>\n    </div>\n    <span>Key</span>\n</button>\n');window.JST["course/components/teacher_reports/knowledge/empty"]=_.template('<div class="infoCard">\n  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n\n  <h2>No reports found</h2>\n  <p>We\'re sorry, we didn\'t find any reports for this group.</p>\n</div>\n');
window.JST["course/components/teacher_reports/knowledge/info"]=_.template('<div class="knowledgeReport__breadcrumbs">\n  {% breadcrubms.forEach((node, index) => { %}\n\n    {% if (index != 0) { %}\n      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><text data-name="\u276f" transform="translate(6 17)" style="fill:#575757;font-size:16px;font-family:ZapfDingbatsITC,\'.Apple Symbols Fallback\'"><tspan x="0" y="0">\u276f</tspan></text><path data-name="Rectangle 3053" style="fill:none" d="M0 0h20v20H0z"/></svg>\n    {% } %}\n\n    {% if (index == breadcrubms.length - 1) { %}\n      <p class="breadcrumbs__current-location">{{ node.name }}</p>\n    {% } else { %}\n  <a href="#" data-tooltip="{{ node.name }}" data-action="view:node" data-id="{{ node.id }}">\n    <span>{{ node.name }}</span>\n  </a>\n    {% } %}\n  {% }) %}\n</div>\n');
window.JST["course/components/teacher_reports/knowledge/layout"]=_.template('<div class="knowledgeReport__info"></div>\n<div class="knowledgeReport__stats"></div>\n<div class="knowledgeReport__body loading">\n  <div class="knowledgeReport__misconceptions knowledgeReport__misconceptions--empty"></div>\n  <div class="knowledgeReport__table knowledgeReport__table--wide-header"></div>\n</div>\n');window.JST["course/components/teacher_reports/knowledge/row"]=_.template('<th class="scrollableTable__cell">\n  {% if (hasPlainHeader()) { %}\n  <div data-tooltip="{{ header }}">\n    <span>{{ header }}</span>\n  </div>\n  {% } else { %}\n  <a href="#" data-tooltip="{{ header }}" data-action="open" data-event="{{ event }}">\n    <span>{{ header }}</span>\n  </a>\n  {% } %}\n</th>\n{% cells.forEach(cell => { %}\n<td class="scrollableTable__cell scrollableTable__cell--alignCenter {[ extraClass(cell) ]}" {[ colspan(cell) ]}>{[ value(cell) ]}</td>\n{% }) %}\n');
window.JST["course/components/teacher_reports/knowledge/stats"]=_.template('<div class="DESReport">\n  <div class="DESReport__heading-wrapper">\n  <p class="DESReport__heading">\n    {{ I18n.t(\'ui.teacher_reports.knowledge.dse_summary\') }}\n  </p>\n    <section class="summary"></section>\n  </div>\n  <div class="DESReport__questionsContainer">\n    <p class="DESReport__questionsLabelContainer">\n      <span>{{ I18n.t(\'ui.teacher_reports.knowledge.questions_answered\') }}</span><span class="DESReport__questionsLabelColon">:</span>\n    </p>\n    <div>\n      <div class="DESReport__widget">\n        <div class="DESReport__widgetIcon"></div>\n        <p class="DESReport__widgetLabel">{{ questions }}</p>\n      </div>\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/layout"]=_.template('<div class="section__wrapper">\n  <div class="section__header"></div>\n  <div class="section__body"></div>\n</div>\n<div class="teacherReports__panel"></div>\n<div class="keyMap__overlay"></div>\n');window.JST["course/components/teacher_reports/marks_toggle"]=_.template('x/x\n<label class="marksToggle">\n  <input type="checkbox" value="true" {{ isChecked() ? \'checked\' : \'\' }}>\n  <span class="marksToggle__icon"></span>\n</label>\n<sup>%</sup>');
window.JST["course/components/teacher_reports/misconception/student_list_item"]=_.template('<strong>{{ last_name }}, {{ first_name }}</strong>\n<div class="teacherReports__misconception-student-list-result-wrapper">\n    <div class="teacherReports__misconception-student-list-item-labels">\n        <p>Times selected:</p>\n        <p>Last selected:</p>\n    </div>\n    <div class="teacherReports__misconception-student-list-item-values">\n        <p>{{ times_selected }}</p>\n        <p>{{ lastSelected() }}</p>\n    </div>\n</div>\n');
window.JST["course/components/teacher_reports/misconception/student_list_panel"]=_.template('<div class="teacherReports__misconception-student-list__count">\n    <svg viewBox="0 0 20 20">\n      <use xlink:href="#svg__icon-user"></use>\n    </svg>\n    <span>{{ count() }}</span> \n  </div>\n  <div class="teacherReports__misconception-student-list__sorter"></div>\n  <div class="teacherReports__misconception-student-list__list"></div>');window.JST["course/components/teacher_reports/reactivate_panel"]=
_.template('<div class="assignmentPanelWrapper">\n  <div class="labeledPanel">\n    <h3>Results</h3>\n    <div class="labeledPanel__item">\n      <label>Date completed:</label>\n      <span>{{ submittedAt() }}</span>\n    </div>\n    <div class="labeledPanel__item mb--4x">\n      <label>Mark:</label>\n      <span>{{ markText() }}</span>\n    </div>\n  </div>\n</div>\n\n<div class="assignmentPanelWrapper">\n  <div class="labeledPanel">\n    <h3>About</h3>\n    <div class="labeledPanel__item">\n      <label>Assigned by:</label>\n      <span>{{ assigned_by }}</span>\n    </div>\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/student_assignment_panel"]=_.template('<div class="assignmentPanelWrapper">\n  <div class="labeledPanel">\n    <h3>Results</h3>\n    <div class="labeledPanel__item">\n      <label>Status:</label>\n      <span>\n        <span class="badge badge--muted">{{ isCompleted() ? \'Completed\' : \'Not completed\' }}</span>\n      </span>\n    </div>\n\n    {% if (isCompleted()) { %}\n      <div class="labeledPanel__item">\n        <label>Date completed:</label>\n        <span>{{ submittedAt() }}</span>\n      </div>\n      <div class="labeledPanel__item">\n        <label>Mark:</label>\n        <span>\n          <span class="{{ markClassName() }}">{{ markText() }}</span>\n          {% if (showReviewAnswers()) { %}\n          <a href="#" data-action="open:test:review">Review answers</a>\n          {% } %}\n        </span>\n      </div>\n      \n      {% if (showStudentContents()) { %}\n      <div class="labeledPanel__item">\n        <label>File upload:</label>\n        {% if (hasStudentContents()) { %}        \n        <div>\n          {% student_contents.forEach((content, index) => { %}\n          <a href="#" data-action="open:student_content" data-index="{{index}}">{{ content.name }}</a>\n          {% }) %}\n        </div>\n        {% } else { %}\n        <em>None added</em>\n        {% } %}\n      </div>\n      {% } %}\n    {% } %}\n\n  </div>\n</div>\n\n<div class="assignmentPanelWrapper">\n  <div class="labeledPanel">\n    <h3>About</h3>\n    {% if (!isSelfStudy()) { %}\n    <div class="labeledPanel__item">\n      <label>Start date:</label>\n      <span>{{ startDate() }}</span>\n    </div>\n    <div class="labeledPanel__item">\n      <label>Due date:</label>\n      <span>{{ dueDate() }}</span>\n    </div>\n    {% } %}\n    <div class="labeledPanel__item">\n      <label>Assigned by:</label>\n      <span>{{ assignment.assigned_by }}</span>\n    </div>\n    <div class="labeledPanel__item">\n      <label>Resource title: </label>\n      <a href="#" data-action="open:test">{{ assignment.test_content.name }}</a>\n    </div>\n    {% if (!isSelfStudy()) { %}\n    <div class="labeledPanel__item">\n      <label> Instructions: </label>\n      {% if (assignment.description) { %}\n      <span>{{ assignment.description }}</span>\n      {% } else { %}\n      <em>None added</em>\n      {% } %}\n    </div>\n    <div class="labeledPanel__item">\n      <label>Support:</label>\n      {% if (hasSupportContents()) { %}\n      <div>\n        {% assignment.support_contents.forEach((content, index) => { %}\n        <a href="#" data-action="open:support" data-index="{{index}}">{{ content.name }}</a>\n        {% }) %}\n      </div>\n      {% } else { %}\n      <em>None added</em>\n      {% } %}\n    </div>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/components/teacher_reports/student_cell"]=_.template('<th class="scrollableTable__cell">\n    {% if (hasPlainHeader()) { %}\n        {{ header }}\n    {% } else { %}\n    <a href="#" data-action="open" data-tooltip="{{ header }}" data-event="{{ event }}" class="studentCell__link">\n        <span role="text">\n          {% if (hasBadge()) { %}\n            <span class="label badge badge--{{ badge.type }}">\n              {% if (badge.type == \'smart\') { %}\n                <svg aria-hidden="true" viewBox="0 0 1 1"><use xlink:href="#svg__icon_small_smart"></use></svg>\n              {% } else { %}\n                {{ badge.text }}\n              {% } %}\n            </span>\n          {% } %}\n          {{ header }}\n          {% if (hasSmartBadge()) { %}\n            <span class="a11y-hide">{{ I18n.t(\'ui.student_reports.cell.next_steps\') }}</span>\n          {% } %}\n        </span>\n    </a>\n    {% } %}\n  </th>\n  {% cells.forEach(cell => { %}\n  <td class="scrollableTable__cell scrollableTable__cell--alignCenter {[ extraClass(cell) ]}">{[ value(cell) ]}</td>\n  {% }) %}\n');
window.JST["course/components/teacher_reports/student_header_cell"]=_.template('<div class="scrollableTable__pocket">\n  <div class="keyMap"></div>\n  <div class="marksToggle"></div>\n</div>\n{% columns.forEach(column => { %}\n<div id="{{ formatAriaLabelName(column.name) }}" class="scrollableTable__cellHeading" >\n  {{ column.name }}\n  <button aria-labelledby="{{ formatAriaLabelName(column.name) }}" type="button" class="{{ sortClassName(column.sortColumn) }}" data-action="sort" data-sort-column="{{ column.sortColumn }}"></button>\n</div>\n{% }) %}\n');
window.JST["course/components/teacher_reports/student_list_panel"]=_.template('<div class="teacherReports__studentList__count">\n  <svg viewBox="0 0 20 20">\n    <use xlink:href="#svg__icon-user"></use>\n  </svg>\n  <span>{{ count() }}</span> \n</div>\n<div class="teacherReports__studentList__sorter"></div>\n<div class="teacherReports__studentList__list"></div>');window.JST["course/components/teacher_reports/student_report_layout"]=_.template('<div class="teacherReports__actionPanel__studentReport">\n    <div class="teacherReports__keyMap"></div>\n    <div class="teacherReports__marksToggle"></div>\n</div>\n<div class="teacherReports__studentReport"></div>\n');
window.JST["course/dialog/copy/form"]=_.template('<form class="form-horizontal form-small">\n  {% if (can(\'read\', permissionsKey)) { %}\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.copy.node.name\') }}</label>\n    <div class="controls title-input">\n      <input class="row-fluid" name="newName" type="text" maxlength="{{gon.limits.structure.name}}" {[ can(\'write\', permissionsKey) ? \'\' : \'disabled="disabled"\' ]} />\n    </div>\n  </div>\n  {% } %} \n</form>');
window.JST["course/dialog/copy/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.copy.node.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body form-horizontal form-small">\n  <div id="copy-node-fields" class="main">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.copy.node.parent\') }}</label>\n    <div class="controls">\n      <div id="copy-node-tree" class="main modal-node-tree dialog-fix">\n        \x3c!--div class="loader"></div--\x3e\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.abbr_submit\') }}" />\n  </div>\n</div>\n');
window.JST["course/dialog/copy_link_to_vle/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.actions.copy_link_to_vle\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <div class="control-group">\n      <div class="controls">\n        <label>{{ I18n.t(\'ui.common.copy_to_clipboard\') }}</label>\n        <div class="well well-small">\n          <p class="vle_link">{{ link }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid"></div>\n</div>\n');
window.JST["course/dialog/create/add_global_to_course_layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.add_global_to_course.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <p>{{ I18n.t(\'ui.create.add_global_to_course.directions\') }}</p>\n    <div id="create-node-tree" class="modal-node-tree dialog-fix span12"></div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.abbr_submit\') }}" />\n  </div>\n</div>\n');
window.JST["course/dialog/create/rename_structure_button"]=_.template('<div class="row-fluid header-button" data-restricted data-action="write" data-permissions="resources/create/name">\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.create.structure.name\') }}</label>\n    <div class="controls">\n      <input name="name" type="text" disabled="disabled" maxlength="{{gon.limits.structure.name}}" />\n      <button class="btn {{ action }} {{ (enabled) ? \'enabled\' : \'disabled\' }}">\n        {{ label }}\n      </button>\n    </div>\n  </div>\n</div>\n');
window.JST["course/dialog/export/export_users_layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.courses.users.export.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>  \n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <p>{{ I18n.t(\'ui.courses.users.export.help\') }}</p>\n    <div id="create-node-tree" class="modal-node-tree dialog-fix span12"></div>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid">\n    <div class="span12">\n      <button class="button button--secondary cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n      <button data-action="submit" class="button button--primary">{{ I18n.t(\'ui.actions.export\') }}</button>\n    </div>\n  </div>\n</div>');
window.JST["course/dialog/move/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.move.node.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body form-horizontal form-small">\n  <form>\n    <div class="control-group">\n      <label class="control-label" for="name">{{ I18n.t(\'ui.copy.node.name\') }}</label>\n      <div class="controls title-input">\n        <input class="row-fluid" name="titles" type="text" value="{{ titles }}" disabled="disabled" maxlength="{{gon.limits.structure.name}}" />\n      </div>\n    </div>\n  </form>\n\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.move.node.action\') }}</label>\n    <div class="controls">\n      <div id="move-structure" class="main modal-node-tree dialog-fix">\n        \x3c!-- <div class="loader"></div> --\x3e\n      </div>\n    </div>\n  </div> \n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n  </div>\n</div>\n');
window.JST["course/dialog/print/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.common.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div id="print-results"></div>\n</div>\n\n<div class="modal-footer">\n  <input id="print" class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.print\') }}" />\n</div>\n');
window.JST["course/dialog/unpurchased/layout"]=_.template('<div class="modal-header">\n  <h3>{{ purchase_popup_title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <div class="control-group">\n      <div class="controls">\n        {[ purchase_instruction_text ]}\n        <a href="{{ purchase_url }}" title="{{ I18n.t(\'ui.common.click_to_purchase\') }}" target="new">{{ purchase_link_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input type=\'submit\' class="{{ submitClass }}" value="{{ submitText }}" />\n  </div>\n</div>\n');
window.JST["course/digibook/layout"]=_.template('<div id="digital-books" class="row-fluid">\n  <div id="digibooks" class="carousel" data-interval="0"></div>\n  <div id="digibooks-carousel-controls">\n    <a data-target="#digibooks" data-slide="prev" class="left carousel-control">\u2039</a>\n    <a data-target="#digibooks" data-slide="next" class="right carousel-control">\u203a</a>\n  </div>\n  <div id="digibooks-carousel-item-positions" class=\'carousel-active-position\'></div>\n</div>');window.JST["course/digibook/no_books"]=
_.template("<p>No books</p>");window.JST["course/digibook/positions"]=_.template('<div class="cap_table">\n  {% for (var i = 0, l = items_length / 3; i < l; i += 1) { %}\n    {% if (i === 0) { %}\n      <a class="cap_cell active" data-slide-to="{{i}}" data-target="#digibooks"></a>\n    {% } else { %}\n      <a class="cap_cell nonactive" data-slide-to="{{i}}" data-target="#digibooks"></a>\n    {% } %}\n  {% } %}        \n</div>');window.JST["course/digibook/student_digibook"]=_.template('<div class="image">\n  <a href="{{ link }}" class=\'digibook-link\' data-profile="student">\n    <img src="{{ image_src }}" alt="{{ name }}" title="{{ name }}" data-profile="student" />\n  </a>\n</div>\n\n<div class="title">\n  <a href="{{ link }}" title="{{ name }}" class=\'digibook-link\' data-profile="student">\n    <span class=\'course\'>{{ course_name }}</span>\n    <div class=\'digibook-name\'>{{ name }}</div>\n  </a>  \n\n  <a href="#" title="{{ I18n.t(\'ui.digibook.content\') }}" class=\'digital-book-content\'>\n    <span class=\'\'>{{ I18n.t(\'ui.digibook.content\') }}</span>\n  </a>\n</div>\n');
window.JST["course/digibook/teacher_digibook"]=_.template('<div class="image {{ image_class }}">\n    <table>\n      <tr>\n        <td>\n          <a href="{{ link }}" class=\'digibook-link\' data-profile="teacher" >\n            <img src="{{ image_src }}" alt="{{ name }}" title="{{ name }}" data-profile="teacher" />\n          </a>\n        </td>\n      </tr>\n   </table>\n\n    {% if ( !purchasedToTeachers ) { %}\n      <a id="find-out-more" href="{{ link }}" target="_blank" rel="external" class=\'digibook-link\' data-profile="teacher">{{ I18n.t(\'ui.digibook.find_out_more\') }}</a>\n    {% } %}\n</div>\n<div class="title">\n\n  <a href="{{ link }}" title="{{ name }}" class=\'digibook-link\' data-profile="teacher">\n    <span class=\'course\'>{{ course_name }}</span>\n    <div class=\'digibook-name\'>{{ name }}</div>\n  </a>\n\n  <a href="#" title="{{ I18n.t(\'ui.digibook.content\') }}" class=\'digital-book-content\'>\n    <span class=\'\'>{{ I18n.t(\'ui.digibook.content\') }}</span>\n  </a>\n\n</div>\n<div class="availability">\n  <p>{{ I18n.t(\'ui.digibook.availability\') }}</p>\n\n  <ul>\n\n    {% if (available.teacher) { %}\n      {% if (purchased.teacher) { %}\n        <li class=\'teacher-availability purchased\'>{{ I18n.t(\'ui.profile.teacher\') }}</li>\n      {% } else { %}\n        <li class=\'teacher-availability unpurchased\'>\n          <a href="{{ url.teacher }}" target="_blank" rel="external" class=\'digibook-link\' data-profile="teacher">{{ I18n.t(\'ui.profile.teacher\') }}</a>\n        </li>\n      {% } %}\n    {% } %}\n\n    {% if (available.student) { %}\n      {% if (purchased.student) { %}\n        <li class=\'student-availability purchased\'>{{ I18n.t(\'ui.profile.student\') }}</li>\n      {% } else { %}\n        <li class=\'student-availability unpurchased\'>\n          <a href="{{ url.student }}" target="_blank" rel="extenal" class=\'digibook-link\' data-profile="student">{{ I18n.t(\'ui.profile.student\') }}</a>\n        </li>\n      {% } %}\n    {% } %}\n\n  </ul>\n\n  {% if (is_new) { %}\n    <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n  {% } %}\n\n  {% if (is_updated) { %}\n    <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n  {% } %}\n\n</div>');
window.JST["course/dropdown/empty-favourites"]=_.template("{{ I18n.t('ui.courses.favourites_empty') }}");window.JST["course/dropdown/item"]=_.template("<a href=\"#\" {[ purchased ? 'role=\"menuitem\"' : '' ]} {[ !purchased ? 'class=\"unpurchased\"' : '' ]}>{{ name }}</a>\n");window.JST["course/dropdown/layout"]=_.template('<h3>{{ I18n.t(\'ui.courses.favourites\') }}</h3>\n<div id="menu-favourites"></div>\n<ul><li class="divider"></li></ul>\n<h3>{{ I18n.t(\'ui.courses.all_courses\') }}</h3>\n<div id="menu-courses"></div>');
window.JST["course/dropdown/unpurchased-item"]=_.template('<a class="unpurchased" href="#">{{ name }}</a>\n');window.JST["course/home/common/lens"]=_.template('<div class="new-lens-wrapper">\n  <div class="new-lens-icon">\n    <div class="new-lens-icon-wrapper">\n      <i {% if (lens_icon_color) { %} style="color: {{lens_icon_color}}"{% } %} class="lens-icon icon_{{type}}"></i>\n    </div>\n  </div>\n  <div class="new-lens-content">\n    <div class="new-lens-content-text">\n      <p class="new-lens-title">{{name}}</p>\n      <p class="new-lens-description">{{description}}</p>\n    </div>\n  </div>\n  <a href="#" class="new-lens-anchor">\n    <span class="sr-only">Go to {{name}}</span>\n  </a>\n</div>\n');
window.JST["course/home/legacy/layout"]=_.template('<div class="row-fluid">\n\n  <div id="main" class="main span9 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div id="sidebar" class="sidebar-alt sidebar-alt2 span3 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n\n  </div>\n\n</div>\n');window.JST["course/home/legacy/main/head"]=_.template('<div class="row-fluid">\n  {% if (homepage.body_image != null) { %}\n    <img src="{{ homepage.body_image}}" class=\'body-image\'>\n  {% } %}\n\n  {% if (homepage.body != null) { %}\n    {[ homepage.body ]}\n  {% } %}\n</div>\n');
window.JST["course/home/legacy/main/head_static"]=_.template("");window.JST["course/home/legacy/main/layout"]=_.template('<div class="row-fluid holder">\n  <div class="span1">&nbsp;</div>\n  <div class="span10">\n  \t<div id="head"></div>\n  </div>\n  <div class="span1">&nbsp;</div>\n </div>\n');window.JST["course/home/legacy/main/tabcontent"]=_.template('<div class="preview_image_home">\n  <img src="/api/courses/{{course}}/contents/{{content_object_id}}/thumbnail" alt="" class="active" />\n</div>\n<div class="span7">\n  <h3><a href="#" class="math-formula"> <i class="icon-{{format}}"></i>{[title]}</a></h3>\n  <p id="tabcontent_{{id}}" class="active">\n    {% if (body != null) { %}\n      {{body}}\n    {% } %}\t\t\n  </p>\n</div>\n');
window.JST["course/home/legacy/main/tabrow"]=_.template('<a id="link_{{id}}" class="math-formula"> <i class="icon-{{format}} icon-white"></i>{[title]}</a>');window.JST["course/home/legacy/sidebar/group_code_dialog"]=_.template('  <div class="modal-header">\n    <a class="close" data-dismiss="modal">&nbsp;</a>\n    <h3>{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.title\') }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <div id="group-code-form"></div>\n  </div>\n\n  <div class="modal-footer">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.submit\') }}" />\n  </div>    \n');
window.JST["course/home/legacy/sidebar/group_code_form"]=_.template('<form> \n  <fieldset class="control-group">\n    <label for="group-code" class="control-label">{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.description\') }}</label>\n    <div class="controls">\n      <input id="group-code" name="code" class="input-xlarge" type="text">\n    </div>\n  </fieldset>\n</form>\n');window.JST["course/home/legacy/sidebar/interesting_sites"]=_.template('{% if ((homepage)&&(homepage.links.length >= 1)) { %}\n  <ul id="interesting_sites" class="rss nav nav-list">\n    <li class="nav-header">{{ I18n.t(\'ui.homepage.interesting_sites\') }}</li>\n    {% _(homepage.links).each(function (item, index) { %}\n      <li><img src="{% if(item.favicon_image_url == null) { %}http://placehold.it/12x12&text=ico{% }else{ %}{{item.favicon_image_url}} {% } %}" alt="" class="ico" width="10"><a href="{{item.url}}" target="_blank">{{item.link_text}}</a></li>\n    {% }) %}\n  </ul>\n{% } %}\n');
window.JST["course/home/legacy/sidebar/layout"]=_.template('<div class="container-fluid holder course-side height-fix" style="background: transparent url(/images/OUPLogo.png) no-repeat right bottom;">\n\n  {% if (showGroupCodeButton) { %}\n    <div id="group-code-button">\n      <button class="btn btn-primary">{{ I18n.t(\'ui.homepage.sidebar.group_code_button\') }}</button>\n    </div>\n  {% } %}\n\n  <div id="markbook-stats"></div>\n  \n  {% if (showTwitterWidget) { %}\n    <div id="twitter-news">\n      {[ twitterWidget ]}\n    </div>\n  {% } %}\n  \n  <ul class="nav nav-list">\n    <li class="divider"></li>\n  </ul>\n\n  <div id="interesting-sites"></div>\n</div>\n');
window.JST["course/home/legacy/sidebar/markbook_stats"]=_.template('<ul class="nav nav-list">\n  <li class="nav-header">{{ I18n.t(\'ui.homepage.my_updates\') }}</li>\n</ul>\n\n<ul class="stats globalside">\n  {% if(Osp.profile.isTeacher()) { %}\n  <li>\n    <span class="number">{[ due_today ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/due_today">{{ I18n.t(\'ui.filters.due_today\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ due_this_week ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/due_this_week">{{ I18n.t(\'ui.filters.due_this_week\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ manual_marking ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/manual_marking">{{ I18n.t(\'ui.filters.manual_marking\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ markbook_past_due_date ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/markbook_past_due_date">{{ I18n.t(\'ui.filters.markbook_past_due_date\') }}</a>\n  </li>\n  {% } else { %}\n  <li>\n    <span class="number">{[ due_today ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/due_today">{{ I18n.t(\'ui.filters.due_today\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ due_this_week ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/due_this_week">{{ I18n.t(\'ui.filters.due_this_week\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ past_due_date ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/past_due_date">{{ I18n.t(\'ui.filters.past_due_date\') }}</a>\n  </li>\n  {% } %}\n</ul>\n\n<ul class="nav nav-list">\n  <li class="divider"></li>\n</ul>\n');
window.JST["course/home/smart_student/layout"]=_.template('<section class="home__books"></section>\n\n<div class="home__body home__body--student">\n  <div class="home__links">\n    <div class="home__links-content">\n        {% if (showGettingStarted()) { %}\n        <a href="#" data-action="open:getting_started">Getting started</a>\n        {% } %}\n        <a href="#" data-action="open:join_group">Join teaching group</a>\n        {% if (showAcknowledgements()) { %}\n        <a href="{{ acknowledgements_url }}" target="_blank">Acknowledgements</a>\n        {% } %}\n    </div>\n  </div>\n  <div class="home__reports"></div>\n  <div class="home__widget-container">\n      <div class="home__widget-content">\n          <div class="{{ widgetColumnClassname() }} home__assignments__widget">\n              <section class="home__assignments">\n                  <h2>Assignments</h2>\n              </section>\n          </div>\n          {% if (showNextSteps()) { %}\n          <div class="{{ widgetColumnClassname() }} home__nextSteps__widget">\n              <section class="home__nextSteps">\n                  <h2>Next steps</h2>\n              </section>\n          </div>\n      </div>\n      {% } %}\n  </div>\n</div>\n');
window.JST["course/home/smart_student/reports"]=_.template('<div class="home-reports__container">\n  <h2>Reports</h2>\n  <div class="home__reports-widgets">\n    <div class="home__reports__widget">\n      <div class="home__reports__widget-icon">\n        <svg viewBox="0 0 40 40">\n          <use xlink:href="#svg__streamline-assessments"></use>\n        </svg>\n      </div>\n      <span class="home__reports__assignments">\n        <span class="home__reports__value">{{ assignments_completed }}</span>\n        Assignments completed\n      </span>\n    </div>\n    <div class="home__reports__widget">\n      <div class="home__reports__widget-icon">\n        <svg viewBox="0 0 40 40">\n          <use xlink:href="#svg__streamline-nextsteps"></use>\n        </svg>\n      </div>\n      <span class="home__reports__nextSteps">\n        <span class="home__reports__value">{{ next_steps_completed }}</span>\n        Next Steps completed\n      </span>\n    </div>\n  </div>\n</div>');
window.JST["course/home/smart_teacher/assignments_stats"]=_.template('<div class="home__assignmentsStats__header">\n  <h2>{{ I18n.t(\'ui.assignments.stats.title\') }}</h2>  \n</div>\n<div class="home__assignmentsStats__body">\n  <ul class="shortcuts">\n    <li class="shortcuts__item">\n      {{ I18n.t(\'ui.assignments.stats.due_this_week\') }}\n      <span class="badge badge--muted">{{ due_this_week }}</span>\n    </li>\n    <li class="shortcuts__item">\n      {{ I18n.t(\'ui.assignments.stats.to_mark\') }}\n      <span class="badge {{ muted(\'manual_marking\') }}">{{ manual_marking }}</span>\n    </li>\n    <li class="shortcuts__item">\n      <a role="button" data-action="open">Go to Markbook</a>\n    </li>    \n  </ul>  \n</div>');
window.JST["course/home/smart_teacher/course_updates_layout"]=_.template('<div class="section__header">\n  <h2 class="section__title">{{ I18n.t(\'ui.course_updates.title\') }}</h2>\n  <button type="button" class="button button--icon button--close">\n    <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n    <span class="a11y-hide">{{ I18n.t(\'ui.common.close\') }}</span>\n  </button>\n</div>\n<div class="section__body"></div>');
window.JST["course/home/smart_teacher/layout"]=_.template('<section class="home__books"></section>\n\n<div class="home__body home__body--teacher">\n  <div class="home__links">\n    <div class="home__links-content">\n      {% if (showGettingStarted()) { %}\n      <a href="#" data-action="open:getting_started">Getting started</a>\n      {% } %}\n      <a href="#" data-action="open:subscriptions">{{ I18n.t(\'ui.courses.lenses.home.my_subscriptions\') }}</a>\n      {% if (showAcknowledgements()) { %}\n      <a href="{{ acknowledgements_url }}" target="_blank">Acknowledgements</a>\n      {% } %}\n    </div>\n  </div>\n  <div class="home__updates"></div>\n  <div class="home__assignmentsStats"></div>\n  <div class="home__reports"></div>\n</div>\n');
window.JST["course/home/smart_teacher/reports"]=_.template('<div class="home-reports__container">\n  <h2>{{ I18n.t(\'ui.courses.lenses.home.reports.title\') }} <small>({{ I18n.t(\'ui.courses.lenses.home.reports.subtitle\') }})</small></h2>\n  <div class="home__reports-widgets">\n    <div class="home__reports__widget">\n      <div class="home__reports__widget-icon">\n        <svg viewBox="0 0 40 40">\n          <use xlink:href="#svg__streamline-assessments"></use>\n        </svg>\n      </div>\n      <span class="home__reports__assignments"><span class="home__reports__value">{{ assignments_completed }}</span> {{ I18n.t(\'ui.courses.lenses.home.reports.assignments_completed\') }}</span>\n    </div>\n    {% if (showNextSteps()) { %}\n    <div class="home__reports__widget">\n      <div class="home__reports__widget-icon">\n        <svg viewBox="0 0 40 40">\n          <use xlink:href="#svg__level-up-small"></use>\n        </svg>\n      </div>\n      <span class="home__reports__nextSteps"><span class="home__reports__value">{{ next_steps_completed }}</span> {{ I18n.t(\'ui.courses.lenses.home.reports.level_ups_completed\') }}</span>\n    </div>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/home/student/assignments"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{ I18n.t(\'ui.assignments.stats.title\') }}</h4>\n</div>\n\n<div class="section__body">\n  <ul class="shortcuts">\n    <li class="shortcuts__item">\n      <a role="button" data-lens="assignments" data-filter="due_today">{{ I18n.t(\'ui.assignments.stats.due_today\') }}</a>\n      <span class="badge {{ muted(\'due_today\') }}">{{ due_today }}</span>\n    </li>\n    <li class="shortcuts__item">\n      <a role="button" data-lens="assignments" data-filter="due_this_week">{{ I18n.t(\'ui.assignments.stats.due_this_week\') }}</a>\n      <span class="badge {{ muted(\'due_this_week\') }}">{{ due_this_week }}</span>\n    </li>\n    <li class="shortcuts__item">\n      <a role="button" data-lens="markbook" data-filter="recently_marked">{{ I18n.t(\'ui.assignments.stats.recently_marked\') }}</a>\n      <span class="badge {{ muted(\'recently_marked\') }}">{{ recently_marked }}</span>\n    </li>\n  </ul>\n</div>\n');
window.JST["course/home/student/groups"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{ teaching_groups_header }}</h4>\n</div>\n<div class="section__body">\n  <p>{[ teaching_groups_body ]}</p>\n\n  <button role="button" class="button button--primary">{{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_button\') }}</button>\n</div>\n');window.JST["course/home/student/join_group"]=_.template('{[ instructions() ]}\n\n<div class="inputGroup mv--4x">\n  <input name="code" class="form__input uppercase" type="text" aria-label="Group code">\n  <button role="button" data-action="join" disabled="true" class="button button--primary">\n    {{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_form_button\') }}\n  </button>\n</div>\n\n<a href="https://support.kerboodle.com/student-support/using-kerboodle/using-a-code-to-join-a-teaching-group/" target="_blank">\n  Need help?\n</a>\n\n<div class="infoCard infoCard--hidden infoCard--success mv--4x">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-done"></use>\n  </svg>\n  <h1>{{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_form_correct_code\') }}</h1>\n  <p>{{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_form_correct_code_message\') }}</p>\n</div>\n\n<div class="infoCard infoCard--hidden infoCard--error mv--4x">\n  <svg viewBox="0 0 1 1" class="icon icon--default">\n    <use xlink:href="#svg__streamline-warning-balloon"></use>\n  </svg>\n  <h1>{{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_form_wrong_code\') }}</h1>\n  <p>{{ I18n.t(\'ui.courses.lenses.home.teaching_groups.join_group_form_wrong_code_message\') }}</p>\n</div>\n');
window.JST["course/home/student/layout"]=_.template('<section class="home__books"></section>\n\n<section class="home__assignments"></section>\n\n<div class="grid grid--maxWidth">\n  <div class="row">\n    <div class="col col--12 col--l6">\n      <section class="home__welcome"></section>\n    </div>\n\n    <div class="col col--12 col--l6">\n      <section class="home__groups"></section>\n    </div>\n  </div>\n</div>\n');window.JST["course/home/student/main/head"]=_.template('<div class="row-fluid">\n  {% if (homepage.body_image != null) { %}\n    <img src="{{ homepage.body_image}}" class=\'body-image\'>\n  {% } %}\n\n  {% if (homepage.body != null) { %}\n    {[ homepage.body ]}\n  {% } %}\n</div>\n');
window.JST["course/home/student/main/head_static"]=_.template("");window.JST["course/home/student/main/layout"]=_.template('<div class="row-fluid holder">\n  <div class="span1">&nbsp;</div>\n  <div class="span10">\n  \t<div id="head">\n  \t\t<div></div>\n  \t</div>\n  \t<div id="featured_resources" class="featured_block">\n  \t</div>\n  \t<div id="featured_assignments" class="featured_block">\n  \t</div>\n  \t<div id="featured_planning" class="featured_block last">\n  \t</div>\n  </div>\n  <div class="span1">&nbsp;</div>\n </div>');
window.JST["course/home/student/main/tabcontent"]=_.template('<div class="preview_image_home">\n  <img src="/api/courses/{{course}}/contents/{{content_object_id}}/thumbnail" alt="" class="active" />\n</div>\n<div class="span7">\n  <h3><a href="#" class="math-formula"> <i class="icon-{{format}}"></i>{[title]}</a></h3>\n  <p id="tabcontent_{{id}}" class="active">\n    {% if (body != null) { %}\n      {{body}}\n    {% } %}\t\t\n  </p>\n</div>\n');window.JST["course/home/student/main/tabrow"]=_.template('<a id="link_{{id}}" class="math-formula"> <i class="icon-{{format}} icon-white"></i>{[title]}</a>');
window.JST["course/home/student/sidebar/group_code_dialog"]=_.template('  <div class="modal-header">\n    <a class="close" data-dismiss="modal">&nbsp;</a>\n    <h3>{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.title\') }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <div id="group-code-form"></div>\n  </div>\n\n  <div class="modal-footer">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.submit\') }}" />\n  </div>    \n');
window.JST["course/home/student/sidebar/group_code_form"]=_.template('<form> \n  <fieldset class="control-group">\n    <label for="group-code" class="control-label">{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.description\') }}</label>\n    <div class="controls">\n      <input id="group-code" name="code" class="input-xlarge" type="text">\n    </div>\n  </fieldset>\n</form>\n');window.JST["course/home/student/sidebar/interesting_sites"]=_.template('{% if ((homepage)&&(homepage.links.length >= 1)) { %}\n  <ul id="interesting_sites" class="rss nav nav-list">\n    <li class="nav-header">{{ I18n.t(\'ui.homepage.interesting_sites\') }}</li>\n    {% _(homepage.links).each(function (item, index) { %}\n      <li><img src="{% if(item.favicon_image_url == null) { %}http://placehold.it/12x12&text=ico{% }else{ %}{{item.favicon_image_url}} {% } %}" alt="" class="ico" width="10"><a href="{{item.url}}" target="_blank">{{item.link_text}}</a></li>\n    {% }) %}\n  </ul>\n{% } %}\n');
window.JST["course/home/student/sidebar/layout"]=_.template('<div class="container-fluid holder course-side height-fix" style="background: transparent url(/images/OUPLogo.png) no-repeat right bottom;">\n\n  {% if (showGroupCodeButton) { %}\n    <div id="group-code-button">\n      <button class="btn btn-primary">{{ I18n.t(\'ui.homepage.sidebar.group_code_button\') }}</button>\n    </div>\n  {% } %}\n\n  <div id="markbook-stats"></div>\n  \n  {% if (showTwitterWidget) { %}\n    <div id="twitter-news">\n      {[ twitterWidget ]}\n    </div>\n  {% } %}\n  \n  <ul class="nav nav-list">\n    <li class="divider"></li>\n  </ul>\n\n  <div id="interesting-sites"></div>\n</div>\n');
window.JST["course/home/student/sidebar/markbook_stats"]=_.template('<ul class="nav nav-list">\n  <li class="nav-header">{{ I18n.t(\'ui.homepage.my_updates\') }}</li>\n</ul>\n\n<ul class="stats globalside">\n  {% if(Osp.profile.isTeacher()) { %}\n  <li>\n    <span class="number">{[ due_today ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/due_today">{{ I18n.t(\'ui.filters.due_today\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ due_this_week ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/due_this_week">{{ I18n.t(\'ui.filters.due_this_week\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ manual_marking ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/manual_marking">{{ I18n.t(\'ui.filters.manual_marking\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ markbook_past_due_date ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ markbookLensName }}/filter/markbook_past_due_date">{{ I18n.t(\'ui.filters.markbook_past_due_date\') }}</a>\n  </li>\n  {% } else { %}\n  <li>\n    <span class="number">{[ due_today ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/due_today">{{ I18n.t(\'ui.filters.due_today\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ due_this_week ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/due_this_week">{{ I18n.t(\'ui.filters.due_this_week\') }}</a>\n  </li>\n  <li>\n    <span class="number">{[ past_due_date ]}</span> <a href="/app/courses/{[ course_id ]}/modules/{{ assignmentsLensName }}/filter/past_due_date">{{ I18n.t(\'ui.filters.past_due_date\') }}</a>\n  </li>\n  {% } %}\n</ul>\n\n<ul class="nav nav-list">\n  <li class="divider"></li>\n</ul>\n');
window.JST["course/home/student/welcome"]=_.template('<div class="section__header">\n    <h4 class="section__title">{{welcome_header}}</h4>\n  </div>\n  <div class="section__body">\n    <p>{[welcome_body]}</p>\n    {% if (showTourButton()) { %}\n    <a href="{{tour_url}}" class="button button--primary">{{ I18n.t(\'ui.courses.lenses.home.welcome.tour_button\') }}</a>\n    {% } %}\n  </div>\n</div>\n');window.JST["course/home/teacher/assignments"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{ I18n.t(\'ui.assignments.stats.title\') }}</h4>\n</div>\n\n<div class="section__body">\n  <ul class="shortcuts">\n    <li class="shortcuts__item">\n      <a role="button" data-filter="due_this_week">{{ I18n.t(\'ui.assignments.stats.due_this_week\') }}</a>\n      <span class="badge {{ muted(\'due_this_week\') }}">{{ due_this_week }}</span>\n    </li>\n    <li class="shortcuts__item">\n      <a role="button" data-filter="manual_marking">{{ I18n.t(\'ui.assignments.stats.to_mark\') }}</a>\n      <span class="badge {{ muted(\'manual_marking\') }}">{{ manual_marking }}</span>\n    </li>\n  </ul>\n</div>\n');
window.JST["course/home/teacher/emergency"]=_.template('<p>{[emergency_message_text]}</p>\n<a class="emergency-area-close" href="#">\n  <span>Close</span>\n</a>\n');window.JST["course/home/teacher/layout"]=_.template('<section class="home__books"></section>\n\n{% if (showAcknowledgements()) { %}\n<div class="home__links">\n  <div class="home__links-content">\n    <a href="{{ acknowledgements_url }}" target="_blank">Acknowledgements</a>\n  </div>\n</div>\n{% } %}\n\n<section class="home__assignments"></section>\n\n<section class="home__updates"></section>\n\n<section class="home__emergency"></section>\n\n<div class="grid grid--maxWidth">\n  <div class="row">\n    <div class="col col--12 col--l6">\n      <section class="home__courseCustom"></section>\n    </div>\n\n    <div class="col col--12 col--l6">\n      <section class="home__subscriptions"></section>\n    </div>\n  </div>\n</div>\n');
window.JST["course/home/teacher/lens-markbook"]=_.template('<div class="new-lens-wrapper">\n  <div class="new-lens-icon">\n    <i {% if (lens_icon_color) { %} style="color: {{lens_icon_color}}"{% } %} class="lens-icon icon_{{type}}"></i>\n  </div>\n  <div class="new-lens-content">\n    <div class="new-lens-content-text">\n      <p class="new-lens-title">{{name}}</p>\n      <p class="new-lens-description">{{description}}</p>\n    </div>\n    {% if (hasTag) { %}\n      <span class="label">{[tag]}</span>\n    {% } %}\n  </div>\n  <a href="#" class="new-lens-anchor">\n    <span class="sr-only">Go to {{name}}</span>\n  </a>\n</div>\n');
window.JST["course/home/teacher/lens"]=_.template('<div class="new-lens-wrapper">\n  <a href="#" class="new-lens-anchor">\n    <span class="sr-only">Go to {{name}}</span>\n  </a>\n  <div class="new-lens-icon">\n    <div class="new-lens-icon-wrapper">\n      <i {% if (lens_icon_color) { %} style="color: {{lens_icon_color}}"{% } %} class="lens-icon icon_{{type}}"></i>\n    </div>\n  </div>\n  <div class="new-lens-content">\n    <div class="new-lens-content-text">\n      <p class="new-lens-title">{{name}}</p>\n      <p class="new-lens-description">{{description}}</p>\n    </div>\n    {% if (hasNewContents) { %}\n      <a href="#" class="label label-new-content">{[newContentsLabel]}</a>\n    {% } %}\n    {% if (hasUpdatedContents) { %}\n      <a href="#" class="label label-updated-content">{[updatedContentsLabel]}</a>\n    {% } %}\n  </div>\n</div>\n');
window.JST["course/home/teacher/main"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{welcome_header}}</h4>\n</div>\n<div class="section__body">\n  <p>{[welcome_body]}</p>\n\n  {% if (hasOptionalMessage()) { %}\n  <div class="panel"> \x3c!-- style="{[ optionalMessageStyle() ]}" --\x3e\n    <h3>{{optional_header}}</h3> \x3c!-- style="{[ optionalMessageHeaderStyle() ]}" --\x3e\n    \x3c!-- {{formatDate(optional_header_date)}} --\x3e\n    <div class="panel__content"> \x3c!-- style="{[ optionalMessageColorStyle() ]}" --\x3e\n      {[optionalIconBeforeBody()]}\n      {[optional_body]}\n      {[optionalIconAfterBody()]}\n    </div>\n  </div>\n  {% } %}\n\n  <div class="row">\n    <div class="col col--auto">\n      <img src="{{notice_icon_url}}" />\n    </div>\n    <div class="col">\n      <p>{[notice_body]}</p>\n    </div>\n  </div>\n</div>\n');
window.JST["course/home/teacher/social"]=_.template('{% if(canShow()) { %}\n<li>\n  <span>{{I18n.t(\'ui.courses.lenses.home.social.keep_updated\')}}</span>\n  {% if(showTwitter()) { %}\n  <a href="{{twitter_url}}" target="_blank">\n    <i class="icon-twitter">\n      <span class="sr-only">{{ I18n.t(\'ui.courses.lenses.home.social.twitter_icon\') }}</span>\n    </i>\n    <span class="sr-only">({{ I18n.t(\'ui.common.opens_in_new_window\') }})</span>\n  </a>\n  {% } %}\n  {% if(showFacebook()) { %}\n  <a href="{{facebook_url}}" target="_blank">\n    <i class="icon-facebook">\n      <span class="sr-only">{{ I18n.t(\'ui.courses.lenses.home.social.facebook_icon\') }}</span>\n    </i>\n    <span class="sr-only">({{ I18n.t(\'ui.common.opens_in_new_window\') }})</span>\n  </a>\n  {% } %}  \n</li>\n{% } %}');
window.JST["course/home/teacher/subscription"]=_.template('<td class="table__cell">{{name}}</td>\n<td class="table__cell table__cell--center">\n  {% if (subscribed) { %}\n    <svg class="icon icon--smallest" aria-label="{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}" tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n      <use xlink:href="#svg__tick"></use>\n    </svg>\n  {% } else { %}\n    <a href="{{url}}" target="_blank">{{I18n.t(\'ui.courses.lenses.home.subscriptions.buy\')}}</a>\n  {% } %}\n</td>\n');
window.JST["course/home/teacher/subscriptions"]=_.template('<div class="section__header">\n  <h4 class="section__title">{{I18n.t(\'ui.courses.lenses.home.subscriptions.title\')}}</h4>\n</div>\n<div class="section__body">\n  <table class="table">\n    <thead>\n      <tr>\n        <th class="table__cell">{{I18n.t(\'ui.courses.lenses.home.subscriptions.product\')}}</th>\n        <th class="table__cell table__cell--center">{{I18n.t(\'ui.courses.lenses.home.subscriptions.subscribed\')}}</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>\n');
window.JST["course/home/token/layout"]=_.template('<section class="home__books"></section>\n\n<div class="home__body home__body--token">\n  {% if (showAcknowledgements()) { %}\n  <div class="home__links">\n    <div class="home__links-content">\n      <a href="{{ acknowledgements_url }}" target="_blank">Acknowledgements</a>\n    </div>\n  </div>\n  {% } %}\n\n  <div class="grid grid--maxWidth">\n    <div class="row">\n      <div class="col col--12">\n        <section class="home__courseCustom">\n          <div class="section__header">\n            <h4 class="section__title">{{ welcome_header }}</h4>\n          </div>\n          <div class="section__body">\n            <p>{[ welcome_body ]}</p>\n          </div>\n        </section>\n      </div>  \n    </div>\n  </div>\n</div>\n');
window.JST["course/iwb/dialog/form"]=_.template('<div class="row">\n  <div class="col col--12">\n    <div class="form__group">\n      <label class="form__headingLabel" for="name">{{ I18n.t(\'ui.iwb.dialog.name\') }}</label>\n      <input name="name" id="name" type="text" class="form__input form__input--fullWidth" required>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col col--12">\n    <div class="form__group">\n      <label class="form__headingLabel" for="description">{{ I18n.t(\'ui.iwb.dialog.description\') }}</label>\n      <textarea name="description" id="description" class="form__input form__input--fullWidth" required></textarea>\n    </div>\n  </div>\n</div>\n');
window.JST["course/iwb/dialog/layout"]=_.template('<div class="modal-header">\n  <h3>{{ title }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body form-horizontal form-small">\n  <div class="main"></div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <button role="button" class="button button--secondary cancel" data-action="cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <button role="button" class="button button--primary" data-action="submit">{{ I18n.t(\'ui.common.abbr_submit\') }}</button>\n  </div>\n</div>\n');
window.JST["course/iwb/layout"]=_.template('<div class="row-fluid">\n\n  <div id="list" class="main span12">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["course/iwb/list/content"]=_.template('<div class="row-fluid contentitem_{{id}}">\n  <div class="icons span1">\n    <span class="check"></span>\n    <span class="format">\n      <i class="icon icon-{{ format }}"></i>\n    </span>\n  </div>\n  <div class="reference span5">\n    <a href="#" class="name math-formula">\n      {[ lookable_name ]}\n      <span class="sr-only">{% if(opensInNewTab()) { %}{{ I18n.t(\'ui.common.opens_in_new_window\') }}{% } %}</span>\n    </a>\n    {% if (showNewLabel()) { %}\n      <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n    {% if (showUpdatedLabel()) { %}\n      <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n    <div class=\'description\'>\n      <span class="math-formula">\n        {[ lookable_description ]}\n      </span>\n    </div>\n  </div>\n  <div class="span2 format">\n    {{ preventBlank(format) }}\n  </div>\n  <div class="span2">\n    &nbsp;\n  </div>\n  <div class="span2">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/iwb/list/head"]=_.template('<div class="row-fluid header-fix">\n  <span class="icons span1">\n    <span class="checkall">\n      <input type="checkbox"{% if(allSelected) { %} checked="checked" {% } %}{% if(empty) { %} disabled="disabled"{% } %}>\n    </span>\n    <span>\n      &nbsp;\n    </span>\n    <span>\n      &nbsp;\n    </span>\n  </span>\n  <span class="header span5 sortable" id="name-sort" data-sortable-attribute="name">\n    {{ I18n.t(\'ui.browser.name\') }}\n  </span>\n  <span class="header span2">\n    {{ I18n.t(\'ui.browser.activity_type\') }}\n  </span>\n  <span class="header span2 sortable" id="name-last_save_at" data-sortable-attribute="last_save_at">\n    {{ I18n.t(\'ui.iwb.dates\') }}\n  </span>\n  <span class="header span2 sortable" id="owner-sort" data-sortable-attribute="owner">\n    {{ I18n.t(\'ui.browser.source\') }}\n  </span>\n</div>\n');
window.JST["course/iwb/list/iwb_saved_status"]=_.template('<div class="row-fluid">\n  <div class="icons span1">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <span class="format">\n      <i class="icon icon-interactive"></i>\n    </span>\n  </div>\n  <div class="reference span5">\n    <a href="#" class="name">\n      {{ name }}\n      <span class="sr-only">{{ I18n.t(\'ui.common.opens_in_new_window\') }}</span>\n    </a>\n    <div class="description">\n      {{ description }}\n    </div>\n  </div>\n  <div class="span2">\n    {{ I18n.t(\'ui.iwb.interactive\') }}\n  </div>\n  <div class="span2 dates">\n    {[ modifiedDate() ]}\n    {[ createdDate() ]}\n  </div>\n  <div class="span2">\n    {{ owner }}\n  </div>\n</div>\n');
window.JST["course/iwb/list/layout"]=_.template('<div class="holder">\n  <div id="quota"></div>\n  <div class="pagination-wrapper upper"></div>\n  <div id="options">\n    \x3c!--div class="loader"></div--\x3e\n  </div>  \n\n  <div class="clear">\n    <div id="actions" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n  </div>\n\n  <div class="holder">\n  \n    <div id="items">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n  </div>\n</div>\n');window.JST["course/iwb/list/no_items"]=
_.template('<div class="row-fluid">\n  <span class="span12">\n    {[ message ]}\n  </span>\n</div>\n');window.JST["course/iwb/list/options"]=_.template('<input type="checkbox" id="toggle_description" class="check" {{ hideDescriptions ? \'checked\' : \'\' }}>\n<label for="toggle_description" class="check_holder">{{ I18n.t(\'ui.common.descriptions-hide\') }}</label>\n');window.JST["course/iwb/list/quota"]=_.template('{% if(message) {  %}\n<div class="helpCard">\n  <div class="helpCard__icon">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n  </div>\n  <div class="helpCard__content">{[ message ]}</div>  \n</div>\n{% } %}\n');
window.JST["course/iwb/search"]=_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-options">\n        {% if (!_.isBlank(type)) { %}\n          <div class="type" data-value="{{type}}" data-term="type">\n            <span>{{formatNameFor(type)}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(source)) { %}\n          <div class="source" data-value="{{source}}" data-term="source">\n            <span>{{sourceNameFor(source)}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n      </div>\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{I18n.t(\'ui.search.resources.placeholder\')}}" value="{{query}}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n\n  <button type="submit" class="btn btn-advanced-search btn-default">{{I18n.t(\'ui.search.submit\')}}</button>\n\n  <div id="search-advanced-options" class="btn-group">\n    <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n      {{title}}\n      <span class="caret"></span>\n    </a>\n    <div class="dropdown-menu">\n      <div class="container-fluid">\n        <div class="row-fluid" id="advanced-search-options">\n          <div class="span6" id="search-type">\n            <dl>\n              <dt>{{I18n.t(\'ui.search.type\')}}</dt>\n              {% _(formats).each(function(item) { %}\n                <dd>\n                  <span class="format">\n                    <i class="icon icon-{{item.name}}"></i>\n                  </span>\n                  <a href="#" data-value="{{item.name}}" data-term=\'type\'>{{formatNameFor(item.name)}}</a>\n                </dd>\n              {% }) %}\n            </dl>\n          </div>\n          <div class="span6">\n            <dl class="search-source">\n              <dt>{{I18n.t(\'ui.search.source\')}}</dt>\n              <dd><a href="#" data-value="oup" data-term=\'source\'>{{sourceNameFor(\'oup\')}}</a></dd>\n              <dd><a href="#" data-value="other" data-term=\'source\'>{{sourceNameFor(\'other\')}}</a></dd>\n              <dd><a href="#" data-value="own" data-term=\'source\'>{{sourceNameFor(\'own\')}}</a></dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["course/iwb/title"]=_.template('<div class="row-fluid iwb-title">\n  <div class="span6">\n    <div id="search">\n    </div>\n  </div>\n</div>\n');window.JST["course/lens/banner"]=_.template('<h2 class="a11y-hide">{{ name }}</h2>\n<img src="{{ logo_url || course_name_image_url }}"></img>\n');window.JST["course/lens/book"]=_.template('<div class="page">\n    <a href="#" class="show left {{bought}}" data-bookmark="{{left}}" tabindex="{{ left ? \'0\' : \'-1\' }}">\n      {[ left || \'&nbsp;\' ]}\n    </a>\n</div>\n\n<div class="page">\n    <a href="#" class="show right {{bought}}" data-bookmark="{{right}}" tabindex="{{ right ? \'0\' : \'-1\' }}">\n      {[ right || \'&nbsp;\' ]}\n    </a>\n</div>\n<p>{{name}}</p>\n');
window.JST["course/lens/home_layout"]=_.template('<div class="row-fluid quarantine">\n  <div id="banner" class="banner"></div>\n</div>\n\n<div class="row-fluid">\n  <div id="content" class="content {{ type }}" role="main"></div>\n</div>\n');window.JST["course/lens/layout"]=_.template('<header class="pageHeader grid">\n  <div class="pageHeader__logo" ></div>\n  {% if (!token_course) { %}\n  <div class="pageHeader__tabs pageHeader__tabs--responsive" >\n    <div class="pageHeader__tabsNavigation"></div>\n    <div class="pageHeader__tabsMore navigationTabs--primary hidden">\n      <button type="button" class="navigationTabs__button" data-action="toggleMoreLens">\n        <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-elipses"></use>\n        </svg>\n        <span class="hidden--l">{{ I18n.t(\'ui.common.more\') }}</span>\n      </button>\n    </div>\n  </div>\n  {% } %}\n\n  <div class="pageHeader__morePanel hidden--l"></div>\n\n  <div class="pageHeader__moreDesktopDropdown dropdown dropdown--one">\n  </div>\n</header>\n\n<section class="legacy legacyTitle"></section>\n\n<section class="legacyMobile hidden--l">\n  <div class="infoCard infoCard--noMaxWidth">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-information-balloon"></use>\n    </svg>\n\n    <h1>Page not mobile friendly</h1>\n    <p>We are continuing to make improvements to Kerboodle. In the meantime, we recommend you open this page on a larger device, e.g. tablet, laptop.</p>\n  </div>\n</section>\n\n<main class="pageMain"></main>\n');
window.JST["course/lens/lens"]=_.template('<button type="button" class="navigationTabs__button">\n  <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-{{ icon() }}"></use>\n  </svg>\n  <span role="heading" aria-level="3">{{ label() }}</span>\n</button>\n');window.JST["course/lens/lensMenuItem"]=_.template('<a role="button" class="dropdown__item flex--alignCenter {{ isActive() ? \'flex--spaceBetween\' : \'flex--end\' }} noPadding">\n    <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1" class="icon icon--smallest mh--4x {{ isActive() ? \'\' : \'hidden\' }}">\n        <use xlink:href="#svg__tick"></use>\n    </svg>\n\n    <span class="flex flex--alignCenter">\n        <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-{{ icon() }}"></use>\n        </svg>\n        <span role="heading" aria-level="3" class="mr--4x">\n            {{ label() }}\n        </span>\n    </span>\n</a>\n');
window.JST["course/lens/title"]=_.template('<div class="row-fluid">\n  <div class="span3">\n    <div id="lens-name">\n      <span class="distinctive-color {{ type }}"></span>\n      <h1 class="lense_name">{{ name }}</h1>      \n    </div>\n  \n    <div id="buttons">\n    </div>\n  </div>\n  \n  <div class="span6">\n    <div id="search">\n    </div>\n  </div>\n  \n  <div class="span3">\n    <div id="book">\n    </div>\n  </div>\n</div>\n');window.JST["course/markbook/create/group/form"]=_.template('<form class="form-horizontal form-small">\n\n<div class="row-fluid">\n    <div>\n      <button class="btn add">\n        <i class="icon-add"></i>\n        {{ I18n.t(\'ui.create.group.add\') }}\n      </button>\n    </div>\n    <br/>\n    <div>\n      <button class="btn remove disabled">\n        <i class="icon-trash"></i>\n        {{ I18n.t(\'ui.create.group.remove\') }}\n      </button>\n    </div>\n    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n</div>\n\n<div class="modal-footer subtle-footer">\n  {% if (can(\'read\', \'users/create/group/name\')) { %}\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.create.group.name\') }}</label>\n    <div class="controls">\n      <input class="input-xxlarge disabled" name="name" type="text" disabled="disabled" maxlength="{{gon.limits.group.name}}" />\n    </div>\n  </div>\n  {% } %}\n\n  <div class="row-fluid">\n    <div class="span12">\n      <input class="btn btn-primary disabled" type="submit" value="{{ I18n.t(\'ui.create.group.submit\') }}" />\n    </div>\n  </div>\n</div>\n\n</form>\n');
window.JST["course/markbook/create/group/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.group.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    <div id="create-group-tree" class="sidebar-modal span5">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n\n    <div id="create-group-fields" class="main span7">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n  </div>\n</div>\n');
window.JST["course/markbook/create/user/course"]=_.template("<input type=\"checkbox\" {{ checked ? 'checked=\"checked\"' : '' }}/>&nbsp;{{ name }} ");window.JST["course/markbook/create/user/form"]=_.template('  <div class="modal-body">\n\n    {% if (can(\'read\', \'users/create/user/first_name\')) { %}\n    <div class="control-group">\n      <label class="control-label" for="first_name">{{ I18n.t(\'ui.create.user.first_name\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="first_name" type="text" maxlength="{{gon.limits.user.first_name}}"\n          {[ can(\'write\', \'users/create/user/first_name\') ? \'\' : \'disabled="disabled"\' ]} />\n        <span class="required">*</span>\n      </div>\n    </div>\n    {% } %}\n\n    {% if (can(\'read\', \'users/create/user/last_name\')) { %}\n    <div class="control-group">\n      <label class="control-label" for="last_name">{{ I18n.t(\'ui.create.user.last_name\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="last_name" type="text" maxlength="{{gon.limits.user.last_name}}"\n          {[ can(\'write\', \'users/create/user/last_name\') ? \'\' : \'disabled="disabled"\' ]} />\n        <span class="required">*</span>\n      </div>\n    </div>\n    {% } %}\n\n    {% if (can(\'read\', \'users/create/user/email\')) { %}\n    <div class="control-group">\n      <label class="control-label" for="email">{{ I18n.t(\'ui.create.user.email\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="email" type="text" maxlength="{{gon.limits.user.email}}"\n          {[ can(\'write\', \'users/create/user/email\') ? \'\' : \'disabled="disabled"\' ]} />\n      </div>\n    </div>\n    {% } %}\n\n    {% if (can(\'read\', \'users/create/user/username\')) { %}\n    <div class="control-group">\n      <label class="control-label" for="username">{{ I18n.t(\'ui.create.user.username\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="username" type="text" maxlength="{{gon.limits.user.username}}"\n          {[ can(\'write\', \'users/create/user/username\') ? \'\' : \'disabled="disabled"\' ]} />\n        <span class="required">*</span>\n      </div>\n    </div>\n    {% } %}\n\n    {% if (can(\'write\', \'users/create/user/password/\' + type.toLowerCase()) && !isNew) { %}\n    <div class="control-group">\n      <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="reset_password" type="checkbox" />\n      </div>\n    </div>\n    {% } %}\n\n    {% if (can(\'read\', \'users/create/user/userid\')) { %}\n    <div class="control-group">\n      <label class="control-label" for="userid">{{ I18n.t(\'ui.create.user.userid\') }}</label>\n      <div class="controls">\n        <input class="input-xlarge" name="userid" type="text"\n          {[ can(\'write\', \'users/create/user/userid\') ? \'\' : \'disabled="disabled"\' ]} />\n        <span class="required">*</span>\n      </div>\n    </div>\n    {% } %}\n\n    <div class="control-group">\n      <div class="controls">\n        <p class="help-block">\n          {{ I18n.t(\'ui.common.required\') }}\n        </p>\n      </div>\n    </div>\n\n  </div>\n');
window.JST["course/markbook/create/user/layout"]=_.template('<form class="form-horizontal modal-form">\n  <div class="modal-header">\n    <h3>{{ isNew ? I18n.t(\'ui.create.user.title\') : I18n.t(\'ui.create.user.title_edit\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n    \n  <div id="create-user-fields"></div>\n\n  <div class="modal-body">\n    <div class="control-group">\n      <label class="control-label" for="first_name">{{ I18n.t(\'ui.create.user.courses\') }}</label>\n      <div class="controls">\n        <div id="create-user-courses"></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ isNew ? I18n.t(\'ui.common.create\') : I18n.t(\'ui.common.submit\') }}" />\n  </div>\n</form>\n');
window.JST["course/markbook/group_assignment/content"]=_.template('<span class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</span>\n<span class="span11">\n  <a href="#" class="name">{{ name }}</a>\n</span>\n');window.JST["course/markbook/group_assignment/layout"]=_.template('<div class="modal-header">\n  <h3>{{ name }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n<div class="modal-body" id="group-assignments">\n  <div class="row-fluid">\n    \x3c!-- Assignment info --\x3e\n    <div id="assignment-info" class="span7 list-wrapper">\n      <h3>{{ I18n.t(\'ui.assign.info.title\') }}</h3>\n      \n      <div class="row-list row-fluid">    \n        <div class="span7">\n          <div class="row-fluid">\n            <span class="span5">{{ I18n.t(\'ui.assignments.activity_type\') }}:</span>\n            <span class="span6">{{ activity_type }}</span>\n          </div>\n          <div class="row-fluid">\n            <span class="span5">{{ I18n.t(\'ui.assignments.assigned_by\') }}:</span>\n            <span class="span6">{{ assigned_by }}</span>\n          </div>\n        </div>\n        <div class="span5">\n          <div class="row-fluid">\n            <span class="span3">{{ I18n.t(\'ui.assign.info.start\') }}:</span>\n            <span class="span9">{{ serverDate(start) }}</span>\n          </div>\n          <div class="row-fluid" id="editable-date">\n            <span class="span3">{{ I18n.t(\'ui.assign.info.due\') }}:</span>\n            <div class="span9 {{ dueClass }}">\n              <div class=\'edit not-editing\'>{{ serverDate(due,\'\') }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="row-list row-fluid">\n        <span class="span3">{{ I18n.t(\'ui.assignments.instructions\') }}:</span>\n        <span class="span9">{{ description }}</span>\n      </div>\n\n      <hr>\n\n      \x3c!-- Files --\x3e\n      <div id="content-assignment" class=\'row-fluid\'>\n        <div>\n          <h4>{{ I18n.t(\'ui.assignments.test_material\') }}</h4>\n          <div id="test-content" class="contentDialogList"></div>\n        </div>\n        <hr>\n        <div>\n          <h4>{{ I18n.t(\'ui.assignments.support_material\') }}</h4>\n          <div id="support-material" class="contentDialogList"></div>\n        </div>\n      </div> \n\n    </div>\n    \x3c!-- Students assigned --\x3e\n    <div id="student-assigned" class="span5 list-wrapper">\n      <h4>{{ I18n.t(\'ui.assignments.students_assigned\') }}</h4>\n      <p>{{ I18n.t(\'ui.assignments.students_instructions\') }}</p>\n      <div id="students" class="items"></div>\n    </div>\n  </div>\n  <hr>\n  \x3c!-- Student assignment --\x3e\n  <div class="row-fluid" id="student-assignment"></div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid">\n    <button class="button button--secondary" id="withdraw">{{ I18n.t(\'ui.assignments.withdraw\') }}</button>\n    <button class="button button--primary" id="save">{{ I18n.t(\'ui.common.save_and_close\') }}</button>\n    <button class="button button--secondary cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n  </div>\n</div>');
window.JST["course/markbook/group_assignment/student"]=_.template('<div class=\'item-wrapper\'>\n  <span class="span11"><a href="#" class="select">{{ last_name }}, {{ first_name }}</a></span>\n  <span class="span1"><i class="{{ iconClass }}"></i></span>\n</div>\n');window.JST["course/markbook/group_assignment/student_assignment"]=_.template('<h3>{{ student }}</h3>\n<div class="row-fluid">\n  \x3c!-- Marks --\x3e\n  <div class="list-wrapper">\n    <div class="{{ !_.isNull(detailed_score) ? \'\' : \'span8\' }}">\n      <h4>{{ I18n.t(\'ui.assignments.static_assignment\') }}</h4>\n      {% if (showHandingMessage()) { %}\n      <p id="handing_message">{{ handingMessage() }}</p>\n      {% } %}\n      <div id="student-content"></div>\n    </div>    \n    <div id="submit-marks" class="{{ !_.isNull(detailed_score) ? \'\' : \'without-detailed-score\' }}">\n      <form class="form-horizontal modal-form">\n        {% if (!_.isNull(detailed_score)){ %}\n          <div class="mark-detailed-score">\n            <span>{{ mark }} / {{ points }}\n              <span class="percentage">{{ percentage }}%</span>\n            </span>\n          </div>        \n          {% for(var n=0;n < detailed_score.length;n++){ \n            var score = detailed_score[n] %}\n              <div class="control-group detailed-mark span4">\n                {% if (score[0] == \'auto\' || score[0] == \'a\'){ %}\n                  <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> <span class="red">automarked</span>:</label>\n                  <div class="controls">\n                    <input name="mark_{{n + 1}}" disabled="true" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                  </div>\n                {% } else { %}\n                  <label class="control-label"><a href="#" class="screen" data-screen="{{n}}">Screen {{n + 1}}</a> mark:</label>\n                  <div class="controls">\n                    <input name="mark_{{n + 1}}" class="mark-input" data-screen="{{n}}" type="number" min="0" max="{{ score[2] }}" value="{{ score[1] }}" required pattern="^d+$" /> / {{ score[2] }}\n                  </div>\n                {% } %}\n              </div>\n          {% }\n        } else { %}\n          <div class="control-group mark" data-restricted data-action="write" data-permissions="assignments/form/mark">\n            <label class="control-label">{{ I18n.t(\'ui.assignments.mark\') }}:</label>\n            <div class="controls">\n              {% if (no_mark) { %}\n              {{ I18n.t(\'ui.assignments.no_marks\') }}\n              {% } else { %}\n              <input name="mark" type="number" min="0" max="{{ points }}" value="{{ mark }}" required pattern="^d+$" /> / {{ points }}\n              {% } %}\n            </div>\n          </div>\n        {% } %}\n        \n      </form>\n    </div>\n  </div>\n</div>\n');
window.JST["course/markbook/group_assignment/student_incomplete"]=_.template('<div class=\'item-wrapper\'>\n  <span class="span11">{{ last_name }}, {{ first_name }}</span>\n  <span class="span1"><i class="{{ iconClass }}"></i></span>\n</div>');window.JST["course/markbook/layout"]=_.template('<div class="row-fluid">\n  <div id="tree" class="sidebar span3 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div id="list" class="main span9">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n</div>\n');
window.JST["course/markbook/list/head"]=_.template('<div class="row-fluid">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n  </span>\n  <span class="header span5 sortable" id="name-sort" data-sortable-attribute="name">\n    {{ I18n.t(\'ui.markbook.title\') }}\n  </span>\n  <span class="header span2 sortable" id="assigned_by-sort" data-sortable-attribute="assigned_by">\n    {{ I18n.t(\'ui.markbook.assigned_by\') }}\n  </span>\n  <span class="header span2 center-align sortable" id=\'due-sort\' data-sortable-attribute="due">\n    {{ I18n.t(\'ui.markbook.due_date\') }}\n  </span>\n  <span class="header span2 center-align last-column">\n    {{ I18n.t(\'ui.markbook.submitted\') }}\n  </span>\n\n</div>\n');
window.JST["course/markbook/list/item"]=_.template('<div class="row-fluid">\n  <span class="icons span1 useritem_{{id}}">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <span class="format">\n      {% if (allMarked) { %}\n        <i class="icon icon-marked-assignment"></i>\n      {% } else if (anyDone) { %}\n        <i class="icon icon-check-assignment"></i>\n      {% } else { %}\n        <i class="icon icon-delegate-assignment"></i>\n      {% } %}\n    </span>\n  </span>\n  <span class="reference header span5">\n    <a href="#" class="name">{{name}}</a>\n  </span>\n  <span class="header span2">\n    {{ assigned_by }}\n  </span>\n\n  <span class="header vertical-span-fix span2 center-align">\n    {{ humanizeDate(due) }}\n  </span>\n  <span class="header span2 markbook-progress-column vertical-span-fix last-column center-align">\n    {{num_done}} / {{num_assignments}}\n  </span>\n\n</div>\n');
window.JST["course/markbook/list/layout"]=_.template('<div class="holder">\n  <div class="pagination-wrapper upper"></div>\n  <div class="clear">\n    <div id="actions" class="pull-left">\n    </div>\n    {% if (Osp.profile.isTeacher()) { %}\n      <a href="#" class="info-icon">\n        <span clas="hide-text">{{ I18n.t(\'ui.markbook.itag\') }}</span>\n      </a>\n    {% } %}\n    <div id="options" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n  </div>\n\n  <div class="holder">\n\n    <div id="markbooks">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n    <div id="preview">\n    </div>\n\n  </div>\n</div>');
window.JST["course/markbook/list/options"]=_.template('<div class="btn-group">\n   \x3c!--  <a class="btn dropdown-toggle">\n     <input type="checkbox" id="toggle_description" class="check" />\n     <span  id="toggle_practice" class="check_holder">{{ I18n.t(\'ui.markbook.practice\') }}</span>\n    </a> --\x3e\n</div>');window.JST["course/markbook/list/preview"]=_.template('\x3c!-- Assignments lens is using this template--\x3e\n<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">&nbsp;</a>\n    <h3 class="math-formula">{{ name }}</h3>\n  </div>\n\n  <div class="preview-fix">\n    <div class="preview-body">\n\n      <div id="preview_image">\n        <div class="loader"></div>\n        <img id="thumbnail" src="" style="display:none"/>\n      </div>\n    \n      {% if (can(\'read\', \'assignments/preview/due_date\') && due) { %}\n      <div class="control-group">\n        <label class="control-label" for="due_date">{{ I18n.t(\'ui.assignments.due_date\') }}</label>\n        <div class="controls">\n          <span>{{ humanizeDate(due) }}</span>\n        </div>\n      </div>\n      {% } %}\n    \n      {% if (can(\'read\', \'assignments/preview/instruction\') && description.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="description">{{ I18n.t(\'ui.assignments.instructions\') }}</label>\n        <div class="controls">\n          <span>{{ description }}</span>\n        </div>\n      </div>\n      {% } %}    \n    \n      {% if (can(\'read\', \'assignments/preview/progress\')) { %}\n      <div class="control-group">\n        <label class="control-label" for="progress">{{ I18n.t(\'ui.assignments.progress\') }}</label>\n        <div class="controls">\n          <span>{[ progress ]}</span>\n        </div>\n      </div>\n      {% } %}\n    \n      {% if (can(\'read\', \'assignments/preview/points\')) { %}\n      <div class="control-group">\n        <label class="control-label" for="points">{{ I18n.t(\'ui.assignments.points\') }}</label>\n        <div class="controls">\n          <span>{[ points ]}</span>\n        </div>\n      </div>\n      {% } %}    \n    \n      {% if (can(\'read\', \'assignments/preview/messages\') && messages.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="messages">{{ I18n.t(\'ui.assignments.messages\') }}</label>\n        <div class="controls">\n          <span>{[ messages ]}</span>\n        </div>\n      </div>\n      {% } %}\n    </div>\n    <div class="preview-footer">\n    </div>\n  </div>    \n</div>');
window.JST["course/markbook/list/preview_general"]=_.template('\x3c!-- Markbook lens is using this template--\x3e\n<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">&nbsp;</a>\n    <h3 class="math-formula">{{ name }}</h3>\n  </div>\n\n  <div class="preview-fix">\n    <div class="preview-body">\n\n      {% if (can(\'read\', \'markbook/preview/status\')) { %}\n      <div class="control-group">\n        <label class="control-label" for="status">{{ I18n.t(\'ui.markbook.status\') }}</label>\n        <div class="item">\n          <div class="icons">\n            <div class="format controls">\n              {% if (isIndividual) { %}\n                {% if (student_status_val == Osp.Markbook.DONE) { %}\n                  <i class="icon icon-check-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.need_manual\') }}</span>\n                {% } else if(student_status_val == Osp.Markbook.MARKED) { %}\n                  <i class="icon icon-marked-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.marked\') }}</span>\n                {% } else { %}\n                  <i class="icon icon-delegate-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.assigned\') }}</span>\n                {% } %}\n              {% }else { %}\n                {% if (allMarked) { %}\n                  <i class="icon icon-marked-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.marked\') }}</span>\n                {% }else if (anyDone) { %}\n                  <i class="icon icon-check-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.need_manual\') }}</span>\n                {%} else { %}\n                  <i class="icon icon-delegate-assignment"></i>\n                  <span>{{ I18n.t(\'ui.markbook.assigned\') }}</span>\n                {% } %}\n              {% } %}\n            </div>\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      {% if(!isIndividual) { %}\n        {% if (can(\'read\', \'markbook/preview/groups\') && groupNames.length > 0) { %}\n        <div class="control-group">\n          <label class="control-label" for="groups">{{ I18n.t(\'ui.markbook.groups\') }}</label>\n          <div class="controls">\n            <span>{[ groupNames ]}</span>\n          </div>\n        </div>\n        {% } %}\n      {% } %}\n\n      {% if(!isIndividual) { %}\n        {% if (can(\'read\', \'markbook/preview/students\') && studentNames.length > 0) { %}\n        <div class="control-group">\n          <label class="control-label" for="students">{{ I18n.t(\'ui.markbook.students\') }}</label>\n          <div class="controls">\n            <span>{[ studentNames ]}</span>\n          </div>\n        </div>\n        {% } %}\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/description\') && description.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="description">{{ I18n.t(\'ui.assignments.instructions\') }}</label>\n        <div class="controls">\n          <span>{{ lookable_description }}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/messages\') && messages.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="messages">{{ I18n.t(\'ui.markbook.messages\') }}</label>\n        <div class="controls">\n          <span>{[ messages ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n\n      {% if (can(\'read\', \'markbook/preview/due_date\') && due) { %}\n      <div class="control-group">\n        <label class="control-label" for="due_date">{{ I18n.t(\'ui.assignments.due_date\') }}</label>\n        <div class="controls">\n          <span>{{ humanizeDate(due) }}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/start_date\') && start) { %}\n      <div class="control-group">\n        <label class="control-label" for="start_date">{{ I18n.t(\'ui.assignments.start_date\') }}</label>\n        <div class="controls">\n          <span>{{ humanizeDate(start) }}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (isIndividual) { %}\n        {% if (can(\'read\', \'markbook/preview/mark\')) { %}\n        <div class="control-group">\n          <label class="control-label" for="mark">{{ I18n.t(\'ui.markbook.score\') }}</label>\n          <div class="controls">\n            {% if (Osp.Markbook.isUnfinished(student_status_val)) { %}\n              <span>{{ I18n.t(\'ui.markbook.awaiting_response\') }}</span>\n            {% } else if (student_status_val == Osp.Markbook.DONE) { %}\n              <span>{{ I18n.t(\'ui.markbook.manual_marking\') }}</span>\n            {% }else{ %}\n              <span>{[ percentage ]}%</span>\n            {% } %}\n          </div>\n        </div>\n        {% } %}\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/percentage\')) { %}\n      <div class="control-group">\n        <label class="control-label" for="percentage">{{ I18n.t(\'ui.markbook.score\') }}</label>\n        <div class="controls">\n          <span>\n          {% if (student_status_val == Osp.Markbook.DONE) { %}\n            {{ I18n.t(\'ui.markbook.awaiting_marks\') }}\n          {% }else{ %}\n            {[ percentage ]}%\n          {% } %}\n          </span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/points\')) { %}\n      <div class="control-group">\n        <label class="control-label" for="points">{{ I18n.t(\'ui.assignments.points\') }}</label>\n        <div class="controls">\n          <span>{[ points ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/test_name\') && test_name.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="test_name">{{ I18n.t(\'ui.assignments.used_as.1\') }}</label>\n        <div class="controls">\n          <span>{[ test_name ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/test_description\') && test_description.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="test_description">{{ I18n.t(\'ui.markbook.test_description\') }}</label>\n        <div class="controls">\n          <span>{[ test_description ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'markbook/preview/contents\') && support_contents.length > 0) { %}\n      <div class="control-group">\n        <label class="control-label" for="contents">{{ I18n.t(\'ui.assignments.support_material\') }}</label>\n        <div class="controls">\n          <span>{{support_contents}}</span>\n        </div>\n      </div>\n      {% } %}\n\n    </div>\n    <div class="preview-footer">\n    </div>\n  </div>\n</div>\n');
window.JST["course/markbook/list/student/item"]=_.template('<div class="row-fluid">\n  <span class="icons span1 useritem_{{id}}">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <span class="format">\n      {% if (student_status_val == Osp.Markbook.DONE) { %}\n        <i class="icon icon-check-assignment"></i>\n      {% } else if (student_status_val == Osp.Markbook.MARKED) { %}\n        <i class="icon icon-marked-assignment"></i>\n      {% } else { %}\n        <i class="icon icon-delegate-assignment"></i>\n      {% } %}\n    </span>\n  </span>\n  <span class="reference span4">\n    <a href="#" class="name">{{name}}</a>\n  </span>\n  <span class="span2">\n    {{ assigned_by }}\n  </span>  \n  <span class="span2 center-align vertical-span-fix">\n    {{ humanizeDate(due) }}\n  </span>\n  {% if (student_status_val != Osp.Markbook.MARKED) { %}\n    <span class="span-student-progress-column student-progress-column vertical-span-fix">\n      {% if (Osp.Markbook.isUnfinished(student_status_val)) { %}\n        {{ I18n.t(\'ui.markbook.awaiting_response\') }}\n      {% } %}\n      {% if (student_status_val == Osp.Markbook.DONE) { %}\n        {{ I18n.t(\'ui.markbook.awaiting_marks\') }}\n      {% } %}\n    </span>\n  {% }else{ %}\n    <span class="span2 score-info vertical-span-fix center-align last-column">\n      {{ no_mark ? I18n.t(\'ui.markbook.not_applicable\') : student_mark + " / " + points }}\n    </span>\n    <span class="span-score-percent vertical-span-fix last-column">\n      {{ no_mark ? I18n.t(\'ui.markbook.not_applicable\') : percentage + " %" }}\n    </span>\n  {% } %}\n</div>\n');
window.JST["course/markbook/list/user/head"]=_.template('<div class="row-fluid">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n  </span>\n  <span class="header span4 sortable" id="name-sort" data-sortable-attribute="name">\n    {{ I18n.t(\'ui.markbook.title\') }}\n  </span>\n  <span class="header span2 sortable" id="assigned_by-sort" data-sortable-attribute="assigned_by">\n    {{ I18n.t(\'ui.markbook.assigned_by\') }}\n  </span>\n  <span class="header span2 center-align sortable" id=\'due-sort\' data-sortable-attribute="due">\n    {{ I18n.t(\'ui.markbook.due_date\') }}\n  </span>\n  <span class="header span2 score-info center-align last-column">\n    {{ I18n.t(\'ui.markbook.score_xy\') }}\n  </span>\n  <span class="header span-score-percent last-column">\n    {{ I18n.t(\'ui.markbook.score\') }}&nbsp;%\n  </span>\n</div>\n');
window.JST["course/markbook/list/user/item"]=_.template('<div class="row-fluid">\n  <span class="icons span1 useritem_{{id}}">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <span class="format">\n      {% if (student_status_val == Osp.Markbook.DONE) { %}\n        <i class="icon icon-check-assignment"></i>\n      {% } else if(student_status_val == Osp.Markbook.MARKED) { %}\n        <i class="icon icon-marked-assignment"></i>\n      {% } else { %}\n        <i class="icon icon-delegate-assignment"></i>\n      {% } %}\n    </span>\n  </span>\n  <span class="reference span4">\n    <a href="#" class="name">{{name}}</a>\n  </span>\n  <span class="span2">\n    {{ assigned_by }}\n  </span>  \n  <span class="span2 center-align vertical-span-fix">\n    {{ humanizeDate(due) }}\n  </span>\n  {% if (student_status_val != Osp.Markbook.MARKED) { %}\n    <span class="span-student-progress-column student-progress-column vertical-span-fix">\n      {% if (Osp.Markbook.isUnfinished(student_status_val)) { %}\n        {{ I18n.t(\'ui.markbook.awaiting_response\') }}\n      {% } %}\n      {% if (student_status_val == Osp.Markbook.DONE) { %}\n        <div class="manual_marking name">{{ I18n.t(\'ui.markbook.manual_marking\') }}</div>\n      {% } %}\n    </span>\n  {% }else{ %}\n    <span class="span2 score-info vertical-span-fix center-align last-column">\n      {{ no_mark ? I18n.t(\'ui.markbook.not_applicable\') : student_mark + " / " + points }}\n    </span>\n    <span class="span-score-percent vertical-span-fix last-column">\n      {{ no_mark ? I18n.t(\'ui.markbook.not_applicable\') : percentage + " %" }}\n    </span>\n  {% } %}\n</div>\n');
window.JST["course/markbook/main"]=_.template('<p class="container-fluid holder">\n  I\'m the markbook module.\n</p>\n');window.JST["course/markbook/move/group"]=_.template('{%\n  var icon = leaf ? \'vertex\' : expanded ? \'expanded\' : \'contracted\'\n%}\n\n<div class="controls item">\n  {% if (leaf) { %}\n    <span class="toggle">\n      <i class="icon-{{ icon }}"></i>\n    </span>\n  {% } else { %}\n    <a href="#" class="toggle">\n      <i class="icon-{{ icon }}"></i>\n    </a>\n  {% } %}\n  <a href="#" class="select" title="{{ name }}">\n    <span>{{ name }}</span>\n  </a>\n</div>\n');
window.JST["course/markbook/move/layout"]=_.template('<form class="form-horizontal form-small">\n  <div class="modal-header">\n    <h3>{{ I18n.t(\'ui.move.user.title\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="modal-body">\n    <div class="control-group">\n      <label class="control-label" for="titles">{{ I18n.t(\'ui.move.user.names\') }}</label>\n      <div class="controls title-input">\n        <input class="row-fluid" name="titles" type="text" disabled="disabled" value="{{ titles }}" />\n      </div>\n    </div>\n    <div class="control-group">\n      <label class="control-label" for="name">{{ I18n.t(\'ui.move.node.action\') }}</label>\n      <div class="controls">\n        <div id="move-structure" class="main modal-node-tree dialog-fix"></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <div class="row-fluid">\n      <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n    </div>\n  </div>\n</form>\n');
window.JST["course/markbook/reports/diagnostic_student_line"]=_.template('  <div class="item row-fluid">\n    <div class="span1">\n      &nbsp;\n    </div>\n    <div class="cell span2 value title">\n      <a href="#">{{ student }}</a>\n    </div>\n    <div class="cell span5 value detailed-score">\n      <table>\n        <tr class="detailed-score-headers"></tr>\n        <tr class="detailed-score-values"></tr>\n      </table>\n    </div>\n    <div class="cell span1 value confidence-level">\n    </div>\n    <div class="cell span3 value center-align mark">\n      <div class="row-fluid">\n        {% if (showNa){ %}\n          <div class="span6">\n            n/a\n          </div>\n          <div class="span6">\n            n/a\n          </div>\n        {% } else { %}\n          <div class="span6">\n            {{ mark }} / {{ points }}\n          </div>\n          <div class="span6 percent">\n            {{ percentage }} %\n          </div>\n        {% } %}\n      </div>\n    </div>\n    <div class="cell span3 value status-message center-align hide">\n      {{ message }}\n      </div>\n  </div>\n');
window.JST["course/markbook/reports/group_header"]=_.template('<div class="icons span1">\n  &nbsp;\n</div>\n<div class="header span4 sortable" data-sortable-attribute="name">\n  {{ I18n.t(\'ui.markbook.reports.group.headers.title\') }}\n</div>\n<div class="header center-align span2 sortable" data-sortable-attribute="due">\n  {{ I18n.t(\'ui.markbook.reports.group.headers.due_date\') }}\n</div>\n<div class="header center-align span3">\n  {{ I18n.t(\'ui.markbook.reports.group.headers.score\') }}\n</div>\n<div class="header center-align span2">\n  {{ I18n.t(\'ui.markbook.reports.group.headers.assigned_by\') }}\n</div>');
window.JST["course/markbook/reports/group_line"]=_.template('<div class="item accordion-group">\n  <div class="row-fluid accordion-heading">\n    <div class="cell icons span1">\n      <i>&nbsp;</i>\n    </div>\n    <div class="cell span4 value title">\n      <a class="accordion-toggle" data-toggle="collapse"  data-parent="#report-body" href="#assignment{{ cid }}">{{ name }}</a>\n    </div>\n    <div class="cell span2 value due-date">\n      {{ humanizeJsonDate(due) }}\n    </div>\n    <div class="cell span3 value average-score center-align">\n      {% if (isNoMarks){ %}\n        <span>n/a</span>\n      {% } else { %}\n        {{ I18n.t(\'ui.markbook.reports.group.lines.average_label\') }}: <span class="percent">{{ average_score }} %</span>\n      {% } %}\n    </div>\n    <div class="cell span2 value due-date">\n      {{ teacher }}\n    </div>    \n  </div>\n  <div class="row-fluid accordion-body collapse" id="assignment{{ cid }}">\n  </div>\n</div>');
window.JST["course/markbook/reports/group_student_line"]=_.template('  <div class="item row-fluid">\n    <div class="span1">\n      &nbsp;\n    </div>\n    <div class="cell span7 value title">\n      <a href="#">{{ student }}</a>\n    </div>\n    <div class="cell span4 value center-align mark">\n      <div class="row-fluid">\n        {% if (showNa){ %}\n          <div class="span6">\n            n/a\n          </div>\n          <div class="span6">\n            n/a\n          </div>\n        {% } else { %}\n          <div class="span6">\n            {{ mark }} / {{ points }}\n          </div>\n          <div class="span6 percent">\n            {{ percentage }} %\n          </div>\n        {% } %}\n      </div>\n    </div>\n    <div class="cell span4 value status-message center-align hide">\n      {{ message }}\n      </div>\n  </div>\n');
window.JST["course/markbook/reports/layout"]=_.template('<div class="modal-header">\n  <h3>{{ reportTitle }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>    \n</div>\n<div class="modal-body">\n  <div class="items custom-items">\n    <div class="row-fluid head" id="report-header">\n    </div>\n    <div class="body" id="report-body">\n    </div>\n  </div>\n</div>\n<div id="confidence-key" class="row-fluid">\n  <div class="confidence-level-key">{{ I18n.t(\'ui.markbook.reports.diagnostic.key_message\') }}:</div><div class="confidence-level-booble v2">&nbsp;</div><div class="confidence-level-key">{{ I18n.t(\'ui.markbook.reports.diagnostic.key_v2\') }}</div><div class="confidence-level-booble v1">&nbsp;</div><div class="confidence-level-key">{{ I18n.t(\'ui.markbook.reports.diagnostic.key_v1\') }}</div><div class="confidence-level-booble v0">&nbsp;</div><div class="confidence-level-key">{{ I18n.t(\'ui.markbook.reports.diagnostic.key_v0\') }}</div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid">\n    <div class="span12">\n      <a class="button button--secondary" id="print-report" target=\'_blank\'>{{ I18n.t(\'ui.common.print\') }}</a>\n      <a class="button button--secondary" id="export-report">{{ I18n.t(\'ui.common.export\') }}</a>\n    </div>\n  </div>\n</div>');
window.JST["course/markbook/reports/student_header"]=_.template('<div class="icons span1">\n  &nbsp;\n</div>\n<div class="header span4 sortable" data-sortable-attribute="name">\n  {{ I18n.t(\'ui.markbook.reports.student.headers.title\') }}\n</div>\n<div class="header center-align span2 sortable" data-sortable-attribute="due">\n  {{ I18n.t(\'ui.markbook.reports.student.headers.due_date\') }}\n</div>\n<div class="header center-align span3">\n  <div class="row-fluid">\n    <div class="span6">\n      {{ I18n.t(\'ui.markbook.reports.student.headers.marks_x_y\') }}\n    </div>\n    <div class="span6">\n      {{ I18n.t(\'ui.markbook.reports.student.headers.marks_percentage\') }}\n    </div>\n  </div>\n</div>\n<div class="header center-align span2">\n  {{ I18n.t(\'ui.markbook.reports.student.headers.assigned_by\') }}\n</div>\n');
window.JST["course/markbook/reports/student_line"]=_.template('<div class="item">\n  <div class="row-fluid">\n    <div class="cell icons span1">\n      <i>&nbsp;</i>\n    </div>\n    <div class="cell reference span4 value title">\n      <a href="#">{{ name }}</a>\n    </div>\n    <div class="cell span2 value due-date">\n      {{ humanizeJsonDate(due) }}\n    </div>\n    {% if (showNa){ %}\n      <div class="cell span3 value mark center-align">\n        <div class="row-fluid">\n          <div class="span6">\n            n/a\n          </div>\n          <div class="span6">\n            n/a\n          </div>\n        </div>\n      </div>\n    {% } else { %}\n      <div class="cell span3 noisy value mark">\n        <div class="row-fluid">\n          <div class="span6">\n            {{ mark }} / {{ points }}\n          </div>\n          <div class="span6 percent">\n            {{ percentage }} %\n          </div>\n        </div>\n      </div>\n    {% } %}\n    <div class="cell span3 noisy value status-message hide">\n      {{ message }}\n    </div>\n    <div class="cell span2 value">\n      {{ teacher }}\n    </div>       \n  </div>\n</div>');
window.JST["course/markbook/search"]=_.template('<form class="form-search">\n  <input name="type" type="hidden" />\n  <input name="source" type="hidden" />\n  <input name="content" type="hidden" value="resources" />\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-options">\n        {% if (!_.isBlank(assigned_by)) { %}\n          <div class="assigned_by" data-value="{{assigned_by}}" data-term="assigned_by">\n            {{nameFor(assigned_by)}}\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n      </div>\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{ I18n.t(\'ui.search.markbook.placeholder\') }}" value="{{query}}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n  <button type="submit" class="btn">{{ I18n.t(\'ui.search.submit\') }}</button>\n\n  {% if (showOptions()) { %}\n  <div id="search-advanced-options" class="btn-group">\n    <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n      {{I18n.t(\'ui.search.advanced\')}}\n      <span class="caret"></span>\n    </a>\n    <div class="dropdown-menu markbook">\n      <div class="container-fluid">\n        <div class="row-fluid" id="advanced-search-options">\n          <div class="span12" id="search-assigned_by">\n            <dl>\n              <dt>{{ I18n.t(\'ui.search.assigned_by\') }}</dt>\n              <dd>\n                <i class="icon-all"></i>\n                <a href="#" data-value="all" data-term=\'assigned_by\'>{{ I18n.t(\'ui.search.advanced_search.all_markbooks\') }}</a>\n              </dd>              \n              <dd>\n                <i class="icon-my_markbooks"></i>\n                <a href="#" data-value="me" data-term=\'assigned_by\'>{{ I18n.t(\'ui.search.advanced_search.my_markbooks\') }}</a>\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  {% } %}\n</form>\n\n</form>\n');
window.JST["course/markbook/tabs"]=_.template('{% if(can(\'show\', \'markbook/tabs\')) { %}\n<ul class="nav nav-tabs" id="markbook-tabs">\n  <li class="active">\n    <a href="#markbook-groups">\n      <span>{{ I18n.t(\'ui.markbook.groups\') }}</span>\n    </a>\n  </li>\n  <li class="{{ studentTabClass }}" id="markbook-students-tab">\n    <a href="#markbook-students">\n      <span>{{ I18n.t(\'ui.markbook.students\') }}</span>\n    </a>\n  </li>\n</ul>\n{% } %}\n');window.JST["course/markbook/tree/groups/filter"]=
_.template('<a href="#">\n  <i class="icon-{{ name }}"></i>\n  {{ I18n.t(\'ui.filters.\' + name) }}\n</a>\n');window.JST["course/markbook/tree/groups/layout"]=_.template('<div class="container-fluid holder">\n  <div class="tab-content">\n    <div id="markbook-groups" class="tab-pane active">\n      {% if(can(\'show\', \'markbook/filters\')) { %}\n        <div id="filters">\n          \x3c!-- <div class="loader"></div> --\x3e\n        </div>\n      {% } %}\n      \n      <ul class="nav nav-list">\n        <li class="divider"></li>\n      </ul>\n\n      {% if(can(\'show\', \'markbook/groups\')) { %}\n        <h6>{{ I18n.t(\'ui.markbook.view_assignments_by_group\') }}</h6>\n        <div id="groups">\n          \x3c!-- <div class="loader"></div> --\x3e\n        </div>\n      {% } %}\n    </div>\n  \n    <div id="markbook-students" class="tab-pane">\n      {% if(can(\'show\', \'markbook/group_name\')) { %}\n      <div id="group-name">\n        \x3c!-- <div class="loader"></div> --\x3e\n      </div>\n      {% } %}\n      \n      {% if(can(\'show\', \'markbook/users\')) { %}\n      <div id="users">\n        \x3c!-- <div class="loader"></div> --\x3e\n      </div>\n      {% } %}\n    </div>\n\n  </div>\n</div>\n');
window.JST["course/markbook/tree/users/group"]=_.template('<ul class="nav nav-list">\n  <li><h6>{{ name }}</h6></li>\n  <li class="divider"></li>\n</ul>\n');window.JST["course/markbook/tree/users/user"]=_.template('<a href="#" class="select">{{ last_name }}, {{ first_name }}</a>\n');window.JST["course/planning/create/node/form"]=_.template('<form class="form-horizontal form-small">\n\n<div class="row-fluid">\n    <div>\n      <button class="btn add disabled">\n        <i class="icon-add"></i>\n        {{ I18n.t(\'ui.create.node.add\') }}\n      </button>\n    </div>\n    <br/>\n    <div>\n      <button class="btn remove disabled">\n        <i class="icon-trash"></i>\n        {{ I18n.t(\'ui.create.node.remove\') }}\n      </button>\n    </div>\n    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n</div>\n\n<div class="modal-footer subtle-footer">\n  {% if (can(\'read\', \'planning/create/name\')) { %}\n  <div class="control-group">\n    <label class="control-label" for="name">{{ I18n.t(\'ui.create.node.name\') }}</label>\n    <div class="controls">\n      <input class="input-xxlarge" name="name" type="text" disabled="disabled" maxlength="{{gon.limits.structure.name}}" />\n    </div>\n  </div>\n  {% } %}\n\n  <div class="row-fluid">\n    <div class="span12">\n      <input class="btn btn-primary disabled" type="submit" value="{{ I18n.t(\'ui.create.node.submit\') }}" />\n    </div>\n  </div>\n</div>\n\n</form>\n');
window.JST["course/planning/layout"]=_.template('<div class="row-fluid">\n\n  <div id="tree" class="sidebar span3 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div id="list" class="main span9">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["course/planning/list/item"]=_.template('<div class="row-fluid contentitem_{{id}}">\n  <div class="icons span1">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <a href="#" class="star" aria-label="{{ favouritesLabel() }}">\n      <i class="icon-{{ !starred ? \'star-empty\' : \'star-full\' }}"></i>\n      <span class="sr-only">{{ favouritesLabel() }}</span>\n    </a>\n    <span class="planning">\n      {% if(format == "Short term") { %}<i class="icon planning_icon icon-plan-short"></i>{% } %}\n      {% if(format == "Medium term") { %}<i class="icon planning_icon icon-plan-medium"></i>{% } %}\n      {% if(format == "Long term") { %}<i class="icon planning_icon icon-plan-long"></i>{% } %}\n      {% if(format == "Other") { %}<i class="icon planning_icon icon-plan-other"></i>{% } %}\n    </span>\n  </div>\n  <div class="reference {{ Osp.profile.isTeacher() ? \'span5\' : \'span7\' }} ">\n    <a href="#" class="name  math-formula">\n      {[ name ]}\n    </a>\n    {% if (showNewLabel()) { %}\n      <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n    {% if (showUpdatedLabel()) { %}\n      <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n    <div class=\'description\'>\n      <span class="math-formula">{[ lookable_description ]}</span>\n    </div>\n  </div>\n  <div class="span2">\n    {{ preventBlank(activity_type) }}\n  </div>\n  {% if (Osp.profile.isTeacher()) { %}\n    <div class="span2 student_access center-align">\n      {% if (student_access) { %}\n        <i class=\'icon-ok\' />\n      {% } else { %}\n        &nbsp;\n      {% } %}\n    </div>\n  {% } %}\n  <div class="span2">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/planning/list/options"]=_.template('{% if (can(\'show\', \'resources/details\') && totalRecords > 0) { %}\n  {% if (hideDescriptions) { %}\n  <input type="checkbox" id="toggle_description" class="check" checked="checked" />\n  {% } else { %}\n  <input type="checkbox" id="toggle_description" class="check" />\n  {% } %}\n  <label for="toggle_description" class="check_holder">{{ I18n.t(\'ui.common.descriptions-hide\') }}</label>\n{% } %}');window.JST["course/planning/list/preview"]=
_.template('<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">&nbsp;</a>\n    <h3 class="math-formula">{[ name ]}</h3>\n  </div>\n\n\n{% if (can(\'write\', \'planning/preview/student_access\')) { %}\n  <form class="form-vertical preview-fix">\n{% } %}\n  <div class="preview-fix">\n    <div class="preview-body">\n\n      <div id="preview_image">\n        <div class="loader"></div>\n        <img id="thumbnail" src="/images/no_thumb.png" style="display:none"/>\n      </div>\n\n      {% if (may_edit) { %}\n      <div class="control-group" data-restricted data-action="write" data-permissions="planning/preview/name">\n        <label class="control-label" for="name">{{ I18n.t(\'ui.browser.name\') }}</label>\n        <div class="controls">\n          <textarea class="input-xxlarge" name="name" maxlength="{{gon.limits.content.name}}"></textarea>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'planning/preview/description\')) { %}\n        {% if (!_.isEmpty(description)) { %}\n          <div class="control-group">\n          <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n          <div class="controls">\n          {% if (can(\'write\', \'planning/preview/description\') && may_edit) { %}\n            <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n          {% } else { %}\n          \t<span class="math-formula">{[ lookable_description ]}</span>\n          {% } %}\n          </div>\n          </div>\n        {% } else if (may_edit) { %}\n            <div class="control-group" data-restricted data-action="write" data-permissions="planning/preview/description">\n              <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n              <div class="controls">\n                <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n              </div>\n            </div>\n        {% } %}\n      {% } %}\n\n      {% if (!_.isEmpty(location) && isTeacherContent) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="planning/preview/location">\n        <label class="control-label" for="location">{{ I18n.t(\'ui.browser.location\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ location ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'resources/preview/activity_type\')) { %}\n        {% if ( !_.isEmpty(activity_type)) { %}\n          <div class="control-group">\n          <label class="control-label" for="activity_type">{{ I18n.t(\'ui.browser.activity_type\') }}</label>\n          <div class="controls">\n          {% if (can(\'write\', \'resources/preview/activity_type\') && may_edit) { %}\n          <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n          {% } else { %}\n          \t<span class="math-formula">{[ activity_type ]}</span>\n          {% } %}\n          </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/activity_type">\n            <label class="control-label" for="activity_type">{{ I18n.t(\'ui.browser.activity_type\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      <div class="control-group" data-restricted data-action="write" data-permissions="planning/preview/student_access">\n        <label class="control-label" for="keywords">{[ I18n.t(\'ui.browser.access\') ]}</label>\n        <div class="controls">\n          <input type="checkbox"  name="student_access" {{ (student_access === true) ? \'checked="checked"\' : \'\' }} />\n          <p class="help-block" style="padding:0">Students will never see the Teacher Notes button in the Lesson Player</p>\n        </div>\n      </div>\n\n      {% if (!_.isEmpty(format)) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="planning/preview/format">\n        <label class="control-label" for="format">{{ I18n.t(\'ui.browser.format\') }}</label>\n        <div class="items">\n          <div class="icons">\n            <div class="planning controls">\n              {% if(format == "Short term") { %}<i class="icon planning_icon icon-plan-short"></i>{% } %}\n              {% if(format == "Medium term") { %}<i class="icon planning_icon icon-plan-medium"></i>{% } %}\n              {% if(format == "Long term") { %}<i class="icon planning_icon icon-plan-long"></i>{% } %}\n              {% if(format == "Other") { %}<i class="icon planning_icon icon-plan-other"></i>{% } %}\n              <span>&nbsp;{{format}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (!_.isEmpty(source)) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="planning/preview/source">\n        <label class="control-label" for="source">{{ I18n.t(\'ui.browser.source\') }}</label>\n        <div class="controls">\n          <span>{{source}}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'planning/preview/keywords\')) { %}\n        {% if (!_.isEmpty(keywords)) { %}\n          <div class="control-group">\n            <label class="control-label" for="keywords">{{ I18n.t(\'ui.browser.keywords\') }}</label>\n            <div class="controls">\n              {% if (can(\'write\', \'planning/preview/keywords\') && may_edit) { %}\n              <textarea class="input-xxlarge" name="keywords" maxlength="{{gon.limits.content.keywords}}"></textarea>\n              {% } else { %}\n              \t<span class="math-formula">{[ keywords ]}</span>\n              {% } %}\n            </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="read" data-permissions="planning/preview/keywords">\n            <label class="control-label" for="keywords">{{ I18n.t(\'ui.browser.keywords\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="keywords" maxlength="{{gon.limits.content.keywords}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      {% if (!_.isEmpty(file_ext)) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="planning/preview/file_ext">\n        <label class="control-label" for="file_ext">{{ I18n.t(\'ui.browser.file_ext\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ file_ext ]}</span>\n        </div>\n      </div>\n      {% } %}\n    </div>\n\n    <div class="preview-footer">\n\n      {% if (can(\'write\', \'planning/preview/student_access\')) { %}\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n      </form>\n      {% } %}\n    </div>\n  </div>\n</div>\n');
window.JST["course/planning/list/print"]=_.template('<td class="icons span1">\n  <span class="planning">\n    {% if(format == "Short term") { %}<i class="icon planning_icon icon-plan-short"></i>{% } %}\n    {% if(format == "Medium term") { %}<i class="icon planning_icon icon-plan-medium"></i>{% } %}\n    {% if(format == "Long term") { %}<i class="icon planning_icon icon-plan-long"></i>{% } %}\n    {% if(format == "Other") { %}<i class="icon planning_icon icon-plan-other"></i>{% } %}\n  </span>\n</td>\n<td class="reference span5">\n  <span class="name math-formula">\n    {[ name ]}\n  </span>\n  <div class=\'description\'>\n    <span class="math-formula">\n      {[ lookable_description ]}\n    </span>\n  </div>\n</td>\n<td class="span2">\n  {{ format }}\n</td>\n<td class="span2 student_access">\n  {% if (student_access) { %}\n    <i class=\'icon-ok\' />\n    <span class=\'span-ok\'>{{ I18n.t(\'ui.common.yes\') }}</span>\n  {% } else { %}\n    &nbsp;\n  {% } %}\n</td>\n<td class="span2">\n  {{ source }}\n</td>\n');
window.JST["course/planning/list/print_layout"]=_.template("<table class='table'>\n  <thead>\n    <th class=\"icons span1\"></th>\n    <th class=\"header span5\">{{ I18n.t('ui.browser.name') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.browser.activity_type') }}</th>\n    <th class=\"header span2 center-align\">{{ I18n.t('ui.browser.access') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.browser.source') }}</th>\n  </thead>\n  <tbody></tbody>\n</table>");window.JST["course/planning/search"]=
_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n        <div class="btn-group" id="search-options">\n          {% if (!_.isBlank(type)) { %}\n            <div class="type" data-value="{{type}}" data-term="type">\n              <span>{{type}}</span>\n              <a href="#" class="search-option-remove">&times;</a>\n            </div>\n          {% } %}\n\n          {% if (!_.isBlank(source)) { %}\n            <div class="source" data-value="{{source}}" data-term="source">\n              <span>{{sourceNameFor(source)}}</span>\n              <a href="#" class="search-option-remove">&times;</a>\n            </div>\n          {% } %}\n\n          {% if (!_.isBlank(new_contents)) { %}\n            <div class="new_contents" data-value="{{new_contents}}" data-term="new_contents">\n              <span>{{I18n.t(\'ui.browser.new_content\')}}</span>\n              <a href="#" class="search-option-remove">&times;</a>\n            </div>\n          {% } %}\n          {% if (!_.isBlank(updated_contents)) { %}\n            <div class="updated_contents" data-value="{{updated_contents}}" data-term="updated_contents">\n              <span>{{I18n.t(\'ui.browser.updated_content\')}}</span>\n              <a href="#" class="search-option-remove">&times;</a>\n            </div>\n          {% } %}\n        </div>\n        <div class="btn-group" id="search-input">\n          <input name="query" type="text" class="advanced-search-query" placeholder="{{I18n.t(\'ui.search.planning.placeholder\')}}" value="{{query}}">\n          <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <button type="submit" class="btn btn-advanced-search btn-default">{{I18n.t(\'ui.search.submit\')}}</button>\n\n  {% if ( Osp.profile.isTeacher() ) { %}\n    <div id="search-advanced-options" class="btn-group planning-search">\n      <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n        {{ I18n.t(\'ui.search.advanced\') }}\n        <span class="caret"></span>\n      </a>\n      <div class="dropdown-menu">\n        <div class="container-fluid">\n          <div class="row-fluid" id="advanced-search-options">\n            <div class="span6" id="search-type">\n              <dl>\n                <dt>{{ I18n.t(\'ui.search.type\') }}</dt>\n                {% _(formats).each(function(item) { %}\n                  <dd>\n                    <span class="format">\n                      <i class="icon planning_icon {{formatIconFor(item.name)}}"></i>\n                    </span>\n                    <a href="#" data-value="{{item.name}}" data-term=\'type\'>{{item.name}}</a>\n                  </dd>\n                {% }) %}\n              </dl>\n            </div>\n            <div class="span6">\n              <dl id="search-source">\n                <dt>{{ I18n.t(\'ui.search.source\') }}</dt>\n                <dd><a href="#" data-value="oup" data-term=\'source\'>{{sourceNameFor(\'oup\')}}</a></dd>\n                <dd><a href="#" data-value="other" data-term=\'source\'>{{sourceNameFor(\'other\')}}</a></dd>\n                <dd><a href="#" data-value="{{userId}}" data-term=\'source\'>{{sourceNameFor(userId)}}</a></dd>\n              </dl>\n\n              <a href="#" data-value="true" data-term="new_contents" class="new-contents-anchor">\n                <span class="format">\n                  <i class="icon icon-document"></i>\n                </span>\n                {{I18n.t(\'ui.browser.new_content\')}}\n              </a>\n\n              <a href="#" data-value="true" data-term="updated_contents" class="updated-contents-anchor">\n                <span class="format">\n                  <i class="icon icon-document"></i>\n                </span>\n                {{I18n.t(\'ui.browser.updated_content\')}}\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  {% } %}\n</form>\n');
window.JST["course/resources/actions"]=_.template('<div class="actionPanel"></div>\n<div class="actions__main">\n  <button type="button" class="button button--icon button--close button--cancel" data-action="close">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n    <span class="a11y-hide">{{ I18n.t(\'ui.common.close\') }}</span>\n  </button>\n  <button role="button" class="button button--secondary" data-action="assign">{{ I18n.t(\'ui.actions.assign\') }}</button>\n  {% if (showShare()) { %}\n      <button role="button" class="button button--secondary" data-action="share">{{ I18n.t(\'ui.actions.share\') }}</button>\n  {% } %}\n  {% if (onlyOneResourceSelected()) { %}\n      <button role="button" class="button button--secondary {% if (isMyContentsMode()) { %} hidden visible--xxs {% } %}" data-action="copy">{{ I18n.t(\'ui.actions.copy\') }}</button>\n  {% } %}\n\n  {% if (isMyContentsMode()) { %}\n    <button role="button" class="button button--secondary hidden visible--xs" data-action="delete">{{ I18n.t(\'ui.actions.delete\') }}</button>\n\n    {% if (onlyOneResourceSelected()) { %}\n      <button role="button" class="button button--secondary hidden visible--s" data-action="edit">{{ I18n.t(\'ui.actions.edit\') }}</button>\n    {% } %}\n    <button role="button" class="button button--secondary hidden {% if (onlyOneResourceSelected()) { %} visible--xm {% } else { %} visible--s {% } %}" data-action="addEditShortcut">{{ I18n.t(\'ui.shortcutPanel.common.addEditShortcut\') }}</button>\n\n    <div class="more {% if (onlyOneResourceSelected()) { %} hidden--xm {% } else { %} hidden--s {% } %}">\n      <button type="button" class="button button--icon" aria-label="More options" data-action="toggleMore">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-elipses"></use>\n        </svg>\n      </button>\n      <ul class="more__menu">\n        <li class="more__item more__item--caret">\n          <button type="button" class="button" aria-label="Close menu" data-action="toggleMore">\n            <svg viewBox="0 0 1 1">\n              <use xlink:href="#svg__chevron-right"></use>\n            </svg>\n          </button>\n        </li>\n        {% if (isMyContentsMode() && onlyOneResourceSelected()) { %}\n          <li class="more__item hidden--xxs">\n            <button role="button" class="button" data-action="copy">{{ I18n.t(\'ui.actions.copy\') }}</button>\n          </li>\n        {% } %}\n        <li class="more__item hidden--xs">\n          <button role="button" class="button" data-action="delete">{{ I18n.t(\'ui.actions.delete\') }}</button>\n        </li>\n        {% if (onlyOneResourceSelected()) { %}\n          <li class="more__item hidden--s">\n            <button role="button" class="button" data-action="edit">{{ I18n.t(\'ui.actions.edit\') }}</button>\n          </li>\n        {% } %}\n        <li class="more__item hidden--xm">\n          <button role="button" class="button" data-action="addEditShortcut">{{ I18n.t(\'ui.shortcutPanel.common.addEditShortcut\') }}</button>\n        </li>\n      </ul>\n    </div>\n  {% } %}\n</div>\n\n<div class="actions__assign">\n  <button type="button" class="button button--icon button--cancel" data-action="back">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-back"></use>\n    </svg>\n    <span class="a11y-hide">{{ I18n.t(\'ui.common.close\') }}</span>\n  </button>\n  <button role="button" class="button button--secondary"\n          data-action="assignNow">{{ I18n.t(\'ui.actions.assign_now\') }}</button>\n  <button role="button" class="button button--secondary"\n          data-action="assignLater">{{ I18n.t(\'ui.actions.assign_later\') }}</button>\n</div>\n\n{% if (showShare()) { %}\n<div class="actions__share">\n  <button type="button" class="button button--icon button--cancel" data-action="back">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-back"></use>\n    </svg>\n    <span class="a11y-hide">{{ I18n.t(\'ui.common.close\') }}</span>\n  </button>\n  <span>{{ I18n.t(\'ui.actions.share_via\') }}</span>\n  <button role="button" class="button button--secondary" data-action="shareGoogle">{{ I18n.t(\'ui.actions.google_classroom\') }}</button>\n  <button role="button" class="button button--secondary hidden visible--s" data-action="shareTeams">{{ I18n.t(\'ui.actions.ms_teams\') }}</button>\n  <button role="button" class="button button--secondary hidden visible--m" data-action="copyLink">{{ I18n.t(\'ui.actions.copy_link\') }}</button>\n\n  <div class="more hidden--m">\n    <button type="button" class="button button--icon hidden--m" aria-label="More options" data-action="toggleMore">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-elipses"></use>\n      </svg>\n    </button>\n    <ul class="more__menu">\n      <li class="more__item more__item--caret">\n        <button type="button" class="button" aria-label="Close menu" data-action="toggleMore">\n          <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__chevron-right"></use>\n          </svg>\n        </button>\n      </li>\n      <li class="more__item hidden--s">\n        <button role="button" class="button" data-action="shareTeams">{{ I18n.t(\'ui.actions.ms_teams\') }}</button>\n      </li>\n      <li class="more__item">\n        <button role="button" class="button" data-action="copyLink">{{ I18n.t(\'ui.actions.copy_link\') }}</button>\n      </li>\n    </ul>\n  </div>\n</div>\n{% } %}');
window.JST["course/resources/copy-panel"]=_.template('<div class="sidepanel__body">\n  <div class="helpCard helpCard--light mb--4x">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      {{ getInstructionsText() }}\n    </div>\n  </div>\n  <div class="form__group">\n    <label for="copyTitle" class="form__headingLabel">*{{ I18n.t(\'ui.copyPanel.common.title\') }}</label>\n    <input id="copyTitle" data-action="changeTitle" class="form__input form__input--fullWidth" type="text" aria-label="title" />\n  </div>\n</div>\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button"\n      class="button button--secondary">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <button data-action="confirm" role="button"\n      class="button button--primary">{{ I18n.t(\'ui.copyPanel.common.copy\') }}</button>\n  </div>\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    {{ I18n.t(\'ui.copyPanel.common.success\') }}\n  </div>\n\n  <div class="message message--popup messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ I18n.t(\'ui.copyPanel.common.error\') }}\n  </div>\n</div>');
window.JST["course/resources/delete-panel"]=_.template('<div class="sidepanel__body">\n  <h3>{{ I18n.t(\'ui.deletePanel.common.deleteContent\') }}</h3>\n  <p>{{ I18n.t(\'ui.deletePanel.common.unableToRecover\') }}</p>\n</div>\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button"\n      class="button button--secondary">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <button data-action="confirm" role="button"\n      class="button button--primary">{{ I18n.t(\'ui.deletePanel.common.delete\') }}</button>\n  </div>\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    {{ I18n.t(\'ui.deletePanel.common.success\') }}\n  </div>\n\n  <div class="message message--popup messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ I18n.t(\'ui.deletePanel.common.error\') }}\n  </div>\n</div>');
window.JST["course/resources/layout"]=_.template('<section class="sidepanel sidepanel--lenabled" aria-labelledby="browse allRes" role="dialog" aria-modal="true">\n  <header class="sidepanel__header hidden--l">\n    <h1 id="browse sidepanel-focusable" tabindex="-1">Browse</h1>\n    <button type="button" class="button button--icon button--close" aria-label="Close" data-action="toggleResourcesTree">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </header>\n  <div class="sidepanel__body structures"></div>\n  <ul class="sidepanel__footer">\n    {% if (showAssignmnetBasket()) { %}\n    <li class="sidepanel__footerItem sidepanel__footerItem hidden visible--l">\n      <button role="button" class="button" data-action="assignmentBasket">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-assignments"></use>\n        </svg>\n        <span class="button__label">Assignment basket</span>\n        <span class="badge hidden" data-counter="assignments">0</span>\n      </button>\n      <div class="message message--popup" data-event="assignmentAdded">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-done-small"></use>\n        </svg>\n        {{ I18n.t(\'ui.assignment_basket.items_added\') }}\n      </div>\n    </li>\n    {% } %}\n    <li class="sidepanel__footerItem">\n      <button role="button" class="button" data-action="favourites">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-favourite"></use>\n        </svg>\n        <span class="button__label">Favourites</span>\n      </button>\n      <div class="message message--popup" data-event="favouriteAdded" role="status" aria-live="polite">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-done-small"></use>\n        </svg>\n      </div>\n      <div class="message message--popup" data-event="favouriteRemoved" role="status" aria-live="polite">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-done-small"></use>\n        </svg>\n      </div>\n    </li>\n    {% if (showMyContent()) { %}\n    <li class="sidepanel__footerItem">\n      <button role="button" class="button" data-action="myContents">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-resources"></use>\n        </svg>\n        <span class="button__label">{{ myContentsLabel() }}</span>\n      </button>\n    </li>\n    {% } %}\n  </ul>\n</section>\n\n<div class="backdrop"></div>\n\n<section class="section__wrapper" aria-label="Resource listings">\n  <div class="section__header"></div>\n  <div class="section__body" tabindex="0"></div>\n</section>\n<div role="status" class="a11y-hide">\n  <p class="hide-when-not-empty">No resources found. We\'re sorry, we didn\'t find any items that match your selection. Please try again.</p>\n</div>\n');
window.JST["course/resources/link-panel"]=_.template('<div class="sidepanel__body">\n  <div class="form__group">\n    <label for="link" class="form__headingLabel">*{{ I18n.t(\'ui.linkPanel.common.link\') }}</label>\n    <input name="link" class="form__input form__input--fullWidth" type="url" aria-label="link" value="{{ link }}" />\n  </div>\n\n  <div class="form__group">\n    <label for="linkTitle" class="form__headingLabel">*{{ I18n.t(\'ui.linkPanel.common.linkTitle\') }}</label>\n    <input name="linkTitle" class="form__input form__input--fullWidth" type="text" aria-label="title" value="{{ linkTitle }}" />\n  </div>\n  {% if (showVisibilityToggle) { %}\n    <div class="visibilityGroup">\n      <a href="#" role="button" data-action="changeVisibility">\n        <span class="button__state button__state--idle">\n          <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n            <use xlink:href="#svg__streamline-access-locked"></use>\n          </svg>\n          {{ I18n.t(\'ui.linkPanel.common.hiddenForAllStudents\') }}\n        </span>\n        <span class="button__state button__state--enabled">\n          <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n            <use xlink:href="#svg__streamline-access"></use>\n          </svg>\n          {{ I18n.t(\'ui.linkPanel.common.visibleForAllStudents\') }}\n        </span>\n      </a>\n    </div>\n  {% } %}\n\n  <div class="form__group">\n    <label for="linkDescription" class="form__headingLabel">{{ I18n.t(\'ui.linkPanel.common.linkDescription\') }}</label>\n    <textarea name="linkDescription" class="form__input form__input--fullWidth" type="text" aria-label="description">\n      {{ linkDescription }}\n    </textarea>\n  </div>\n  {% if (showMarksField) { %}\n    <div class="form__group">\n      <label for="marksAvailable" class="form__headingLabel">{{ I18n.t(\'ui.linkPanel.common.marksAvailable\') }}</label>\n      <input name="marksAvailable" class="form__input form__input" type="number" aria-label="marks" value="{{ marksAvailable }}" />\n    </div>\n  {% } %}\n</div>\n\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button" class="button button--secondary">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <button data-action="confirmAddLink" role="button" {{ shouldDisableSaveButton ? \'disabled\' : \'\' }} class="button button--primary">{{ saveButtonLabel  }}</button>\n  </div>\n\n  <div class="message messageWarning">\n    <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    <span class="messageWarning__label">{{ I18n.t(\'ui.linkPanel.common.requiredFields\') }}</span>\n  </div>\n\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    {{ successLabel  }}\n  </div>\n\n  <div class="message messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ errorLabel }}\n  </div>\n</div>\n');
window.JST["course/resources/list/head"]=_.template('<div class="row-fluid header-fix">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n    <span>\n      &nbsp;\n    </span>\n    <span>\n      &nbsp;\n    </span>\n  </span>\n  <span class="header {{ Osp.profile.isTeacher() ? \'span5\' : \'span7\' }} sortable" id="name-sort" data-sortable-attribute="name">\n    {{ I18n.t(\'ui.browser.name\') }}\n  </span>\n  <span class="header span2 sortable" id="resource-sort" data-sortable-attribute="activity_type">\n    {{ I18n.t(\'ui.browser.activity_type\') }}\n  </span>\n  {% if (Osp.profile.isTeacher()) { %}\n    <span class="header span2 sortable center-align" id="visibility" data-sortable-attribute="student_access">\n      {[ I18n.t(\'ui.browser.access_header\') ]}\n    </span>\n  {% } %}\n  <span class="header span2 sortable" id="source" data-sortable-attribute="sortable_source">\n    {{ I18n.t(\'ui.browser.source\') }}\n  </span>\n</div>\n');
window.JST["course/resources/list/item"]=_.template('<div class="row-fluid contentitem_{{id}}">\n  <div class="icons span1">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <a href="#" class="star" aria-label="{{ favouritesLabel() }}">\n      <i class="icon-{{ !starred ? \'star-empty\' : \'star-full\' }}"></i>\n      <span class="sr-only">{{ favouritesLabel() }}</span>\n    </a>\n    <span class="format">\n      <i class="icon icon-{{ format }}"></i>\n    </span>\n  </div>\n  <div class="reference {{ Osp.profile.isTeacher() ? \'span5\' : \'span7\' }}">\n    <a href="#" class="name math-formula">\n      {[ lookable_name ]}\n    </a>\n    {% if (showNewLabel()) { %}\n      <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n    {% if (showUpdatedLabel()) { %}\n      <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n    <div class=\'description\'>\n      <span class="math-formula">\n        {[ lookable_description ]}\n      </span>\n    </div>\n  </div>\n  <div class="span2">\n    {{ preventBlank(activity_type) }}\n  </div>\n  {% if (Osp.profile.isTeacher()) { %}\n    <div class="span2 student_access center-align">\n      {% if (student_access) { %}\n        <i class=\'icon-ok\' />\n      {% } else { %}\n        &nbsp;\n      {% } %}\n    </div>\n  {% } %}\n  <div class="span2">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/resources/list/layout"]=_.template('<div class="holder">\n  <div class="pagination-wrapper upper with-options"></div>\n  <div id="options" class="upper">\n    \x3c!--div class="loader"></div--\x3e\n  </div>  \n\n  <div class="clear">\n    <div id="actions" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n  </div>\n\n  <div class="holder">\n  \n    <div id="contents">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n    <div id="preview">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n\n  </div>\n</div>\n');
window.JST["course/resources/list/options"]=_.template('{% if (can(\'show\', \'resources/details\') && totalRecords > 0) { %}\n  {% if (hideDescriptions) { %}\n  <input type="checkbox" id="toggle_description" class="check" checked="checked" />\n  {% } else { %}\n  <input type="checkbox" id="toggle_description" class="check" />\n  {% } %}\n  <label for="toggle_description" class="check_holder">{{ I18n.t(\'ui.common.descriptions-hide\') }}</label>\n{% } %}\n');window.JST["course/resources/list/preview"]=
_.template('<div class="preview-form">\n  <div class="preview-header">\n    <a class="close">&nbsp;</a>\n    <h3 class="math-formula">{[ lookable_name ]}</h3>\n  </div>\n\n\n{% if (can(\'write\', \'resources/preview/student_access\')) { %}\n  <form class="form-vertical preview-fix">\n{% } %}\n  <div class="preview-fix">\n\n    <div class="preview-body">\n\n      <div id="preview_image">\n        <div class="loader"></div>\n        <img id="thumbnail" src="/images/no_thumb.png" style="display:none"/>\n      </div>\n      {% if (may_edit && url) { %}\n      <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/url">\n        <label class="control-label" for="url">{{ I18n.t(\'ui.upload.form.url\') }}</label>\n        <div class="controls">\n          <textarea class="input-xxlarge" name="url"></textarea>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (may_edit) { %}\n      <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/name">\n        <label class="control-label" for="name">{{ I18n.t(\'ui.browser.name\') }}</label>\n        <div class="controls">\n          <textarea class="input-xxlarge" name="name" maxlength="{{gon.limits.content.name}}"></textarea>\n        </div>\n      </div>\n      {% } %}\n\n\n      {% if (can(\'read\', \'resources/preview/description\')) { %}\n        {% if (description && description.length > 0) { %}\n          <div class="control-group">\n            <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n            <div class="controls">\n              {% if (can(\'write\', \'resources/preview/description\') && may_edit) { %}\n              <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n              {% } else { %}\n              \t<span class="math-formula">{[ lookable_description ]}</span>\n              {% } %}\n            </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/description">\n            <label class="control-label" for="description">{{ I18n.t(\'ui.browser.description\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="description" maxlength="{{gon.limits.content.description}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      {% if (location && location.length > 0 && isTeacherContent) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="resources/preview/location">\n        <label class="control-label" for="location">{{ I18n.t(\'ui.browser.location\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ location ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n\n      {% if (can(\'read\', \'resources/preview/activity_type\')) { %}\n        {% if (activity_type && activity_type.length > 0) { %}\n          <div class="control-group">\n          <label class="control-label" for="activity_type">{{ I18n.t(\'ui.browser.activity_type\') }}</label>\n          <div class="controls">\n          {% if (can(\'write\', \'resources/preview/activity_type\') && may_edit) { %}\n          <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n          {% } else { %}\n          \t<span class="math-formula">{[ activity_type ]}</span>\n          {% } %}\n          </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/activity_type">\n            <label class="control-label" for="activity_type">{{ I18n.t(\'ui.browser.activity_type\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="activity_type" maxlength="{{gon.limits.content.activity_type}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      <div class="control-group" data-restricted data-action="write" data-permissions="resources/preview/student_access">\n        <label class="control-label" for="keywords">{[ I18n.t(\'ui.browser.access\') ]}</label>\n        <div class="controls">\n          <input type="checkbox"  name="student_access" {{ (student_access === true) ? \'checked="checked"\' : \'\' }} />\n        </div>\n      </div>\n\n      {% if (format && format.length > 0) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="resources/preview/format">\n        <label class="control-label" for="format">{{ I18n.t(\'ui.browser.format\') }}</label>\n        <div class="item">\n          <div class="icons">\n            <div class="format controls">\n              <i class="icon icon-{{ format }}"></i><span>&nbsp;{{format === \'sso\' ? \'undefined\' : format}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (source && source.length > 0) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="resources/preview/source">\n        <label class="control-label" for="source">{{ I18n.t(\'ui.browser.source\') }}</label>\n        <div class="controls">\n          <span>{{source}}</span>\n        </div>\n      </div>\n      {% } %}\n\n      {% if (can(\'read\', \'resources/preview/keywords\')) { %}\n        {% if (keywords && keywords.length > 0) { %}\n          <div class="control-group">\n          <label class="control-label" for="keywords">{{ I18n.t(\'ui.browser.keywords\') }}</label>\n          <div class="controls">\n          {% if (can(\'write\', \'resources/preview/keywords\') && may_edit) { %}\n          <textarea class="input-xxlarge" name="keywords" maxlength="{{gon.limits.content.keywords}}"></textarea>\n          {% } else { %}\n          \t<span class="math-formula">{[ keywords ]}</span>\n          {% } %}\n          </div>\n          </div>\n        {% } else if (may_edit) { %}\n          <div class="control-group" data-restricted data-action="read" data-permissions="resources/preview/keywords">\n            <label class="control-label" for="keywords">{{ I18n.t(\'ui.browser.keywords\') }}</label>\n            <div class="controls">\n              <textarea class="input-xxlarge" name="keywords" maxlength="{{gon.limits.content.keywords}}"></textarea>\n            </div>\n          </div>\n        {% } %}\n      {% } %}\n\n      {% if (file_ext && file_ext.length > 0) { %}\n      <div class="control-group" data-restricted data-action="read" data-permissions="resources/preview/file_ext">\n        <label class="control-label" for="file_ext">{{ I18n.t(\'ui.browser.file_ext\') }}</label>\n        <div class="controls">\n          <span class="math-formula">{[ file_ext ]}</span>\n        </div>\n      </div>\n      {% } %}\n\n    </div>\n\n    <div class="preview-footer">\n      {% if (can(\'write\', \'resources/preview/student_access\')) { %}\n        <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n      </form>\n      {% } %}\n    </div>\n  </div>\n</div>\n');
window.JST["course/resources/list/print"]=_.template('<td class="icons span1">\n  <span class="format">\n    <i class="icon icon-{{ format }}"></i>\n  </span>\n</td>\n<td class="reference span5">\n  <span class="name math-formula">\n    {[ name ]}\n  </span>\n  <div class=\'description\'>\n    <span class="math-formula">\n      {[ lookable_description ]}\n    </span>\n  </div>\n</td>\n<td class="span2">\n  {{ activity_type }}\n</td>\n<td class="span2 student_access">\n  {% if (student_access) { %}\n    <i class=\'icon-ok\' />\n    <span class=\'span-ok\'>{{ I18n.t(\'ui.common.yes\') }}</span>\n  {% } else { %}\n    &nbsp;\n  {% } %}\n</td>\n<td class="span2">\n  {{ source }}\n</td>\n');
window.JST["course/resources/list/print_layout"]=_.template("<table class='table'>\n  <thead>\n    <th class=\"icons span1\"></th>\n    <th class=\"header span5\">{{ I18n.t('ui.browser.name') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.browser.activity_type') }}</th>\n    <th class=\"header span2 center-align\">{{ I18n.t('ui.browser.access') }}</th>\n    <th class=\"header span2\">{{ I18n.t('ui.browser.source') }}</th>\n  </thead>\n  <tbody></tbody>\n</table>");window.JST["course/resources/move/layout"]=
_.template('<form class="form-horizontal form-small">\n  <div class="modal-header">\n    <h3>{{ I18n.t(\'ui.move.node.title\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="modal-body">\n    <div class="control-group">\n      <label class="control-label" for="titles">{{ I18n.t(\'ui.move.node.titles\') }}</label>\n      <div class="controls title-input">\n        <input class="row-fluid" name="titles" type="text" disabled="disabled" value="{{ titles }}" />\n      </div>\n    </div>\n    <div class="control-group">\n      <label class="control-label" for="name">{{ I18n.t(\'ui.move.node.action\') }}</label>\n      <div class="controls">\n        <div id="move-structure" class="main modal-node-tree dialog-fix"></div>\n      </div>\n    </div> \n  </div>\n\n  <div class="modal-footer">\n    <div class="row-fluid">\n      <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n    </div>\n  </div>\n</form>\n');
window.JST["course/resources/panel/digibook/head"]=_.template('<div class="header icons"></div>\n<div class="header flex3 sortable" id="name-sort" data-sortable-attribute="name">\n  {{ I18n.t(\'ui.browser.name\') }}\n</div>\n<div class="header flex2 sortable" id="resource-sort" data-sortable-attribute="activity_type">\n  {{ I18n.t(\'ui.browser.activity_type\') }}\n</div>\n<div class="header flex1 sortable" id="source" data-sortable-attribute="sortable_source">\n  {{ I18n.t(\'ui.browser.source\') }}\n</div>\n');
window.JST["course/resources/panel/digibook/item"]=_.template('<div class="contentitem_{{id}} {{ student_access ? \'visible_to_students\' : \'\' }}">\n  <div class="icons">\n    <a href="#" class="star">\n      <i class="icon-{{ !starred ? \'star-empty\' : \'star-full\' }}"></i>\n    </a>\n    <span class="format">\n      <i class="icon icon-{{ format }}"></i>\n    </span>\n  </div>\n  <div class="flex3">\n    <a href="#" class="name math-formula">\n      {[ name ]}\n    </a>\n    {% if (showNewLabel()) { %}\n      <span class="label label-new-content">{{ I18n.t(\'ui.browser.new\') }}</span>\n    {% } %}\n    {% if (showUpdatedLabel()) { %}\n      <span class="label label-updated-content">{{ I18n.t(\'ui.browser.updated\') }}</span>\n    {% } %}\n  </div>\n  <div class="flex2">\n    {{ preventBlank(activity_type) }}\n  </div>\n  <div class="flex1">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/resources/panel/digibook/layout"]=_.template('<header class="panel-header">\n  <div class="panel-header-top">\n    <h1 class="panel-header-title">Resources</h1>\n    <aside class="filter"></aside>\n  </div>\n  <aside class="toolbar"></aside>\n</header>\n\n<div class="panel-body">\n  <aside class="tree"></aside>\n  <div class="list"></div>\n</div>\n');window.JST["course/resources/panel/digibook/list"]=_.template('<div class="pagination-wrapper"></div>\n<div class="head-wrapper"></div>\n<div class="items-wrapper">\n  <div class="body-wrapper"></div>\n</div>\n');
window.JST["course/resources/panel/digibook/toolbar/button"]=_.template('<a href="#">\n  <i class="{{iconClass}}"></i>\n  <span>{{title}}</span>\n</a>\n');window.JST["course/resources/panel/digibook/toolbar/layout"]=_.template('<div class="toolbar-group">\n  <div class="toolbar-button toolbar-button-this-spread"></div>\n  <div class="toolbar-button toolbar-button-all"></div>\n</div>\n\n<div class="toolbar-group">\n  <div class="toolbar-button toolbar-button-my-favourites"></div>\n  <div class="toolbar-button toolbar-button-my-resources"></div>\n</div>\n\n\n');
window.JST["course/resources/panel/external"]=_.template('<div class="modal-body">\n  <div class="resources-panel-body row-fluid">\n    <div class=\'row-fluid\'>\n      <div id="tree-panel" class="sidebar span4 dialog-fix"></div>\n      <div id="list-panel" class="main span8"></div>\n    </div>\n  </div>\n</div>\n-<div class="modal-footer">\n  <div class="row-fluid">\n    <input type=\'submit\' class="btn btn-primary disabled" value="{{ I18n.t(\'ui.browser.panel.button\')  }}" />\n  </div>\n</div>');
window.JST["course/resources/panel/foot"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {{ I18n.t(\'ui.browser.nocontents\') }}\n  </span>\n</div>');window.JST["course/resources/panel/head"]=_.template('<div class="row-fluid">\n  <div class="icons span2">\n    <span class="checkall">\n      <input type="checkbox" {% if (allSelected) { %} checked="checked" {% } %} />\n    </span>\n    <span>&nbsp;</span>\n    <span>&nbsp;</span>\n  </div>\n  <div class="header span5" id="name-panel">\n    {{ I18n.t(\'ui.browser.name\') }}\n  </div>\n  <div class="header span3" id="resource-panel">\n    {{ I18n.t(\'ui.browser.activity_type\') }}\n  </div>\n  <div class="header span2" id="source-panel">\n    {{ I18n.t(\'ui.browser.source\') }}\n  </div>\n</div>');
window.JST["course/resources/panel/item"]=_.template('<div class="row-fluid contentitem_{{id}} {{ student_access ? \'visible_to_students\' : \'\' }}">\n  <div class="icons span2">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n    <a href="#" class="star">\n      <i class="icon-{{ !starred ? \'star-empty\' : \'star-full\' }}"></i>\n    </a>\n    <span class="format">\n      <i class="icon icon-{{ format }}"></i>\n    </span>\n  </div>\n  <div class="span5">\n    <a href="#" class="name math-formula">\n      {[ name ]}\n    </a>\n  </div>\n  <div class="span3">\n    {{ preventBlank(activity_type) }}\n  </div>\n\n  <div class="span2">\n    {{ source }}\n  </div>\n</div>\n');
window.JST["course/resources/panel/layout"]=_.template('<div class="modal-header">\n  <h3>{{ title() }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <div class="resources-panel-body row-fluid">\n    <div class=\'row-fluid\'>\n      <div id="tree-panel" class="sidebar span4 dialog-fix"></div>\n\n      <div id="list-panel" class="main span8"></div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input type=\'submit\' class="btn btn-primary disabled" value="{{ I18n.t(\'ui.browser.panel.button\')  }}" />\n  </div>\n</div>\n');
window.JST["course/resources/panel/list-digital-book"]=_.template('<div id="contents-panel">\n  \x3c!-- <div class="loader"></div> --\x3e\n</div>');window.JST["course/resources/panel/list"]=_.template('<div id="contents-panel">\n  \x3c!-- <div class="loader"></div> --\x3e\n</div>');window.JST["course/resources/panel/table"]=_.template('<div class="pagination-wrapper old"></div>\n<div class="head-wrapper"></div>\n<div class="body">\n  <div class="body-wrapper"></div>\n</div>');window.JST["course/resources/panel/tree"]=
_.template('<div class="container-fluid holder">\n\n  <div id="filters-panel">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <ul class="nav nav-list">\n    <li class="divider"></li>\n  </ul>\n\n  <div id="structures-panel">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>');window.JST["course/resources/search"]=_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-options">\n        {% if (!_.isBlank(type)) { %}\n          <div class="type" data-value="{{type}}" data-term="type">\n            <span>{{formatNameFor(type)}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(source)) { %}\n          <div class="source" data-value="{{source}}" data-term="source">\n            <span>{{sourceNameFor(source)}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n\n        {% if (!_.isBlank(new_contents)) { %}\n          <div class="new_contents" data-value="{{new_contents}}" data-term="new_contents">\n            <span>{{I18n.t(\'ui.browser.new_content\')}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n        {% if (!_.isBlank(updated_contents)) { %}\n          <div class="updated_contents" data-value="{{updated_contents}}" data-term="updated_contents">\n            <span>{{I18n.t(\'ui.browser.updated_content\')}}</span>\n            <a href="#" class="search-option-remove">&times;</a>\n          </div>\n        {% } %}\n      </div>\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{I18n.t(\'ui.search.resources.placeholder\')}}" value="{{query}}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n\n  <button type="submit" class="btn btn-advanced-search btn-default">{{I18n.t(\'ui.search.submit\')}}</button>\n\n  <div id="search-advanced-options" class="btn-group">\n    <a href="#" class="btn dropdown-toggle" data-target="#" data-toggle="dropdown">\n      {{title}}\n      <span class="caret"></span>\n    </a>\n    <div class="dropdown-menu">\n      <div class="container-fluid">\n        <div class="row-fluid" id="advanced-search-options">\n          <div class="span6" id="search-type">\n            <dl>\n              <dt>{{I18n.t(\'ui.search.type\')}}</dt>\n              {% _(formats).each(function(item) { %}\n                <dd>\n                  <span class="format">\n                    <i class="icon icon-{{item.name}}"></i>\n                  </span>\n                  <a href="#" data-value="{{item.name}}" data-term=\'type\'>{{formatNameFor(item.name)}}</a>\n                </dd>\n              {% }) %}\n            </dl>\n          </div>\n          <div class="span6">\n            <dl class="search-source">\n              <dt>{{I18n.t(\'ui.search.source\')}}</dt>\n              <dd><a href="#" data-value="oup" data-term=\'source\'>{{sourceNameFor(\'oup\')}}</a></dd>\n              <dd><a href="#" data-value="other" data-term=\'source\'>{{sourceNameFor(\'other\')}}</a></dd>\n              {% if(Osp.profile.isTeacher()) { %}<dd>\n              <a href="#" data-value="{{userId}}" data-term=\'source\'>{{sourceNameFor(userId)}}</a></dd>{% } %}\n            </dl>\n\n            <a href="#" data-value="true" data-term="new_contents" class="new-contents-anchor">\n              <span class="format">\n                <i class="icon icon-document"></i>\n              </span>\n              {{I18n.t(\'ui.browser.new_content\')}}\n            </a>\n            <a href="#" data-value="true" data-term="updated_contents" class="updated-contents-anchor">\n              <span class="format">\n                <i class="icon icon-document"></i>\n              </span>\n              {{I18n.t(\'ui.browser.updated_content\')}}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n');
window.JST["course/resources/share-panel"]=_.template('<div class="sidepanel__body">\n  <div class="helpCard">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-information-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      {[ message ]}\n\n      {% if (!withStudentAccess) { %}\n      <ul class="mv--4x">\n        {% resourcesNamesList.map(function (resourceName) { %}\n        <li>{[ resourceName ]}</li>\n        {% }) %}\n      </ul>\n\n      <label class="checkbox">\n        <input type="checkbox">\n        <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n          <use xlink:href="#svg__checkbox-unchecked"></use>\n        </svg>\n        <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n          <use xlink:href="#svg__checkbox-checked"></use>\n        </svg>\n        <span class="checkbox__label">{{ I18n.t(\'ui.share.common.panel.make_visible\')}}</span>\n      </label>\n      {% } %}\n    </div>\n  </div>\n</div>\n\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button" class="button button--secondary">{{ I18n.t(\'ui.share.common.panel.cancel\')}}</button>\n    <button data-action="share" role="button" class="button button--primary">{[ shareButtonLabel ]}</button>\n  </div>\n\n  <div class="message message--popup">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done-small"></use>\n    </svg>\n    {[ successMessage ]}\n  </div>\n</div>\n');
window.JST["course/resources/shortcut-panel-tree-node"]=_.template('<div class="tree__content">\n    <svg viewBox="0 0 1 1" class="tree__caret" aria-hidden="true">\n      <use xlink:href="#svg__chevron-right"></use>\n    </svg>\n  \n    <div class="flex flex--directionColumn">\n        <button role="button" class="tree__toggle tree__toggle--desktop button">{[ name ]}</button> \x3c!-- Use this selector (tree__toggle--desktop) to open this tree branch & update the resources list --\x3e\n        <div class="nodeActions">\n          <button role="button" class="button button--primary" data-action="selectNode">{{ I18n.t(\'ui.shortcutPanel.common.select\') }}</button>\n          <div class="selectedNodeActions flex hidden">\n            <span class="infoLabel infoLabel--success">\n              <svg viewBox="0 0 1 1" class="icon icon--default">\n                <use xlink:href="#svg__streamline-done"></use>\n              </svg>\n              {{ I18n.t(\'ui.shortcutPanel.common.selected\') }}\n            </span>\n            <button role="button" class="button button--primary" data-action="clearSelection">{{ I18n.t(\'ui.shortcutPanel.common.clearSelection\') }}</button>\n          </div>\n        </div>\n    </div>\n  \n  </div>\n  \n  <ul class="tree tree--inner"></ul>');
window.JST["course/resources/shortcut-panel"]=_.template('<div class="sidepanel__body shortcutPanel" tabindex="0">\n  <div class="shortcutPanel__instructions">\n    <div class="helpCard mb--4x">\n      <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n      <div class="helpCard__content">\n        {{ I18n.t(\'ui.shortcutPanel.common.instructions\') }}\n      </div>\n    </div>\n    <h3>{{ I18n.t(\'ui.shortcutPanel.common.shorcutLocation\') }}</h3>\n  </div>\n\n  <div class="shortcutPanelTree"></div>\n\n</div>\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button"\n      class="button button--secondary">{{ I18n.t(\'ui.common.cancel\') }}</button>\n    <button data-action="add" role="button"\n      class="button button--primary">{{ I18n.t(\'ui.shortcutPanel.common.addEdit\') }}</button>\n  </div>\n  <div class="message message--visible messageWarning">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    <span class="messageWarning__label">{{ I18n.t(\'ui.shortcutPanel.common.chooseFolder\') }}</span.>\n  </div>\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    {{ I18n.t(\'ui.shortcutPanel.common.changesSaved\') }}\n  </div>\n\n  <div class="message message--popup messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ I18n.t(\'ui.shortcutPanel.common.errorSaving\') }}\n  </div>\n</div>');
window.JST["course/resources/tree/filter"]=_.template('<a href="#">\n  <i class="icon-{{ name }}"></i>\n  {{ I18n.t(\'ui.filters.\' + name) }}\n</a>\n');window.JST["course/resources/upload-panel"]=_.template('<div class="sidepanel__body">\n  {% if (isEditMode) { %}\n    <div class="form__group">\n      <label class="form__headingLabel">{{ I18n.t(\'ui.uploadPanel.common.currentFile\') }}</label>\n      <a class="ml fileSelection__currentFile" data-action="openCurrentFile">{{ currentFile }}</a>\n    </div>\n  {% } %}\n  <div class="form__group">\n    <div class="fileSelection">\n      <input data-action="uploadFile" type="file" class="hidden" />\n      <button role="button" data-action="fileSelection" class="button button--primary">\n        <svg viewBox="0 0 1 1" class="icon icon--default">\n          <use xlink:href="#svg__streamline-upload"></use>\n        </svg>\n        <span class="button__label">{{ fileControlLabel }}</span>\n      </button>\n      <span class="fileSelection__fileName">{{ fileName }}</span>\n    </div>\n  </div>\n\n  <div class="form__group">\n    <label for="fileTitleInput" class="form__headingLabel">*{{ I18n.t(\'ui.uploadPanel.common.fileTitle\') }}</label>\n    <input id="fileTitleInput" name="fileTitle" data-action="changeFileTitle" class="form__input form__input--fullWidth" type="text" aria-label="title" value="{{ fileTitle }}"/>\n  </div>\n\n  <div class="form__group">\n    <label class="form__headingLabel">*{{ I18n.t(\'ui.uploadPanel.common.contentType\') }}</label>\n    <div class="accordion accordion--select">\n      <fieldset>\n        <legend>\n          <button role="button" data-action="contentTypeSelection" class="accordion__toggle">\n            <span class="button__label capitalize">Choose option</span>\n            <svg viewBox="0 0 1 1" class="accordion__caret">\n              <use xlink:href="#svg__chevron-right"></use>\n            </svg>\n          </button>\n        </legend>\n        <div class="accordion__content">\n          {% _(contentTypeOptions).each(function(option) { %}\n          <div>\n            <label class="radiobutton">\n              <input type="radio" name="contentType" value="{{ option.id }}" data-action="changeContentType" data-content-type="{{ option.name }}">\n              <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--unselected">\n                <use xlink:href="#svg__button_radio_unselected"></use>\n              </svg>\n              <svg viewBox="0 0 1 1" class="radiobutton__icon radiobutton__icon--selected">\n                <use xlink:href="#svg__button_radio_selected"></use>\n              </svg>\n              <svg viewBox="0 0 40 40" class="radiobutton__icon radiobutton__icon--focused">\n                <use xlink:href="#button_radio_selected-focus"></use>\n              </svg>\n              <span class="radiobutton__label capitalize">{{ option.name }}</span>\n            </label>\n          </div>\n          {% }) %}\n        </div>\n    </fieldset>\n    </div>\n  </div>\n  {% if (showVisibilityToggle) { %}\n    <div class="visibilityGroup">\n      <a href="#" role="button" data-action="changeVisibility">\n        <span class="button__state button__state--idle">\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-access-locked"></use>\n          </svg>\n          {{ I18n.t(\'ui.uploadPanel.common.hiddenForAllStudents\') }}\n        </span>\n        <span class="button__state button__state--enabled">\n          <svg viewBox="0 0 1 1" class="icon icon--default">\n            <use xlink:href="#svg__streamline-access"></use>\n          </svg>\n          {{ I18n.t(\'ui.uploadPanel.common.visibleForAllStudents\') }}\n        </span>\n      </a>\n    </div>\n  {% } %}\n\n  <div class="form__group">\n    <label for="descriptionInput" class="form__headingLabel">{{ I18n.t(\'ui.uploadPanel.common.fileDescription\') }}</label>\n    <textarea id="descriptionInput" name="fileDescription" data-action="changeFileDescription" class="form__input form__input--fullWidth" type="text" aria-label="description">\n      {{ fileDescription }}\n    </textarea>\n  </div>\n  {% if (showMarksField) { %}\n    <div class="form__group">\n      <label for="marksInput" class="form__headingLabel">{{ I18n.t(\'ui.uploadPanel.common.marksAvailable\') }}</label>\n      <input id="marksInput" name="marksAvailable" data-action="changeMarksAvailable" class="form__input form__input" type="number" aria-label="marks" value="{{ marksAvailable }}"/>\n    </div>\n  {% } %}\n</div>\n\n<div class="sidepanel__footer">\n  <div class="sidepanel__footerActions">\n    <button data-action="cancel" role="button" class="button button--secondary">{{ I18n.t(\'ui.share.common.panel.cancel\') }}</button>\n    <button data-action="confirmUpload" role="button" {{ shouldDisableSaveButton ? \'disabled\' : \'\' }} class="button button--primary">{{ saveButtonLabel  }}</button>\n  </div>\n\n  <div class="message messageWarning">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    <span class="messageWarning__label">{{ I18n.t(\'ui.uploadPanel.common.requiredFields\') }}</span>\n  </div>\n\n  <div class="message message--popup messageDone">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-done"></use>\n    </svg>\n    {{ successLabel  }}\n  </div>\n\n  <div class="message message--popup messageError">\n    <svg viewBox="0 0 1 1" class="icon icon--default">\n      <use xlink:href="#svg__streamline-warning-balloon"></use>\n    </svg>\n    {{ I18n.t(\'ui.uploadPanel.common.error\') }}\n  </div>\n</div>\n');
window.JST["course/users/invitations/form"]=_.template('<div class="row">\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="invitation_first_name">{{ I18n.t(\'ui.users.first_name\') }} *</label>\n      <input name="first_name" id="invitation_first_name" type="text" class="form__input form__input--fullWidth" required>\n      <span class="controls"></span>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="invitation_last_name">{{ I18n.t(\'ui.users.surname\') }} *</label>\n      <input name="last_name" id="invitation_last_name" type="text" class="form__input form__input--fullWidth" required>\n      <span class="controls"></span>\n    </div>\n  </div>\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="invitation_email">{{ I18n.t(\'ui.users.email\') }} *</label>\n      <input name="email" id="invitation_email" type="text" class="form__input form__input--fullWidth" required>\n      <span class="controls"></span>\n    </div>\n  </div>\n</div>\n');
window.JST["course/users/invitations/layout_admin"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.users.invitations.admins.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n  data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <p>{[ I18n.t(\'ui.users.invitations.admins.text\') ]}</p>\n\n  <div id="invitation-form" class="mt--4x"></div>\n\n  <div class="control-group">\n    <div class="controls">\n      <p class="help-block"><span class="required">*</span> {{ I18n.t(\'ui.common.required\') }}</p>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <input class="button button--primary" data-action="invite" type="submit" value="{{ I18n.t(\'ui.users.invitations.invite\') }}" />\n</div>\n');
window.JST["course/users/invitations/layout_teacher"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.users.invitations.teachers.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n  data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  <p>{{ I18n.t(\'ui.users.invitations.teachers.text\') }}</p>\n\n  <div id="invitation-form" class="mt--4x"></div>\n</div>\n\n<div class="modal-footer">\n  <button class="button button--primary" data-action="invite">{{ I18n.t(\'ui.users.invitations.invite\') }}</button>\n</div>\n');
window.JST["course/users/layout"]=_.template('<div class="row-fluid">\n\n  <div id="tree" class="sidebar span3 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div id="list" class="main span9">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["course/users/list/alert"]=_.template('<button type="button" class="close" data-dismiss="alert">x</button>\n<p>\n  {[ message() ]}\n  (<a class="refresh" href="#">{{I18n.t(\'ui.courses.users.list.alerts.button\')}}</a>)\n</a>\n');
window.JST["course/users/list/foot"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {{ I18n.t(\'ui.users.nousers\') }}\n  </span>\n</div>\n');window.JST["course/users/list/head"]=_.template('<div class="row-fluid">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n  </span>\n  <span class="header span5 sortable" id="name-sort" data-sortable-attribute="last_name">\n    {{ I18n.t(\'ui.users.last_name\') }}, {{ I18n.t(\'ui.users.first_name\') }}\n  </span>\n  <span class="header span4 sortable" id="username-sort" data-sortable-attribute="username">\n    {{ I18n.t(\'ui.users.username\') }}\n  </span>\n  <span class="header span2 sortable" id="type-sort" data-sortable-attribute="type">\n    {{ I18n.t(\'ui.users.type\') }}\n  </span>\n</div>\n');
window.JST["course/users/list/item"]=_.template('<div class="row-fluid">\n  <span class="icons span1 useritem_{{id}}">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n  </span>\n  <span class="span5 fullname">\n    {{ last_name }}, {{ first_name }}\n  </span>\n  <span class="span4 username">\n    {{ username }}\n  </span>\n  <span class="span2 role">\n    {{ type }}\n  </span>\n</div>\n');window.JST["course/users/list/layout"]=
_.template('<div class="holder">\n  <div class="alerts"></div>\n  <div class="pagination-wrapper upper"></div>\n  <div class="clear">\n    <div id="actions" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n    <a href="#" class="info-icon">\n      <span class="hide-text">{{ I18n.t(\'ui.users.itag\') }}</span>\n    </a>\n  </div>\n\n  <div class="holder">\n\n    <div id="users">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n    <div id="preview">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n\n  </div>\n</div>\n');
window.JST["course/users/move/group"]=_.template('{%\n  var icon = leaf ? \'vertex\' : expanded ? \'expanded\' : \'contracted\'\n%}\n\n<div class="controls item">\n  {% if (leaf) { %}\n    <span class="toggle">\n      <i class="icon-{{ icon }}"></i>\n    </span>\n  {% } else { %}\n    <a href="#" class="toggle">\n      <i class="icon-{{ icon }}"></i>\n    </a>\n  {% } %}\n  <a href="#" class="select" title="{{ name }}">\n    <span>{{ name }}</span>\n  </a>\n</div>');window.JST["course/users/search"]=
_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{ I18n.t(\'ui.search.users.placeholder\') }}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n  <button type="submit" class="btn btn-advanced-search btn-default">{{ I18n.t(\'ui.search.submit\') }}</button>\n</form>\n');
window.JST["course/users/title"]=_.template('<div class="row-fluid users-management-title">\n  <div class="span6">\n    <div id="search">\n    </div>\n  </div>\n\n  <div class="span6">  \n    <div id="buttons">\n    </div>\n  </div>  \n</div>\n');window.JST["course/users/tree/filter"]=_.template('<a href="#">\n  <i class="icon-{{ name }}"></i>\n  {{ I18n.t(\'ui.filters.\' + name) }}\n</a>\n');window.JST["course/users/tree/layout"]=_.template('<div class="container-fluid holder">\n\n  <div id="filters">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <ul class="nav nav-list">\n    <li class="divider"></li>\n  </ul>\n\n  <div id="groups">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');
window.JST["course/users/user_management/actions"]=_.template('<button class="button button--secondary edit" data-action="edit"><i class="icon-pencil"></i>{{ I18n.t(\'ui.courses.users.management.actions.edit\') }}</button><button class="button button--secondary delete" data-action="delete"><i class="icon-trash"></i>{{ I18n.t(\'ui.courses.users.management.actions.delete\') }}</button>');window.JST["course/users/user_management/codegroup/layout"]=_.template('<div class="modal-header">\n  <h3>{{ title() }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>    \n</div>\n<div class="modal-body">\n  <p class="description">{{ I18n.t(\'ui.courses.users.management.codegroup.dialog.description\') }}</p>\n  <div class="form-horizontal">\n    <div class="row-fluid">\n      <div class="span6">\n        <div class="control-group">\n          <label class="control-label" for="name">{{ I18n.t(\'ui.courses.users.management.codegroup.dialog.name\') }}</label>\n          <div class="controls">\n            <input name="name" type="text" value="{{name}}" autofocus>\n          </div>\n        </div>\n      </div>\n      <div class="span6">\n        <div class="control-group">\n          <label class="control-label" for="group_code">{{ I18n.t(\'ui.courses.users.management.codegroup.dialog.code\') }}</label>\n          <div class="controls">\n            <input name="group_code" type="text" value="{{group_code}}" autofocus>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="students" class="list"></div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button class="button button--secondary cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n  <button class="button button--primary save">{{ I18n.t(\'ui.common.save\') }}</button>\n</div>\n');
window.JST["course/users/user_management/codegroup/students/empty"]=_.template('<div class="codegroup-students">\n  <div class="records records-wrapper">\n    <p class="empty">{[ I18n.t(\'ui.courses.users.management.codegroup.dialog.no_students\') ]}</p>\n  </div>\n</div>\n');window.JST["course/users/user_management/codegroup/students/layout"]=_.template('<div class="codegroup-students">\n\t<label class="select_all checkbox">\n\t\t<input name="select_all" type="checkbox" {{checked ? \'checked\' : \'\'}}>{{ I18n.t(\'ui.courses.users.management.codegroup.dialog.select_all\') }}\n\t</label>\n\t<div class="records records-wrapper"></div>\n</div>');
window.JST["course/users/user_management/codegroup/students/student"]=_.template("<label class=\"checkbox {{checked ? 'selected' : ''}}\">\n\t<input type=\"checkbox\" {{checked ? 'checked' : ''}}>{{ last_name }}, {{ first_name }}\n</label>");window.JST["course/users/user_management/global-group"]=_.template("<a href=\"#\">{{ I18n.t('ui.courses.users.management.global_group.button') }}</a>\n");window.JST["course/users/user_management/global_groups/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.create.add_global_to_course.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>    \n</div>\n\n<div class="modal-body">\n  <div class="row-fluid">\n    {[ I18n.t(\'ui.create.add_global_to_course.directions\') ]}\n    <div id="create-node-tree" class="global-groups-tree"></div>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="row-fluid">\n    <div class="span12">\n      <button class="button button--secondary" data-action="cancel">{{ I18n.t(\'ui.common.cancel\') }}</button>\n      <button class="button button--primary" data-action="save">{{ I18n.t(\'ui.common.abbr_submit\') }}</button>\n    </div>\n  </div>\n</div>');
window.JST["course/users/user_management/group-code"]=_.template("<h4><i class=\"group-icon-group-code\"></i>{{ I18n.t('ui.courses.users.management.codegroup.title') }}</h4>\n<p>{{ I18n.t('ui.courses.users.management.codegroup.help') }}</p>\n<p>{{ I18n.t('ui.courses.users.management.codegroup.note') }}</p>\n<button class=\"button button--secondary\" data-action=\"codegroup:create\">{{ I18n.t('ui.courses.users.management.codegroup.button') }}</button>");window.JST["course/users/user_management/layout"]=
_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.courses.users.management.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>  \n</div>\n<div class="modal-body">\n  <div class="row-fluid">\n    <div id="sections" class="main span6">\n      <p class="help-block">\n        {{ I18n.t(\'ui.courses.users.management.help\') }}\n      </p>\n      <div id="subgroup"></div>\n      <div id="group-code"></div>\n      <div id="global-group"></div>\n    </div>\n    <div class="span6">\n      <div id="nodes"></div>\n      <div id="actions"></div>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button class="button button--primary" role="button" data-action="done">{{ I18n.t(\'ui.courses.users.management.done\') }}</button>\n</div>\n');
window.JST["course/users/user_management/subgroup"]=_.template("<h4><i class=\"group-icon-subgroup\"></i>{{ I18n.t('ui.courses.users.management.subgroup.title') }}</h4>\n<p>{{ I18n.t('ui.courses.users.management.subgroup.description') }}</p>\n<p>{{ I18n.t('ui.courses.users.management.subgroup.help') }}</p>\n<button class=\"button button--secondary\" data-action=\"subgroup:create\">{{ I18n.t('ui.courses.users.management.subgroup.button') }}</button>\n");window.JST["course/users/user_management/subgroup/actions"]=
_.template('<a href="#" class="add"><i class="icon-chevron-right"></i></a>\n<a href="#" class="remove"><i class="icon-chevron-left"></i></a>\n');window.JST["course/users/user_management/subgroup/layout"]=_.template('<div class="modal-header">\n  <h3>{{ title() }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-action="close" data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n\t<p>{[ I18n.t(\'ui.courses.users.management.subgroup.dialog.parent_label\', {name: parent_name}) ]}</p>\n  <div class="form-horizontal">\n    <div class="control-group">\n      <label class="control-label" for="name">{{ I18n.t(\'ui.courses.users.management.subgroup.dialog.label\') }}</label>\n      <div class="controls">\n        <input name="name" type="text" value="{{name}}" autofocus>\n      </div>\n    </div>\n  </div>\n  <div class="row-fluid student-lists">\n\t  <div class="span5">\n\t  \t<h4>{{ I18n.t(\'ui.courses.users.management.subgroup.dialog.parent_list\', {name: parent_name}) }}</h4>\n\t  \t<div id="parent-students" class="list"></div>\n\t  </div>\n\t  <div class="span2">\n\t  \t<div id="actions"></div>\n\t  </div>\n  \t<div class="span5">\n  \t\t<h4><i class="group-icon-subgroup"></i>{{ I18n.t(\'ui.courses.users.management.subgroup.dialog.subgroup_list\') }}</h4>\n  \t\t<div id="students" class="list"></div>\n  \t</div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button class="button button--secondary cancel" role="button">{{ I18n.t(\'ui.common.cancel\') }}</button>\n  <button class="button button--primary save" role="button">{{ I18n.t(\'ui.common.save\') }}</button>\n</div>\n');
window.JST["course/users/user_management/subgroup/students/layout"]=_.template('<span class="count">\n\t<label>0</label> {{ I18n.t(\'ui.courses.users.management.subgroup.dialog.records\') }}\n</span>\n<input name="filter" type="text" placeholder="{{ I18n.t(\'ui.courses.users.management.subgroup.dialog.filter\') }}" />\n<div class="records-wrapper">\n\t<label class="select_all checkbox">\n\t\t<input name="select_all" type="checkbox" {{checked ? \'checked\' : \'\'}}>{{ I18n.t(\'ui.courses.users.management.subgroup.dialog.select_all\') }}\n\t</label>\n\t<div class="records"></div>\n</div>');
window.JST["course/users/user_management/subgroup/students/student"]=_.template("<label class=\"checkbox {{checked ? 'selected' : ''}}\">\n\t<input type=\"checkbox\" {{checked ? 'checked' : ''}}>{{ last_name }}, {{ first_name }}\n</label>");window.JST["course/users/user_management/tree"]=_.template('<div class="controls">\n  {% if (leaf) { %}\n    <span class="toggle">\n      <i class="tree-icon-{{ icon() }}"></i>\n    </span>\n  {% } else { %}\n    <a href="#" class="toggle">\n      <i class="tree-icon-{{ icon() }}"></i>\n    </a>\n  {% } %}\n  {% if (checkboxName) { %}\n    <input type="checkbox" name="{{ checkboxName }}" value="{{ id }}" />\n  {% } %}\n  <a href="#" class="select {{ unpurchasedClassIfNotAvailable() }}" title="{{ title() }}">\n    {% if (nodeTypeIcon){ %} \n      <i class="{{ nodeTypeIcon }}"></i> \n    {% } %}\n    <span>{[ name() ]}</span>\n  </a>\n</div>\n<ul class="nav nav-list children"></ul>\n');
window.JST["dictionary/form"]=_.template('<form class="form-search holder">\n  <input type="text" class="search-query" placeholder="{{ I18n.t(\'ui.dictionary.placeholder\') }}" /><button type="submit" class="btn">{{ I18n.t(\'ui.dictionary.submit\') }}</button>\n</form>\n');window.JST["footer/layout"]=_.template('{% _(gon.footer.footer_links).each(function (item) { %}\n  {% if (item.url != null) { %}\n    <a href="{{ item.url}}" target="_blank">      \n      {{ item.value }} <span class="sr-only">({{ I18n.t(\'ui.common.opens_in_new_window\') }})</span>\n    </a>\n  {% } else { %}\n    <a href="#">\n      {{ item.value }}\n    </a>\n  {% } %}\n{% }) %}');
window.JST["front/forgot_details/form"]=_.template('<form class="form-horizontal modal-form">\n\n  <div class="control-group">\n    <label class="control-label" for="email">{{ I18n.t(\'ui.forgot_details.email\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="email" type="input" id="email" />\n    </div>\n  </div>\n\n</form>\n');window.JST["front/forgot_details/layout"]=_.template('  <div class="modal-header">\n    <a class="close" data-dismiss="modal">&nbsp;</a>\n    <h3>{{ I18n.t(\'ui.forgot_details.title\') }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <div id="forgot-details-form"></div>\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.forgot_details.reset_password\') }}" />\n  </div>    \n');
window.JST["global/home/course"]=_.template('<a class="card__link" href="{{ getCourseLink() }}">\n  <div class="card__cover">\n    <img src="{{ library_thumbnail_url || \'/images/product-images-placeholder.svg\' }}" role="img" alt="">\n  </div>\n  <div class="card__info">\n    <span role="text">\n      <h3 id="{{ getUniqueIdentifier() }}">{{ name }}</h3>\n      <p>{{ subject }}</p>\n    </span>\n  </div>\n</a>\n<button class="favouriteToggle button button--icon button__status button__status--add"\n  aria-labelledby="add {{ getUniqueIdentifier() }} to_favs">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-add"></use>\n  </svg>\n</button>\n<button class="favouriteToggle button button--icon button__status button__status--remove"\n  aria-labelledby="remove {{ getUniqueIdentifier() }} from_favs">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-remove"></use>\n  </svg>\n</button>\n');
window.JST["global/home/favourites-empty"]=_.template('<div class="helpCard__icon">\n  <svg viewBox="0 0 1 1">\n    <use xlink:href="#svg__streamline-information-balloon"></use>\n  </svg>\n</div>\n<div class="helpCard__content">\n  <span class="helpCard__state helpCard__status--off">\n    {[ I18n.t(\'ui.homepage.favourites_empty_off\') ]}\n  </span>\n  <span class="helpCard__state helpCard__status--on">\n    {[ I18n.t(\'ui.homepage.favourites_empty_on\') ]}\n  </span>\n</div>\n');window.JST["global/home/layout"]=
_.template('<div class="home-lens library {{ isManagingActive() ? \'library--managing\' : \'\' }}">\n  <section class="library__status"></section>\n\n  <section class="library__favourites" aria-labelledby="favourites">\n    <div class="grid grid--maxWidth">\n      <div class="section__header favouritesHeader">\n        <div class="section__header">\n          <h2 class="section__title" id="favourites">{{ I18n.t(\'ui.homepage.favourites\') }}</h2>\n          <span class="manageLibrarySeparator"></span>\n          <label class="manageLibraryToggle">\n            {{ I18n.t(\'ui.homepage.manage\') }}\n            <input type="checkbox" value="true" {{ isManagingActive() ? \'checked\' : \'\' }}>\n            <span class="manageLibraryToggle__icon"></span>\n          </label>\n        </div>\n        {% if (showActivateProductButton()) { %}\n          <button class="button--secondary add-book-btn" data-action="activateProduct">{{ I18n.t(\'ui.homepage.activate_product.button_label\')\n            }}</button>\n        {% } %}\n      </div>\n      <div class="section__body"></div>\n    </div>\n  </section>\n\n  <section class="library__courses" aria-labelledby="courses">\n    <div class="grid grid--maxWidth">\n      <div class="section__header">\n        <h2 class="section__title" id="courses">{{ I18n.t(\'ui.homepage.courses_and_books\') }}</h2>\n        <button type="button" class="filtersToggle button button--icon hidden--l" aria-label="{{ I18n.t(\'ui.homepage.filters.open\') }}">\n          <svg viewBox="0 0 1 1">\n            <use xlink:href="#svg__streamline-filter"></use>\n          </svg>\n        </button>\n        <div class="filters"></div>\n      </div>\n      <div class="section__body"></div>\n    </div>\n  </section>\n</div>\n<div class="activateProductPanel__container"></div>\n<span id="add" class="a11y-hide" aria-hidden="true">Add</span>\n<span id="to_favs" class="a11y-hide" aria-hidden="true"> to My Library</span>\n<span id="remove" class="a11y-hide" aria-hidden="true">Remove</span>\n<span id="from_favs" class="a11y-hide" aria-hidden="true"> from My Library</span>');
window.JST["global/home/sidebar/group_code_button"]=_.template("<button class=\"btn btn-primary\">{{ I18n.t('ui.homepage.sidebar.group_code_button') }}</button>\n");window.JST["global/home/sidebar/group_code_dialog"]=_.template('  <div class="modal-header">\n    <a class="close" data-dismiss="modal">&nbsp;</a>\n    <h3>{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.title\') }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <div id="group-code-form"></div>\n  </div>\n\n  <div class="modal-footer">\n    <a class=\'cancel btn\'>{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.submit\') }}" />\n  </div>    \n');
window.JST["global/home/sidebar/group_code_form"]=_.template('<form> \n  <fieldset class="control-group">\n    <label for="group-code" class="control-label">{{ I18n.t(\'ui.homepage.sidebar.group_code_dialog.description\') }}</label>\n    <div class="controls">\n      <input id="group-code" name="code" class="input-xlarge" type="text">\n    </div>\n  </fieldset>\n</form>\n');window.JST["global/home/sidebar/layout"]=_.template('<div class="container-fluid holder user-side height-fix" style="background: transparent url(/images/OUPLogo.png) no-repeat right bottom;">\n  <div id="group-code-button"></div>\n</div>\n');
window.JST["global/home/status"]=_.template('<h2 class="a11y-hide">Roles</h2>\n<div class="row">\n  <div class="col col--12 col--l6 statusCol {{administrator.statusClass}}">\n    <div class="statusCol__icon">\n      <svg viewBox="0 0 1 1" class="icon--default">\n        <use xlink:href="#svg__streamline-information"></use>\n      </svg>\n    </div>\n    <div class="statusCol__content">\n      <h3 class="statusCol__title">{{ I18n.t(\'ui.homepage.status.administrator\') }}</h3>\n      <p>{[administrator.message]}</p>\n    </div>\n  </div>\n\n  <div class="col col--12 col--l6 statusCol {{students.statusClass}}">\n    <div class="statusCol__icon">\n      <svg viewBox="0 0 1 1" class="icon--default">\n        <use xlink:href="#svg__streamline-done"></use>\n      </svg>\n    </div>\n    <div class="statusCol__content">\n      <h3 class="statusCol__title">{{ I18n.t(\'ui.homepage.status.students\') }}</h3>\n      <p>{[students.message]}</p>\n    </div>\n  </div>\n</div>\n');
window.JST["global/lens/banner"]=_.template('<img src="{{ logo }}" id="school_logo" alt="">\n');window.JST["global/lens/layout"]=_.template('{% if (can(\'show\', \'home/lenses\')) { %}\n  <div id="lenses" class="lenses">\n    \x3c!--div class="loader"></div--\x3e\n  </div>\n{% } %}\n\n<section id="title" class="pageHeader">\n  \x3c!-- <div class="loader"></div> --\x3e\n</section>\n\n<main id="content" class="pageMain">\n  \x3c!-- <div class="loader"></div> --\x3e\n</main>\n');window.JST["global/lens/lens"]=
_.template('<a href="#">\n\t<span class="{{ type }}">\n  \t{{ name }}\n\t</span>\n</a>\n');window.JST["global/lens/title"]=_.template('<div class="row-fluid">\n  <div class="span3">\n    <div id="lens-name">\n      <h1 class="lense_name">{{ name }}</h1>\n    </div>\n  \n    <div id="buttons">\n    </div>\n  </div>\n  \n  <div class="span6">\n    <div id="search">\n    </div>\n  </div>\n  \n  <div class="span3">\n    <div id="book">\n    </div>\n  </div>\n</div>');window.JST["global/markbook/layout"]=
_.template('<div class="row-fluid">\n\n  <div id="main" class="main height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["global/markbook/main"]=_.template('<p class="container-fluid holder">\n  I\'m the markbook module.\n</p>\n');window.JST["global/my_profile/change_password/dialog"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.my_profile.change_password.title\') }}</h3>\n</div>\n\n<div class="modal-body">\n  <div class="helpCard">\n    <div class="helpCard__icon">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-warning-balloon"></use>\n      </svg>\n    </div>\n    <div class="helpCard__content">\n      <p>{{ I18n.t(\'ui.my_profile.change_password.description\') }}</p>\n    </div>\n  </div>\n\n  <form class="mt--4x"></form>\n\n  <p>{[ I18n.t(\'ui.my_profile.change_password.help\') ]}</p>\n</div>\n\n<div class="modal-footer">\n  <input class="button button--primary" type="submit" value="{{ I18n.t(\'ui.my_profile.change_password.save\') }}" />\n  <a href="#" class="button button--secondary" data-action="remind">{[ I18n.t(\'ui.my_profile.change_password.remind\') ]}</a>\n</div>\n');
window.JST["global/my_profile/change_password/form"]=_.template('<div class="row">\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="current_password">{{ I18n.t(\'ui.my_profile.change_password.current_password\') }}</label>\n      <input name="current_password" id="current_password" type="password" class="form__input form__input--fullWidth" required>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="password">{{ I18n.t(\'ui.my_profile.change_password.new_password\') }}</label>\n      <input name="password" id="password" type="password" class="form__input form__input--fullWidth" required>\n    </div>\n  </div>\n  <div class="col col--12 col--l6">\n    <div class="form__group">\n      <label class="form__headingLabel" for="password_confirmation">{{ I18n.t(\'ui.my_profile.change_password.new_password_confirmation\') }}</label>\n      <input name="password_confirmation" id="password_confirmation" type="password" class="form__input form__input--fullWidth" required>\n    </div>\n  </div>\n</div>\n');
window.JST["global/my_profile/contact_preferences"]=_.template('<h2>{{ I18n.t(\'ui.my_profile.account.contact_preferences\') }}</h2>\n\n<div class="row">\n  <div class="col col--12 col--l9">\n    <label class="checkbox">\n      <input type="checkbox" name="accept_tips">\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n        <use xlink:href="#svg__checkbox-unchecked"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n        <use xlink:href="#svg__checkbox-checked"></use>\n      </svg>\n      <span class="checkbox__label">{{ I18n.t(\'ui.my_profile.account.accept_tips\') }}</span>\n    </label>\n\n    <label class="checkbox  accept-marketing">\n      <input type="checkbox" name="accept_marketing">\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n        <use xlink:href="#svg__checkbox-unchecked"></use>\n      </svg>\n      <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n        <use xlink:href="#svg__checkbox-checked"></use>\n      </svg>\n      <span class="checkbox__label">{{ I18n.t(\'ui.my_profile.account.accept_marketing\') }}</span>\n    </label>\n\n    <p>{[ I18n.t(\'ui.my_profile.account.pre_accept_marketing\') ]}</p>\n  </div>\n</div>\n');
window.JST["global/my_profile/courses"]=_.template('<ul class="myprofile__coursesList">\n  {% _(courses).each(function(course) { %}\n    <li>{{course}}</li>\n  {% }) %}\n</ul>\n');window.JST["global/my_profile/form"]=_.template('<div class="my-profile {{ isTeacher() ? "teacher" : \'\' }}">\n  <h2>About you</h2>\n  <div class="about-you">\n    <div class="form__group">\n      <label class="form__headingLabel" for="first_name">{{ I18n.t(\'ui.my_profile.account.first_name\') }}</label>\n      <input class="form__input {{ isManagedStudent() ? \'form__input--readonly\' : \'\' }}" name="first_name" type="text"\n        maxlength="{{gon.limits.user.first_name}}" {{ isManagedStudent() ? \'disabled\' : \'\' }} />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n\n    <div class="form__group">\n      <label class="form__headingLabel" for="last_name">{{ I18n.t(\'ui.my_profile.account.last_name\') }}</label>\n      <input class="form__input {{ isManagedStudent() ? \'form__input--readonly\' : \'\' }}" name="last_name" type="text"\n        maxlength="{{gon.limits.user.last_name}}" {{ isManagedStudent() ? \'disabled\' : \'\' }} />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n\n    {% if (isTeacher()) { %}\n    <div class="form__group">\n      <label class="form__headingLabel" for="display_name">{{ I18n.t(\'ui.my_profile.account.display_name\') }}</label>\n      <input class="form__input" name="display_name" type="text" maxlength="{{gon.limits.user.display_name}}" />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n\n    <div class="form__group">\n      <label class="form__headingLabel" for="email">{{ I18n.t(\'ui.my_profile.account.email\') }}</label>\n      <input class="form__input" name="email" type="text" maxlength="{{gon.limits.user.email}}" />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n\n    <div class="form__group">\n      <label class="form__headingLabel" for="username">{{ I18n.t(\'ui.my_profile.account.username\') }}</label>\n      <input class="form__input" name="username" type="text" maxlength="{{gon.limits.user.username}}" />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n    {% if (!showEmailTipInfobox()) { %}\n      <div class="helpCard emailTip">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-information-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n          <p>We recommend using your school email - it keeps school and life separate.</p>\n        </div>\n      </div>\n    {% } %}\n\n    {% if (isSelfStudyTeacher()) { %}\n      <div class="form__group">\n        <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.code\') }}</h4>\n        <p>{{ code }}</p>\n      </div>\n    {% } %}\n\n    {% } %}\n\n    {% if (isStudent()) { %}\n    <div class="form__group">\n      <label class="form__headingLabel" for="username">{{ I18n.t(\'ui.my_profile.account.username\') }}</label>\n      <input class="form__input {{ isManagedStudent() ? \'form__input--readonly\' : \'\' }}" name="username" type="text"\n        maxlength="{{gon.limits.user.username}}" {{ isManagedStudent() ? \'disabled\' : \'\' }} />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n\n    {% if (isManagedStudent()) { %}\n      <div class="form__group">\n        <label class="form__headingLabel" for="studentId">{{ I18n.t(\'ui.my_profile.account.student_id\') }}</label>\n        <input class="form__input form__input--readonly" name="userid" type="text"\n          maxlength="{{gon.limits.user.userid}}" disabled />\n        <div class="helpCard helpCard--light helpCard--error hidden">\n          <div class="helpCard__icon">\n            <svg viewBox="0 0 1 1" aria-hidden="true">\n              <use xlink:href="#svg__streamline-warning-balloon"></use>\n            </svg>\n          </div>\n          <div class="helpCard__content">\n          </div>\n        </div>\n      </div>\n    {% } %}\n\n    <div class="form__group">\n      <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.code\') }}</h4>\n      <input class="form__input form__input--readonly" type="text" value="{{ code }}" disabled />\n    </div>\n\n    <div class="form__group wrap">\n      <label class="form__headingLabel" for="email">\n        {{ I18n.t(\'ui.my_profile.account.email\') }}\n        {{ isManagedStudent() ? I18n.t(\'ui.my_profile.instructions.optional\') : \'\' }}\n      </label>\n      <input class="form__input" name="email" type="text" maxlength="{{gon.limits.user.email}}" />\n      <div class="helpCard helpCard--light helpCard--error hidden">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-warning-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n        </div>\n      </div>\n    </div>\n    {% if (!showEmailTipInfobox()) { %}\n      <div class="helpCard emailTip">\n        <div class="helpCard__icon">\n          <svg viewBox="0 0 1 1" aria-hidden="true">\n            <use xlink:href="#svg__streamline-information-balloon"></use>\n          </svg>\n        </div>\n        <div class="helpCard__content">\n          <p>We recommend using your school email - it keeps school and life separate.</p>\n        </div>\n      </div>\n    {% } %}\n    {% } %}\n  </div>\n  <span class="divider"></span>\n\n  <fieldset>\n    <legend><h2 class="resetPasswordHeading" tabindex="-1">Reset your password</h2></legend>\n    <div class="mp-reset-password">\n      {% if (!isConfirmationScreen()) { %}\n      <div class="form__group">\n        <label class="form__headingLabel" for="current_password">{{ I18n.t(\'ui.my_profile.account.current_password\') }}</label>\n        <input class="form__input" id="current_password" name="current_password" type="password" autocomplete="current-password"\n          aria-describedby="invalid_password" />\n        <div class="helpCard helpCard--light helpCard--error hidden">\n          <div class="helpCard__icon">\n            <svg viewBox="0 0 1 1" aria-hidden="true">\n              <use xlink:href="#svg__streamline-warning-balloon"></use>\n            </svg>\n          </div>\n          <div class="helpCard__content" id="invalid_password">\n          </div>\n        </div>\n      </div>\n      {% } %}\n\n      <div class="form__group">\n        <label class="form__headingLabel" for="new_password">{{ I18n.t(\'ui.my_profile.account.password\') }}</label>\n        <input class="form__input {{ isConfirmationScreen() ? \'form__input--highlighted\' : \'\' }}" id="new_password"\n          name="password" type="password" autocomplete="new-password" aria-describedby="invalid_format password_format" />\n        <div class="helpCard helpCard--light helpCard--error hidden">\n          <div class="helpCard__icon">\n            <svg viewBox="0 0 1 1" aria-hidden="true">\n              <use xlink:href="#svg__streamline-warning-balloon"></use>\n            </svg>\n          </div>\n          <div class="helpCard__content" id="invalid_format">\n          </div>\n        </div>\n      </div>\n\n      <div class="form__group">\n        <label class="form__headingLabel" for="password_confirmation">{{ I18n.t(\'ui.my_profile.account.password_confirmation\')\n          }}</label>\n        <input class="form__input {{ isConfirmationScreen() ? \'form__input--highlighted\' : \'\' }}" id="password_confirmation"\n          name="password_confirmation" type="password" aria-describedby="password_mismatch" />\n        <div class="helpCard helpCard--light helpCard--error hidden">\n          <div class="helpCard__icon">\n            <svg viewBox="0 0 1 1" aria-hidden="true">\n              <use xlink:href="#svg__streamline-warning-balloon"></use>\n            </svg>\n          </div>\n          <div class="helpCard__content" id="password_mismatch">\n          </div>\n        </div>\n      </div>\n    </fieldset>\n\n    <div class="helpCard">\n      <div class="helpCard__icon">\n        <svg viewBox="0 0 1 1" aria-hidden="true">\n          <use xlink:href="#svg__streamline-information-balloon"></use>\n        </svg>\n      </div>\n      <div class="helpCard__content">\n        <p id="password_format">{{ getPasswordInstructions() }}</p>\n      </div>\n    </div>\n  </div>\n  <span class="divider"></span>\n</div>');
window.JST["global/my_profile/marketing/dialog"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.my_profile.marketing.title\') }}</h3>\n</div>\n\n<div class="modal-body">\n  <div class="description">{{ I18n.t(\'ui.my_profile.marketing.description\') }}</div>\n  <label class="checkbox">\n    <input type="checkbox" name="accept_tips">\n    <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n      <use xlink:href="#svg__checkbox-unchecked"></use>\n    </svg>\n    <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n      <use xlink:href="#svg__checkbox-checked"></use>\n    </svg>\n    <span class="checkbox__label">{{ I18n.t(\'ui.my_profile.account.accept_tips\') }}</span>\n  </label>\n\n  <label class="checkbox">\n    <input type="checkbox" name="accept_marketing">\n    <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n      <use xlink:href="#svg__checkbox-unchecked"></use>\n    </svg>\n    <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n      <use xlink:href="#svg__checkbox-checked"></use>\n    </svg>\n    <span class="checkbox__label">{{ I18n.t(\'ui.my_profile.account.accept_marketing\') }}</span>\n  </label>\n  <div class="help">{[ I18n.t(\'ui.my_profile.marketing.help\') ]}</div>\n</div>\n\n<div class="modal-footer">\n  <input class="button button--primary" type="submit" value="{{ I18n.t(\'ui.my_profile.marketing.save\') }}" />\n</div>\n');
window.JST["global/my_profile/school"]=_.template('<h2>About</h2>\n<div class="my-profile-school">\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.name\') }}</h4>\n    <p>{{ name }}</p>\n  </div>\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.account\') }}</h4>\n    <p>{{ account }}</p>\n  </div>\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.code\') }}</h4>\n    <p>{{ code }}</p>\n  </div>\n\n  {% if (gon.hasAdmin) { %}\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.admin_name\') }}</h4>\n    <p>{{ admin.name }}</p>\n  </div>\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.admin_email\') }}</h4>\n    <p>{{ admin.email }}</p>\n  </div>\n  {% } else { %}\n  <div class="form__group">\n    <h4 class="section__subtitle">{{ I18n.t(\'ui.my_profile.school.admin\') }}</h4>\n    <p>{{ I18n.t(\'ui.my_profile.school.no_admin\') }}\n      {% if (showInviteAction()) { %}\n        <a href="javascript:void(0);" role="invite">{{ I18n.t(\'ui.my_profile.school.invite_admin\') }}</a>.\n      {% } %}\n    </p>\n  </div>\n  {% } %}\n</div>\n<span class="divider"></span>');
window.JST["global/my_profile/student_layout"]=_.template('<section class="myprofile">\n  <div class="section__wrapper">\n    <div class="section__body">\n      <div class="grid grid--maxWidth">\n        {% if (isConfirmationScreen()) { %}\n            <div class="row">\n              <div class="col col--12 col--l9">\n                <div class="infoCard infoCard--noMaxWidth">\n                  <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n                    <use xlink:href="#svg__streamline-information-balloon"></use>\n                  </svg>\n                  <h1>{{ I18n.t(\'ui.my_profile.instructions.setUp\') }}</h1>\n                  <p>{{ I18n.t(\'ui.my_profile.instructions.resetPassword\') }}</p>\n                </div>\n              </div>\n            </div>\n        {% } %}\n        <article class="myprofile__account"></article>\n        <article class="myprofile__password"></article>\n\n        {% if (!isConfirmationScreen()) { %}\n          <article class="myprofile__courses">\n            <h2>{{ getCoursesListTitle() }}</h2>\n            <div class="coursesList"></div>\n          </article>\n        {% } %}\n      </div>\n    </div>\n\n    <div class="section__footer hidden">\n      <div class="section__footerActions">\n        {% if (!isConfirmationScreen()) { %}\n          <button type="button" class="button button--secondary">{{ I18n.t(\'ui.my_profile.cancel\') }}</button>\n        {% } %}\n        <button type="submit" class="button button--primary">{{ I18n.t(\'ui.my_profile.save\') }}</button>\n      </div>\n      <div class="message message--popup messageDone" role="alert">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-done"></use>\n        </svg>\n        {{ I18n.t(\'ui.my_profile.success\') }}\n      </div>\n      <div class="message messageError" role="alert">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-warning-balloon"></use>\n        </svg>\n        <span>{{ I18n.t(\'ui.my_profile.error\') }}</span>\n      </div>\n    </div>\n  </div>\n</section>');
window.JST["global/my_profile/subjects/item"]=_.template('<label class="checkbox">\n  <input type="checkbox" {{ checked ? \'checked\' : \'\' }}>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--unselected">\n    <use xlink:href="#svg__checkbox-unchecked"></use>\n  </svg>\n  <svg viewBox="0 0 1 1" class="checkbox__icon checkbox__icon--selected">\n    <use xlink:href="#svg__checkbox-checked"></use>\n  </svg>\n  <span class="checkbox__label">\x3c!--<span class="icon {{ name }}"></span>--\x3e {{ label }}</span>\n</label>');
window.JST["global/my_profile/teacher_layout"]=_.template('<section class="myprofile">\n  <div class="section__wrapper">\n    {% if (!isSelfStudyTeacher()) { %}\n      <div class="section__header section__header--withPageHeader">\n        <div class="pageHeader__tabs">\n          <ul class="navigationTabs navigationTabs--primary">\n            <li class="navigationTabs__item navigationTabs__item--active">\n              <button type="button" class="navigationTabs__button" data-panel="#myprofileAccount">\n                <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1" aria-hidden="true">\n                  <use xlink:href="#svg__streamline-user"></use>\n                </svg>\n                <span role="heading" aria-level="3">{{ I18n.t(\'ui.my_profile.account.title\') }}</span>\n              </button>\n            </li>\n            <li class="navigationTabs__item">\n              <button type="button" class="navigationTabs__button" data-panel="#myprofileSchool">\n                <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1" aria-hidden="true">\n                  <use xlink:href="#svg__streamline-school"></use>\n                </svg>\n                <span role="heading" aria-level="3">{{ I18n.t(\'ui.my_profile.school.title\') }}</span>\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    {% } %}\n\n    <div class="section__body">\n      <div class="grid grid--maxWidth">\n        \x3c!-- My Account --\x3e\n        <div id="myprofileAccount" class="tabPanel tabPanel--active">\n\n          {% if (isConfirmationScreen()) { %}\n            <div class="row">\n              <div class="col col--12 col--l9">\n                <div class="infoCard infoCard--noMaxWidth">\n                  <svg viewBox="0 0 1 1" class="icon icon--default">\n                    <use xlink:href="#svg__streamline-information-balloon"></use>\n                  </svg>\n                  <h1>{{ I18n.t(\'ui.my_profile.instructions.setUp\') }}</h1>\n                  <p>{{ I18n.t(\'ui.my_profile.instructions.completeProfile\') }}</p>\n                </div>\n              </div>\n            </div>\n        {% } %}\n\n\n          <article class="myprofile__account"></article>\n\n          <article class="myprofile__subjects form__group">\n            <h2>{{ I18n.t(\'ui.my_profile.subjects.title\') }}</h2>\n            <p>{{ I18n.t(\'ui.my_profile.subjects.help\') }}</p>\n            <div class="subjectsList mt--4x" name="subjects"></div>\n            <div class="helpCard helpCard--light helpCard--error hidden">\n              <div class="helpCard__icon">\n                <svg viewBox="0 0 1 1">\n                  <use xlink:href="#svg__streamline-warning-balloon"></use>\n                </svg>\n              </div>\n              <div class="helpCard__content">\n              </div>\n            </div>\n          </article>\n          <span class="divider"></span>\n\n          <article class="myprofile__contact"></article>\n\n          {% if (isSelfStudyTeacher()) { %}\n            <article class="myprofile__courses">\n              <h2>{{ I18n.t(\'ui.my_profile.courses.title_self_study_user\') }}</h4>\n              <div class="coursesList"></div>\n            </article>\n          {% } %}\n\n        </div>\n\n        \x3c!-- My School --\x3e\n        <div id="myprofileSchool" class="tabPanel">\n          <article class="myprofile__school"></article>\n          {% if (!isSelfStudyTeacher()) { %}\n            <article class="myprofile__courses">\n              <h2>{{ I18n.t(\'ui.my_profile.courses.title_teacher\') }}</h4>\n              <div class="coursesList"></div>\n            </article>\n          {% } %}\n        </div>\n      </div>\n    </div>\n\n    <div class="section__footer hidden">\n      <div class="section__footerActions">\n        {% if (!isConfirmationScreen()) { %}\n          <button type="button" class="button button--secondary">{{ I18n.t(\'ui.my_profile.cancel\') }}</button>\n        {% } %}\n        <button type="submit" class="button button--primary">{{ I18n.t(\'ui.my_profile.save\') }}</button>\n      </div>\n      <div class="message message--popup messageDone" role="alert">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-done"></use>\n        </svg>\n        {{ I18n.t(\'ui.my_profile.success\') }}\n      </div>\n      <div class="message messageError" role="alert">\n        <svg viewBox="0 0 1 1" class="icon icon--default" aria-hidden="true">\n          <use xlink:href="#svg__streamline-warning-balloon"></use>\n        </svg>\n        <span>{{ I18n.t(\'ui.my_profile.error\') }}</span>\n      </div>\n    </div>\n  </div>\n</section>');
window.JST["global/my_profile/title"]=_.template("<h2 class=\"pageHeader__title grid\">{{ I18n.t('ui.my_profile.title') }}</h2>\n");window.JST["global/my_profile/update/dialog"]=_.template('<div class="modal-header">\n  <h3>{{ title() }}</h3>\n</div>\n\n<div class="modal-body">\n  <div class="description">{[ instructions() ]}</div>\n  <div id="subjects-form"></div>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <div class="span6">\n      <div class="help">{[ help() ]}</div>\n    </div>\n    <div class="span6">\n      <input class="button button--primary" type="submit" value="{{ I18n.t(\'ui.my_profile.update_dialog.save\') }}" />\n      <a href="#" class="button button--secondary" data-action="remind">{{ I18n.t(\'ui.my_profile.update_dialog.remind\') }}</a>\n    </div>\n  </div>\n</div>\n');
window.JST["global/notifications/title"]=_.template("<h2 class=\"pageHeader__title grid\">{{ I18n.t('ui.notifications.title') }}</h2>\n");window.JST["global/prototypes/layout"]=_.template('<div class="prototypes grid mt--4x">\n  <div class="title mb--2x"><strong>Level Up</strong></div>\n  <ul>\n    <li class="list__item"><a class="link" href="#" data-action="levelUpSecure">Level Up (Secure)</a></li>\n    <li class="list__item"><a class="link" href="#" data-action="levelUpExtend">Level Up (Extend)</a></li>\n    <li class="list__item"><a class="link" href="#" data-action="levelUpReflect">Level Up (Reflect)</a></li>\n  </ul>\n</div>');
window.JST["global/prototypes/title"]=_.template('<h2 class="pageHeader__title pageHeader__title--withBorder grid">Component prototypes</h2>\n');window.JST["global/settings/dialog/time_zone/form"]=_.template('<form class="form-horizontal modal-form">\n  <div class="control-group">\n    <label class="control-label" for="time_zone">{{ I18n.t(\'ui.settings.time_zone.dialog.label\') }}</label>\n    <div class="controls">\n      <select name="time_zone_name">\n        {[ timeZones() ]}\n      </select>\n    </div>\n  </div>\n</form>');
window.JST["global/settings/dialog/time_zone/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.settings.time_zone.dialog.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body" id="time_zone-form"></div>\n\n<div class="modal-footer">\n  <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.save\') }}" />\n</div>\n');
window.JST["global/settings/dialog/upload/form"]=_.template('<form class="form-horizontal modal-form" enctype="multipart/true">\n  \n  <div class="control-group" id="upload-file">\n    <label class="control-label" for="file_name">{{ I18n.t(\'ui.settings.upload_logo.dialog.file_label\') }}</label>\n    <div class="controls" id="upload-controls">\n      <input name="logo" type="file" id="client_logo" />     \n    </div>\n  </div>\n\n  <div class="control-group last">\n    <div class="controls">\n      <p class="help-block">\n          {[ I18n.t(\'ui.settings.upload_logo.dialog.help\') ]}\n      </p>\n    </div>\n  </div>\n\n</form>');
window.JST["global/settings/dialog/upload/layout"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.settings.upload_logo.dialog.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div id="upload-fields">\n  <div class="modal-body" id="upload-form"></div>\n</div>\n\n<div class="modal-footer">\n  <div class="progress progress-success progress-striped hide">\n    <div class="bar"></div>\n  </div>\n  <input class="btn btn-primary" id="upload-file-btn" type="submit" value="{{ I18n.t(\'ui.common.upload\') }}" />\n</div>\n');
window.JST["global/settings/layout"]=_.template('<div class="row-fluid">\n  <div class="span1" />\n  <div class="main span10 offset1">\n\n\t\t<div class="items holder">\n\n\t\t\t\x3c!-- Settings list header --\x3e\n\t\t\t<div class="head">\n\t\t\t\t<div class="row-fluid header-fix">\n\t\t\t\t  <span class="header span4">\n\t\t\t\t    {{ I18n.t(\'ui.settings.setting\') }}\n\t\t\t\t  </span>\n\t\t\t\t  <span class="header span6">\n\t\t\t\t    {{ I18n.t(\'ui.settings.description\') }}\n\t\t\t\t  </span>  \n\t\t\t\t  <span class="header span2">\n\t\t\t\t    {{ I18n.t(\'ui.settings.action\') }}\n\t\t\t\t  </span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- Settings list body --\x3e\n\t\t\t<div class="body">\n\n\t\t\t\t\x3c!-- Download assets zip action --\x3e\n\t\t\t\t<div class="item row-fluid">\n\t\t\t\t  <div class="name span4">\n\t\t\t\t    {{ I18n.t(\'ui.settings.download_assets.title\') }}\n\t\t\t\t  </div>\n\t\t\t\t  <div class="description span6">\n\t\t\t\t    {{ I18n.t(\'ui.settings.download_assets.description\') }}\n\t\t\t\t  </div>  \n\t\t\t\t  <div class="span2 center-align">\n\t\t\t\t    <a href="/api/clients/get_contents" class="download btn btn-success span10">{{ I18n.t(\'ui.settings.download_assets.action\') }}</a>\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- Upload school logo action --\x3e\n\t\t\t\t<div class="item row-fluid">\n\t\t\t\t  <div class="name span4">\n\t\t\t\t    {{ I18n.t(\'ui.settings.upload_logo.title\') }}\n\t\t\t\t  </div>\n\t\t\t\t  <div class="description span6">\n\t\t\t\t    {{ I18n.t(\'ui.settings.upload_logo.description\') }}\n\t\t\t\t  </div>  \n\t\t\t\t  <div class="span2 center-align">\n\t\t\t\t    <a href="#" class="upload btn btn-success {{ hasLogo() ? \'span5\' : \'span10\' }}">{{ I18n.t(\'ui.settings.upload_logo.action\') }}</a>\n\t\t\t\t    {% if (hasLogo()) { %}\n\t\t\t\t    \t<a href="#" class="remove btn btn-success span5">{{ I18n.t(\'ui.settings.remove_logo.action\') }}</a>\n\t\t\t\t    {% } %}\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- Change school time zone action --\x3e\n\t\t\t\t<div class="item row-fluid">\n\t\t\t\t  <div class="name span4">\n\t\t\t\t    {{ I18n.t(\'ui.settings.time_zone.title\') }}\n\t\t\t\t  </div>\n\t\t\t\t  <div class="description span6">\n\t\t\t\t    {{ timeZone() }}\n\t\t\t\t  </div>  \n\t\t\t\t  <div class="span2 center-align">\n\t\t\t\t    <a href="#" class="time_zone btn btn-success span10">{{ I18n.t(\'ui.settings.time_zone.action\') }}</a>\n\t\t\t\t  </div>\n\t\t\t\t</div>\t\t\n\n\t\t\t</div>\n\n\t\t</div>\n  </div>\n</div>\n');
window.JST["global/settings/title"]=_.template('<div class="row-fluid">\n  <div class="span3">\n    <div id="lens-name">\n      <h1 class="lense_name">{{ name }}</h1>      \n    </div>\n  </div>\n</div>\n');window.JST["global/users/csv"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.users.csv.import.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  {[ message() ]}\n  <form class="form-horizontal modal-form standard-controls" enctype="multipart/true" id="resources-upload-form">\n    <div class="control-group" id="upload-file">\n    <label class="control-label" for="file_name">{{ I18n.t(\'ui.users.csv.import.label\') }}</label>\n    <div class="controls" id="upload-controls">\n      <input name="users[file]" type="file" id="users_file" />\n    </div>\n  </div>\n  </form>\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\' data-dismiss="modal">{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input type=\'submit\' class="btn btn-primary disabled" value="{{ I18n.t(\'ui.users.csv.import.import_button\') }}" />\n  </div>\n</div>\n');
window.JST["global/users/csv_template"]=_.template('<div class="modal-header">\n  <h3>{{ I18n.t(\'ui.users.csv.template.title\') }}</h3>\n  <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n          data-dismiss="modal">\n    <svg viewBox="0 0 1 1">\n      <use xlink:href="#svg__streamline-close"></use>\n    </svg>\n  </button>\n</div>\n\n<div class="modal-body">\n  {[ message() ]}\n</div>\n\n<div class="modal-footer">\n  <div class="row-fluid">\n    <a class=\'cancel btn\' data-dismiss="modal">{{ I18n.t(\'ui.common.cancel\') }}</a>\n    <input type=\'submit\' class="btn btn-primary" value="{{ I18n.t(\'ui.users.csv.template.download_button\') }}" />\n  </div>\n</div>\n');
window.JST["global/users/layout"]=_.template('<div class="row-fluid">\n\n  <div id="tree" class="sidebar span3 height-fix">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <div id="list" class="main span9">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["global/users/list/foot"]=_.template('<div class="row-fluid">\n  <span class="span12">\n    {{ I18n.t(\'ui.users.nousers\') }}\n  </span>\n</div>\n');window.JST["global/users/list/head"]=_.template('<div class="row-fluid">\n  <span class="icons span1">\n    <span class="checkall">\n      {% if(allSelected) { %}<input type="checkbox" checked="checked" />{%} else {%}<input type="checkbox" />{% } %}\n    </span>\n  </span>\n  <span class="header span4 sortable" id="name-sort" data-sortable-attribute="last_name">\n    {{ I18n.t(\'ui.users.last_name\') }}, {{ I18n.t(\'ui.users.first_name\') }}\n  </span>\n  <span class="header span3 sortable" id="username-sort" data-sortable-attribute="username">\n    {{ I18n.t(\'ui.users.username\') }}\n  </span>\n  <span class="header span2 sortable" id="userid-sort" data-sortable-attribute="userid">\n    {{ I18n.t(\'ui.users.userid\') }}\n  </span>  \n  <span class="header span2 sortable" id="type-sort" data-sortable-attribute="type">\n    {{ I18n.t(\'ui.users.type\') }}\n  </span>\n</div>');
window.JST["global/users/list/item"]=_.template('<div class="row-fluid">\n  <span class="icons span1 useritem_{{id}}">\n    <span class="check">\n      <input type="checkbox" {{ checked ? \'checked="checked"\' : \'\' }} />\n    </span>\n  </span>\n  <span class="span4 fullname">\n    {{ last_name }}, {{ first_name }}\n  </span>\n  <span class="span3 username">\n    {{ username }}\n  </span>\n  <span class="span2 userid">\n    {[ userid || \'&nbsp;\' ]}\n  </span>  \n  <span class="span2 role">\n    {{ type }}\n  </span>\n</div>\n');
window.JST["global/users/list/layout"]=_.template('<div class="holder">\n  <div class="pagination-wrapper upper"></div>\n  <div class="clear">\n    <div id="actions" class="pull-left">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n    <a href="#" class="info-icon">\n      <span class="hide-text">{{ I18n.t(\'ui.users.itag\') }}</span>\n    </a>\n  </div>\n\n  <div class="holder">\n\n    <div id="users">\n      \x3c!-- <div class="loader"></div> --\x3e\n    </div>\n\n    <div id="preview">\n      \x3c!--div class="loader"></div--\x3e\n    </div>\n\n  </div>\n</div>\n');
window.JST["global/users/list/pagination"]=_.template('{% if (currentPage < totalPages) { %}\n  <div class=\'infinite-pagination pagination-centered\'>\n    <a href="#" class="btn long all">{{ I18n.t(\'ui.pagination.show_all\') }}</a>\n    <a href="#" class="btn long servernext">{{ I18n.t(\'ui.pagination.show_more\') }}</a>\n  </div>\n{% } %}');window.JST["global/users/manage/student/form"]=_.template('<div class="control-group" data-restricted data-action="read" data-permissions="users/create/user/first_name">\n  <label class="control-label" for="first_name">{{ I18n.t(\'activerecord.attributes.user.first_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="first_name" type="text" maxlength="{{gon.limits.user.first_name}}"\n      {[ can(\'write\', \'users/create/user/first_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n\n<div class="control-group" data-restricted data-action="read" data-permissions="users/create/user/last_name">\n  <label class="control-label" for="last_name">{{ I18n.t(\'activerecord.attributes.user.last_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="last_name" type="text" maxlength="{{gon.limits.user.last_name}}"\n      {[ can(\'write\', \'users/create/user/last_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n\n<div class="control-group" data-restricted data-action="read" data-permissions="users/create/user/email">\n  <label class="control-label" for="email">{{ I18n.t(\'activerecord.attributes.teacher.email\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="email" type="text" maxlength="{{gon.limits.user.email}}"\n      {[ can(\'write\', \'users/create/user/email\') ? \'\' : \'disabled="disabled"\' ]} />\n  </div>\n</div>\n\n<div class="control-group" data-restricted data-action="read" data-permissions="users/create/user/username">\n  <label class="control-label" for="username">{{ I18n.t(\'activerecord.attributes.user.username\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="username" type="text" maxlength="{{gon.limits.user.username}}"\n      {[ can(\'write\', \'users/create/user/username\') ? \'\' : \'disabled="disabled"\' ]} />\n  </div>\n</div>\n\n<div class="control-group" data-restricted data-action="read" data-permissions="users/create/user/userid">\n  <label class="control-label" for="userid">{{ I18n.t(\'activerecord.attributes.student.userid\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="userid" type="text" maxlength="{{gon.limits.user.userid}}"\n      {[ can(\'write\', \'users/create/user/userid\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n\n{% if (showPasswordResetOption()) { %}\n<div class="control-group reset-password" data-restricted data-action="write" data-permissions="users/create/user/password/{{ type.toLowerCase() }}">\n  <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n  <div class="controls">\n    <input class="input-xlarge" name="reset_password" type="checkbox" />\n  </div>\n</div>\n{% } %}\n\n<div class="controls">\n  <p class="help-block">\n    <span class="required">*</span> {{ I18n.t(\'ui.common.required\') }}\n  </p>\n</div>');
window.JST["global/users/manage/student/layout"]=_.template('<form class="form-horizontal modal-form row-fluid">\n  <div class="modal-header">\n    <h3>{{ I18n.t(\'ui.create.student.title\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n  \n  <div class="modal-body">\n    <div id="user-fields" class="span7"></div>\n    <div id="groups-tree" class="span5">\n      <p>{{ I18n.t(\'ui.create.student.add_to_groups\') }}</p>\n      <div id="groups-tree-content" class="modal-node-tree dialog-fix"></div>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.save\') }}" />\n  </div>\n</form>\n');
window.JST["global/users/manage/teacher/course"]=_.template("<div class='inline-list-wrapper'>\n  <input id=\"course-{{ id }}\" value=\"{{ id }}\" type=\"checkbox\" {{ checked ? 'checked=\"checked\"' : '' }} name='course_ids[]' />\n  <label for='course-{{ id }}'>{{ name }}</label>\n</div>");window.JST["global/users/manage/teacher/form"]=_.template('{% if (can(\'read\', \'users/create/user/first_name\')) { %}\n<div class="control-group">\n  <label class="control-label" for="first_name">{{ I18n.t(\'activerecord.attributes.user.first_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="first_name" type="text" maxlength="{{gon.limits.user.first_name}}"\n      {[ can(\'write\', \'users/create/user/first_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/last_name\')) { %}\n<div class="control-group">\n  <label class="control-label" for="last_name">{{ I18n.t(\'activerecord.attributes.user.last_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="last_name" type="text" maxlength="{{gon.limits.user.last_name}}"\n      {[ can(\'write\', \'users/create/user/last_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/display_name\')) { %}\n<div class="control-group">\n  <label class="control-label" for="name">{{ I18n.t(\'activerecord.attributes.teacher.display_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="display_name" type="text" maxlength="{{gon.limits.user.display_name}}"\n      {[ can(\'write\', \'users/create/user/display_name\') ? \'\' : \'disabled="disabled"\' ]} />\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/email\')) { %}\n<div class="control-group">\n  <label class="control-label" for="email">{{ I18n.t(\'activerecord.attributes.teacher.email\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="email" type="text" maxlength="{{gon.limits.user.email}}"\n      {[ can(\'write\', \'users/create/user/email\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>      \n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/username\')) { %}\n<div class="control-group">\n  <label class="control-label" for="username">{{ I18n.t(\'activerecord.attributes.user.username\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="username" type="text" maxlength="{{gon.limits.user.username}}"\n      {[ can(\'write\', \'users/create/user/username\') ? \'\' : \'disabled="disabled"\' ]} />\n  </div>\n</div>\n{% } %}\n\n\n<div class="controls">\n  <p class="help-block">\n    <span class="required">*</span> {{ I18n.t(\'ui.common.required\') }}\n  </p>\n</div>');
window.JST["global/users/manage/teacher/layout"]=_.template('<form class="form-horizontal modal-form row-fluid">\n  <div class="modal-header">\n    <h3>{{ I18n.t(\'ui.create.teacher.title\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="modal-body">\n    <div id="teacher-form"></div>\n    {% if(canShowCourses()) { %}\n    <hr />\n    <div id="teacher-courses">\n      <p>{{ I18n.t(\'ui.create.teacher.add_to_courses\') }}</p>\n      <div id="teacher-courses-content"></div>\n    </div>\n    {% } %}\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.save\') }}" />\n  </div>\n</form>\n');
window.JST["global/users/manage/user/course"]=_.template("<div class='inline-list-wrapper'>\n  <input type=\"checkbox\" {{ checked ? 'checked=\"checked\"' : '' }} name='create-user-course-{{ id }}' id='create-user-course-{{ id }}'/>\n  <label for='create-user-course-{{ id }}'>{{ name }}</label>\n</div>");window.JST["global/users/manage/user/form"]=_.template('{% if (can(\'read\', \'users/create/user/first_name\')) { %}\n<div class="control-group">\n  <label class="control-label" for="first_name">{{ I18n.t(\'ui.create.user.first_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="first_name" type="text" maxlength="{{gon.limits.user.first_name}}"\n      {[ can(\'write\', \'users/create/user/first_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/last_name\')) { %}\n<div class="control-group">\n  <label class="control-label" for="last_name">{{ I18n.t(\'ui.create.user.last_name\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="last_name" type="text" maxlength="{{gon.limits.user.last_name}}"\n      {[ can(\'write\', \'users/create/user/last_name\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/email\')) { %}\n<div class="control-group">\n  <label class="control-label" for="email">{{ I18n.t(\'ui.create.user.email\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="email" type="text" maxlength="{{gon.limits.user.email}}"\n      {[ can(\'write\', \'users/create/user/email\') ? \'\' : \'disabled="disabled"\' ]} />\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/username\')) { %}\n<div class="control-group">\n  <label class="control-label" for="username">{{ I18n.t(\'ui.create.user.username\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="username" type="text" maxlength="{{gon.limits.user.username}}"\n      {[ can(\'write\', \'users/create/user/username\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'write\', \'users/create/user/password/\' + type.toLowerCase()) && !isNew) { %}\n<div class="control-group">\n  <label class="control-label" for="reset_password">{{ I18n.t(\'ui.create.user.password_reset\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="reset_password" type="checkbox" />\n  </div>\n</div>\n{% } %}\n\n{% if (can(\'read\', \'users/create/user/userid\')) { %}\n<div class="control-group">\n  <label class="control-label" for="userid">{{ I18n.t(\'ui.create.user.userid\') }}</label>\n  <div class="controls">\n    <input class="row-fluid" name="userid" type="text" maxlength="{{gon.limits.user.userid}}"\n      {[ can(\'write\', \'users/create/user/userid\') ? \'\' : \'disabled="disabled"\' ]} />\n    <span class="required">*</span>\n  </div>\n</div>\n{% } %}\n\n<div class="control-group">\n  <div class="controls">\n    <p class="help-block">\n      {{ I18n.t(\'ui.common.required\') }}\n    </p>\n  </div>\n</div>\n');
window.JST["global/users/manage/user/layout"]=_.template('<form class="form-horizontal modal-form">\n  <div class="modal-header">\n    <h3>{{ isNew ? I18n.t(\'ui.create.user.title\') : I18n.t(\'ui.create.user.title_edit\') }}</h3>\n    <button type="button" class="button button--icon button--close" aria-label="{{ I18n.t(\'ui.common.close\') }}"\n            data-dismiss="modal">\n      <svg viewBox="0 0 1 1">\n        <use xlink:href="#svg__streamline-close"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div id="create-user-fields">\n    <div class="modal-body">\n      <div id="create-user-fields-content"></div>\n      <div class="control-group">\n        <label class="control-label" for="first_name">{{ I18n.t(\'ui.create.user.courses\') }}</label>\n        <div class="controls">\n          <div id="create-user-courses"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ isNew ? I18n.t(\'ui.common.create\') : I18n.t(\'ui.common.submit\') }}" />\n  </div>\n</form>\n');
window.JST["global/users/search"]=_.template('<form class="form-search">\n  <div id="search-box" class="btn-group row-fluid">\n    <div class="search-box-container">\n      <div class="btn-group" id="search-input">\n        <input name="query" type="text" class="advanced-search-query" placeholder="{{ I18n.t(\'ui.search.users.placeholder\') }}">\n        <a href="#" id="cancel-search" class="hide"><i class="icon-remove-sign"></i></a>\n      </div>\n    </div>\n  </div>\n  <button type="submit" class="btn btn-advanced-search btn-default">{{ I18n.t(\'ui.search.submit\') }}</button>\n</form>\n');
window.JST["global/users/tree/filter"]=_.template('<a href="#">\n  <i class="icon-{{ name }}"></i>\n  {{ I18n.t(\'ui.filters.\' + name) }}\n</a>\n');window.JST["global/users/tree/layout"]=_.template('<div class="container-fluid holder">\n\n  <div id="filters">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n  <ul class="nav nav-list">\n    <li class="divider"></li>\n  </ul>\n\n  <div id="groups">\n    \x3c!-- <div class="loader"></div> --\x3e\n  </div>\n\n</div>\n');window.JST["header/layout"]=
_.template('<a class="a11y-hide-focusable" href="#maincontent">{{ I18n.t(\'ui.header.skip.content\') }}</a>\n<nav aria-label="Primary">\n  <ul class="grid">\n    <li class="brand">\n      <a href="/">\n        <h1 class="a11y-hide">Kerboodle</h1>\n        <svg tabindex="-1" focusable="false" aria-hidden="true" class="brand__logo hidden visible--l" viewBox="0 0 45.203 12.812">\n          <use xlink:href="#svg__kerboodle-logo"></use>\n        </svg>\n        <svg tabindex="-1" focusable="false" aria-hidden="true" class="brand__logo hidden--l" viewBox="0 0 1 1">\n          <use xlink:href="#svg__kerboodle-mark"></use>\n        </svg>\n        <svg tabindex="-1" focusable="false" aria-hidden="true" class="brand__home" viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-home"></use>\n        </svg>\n      </a>\n    </li>\n    <li class="separator"></li>\n    <li id="nav-notifications"></li>\n    <li id="nav-help">\n      <a href="/app/help">\n        <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n          <use xlink:href="#svg__streamline-help"></use>\n        </svg>\n        <span class="a11y-hide">{{ I18n.t(\'ui.header.help\') }}</span>\n      </a>\n    </li>\n    <li id="nav-profile"></li>\n  </ul>\n</nav>\n<div class="activateProductPanel__container"></div>\n');
window.JST["header/notifications"]=_.template('<a href="/app/notifications">\n  <svg tabindex="-1" focusable="false" aria-hidden="true" viewBox="0 0 1 1">\n    <use xlink:href="#svg__bell"></use>\n  </svg>\n  <span class="badge {{ unread > 0 ? \'\' : \'badge--darkMuted\' }}">{{ unread }}</span>\n  <span class="screen-reader-only"> {{ I18n.t(\'ui.header.notifications\') }}</span>\n</a>  ');window.JST["header/profile"]=_.template('<button aria-haspopup="listbox" aria-expanded="false" class="dropdown__toggle" aria-label="{{ I18n.t(\'ui.header.profile_title\') }}">\n  {{ nameInitials() }}\n</button>\n<ul role="menu" class="dropdown__menu">\n  <li role="menuitem">\n    <a role="button" data-action="profile" class="dropdown__item">\n      {{ I18n.t(\'ui.header.my_profile\') }}\n    </a>\n  </li>\n  {% if (showActivateProductButton()) { %}\n    <li role="menuitem">\n      <a role="button" data-action="activateProduct" class="dropdown__item">\n        {{ I18n.t(\'ui.homepage.activate_product.button_label\') }}\n      </a>\n    </li>\n  {% } %}\n  <li role="menuitem">\n    <a role="button" data-action="{{ gon.impersonateUser ? \'finish\' : \'signout\' }}" class="dropdown__item" href="{{ gon.impersonateUser ? \'/refinery/users/stop_impersonating\' : \'/users/logout\' }}">\n      {{ gon.impersonateUser ? I18n.t(\'ui.header.finish\') : I18n.t(\'ui.header.signout\') }}\n    </a>\n  </li>\n</ul>');
window.JST["notifications/archived_toggler"]=_.template('<a href="#" class="archived">{{ text() }}</a>\n');window.JST["notifications/category"]=_.template('<a href="#" class="{{ name }}">\n\t<span>\n\t\t{{ tab_title }}\n\t</span>\n \t{% if (unread > 0) { %}\n  \t<span class="badge">{{ unread }}</span>\n \t{% } %}\n</a>\n');window.JST["notifications/foot"]=_.template("<div class=\"no-items\">  \n  {{ I18n.t('ui.notifications.nonotifications') }}\n</div>\n");window.JST["notifications/head"]=_.template('<div class="row-fluid">\n  <div class="span3">\n    {{ I18n.t(\'ui.notifications.sender\') }}\n  </div>\n  <div class="span5">\n    {{ I18n.t(\'ui.notifications.subject\') }}\n  </div>\n  <div class="span2">\n    {{ I18n.t(\'ui.notifications.sent\') }}\n  </div>\n  <div class="span2">\n    &nbsp;\n  </div>\n</div>\n');
window.JST["notifications/layout"]=_.template('<div class="modal-header">\n  <a href="#" class="close" data-dismiss="modal">&nbsp;</a>\n  <h3>{{ I18n.t(\'ui.notifications.title\') }}</h3>\n</div>\n\n<div class="modal-body">\n  <ul class="nav nav-tabs">\n    <li class="active">\n      <a href="#current-pane"><span>{{ I18n.t(\'ui.notifications.current\') }}</span></a>\n    </li>\n    <li>\n      <a href="#archived-pane" class="archived-tab"><span>{{ I18n.t(\'ui.notifications.archived\') }}</span></a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane active" id="current-pane">\n      <div id="notifications-pagination" class="pagination-wrapper"></div>\n      <div id="notifications" class="items">\n        <div class="loader"></div>\n      </div>\n    </div>\n    <div class="tab-pane" id="archived-pane">\n      <div id="archived-pagination" class="pagination-wrapper"></div>\n      <div id="archived" class="items">\n        <div class="loader"></div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer"></div>\n');
window.JST["notifications/list"]=_.template('<div class="head-wrapper"></div>\n<div class="body-wrapper" tabindex="-1"></div>\n');window.JST["notifications/notification"]=_.template('<div class="accordion-group">\n  <div class="accordion-heading">    \n    <a class="accordion-toggle row-fluid" data-toggle="collapse" data-parent="#notifications" href="#collapse-{{ id }}">\n      <span class="sender span3">{{ sender || I18n.t(\'ui.notifications.nosender\') }}</span>\n      <span class="subject span5">{{ subject }}</span>\n      <time class="timeago span2" datetime="{{ sent }}">{{ sent }}</time>\n    </a>\n    {% if(!archived) { %}\n    <a href="#" class="archive">{{ I18n.t(\'ui.notifications.archive\') }}</a>\n    {% } %}\n  </div>\n  <div id="collapse-{{ id }}" class="accordion-body collapse">\n    <div class="accordion-inner row-fluid">\n      <span class="span3">&nbsp;</span>\n      <span class="span5">{[ body ]}</span>\n    </div>\n  </div>\n</div>\n');
window.JST["notifications/preview"]=_.template('<td>\n  <span class="sender">{{ sender || I18n.t(\'ui.notifications.nosender\') }}</span>\n</td>\n<td>\n  <span class="subject">{{ subject }}</span>\n</td>\n<td>\n  <time class="timeago" datetime="{{ sent }}">{{ sent }}</time>\n</td>\n');window.JST["preview/label"]=_.template('<span class="label label-info">{{ name }}</span>\n<span class="label label-default">{{ course }}</span>\n');window.JST["profile/form"]=_.template('<form class="form-horizontal modal-form">\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/first_name">\n    <label class="control-label" for="first_name">{{ I18n.t(\'ui.profile.first_name\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="first_name" type="text"\n        {[ can(\'write\', \'profile/first_name\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.first_name}}" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/last_name">\n    <label class="control-label" for="last_name">{{ I18n.t(\'ui.profile.last_name\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="last_name" type="text"\n        {[ can(\'write\', \'profile/last_name\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.last_name}}" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/display_name">\n    <label class="control-label" for="display_name">{{ I18n.t(\'ui.profile.display_name\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="display_name" type="text"\n        {[ can(\'write\', \'profile/display_name\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.display_name}}" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/email">\n    <label class="control-label" for="email">{{ I18n.t(\'ui.profile.email\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="email" type="text"\n        {[ can(\'write\', \'profile/email\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.email}}" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/username">\n    <label class="control-label" for="username">{{ I18n.t(\'ui.profile.username\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="username" type="text"\n        {[ can(\'write\', \'profile/username\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.username}}" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/userid">\n    <label class="control-label" for="userid">{{ I18n.t(\'ui.profile.userid\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="userid" type="text"\n        {[ can(\'write\', \'profile/userid\') ? \'\' : \'disabled="disabled"\' ]} maxlength="{{gon.limits.user.userid}}" />\n    </div>\n  </div>\n\n  {% if (!must_change_password) { %}\n  <div class="control-group">\n    <label class="control-label" for="current_password">{{ I18n.t(\'ui.profile.current_password\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="current_password" type="password" />\n    </div>\n  </div>\n  {% } %}\n\n  <div class="control-group">\n    <div class="controls">\n      <p class="help-block">\n        {{ I18n.t(\'ui.profile.new_password_hint.\' + type) }}\n      </p>\n    </div>\n  </div>\n\n  <div class="control-group">\n    <label class="control-label" for="password">{{ I18n.t(\'ui.profile.password\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="password" type="password" />\n    </div>\n  </div>\n\n  <div class="control-group">\n    <label class="control-label" for="password_confirmation">{{ I18n.t(\'ui.profile.password_confirmation\') }}</label>\n    <div class="controls">\n      <input class="row-fluid" name="password_confirmation" type="password" />\n    </div>\n  </div>\n\n  <div class="control-group" data-restricted data-action="read" data-permissions="profile/courses">\n    <label class="control-label" for="courses">{{ I18n.t(\'ui.profile.courses\') }}</label>\n    <div class="controls">\n      <span class=\'field\'>{{ courses }}</span>\n    </div>\n  </div>\n\n  <div id="school-info" class="control-group" data-restricted data-profile="teacher,administrator">\n    <hr>\n    <h4>{{ I18n.t(\'ui.profile.school_info.header\') }}</h4>\n    <ul class="controls">\n      <li>{{ I18n.t(\'ui.profile.school_info.school_name\') }}: {{ school.name }}</li>\n      <li>{{ I18n.t(\'ui.profile.school_info.school_account\') }}: {{ school.account }}</li>\n      <li>{{ I18n.t(\'ui.profile.school_info.school_code\') }}: {{ school.code }}</li>\n    </ul>\n  </div>\n\n\n  <div id="school-info" class="control-group" data-restricted data-profile="student">\n    <hr>\n    <h4>{{ I18n.t(\'ui.profile.school_info.header\') }}</h4>\n    <ul class="controls">\n      <li>{{ I18n.t(\'ui.profile.school_info.school_code\') }}: {{ school.code }}</li>\n    </ul>\n  </div>\n\n</form>\n');
window.JST["profile/layout"]=_.template('  <div class="modal-header">\n    {% if (!must_change_password) { %}<a class="close" data-dismiss="modal">&nbsp;</a>{% } %}\n    <h3>{{ I18n.t(\'ui.profile.title\') }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <div id="profile-form"></div>\n  </div>\n\n  <div class="modal-footer">\n    <input class="btn btn-primary" type="submit" value="{{ I18n.t(\'ui.common.submit\') }}" />\n  </div>    \n')})();
